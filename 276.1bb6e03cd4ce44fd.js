(self.webpackChunkspear=self.webpackChunkspear||[]).push([[276,5603,9880,9634,6071,5436,9710,9364,5783,5737,52,8032],{30276:(pe,N,S)=>{S.r(N);var M={};S.r(M),S.d(M,{getUserAgentPrefix:()=>lD,isVirtualHostableS3Bucket:()=>tL,parseArn:()=>nL,partition:()=>QZ,setPartitionInfo:()=>cD,useDefaultPartitionInfo:()=>JZ});var q={};S.r(q),S.d(q,{aws:()=>M,booleanEquals:()=>rL,getAttr:()=>pD,isSet:()=>oL,isValidHostLabel:()=>fD,not:()=>aL,parseURL:()=>sL,stringEquals:()=>uL,substring:()=>cL,uriEncode:()=>lL});var Z=S(15019),r=S(56718),_=S(48047),p=S(78069),g=S(32090),y=S(86170),E=S(94055),O=S(3267),$=S(33401),v=S(69542),b=S(35603),V=S(62902),G=S(24582),H=S(28694),te=S(95106),z=S(76317),W=S(90833),J=S(36646),se=S(50253);function ve(a){for(var n in a){var t,e=null!==(t=a[n])&&void 0!==t?t:"";switch(n){case"display":a.display="flex"===e?["-webkit-flex","flex"]:"inline-flex"===e?["-webkit-inline-flex","inline-flex"]:e;break;case"align-items":case"align-self":case"align-content":case"flex":case"flex-basis":case"flex-flow":case"flex-grow":case"flex-shrink":case"flex-wrap":case"justify-content":a["-webkit-"+n]=e;break;case"flex-direction":a["-webkit-flex-direction"]=e,a["flex-direction"]=e;break;case"order":a.order=a["-webkit-"+n]=isNaN(+e)?"0":e}}return a}var xe="inline",ge=["row","column","row-reverse","column-reverse"];function x(a){var n=D(a),t=(0,g.Z)(n,3);return function j(a){return{display:arguments.length>2&&void 0!==arguments[2]&&arguments[2]?"inline-flex":"flex","box-sizing":"border-box","flex-direction":a,"flex-wrap":(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)||null}}(t[0],t[1],t[2])}function D(a){var n,t,e=(a=null!==(n=null===(t=a)||void 0===t?void 0:t.toLowerCase())&&void 0!==n?n:"").split(" "),o=(0,g.Z)(e,3),s=o[0],u=o[1],c=o[2];return ge.find(function(l){return l===s})||(s=ge[0]),u===xe&&(u=c!==xe?c:"",c=xe),[s,I(u),!!c]}function P(a){var n=D(a);return(0,g.Z)(n,1)[0].indexOf("row")>-1}function I(a){if(a)switch(a.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":a="wrap-reverse";break;case"no":case"none":case"nowrap":a="nowrap";break;default:a="wrap"}return a}function R(a){if(null==a)throw TypeError("Cannot convert undefined or null to object");for(var n=arguments.length,t=new Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];for(var o=0,s=t;o<s.length;o++){var u=s[o];if(null!=u)for(var c in u)u.hasOwnProperty(c)&&(a[c]=u[c])}return a}var Q=S(60116),ee=S(19337),ne={provide:r.APP_BOOTSTRAP_LISTENER,useFactory:function Re(a,n){return function(){if((0,E.isPlatformBrowser)(n)){var t=Array.from(a.querySelectorAll("[class*=".concat(Fe,"]"))),e=/\bflex-layout-.+?\b/g;t.forEach(function(o){o.classList.contains("".concat(Fe,"ssr"))&&o.parentNode?o.parentNode.removeChild(o):o.className.replace(e,"")})}}},deps:[E.DOCUMENT,r.PLATFORM_ID],multi:!0},Fe="flex-layout-",rt=function(){var a=(0,_.Z)(function n(){(0,p.Z)(this,n)});return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({providers:[ne]}),a}(),Te=function(){function a(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all",e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;(0,p.Z)(this,a),this.matches=n,this.mediaQuery=t,this.mqAlias=e,this.suffix=o,this.priority=s,this.property=""}return(0,_.Z)(a,[{key:"clone",value:function(){return new a(this.matches,this.mediaQuery,this.mqAlias,this.suffix)}}]),a}(),tt=function(){var a=function(){function n(){(0,p.Z)(this,n),this.stylesheet=new Map}return(0,_.Z)(n,[{key:"addStyleToElement",value:function(e,o,s){var u=this.stylesheet.get(e);u?u.set(o,s):this.stylesheet.set(e,new Map([[o,s]]))}},{key:"clearStyles",value:function(){this.stylesheet.clear()}},{key:"getStyleForElement",value:function(e,o){var s=this.stylesheet.get(e),u="";if(s){var c=s.get(o);("number"==typeof c||"string"==typeof c)&&(u=c+"")}return u}}]),n}();return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),Qe={addFlexToParent:!0,addOrientationBps:!1,disableDefaultBps:!1,disableVendorPrefixes:!1,serverLoaded:!1,useColumnBasisZero:!0,printWithBreakpoints:[],mediaTriggerAutoRestore:!0,ssrObserveBreakpoints:[],multiplier:void 0,defaultUnit:"px",detectLayoutDisplay:!1},vt=new r.InjectionToken("Flex Layout token, config options for the library",{providedIn:"root",factory:function(){return Qe}}),et=new r.InjectionToken("FlexLayoutServerLoaded",{providedIn:"root",factory:function(){return!1}}),$e=new r.InjectionToken("Flex Layout token, collect all breakpoints into one provider",{providedIn:"root",factory:function(){return null}});function it(a,n){var t,e;return a=null!==(t=null===(e=a)||void 0===e?void 0:e.clone())&&void 0!==t?t:new Te,n&&(a.mqAlias=n.alias,a.mediaQuery=n.mediaQuery,a.suffix=n.suffix,a.priority=n.priority),a}var de=function(){function a(){(0,p.Z)(this,a),this.shouldCache=!0}return(0,_.Z)(a,[{key:"sideEffect",value:function(t,e,o){}}]),a}(),Y=function(){var a=function(){function n(t,e,o,s){(0,p.Z)(this,n),this._serverStylesheet=t,this._serverModuleLoaded=e,this._platformId=o,this.layoutConfig=s}return(0,_.Z)(n,[{key:"applyStyleToElement",value:function(e,o){var u={};"string"==typeof o&&(u[o]=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=u),u=this.layoutConfig.disableVendorPrefixes?o:ve(o),this._applyMultiValueStyleToElement(u,e)}},{key:"applyStyleToElements",value:function(e){var o=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],u=this.layoutConfig.disableVendorPrefixes?e:ve(e);s.forEach(function(c){o._applyMultiValueStyleToElement(u,c)})}},{key:"getFlowDirection",value:function(e){var o="flex-direction",s=this.lookupStyle(e,o);return[s||"row",this.lookupInlineStyle(e,o)||(0,E.isPlatformServer)(this._platformId)&&this._serverModuleLoaded?s:""]}},{key:"hasWrap",value:function(e){return"wrap"===this.lookupStyle(e,"flex-wrap")}},{key:"lookupAttributeValue",value:function(e,o){var s;return null!==(s=e.getAttribute(o))&&void 0!==s?s:""}},{key:"lookupInlineStyle",value:function(e,o){return(0,E.isPlatformBrowser)(this._platformId)?e.style.getPropertyValue(o):function oe(a,n){var t;return null!==(t=fe(a)[n])&&void 0!==t?t:""}(e,o)}},{key:"lookupStyle",value:function(e,o){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],u="";return e&&((u=this.lookupInlineStyle(e,o))||((0,E.isPlatformBrowser)(this._platformId)?s||(u=getComputedStyle(e).getPropertyValue(o)):this._serverModuleLoaded&&(u=this._serverStylesheet.getStyleForElement(e,o)))),u?u.trim():""}},{key:"_applyMultiValueStyleToElement",value:function(e,o){var s=this;Object.keys(e).sort().forEach(function(u){var c=e[u],l=Array.isArray(c)?c:[c];l.sort();var C,m=(0,te.Z)(l);try{for(m.s();!(C=m.n()).done;){var T=C.value;T=T?T+"":"",(0,E.isPlatformBrowser)(s._platformId)||!s._serverModuleLoaded?(0,E.isPlatformBrowser)(s._platformId)?o.style.setProperty(u,T):ke(o,u,T):s._serverStylesheet.addStyleToElement(o,u,T)}}catch(B){m.e(B)}finally{m.f()}})}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(tt),r.\u0275\u0275inject(et),r.\u0275\u0275inject(r.PLATFORM_ID),r.\u0275\u0275inject(vt))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}();function ke(a,n,t){n=n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();var e=fe(a);e[n]=t??"",function Be(a,n){var t="";for(var e in n)n[e]&&(t+="".concat(e,":").concat(n[e],";"));a.setAttribute("style",t)}(a,e)}function fe(a){var n={},t=a.getAttribute("style");if(t)for(var e=t.split(/;+/g),o=0;o<e.length;o++){var s=e[o].trim();if(s.length>0){var u=s.indexOf(":");if(-1===u)throw new Error("Invalid CSS style: ".concat(s));n[s.substr(0,u).trim()]=s.substr(u+1).trim()}}return n}function ye(a,n){return(n&&n.priority||0)-(a&&a.priority||0)}function ut(a,n){return(a.priority||0)-(n.priority||0)}var be=function(){var a=function(){function n(t,e,o){(0,p.Z)(this,n),this._zone=t,this._platformId=e,this._document=o,this.source=new z.X(new Te(!0)),this.registry=new Map,this.pendingRemoveListenerFns=[],this._observable$=this.source.asObservable()}return(0,_.Z)(n,[{key:"activations",get:function(){var e=[];return this.registry.forEach(function(o,s){o.matches&&e.push(s)}),e}},{key:"isActive",value:function(e){var o,s=this.registry.get(e);return null!==(o=s?.matches)&&void 0!==o?o:this.registerQuery(e).some(function(u){return u.matches})}},{key:"observe",value:function(e){var o=this,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e&&e.length){var u=this._observable$.pipe((0,Q.h)(function(l){return!s||e.indexOf(l.mediaQuery)>-1})),c=new W.y(function(l){var m=o.registerQuery(e);if(m.length){var C=m.pop();m.forEach(function(T){l.next(T)}),o.source.next(C)}l.complete()});return(0,J.T)(c,u)}return this._observable$}},{key:"registerQuery",value:function(e){var o=this,s=Array.isArray(e)?e:[e],u=[];return function ce(a,n){var t=a.filter(function(u){return!le[u]});if(t.length>0){var e=t.join(", ");try{var o=n.createElement("style");if(o.setAttribute("type","text/css"),!o.styleSheet){var s="\n/*\n  @angular/flex-layout - workaround for possible browser quirk with mediaQuery listeners\n  see http://bit.ly/2sd4HMP\n*/\n@media ".concat(e," {.fx-query-test{ }}\n");o.appendChild(n.createTextNode(s))}n.head.appendChild(o),t.forEach(function(u){return le[u]=o})}catch(u){console.error(u)}}}(s,this._document),s.forEach(function(c){var l=function(T){o._zone.run(function(){return o.source.next(new Te(T.matches,c))})},m=o.registry.get(c);m||((m=o.buildMQL(c)).addListener(l),o.pendingRemoveListenerFns.push(function(){return m.removeListener(l)}),o.registry.set(c,m)),m.matches&&u.push(new Te(!0,c))}),u}},{key:"ngOnDestroy",value:function(){for(var e;e=this.pendingRemoveListenerFns.pop();)e()}},{key:"buildMQL",value:function(e){return function ot(a,n){return n&&!!window.matchMedia("all").addListener?window.matchMedia(a):function Ie(a){var n=new EventTarget;return n.matches="all"===a||""===a,n.media=a,n.addListener=function(){},n.removeListener=function(){},n.addEventListener=function(){},n.dispatchEvent=function(){return!1},n.onchange=null,n}(a)}(e,(0,E.isPlatformBrowser)(this._platformId))}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(r.NgZone),r.\u0275\u0275inject(r.PLATFORM_ID),r.\u0275\u0275inject(E.DOCUMENT))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),le={},Tt=[{alias:"xs",mediaQuery:"screen and (min-width: 0px) and (max-width: 599.98px)",priority:1e3},{alias:"sm",mediaQuery:"screen and (min-width: 600px) and (max-width: 959.98px)",priority:900},{alias:"md",mediaQuery:"screen and (min-width: 960px) and (max-width: 1279.98px)",priority:800},{alias:"lg",mediaQuery:"screen and (min-width: 1280px) and (max-width: 1919.98px)",priority:700},{alias:"xl",mediaQuery:"screen and (min-width: 1920px) and (max-width: 4999.98px)",priority:600},{alias:"lt-sm",overlapping:!0,mediaQuery:"screen and (max-width: 599.98px)",priority:950},{alias:"lt-md",overlapping:!0,mediaQuery:"screen and (max-width: 959.98px)",priority:850},{alias:"lt-lg",overlapping:!0,mediaQuery:"screen and (max-width: 1279.98px)",priority:750},{alias:"lt-xl",overlapping:!0,priority:650,mediaQuery:"screen and (max-width: 1919.98px)"},{alias:"gt-xs",overlapping:!0,mediaQuery:"screen and (min-width: 600px)",priority:-950},{alias:"gt-sm",overlapping:!0,mediaQuery:"screen and (min-width: 960px)",priority:-850},{alias:"gt-md",overlapping:!0,mediaQuery:"screen and (min-width: 1280px)",priority:-750},{alias:"gt-lg",overlapping:!0,mediaQuery:"screen and (min-width: 1920px)",priority:-650}],Nt="(orientation: portrait) and (max-width: 599.98px)",Gt="(orientation: landscape) and (max-width: 959.98px)",un="(orientation: portrait) and (min-width: 600px) and (max-width: 839.98px)",Xt="(orientation: landscape) and (min-width: 960px) and (max-width: 1279.98px)",Kn="(orientation: portrait) and (min-width: 840px)",zn="(orientation: landscape) and (min-width: 1280px)",De={HANDSET:"".concat(Nt,", ").concat(Gt),TABLET:"".concat(un," , ").concat(Xt),WEB:"".concat(Kn,", ").concat(zn," "),HANDSET_PORTRAIT:"".concat(Nt),TABLET_PORTRAIT:"".concat(un," "),WEB_PORTRAIT:"".concat(Kn),HANDSET_LANDSCAPE:"".concat(Gt),TABLET_LANDSCAPE:"".concat(Xt),WEB_LANDSCAPE:"".concat(zn)},Zr=[{alias:"handset",priority:2e3,mediaQuery:De.HANDSET},{alias:"handset.landscape",priority:2e3,mediaQuery:De.HANDSET_LANDSCAPE},{alias:"handset.portrait",priority:2e3,mediaQuery:De.HANDSET_PORTRAIT},{alias:"tablet",priority:2100,mediaQuery:De.TABLET},{alias:"tablet.landscape",priority:2100,mediaQuery:De.TABLET_LANDSCAPE},{alias:"tablet.portrait",priority:2100,mediaQuery:De.TABLET_PORTRAIT},{alias:"web",priority:2200,mediaQuery:De.WEB,overlapping:!0},{alias:"web.landscape",priority:2200,mediaQuery:De.WEB_LANDSCAPE,overlapping:!0},{alias:"web.portrait",priority:2200,mediaQuery:De.WEB_PORTRAIT,overlapping:!0}],ar=/(\.|-|_)/g;function Qt(a){var n=a.length>0?a.charAt(0):"",t=a.length>1?a.slice(1):"";return n.toUpperCase()+t}var Pt=new r.InjectionToken("Token (@angular/flex-layout) Breakpoints",{providedIn:"root",factory:function(){var n=(0,r.inject)($e),t=(0,r.inject)(vt),e=[].concat.apply([],(n||[]).map(function(s){return Array.isArray(s)?s:[s]}));return function yt(a){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t={};return a.forEach(function(e){t[e.alias]=e}),n.forEach(function(e){t[e.alias]?R(t[e.alias],e):t[e.alias]=e}),function Ai(a){return a.forEach(function(n){n.suffix||(n.suffix=function Co(a){return a.replace(ar,"|").split("|").map(Qt).join("")}(n.alias),n.overlapping=!!n.overlapping)}),a}(Object.keys(t).map(function(e){return t[e]}))}((t.disableDefaultBps?[]:Tt).concat(t.addOrientationBps?Zr:[]),e)}}),Pn=function(){var a=function(){function n(t){(0,p.Z)(this,n),this.findByMap=new Map,this.items=(0,y.Z)(t).sort(ut)}return(0,_.Z)(n,[{key:"findByAlias",value:function(e){return e?this.findWithPredicate(e,function(o){return o.alias===e}):null}},{key:"findByQuery",value:function(e){return this.findWithPredicate(e,function(o){return o.mediaQuery===e})}},{key:"overlappings",get:function(){return this.items.filter(function(e){return e.overlapping})}},{key:"aliases",get:function(){return this.items.map(function(e){return e.alias})}},{key:"suffixes",get:function(){return this.items.map(function(e){var o;return null!==(o=e?.suffix)&&void 0!==o?o:""})}},{key:"findWithPredicate",value:function(e,o){var s,c,u=this.findByMap.get(e);return u||(u=null!==(c=this.items.find(o))&&void 0!==c?c:null,this.findByMap.set(e,u)),null!==(s=u)&&void 0!==s?s:null}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Pt))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),Gn="print",Cn={alias:Gn,mediaQuery:Gn,priority:1e3},ln=function(){var a=function(){function n(t,e,o){(0,p.Z)(this,n),this.breakpoints=t,this.layoutConfig=e,this._document=o,this.registeredBeforeAfterPrintHooks=!1,this.isPrintingBeforeAfterEvent=!1,this.beforePrintEventListeners=[],this.afterPrintEventListeners=[],this.formerActivations=null,this.isPrinting=!1,this.queue=new Fr,this.deactivations=[]}return(0,_.Z)(n,[{key:"withPrintQuery",value:function(e){return[].concat((0,y.Z)(e),[Gn])}},{key:"isPrintEvent",value:function(e){return e.mediaQuery.startsWith(Gn)}},{key:"printAlias",get:function(){var e;return(0,y.Z)(null!==(e=this.layoutConfig.printWithBreakpoints)&&void 0!==e?e:[])}},{key:"printBreakPoints",get:function(){var e=this;return this.printAlias.map(function(o){return e.breakpoints.findByAlias(o)}).filter(function(o){return null!==o})}},{key:"getEventBreakpoints",value:function(e){var s=this.breakpoints.findByQuery(e.mediaQuery);return(s?[].concat((0,y.Z)(this.printBreakPoints),[s]):this.printBreakPoints).sort(ye)}},{key:"updateEvent",value:function(e){var s,u,o=this.breakpoints.findByQuery(e.mediaQuery);return this.isPrintEvent(e)&&(o=this.getEventBreakpoints(e)[0],e.mediaQuery=null!==(s=null===(u=o)||void 0===u?void 0:u.mediaQuery)&&void 0!==s?s:""),it(e,o)}},{key:"registerBeforeAfterPrintHooks",value:function(e){var o=this;if(this._document.defaultView&&!this.registeredBeforeAfterPrintHooks){this.registeredBeforeAfterPrintHooks=!0;var s=function(){o.isPrinting||(o.isPrintingBeforeAfterEvent=!0,o.startPrinting(e,o.getEventBreakpoints(new Te(!0,Gn))),e.updateStyles())},u=function(){o.isPrintingBeforeAfterEvent=!1,o.isPrinting&&(o.stopPrinting(e),e.updateStyles())};this._document.defaultView.addEventListener("beforeprint",s),this._document.defaultView.addEventListener("afterprint",u),this.beforePrintEventListeners.push(s),this.afterPrintEventListeners.push(u)}}},{key:"interceptEvents",value:function(e){var o=this;return function(s){o.isPrintEvent(s)?s.matches&&!o.isPrinting?(o.startPrinting(e,o.getEventBreakpoints(s)),e.updateStyles()):!s.matches&&o.isPrinting&&!o.isPrintingBeforeAfterEvent&&(o.stopPrinting(e),e.updateStyles()):o.collectActivations(e,s)}}},{key:"blockPropagation",value:function(){var e=this;return function(o){return!(e.isPrinting||e.isPrintEvent(o))}}},{key:"startPrinting",value:function(e,o){this.isPrinting=!0,this.formerActivations=e.activatedBreakpoints,e.activatedBreakpoints=this.queue.addPrintBreakpoints(o)}},{key:"stopPrinting",value:function(e){e.activatedBreakpoints=this.deactivations,this.deactivations=[],this.formerActivations=null,this.queue.clear(),this.isPrinting=!1}},{key:"collectActivations",value:function(e,o){if(!this.isPrinting||this.isPrintingBeforeAfterEvent){if(!this.isPrintingBeforeAfterEvent)return void(this.deactivations=[]);if(!o.matches){var s=this.breakpoints.findByQuery(o.mediaQuery);if(s){var u=this.formerActivations&&this.formerActivations.includes(s),c=!this.formerActivations&&e.activatedBreakpoints.includes(s);(u||c)&&(this.deactivations.push(s),this.deactivations.sort(ye))}}}}},{key:"ngOnDestroy",value:function(){var e=this;this._document.defaultView&&(this.beforePrintEventListeners.forEach(function(o){return e._document.defaultView.removeEventListener("beforeprint",o)}),this.afterPrintEventListeners.forEach(function(o){return e._document.defaultView.removeEventListener("afterprint",o)}))}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Pn),r.\u0275\u0275inject(vt),r.\u0275\u0275inject(E.DOCUMENT))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),Fr=function(){function a(){(0,p.Z)(this,a),this.printBreakpoints=[]}return(0,_.Z)(a,[{key:"addPrintBreakpoints",value:function(t){var e=this;return t.push(Cn),t.sort(ye),t.forEach(function(o){return e.addBreakpoint(o)}),this.printBreakpoints}},{key:"addBreakpoint",value:function(t){t&&void 0===this.printBreakpoints.find(function(o){return o.mediaQuery===t.mediaQuery})&&(this.printBreakpoints=function lr(a){var n;return null!==(n=a?.mediaQuery.startsWith(Gn))&&void 0!==n&&n}(t)?[t].concat((0,y.Z)(this.printBreakpoints)):[].concat((0,y.Z)(this.printBreakpoints),[t]))}},{key:"clear",value:function(){this.printBreakpoints=[]}}]),a}(),wn=function(){var a=function(){function n(t,e,o){(0,p.Z)(this,n),this.matchMedia=t,this.breakpoints=e,this.hook=o,this._useFallbacks=!0,this._activatedBreakpoints=[],this.elementMap=new Map,this.elementKeyMap=new WeakMap,this.watcherMap=new WeakMap,this.updateMap=new WeakMap,this.clearMap=new WeakMap,this.subject=new se.x,this.observeActivations()}return(0,_.Z)(n,[{key:"activatedAlias",get:function(){var e,o;return null!==(e=null===(o=this.activatedBreakpoints[0])||void 0===o?void 0:o.alias)&&void 0!==e?e:""}},{key:"activatedBreakpoints",get:function(){return(0,y.Z)(this._activatedBreakpoints)},set:function(e){this._activatedBreakpoints=(0,y.Z)(e)}},{key:"useFallbacks",set:function(e){this._useFallbacks=e}},{key:"onMediaChange",value:function(e){var o=this.findByQuery(e.mediaQuery);if(o){e=it(e,o);var s=this.activatedBreakpoints.indexOf(o);e.matches&&-1===s?(this._activatedBreakpoints.push(o),this._activatedBreakpoints.sort(ye),this.updateStyles()):!e.matches&&-1!==s&&(this._activatedBreakpoints.splice(s,1),this._activatedBreakpoints.sort(ye),this.updateStyles())}}},{key:"init",value:function(e,o,s,u){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];Ar(this.updateMap,e,o,s),Ar(this.clearMap,e,o,u),this.buildElementKeyMap(e,o),this.watchExtraTriggers(e,o,c)}},{key:"getValue",value:function(e,o,s){var u=this.elementMap.get(e);if(u){var c=void 0!==s?u.get(s):this.getActivatedValues(u,o);if(c)return c.get(o)}}},{key:"hasValue",value:function(e,o){var s=this.elementMap.get(e);if(s){var u=this.getActivatedValues(s,o);if(u)return void 0!==u.get(o)||!1}return!1}},{key:"setValue",value:function(e,o,s,u){var c=this.elementMap.get(e);if(c){var l,m=(null!==(l=c.get(u))&&void 0!==l?l:new Map).set(o,s);c.set(u,m),this.elementMap.set(e,c)}else c=(new Map).set(u,(new Map).set(o,s)),this.elementMap.set(e,c);var C=this.getValue(e,o);void 0!==C&&this.updateElement(e,o,C)}},{key:"trackValue",value:function(e,o){return this.subject.asObservable().pipe((0,Q.h)(function(s){return s.element===e&&s.key===o}))}},{key:"updateStyles",value:function(){var e=this;this.elementMap.forEach(function(o,s){var u=new Set(e.elementKeyMap.get(s)),c=e.getActivatedValues(o);c&&c.forEach(function(l,m){e.updateElement(s,m,l),u.delete(m)}),u.forEach(function(l){if(c=e.getActivatedValues(o,l)){var m=c.get(l);e.updateElement(s,l,m)}else e.clearElement(s,l)})})}},{key:"clearElement",value:function(e,o){var s=this.clearMap.get(e);if(s){var u=s.get(o);u&&(u(),this.subject.next({element:e,key:o,value:""}))}}},{key:"updateElement",value:function(e,o,s){var u=this.updateMap.get(e);if(u){var c=u.get(o);c&&(c(s),this.subject.next({element:e,key:o,value:s}))}}},{key:"releaseElement",value:function(e){var o=this.watcherMap.get(e);o&&(o.forEach(function(u){return u.unsubscribe()}),this.watcherMap.delete(e));var s=this.elementMap.get(e);s&&(s.forEach(function(u,c){return s.delete(c)}),this.elementMap.delete(e))}},{key:"triggerUpdate",value:function(e,o){var s=this,u=this.elementMap.get(e);if(u){var c=this.getActivatedValues(u,o);c&&(o?this.updateElement(e,o,c.get(o)):c.forEach(function(l,m){return s.updateElement(e,m,l)}))}}},{key:"buildElementKeyMap",value:function(e,o){var s=this.elementKeyMap.get(e);s||this.elementKeyMap.set(e,s=new Set),s.add(o)}},{key:"watchExtraTriggers",value:function(e,o,s){var u=this;if(s&&s.length){var c=this.watcherMap.get(e);if(c||this.watcherMap.set(e,c=new Map),!c.get(o)){var m=J.T.apply(void 0,(0,y.Z)(s)).subscribe(function(){var C=u.getValue(e,o);u.updateElement(e,o,C)});c.set(o,m)}}}},{key:"findByQuery",value:function(e){return this.breakpoints.findByQuery(e)}},{key:"getActivatedValues",value:function(e,o){for(var s=0;s<this.activatedBreakpoints.length;s++){var c=e.get(this.activatedBreakpoints[s].alias);if(c&&(void 0===o||c.has(o)&&null!=c.get(o)))return c}if(this._useFallbacks){var l=e.get("");return void 0===o||l&&l.has(o)?l:void 0}}},{key:"observeActivations",value:function(){var e=this.breakpoints.items.map(function(o){return o.mediaQuery});this.hook.registerBeforeAfterPrintHooks(this),this.matchMedia.observe(this.hook.withPrintQuery(e)).pipe((0,ee.b)(this.hook.interceptEvents(this)),(0,Q.h)(this.hook.blockPropagation())).subscribe(this.onMediaChange.bind(this))}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(be),r.\u0275\u0275inject(Pn),r.\u0275\u0275inject(ln))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}();function Ar(a,n,t,e){if(void 0!==e){var o,s=null!==(o=a.get(n))&&void 0!==o?o:new Map;s.set(t,e),a.set(n,s)}}var Qn=function(){var a=function(){function n(t,e,o,s){(0,p.Z)(this,n),this.elementRef=t,this.styleBuilder=e,this.styler=o,this.marshal=s,this.DIRECTIVE_KEY="",this.inputs=[],this.mru={},this.destroySubject=new se.x,this.styleCache=new Map}return(0,_.Z)(n,[{key:"parentElement",get:function(){return this.elementRef.nativeElement.parentElement}},{key:"nativeElement",get:function(){return this.elementRef.nativeElement}},{key:"activatedValue",get:function(){return this.marshal.getValue(this.nativeElement,this.DIRECTIVE_KEY)},set:function(e){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,e,this.marshal.activatedAlias)}},{key:"ngOnChanges",value:function(e){var o=this;Object.keys(e).forEach(function(s){if(-1!==o.inputs.indexOf(s)){var u=s.split(".").slice(1).join(".");o.setValue(e[s].currentValue,u)}})}},{key:"ngOnDestroy",value:function(){this.destroySubject.next(),this.destroySubject.complete(),this.marshal.releaseElement(this.nativeElement)}},{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.marshal.init(this.elementRef.nativeElement,this.DIRECTIVE_KEY,this.updateWithValue.bind(this),this.clearStyles.bind(this),e)}},{key:"addStyles",value:function(e,o){var s=this.styleBuilder,u=s.shouldCache,c=this.styleCache.get(e);(!c||!u)&&(c=s.buildStyles(e,o),u&&this.styleCache.set(e,c)),this.mru=(0,b.Z)({},c),this.applyStyleToElement(c),s.sideEffect(e,c,o)}},{key:"clearStyles",value:function(){var e=this;Object.keys(this.mru).forEach(function(o){e.mru[o]=""}),this.applyStyleToElement(this.mru),this.mru={},this.currentValue=void 0}},{key:"triggerUpdate",value:function(){this.marshal.triggerUpdate(this.nativeElement,this.DIRECTIVE_KEY)}},{key:"getFlexFlowDirection",value:function(e){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e){var s=this.styler.getFlowDirection(e),u=(0,g.Z)(s,2),c=u[0];if(!u[1]&&o){var m=x(c);this.styler.applyStyleToElements(m,[e])}return c.trim()}return"row"}},{key:"hasWrap",value:function(e){return this.styler.hasWrap(e)}},{key:"applyStyleToElement",value:function(e,o){this.styler.applyStyleToElement(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.nativeElement,e,o)}},{key:"setValue",value:function(e,o){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,e,o)}},{key:"updateWithValue",value:function(e){this.currentValue!==e&&(this.addStyles(e),this.currentValue=e)}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(r.ElementRef),r.\u0275\u0275directiveInject(de),r.\u0275\u0275directiveInject(Y),r.\u0275\u0275directiveInject(wn))},a.\u0275dir=r.\u0275\u0275defineDirective({type:a,features:[r.\u0275\u0275NgOnChangesFeature]}),a}();function Ri(a){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"1",e=[n,t,a],o=a.indexOf("calc");if(o>0){e[2]=Hi(a.substring(o).trim());var s=a.substr(0,o).trim().split(" ");2==s.length&&(e[0]=s[0],e[1]=s[1])}else if(0==o)e[2]=Hi(a.trim());else{var u=a.split(" ");e=3===u.length?u:[n,t,a]}return e}function Hi(a){return a.replace(/[\s]/g,"").replace(/[\/\*\+\-]/g," $& ")}EventTarget;var Ti=S(60609),Qr=(S(35333),S(68951)),Eo=function(){var a=function(n){(0,G.Z)(e,n);var t=(0,H.Z)(e);function e(o,s,u,c,l,m,C){var T;return(0,p.Z)(this,e),(T=t.call(this,o,null,s,u)).ngClassInstance=C,T.DIRECTIVE_KEY="ngClass",T.ngClassInstance||(T.ngClassInstance=new E.NgClass(c,l,o,m)),T.init(),T.setValue("",""),T}return(0,_.Z)(e,[{key:"klass",set:function(s){this.ngClassInstance.klass=s,this.setValue(s,"")}},{key:"updateWithValue",value:function(s){this.ngClassInstance.ngClass=s,this.ngClassInstance.ngDoCheck()}},{key:"ngDoCheck",value:function(){this.ngClassInstance.ngDoCheck()}}]),e}(Qn);return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(r.ElementRef),r.\u0275\u0275directiveInject(Y),r.\u0275\u0275directiveInject(wn),r.\u0275\u0275directiveInject(r.IterableDiffers),r.\u0275\u0275directiveInject(r.KeyValueDiffers),r.\u0275\u0275directiveInject(r.Renderer2),r.\u0275\u0275directiveInject(E.NgClass,10))},a.\u0275dir=r.\u0275\u0275defineDirective({type:a,inputs:{klass:["class","klass"]},features:[r.\u0275\u0275InheritDefinitionFeature]}),a}(),Ta=["ngClass","ngClass.xs","ngClass.sm","ngClass.md","ngClass.lg","ngClass.xl","ngClass.lt-sm","ngClass.lt-md","ngClass.lt-lg","ngClass.lt-xl","ngClass.gt-xs","ngClass.gt-sm","ngClass.gt-md","ngClass.gt-lg"],Ia=function(){var a=function(n){(0,G.Z)(e,n);var t=(0,H.Z)(e);function e(){var o;return(0,p.Z)(this,e),(o=t.apply(this,arguments)).inputs=Ta,o}return(0,_.Z)(e)}(Eo);return a.\u0275fac=function(){var n;return function(e){return(n||(n=r.\u0275\u0275getInheritedFactory(a)))(e||a)}}(),a.\u0275dir=r.\u0275\u0275defineDirective({type:a,selectors:[["","ngClass",""],["","ngClass.xs",""],["","ngClass.sm",""],["","ngClass.md",""],["","ngClass.lg",""],["","ngClass.xl",""],["","ngClass.lt-sm",""],["","ngClass.lt-md",""],["","ngClass.lt-lg",""],["","ngClass.lt-xl",""],["","ngClass.gt-xs",""],["","ngClass.gt-sm",""],["","ngClass.gt-md",""],["","ngClass.gt-lg",""]],inputs:{ngClass:"ngClass","ngClass.xs":"ngClass.xs","ngClass.sm":"ngClass.sm","ngClass.md":"ngClass.md","ngClass.lg":"ngClass.lg","ngClass.xl":"ngClass.xl","ngClass.lt-sm":"ngClass.lt-sm","ngClass.lt-md":"ngClass.lt-md","ngClass.lt-lg":"ngClass.lt-lg","ngClass.lt-xl":"ngClass.lt-xl","ngClass.gt-xs":"ngClass.gt-xs","ngClass.gt-sm":"ngClass.gt-sm","ngClass.gt-md":"ngClass.gt-md","ngClass.gt-lg":"ngClass.gt-lg"},features:[r.\u0275\u0275InheritDefinitionFeature]}),a}(),A=(0,_.Z)(function a(n,t){var e=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(0,p.Z)(this,a),this.key=n,this.value=t,this.key=e?n.replace(/['"]/g,"").trim():n.trim(),this.value=e?t.replace(/['"]/g,"").trim():t.trim(),this.value=this.value.replace(/;/,"")});function k(a){var n=typeof a;return"object"===n?a.constructor===Array?"array":a.constructor===Set?"set":"object":n}function he(a){var n=a.split(":"),t=(0,Ti.Z)(n),e=t[0],o=t.slice(1);return new A(e,o.join(":"))}function Pe(a,n){return n.key&&(a[n.key]=n.value),a}var Ne=function(){var a=function(n){(0,G.Z)(e,n);var t=(0,H.Z)(e);function e(o,s,u,c,l,m,C,T,B){var F,U;(0,p.Z)(this,e),(U=t.call(this,o,null,s,u)).sanitizer=c,U.ngStyleInstance=C,U.DIRECTIVE_KEY="ngStyle",U.ngStyleInstance||(U.ngStyleInstance=new E.NgStyle(o,l,m)),U.init();var ae=null!==(F=U.nativeElement.getAttribute("style"))&&void 0!==F?F:"";return U.fallbackStyles=U.buildStyleMap(ae),U.isServer=T&&(0,E.isPlatformServer)(B),U}return(0,_.Z)(e,[{key:"updateWithValue",value:function(s){var u=this.buildStyleMap(s);this.ngStyleInstance.ngStyle=(0,b.Z)((0,b.Z)({},this.fallbackStyles),u),this.isServer&&this.applyStyleToElement(u),this.ngStyleInstance.ngDoCheck()}},{key:"clearStyles",value:function(){this.ngStyleInstance.ngStyle=this.fallbackStyles,this.ngStyleInstance.ngDoCheck()}},{key:"buildStyleMap",value:function(s){var u=this,c=function(m){var C;return null!==(C=u.sanitizer.sanitize(r.SecurityContext.STYLE,m))&&void 0!==C?C:""};if(s)switch(k(s)){case"string":return Ve(function L(a){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:";";return String(a).trim().split(n).map(function(t){return t.trim()}).filter(function(t){return""!==t})}(s),c);case"array":return Ve(s,c);default:return function ie(a,n){var t=[];return"set"===k(a)?a.forEach(function(e){return t.push(e)}):Object.keys(a).forEach(function(e){t.push("".concat(e,":").concat(a[e]))}),function X(a,n){return a.map(he).filter(function(e){return!!e}).map(function(o){return n&&(o.value=n(o.value)),o}).reduce(Pe,{})}(t,n)}(s,c)}return{}}},{key:"ngDoCheck",value:function(){this.ngStyleInstance.ngDoCheck()}}]),e}(Qn);return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(r.ElementRef),r.\u0275\u0275directiveInject(Y),r.\u0275\u0275directiveInject(wn),r.\u0275\u0275directiveInject(Z.DomSanitizer),r.\u0275\u0275directiveInject(r.KeyValueDiffers),r.\u0275\u0275directiveInject(r.Renderer2),r.\u0275\u0275directiveInject(E.NgStyle,10),r.\u0275\u0275directiveInject(et),r.\u0275\u0275directiveInject(r.PLATFORM_ID))},a.\u0275dir=r.\u0275\u0275defineDirective({type:a,features:[r.\u0275\u0275InheritDefinitionFeature]}),a}(),Me=["ngStyle","ngStyle.xs","ngStyle.sm","ngStyle.md","ngStyle.lg","ngStyle.xl","ngStyle.lt-sm","ngStyle.lt-md","ngStyle.lt-lg","ngStyle.lt-xl","ngStyle.gt-xs","ngStyle.gt-sm","ngStyle.gt-md","ngStyle.gt-lg"],Ue=function(){var a=function(n){(0,G.Z)(e,n);var t=(0,H.Z)(e);function e(){var o;return(0,p.Z)(this,e),(o=t.apply(this,arguments)).inputs=Me,o}return(0,_.Z)(e)}(Ne);return a.\u0275fac=function(){var n;return function(e){return(n||(n=r.\u0275\u0275getInheritedFactory(a)))(e||a)}}(),a.\u0275dir=r.\u0275\u0275defineDirective({type:a,selectors:[["","ngStyle",""],["","ngStyle.xs",""],["","ngStyle.sm",""],["","ngStyle.md",""],["","ngStyle.lg",""],["","ngStyle.xl",""],["","ngStyle.lt-sm",""],["","ngStyle.lt-md",""],["","ngStyle.lt-lg",""],["","ngStyle.lt-xl",""],["","ngStyle.gt-xs",""],["","ngStyle.gt-sm",""],["","ngStyle.gt-md",""],["","ngStyle.gt-lg",""]],inputs:{ngStyle:"ngStyle","ngStyle.xs":"ngStyle.xs","ngStyle.sm":"ngStyle.sm","ngStyle.md":"ngStyle.md","ngStyle.lg":"ngStyle.lg","ngStyle.xl":"ngStyle.xl","ngStyle.lt-sm":"ngStyle.lt-sm","ngStyle.lt-md":"ngStyle.lt-md","ngStyle.lt-lg":"ngStyle.lt-lg","ngStyle.lt-xl":"ngStyle.lt-xl","ngStyle.gt-xs":"ngStyle.gt-xs","ngStyle.gt-sm":"ngStyle.gt-sm","ngStyle.gt-md":"ngStyle.gt-md","ngStyle.gt-lg":"ngStyle.gt-lg"},features:[r.\u0275\u0275InheritDefinitionFeature]}),a}();function Ve(a,n){return a.map(he).filter(function(e){return!!e}).map(function(o){return n&&(o.value=n(o.value)),o}).reduce(Pe,{})}var nt=function(){var a=(0,_.Z)(function n(){(0,p.Z)(this,n)});return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({imports:[rt]}),a}(),d=S(77797),gt=S(35488),Et=S(4089),Ee=S(20265),Ge=S(43068),Ke=function(){var a=function(n){(0,G.Z)(e,n);var t=(0,H.Z)(e);function e(){return(0,p.Z)(this,e),t.apply(this,arguments)}return(0,_.Z)(e,[{key:"buildStyles",value:function(s,u){var c=u.display,l=x(s);return(0,b.Z)((0,b.Z)({},l),{},{display:"none"===c?c:l.display})}}]),e}(de);return a.\u0275fac=function(){var n;return function(e){return(n||(n=r.\u0275\u0275getInheritedFactory(a)))(e||a)}}(),a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),Xe=["fxLayout","fxLayout.xs","fxLayout.sm","fxLayout.md","fxLayout.lg","fxLayout.xl","fxLayout.lt-sm","fxLayout.lt-md","fxLayout.lt-lg","fxLayout.lt-xl","fxLayout.gt-xs","fxLayout.gt-sm","fxLayout.gt-md","fxLayout.gt-lg"],kt=function(){var a=function(n){(0,G.Z)(e,n);var t=(0,H.Z)(e);function e(o,s,u,c,l){var m;return(0,p.Z)(this,e),(m=t.call(this,o,u,s,c))._config=l,m.DIRECTIVE_KEY="layout",m.init(),m}return(0,_.Z)(e,[{key:"updateWithValue",value:function(s){var u,l=this._config.detectLayoutDisplay?this.styler.lookupStyle(this.nativeElement,"display"):"";this.styleCache=null!==(u=$t.get(l))&&void 0!==u?u:new Map,$t.set(l,this.styleCache),this.currentValue!==s&&(this.addStyles(s,{display:l}),this.currentValue=s)}}]),e}(Qn);return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(r.ElementRef),r.\u0275\u0275directiveInject(Y),r.\u0275\u0275directiveInject(Ke),r.\u0275\u0275directiveInject(wn),r.\u0275\u0275directiveInject(vt))},a.\u0275dir=r.\u0275\u0275defineDirective({type:a,features:[r.\u0275\u0275InheritDefinitionFeature]}),a}(),Wt=function(){var a=function(n){(0,G.Z)(e,n);var t=(0,H.Z)(e);function e(){var o;return(0,p.Z)(this,e),(o=t.apply(this,arguments)).inputs=Xe,o}return(0,_.Z)(e)}(kt);return a.\u0275fac=function(){var n;return function(e){return(n||(n=r.\u0275\u0275getInheritedFactory(a)))(e||a)}}(),a.\u0275dir=r.\u0275\u0275defineDirective({type:a,selectors:[["","fxLayout",""],["","fxLayout.xs",""],["","fxLayout.sm",""],["","fxLayout.md",""],["","fxLayout.lg",""],["","fxLayout.xl",""],["","fxLayout.lt-sm",""],["","fxLayout.lt-md",""],["","fxLayout.lt-lg",""],["","fxLayout.lt-xl",""],["","fxLayout.gt-xs",""],["","fxLayout.gt-sm",""],["","fxLayout.gt-md",""],["","fxLayout.gt-lg",""]],inputs:{fxLayout:"fxLayout","fxLayout.xs":"fxLayout.xs","fxLayout.sm":"fxLayout.sm","fxLayout.md":"fxLayout.md","fxLayout.lg":"fxLayout.lg","fxLayout.xl":"fxLayout.xl","fxLayout.lt-sm":"fxLayout.lt-sm","fxLayout.lt-md":"fxLayout.lt-md","fxLayout.lt-lg":"fxLayout.lt-lg","fxLayout.lt-xl":"fxLayout.lt-xl","fxLayout.gt-xs":"fxLayout.gt-xs","fxLayout.gt-sm":"fxLayout.gt-sm","fxLayout.gt-md":"fxLayout.gt-md","fxLayout.gt-lg":"fxLayout.gt-lg"},features:[r.\u0275\u0275InheritDefinitionFeature]}),a}(),$t=new Map,Yt=function(){var a=function(n){(0,G.Z)(e,n);var t=(0,H.Z)(e);function e(o){var s;return(0,p.Z)(this,e),(s=t.call(this)).layoutConfig=o,s}return(0,_.Z)(e,[{key:"buildStyles",value:function(s,u){var c=s.split(" "),l=(0,Ti.Z)(c),m=l[0],C=l[1],B=l.slice(2).join(" "),F=u.direction.indexOf("column")>-1?"column":"row",U=P(F)?"max-width":"max-height",ae=P(F)?"min-width":"min-height",ue=String(B).indexOf("calc")>-1,me=ue||"auto"===B,Se=String(B).indexOf("%")>-1&&!ue,we=String(B).indexOf("px")>-1||String(B).indexOf("rem")>-1||String(B).indexOf("em")>-1||String(B).indexOf("vw")>-1||String(B).indexOf("vh")>-1,qe=ue||we;C="0"==C?0:C;var at=!(m="0"==m?0:m)&&!C,dt={},Ot={"max-width":null,"max-height":null,"min-width":null,"min-height":null};switch(B||""){case"":B="row"===F?"0%":!1!==this.layoutConfig.useColumnBasisZero?"0.000000001px":"auto";break;case"initial":case"nogrow":m=0,B="auto";break;case"grow":B="100%";break;case"noshrink":C=0,B="auto";break;case"auto":break;case"none":m=0,C=0,B="auto";break;default:!qe&&!Se&&!isNaN(B)&&(B+="%"),"0%"===B&&(qe=!0),"0px"===B&&(B="0%"),dt=R(Ot,ue?{"flex-grow":m,"flex-shrink":C,"flex-basis":qe?B:"100%"}:{flex:"".concat(m," ").concat(C," ").concat(qe?B:"100%")})}return dt.flex||dt["flex-grow"]||(dt=R(Ot,ue?{"flex-grow":m,"flex-shrink":C,"flex-basis":B}:{flex:"".concat(m," ").concat(C," ").concat(B)})),"0%"!==B&&"0px"!==B&&"0.000000001px"!==B&&"auto"!==B&&(dt[ae]=at||qe&&m?B:null,dt[U]=at||!me&&C?B:null),dt[ae]||dt[U]?u.hasWrap&&(dt[ue?"flex-basis":"flex"]=dt[U]?ue?dt[U]:"".concat(m," ").concat(C," ").concat(dt[U]):ue?dt[ae]:"".concat(m," ").concat(C," ").concat(dt[ae])):dt=R(Ot,ue?{"flex-grow":m,"flex-shrink":C,"flex-basis":B}:{flex:"".concat(m," ").concat(C," ").concat(B)}),R(dt,{"box-sizing":"border-box"})}}]),e}(de);return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(vt))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),vn=["fxFlex","fxFlex.xs","fxFlex.sm","fxFlex.md","fxFlex.lg","fxFlex.xl","fxFlex.lt-sm","fxFlex.lt-md","fxFlex.lt-lg","fxFlex.lt-xl","fxFlex.gt-xs","fxFlex.gt-sm","fxFlex.gt-md","fxFlex.gt-lg"],Jn=function(){var a=function(n){(0,G.Z)(e,n);var t=(0,H.Z)(e);function e(o,s,u,c,l){var m;return(0,p.Z)(this,e),(m=t.call(this,o,c,s,l)).layoutConfig=u,m.marshal=l,m.DIRECTIVE_KEY="flex",m.direction=void 0,m.wrap=void 0,m.flexGrow="1",m.flexShrink="1",m.init(),m}return(0,_.Z)(e,[{key:"shrink",get:function(){return this.flexShrink},set:function(s){this.flexShrink=s||"1",this.triggerReflow()}},{key:"grow",get:function(){return this.flexGrow},set:function(s){this.flexGrow=s||"1",this.triggerReflow()}},{key:"ngOnInit",value:function(){this.parentElement&&(this.marshal.trackValue(this.parentElement,"layout").pipe((0,Qr.R)(this.destroySubject)).subscribe(this.onLayoutChange.bind(this)),this.marshal.trackValue(this.nativeElement,"layout-align").pipe((0,Qr.R)(this.destroySubject)).subscribe(this.triggerReflow.bind(this)))}},{key:"onLayoutChange",value:function(s){var c=s.value.split(" ");this.direction=c[0],this.wrap=void 0!==c[1]&&"wrap"===c[1],this.triggerUpdate()}},{key:"updateWithValue",value:function(s){void 0===this.direction&&(this.direction=this.getFlexFlowDirection(this.parentElement,!1!==this.layoutConfig.addFlexToParent)),void 0===this.wrap&&(this.wrap=this.hasWrap(this.parentElement));var c=this.direction,l=c.startsWith("row"),m=this.wrap;l&&m?this.styleCache=Mr:l&&!m?this.styleCache=dr:!l&&m?this.styleCache=Yr:!l&&!m&&(this.styleCache=ai);var T=Ri(String(s).replace(";",""),this.flexGrow,this.flexShrink);this.addStyles(T.join(" "),{direction:c,hasWrap:m})}},{key:"triggerReflow",value:function(){var s=this.activatedValue;if(void 0!==s){var u=Ri(s+"",this.flexGrow,this.flexShrink);this.marshal.updateElement(this.nativeElement,this.DIRECTIVE_KEY,u.join(" "))}}}]),e}(Qn);return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(r.ElementRef),r.\u0275\u0275directiveInject(Y),r.\u0275\u0275directiveInject(vt),r.\u0275\u0275directiveInject(Yt),r.\u0275\u0275directiveInject(wn))},a.\u0275dir=r.\u0275\u0275defineDirective({type:a,inputs:{shrink:["fxShrink","shrink"],grow:["fxGrow","grow"]},features:[r.\u0275\u0275InheritDefinitionFeature]}),a}(),In=function(){var a=function(n){(0,G.Z)(e,n);var t=(0,H.Z)(e);function e(){var o;return(0,p.Z)(this,e),(o=t.apply(this,arguments)).inputs=vn,o}return(0,_.Z)(e)}(Jn);return a.\u0275fac=function(){var n;return function(e){return(n||(n=r.\u0275\u0275getInheritedFactory(a)))(e||a)}}(),a.\u0275dir=r.\u0275\u0275defineDirective({type:a,selectors:[["","fxFlex",""],["","fxFlex.xs",""],["","fxFlex.sm",""],["","fxFlex.md",""],["","fxFlex.lg",""],["","fxFlex.xl",""],["","fxFlex.lt-sm",""],["","fxFlex.lt-md",""],["","fxFlex.lt-lg",""],["","fxFlex.lt-xl",""],["","fxFlex.gt-xs",""],["","fxFlex.gt-sm",""],["","fxFlex.gt-md",""],["","fxFlex.gt-lg",""]],inputs:{fxFlex:"fxFlex","fxFlex.xs":"fxFlex.xs","fxFlex.sm":"fxFlex.sm","fxFlex.md":"fxFlex.md","fxFlex.lg":"fxFlex.lg","fxFlex.xl":"fxFlex.xl","fxFlex.lt-sm":"fxFlex.lt-sm","fxFlex.lt-md":"fxFlex.lt-md","fxFlex.lt-lg":"fxFlex.lt-lg","fxFlex.lt-xl":"fxFlex.lt-xl","fxFlex.gt-xs":"fxFlex.gt-xs","fxFlex.gt-sm":"fxFlex.gt-sm","fxFlex.gt-md":"fxFlex.gt-md","fxFlex.gt-lg":"fxFlex.gt-lg"},features:[r.\u0275\u0275InheritDefinitionFeature]}),a}(),dr=new Map,ai=new Map,Mr=new Map,Yr=new Map,ky={margin:0,width:"100%",height:"100%","min-width":"100%","min-height":"100%"},Ay=function(){var a=function(n){(0,G.Z)(e,n);var t=(0,H.Z)(e);function e(){return(0,p.Z)(this,e),t.apply(this,arguments)}return(0,_.Z)(e,[{key:"buildStyles",value:function(s){return ky}}]),e}(de);return a.\u0275fac=function(){var n;return function(e){return(n||(n=r.\u0275\u0275getInheritedFactory(a)))(e||a)}}(),a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),Ma=function(){var a=function(n){(0,G.Z)(e,n);var t=(0,H.Z)(e);function e(o,s,u,c){var l;return(0,p.Z)(this,e),(l=t.call(this,o,u,s,c)).styleCache=Ry,l.addStyles(""),l}return(0,_.Z)(e)}(Qn);return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(r.ElementRef),r.\u0275\u0275directiveInject(Y),r.\u0275\u0275directiveInject(Ay),r.\u0275\u0275directiveInject(wn))},a.\u0275dir=r.\u0275\u0275defineDirective({type:a,selectors:[["","fxFill",""],["","fxFlexFill",""]],features:[r.\u0275\u0275InheritDefinitionFeature]}),a}(),Ry=new Map,Vs=function(){var a=(0,_.Z)(function n(){(0,p.Z)(this,n)});return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({imports:[rt,Ge.BidiModule]}),a}(),qr=function(){var a=(0,_.Z)(function n(){(0,p.Z)(this,n)});return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({imports:[rt]}),a}(),si=function(){var a=function(){function n(t,e){(0,p.Z)(this,n),(0,E.isPlatformServer)(e)&&!t&&console.warn("Warning: Flex Layout loaded on the server without FlexLayoutServerModule")}return(0,_.Z)(n,null,[{key:"withConfig",value:function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return{ngModule:n,providers:e.serverLoaded?[{provide:vt,useValue:(0,b.Z)((0,b.Z)({},Qe),e)},{provide:$e,useValue:o,multi:!0},{provide:et,useValue:!0}]:[{provide:vt,useValue:(0,b.Z)((0,b.Z)({},Qe),e)},{provide:$e,useValue:o,multi:!0}]}}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(et),r.\u0275\u0275inject(r.PLATFORM_ID))},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({imports:[Vs,nt,qr,Vs,nt,qr]}),a}();function qi(a,n){1&a&&r.\u0275\u0275element(0,"div",9)}function ms(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"span",10),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&a){var t=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(t.description)}}function Js(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"section",11),r.\u0275\u0275element(1,"ngx-json-viewer",12),r.\u0275\u0275elementEnd()),2&a){var t=r.\u0275\u0275nextContext().$implicit,e=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("json",t.value)("expanded",e.expanded)("depth",e.depth)("_currentDepth",e._currentDepth+1)}}var Ki=function(n){return["segment",n]},zc=function(n,t){return{"segment-main":!0,expandable:n,expanded:t}};function n0(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"section",2)(1,"section",3),r.\u0275\u0275listener("click",function(){var c=r.\u0275\u0275restoreView(t).$implicit,l=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(l.toggle(c))}),r.\u0275\u0275template(2,qi,1,0,"div",4),r.\u0275\u0275elementStart(3,"span",5),r.\u0275\u0275text(4),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(5,"span",6),r.\u0275\u0275text(6,": "),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(7,ms,2,1,"span",7),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(8,Js,2,4,"section",8),r.\u0275\u0275elementEnd()}if(2&a){var e=n.$implicit,o=r.\u0275\u0275nextContext();r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction1(6,Ki,"segment-type-"+e.type)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction2(8,zc,o.isExpandable(e),e.expanded)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",o.isExpandable(e)),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(e.key),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngIf",!e.expanded||!o.isExpandable(e)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.expanded&&o.isExpandable(e))}}var r0=function(){var a=function(){function n(){(0,p.Z)(this,n),this.expanded=!0,this.depth=-1,this._currentDepth=0,this.segments=[]}return(0,_.Z)(n,[{key:"ngOnChanges",value:function(){var e=this;this.segments=[],this.json=this.decycle(this.json),"object"==typeof this.json?Object.keys(this.json).forEach(function(o){e.segments.push(e.parseKeyValue(o,e.json[o]))}):this.segments.push(this.parseKeyValue("(".concat(typeof this.json,")"),this.json))}},{key:"isExpandable",value:function(e){return"object"===e.type||"array"===e.type}},{key:"toggle",value:function(e){this.isExpandable(e)&&(e.expanded=!e.expanded)}},{key:"parseKeyValue",value:function(e,o){var s={key:e,value:o,type:void 0,description:""+o,expanded:this.isExpanded()};switch(typeof s.value){case"number":s.type="number";break;case"boolean":s.type="boolean";break;case"function":s.type="function";break;case"string":s.type="string",s.description='"'+s.value+'"';break;case"undefined":s.type="undefined",s.description="undefined";break;case"object":null===s.value?(s.type="null",s.description="null"):Array.isArray(s.value)?(s.type="array",s.description="Array["+s.value.length+"] "+JSON.stringify(s.value)):s.value instanceof Date?s.type="date":(s.type="object",s.description="Object "+JSON.stringify(s.value))}return s}},{key:"isExpanded",value:function(){return this.expanded&&!(this.depth>-1&&this._currentDepth>=this.depth)}},{key:"decycle",value:function(e){var o=new WeakMap;return function s(u,c){var l,m;return"object"!=typeof u||null===u||u instanceof Boolean||u instanceof Date||u instanceof Number||u instanceof RegExp||u instanceof String?u:void 0!==(l=o.get(u))?{$ref:l}:(o.set(u,c),Array.isArray(u)?(m=[],u.forEach(function(C,T){m[T]=s(C,c+"["+T+"]")})):(m={},Object.keys(u).forEach(function(C){m[C]=s(u[C],c+"["+JSON.stringify(C)+"]")})),m)}(e,"$")}}]),n}();return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["ngx-json-viewer"]],inputs:{json:"json",expanded:"expanded",depth:"depth",_currentDepth:"_currentDepth"},features:[r.\u0275\u0275NgOnChangesFeature],decls:2,vars:1,consts:[[1,"ngx-json-viewer"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[3,"ngClass","click"],["class","toggler",4,"ngIf"],[1,"segment-key"],[1,"segment-separator"],["class","segment-value",4,"ngIf"],["class","children",4,"ngIf"],[1,"toggler"],[1,"segment-value"],[1,"children"],[3,"json","expanded","depth","_currentDepth"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"section",0),r.\u0275\u0275template(1,n0,9,11,"section",1),r.\u0275\u0275elementEnd()),2&t&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",e.segments))},dependencies:[E.NgClass,E.NgForOf,E.NgIf,a],styles:['@charset "UTF-8";.ngx-json-viewer[_ngcontent-%COMP%]{font-family:var(--ngx-json-font-family, monospace);font-size:var(--ngx-json-font-size, 1em);width:100%;height:100%;overflow:hidden;position:relative}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]{padding:2px;margin:1px 1px 1px 12px}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .segment-main[_ngcontent-%COMP%]{word-wrap:break-word}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .segment-main[_ngcontent-%COMP%]   .toggler[_ngcontent-%COMP%]{position:absolute;margin-left:-14px;margin-top:3px;font-size:.8em;line-height:1.2em;vertical-align:middle;color:var(--ngx-json-toggler, #787878)}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .segment-main[_ngcontent-%COMP%]   .toggler[_ngcontent-%COMP%]:after{display:inline-block;content:"\\25ba";transition:transform .1s ease-in}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .segment-main[_ngcontent-%COMP%]   .segment-key[_ngcontent-%COMP%]{color:var(--ngx-json-key, #4E187C)}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .segment-main[_ngcontent-%COMP%]   .segment-separator[_ngcontent-%COMP%]{color:var(--ngx-json-separator, #999)}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .segment-main[_ngcontent-%COMP%]   .segment-value[_ngcontent-%COMP%]{color:var(--ngx-json-value, #000)}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .children[_ngcontent-%COMP%]{margin-left:12px}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-string[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:var(--ngx-json-string, #FF6B6B)}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-number[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:var(--ngx-json-number, #009688)}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-boolean[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:var(--ngx-json-boolean, #B938A4)}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-date[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:var(--ngx-json-date, #05668D)}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-array[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:var(--ngx-json-array, #999)}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-object[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:var(--ngx-json-object, #999)}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-function[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:var(--ngx-json-function, #999)}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-null[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:var(--ngx-json-null, #fff)}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-undefined[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:var(--ngx-json-undefined, #fff)}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-null[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{background-color:var(--ngx-json-null-bg, red)}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-undefined[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-key[_ngcontent-%COMP%]{color:var(--ngx-json-undefined-key, #999)}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-undefined[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{background-color:var(--ngx-json-undefined-key, #999)}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-object[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%], .ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-array[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%]{white-space:nowrap}.ngx-json-viewer[_ngcontent-%COMP%]   .expanded[_ngcontent-%COMP%] > .toggler[_ngcontent-%COMP%]:after{transform:rotate(90deg)}.ngx-json-viewer[_ngcontent-%COMP%]   .expandable[_ngcontent-%COMP%], .ngx-json-viewer[_ngcontent-%COMP%]   .expandable[_ngcontent-%COMP%] > .toggler[_ngcontent-%COMP%]{cursor:pointer}']}),a}(),gs=function(){var a=(0,_.Z)(function n(){(0,p.Z)(this,n)});return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({imports:[E.CommonModule]}),a}(),He=S(81803);function o0(a,n,t,e,o,s,u){try{var c=a[s](u),l=c.value}catch(m){return void t(m)}c.done?n(l):Promise.resolve(l).then(e,o)}function Lt(a){return function(){var n=this,t=arguments;return new Promise(function(e,o){var s=a.apply(n,t);function u(l){o0(s,e,o,u,c,"next",l)}function c(l){o0(s,e,o,u,c,"throw",l)}u(void 0)})}}var Ys,Zt=S(93896),Ce=S(50635),x2=new Uint8Array(16);function Gc(){if(!Ys&&!(Ys=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ys(x2)}const a0=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var vi=[],Vc=0;Vc<256;++Vc)vi.push((Vc+256).toString(16).substr(1));const C2=function b2(a){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=(vi[a[n+0]]+vi[a[n+1]]+vi[a[n+2]]+vi[a[n+3]]+"-"+vi[a[n+4]]+vi[a[n+5]]+"-"+vi[a[n+6]]+vi[a[n+7]]+"-"+vi[a[n+8]]+vi[a[n+9]]+"-"+vi[a[n+10]]+vi[a[n+11]]+vi[a[n+12]]+vi[a[n+13]]+vi[a[n+14]]+vi[a[n+15]]).toLowerCase();if(!function s0(a){return"string"==typeof a&&a0.test(a)}(t))throw TypeError("Stringified UUID is invalid");return t},fr=function xa(a,n,t){var e=(a=a||{}).random||(a.rng||Gc)();if(e[6]=15&e[6]|64,e[8]=63&e[8]|128,n){t=t||0;for(var o=0;o<16;++o)n[t+o]=e[o];return n}return C2(e)};var nr=S(39691),Rr=S(76234),Wi=S(87580),ti=S(53158),Zi=S(89196),kn=S(59295),Za=S(49525),ko=S(10538),Li=S(63853),zo=S(25474),je=S(10745),ji=S(54987),Hc=Array.isArray,mo=S(93945);function zu(){for(var a=arguments.length,n=new Array(a),t=0;t<a;t++)n[t]=arguments[t];return n=function qc(a){return 1===a.length&&Hc(a[0])?a[0]:a}(n),1===n.length?(0,ji.Xf)(n[0]):new W.y(function Pf(a){return function(n){for(var t=[],e=function(u){t.push((0,ji.Xf)(a[u]).subscribe((0,mo.x)(n,function(c){if(t){for(var l=0;l<t.length;l++)l!==u&&t[l].unsubscribe();t=null}n.next(c)})))},o=0;t&&!n.closed&&o<a.length;o++)e(o)}}(n))}var eu=S(96936),pn=function(){return(pn=pn||{})[pn.EntitiesOnly=0]="EntitiesOnly",pn[pn.Both=1]="Both",pn[pn.None=2]="None",pn}();function Ir(a){return function(t,e){var o={ids:(0,y.Z)(e.ids),entities:(0,b.Z)({},e.entities)},s=a(t,o);return s===pn.Both?Object.assign({},e,o):s===pn.EntitiesOnly?(0,b.Z)((0,b.Z)({},e),{},{entities:o.entities}):e}}function Go(a,n){var t=n(a);return(0,r.isDevMode)()&&void 0===t&&console.warn("@ngrx/entity: The entity passed to the `selectId` implementation returned undefined.","You should probably provide your own `selectId` implementation.","The entity that was passed:",a,"The `selectId` implementation:",n.toString()),t}function ba(a){function n(ue,me){var Se=Go(ue,a);return Se in me.entities?pn.None:(me.ids.push(Se),me.entities[Se]=ue,pn.Both)}function t(ue,me){var qe,Se=!1,we=(0,te.Z)(ue);try{for(we.s();!(qe=we.n()).done;)Se=n(qe.value,me)!==pn.None||Se}catch(dt){we.e(dt)}finally{we.f()}return Se?pn.Both:pn.None}function o(ue,me){var Se=Go(ue,a);return Se in me.entities?(me.entities[Se]=ue,pn.EntitiesOnly):(me.ids.push(Se),me.entities[Se]=ue,pn.Both)}function c(ue,me){var we=(ue instanceof Array?ue:me.ids.filter(function(qe){return ue(me.entities[qe])})).filter(function(qe){return qe in me.entities}).map(function(qe){return delete me.entities[qe]}).length>0;return we&&(me.ids=me.ids.filter(function(qe){return qe in me.entities})),we?pn.Both:pn.None}function C(ue,me){return T([ue],me)}function T(ue,me){var Se={};if((ue=ue.filter(function(at){return at.id in me.entities})).length>0){var qe=ue.filter(function(at){return function m(ue,me,Se){var qe=Object.assign({},Se.entities[me.id],me.changes),at=Go(qe,a),dt=at!==me.id;return dt&&(ue[me.id]=at,delete Se.entities[me.id]),Se.entities[at]=qe,dt}(Se,at,me)}).length>0;return qe?(me.ids=me.ids.map(function(at){return Se[at]||at}),pn.Both):pn.EntitiesOnly}return pn.None}function ae(ue,me){var at,Se=[],we=[],qe=(0,te.Z)(ue);try{for(qe.s();!(at=qe.n()).done;){var dt=at.value,Ot=Go(dt,a);Ot in me.entities?we.push({id:Ot,changes:dt}):Se.push(dt)}}catch(Ut){qe.e(Ut)}finally{qe.f()}var ft=T(we,me),jt=t(Se,me);switch(!0){case jt===pn.None&&ft===pn.None:return pn.None;case jt===pn.Both||ft===pn.Both:return pn.Both;default:return pn.EntitiesOnly}}return{removeAll:function l(ue){return Object.assign({},ue,{ids:[],entities:{}})},addOne:Ir(n),addMany:Ir(t),setAll:Ir(function e(ue,me){return me.ids=[],me.entities={},t(ue,me),pn.Both}),setOne:Ir(o),setMany:Ir(function s(ue,me){var Se=ue.map(function(we){return o(we,me)});switch(!0){case Se.some(function(we){return we===pn.Both}):return pn.Both;case Se.some(function(we){return we===pn.EntitiesOnly}):return pn.EntitiesOnly;default:return pn.None}}),updateOne:Ir(C),updateMany:Ir(T),upsertOne:Ir(function U(ue,me){return ae([ue],me)}),upsertMany:Ir(ae),removeOne:Ir(function u(ue,me){return c([ue],me)}),removeMany:Ir(c),map:Ir(function B(ue,me){return T(me.ids.reduce(function(qe,at){var dt=ue(me.entities[at]);return dt!==me.entities[at]&&qe.push({id:at,changes:dt}),qe},[]).filter(function(qe){return qe.id in me.entities}),me)}),mapOne:Ir(function F(ue,me){var we=ue.id,qe=me.entities[we];return qe?C({id:we,changes:(0,ue.map)(qe)},me):pn.None})}}function l0(){var a,n,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={selectId:null!==(a=t.selectId)&&void 0!==a?a:function(m){return m.id},sortComparer:null!==(n=t.sortComparer)&&void 0!==n&&n},o=e.selectId,s=e.sortComparer,u=function tu(){return{getInitialState:function a(){return Object.assign({ids:[],entities:{}},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}}}(),c=function Ao(){return{getSelectors:function a(n){var t=function(c){return c.ids},e=function(c){return c.entities},o=(0,Zt.P1)(t,e,function(u,c){return u.map(function(l){return c[l]})}),s=(0,Zt.P1)(t,function(u){return u.length});return n?{selectIds:(0,Zt.P1)(n,t),selectEntities:(0,Zt.P1)(n,e),selectAll:(0,Zt.P1)(n,o),selectTotal:(0,Zt.P1)(n,s)}:{selectIds:t,selectEntities:e,selectAll:o,selectTotal:s}}}}(),l=s?function La(a,n){var t=ba(a);function u(we,qe){return c([we],qe)}function c(we,qe){var at=we.filter(function(dt){return!(Go(dt,a)in qe.entities)});return 0===at.length?pn.None:(Se(at,qe),pn.Both)}function m(we,qe){var at=Go(we,a);return at in qe.entities?(qe.ids=qe.ids.filter(function(dt){return dt!==at}),Se([we],qe),pn.Both):u(we,qe)}function T(we,qe){return F([we],qe)}function F(we,qe){var at=[],dt=we.filter(function(jt){return function B(we,qe,at){if(!(qe.id in at.entities))return!1;var Ot=Object.assign({},at.entities[qe.id],qe.changes),ft=Go(Ot,a);return delete at.entities[qe.id],we.push(Ot),ft!==qe.id}(at,jt,qe)}).length>0;if(0===at.length)return pn.None;var Ot=qe.ids,ft=[];return qe.ids=qe.ids.filter(function(jt,Ut){return jt in qe.entities||(ft.push(Ut),!1)}),Se(at,qe),!dt&&ft.every(function(jt){return qe.ids[jt]===Ot[jt]})?pn.EntitiesOnly:pn.Both}function me(we,qe){var ft,at=[],dt=[],Ot=(0,te.Z)(we);try{for(Ot.s();!(ft=Ot.n()).done;){var jt=ft.value,Ut=Go(jt,a);Ut in qe.entities?dt.push({id:Ut,changes:jt}):at.push(jt)}}catch(zt){Ot.e(zt)}finally{Ot.f()}var tn=F(dt,qe),Vt=c(at,qe);switch(!0){case Vt===pn.None&&tn===pn.None:return pn.None;case Vt===pn.Both||tn===pn.Both:return pn.Both;default:return pn.EntitiesOnly}}function Se(we,qe){we.sort(n);for(var at=[],dt=0,Ot=0;dt<we.length&&Ot<qe.ids.length;){var ft=we[dt],jt=Go(ft,a),Ut=qe.ids[Ot];n(ft,qe.entities[Ut])<=0?(at.push(jt),dt++):(at.push(Ut),Ot++)}qe.ids=at.concat(dt<we.length?we.slice(dt).map(a):qe.ids.slice(Ot)),we.forEach(function(Vt,zt){qe.entities[a(Vt)]=Vt})}return{removeOne:t.removeOne,removeMany:t.removeMany,removeAll:t.removeAll,addOne:Ir(u),updateOne:Ir(T),upsertOne:Ir(function ue(we,qe){return me([we],qe)}),setAll:Ir(function l(we,qe){return qe.entities={},qe.ids=[],c(we,qe),pn.Both}),setOne:Ir(m),setMany:Ir(function C(we,qe){var at=we.map(function(dt){return m(dt,qe)});switch(!0){case at.some(function(dt){return dt===pn.Both}):return pn.Both;case at.some(function(dt){return dt===pn.EntitiesOnly}):return pn.EntitiesOnly;default:return pn.None}}),addMany:Ir(c),updateMany:Ir(F),upsertMany:Ir(me),map:Ir(function U(we,qe){return F(qe.ids.reduce(function(dt,Ot){var ft=we(qe.entities[Ot]);return ft!==qe.entities[Ot]&&dt.push({id:Ot,changes:ft}),dt},[]),qe)}),mapOne:Ir(function ae(we,qe){var dt=we.id,Ot=qe.entities[dt];return Ot?T({id:dt,changes:(0,we.map)(Ot)},qe):pn.None})}}(o,s):ba(o);return(0,b.Z)((0,b.Z)((0,b.Z)({selectId:o,sortComparer:s},u),c),l)}var d0=S(90023),Gu=S(20591),f0=S(92971),ja=function(){function a(n,t,e){(0,p.Z)(this,a),this.kind=n,this.value=t,this.error=e,this.hasValue="N"===n}return(0,_.Z)(a,[{key:"observe",value:function(t){return Af(this,t)}},{key:"do",value:function(t,e,o){var s=this.kind,u=this.value,c=this.error;return"N"===s?t?.(u):"E"===s?e?.(c):o?.()}},{key:"accept",value:function(t,e,o){var s;return(0,f0.m)(null===(s=t)||void 0===s?void 0:s.next)?this.observe(t):this.do(t,e,o)}},{key:"toObservable",value:function(){var t=this.kind,o=this.error,s="N"===t?(0,je.of)(this.value):"E"===t?(0,zo._)(function(){return o}):"C"===t?Gu.E:0;if(!s)throw new TypeError("Unexpected notification kind ".concat(t));return s}}],[{key:"createNext",value:function(t){return new a("N",t)}},{key:"createError",value:function(t){return new a("E",void 0,t)}},{key:"createComplete",value:function(){return a.completeNotification}}]),a}();function Af(a,n){var t,e,o,s=a.kind,u=a.value,c=a.error;if("string"!=typeof s)throw new TypeError('Invalid notification, missing "kind"');"N"===s?null===(t=n.next)||void 0===t||t.call(n,u):"E"===s?null===(e=n.error)||void 0===e||e.call(n,c):null===(o=n.complete)||void 0===o||o.call(n)}ja.completeNotification=new ja("C");var vs=S(41944);function Wc(a,n,t,e){return(0,vs.e)(function(o,s){var u;n&&"function"!=typeof n?(t=n.duration,u=n.element,e=n.connector):u=n;var c=new Map,l=function(ae){c.forEach(ae),ae(s)},m=function(ae){return l(function(ue){return ue.error(ae)})},C=0,T=!1,B=new mo.Q(s,function(U){try{var ae=a(U),ue=c.get(ae);if(!ue){c.set(ae,ue=e?e():new se.x);var me=function F(U,ae){var ue=new W.y(function(me){C++;var Se=ae.subscribe(me);return function(){Se.unsubscribe(),0==--C&&T&&B.unsubscribe()}});return ue.key=U,ue}(ae,ue);if(s.next(me),t){var Se=(0,mo.x)(ue,function(){ue.complete(),Se?.unsubscribe()},void 0,void 0,function(){return c.delete(ae)});B.add((0,ji.Xf)(t(me)).subscribe(Se))}}ue.next(u?u(U):U)}catch(we){m(we)}},function(){return l(function(U){return U.complete()})},m,function(){return c.clear()},function(){return T=!0,0===C});o.subscribe(B)})}function Vu(a,n){return n?function(t){return t.pipe(Vu(function(e,o){return(0,ji.Xf)(a(e,o)).pipe((0,Ce.U)(function(s,u){return n(e,s,o,u)}))}))}:(0,vs.e)(function(t,e){var o=0,s=null,u=!1;t.subscribe((0,mo.x)(e,function(c){s||(s=(0,mo.x)(e,void 0,function(){s=null,u&&e.complete()}),(0,ji.Xf)(a(c,o++)).subscribe(s))},function(){u=!0,!s&&e.complete()}))})}var Xc={dispatch:!0,functional:!1,useEffectsErrorHandler:!0},qu="__@ngrx/effects_create__";function _i(a){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.functional?a:a(),e=(0,b.Z)((0,b.Z)({},Xc),n);return Object.defineProperty(t,qu,{value:e}),t}function nu(a){return Object.getPrototypeOf(a)}function Ca(a){return"function"==typeof a}function Wu(a){return a.filter(Ca)}function h0(a,n,t){var e=nu(a).constructor.name,o=function Vo(a){return function Rf(a){return Object.getOwnPropertyNames(a).filter(function(e){return!(!a[e]||!a[e].hasOwnProperty(qu))&&a[e][qu].hasOwnProperty("dispatch")}).map(function(e){return(0,b.Z)({propertyName:e},a[e][qu])})}(a)}(a).map(function(s){var u=s.propertyName,c=s.dispatch,l=s.useEffectsErrorHandler,m="function"==typeof a[u]?a[u]():a[u],C=l?t(m,n):m;if(!1===c)return C.pipe((0,d0.l)());var T=C.pipe(function p0(){return(0,vs.e)(function(a,n){a.subscribe((0,mo.x)(n,function(t){n.next(ja.createNext(t))},function(){n.next(ja.createComplete()),n.complete()},function(t){n.next(ja.createError(t)),n.complete()}))})}());return T.pipe((0,Ce.U)(function(B){return{effect:a[u],notification:B,propertyName:u,sourceName:e,sourceInstance:a}}))});return J.T.apply(void 0,(0,y.Z)(o))}function Gr(a,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return a.pipe((0,ti.K)(function(e){return n&&n.handleError(e),t<=1?a:Gr(a,n,t-1)}))}var na=function(){var a=function(n){(0,G.Z)(e,n);var t=(0,H.Z)(e);function e(o){var s;return(0,p.Z)(this,e),s=t.call(this),o&&(s.source=o),s}return(0,_.Z)(e,[{key:"lift",value:function(s){var u=new e;return u.source=this,u.operator=s,u}}]),e}(W.y);return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Zt.Y$))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}();function Ho(){for(var a=arguments.length,n=new Array(a),t=0;t<a;t++)n[t]=arguments[t];return(0,Q.h)(function(e){return n.some(function(o){return"string"==typeof o?o===e.type:o.type===e.type})})}var Xu=new r.InjectionToken("@ngrx/effects Internal Root Guard"),$i=new r.InjectionToken("@ngrx/effects User Provided Effects"),ra=new r.InjectionToken("@ngrx/effects Internal Root Effects"),ui=new r.InjectionToken("@ngrx/effects Internal Root Effects Instances"),wi=new r.InjectionToken("@ngrx/effects Internal Feature Effects"),Si=new r.InjectionToken("@ngrx/effects Internal Feature Effects Instance Groups"),Jc=new r.InjectionToken("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:function(){return Gr}}),Xi="@ngrx/effects/init";(0,Zt.PH)(Xi);function Mf(a){return Qu(a,"ngrxOnInitEffects")}function Qu(a,n){return a&&n in a&&"function"==typeof a[n]}var Ju=function(){var a=function(n){(0,G.Z)(e,n);var t=(0,H.Z)(e);function e(o,s){var u;return(0,p.Z)(this,e),(u=t.call(this)).errorHandler=o,u.effectsErrorHandler=s,u}return(0,_.Z)(e,[{key:"addEffects",value:function(s){this.next(s)}},{key:"toActions",value:function(){var s=this;return this.pipe(Wc(function(u){return function Ku(a){return"Object"!==a.constructor.name&&"Function"!==a.constructor.name}(u)?nu(u):u}),(0,Za.z)(function(u){return u.pipe(Wc(tl))}),(0,Za.z)(function(u){var c=u.pipe(Vu(function(m){return function g0(a,n){return function(t){var e=h0(t,a,n);return function Ff(a){return Qu(a,"ngrxOnRunEffects")}(t)?t.ngrxOnRunEffects(e):e}}(s.errorHandler,s.effectsErrorHandler)(m)}),(0,Ce.U)(function(m){return function If(a,n){if("N"===a.notification.kind){var t=a.notification.value,e=!function iu(a){return"function"!=typeof a&&a&&a.type&&"string"==typeof a.type}(t);e&&n.handleError(new Error("Effect ".concat(function ou(a){var n=a.propertyName,o="function"==typeof a.sourceInstance[n];return'"'.concat(a.sourceName,".").concat(String(n)).concat(o?"()":"",'"')}(a)," dispatched an invalid action: ").concat(function _s(a){try{return JSON.stringify(a)}catch{return a}}(t))))}}(m,s.errorHandler),m.notification}),(0,Q.h)(function(m){return"N"===m.kind&&null!=m.value}),function Hu(){return(0,vs.e)(function(a,n){a.subscribe((0,mo.x)(n,function(t){return Af(t,n)}))})}()),l=u.pipe((0,kn.q)(1),(0,Q.h)(Mf),(0,Ce.U)(function(m){return m.ngrxOnInitEffects()}));return(0,J.T)(c,l)}))}}]),e}(se.x);return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(r.ErrorHandler),r.\u0275\u0275inject(Jc))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}();function tl(a){return function el(a){return Qu(a,"ngrxOnIdentifyEffects")}(a)?a.ngrxOnIdentifyEffects():""}var nl=function(){var a=function(){function n(t,e){(0,p.Z)(this,n),this.effectSources=t,this.store=e,this.effectsSubscription=null}return(0,_.Z)(n,[{key:"isStarted",get:function(){return!!this.effectsSubscription}},{key:"start",value:function(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}},{key:"ngOnDestroy",value:function(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Ju),r.\u0275\u0275inject(Zt.yh))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),Bf=function(){var a=function(){function n(t,e,o,s,u,c,l){(0,p.Z)(this,n),this.sources=t,e.start();var C,m=(0,te.Z)(s);try{for(m.s();!(C=m.n()).done;)t.addEffects(C.value)}catch(B){m.e(B)}finally{m.f()}o.dispatch({type:Xi})}return(0,_.Z)(n,[{key:"addEffects",value:function(e){this.sources.addEffects(e)}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Ju),r.\u0275\u0275inject(nl),r.\u0275\u0275inject(Zt.yh),r.\u0275\u0275inject(ui),r.\u0275\u0275inject(Zt.cr,8),r.\u0275\u0275inject(Zt.CK,8),r.\u0275\u0275inject(Xu,8))},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({}),a}(),Nf=function(){var a=(0,_.Z)(function n(t,e,o,s){(0,p.Z)(this,n);var l,u=e.flat(),c=(0,te.Z)(u);try{for(c.s();!(l=c.n()).done;)t.addEffects(l.value)}catch(C){c.e(C)}finally{c.f()}});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Bf),r.\u0275\u0275inject(Si),r.\u0275\u0275inject(Zt.cr,8),r.\u0275\u0275inject(Zt.CK,8))},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({}),a}(),au=function(){var a=function(){function n(){(0,p.Z)(this,n)}return(0,_.Z)(n,null,[{key:"forFeature",value:function(){for(var e=arguments.length,o=new Array(e),s=0;s<e;s++)o[s]=arguments[s];var u=o.flat(),c=Wu(u);return{ngModule:Nf,providers:[c,{provide:wi,multi:!0,useValue:u},{provide:$i,multi:!0,useValue:[]},{provide:Si,multi:!0,useFactory:Yu,deps:[wi,$i]}]}}},{key:"forRoot",value:function(){for(var e=arguments.length,o=new Array(e),s=0;s<e;s++)o[s]=arguments[s];var u=o.flat(),c=Wu(u);return{ngModule:Bf,providers:[c,{provide:ra,useValue:[u]},{provide:Xu,useFactory:v0},{provide:$i,multi:!0,useValue:[]},{provide:ui,useFactory:Yu,deps:[ra,$i]}]}}}]),n}();return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({}),a}();function Yu(a,n){var o,t=[],e=(0,te.Z)(a);try{for(e.s();!(o=e.n()).done;)t.push.apply(t,(0,y.Z)(o.value))}catch(m){e.e(m)}finally{e.f()}var c,u=(0,te.Z)(n);try{for(u.s();!(c=u.n()).done;)t.push.apply(t,(0,y.Z)(c.value))}catch(m){u.e(m)}finally{u.f()}return t.map(function(m){return function ru(a){return a instanceof r.InjectionToken||Ca(a)}(m)?(0,r.inject)(m):m})}function v0(){var a=(0,r.inject)(nl,{optional:!0,skipSelf:!0}),n=(0,r.inject)(ra,{self:!0});if((1!==n.length||0!==n[0].length)&&a)throw new TypeError("EffectsModule.forRoot() called twice. Feature modules should use EffectsModule.forFeature() instead.");return"guarded"}var ys=function(){var a=function(){function n(){(0,p.Z)(this,n)}return(0,_.Z)(n,[{key:"create",value:function(e,o,s,u){var c="string"==typeof e?(0,b.Z)((0,b.Z)({},u||{}),{},{entityName:e,entityOp:o,data:s}):e;return this.createCore(c)}},{key:"createCore",value:function(e){var o=e.entityName,s=e.entityOp,u=e.tag;if(!o)throw new Error("Missing entity name for new action");if(null==s)throw new Error("Missing EntityOp for new action");return{type:this.formatActionType(s,u||o),payload:e}}},{key:"createFromAction",value:function(e,o){return this.create((0,b.Z)((0,b.Z)({},e.payload),o))}},{key:"formatActionType",value:function(e,o){return"[".concat(o,"] ").concat(e)}}]),n}();return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),y0=function(){function a(n,t){(0,p.Z)(this,a),this.entityName=n,this.selectId=t}return(0,_.Z)(a,[{key:"mustBeEntity",value:function(t){var e=this.extractData(t);if(!e)return this.throwError(t,"should have a single entity.");var o=this.selectId(e);return this.isNotKeyType(o)&&this.throwError(t,"has a missing or invalid entity key (id)"),e}},{key:"mustBeEntities",value:function(t){var e=this,o=this.extractData(t);return Array.isArray(o)?(o.forEach(function(s,u){var c=e.selectId(s);if(e.isNotKeyType(c)){var l=", item ".concat(u+1,", does not have a valid entity key (id)");e.throwError(t,l)}}),o):this.throwError(t,"should be an array of entities")}},{key:"mustBeKey",value:function(t){var e=this.extractData(t);if(void 0===e)throw new Error("should be a single entity key");if(this.isNotKeyType(e))throw new Error("is not a valid key (id)");return e}},{key:"mustBeKeys",value:function(t){var e=this,o=this.extractData(t);return Array.isArray(o)?(o.forEach(function(s,u){if(e.isNotKeyType(s)){var c="".concat(e.entityName," ', item ").concat(u+1,", is not a valid entity key (id)");e.throwError(t,c)}}),o):this.throwError(t,"should be an array of entity keys (id)")}},{key:"mustBeUpdate",value:function(t){var e=this.extractData(t);if(!e)return this.throwError(t,"should be a single entity update");var o=e.id,u=this.selectId(e.changes);return(this.isNotKeyType(o)||this.isNotKeyType(u))&&this.throwError(t,"has a missing or invalid entity key (id)"),e}},{key:"mustBeUpdates",value:function(t){var e=this,o=this.extractData(t);return Array.isArray(o)?(o.forEach(function(s,u){var c=s.id,m=e.selectId(s.changes);(e.isNotKeyType(c)||e.isNotKeyType(m))&&e.throwError(t,", item ".concat(u+1,", has a missing or invalid entity key (id)"))}),o):this.throwError(t,"should be an array of entity updates")}},{key:"mustBeUpdateResponse",value:function(t){var e=this.extractData(t);if(!e)return this.throwError(t,"should be a single entity update");var o=e.id,u=this.selectId(e.changes);return(this.isNotKeyType(o)||this.isNotKeyType(u))&&this.throwError(t,"has a missing or invalid entity key (id)"),e}},{key:"mustBeUpdateResponses",value:function(t){var e=this,o=this.extractData(t);return Array.isArray(o)?(o.forEach(function(s,u){var c=s.id,m=e.selectId(s.changes);(e.isNotKeyType(c)||e.isNotKeyType(m))&&e.throwError(t,", item ".concat(u+1,", has a missing or invalid entity key (id)"))}),o):this.throwError(t,"should be an array of entity updates")}},{key:"extractData",value:function(t){return t.payload&&t.payload.data}},{key:"isNotKeyType",value:function(t){return"string"!=typeof t&&"number"!=typeof t}},{key:"throwError",value:function(t,e){throw new Error("".concat(this.entityName,' EntityAction guard for "').concat(t.type,'": payload ').concat(e))}}]),a}();function ec(a){return a?.id}function ia(a){if(null==a)return[];if(Array.isArray(a[0])){var t=(0,Ti.Z)(a),e=t[0],o=t.slice(1);a=[].concat((0,y.Z)(e),(0,y.Z)(o))}return a}function wa(a){return a=a||ec,function(t){var e=a(t);if(null==e)throw new Error("Primary key may not be null/undefined.");return t&&{id:e,changes:t}}}function oa(){for(var a=arguments.length,n=new Array(a),t=0;t<a;t++)n[t]=arguments[t];var e=ia(n);switch(e.length){case 0:return(0,Q.h)(function(s){return s.payload&&null!=s.payload.entityOp});case 1:var o=e[0];return(0,Q.h)(function(s){return s.payload&&o===s.payload.entityOp});default:return(0,Q.h)(function(s){var u=s.payload&&s.payload.entityOp;return u&&e.some(function(c){return c===u})})}}function tc(){for(var a=arguments.length,n=new Array(a),t=0;t<a;t++)n[t]=arguments[t];var e=ia(n);switch(e.length){case 0:return(0,Q.h)(function(s){return s.payload&&null!=s.payload.entityName});case 1:var o=e[0];return(0,Q.h)(function(s){return s.payload&&o===s.payload.entityName});default:return(0,Q.h)(function(s){var u=s.payload&&s.payload.entityName;return!!u&&e.some(function(c){return c===u})})}}var ni=function(){return(ni=ni||{}).Add="Add",ni.Delete="Delete",ni.Update="Update",ni.Upsert="Upsert",ni}(),Lf=function(){function a(){(0,p.Z)(this,a)}return(0,_.Z)(a,[{key:"add",value:function(t,e){return e=Array.isArray(e)?e:e?[e]:[],{entityName:t,op:ni.Add,entities:e}}},{key:"delete",value:function(t,e){var o=Array.isArray(e)?e:e?[e]:[];return{entityName:t,op:ni.Delete,entities:o}}},{key:"update",value:function(t,e){return e=Array.isArray(e)?e:e?[e]:[],{entityName:t,op:ni.Update,entities:e}}},{key:"upsert",value:function(t,e){return e=Array.isArray(e)?e:e?[e]:[],{entityName:t,op:ni.Upsert,entities:e}}}]),a}();function nc(a){var n=(a=a&&a.changes?a:{changes:[]}).changes.filter(function(t){return null!=t&&t.entities&&t.entities.length>0});return(0,b.Z)((0,b.Z)({},a),{},{changes:n})}new Lf;var _r=function(){return(_r=_r||{})[_r.IgnoreChanges=0]="IgnoreChanges",_r[_r.PreserveChanges=1]="PreserveChanges",_r[_r.OverwriteChanges=2]="OverwriteChanges",_r}(),Yn=function(){return(Yn=Yn||{}).CLEAR_COLLECTIONS="@ngrx/data/entity-cache/clear-collections",Yn.LOAD_COLLECTIONS="@ngrx/data/entity-cache/load-collections",Yn.MERGE_QUERY_SET="@ngrx/data/entity-cache/merge-query-set",Yn.SET_ENTITY_CACHE="@ngrx/data/entity-cache/set-cache",Yn.SAVE_ENTITIES="@ngrx/data/entity-cache/save-entities",Yn.SAVE_ENTITIES_CANCEL="@ngrx/data/entity-cache/save-entities-cancel",Yn.SAVE_ENTITIES_CANCELED="@ngrx/data/entity-cache/save-entities-canceled",Yn.SAVE_ENTITIES_ERROR="@ngrx/data/entity-cache/save-entities-error",Yn.SAVE_ENTITIES_SUCCESS="@ngrx/data/entity-cache/save-entities-success",Yn}(),aa=(0,_.Z)(function a(n,t){(0,p.Z)(this,a),this.type=Yn.CLEAR_COLLECTIONS,this.payload={collections:n,tag:t}}),go=(0,_.Z)(function a(n,t){(0,p.Z)(this,a),this.type=Yn.LOAD_COLLECTIONS,this.payload={collections:n,tag:t}}),x0=(0,_.Z)(function a(n,t,e){(0,p.Z)(this,a),this.type=Yn.MERGE_QUERY_SET,this.payload={querySet:n,mergeStrategy:null===t?_r.PreserveChanges:t,tag:e}}),b0=(0,_.Z)(function a(n,t){(0,p.Z)(this,a),this.cache=n,this.type=Yn.SET_ENTITY_CACHE,this.payload={cache:n,tag:t}}),C0=(0,_.Z)(function a(n,t,e){(0,p.Z)(this,a),this.type=Yn.SAVE_ENTITIES,e=e||{},n&&(n.tag=n.tag||e.tag),this.payload=(0,b.Z)((0,b.Z)({changeSet:n,url:t},e),{},{tag:n.tag})}),w0=(0,_.Z)(function a(n,t,e,o){(0,p.Z)(this,a),this.type=Yn.SAVE_ENTITIES_CANCEL,this.payload={correlationId:n,reason:t,entityNames:e,tag:o}}),jf=(0,_.Z)(function a(n,t,e){(0,p.Z)(this,a),this.type=Yn.SAVE_ENTITIES_CANCELED,this.payload={correlationId:n,reason:t,tag:e}}),S0=(0,_.Z)(function a(n,t){(0,p.Z)(this,a),this.type=Yn.SAVE_ENTITIES_ERROR,this.payload={error:n,originalAction:t,correlationId:t.payload.correlationId}}),rc=(0,_.Z)(function a(n,t,e){(0,p.Z)(this,a),this.type=Yn.SAVE_ENTITIES_SUCCESS,e=e||{},n&&(n.tag=n.tag||e.tag),this.payload=(0,b.Z)((0,b.Z)({changeSet:n,url:t},e),{},{tag:n.tag})}),ht=function(){return(ht=ht||{}).CANCEL_PERSIST="@ngrx/data/cancel-persist",ht.CANCELED_PERSIST="@ngrx/data/canceled-persist",ht.QUERY_ALL="@ngrx/data/query-all",ht.QUERY_ALL_SUCCESS="@ngrx/data/query-all/success",ht.QUERY_ALL_ERROR="@ngrx/data/query-all/error",ht.QUERY_LOAD="@ngrx/data/query-load",ht.QUERY_LOAD_SUCCESS="@ngrx/data/query-load/success",ht.QUERY_LOAD_ERROR="@ngrx/data/query-load/error",ht.QUERY_MANY="@ngrx/data/query-many",ht.QUERY_MANY_SUCCESS="@ngrx/data/query-many/success",ht.QUERY_MANY_ERROR="@ngrx/data/query-many/error",ht.QUERY_BY_KEY="@ngrx/data/query-by-key",ht.QUERY_BY_KEY_SUCCESS="@ngrx/data/query-by-key/success",ht.QUERY_BY_KEY_ERROR="@ngrx/data/query-by-key/error",ht.SAVE_ADD_MANY="@ngrx/data/save/add-many",ht.SAVE_ADD_MANY_ERROR="@ngrx/data/save/add-many/error",ht.SAVE_ADD_MANY_SUCCESS="@ngrx/data/save/add-many/success",ht.SAVE_ADD_ONE="@ngrx/data/save/add-one",ht.SAVE_ADD_ONE_ERROR="@ngrx/data/save/add-one/error",ht.SAVE_ADD_ONE_SUCCESS="@ngrx/data/save/add-one/success",ht.SAVE_DELETE_MANY="@ngrx/data/save/delete-many",ht.SAVE_DELETE_MANY_SUCCESS="@ngrx/data/save/delete-many/success",ht.SAVE_DELETE_MANY_ERROR="@ngrx/data/save/delete-many/error",ht.SAVE_DELETE_ONE="@ngrx/data/save/delete-one",ht.SAVE_DELETE_ONE_SUCCESS="@ngrx/data/save/delete-one/success",ht.SAVE_DELETE_ONE_ERROR="@ngrx/data/save/delete-one/error",ht.SAVE_UPDATE_MANY="@ngrx/data/save/update-many",ht.SAVE_UPDATE_MANY_SUCCESS="@ngrx/data/save/update-many/success",ht.SAVE_UPDATE_MANY_ERROR="@ngrx/data/save/update-many/error",ht.SAVE_UPDATE_ONE="@ngrx/data/save/update-one",ht.SAVE_UPDATE_ONE_SUCCESS="@ngrx/data/save/update-one/success",ht.SAVE_UPDATE_ONE_ERROR="@ngrx/data/save/update-one/error",ht.SAVE_UPSERT_MANY="@ngrx/data/save/upsert-many",ht.SAVE_UPSERT_MANY_SUCCESS="@ngrx/data/save/upsert-many/success",ht.SAVE_UPSERT_MANY_ERROR="@ngrx/data/save/upsert-many/error",ht.SAVE_UPSERT_ONE="@ngrx/data/save/upsert-one",ht.SAVE_UPSERT_ONE_SUCCESS="@ngrx/data/save/upsert-one/success",ht.SAVE_UPSERT_ONE_ERROR="@ngrx/data/save/upsert-one/error",ht.ADD_ALL="@ngrx/data/add-all",ht.ADD_MANY="@ngrx/data/add-many",ht.ADD_ONE="@ngrx/data/add-one",ht.REMOVE_ALL="@ngrx/data/remove-all",ht.REMOVE_MANY="@ngrx/data/remove-many",ht.REMOVE_ONE="@ngrx/data/remove-one",ht.UPDATE_MANY="@ngrx/data/update-many",ht.UPDATE_ONE="@ngrx/data/update-one",ht.UPSERT_MANY="@ngrx/data/upsert-many",ht.UPSERT_ONE="@ngrx/data/upsert-one",ht.COMMIT_ALL="@ngrx/data/commit-all",ht.COMMIT_MANY="@ngrx/data/commit-many",ht.COMMIT_ONE="@ngrx/data/commit-one",ht.UNDO_ALL="@ngrx/data/undo-all",ht.UNDO_MANY="@ngrx/data/undo-many",ht.UNDO_ONE="@ngrx/data/undo-one",ht.SET_CHANGE_STATE="@ngrx/data/set-change-state",ht.SET_COLLECTION="@ngrx/data/set-collection",ht.SET_FILTER="@ngrx/data/set-filter",ht.SET_LOADED="@ngrx/data/set-loaded",ht.SET_LOADING="@ngrx/data/set-loading",ht}(),ic="/success",rl="/error";function il(a){return a+ic}var xs=(0,_.Z)(function a(n,t){(0,p.Z)(this,a),this.error=n,this.requestData=t,this.message="string"==typeof n?n:function Sa(a){var n=a.error,t=a.body,e=a.message,o=null;return n?o="string"==typeof n?n:n.message:e?o=e:t&&(o="string"==typeof t?t:t.error),"string"==typeof o?o:o?JSON.stringify(o):null}(n)}),$a=(0,_.Z)(function a(){(0,p.Z)(this,a)}),su=(0,_.Z)(function a(){(0,p.Z)(this,a)}),$f=new r.InjectionToken("@ngrx/data Plural Names"),uu=(0,_.Z)(function a(){(0,p.Z)(this,a)}),P0=(0,_.Z)(function a(){(0,p.Z)(this,a)}),k0=function(){var a=function(){function n(t){(0,p.Z)(this,n),this.pluralizer=t,this.knownHttpResourceUrls={}}return(0,_.Z)(n,[{key:"getResourceUrls",value:function(e,o){var u=this.knownHttpResourceUrls[e];if(!u){var c=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?o:ol(o);u={entityResourceUrl:"".concat(c,"/").concat(e,"/").toLowerCase(),collectionResourceUrl:"".concat(c,"/").concat(this.pluralizer.pluralize(e),"/").toLowerCase()},this.registerHttpResourceUrls((0,d.Z)({},e,u))}return u}},{key:"entityResource",value:function(e,o,s){return this.getResourceUrls(e,o,s).entityResourceUrl}},{key:"collectionResource",value:function(e,o){return this.getResourceUrls(e,o).collectionResourceUrl}},{key:"registerHttpResourceUrls",value:function(e){this.knownHttpResourceUrls=(0,b.Z)((0,b.Z)({},this.knownHttpResourceUrls),e||{})}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(uu))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}();function ol(a){return a.replace(/^[/\s]+|[/\s]+$/g,"")}var E2=function(){function a(n,t,e,o){(0,p.Z)(this,a),this.http=t,this.httpUrlGenerator=e,this.getDelay=0,this.saveDelay=0,this.timeout=0,this.trailingSlashEndpoints=!1,this._name="".concat(n," DefaultDataService"),this.entityName=n;var s=o||{},u=s.root,c=void 0===u?"api":u,l=s.delete404OK,C=s.getDelay,T=void 0===C?0:C,B=s.saveDelay,F=void 0===B?0:B,U=s.timeout,ae=void 0===U?0:U,ue=s.trailingSlashEndpoints,me=void 0!==ue&&ue;this.delete404OK=void 0===l||l,this.entityUrl=e.entityResource(n,c,me),this.entitiesUrl=e.collectionResource(n,c),this.getDelay=T,this.saveDelay=F,this.timeout=ae}return(0,_.Z)(a,[{key:"name",get:function(){return this._name}},{key:"add",value:function(t,e){var o=t||new Error('No "'.concat(this.entityName,'" entity to add'));return this.execute("POST",this.entityUrl,o,null,e)}},{key:"delete",value:function(t,e){var o;return null==t&&(o=new Error('No "'.concat(this.entityName,'" key to delete'))),this.execute("DELETE",this.entityUrl+t,o,null,e).pipe((0,Ce.U)(function(s){return t}))}},{key:"getAll",value:function(t){return this.execute("GET",this.entitiesUrl,null,t)}},{key:"getById",value:function(t,e){var o;return null==t&&(o=new Error('No "'.concat(this.entityName,'" key to get'))),this.execute("GET",this.entityUrl+t,o,null,e)}},{key:"getWithQuery",value:function(t,e){var s=new O.HttpParams("string"==typeof t?{fromString:t}:{fromObject:t});return this.execute("GET",this.entitiesUrl,void 0,{params:s},e)}},{key:"update",value:function(t,e){var o=t&&t.id,s=null==o?new Error('No "'.concat(this.entityName,'" update data or id')):t.changes;return this.execute("PUT",this.entityUrl+o,s,null,e)}},{key:"upsert",value:function(t,e){var o=t||new Error('No "'.concat(this.entityName,'" entity to upsert'));return this.execute("POST",this.entityUrl,o,null,e)}},{key:"execute",value:function(t,e,o,s,u){var c=void 0;u&&(c={headers:null!=u&&u.httpHeaders?new O.HttpHeaders(u?.httpHeaders):void 0,params:null!=u&&u.httpParams?new O.HttpParams(u?.httpParams):void 0});var m,C,T,B,l=void 0;(s||c)&&((0,r.isDevMode)()&&s&&c&&console.warn("@ngrx/data: options.httpParams will be merged with queryParams when both are are provided to getWithQuery(). In the event of a conflict HttpOptions.httpParams will override queryParams`. The queryParams parameter of getWithQuery() will be removed in next major release."),l=(0,b.Z)((0,b.Z)({},s),{},{headers:null!==(m=null===(C=c)||void 0===C?void 0:C.headers)&&void 0!==m?m:s?.headers,params:null!==(T=null===(B=c)||void 0===B?void 0:B.params)&&void 0!==T?T:s?.params}));var U,F={method:t,url:e,data:o,options:l};if(o instanceof Error)return this.handleError(F)(o);switch(t){case"DELETE":U=this.http.delete(e,l),this.saveDelay&&(U=U.pipe((0,Rr.g)(this.saveDelay)));break;case"GET":U=this.http.get(e,l),this.getDelay&&(U=U.pipe((0,Rr.g)(this.getDelay)));break;case"POST":U=this.http.post(e,o,l),this.saveDelay&&(U=U.pipe((0,Rr.g)(this.saveDelay)));break;case"PUT":U=this.http.put(e,o,l),this.saveDelay&&(U=U.pipe((0,Rr.g)(this.saveDelay)));break;default:var ae=new Error("Unimplemented HTTP method, "+t);U=(0,zo._)(ae)}return this.timeout&&(U=U.pipe((0,Wi.V)(this.timeout+this.saveDelay))),U.pipe((0,ti.K)(this.handleError(F)))}},{key:"handleError",value:function(t){var e=this;return function(o){var s=e.handleDelete404(o,t);if(s)return s;var u=new xs(o,t);return(0,zo._)(u)}}},{key:"handleDelete404",value:function(t,e){if(404===t.status&&"DELETE"===e.method&&this.delete404OK)return(0,je.of)({})}}]),a}(),al=function(){var a=function(){function n(t,e,o){(0,p.Z)(this,n),this.http=t,this.httpUrlGenerator=e,this.config=o,e.registerHttpResourceUrls((o=o||{}).entityHttpResourceUrls)}return(0,_.Z)(n,[{key:"create",value:function(e){return new E2(e,this.http,this.httpUrlGenerator,this.config)}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(O.HttpClient),r.\u0275\u0275inject(P0),r.\u0275\u0275inject($a,8))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),zf=new r.InjectionToken("@ngrx/data Entity Metadata"),Qi=function(){var a=function(){function n(t){var e=this;(0,p.Z)(this,n),this.definitions={},t&&t.forEach(function(o){return e.registerMetadataMap(o)})}return(0,_.Z)(n,[{key:"getDefinition",value:function(e){var o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e=e.trim();var s=this.definitions[e];if(!s&&o)throw new Error('No EntityDefinition for entity type "'.concat(e,'".'));return s}},{key:"registerMetadata",value:function(e){if(e){var o=function P2(a){var n=a.entityName;if(!n)throw new Error("Missing required entityName");a.entityName=n=n.trim();var t=a.selectId||ec,e=a.sortComparer=a.sortComparer||!1,o=l0({selectId:t,sortComparer:e}),s=a.entityDispatcherOptions||{},u=o.getInitialState((0,b.Z)({entityName:n,filter:"",loaded:!1,loading:!1,changeState:{}},a.additionalCollectionState||{}));return{entityName:n,entityAdapter:o,entityDispatcherOptions:s,initialState:u,metadata:a,noChangeTracking:!0===a.noChangeTracking,selectId:t,sortComparer:e}}(e);this.registerDefinition(o)}}},{key:"registerMetadataMap",value:function(){var e=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(o||{}).forEach(function(s){return e.registerMetadata((0,b.Z)({entityName:s},o[s]))})}},{key:"registerDefinition",value:function(e){this.definitions[e.entityName]=e}},{key:"registerDefinitions",value:function(e){Object.assign(this.definitions,e)}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(zf,8))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),Gf=ni.Update,Vf=function(){var a=function(){function n(t,e,o){(0,p.Z)(this,n),this.entityDefinitionService=t,this.http=e,this.idSelectors={},this.saveDelay=0,this.timeout=0;var s=o||{},u=s.saveDelay,l=s.timeout,m=void 0===l?0:l;this.saveDelay=void 0===u?0:u,this.timeout=m}return(0,_.Z)(n,[{key:"saveEntities",value:function(e,o){var s=this;e=this.filterChangeSet(e),e=this.flattenUpdates(e);var u=this.http.post(o,e).pipe((0,Ce.U)(function(c){return s.restoreUpdates(c)}),(0,ti.K)(this.handleError({method:"POST",url:o,data:e})));return this.timeout&&(u=u.pipe((0,Wi.V)(this.timeout))),this.saveDelay&&(u=u.pipe((0,Rr.g)(this.saveDelay))),u}},{key:"handleError",value:function(e){return function(o){var s=new xs(o,e);return(0,zo._)(s)}}},{key:"filterChangeSet",value:function(e){return nc(e)}},{key:"flattenUpdates",value:function(e){var o=e.changes;if(0===o.length)return e;var s=!1;return o=o.map(function(u){return u.op===Gf&&u.entities.length>0?(s=!0,(0,b.Z)((0,b.Z)({},u),{},{entities:u.entities.map(function(c){return c.changes})})):u}),s?(0,b.Z)((0,b.Z)({},e),{},{changes:o}):e}},{key:"restoreUpdates",value:function(e){var o=this;if(null==e)return e;var s=e.changes;if(0===s.length)return e;var u=!1;return s=s.map(function(c){if(c.op===Gf){u=!0;var l=o.getIdSelector(c.entityName);return(0,b.Z)((0,b.Z)({},c),{},{entities:c.entities.map(function(m){return{id:l(m),changes:m}})})}return c}),u?(0,b.Z)((0,b.Z)({},e),{},{changes:s}):e}},{key:"getIdSelector",value:function(e){var o=this.idSelectors[e];return o||(o=this.entityDefinitionService.getDefinition(e).selectId,this.idSelectors[e]=o),o}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Qi),r.\u0275\u0275inject(O.HttpClient),r.\u0275\u0275inject($a,8))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),oc=function(){var a=function(){function n(t){(0,p.Z)(this,n),this.defaultDataServiceFactory=t,this.services={}}return(0,_.Z)(n,[{key:"getService",value:function(e){e=e.trim();var o=this.services[e];return o||(o=this.defaultDataServiceFactory.create(e),this.services[e]=o),o}},{key:"registerService",value:function(e,o){this.services[e.trim()]=o}},{key:"registerServices",value:function(e){this.services=(0,b.Z)((0,b.Z)({},this.services),e)}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(al))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),Hf=(0,_.Z)(function a(){(0,p.Z)(this,a)}),A0=function(){var a=function(){function n(t,e){(0,p.Z)(this,n),this.logger=t,this.entityActionFactory=e}return(0,_.Z)(n,[{key:"handleSuccess",value:function(e){var o=this,s=il(e.payload.entityOp);return function(u){return o.entityActionFactory.createFromAction(e,{entityOp:s,data:u})}}},{key:"handleError",value:function(e){var o=this,s=function E0(a){return a+rl}(e.payload.entityOp);return function(u){var l={error:u instanceof xs?u:new xs(u,null),originalAction:e};return o.logger.error(l),o.entityActionFactory.createFromAction(e,{entityOp:s,data:l})}}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(su),r.\u0275\u0275inject(ys))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),qf=(0,_.Z)(function a(n){(0,p.Z)(this,a),this.message=n,this.message=n||"Canceled by user"}),sl=function(){var a=function(){function n(){(0,p.Z)(this,n),this.seed=0,this.prefix="CRID"}return(0,_.Z)(n,[{key:"next",value:function(){return this.seed+=1,this.prefix+this.seed}}]),n}();return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),ac=function(){var a=(0,_.Z)(function n(){(0,p.Z)(this,n),this.optimisticAdd=!1,this.optimisticDelete=!0,this.optimisticUpdate=!1,this.optimisticUpsert=!1,this.optimisticSaveEntities=!1});return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),Kf=function(){var a=function(){function n(t,e,o,s){(0,p.Z)(this,n),this.correlationIdGenerator=t,this.defaultDispatcherOptions=e,this.store=s,this.reducedActions$=o.pipe((0,Zi.d)(1)),this.raSubscription=this.reducedActions$.subscribe()}return(0,_.Z)(n,[{key:"dispatch",value:function(e){return this.store.dispatch(e),e}},{key:"cancelSaveEntities",value:function(e,o,s,u){if(!e)throw new Error("Missing correlationId");var c=new w0(e,o,s,u);this.dispatch(c)}},{key:"clearCollections",value:function(e,o){this.dispatch(new aa(e,o))}},{key:"loadCollections",value:function(e,o){this.dispatch(new go(e,o))}},{key:"mergeQuerySet",value:function(e,o,s){this.dispatch(new x0(e,o,s))}},{key:"setEntityCache",value:function(e,o){this.dispatch(new b0(e,o))}},{key:"saveEntities",value:function(e,o,s){var u=Array.isArray(e)?{changes:e}:e,c=null==(s=s||{}).correlationId?this.correlationIdGenerator.next():s.correlationId,l=null==s.isOptimistic?this.defaultDispatcherOptions.optimisticSaveEntities||!1:!0===s.isOptimistic,m=s.tag||"Save Entities";s=(0,b.Z)((0,b.Z)({},s),{},{correlationId:c,isOptimistic:l,tag:m});var C=new C0(u,o,s);return this.dispatch(C),this.getSaveEntitiesResponseData$(s.correlationId).pipe((0,Zi.d)(1))}},{key:"getSaveEntitiesResponseData$",value:function(e){return this.reducedActions$.pipe((0,Q.h)(function(o){return o.type===Yn.SAVE_ENTITIES_SUCCESS||o.type===Yn.SAVE_ENTITIES_ERROR||o.type===Yn.SAVE_ENTITIES_CANCEL}),(0,Q.h)(function(o){return e===o.payload.correlationId}),(0,kn.q)(1),(0,Za.z)(function(o){return o.type===Yn.SAVE_ENTITIES_CANCEL?(0,zo._)(new qf(o.payload.reason)):o.type===Yn.SAVE_ENTITIES_SUCCESS?(0,je.of)(o.payload.changeSet):(0,zo._)(o.payload)}))}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(sl),r.\u0275\u0275inject(ac),r.\u0275\u0275inject(Zt.Y$),r.\u0275\u0275inject(Zt.yh))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),R0=function(){function a(n,t,e){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ec,s=arguments.length>4?arguments[4]:void 0,u=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0,l=arguments.length>7?arguments[7]:void 0;(0,p.Z)(this,a),this.entityName=n,this.entityActionFactory=t,this.store=e,this.selectId=o,this.defaultDispatcherOptions=s,this.reducedActions$=u,this.correlationIdGenerator=l,this.guard=new y0(n,o),this.toUpdate=wa(o);var m=(0,Zt.P1)(c,function(C){return C[n]});this.entityCollection$=e.select(m)}return(0,_.Z)(a,[{key:"createEntityAction",value:function(t,e,o){return this.entityActionFactory.create((0,b.Z)({entityName:this.entityName,entityOp:t,data:e},o))}},{key:"createAndDispatch",value:function(t,e,o){var s=this.createEntityAction(t,e,o);return this.dispatch(s),s}},{key:"dispatch",value:function(t){return this.store.dispatch(t),t}},{key:"add",value:function(t,e){var o=this;e=this.setSaveEntityActionOptions(e,this.defaultDispatcherOptions.optimisticAdd);var s=this.createEntityAction(ht.SAVE_ADD_ONE,t,e);return e.isOptimistic&&this.guard.mustBeEntity(s),this.dispatch(s),this.getResponseData$(e.correlationId).pipe((0,ko.M)(this.entityCollection$),(0,Ce.U)(function(u){var c=(0,g.Z)(u,2);return c[1].entities[o.selectId(c[0])]}),(0,Zi.d)(1))}},{key:"cancel",value:function(t,e,o){if(!t)throw new Error("Missing correlationId");this.createAndDispatch(ht.CANCEL_PERSIST,e,{correlationId:t})}},{key:"delete",value:function(t,e){e=this.setSaveEntityActionOptions(e,this.defaultDispatcherOptions.optimisticDelete);var o=this.getKey(t),s=this.createEntityAction(ht.SAVE_DELETE_ONE,o,e);return this.guard.mustBeKey(s),this.dispatch(s),this.getResponseData$(e.correlationId).pipe((0,Ce.U)(function(){return o}),(0,Zi.d)(1))}},{key:"getAll",value:function(t){var e=this;t=this.setQueryEntityActionOptions(t);var o=this.createEntityAction(ht.QUERY_ALL,null,t);return this.dispatch(o),this.getResponseData$(t.correlationId).pipe((0,ko.M)(this.entityCollection$),(0,Ce.U)(function(s){var u=(0,g.Z)(s,2),l=u[1];return u[0].reduce(function(m,C){var T=l.entities[e.selectId(C)];return T&&m.push(T),m},[])}),(0,Zi.d)(1))}},{key:"getByKey",value:function(t,e){var o=this;e=this.setQueryEntityActionOptions(e);var s=this.createEntityAction(ht.QUERY_BY_KEY,t,e);return this.dispatch(s),this.getResponseData$(e.correlationId).pipe((0,ko.M)(this.entityCollection$),(0,Ce.U)(function(u){var c=(0,g.Z)(u,2);return c[1].entities[o.selectId(c[0])]}),(0,Zi.d)(1))}},{key:"getWithQuery",value:function(t,e){var o=this;e=this.setQueryEntityActionOptions(e);var s=this.createEntityAction(ht.QUERY_MANY,t,e);return this.dispatch(s),this.getResponseData$(e.correlationId).pipe((0,ko.M)(this.entityCollection$),(0,Ce.U)(function(u){var c=(0,g.Z)(u,2),m=c[1];return c[0].reduce(function(C,T){var B=m.entities[o.selectId(T)];return B&&C.push(B),C},[])}),(0,Zi.d)(1))}},{key:"load",value:function(t){t=this.setQueryEntityActionOptions(t);var e=this.createEntityAction(ht.QUERY_LOAD,null,t);return this.dispatch(e),this.getResponseData$(t.correlationId).pipe((0,Zi.d)(1))}},{key:"loadWithQuery",value:function(t,e){e=this.setQueryEntityActionOptions(e);var o=this.createEntityAction(ht.QUERY_MANY,t,e);return this.dispatch(o),this.getResponseData$(e.correlationId).pipe((0,Zi.d)(1))}},{key:"update",value:function(t,e){var o=this,s=this.toUpdate(t);e=this.setSaveEntityActionOptions(e,this.defaultDispatcherOptions.optimisticUpdate);var u=this.createEntityAction(ht.SAVE_UPDATE_ONE,s,e);return e.isOptimistic&&this.guard.mustBeUpdate(u),this.dispatch(u),this.getResponseData$(e.correlationId).pipe((0,Ce.U)(function(c){return c.changes}),(0,ko.M)(this.entityCollection$),(0,Ce.U)(function(c){var l=(0,g.Z)(c,2);return l[1].entities[o.selectId(l[0])]}),(0,Zi.d)(1))}},{key:"upsert",value:function(t,e){var o=this;e=this.setSaveEntityActionOptions(e,this.defaultDispatcherOptions.optimisticUpsert);var s=this.createEntityAction(ht.SAVE_UPSERT_ONE,t,e);return e.isOptimistic&&this.guard.mustBeEntity(s),this.dispatch(s),this.getResponseData$(e.correlationId).pipe((0,ko.M)(this.entityCollection$),(0,Ce.U)(function(u){var c=(0,g.Z)(u,2);return c[1].entities[o.selectId(c[0])]}),(0,Zi.d)(1))}},{key:"addAllToCache",value:function(t,e){this.createAndDispatch(ht.ADD_ALL,t,e)}},{key:"addOneToCache",value:function(t,e){this.createAndDispatch(ht.ADD_ONE,t,e)}},{key:"addManyToCache",value:function(t,e){this.createAndDispatch(ht.ADD_MANY,t,e)}},{key:"clearCache",value:function(t){this.createAndDispatch(ht.REMOVE_ALL,void 0,t)}},{key:"removeOneFromCache",value:function(t,e){this.createAndDispatch(ht.REMOVE_ONE,this.getKey(t),e)}},{key:"removeManyFromCache",value:function(t,e){var o=this;if(t&&0!==t.length){var s="object"==typeof t[0]?t.map(function(u){return o.getKey(u)}):t;this.createAndDispatch(ht.REMOVE_MANY,s,e)}}},{key:"updateOneInCache",value:function(t,e){var o=this.toUpdate(t);this.createAndDispatch(ht.UPDATE_ONE,o,e)}},{key:"updateManyInCache",value:function(t,e){var o=this;if(t&&0!==t.length){var s=t.map(function(u){return o.toUpdate(u)});this.createAndDispatch(ht.UPDATE_MANY,s,e)}}},{key:"upsertOneInCache",value:function(t,e){this.createAndDispatch(ht.UPSERT_ONE,t,e)}},{key:"upsertManyInCache",value:function(t,e){!t||0===t.length||this.createAndDispatch(ht.UPSERT_MANY,t,e)}},{key:"setFilter",value:function(t){this.createAndDispatch(ht.SET_FILTER,t)}},{key:"setLoaded",value:function(t){this.createAndDispatch(ht.SET_LOADED,!!t)}},{key:"setLoading",value:function(t){this.createAndDispatch(ht.SET_LOADING,!!t)}},{key:"getKey",value:function(t){return"object"==typeof t?this.selectId(t):t}},{key:"getResponseData$",value:function(t){var e=this;return this.reducedActions$.pipe((0,Q.h)(function(o){return!!o.payload}),(0,Q.h)(function(o){var s=o.payload,l=s.entityOp;return s.entityName===e.entityName&&s.correlationId===t&&(l.endsWith(ic)||l.endsWith(rl)||l===ht.CANCEL_PERSIST)}),(0,kn.q)(1),(0,Za.z)(function(o){var s=o.payload.entityOp;return s===ht.CANCEL_PERSIST?(0,zo._)(new qf(o.payload.data)):s.endsWith(ic)?(0,je.of)(o.payload.data):(0,zo._)(o.payload.data.error)}))}},{key:"setQueryEntityActionOptions",value:function(t){var e=null==(t=t||{}).correlationId?this.correlationIdGenerator.next():t.correlationId;return(0,b.Z)((0,b.Z)({},t),{},{correlationId:e})}},{key:"setSaveEntityActionOptions",value:function(t,e){var o=null==(t=t||{}).correlationId?this.correlationIdGenerator.next():t.correlationId,s=null==t.isOptimistic?e||!1:!0===t.isOptimistic;return(0,b.Z)((0,b.Z)({},t),{},{correlationId:o,isOptimistic:s})}}]),a}(),cu="entityCache",ul=new r.InjectionToken("@ngrx/data Entity Cache Name"),D0=new r.InjectionToken("@ngrx/data Entity Cache Meta Reducers"),Wf=new r.InjectionToken("@ngrx/data Entity Collection Meta Reducers"),T0=new r.InjectionToken("@ngrx/data Initial Entity Cache State"),cl=new r.InjectionToken("@ngrx/data Entity Cache Selector"),ll={provide:cl,useFactory:Xf,deps:[[new r.Optional,ul]]};function Xf(a){return(0,Zt.ZF)(a=a||cu)}var ci=function(){var a=function(){function n(t,e,o,s,u,c){(0,p.Z)(this,n),this.entityActionFactory=t,this.store=e,this.entityDispatcherDefaultOptions=o,this.entityCacheSelector=u,this.correlationIdGenerator=c,this.reducedActions$=s.pipe((0,Zi.d)(1)),this.raSubscription=this.reducedActions$.subscribe()}return(0,_.Z)(n,[{key:"create",value:function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ec,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=(0,b.Z)((0,b.Z)({},this.entityDispatcherDefaultOptions),s);return new R0(e,this.entityActionFactory,this.store,o,u,this.reducedActions$,this.entityCacheSelector,this.correlationIdGenerator)}},{key:"ngOnDestroy",value:function(){this.raSubscription.unsubscribe()}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(ys),r.\u0275\u0275inject(Zt.yh),r.\u0275\u0275inject(ac),r.\u0275\u0275inject(Zt.Y$),r.\u0275\u0275inject(cl),r.\u0275\u0275inject(sl))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),dl=new r.InjectionToken("@ngrx/data Entity Effects Scheduler"),Ro=function(){var a=function(){function n(t,e,o,s,u){var c=this;(0,p.Z)(this,n),this.actions=t,this.dataService=e,this.entityActionFactory=o,this.logger=s,this.scheduler=u,this.responseDelay=10,this.saveEntitiesCancel$=_i(function(){return c.actions.pipe(Ho(Yn.SAVE_ENTITIES_CANCEL),(0,Q.h)(function(l){return null!=l.payload.correlationId}))},{dispatch:!1}),this.saveEntities$=_i(function(){return c.actions.pipe(Ho(Yn.SAVE_ENTITIES),(0,Za.z)(function(l){return c.saveEntities(l)}))})}return(0,_.Z)(n,[{key:"saveEntities",value:function(e){var o=this,s=e.payload.error;if(s)return this.handleSaveEntitiesError$(e)(s);try{var u=nc(e.payload.changeSet),c=e.payload,l=c.correlationId,T=c.url;return 0===u.changes.length?(0,je.of)(new rc(u,T,{correlationId:l,mergeStrategy:c.mergeStrategy,tag:c.tag})):zu(this.saveEntitiesCancel$.pipe((0,Q.h)(function(ae){return l===ae.payload.correlationId}),(0,Ce.U)(function(ae){return new jf(l,ae.payload.reason,ae.payload.tag)})),this.dataService.saveEntities(u,T).pipe((0,Li.b)(function(ae){return o.handleSaveEntitiesSuccess$(e,o.entityActionFactory)(ae)}),(0,ti.K)(this.handleSaveEntitiesError$(e))))}catch(ae){return this.handleSaveEntitiesError$(e)(ae)}}},{key:"handleSaveEntitiesError$",value:function(e){var o=this;return function(s){var u=s instanceof xs?s:new xs(s,null);return(0,je.of)(new S0(u,e)).pipe((0,Rr.g)(o.responseDelay,o.scheduler||eu.z))}}},{key:"handleSaveEntitiesSuccess$",value:function(e,o){var s=e.payload,u=s.url,C={correlationId:s.correlationId,mergeStrategy:s.mergeStrategy,tag:s.tag};return function(T){if(T)return(0,je.of)(new rc(T,u,C));if(T=e.payload.changeSet,!e.payload.isOptimistic)return(0,je.of)(new rc(T,u,C));var B=T.changes.reduce(function(F,U){return-1===F.indexOf(U.entityName)?F.concat(U.entityName):F},[]);return(0,J.T)(B.map(function(F){return o.create(F,ht.SET_LOADING,!1)}))}}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(na),r.\u0275\u0275inject(Vf),r.\u0275\u0275inject(ys),r.\u0275\u0275inject(su),r.\u0275\u0275inject(dl,8))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),sa=[ht.QUERY_ALL,ht.QUERY_LOAD,ht.QUERY_BY_KEY,ht.QUERY_MANY,ht.SAVE_ADD_ONE,ht.SAVE_DELETE_ONE,ht.SAVE_UPDATE_ONE,ht.SAVE_UPSERT_ONE],Ua=function(){var a=function(){function n(t,e,o,s,u){var c=this;(0,p.Z)(this,n),this.actions=t,this.dataService=e,this.entityActionFactory=o,this.resultHandler=s,this.scheduler=u,this.responseDelay=10,this.cancel$=_i(function(){return c.actions.pipe(oa(ht.CANCEL_PERSIST),(0,Ce.U)(function(l){return l.payload.correlationId}),(0,Q.h)(function(l){return null!=l}))},{dispatch:!1}),this.persist$=_i(function(){return c.actions.pipe(oa(sa),(0,Za.z)(function(l){return c.persist(l)}))})}return(0,_.Z)(n,[{key:"persist",value:function(e){var o=this;if(e.payload.skip)return this.handleSkipSuccess$(e);if(e.payload.error)return this.handleError$(e)(e.payload.error);try{return zu(this.cancel$.pipe((0,Q.h)(function(c){return e.payload.correlationId===c}),(0,Ce.U)(function(c){return o.entityActionFactory.createFromAction(e,{entityOp:ht.CANCELED_PERSIST})})),this.callDataService(e).pipe((0,Ce.U)(this.resultHandler.handleSuccess(e)),(0,ti.K)(this.handleError$(e))))}catch(c){return this.handleError$(e)(c)}}},{key:"callDataService",value:function(e){var o=e.payload,u=o.entityOp,c=o.data,l=o.httpOptions,m=this.dataService.getService(o.entityName);switch(u){case ht.QUERY_ALL:case ht.QUERY_LOAD:return m.getAll(l);case ht.QUERY_BY_KEY:return m.getById(c,l);case ht.QUERY_MANY:return m.getWithQuery(c,l);case ht.SAVE_ADD_ONE:return m.add(c,l);case ht.SAVE_DELETE_ONE:return m.delete(c,l);case ht.SAVE_UPDATE_ONE:var C=c.id,T=c.changes;return m.update(c,l).pipe((0,Ce.U)(function(B){return B&&Object.keys(B).length>0?{id:C,changes:(0,b.Z)((0,b.Z)({},T),B),changed:!0}:{id:C,changes:T,changed:!1}}));case ht.SAVE_UPSERT_ONE:return m.upsert(c,l).pipe((0,Ce.U)(function(B){return B&&Object.keys(B).length>0?B:c}));default:throw new Error('Persistence action "'.concat(u,'" is not implemented.'))}}},{key:"handleError$",value:function(e){var o=this;return function(s){return(0,je.of)(o.resultHandler.handleError(e)(s)).pipe((0,Rr.g)(o.responseDelay,o.scheduler||eu.z))}}},{key:"handleSkipSuccess$",value:function(e){var o=il(e.payload.entityOp),s=this.entityActionFactory.createFromAction(e,{entityOp:o});return(0,je.of)(s).pipe((0,Rr.g)(this.responseDelay,this.scheduler||eu.z))}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(na),r.\u0275\u0275inject(oc),r.\u0275\u0275inject(ys),r.\u0275\u0275inject(Hf),r.\u0275\u0275inject(dl,8))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),I0=function(){function a(n,t){(0,p.Z)(this,a),this.entityName=n,n=n.trim();var e=t.create(n),o=e.dispatcher,s=e.selectors,u=e.selectors$;this.entityName=n,this.dispatcher=o,this.guard=o.guard,this.selectId=o.selectId,this.toUpdate=o.toUpdate,this.selectors=s,this.selectors$=u,this.collection$=u.collection$,this.count$=u.count$,this.entities$=u.entities$,this.entityActions$=u.entityActions$,this.entityMap$=u.entityMap$,this.errors$=u.errors$,this.filter$=u.filter$,this.filteredEntities$=u.filteredEntities$,this.keys$=u.keys$,this.loaded$=u.loaded$,this.loading$=u.loading$,this.changeState$=u.changeState$}return(0,_.Z)(a,[{key:"createEntityAction",value:function(t,e,o){return this.dispatcher.createEntityAction(t,e,o)}},{key:"createAndDispatch",value:function(t,e,o){return this.dispatcher.createAndDispatch(t,e,o)}},{key:"dispatch",value:function(t){return this.dispatcher.dispatch(t)}},{key:"store",get:function(){return this.dispatcher.store}},{key:"add",value:function(t,e){return this.dispatcher.add(t,e)}},{key:"cancel",value:function(t,e,o){this.dispatcher.cancel(t,e,o)}},{key:"delete",value:function(t,e){return this.dispatcher.delete(t,e)}},{key:"getAll",value:function(t){return this.dispatcher.getAll(t)}},{key:"getByKey",value:function(t,e){return this.dispatcher.getByKey(t,e)}},{key:"getWithQuery",value:function(t,e){return this.dispatcher.getWithQuery(t,e)}},{key:"load",value:function(t){return this.dispatcher.load(t)}},{key:"loadWithQuery",value:function(t,e){return this.dispatcher.loadWithQuery(t,e)}},{key:"update",value:function(t,e){return this.dispatcher.update(t,e)}},{key:"upsert",value:function(t,e){return this.dispatcher.upsert(t,e)}},{key:"addAllToCache",value:function(t,e){this.dispatcher.addAllToCache(t,e)}},{key:"addOneToCache",value:function(t,e){this.dispatcher.addOneToCache(t,e)}},{key:"addManyToCache",value:function(t,e){this.dispatcher.addManyToCache(t,e)}},{key:"clearCache",value:function(){this.dispatcher.clearCache()}},{key:"removeOneFromCache",value:function(t,e){this.dispatcher.removeOneFromCache(t,e)}},{key:"removeManyFromCache",value:function(t,e){this.dispatcher.removeManyFromCache(t,e)}},{key:"updateOneInCache",value:function(t,e){this.dispatcher.updateOneInCache(t,e)}},{key:"updateManyInCache",value:function(t,e){this.dispatcher.updateManyInCache(t,e)}},{key:"upsertOneInCache",value:function(t,e){this.dispatcher.upsertOneInCache(t,e)}},{key:"upsertManyInCache",value:function(t,e){this.dispatcher.upsertManyInCache(t,e)}},{key:"setFilter",value:function(t){this.dispatcher.setFilter(t)}},{key:"setLoaded",value:function(t){this.dispatcher.setLoaded(!!t)}},{key:"setLoading",value:function(t){this.dispatcher.setLoading(!!t)}}]),a}(),bs=function(){var a=function(){function n(t){(0,p.Z)(this,n),this.entityDefinitionService=t}return(0,_.Z)(n,[{key:"create",value:function(e){var o=this.entityDefinitionService&&this.entityDefinitionService.getDefinition(e,!1);return o&&o.initialState||function fl(a){return{entityName:a,ids:[],entities:{},filter:void 0,loaded:!1,loading:!1,changeState:{}}}(e)}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Qi,8))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),pl=function(){var a=function(){function n(t,e){(0,p.Z)(this,n),this.entityCollectionCreator=t||new bs,this.selectEntityCache=e||Xf(cu)}return(0,_.Z)(n,[{key:"createCollectionSelector",value:function(e){var o=this;return(0,Zt.P1)(this.selectEntityCache,function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})[e]||o.entityCollectionCreator.create(e)})}},{key:"createCollectionSelectors",value:function(e){var o="string"==typeof e?{entityName:e}:e,s=function(Se){return Se.ids},u=function(Se){return Se.entities},c=(0,Zt.P1)(s,u,function(me,Se){return me.map(function(we){return Se[we]})}),l=(0,Zt.P1)(s,function(me){return me.length}),m=function(Se){return Se.filter},C=o.filterFn,T=C?(0,Zt.P1)(c,m,function(me,Se){return C(me,Se)}):c,ue={};return Object.keys(o.additionalCollectionState||{}).forEach(function(me){ue["select"+me[0].toUpperCase()+me.slice(1)]=function(Se){return Se[me]}}),(0,b.Z)({selectCount:l,selectEntities:c,selectEntityMap:u,selectFilter:m,selectFilteredEntities:T,selectKeys:s,selectLoaded:function(Se){return Se.loaded},selectLoading:function(Se){return Se.loading},selectChangeState:function(Se){return Se.changeState}},ue)}},{key:"create",value:function(e){var o="string"==typeof e?{entityName:e}:e,s=o.entityName,u=this.createCollectionSelector(s),c=this.createCollectionSelectors(o),l={};return Object.keys(c).forEach(function(m){l[m]=(0,Zt.P1)(u,c[m])}),(0,b.Z)({entityName:s,selectCollection:u,selectEntityCache:this.selectEntityCache},l)}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(bs,8),r.\u0275\u0275inject(cl,8))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),On=function(){var a=function(){function n(t,e,o){(0,p.Z)(this,n),this.store=t,this.actions=e,this.selectEntityCache=o,this.entityCache$=this.store.select(this.selectEntityCache),this.entityActionErrors$=e.pipe((0,Q.h)(function(s){return s.payload&&s.payload.entityOp&&s.payload.entityOp.endsWith(rl)}),(0,Zi.d)(1))}return(0,_.Z)(n,[{key:"create",value:function(e,o){var s=this,u={entityName:e};return Object.keys(o).forEach(function(c){if(c.startsWith("select")){var l=c[6].toLowerCase()+c.substring(7)+"$";u[l]=s.store.select(o[c])}}),u.entityActions$=this.actions.pipe(tc(e)),u.errors$=this.entityActionErrors$.pipe(tc(e)),u}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Zt.yh),r.\u0275\u0275inject(na),r.\u0275\u0275inject(cl))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),Ji=function(){var a=function(){function n(t,e,o,s){(0,p.Z)(this,n),this.entityDispatcherFactory=t,this.entityDefinitionService=e,this.entitySelectorsFactory=o,this.entitySelectors$Factory=s}return(0,_.Z)(n,[{key:"create",value:function(e){e=e.trim();var o=this.entityDefinitionService.getDefinition(e),s=this.entityDispatcherFactory.create(e,o.selectId,o.entityDispatcherOptions),u=this.entitySelectorsFactory.create(o.metadata);return{dispatcher:s,entityName:e,selectors:u,selectors$:this.entitySelectors$Factory.create(e,u)}}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(ci),r.\u0275\u0275inject(Qi),r.\u0275\u0275inject(pl),r.\u0275\u0275inject(On))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),Vn=function(){var a=function(){function n(t){(0,p.Z)(this,n),this.entityCollectionServiceElementsFactory=t}return(0,_.Z)(n,[{key:"create",value:function(e){return new I0(e,this.entityCollectionServiceElementsFactory)}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Ji))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),Ui=function(){var a=(0,_.Z)(function n(t,e,o,s){(0,p.Z)(this,n),this.entityCollectionServiceFactory=t,this.store=s,this.entityActionErrors$=o.entityActionErrors$,this.entityCache$=o.entityCache$,this.reducedActions$=e.reducedActions$});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Vn),r.\u0275\u0275inject(ci),r.\u0275\u0275inject(On),r.\u0275\u0275inject(Zt.yh))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),yi=function(){var a=function(){function n(t){(0,p.Z)(this,n),this.entityServicesElements=t,this.EntityCollectionServices={}}return(0,_.Z)(n,[{key:"entityActionErrors$",get:function(){return this.entityServicesElements.entityActionErrors$}},{key:"entityCache$",get:function(){return this.entityServicesElements.entityCache$}},{key:"entityCollectionServiceFactory",get:function(){return this.entityServicesElements.entityCollectionServiceFactory}},{key:"reducedActions$",get:function(){return this.entityServicesElements.reducedActions$}},{key:"store",get:function(){return this.entityServicesElements.store}},{key:"dispatch",value:function(e){this.store.dispatch(e)}},{key:"createEntityCollectionService",value:function(e){return this.entityCollectionServiceFactory.create(e)}},{key:"getEntityCollectionService",value:function(e){var o=this.EntityCollectionServices[e];return o||(o=this.createEntityCollectionService(e),this.EntityCollectionServices[e]=o),o}},{key:"registerEntityCollectionService",value:function(e,o){this.EntityCollectionServices[o||e.entityName]=e}},{key:"registerEntityCollectionServices",value:function(e){var o=this;Array.isArray(e)?e.forEach(function(s){return o.registerEntityCollectionService(s)}):Object.keys(e||{}).forEach(function(s){o.registerEntityCollectionService(e[s],s)})}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Ui))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),Dr=(0,_.Z)(function a(){(0,p.Z)(this,a)}),er=function(){return(er=er||{})[er.Unchanged=0]="Unchanged",er[er.Added=1]="Added",er[er.Deleted=2]="Deleted",er[er.Updated=3]="Updated",er}(),sc=function(){function a(n,t){(0,p.Z)(this,a),this.adapter=n,this.selectId=t,this.selectId=t||ec}return(0,_.Z)(a,[{key:"commitAll",value:function(t){return 0===Object.keys(t.changeState).length?t:(0,b.Z)((0,b.Z)({},t),{},{changeState:{}})}},{key:"commitMany",value:function(t,e){var o=this;if(null==t||0===t.length)return e;var s=!1,u=t.reduce(function(c,l){var m="object"==typeof l?o.selectId(l):l;return c[m]&&(s||(c=(0,b.Z)({},c),s=!0),delete c[m]),c},e.changeState);return s?(0,b.Z)((0,b.Z)({},e),{},{changeState:u}):e}},{key:"commitOne",value:function(t,e){return null==t?e:this.commitMany([t],e)}},{key:"mergeQueryResults",value:function(t,e,o){return this.mergeServerUpserts(t,e,_r.PreserveChanges,o)}},{key:"mergeSaveAdds",value:function(t,e,o){return this.mergeServerUpserts(t,e,_r.OverwriteChanges,o)}},{key:"mergeSaveDeletes",value:function(t,e,o){var s=t;return e=(o=o??_r.OverwriteChanges)===_r.IgnoreChanges?e:this.commitMany(s,e),this.adapter.removeMany(s,e)}},{key:"mergeSaveUpdates",value:function(t,e,o){var s=this,u=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(null==t||0===t.length)return e;var m,c=!1,l=e.changeState;switch(o=o??_r.OverwriteChanges){case _r.IgnoreChanges:return m=T(t),this.adapter.updateMany(m,e);case _r.OverwriteChanges:return l=t.reduce(function(B,F){var U=F.id;return B[U]&&(c||(B=(0,b.Z)({},B),c=!0),delete B[U]),B},e.changeState),e=c?(0,b.Z)((0,b.Z)({},e),{},{changeState:l}):e,m=T(t),this.adapter.updateMany(m,e);case _r.PreserveChanges:var C=[];return l=t.reduce(function(B,F){var U=F.id,ae=B[U];if(ae){c||(B=(0,b.Z)({},B),c=!0);var ue=s.selectId(F.changes),me=ae;ue!==U&&delete B[U];var Se=(0,b.Z)((0,b.Z)({},me.originalValue),F.changes);B[ue]=(0,b.Z)((0,b.Z)({},me),{},{originalValue:Se})}else C.push(F);return B},e.changeState),e=c?(0,b.Z)((0,b.Z)({},e),{},{changeState:l}):e,m=T(C),this.adapter.updateMany(m,e)}function T(B){return!0===u&&(B=B.filter(function(F){return!0===F.changed})),B.map(function(F){return{id:F.id,changes:F.changes}})}}},{key:"mergeSaveUpserts",value:function(t,e,o){return this.mergeServerUpserts(t,e,_r.OverwriteChanges,o)}},{key:"mergeServerUpserts",value:function(t,e,o,s){var u=this;if(null==t||0===t.length)return e;var c=!1,l=e.changeState;switch(s=s??o){case _r.IgnoreChanges:return this.adapter.upsertMany(t,e);case _r.OverwriteChanges:return e=this.adapter.upsertMany(t,e),l=t.reduce(function(C,T){var B=u.selectId(T);return C[B]&&(c||(C=(0,b.Z)({},C),c=!0),delete C[B]),C},e.changeState),c?(0,b.Z)((0,b.Z)({},e),{},{changeState:l}):e;case _r.PreserveChanges:var m=[];return l=t.reduce(function(C,T){var B=u.selectId(T);return C[B]?c||(C=(0,b.Z)((0,b.Z)({},C),{},(0,d.Z)({},B,(0,b.Z)((0,b.Z)({},C[B]),{},{originalValue:T}))),c=!0):m.push(T),C},e.changeState),e=this.adapter.upsertMany(m,e),c?(0,b.Z)((0,b.Z)({},e),{},{changeState:l}):e}}},{key:"trackAddMany",value:function(t,e,o){var s=this;if(o===_r.IgnoreChanges||null==t||0===t.length)return e;var u=!1,c=t.reduce(function(l,m){var C=s.selectId(m);if(null==C||""===C)throw new Error("".concat(e.entityName," entity add requires a key to be tracked"));return l[C]||(u||(u=!0,l=(0,b.Z)({},l)),l[C]={changeType:er.Added}),l},e.changeState);return u?(0,b.Z)((0,b.Z)({},e),{},{changeState:c}):e}},{key:"trackAddOne",value:function(t,e,o){return null==t?e:this.trackAddMany([t],e,o)}},{key:"trackDeleteMany",value:function(t,e,o){if(o===_r.IgnoreChanges||null==t||0===t.length)return e;var s=!1,u=e.entities,c=t.reduce(function(l,m){var C=u[m];if(C){var T=l[m];T?T.changeType===er.Added?(B(),delete l[m]):T.changeType===er.Updated&&(B(),l[m]=(0,b.Z)((0,b.Z)({},l[m]),{},{changeType:er.Deleted})):(B(),l[m]={changeType:er.Deleted,originalValue:C})}return l;function B(){s||(s=!0,l=(0,b.Z)({},l))}},e.changeState);return s?(0,b.Z)((0,b.Z)({},e),{},{changeState:c}):e}},{key:"trackDeleteOne",value:function(t,e,o){return null==t?e:this.trackDeleteMany([t],e,o)}},{key:"trackUpdateMany",value:function(t,e,o){if(o===_r.IgnoreChanges||null==t||0===t.length)return e;var s=!1,u=e.entities,c=t.reduce(function(l,m){var C=m.id;if(null==C||""===C)throw new Error("".concat(e.entityName," entity update requires a key to be tracked"));var B=u[C];return B&&(l[C]||(s||(s=!0,l=(0,b.Z)({},l)),l[C]={changeType:er.Updated,originalValue:B})),l},e.changeState);return s?(0,b.Z)((0,b.Z)({},e),{},{changeState:c}):e}},{key:"trackUpdateOne",value:function(t,e,o){return null==t?e:this.trackUpdateMany([t],e,o)}},{key:"trackUpsertMany",value:function(t,e,o){var s=this;if(o===_r.IgnoreChanges||null==t||0===t.length)return e;var u=!1,c=e.entities,l=t.reduce(function(m,C){var T=s.selectId(C);if(null==T||""===T)throw new Error("".concat(e.entityName," entity upsert requires a key to be tracked"));if(!m[T]){u||(u=!0,m=(0,b.Z)({},m));var F=c[T];m[T]=null==F?{changeType:er.Added}:{changeType:er.Updated,originalValue:F}}return m},e.changeState);return u?(0,b.Z)((0,b.Z)({},e),{},{changeState:l}):e}},{key:"trackUpsertOne",value:function(t,e,o){return null==t?e:this.trackUpsertMany([t],e,o)}},{key:"undoAll",value:function(t){var o=Object.keys(t.changeState).reduce(function(c,l){var m=c.chgState[l];switch(m.changeType){case er.Added:c.remove.push(l);break;case er.Deleted:var C=m.originalValue;C&&c.upsert.push(C);break;case er.Updated:c.upsert.push(m.originalValue)}return c},{remove:[],upsert:[],chgState:t.changeState}),u=o.upsert;return t=this.adapter.removeMany(o.remove,t),t=this.adapter.upsertMany(u,t),(0,b.Z)((0,b.Z)({},t),{},{changeState:{}})}},{key:"undoMany",value:function(t,e){var o=this;if(null==t||0===t.length)return e;var s=!1,u=t.reduce(function(C,T){var B=C.changeState,F="object"==typeof T?o.selectId(T):T,U=B[F];if(U)switch(s||(B=(0,b.Z)({},B),s=!0),delete B[F],C.changeState=B,U.changeType){case er.Added:C.remove.push(F);break;case er.Deleted:var ae=U.originalValue;ae&&C.upsert.push(ae);break;case er.Updated:C.upsert.push(U.originalValue)}return C},{remove:[],upsert:[],changeState:e.changeState}),c=u.changeState,m=u.upsert;return e=this.adapter.removeMany(u.remove,e),e=this.adapter.upsertMany(m,e),s?(0,b.Z)((0,b.Z)({},e),{},{changeState:c}):e}},{key:"undoOne",value:function(t,e){return null==t?e:this.undoMany([t],e)}}]),a}(),hl=function(){function a(n,t,e){var o;(0,p.Z)(this,a),this.entityName=n,this.definition=t,this.methods=((0,d.Z)(o={},ht.CANCEL_PERSIST,this.cancelPersist.bind(this)),(0,d.Z)(o,ht.QUERY_ALL,this.queryAll.bind(this)),(0,d.Z)(o,ht.QUERY_ALL_ERROR,this.queryAllError.bind(this)),(0,d.Z)(o,ht.QUERY_ALL_SUCCESS,this.queryAllSuccess.bind(this)),(0,d.Z)(o,ht.QUERY_BY_KEY,this.queryByKey.bind(this)),(0,d.Z)(o,ht.QUERY_BY_KEY_ERROR,this.queryByKeyError.bind(this)),(0,d.Z)(o,ht.QUERY_BY_KEY_SUCCESS,this.queryByKeySuccess.bind(this)),(0,d.Z)(o,ht.QUERY_LOAD,this.queryLoad.bind(this)),(0,d.Z)(o,ht.QUERY_LOAD_ERROR,this.queryLoadError.bind(this)),(0,d.Z)(o,ht.QUERY_LOAD_SUCCESS,this.queryLoadSuccess.bind(this)),(0,d.Z)(o,ht.QUERY_MANY,this.queryMany.bind(this)),(0,d.Z)(o,ht.QUERY_MANY_ERROR,this.queryManyError.bind(this)),(0,d.Z)(o,ht.QUERY_MANY_SUCCESS,this.queryManySuccess.bind(this)),(0,d.Z)(o,ht.SAVE_ADD_MANY,this.saveAddMany.bind(this)),(0,d.Z)(o,ht.SAVE_ADD_MANY_ERROR,this.saveAddManyError.bind(this)),(0,d.Z)(o,ht.SAVE_ADD_MANY_SUCCESS,this.saveAddManySuccess.bind(this)),(0,d.Z)(o,ht.SAVE_ADD_ONE,this.saveAddOne.bind(this)),(0,d.Z)(o,ht.SAVE_ADD_ONE_ERROR,this.saveAddOneError.bind(this)),(0,d.Z)(o,ht.SAVE_ADD_ONE_SUCCESS,this.saveAddOneSuccess.bind(this)),(0,d.Z)(o,ht.SAVE_DELETE_MANY,this.saveDeleteMany.bind(this)),(0,d.Z)(o,ht.SAVE_DELETE_MANY_ERROR,this.saveDeleteManyError.bind(this)),(0,d.Z)(o,ht.SAVE_DELETE_MANY_SUCCESS,this.saveDeleteManySuccess.bind(this)),(0,d.Z)(o,ht.SAVE_DELETE_ONE,this.saveDeleteOne.bind(this)),(0,d.Z)(o,ht.SAVE_DELETE_ONE_ERROR,this.saveDeleteOneError.bind(this)),(0,d.Z)(o,ht.SAVE_DELETE_ONE_SUCCESS,this.saveDeleteOneSuccess.bind(this)),(0,d.Z)(o,ht.SAVE_UPDATE_MANY,this.saveUpdateMany.bind(this)),(0,d.Z)(o,ht.SAVE_UPDATE_MANY_ERROR,this.saveUpdateManyError.bind(this)),(0,d.Z)(o,ht.SAVE_UPDATE_MANY_SUCCESS,this.saveUpdateManySuccess.bind(this)),(0,d.Z)(o,ht.SAVE_UPDATE_ONE,this.saveUpdateOne.bind(this)),(0,d.Z)(o,ht.SAVE_UPDATE_ONE_ERROR,this.saveUpdateOneError.bind(this)),(0,d.Z)(o,ht.SAVE_UPDATE_ONE_SUCCESS,this.saveUpdateOneSuccess.bind(this)),(0,d.Z)(o,ht.SAVE_UPSERT_MANY,this.saveUpsertMany.bind(this)),(0,d.Z)(o,ht.SAVE_UPSERT_MANY_ERROR,this.saveUpsertManyError.bind(this)),(0,d.Z)(o,ht.SAVE_UPSERT_MANY_SUCCESS,this.saveUpsertManySuccess.bind(this)),(0,d.Z)(o,ht.SAVE_UPSERT_ONE,this.saveUpsertOne.bind(this)),(0,d.Z)(o,ht.SAVE_UPSERT_ONE_ERROR,this.saveUpsertOneError.bind(this)),(0,d.Z)(o,ht.SAVE_UPSERT_ONE_SUCCESS,this.saveUpsertOneSuccess.bind(this)),(0,d.Z)(o,ht.ADD_ALL,this.addAll.bind(this)),(0,d.Z)(o,ht.ADD_MANY,this.addMany.bind(this)),(0,d.Z)(o,ht.ADD_ONE,this.addOne.bind(this)),(0,d.Z)(o,ht.REMOVE_ALL,this.removeAll.bind(this)),(0,d.Z)(o,ht.REMOVE_MANY,this.removeMany.bind(this)),(0,d.Z)(o,ht.REMOVE_ONE,this.removeOne.bind(this)),(0,d.Z)(o,ht.UPDATE_MANY,this.updateMany.bind(this)),(0,d.Z)(o,ht.UPDATE_ONE,this.updateOne.bind(this)),(0,d.Z)(o,ht.UPSERT_MANY,this.upsertMany.bind(this)),(0,d.Z)(o,ht.UPSERT_ONE,this.upsertOne.bind(this)),(0,d.Z)(o,ht.COMMIT_ALL,this.commitAll.bind(this)),(0,d.Z)(o,ht.COMMIT_MANY,this.commitMany.bind(this)),(0,d.Z)(o,ht.COMMIT_ONE,this.commitOne.bind(this)),(0,d.Z)(o,ht.UNDO_ALL,this.undoAll.bind(this)),(0,d.Z)(o,ht.UNDO_MANY,this.undoMany.bind(this)),(0,d.Z)(o,ht.UNDO_ONE,this.undoOne.bind(this)),(0,d.Z)(o,ht.SET_CHANGE_STATE,this.setChangeState.bind(this)),(0,d.Z)(o,ht.SET_COLLECTION,this.setCollection.bind(this)),(0,d.Z)(o,ht.SET_FILTER,this.setFilter.bind(this)),(0,d.Z)(o,ht.SET_LOADED,this.setLoaded.bind(this)),(0,d.Z)(o,ht.SET_LOADING,this.setLoading.bind(this)),o),this.adapter=t.entityAdapter,this.isChangeTracking=!0!==t.noChangeTracking,this.selectId=t.selectId,this.guard=new y0(n,this.selectId),this.toUpdate=wa(this.selectId),this.entityChangeTracker=e||new sc(this.adapter,this.selectId)}return(0,_.Z)(a,[{key:"cancelPersist",value:function(t){return this.setLoadingFalse(t)}},{key:"queryAll",value:function(t){return this.setLoadingTrue(t)}},{key:"queryAllError",value:function(t,e){return this.setLoadingFalse(t)}},{key:"queryAllSuccess",value:function(t,e){var o=this.extractData(e),s=this.extractMergeStrategy(e);return(0,b.Z)((0,b.Z)({},this.entityChangeTracker.mergeQueryResults(o,t,s)),{},{loaded:!0,loading:!1})}},{key:"queryByKey",value:function(t,e){return this.setLoadingTrue(t)}},{key:"queryByKeyError",value:function(t,e){return this.setLoadingFalse(t)}},{key:"queryByKeySuccess",value:function(t,e){var o=this.extractData(e),s=this.extractMergeStrategy(e);return t=null==o?t:this.entityChangeTracker.mergeQueryResults([o],t,s),this.setLoadingFalse(t)}},{key:"queryLoad",value:function(t){return this.setLoadingTrue(t)}},{key:"queryLoadError",value:function(t,e){return this.setLoadingFalse(t)}},{key:"queryLoadSuccess",value:function(t,e){var o=this.extractData(e);return(0,b.Z)((0,b.Z)({},this.adapter.setAll(o,t)),{},{loading:!1,loaded:!0,changeState:{}})}},{key:"queryMany",value:function(t,e){return this.setLoadingTrue(t)}},{key:"queryManyError",value:function(t,e){return this.setLoadingFalse(t)}},{key:"queryManySuccess",value:function(t,e){var o=this.extractData(e),s=this.extractMergeStrategy(e);return(0,b.Z)((0,b.Z)({},this.entityChangeTracker.mergeQueryResults(o,t,s)),{},{loaded:!0,loading:!1})}},{key:"saveAddMany",value:function(t,e){if(this.isOptimistic(e)){var o=this.guard.mustBeEntities(e),s=this.extractMergeStrategy(e);t=this.entityChangeTracker.trackAddMany(o,t,s),t=this.adapter.addMany(o,t)}return this.setLoadingTrue(t)}},{key:"saveAddManyError",value:function(t,e){return this.setLoadingFalse(t)}},{key:"saveAddManySuccess",value:function(t,e){var o=this.guard.mustBeEntities(e),s=this.extractMergeStrategy(e);return t=this.isOptimistic(e)?this.entityChangeTracker.mergeSaveUpserts(o,t,s):this.entityChangeTracker.mergeSaveAdds(o,t,s),this.setLoadingFalse(t)}},{key:"saveAddOne",value:function(t,e){if(this.isOptimistic(e)){var o=this.guard.mustBeEntity(e),s=this.extractMergeStrategy(e);t=this.entityChangeTracker.trackAddOne(o,t,s),t=this.adapter.addOne(o,t)}return this.setLoadingTrue(t)}},{key:"saveAddOneError",value:function(t,e){return this.setLoadingFalse(t)}},{key:"saveAddOneSuccess",value:function(t,e){var o=this.guard.mustBeEntity(e),s=this.extractMergeStrategy(e);if(this.isOptimistic(e)){var u=this.toUpdate(o);t=this.entityChangeTracker.mergeSaveUpdates([u],t,s,!1)}else t=this.entityChangeTracker.mergeSaveAdds([o],t,s);return this.setLoadingFalse(t)}},{key:"saveDeleteOne",value:function(t,e){var o=this.extractData(e),s="object"==typeof o?this.selectId(o):o,u=t.changeState[s];if(u&&(u.changeType===er.Added?(t=this.adapter.removeOne(s,t),t=this.entityChangeTracker.commitOne(s,t),e.payload.skip=!0):t=this.entityChangeTracker.trackDeleteOne(s,t)),this.isOptimistic(e)){var c=this.extractMergeStrategy(e);t=this.entityChangeTracker.trackDeleteOne(s,t,c),t=this.adapter.removeOne(s,t)}return this.setLoadingTrue(t)}},{key:"saveDeleteOneError",value:function(t,e){return this.setLoadingFalse(t)}},{key:"saveDeleteOneSuccess",value:function(t,e){var o=this.extractData(e);if(this.isOptimistic(e)){var s=this.extractMergeStrategy(e);t=this.entityChangeTracker.mergeSaveDeletes([o],t,s)}else t=this.adapter.removeOne(o,t),t=this.entityChangeTracker.commitOne(o,t);return this.setLoadingFalse(t)}},{key:"saveDeleteMany",value:function(t,e){var o=this,s=this.extractData(e).map(function(c){return"object"==typeof c?o.selectId(c):c});if(s.forEach(function(c){var l=t.changeState[c];l&&(l.changeType===er.Added?(t=o.adapter.removeOne(c,t),t=o.entityChangeTracker.commitOne(c,t),e.payload.skip=!0):t=o.entityChangeTracker.trackDeleteOne(c,t))}),this.isOptimistic(e)){var u=this.extractMergeStrategy(e);t=this.entityChangeTracker.trackDeleteMany(s,t,u),t=this.adapter.removeMany(s,t)}return this.setLoadingTrue(t)}},{key:"saveDeleteManyError",value:function(t,e){return this.setLoadingFalse(t)}},{key:"saveDeleteManySuccess",value:function(t,e){var o=this.extractData(e);if(this.isOptimistic(e)){var s=this.extractMergeStrategy(e);t=this.entityChangeTracker.mergeSaveDeletes(o,t,s)}else t=this.adapter.removeMany(o,t),t=this.entityChangeTracker.commitMany(o,t);return this.setLoadingFalse(t)}},{key:"saveUpdateOne",value:function(t,e){var o=this.guard.mustBeUpdate(e);if(this.isOptimistic(e)){var s=this.extractMergeStrategy(e);t=this.entityChangeTracker.trackUpdateOne(o,t,s),t=this.adapter.updateOne(o,t)}return this.setLoadingTrue(t)}},{key:"saveUpdateOneError",value:function(t,e){return this.setLoadingFalse(t)}},{key:"saveUpdateOneSuccess",value:function(t,e){var o=this.guard.mustBeUpdateResponse(e),s=this.isOptimistic(e),u=this.extractMergeStrategy(e);return t=this.entityChangeTracker.mergeSaveUpdates([o],t,u,s),this.setLoadingFalse(t)}},{key:"saveUpdateMany",value:function(t,e){var o=this.guard.mustBeUpdates(e);if(this.isOptimistic(e)){var s=this.extractMergeStrategy(e);t=this.entityChangeTracker.trackUpdateMany(o,t,s),t=this.adapter.updateMany(o,t)}return this.setLoadingTrue(t)}},{key:"saveUpdateManyError",value:function(t,e){return this.setLoadingFalse(t)}},{key:"saveUpdateManySuccess",value:function(t,e){var o=this.guard.mustBeUpdateResponses(e),u=(this.isOptimistic(e),this.extractMergeStrategy(e));return t=this.entityChangeTracker.mergeSaveUpdates(o,t,u,!1),this.setLoadingFalse(t)}},{key:"saveUpsertOne",value:function(t,e){if(this.isOptimistic(e)){var o=this.guard.mustBeEntity(e),s=this.extractMergeStrategy(e);t=this.entityChangeTracker.trackUpsertOne(o,t,s),t=this.adapter.upsertOne(o,t)}return this.setLoadingTrue(t)}},{key:"saveUpsertOneError",value:function(t,e){return this.setLoadingFalse(t)}},{key:"saveUpsertOneSuccess",value:function(t,e){var o=this.guard.mustBeEntity(e),s=this.extractMergeStrategy(e);return t=this.entityChangeTracker.mergeSaveUpserts([o],t,s),this.setLoadingFalse(t)}},{key:"saveUpsertMany",value:function(t,e){if(this.isOptimistic(e)){var o=this.guard.mustBeEntities(e),s=this.extractMergeStrategy(e);t=this.entityChangeTracker.trackUpsertMany(o,t,s),t=this.adapter.upsertMany(o,t)}return this.setLoadingTrue(t)}},{key:"saveUpsertManyError",value:function(t,e){return this.setLoadingFalse(t)}},{key:"saveUpsertManySuccess",value:function(t,e){var o=this.guard.mustBeEntities(e),s=this.extractMergeStrategy(e);return t=this.entityChangeTracker.mergeSaveUpserts(o,t,s),this.setLoadingFalse(t)}},{key:"addAll",value:function(t,e){var o=this.guard.mustBeEntities(e);return(0,b.Z)((0,b.Z)({},this.adapter.setAll(o,t)),{},{loading:!1,loaded:!0,changeState:{}})}},{key:"addMany",value:function(t,e){var o=this.guard.mustBeEntities(e),s=this.extractMergeStrategy(e);return t=this.entityChangeTracker.trackAddMany(o,t,s),this.adapter.addMany(o,t)}},{key:"addOne",value:function(t,e){var o=this.guard.mustBeEntity(e),s=this.extractMergeStrategy(e);return t=this.entityChangeTracker.trackAddOne(o,t,s),this.adapter.addOne(o,t)}},{key:"removeMany",value:function(t,e){var o=this.guard.mustBeKeys(e),s=this.extractMergeStrategy(e);return t=this.entityChangeTracker.trackDeleteMany(o,t,s),this.adapter.removeMany(o,t)}},{key:"removeOne",value:function(t,e){var o=this.guard.mustBeKey(e),s=this.extractMergeStrategy(e);return t=this.entityChangeTracker.trackDeleteOne(o,t,s),this.adapter.removeOne(o,t)}},{key:"removeAll",value:function(t,e){return(0,b.Z)((0,b.Z)({},this.adapter.removeAll(t)),{},{loaded:!1,loading:!1,changeState:{}})}},{key:"updateMany",value:function(t,e){var o=this.guard.mustBeUpdates(e),s=this.extractMergeStrategy(e);return t=this.entityChangeTracker.trackUpdateMany(o,t,s),this.adapter.updateMany(o,t)}},{key:"updateOne",value:function(t,e){var o=this.guard.mustBeUpdate(e),s=this.extractMergeStrategy(e);return t=this.entityChangeTracker.trackUpdateOne(o,t,s),this.adapter.updateOne(o,t)}},{key:"upsertMany",value:function(t,e){var o=this.guard.mustBeEntities(e),s=this.extractMergeStrategy(e);return t=this.entityChangeTracker.trackUpsertMany(o,t,s),this.adapter.upsertMany(o,t)}},{key:"upsertOne",value:function(t,e){var o=this.guard.mustBeEntity(e),s=this.extractMergeStrategy(e);return t=this.entityChangeTracker.trackUpsertOne(o,t,s),this.adapter.upsertOne(o,t)}},{key:"commitAll",value:function(t){return this.entityChangeTracker.commitAll(t)}},{key:"commitMany",value:function(t,e){return this.entityChangeTracker.commitMany(this.extractData(e),t)}},{key:"commitOne",value:function(t,e){return this.entityChangeTracker.commitOne(this.extractData(e),t)}},{key:"undoAll",value:function(t){return this.entityChangeTracker.undoAll(t)}},{key:"undoMany",value:function(t,e){return this.entityChangeTracker.undoMany(this.extractData(e),t)}},{key:"undoOne",value:function(t,e){return this.entityChangeTracker.undoOne(this.extractData(e),t)}},{key:"setChangeState",value:function(t,e){var o=this.extractData(e);return t.changeState===o?t:(0,b.Z)((0,b.Z)({},t),{},{changeState:o})}},{key:"setCollection",value:function(t,e){var o=this.extractData(e);return t===o?t:o}},{key:"setFilter",value:function(t,e){var o=this.extractData(e);return t.filter===o?t:(0,b.Z)((0,b.Z)({},t),{},{filter:o})}},{key:"setLoaded",value:function(t,e){var o=!0===this.extractData(e)||!1;return t.loaded===o?t:(0,b.Z)((0,b.Z)({},t),{},{loaded:o})}},{key:"setLoading",value:function(t,e){return this.setLoadingFlag(t,this.extractData(e))}},{key:"setLoadingFalse",value:function(t){return this.setLoadingFlag(t,!1)}},{key:"setLoadingTrue",value:function(t){return this.setLoadingFlag(t,!0)}},{key:"setLoadingFlag",value:function(t,e){return t.loading===(e=!0===e)?t:(0,b.Z)((0,b.Z)({},t),{},{loading:e})}},{key:"extractData",value:function(t){return t.payload&&t.payload.data}},{key:"extractMergeStrategy",value:function(t){return this.isChangeTracking?t.payload&&t.payload.mergeStrategy:_r.IgnoreChanges}},{key:"isOptimistic",value:function(t){return t.payload&&!0===t.payload.isOptimistic}}]),a}(),lu=function(){var a=function(){function n(t){(0,p.Z)(this,n),this.entityDefinitionService=t}return(0,_.Z)(n,[{key:"create",value:function(e){var o=this.entityDefinitionService.getDefinition(e);return new hl(e,o).methods}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Qi))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),uc=function(){var a=function(){function n(t){(0,p.Z)(this,n),this.methodsFactory=t}return(0,_.Z)(n,[{key:"create",value:function(e){var o=this.methodsFactory.create(e);return function(u,c){var l=o[c.payload.entityOp];return l?l(u,c):u}}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(lu))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),ml=function(){var a=function(){function n(t,e){(0,p.Z)(this,n),this.entityCollectionReducerFactory=t,this.entityCollectionReducers={},this.entityCollectionMetaReducer=Zt.qC.apply(null,e||[])}return(0,_.Z)(n,[{key:"getOrCreateReducer",value:function(e){var o=this.entityCollectionReducers[e];return o||(o=this.entityCollectionReducerFactory.create(e),o=this.registerReducer(e,o),this.entityCollectionReducers[e]=o),o}},{key:"registerReducer",value:function(e,o){return o=this.entityCollectionMetaReducer(o),this.entityCollectionReducers[e.trim()]=o}},{key:"registerReducers",value:function(e){var o=this;(e?Object.keys(e):[]).forEach(function(u){return o.registerReducer(u,e[u])})}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(uc),r.\u0275\u0275inject(Wf,8))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),Jf=function(){var a=function(){function n(t,e,o){(0,p.Z)(this,n),this.entityCollectionCreator=t,this.entityCollectionReducerRegistry=e,this.logger=o}return(0,_.Z)(n,[{key:"create",value:function(){return function e(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;switch(s.type){case Yn.CLEAR_COLLECTIONS:return this.clearCollectionsReducer(o,s);case Yn.LOAD_COLLECTIONS:return this.loadCollectionsReducer(o,s);case Yn.MERGE_QUERY_SET:return this.mergeQuerySetReducer(o,s);case Yn.SAVE_ENTITIES:return this.saveEntitiesReducer(o,s);case Yn.SAVE_ENTITIES_CANCEL:return this.saveEntitiesCancelReducer(o,s);case Yn.SAVE_ENTITIES_ERROR:return this.saveEntitiesErrorReducer(o,s);case Yn.SAVE_ENTITIES_SUCCESS:return this.saveEntitiesSuccessReducer(o,s);case Yn.SET_ENTITY_CACHE:return s.payload.cache}var u=s.payload;return u&&u.entityName&&u.entityOp&&!u.error?this.applyCollectionReducer(o,s):o}.bind(this)}},{key:"clearCollectionsReducer",value:function(e,o){var s=this,c=o.payload.collections,m=ht.REMOVE_ALL;return c||(c=Object.keys(e)),c.reduce(function(C,T){var B={entityName:T,entityOp:m},F={type:"[".concat(T,"] ").concat(o.type),payload:B};return s.applyCollectionReducer(C,F)},e)}},{key:"loadCollectionsReducer",value:function(e,o){var s=this,c=o.payload.collections,m=ht.ADD_ALL;return Object.keys(c).reduce(function(T,B){var F={entityName:B,entityOp:m,data:c[B]},U={type:"[".concat(B,"] ").concat(o.type),payload:F};return s.applyCollectionReducer(T,U)},e)}},{key:"mergeQuerySetReducer",value:function(e,o){var s=this,u=o.payload,c=u.mergeStrategy,l=u.querySet;c=null===c?_r.PreserveChanges:c;var C=ht.QUERY_MANY_SUCCESS;return Object.keys(l).reduce(function(B,F){var U={entityName:F,entityOp:C,data:l[F],mergeStrategy:c},ae={type:"[".concat(F,"] ").concat(o.type),payload:U};return s.applyCollectionReducer(B,ae)},e)}},{key:"saveEntitiesReducer",value:function(e,o){var s=this,u=o.payload,c=u.changeSet,l=u.correlationId,m=u.isOptimistic,C=u.mergeStrategy,T=u.tag;try{c.changes.forEach(function(F){var U=F.entityName,ae={entityName:U,entityOp:B(F),data:F.entities,correlationId:l,isOptimistic:m,mergeStrategy:C,tag:T},ue={type:"[".concat(U,"] ").concat(o.type),payload:ae};if(e=s.applyCollectionReducer(e,ue),ue.payload.error)throw ue.payload.error})}catch(F){o.payload.error=F}return e;function B(F){switch(F.op){case ni.Add:return ht.SAVE_ADD_MANY;case ni.Delete:return ht.SAVE_DELETE_MANY;case ni.Update:return ht.SAVE_UPDATE_MANY;case ni.Upsert:return ht.SAVE_UPSERT_MANY}}}},{key:"saveEntitiesCancelReducer",value:function(e,o){return this.clearLoadingFlags(e,o.payload.entityNames||[])}},{key:"saveEntitiesErrorReducer",value:function(e,o){var c=o.payload.originalAction.payload.changeSet.changes.map(function(l){return l.entityName});return this.clearLoadingFlags(e,c)}},{key:"saveEntitiesSuccessReducer",value:function(e,o){var s=this,u=o.payload,l=u.correlationId,m=u.isOptimistic,C=u.mergeStrategy,T=u.tag;return u.changeSet.changes.forEach(function(F){var U=F.entityName,ae={entityName:U,entityOp:B(F),data:F.entities,correlationId:l,isOptimistic:m,mergeStrategy:C,tag:T},ue={type:"[".concat(U,"] ").concat(o.type),payload:ae};e=s.applyCollectionReducer(e,ue)}),e;function B(F){switch(F.op){case ni.Add:return ht.SAVE_ADD_MANY_SUCCESS;case ni.Delete:return ht.SAVE_DELETE_MANY_SUCCESS;case ni.Update:return ht.SAVE_UPDATE_MANY_SUCCESS;case ni.Upsert:return ht.SAVE_UPSERT_MANY_SUCCESS}}}},{key:"applyCollectionReducer",value:function(){var l,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0,s=o.payload.entityName,u=e[s],c=this.entityCollectionReducerRegistry.getOrCreateReducer(s);try{l=c(u||this.entityCollectionCreator.create(s),o)}catch(m){this.logger.error(m),o.payload.error=m}return o.payload.error||u===l?e:(0,b.Z)((0,b.Z)({},e),{},(0,d.Z)({},s,l))}},{key:"clearLoadingFlags",value:function(e,o){var s=!1;return o.forEach(function(u){var c=e[u];c.loading&&(s||(e=(0,b.Z)({},e),s=!0),e[u]=(0,b.Z)((0,b.Z)({},c),{},{loading:!1}))}),e}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(bs),r.\u0275\u0275inject(ml),r.\u0275\u0275inject(su))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),xn=function(){var a=function(){function n(){(0,p.Z)(this,n)}return(0,_.Z)(n,[{key:"error",value:function(e,o){e&&(o?console.error(e,o):console.error(e))}},{key:"log",value:function(e,o){e&&(o?console.log(e,o):console.log(e))}},{key:"warn",value:function(e,o){e&&(o?console.warn(e,o):console.warn(e))}}]),n}();return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),gl=["equipment","information","money","series"],vl=function(){var a=function(){function n(t){var e=this;(0,p.Z)(this,n),this.pluralNames={},t&&t.forEach(function(o){return e.registerPluralNames(o)})}return(0,_.Z)(n,[{key:"pluralize",value:function(e){return this.pluralNames[e]||(gl.indexOf(e.toLowerCase())>=0?e:/[aeiou]y$/.test(e)?e+"s":e.endsWith("y")?e.substring(0,e.length-1)+"ies":/[s|ss|sh|ch|x|z]$/.test(e)?e+"es":e+"s")}},{key:"registerPluralNames",value:function(e){this.pluralNames=(0,b.Z)((0,b.Z)({},this.pluralNames),e||{})}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject($f,8))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),Ga=[sl,ac,ys,Kf,Jf,ll,bs,uc,lu,ml,Ji,Vn,Qi,ci,pl,On,Ui,{provide:ul,useValue:cu},{provide:Dr,useClass:yi},{provide:su,useClass:xn},{provide:r.ENVIRONMENT_INITIALIZER,multi:!0,useValue:function(){return function cc(){var a=(0,r.inject)(Zt.PB),n=(0,r.inject)(Jf),t=(0,r.inject)(ul,{optional:!0}),e=(0,r.inject)(T0,{optional:!0}),o=(0,r.inject)(D0,{optional:!0}),s=t||cu,u=(o||[]).map(function(m){return m instanceof r.InjectionToken?(0,r.inject)(m):m}),c="function"==typeof e?e():e,l={key:s,reducers:n.create(),reducerFactory:Zt.UY,initialState:c||{},metaReducers:u};a.addFeature(l)}()}}],xl=[al,Vf,oc,Ro,Ua,{provide:P0,useClass:k0},{provide:Hf,useClass:A0},{provide:uu,useClass:vl},{provide:r.ENVIRONMENT_INITIALIZER,multi:!0,useValue:function(){return function bl(){var a=(0,r.inject)(Ju),n=(0,r.inject)(Ro),t=(0,r.inject)(Ua);a.addEffects(n),a.addEffects(t)}()}}];function Do(a){return[{provide:D0,useValue:a.entityCacheMetaReducers?a.entityCacheMetaReducers:[]},{provide:Wf,useValue:a.entityCollectionMetaReducers?a.entityCollectionMetaReducers:[]},{provide:$f,multi:!0,useValue:a.pluralNames?a.pluralNames:{}},{provide:zf,multi:!0,useValue:a.entityMetadata?a.entityMetadata:[]}]}var Cl=function(){var a=function(){function n(){(0,p.Z)(this,n)}return(0,_.Z)(n,null,[{key:"forRoot",value:function(e){return{ngModule:n,providers:[Do(e)]}}}]),n}();return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({providers:[Ga]}),a}(),vo=function(){var a=function(){function n(){(0,p.Z)(this,n)}return(0,_.Z)(n,null,[{key:"forRoot",value:function(e){return{ngModule:n,providers:[Do(e)]}}}]),n}();return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({providers:[xl],imports:[Cl]}),a}(),zi=function(){return(zi=zi||{}).Login="[Auth] Login",zi.Logout="[Auth] Logout",zi.CompleteAuthentication="[Auth] CompleteAuthentication",zi.SetUser="[Auth] SetUser",zi}(),lc=(0,_.Z)(function a(){(0,p.Z)(this,a),this.type=zi.Login}),tp=(0,_.Z)(function a(){(0,p.Z)(this,a),this.type=zi.Logout}),wl=(0,_.Z)(function a(){(0,p.Z)(this,a),this.type=zi.CompleteAuthentication}),Sl=(0,_.Z)(function a(n){(0,p.Z)(this,a),this.payload=n,this.type=zi.SetUser}),fu=Object.freeze({__proto__:null,get AuthActionTypes(){return zi},CompleteAuthentication:wl,Login:lc,Logout:tp,SetUser:Sl,fromAuthActions:{Login:lc,Logout:tp,CompleteAuthentication:wl,SetUser:Sl}}),np={user:void 0,cookies:new Map};function dc(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:np,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case zi.SetUser:a=(0,b.Z)((0,b.Z)({},a),{},{user:n.payload});break;case zi.Logout:a=(0,b.Z)((0,b.Z)({},a),{},{user:void 0})}return a}var k2=(0,Zt.ZF)("auth"),O0=(0,Zt.P1)(k2,function(a){return a.user}),fc={getUser:O0},li=function(){var a=function(){function n(t){(0,p.Z)(this,n),this.store=t,this.getUser$=this.store.pipe((0,Zt.Ys)(fc.getUser)),this.token$=this.store.pipe((0,Zt.Ys)(fc.getUser),(0,Ce.U)(function(e){return e?"".concat(e.token_type," ").concat(e.access_token):void 0})),this.idToken$=this.store.pipe((0,Zt.Ys)(fc.getUser),(0,Ce.U)(function(e){return e?"".concat(e.token_type," ").concat(e.id_token):void 0}))}return(0,_.Z)(n,[{key:"login",value:function(){this.store.dispatch(new lc)}},{key:"logout",value:function(){this.store.dispatch(new tp)}},{key:"setUser",value:function(e){this.store.dispatch(new Sl(e))}},{key:"completeAuthentication",value:function(){this.store.dispatch(new wl)}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Zt.yh))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),A2={PublicUserProfile:{entityName:"PublicUserProfile"}},R2=function(){var a=function(){function n(t,e,o,s){(0,p.Z)(this,n),this.authFacade=t,this.router=e,this.route=o,this.platformId=s}return(0,_.Z)(n,[{key:"ngOnInit",value:(t=Lt((0,He.Z)().mark(function o(){return(0,He.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:this.authFacade.completeAuthentication(),this.router.navigate(["/pages/create-panel-page"],{queryParams:{cacheBuster:fr()}});case 2:case"end":return u.stop()}},o,this)})),function e(){return t.apply(this,arguments)})}]),n;var t}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(li),r.\u0275\u0275directiveInject(nr.Router),r.\u0275\u0275directiveInject(nr.ActivatedRoute),r.\u0275\u0275directiveInject(r.PLATFORM_ID))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-auth-callback"]],decls:2,vars:0,template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"p"),r.\u0275\u0275text(1,"auth-callback works!"),r.\u0275\u0275elementEnd())}}),a}(),ua=function(){var a=function(){function n(t){(0,p.Z)(this,n),t.registerMetadataMap(A2)}return(0,_.Z)(n,null,[{key:"forRoot",value:function(){return{ngModule:n,providers:[li]}}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Qi))},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({imports:[E.CommonModule,Zt.Aw.forFeature("auth",dc)]}),a}(),D2=function(){var a=function(){function n(t,e){(0,p.Z)(this,n),this.authFacade=t,this.router=e}return(0,_.Z)(n,[{key:"intercept",value:function(e,o){return o.handle(e).pipe((0,ee.b)({error:function(u){}}))}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(li),r.\u0275\u0275inject(nr.Router))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),Pl=S(7478),M0=S(80464),Ha=S(72578),rp=new r.InjectionToken("REQUEST"),st=(new r.InjectionToken("RESPONSE"),S(32673)),To=(0,_.Z)(function a(n){(0,p.Z)(this,a),n&&(this.authority=n.authority,this.client_id=n.client_id,this.redirect_uri=n.redirect_uri,this.silent_redirect_uri=n.silent_redirect_uri,this.response_type=n.response_type,this.scope=n.scope,this.filterProtocolClaims=n.filterProtocolClaims,this.loadUserInfo=n.loadUserInfo,this.automaticSilentRenew=n.automaticSilentRenew,this.metadata=(0,b.Z)({},n.metadata),this.userStore=n.userStore?n.userStore:void 0,this.stateStore=n.userStore?n.stateStore:void 0)}),pc=(0,Z.makeStateKey)("auth"),ip=function(){var a=function(){function n(t,e,o){(0,p.Z)(this,n),this.clientSettings=t,this.platformId=e,this.transferState=o,this.data={},this.isBrowser=(0,E.isPlatformBrowser)(this.platformId),this.cookieMap={oa:"access_token",oi:"id_token",or:"refresh_token",os:"scope",oe:"expires_at",op:"profile"},this.tokenKey="oidc.user:".concat(this.clientSettings.authority,":").concat(this.clientSettings.client_id)}return(0,_.Z)(n,[{key:"request",set:function(e){this.req=e}},{key:"init",value:function(){var e=this;if(this.isBrowser)if(sessionStorage.getItem(this.tokenKey))this.setItem(this.tokenKey,sessionStorage.getItem(this.tokenKey));else if(this.transferState.hasKey(pc)){var o=this.transferState.get(pc,void 0);o&&this.setItem(this.tokenKey,o)}else for(var s=0;s<sessionStorage.length;s++){var u=sessionStorage.key(s);this.setItem(u,sessionStorage.getItem(u))}else{var l,c={token_type:"Bearer"};Object.getOwnPropertyNames(this.cookieMap).forEach(function(m){var C=e.getCookie(m);C&&""!==C&&(C=e.translateFromCookieValue(m,C),"oe"===m?l=C:c[e.cookieMap[m]]=C)}),c.access_token&&(this.data[this.tokenKey]=JSON.stringify(c),this.transferState.set(pc,JSON.stringify((0,b.Z)((0,b.Z)({},c),{},{expires_at:l}))))}}},{key:"getItem",value:function(e){return this.data[e]}},{key:"setItem",value:function(e,o){var s=this;if(e===this.tokenKey){var u=JSON.parse(o);Object.getOwnPropertyNames(this.cookieMap).forEach(function(c){s.setCookie(c,s.translateCookieValue(c,u[s.cookieMap[c]]))})}this.isBrowser&&sessionStorage.setItem(e,o),this.data[e]=o}},{key:"removeItem",value:function(e){this.removeCookie(e),this.isBrowser&&sessionStorage.removeItem(e),delete this.data[e]}},{key:"length",get:function(){return Object.getOwnPropertyNames(this.data).length}},{key:"key",value:function(e){return console.log("index()"),Object.getOwnPropertyNames(this.data)[e]}},{key:"getCookie",value:function(e){return this.isBrowser?Pl.get(e):this.req?null!==(o=this.req.cookies[e])&&void 0!==o?o:"":void 0;var o}},{key:"setCookie",value:function(e,o){this.isBrowser&&Pl.set(e,o)}},{key:"removeCookie",value:function(e){this.isBrowser&&Pl.remove(e)}},{key:"translateCookieValue",value:function(e,o){switch(e){case"os":return o.split(" ").join("|");case"oe":return"".concat(o);case"op":return JSON.stringify(o);default:return o}}},{key:"translateFromCookieValue",value:function(e,o){switch(e){case"os":return o.split("|").join(" ");case"oe":return(0,M0.He)(o);case"op":return JSON.parse(o);default:return o}}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(To),r.\u0275\u0275inject(Object),r.\u0275\u0275inject(Z.TransferState))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),ws=function(n,t){return new Ha.UserManager(new To((0,b.Z)((0,b.Z)({},n),{},{stateStore:new Ha.WebStorageStateStore({store:t}),userStore:new Ha.WebStorageStateStore({store:t})})))},kl=function(n,t,e){return function(){return new Promise(function(o){n.getUser().then(function(s){s?(t.setUser(s),setTimeout(function(){return o()})):o()})})}},qa=function(n,t,e,o){var s=new ip(n,t,o);if((0,E.isPlatformServer)(t))try{s.request=e.get(rp)}catch{}return s.init(),s},op=function(){var a=(0,_.Z)(function n(t,e,o){var s=this;(0,p.Z)(this,n),this.actions$=t,this.userManager=e,this.entityActionFactory=o,this.login$=_i(function(){return s.actions$.pipe(Ho(fu.AuthActionTypes.Login),(0,ee.b)(function(){s.userManager.signinRedirect()}))},{dispatch:!1}),this.logout$=_i(function(){return s.actions$.pipe(Ho(fu.AuthActionTypes.Logout),(0,ee.b)(function(){s.userManager.signoutRedirect()}))},{dispatch:!1}),this.completeAuthentication$=_i(function(){return s.actions$.pipe(Ho(fu.AuthActionTypes.CompleteAuthentication),(0,st.w)(function(){return new W.y(function(u){s.userManager.signinRedirectCallback().then(function(c){u.next(new fu.SetUser(c)),u.complete()})})}))}),this.loadCookies$=_i(function(){return s.actions$.pipe(tc("Cookie"),oa([ht.QUERY_ALL_SUCCESS]),(0,ee.b)(function(u){return console.log(u.payload.data)}),(0,ee.b)(function(u){}))},{dispatch:!1})});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(na),r.\u0275\u0275inject(Ha.UserManager),r.\u0275\u0275inject(ys))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),ap={Cookie:{entityName:"Cookie"}},sp=new r.InjectionToken("ClientSettings"),B0=function(){var a=function(){function n(t){(0,p.Z)(this,n),t.registerMetadataMap(ap)}return(0,_.Z)(n,null,[{key:"forRoot",value:function(){return{ngModule:n,providers:[{provide:ip,useFactory:qa,deps:[sp,r.PLATFORM_ID,r.Injector,Z.TransferState]},{provide:Ha.UserManager,useFactory:ws,deps:[sp,ip]},{provide:r.APP_INITIALIZER,useFactory:kl,multi:!0,deps:[Ha.UserManager,li,r.PLATFORM_ID]}]}}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Qi))},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({imports:[ua,au.forFeature([op])]}),a}(),Ss=function(){var a=function(){function n(t){(0,p.Z)(this,n),this.authFacade=t}return(0,_.Z)(n,[{key:"intercept",value:function(e,o){return this.authFacade.idToken$.pipe((0,kn.q)(1),(0,Li.b)(function(s){var u=e.headers;if(e.url.indexOf("/awproxy"),s&&-1===e.url.indexOf("github")&&-1===e.url.indexOf("cloudfront")&&-1===e.url.indexOf("cloudinary")&&-1===e.url.indexOf("carquery")&&-1===e.url.indexOf("gateway.marvel.com")&&-1===e.url.indexOf("hereapi.com")&&-1===e.url.indexOf(".es.")&&-1===e.url.indexOf(".s3.")&&-1===e.url.indexOf("/awproxy")){u=u.set("Authorization",s);var c=e.clone({headers:u});return o.handle(c)}var l=e.clone({headers:u});return o.handle(l)}))}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(li))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),fn=S(31348),Un=S(91640),Al=S(14423),up=S(5463);function Rl(a,n){var t="object"==typeof n;return new Promise(function(e,o){var s=new up.Hp({next:function(c){e(c),s.unsubscribe()},error:o,complete:function(){t?e(n.defaultValue):o(new Al.K)}});a.subscribe(s)})}var cp=function(){var a=(0,_.Z)(function n(t,e){var o=this;(0,p.Z)(this,n),this.actions$=t,this.entityActionFactory=e,this.setUser=_i(function(){return o.actions$.pipe(Ho(fu.AuthActionTypes.SetUser),(0,Ce.U)(function(){return o.entityActionFactory.create("Cookie",ht.QUERY_ALL)}))}),this.loadCookies$=_i(function(){return o.actions$.pipe(tc("Cookie"),oa([ht.QUERY_ALL_SUCCESS]),(0,ee.b)(function(s){return console.log(s.payload.data)}),(0,ee.b)(function(s){s.payload.data.forEach(function(u){return Pl.set(u.name,u.value,{expires:new Date((new Date).getTime()+36e5)})})}))},{dispatch:!1})});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(na),r.\u0275\u0275inject(ys))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),lp=function(){var a=(0,_.Z)(function n(){(0,p.Z)(this,n)});return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({imports:[au.forFeature([cp])]}),a}(),hc=(0,_.Z)(function a(n){(0,p.Z)(this,a),n&&(this.identityPoolId=n.identityPoolId,this.region=n.region,this.userPoolId=n.userPoolId)}),Dl=new r.InjectionToken("CognitoSettings");function ca(a){var n,t,e,o=2;for(typeof Symbol<"u"&&(t=Symbol.asyncIterator,e=Symbol.iterator);o--;){if(t&&null!=(n=a[t]))return n.call(a);if(e&&null!=(n=a[e]))return new Tl(n.call(a));t="@@asyncIterator",e="@@iterator"}throw new TypeError("Object is not async iterable")}function Tl(a){function n(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var e=t.done;return Promise.resolve(t.value).then(function(o){return{value:o,done:e}})}return(Tl=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return n(this.n.apply(this.s,arguments))},return:function(e){var o=this.s.return;return void 0===o?Promise.resolve({value:e,done:!0}):n(o.apply(this.s,arguments))},throw:function(e){var o=this.s.return;return void 0===o?Promise.reject(e):n(o.apply(this.s,arguments))}},new Tl(a)}var N0=function(){function a(){(0,p.Z)(this,a),this.onabort=null,this._aborted=!1,Object.defineProperty(this,"_aborted",{value:!1,writable:!0})}return(0,_.Z)(a,[{key:"aborted",get:function(){return this._aborted}},{key:"abort",value:function(){this._aborted=!0,this.onabort&&(this.onabort(this),this.onabort=null)}}]),a}(),I2=function(){function a(){(0,p.Z)(this,a),this.signal=new N0}return(0,_.Z)(a,[{key:"abort",value:function(){this.signal.abort()}}]),a}(),f=function(){var a=Lt((0,He.Z)().mark(function n(t){var e;return(0,He.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(e=t?.Bucket||"","string"==typeof t.Bucket&&(t.Bucket=e.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),!ze(e)){s.next=7;break}if(!0!==t.ForcePathStyle){s.next=5;break}throw new Error("Path-style addressing cannot be used with ARN buckets");case 5:s.next=8;break;case 7:(!Ae(e)||-1!==e.indexOf(".")&&!String(t.Endpoint).startsWith("http:")||e.toLowerCase()!==e||e.length<3)&&(t.ForcePathStyle=!0);case 8:return t.DisableMultiRegionAccessPoints&&(t.disableMultiRegionAccessPoints=!0,t.DisableMRAP=!0),s.abrupt("return",t);case 10:case"end":return s.stop()}},n)}));return function(t){return a.apply(this,arguments)}}(),h=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,w=/(\d+\.){3}\d+/,K=/\.\./,Ae=function(n){return h.test(n)&&!w.test(n)&&!K.test(n)},ze=function(n){var t=n.split(":"),e=(0,g.Z)(t,6),o=e[0],s=e[1],u=e[2],l=e[4],m=e[5],C="arn"===o&&n.split(":").length>=6,T=5===[o,s,u,l,m].filter(Boolean).length;if(C&&!T)throw new Error("Invalid ARN: ".concat(n," was an invalid ARN."));return!!("arn"===o&&s&&u&&l&&m)},xt=function(n,t,e){var o=function(){var s=Lt((0,He.Z)().mark(function u(){var c,l;return(0,He.Z)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if("function"!=typeof(l=null!==(c=e[n])&&void 0!==c?c:e[t])){C.next=3;break}return C.abrupt("return",l());case 3:return C.abrupt("return",l);case 4:case"end":return C.stop()}},u)}));return function(){return s.apply(this,arguments)}}();return"endpoint"===n||"endpoint"===t?Lt((0,He.Z)().mark(function s(){var u,l,m,C;return(0,He.Z)().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,o();case 2:if(!(u=B.sent)||"object"!=typeof u){B.next=9;break}if(!("url"in u)){B.next=6;break}return B.abrupt("return",u.url.href);case 6:if(!("hostname"in u)){B.next=9;break}return l=u.hostname,m=u.port,C=u.path,B.abrupt("return","".concat(u.protocol,"//").concat(l).concat(m?":"+m:"").concat(C));case 9:return B.abrupt("return",u);case 10:case"end":return B.stop()}},s)})):o},Mt=function(){var a=Lt((0,He.Z)().mark(function n(t,e,o,s){var u,c;return(0,He.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,Ht(t,e,o);case 2:if(u=m.sent,"function"==typeof o.endpointProvider){m.next=5;break}throw new Error("config.endpointProvider is not set.");case 5:return c=o.endpointProvider(u,s),m.abrupt("return",c);case 7:case"end":return m.stop()}},n)}));return function(t,e,o,s){return a.apply(this,arguments)}}(),Ht=function(){var a=Lt((0,He.Z)().mark(function n(t,e,o){var s,u,c,l,m,C,T,B;return(0,He.Z)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:u={},c=(null==e||null===(s=e.getEndpointParameterInstructions)||void 0===s?void 0:s.call(e))||{},l=0,m=Object.entries(c);case 3:if(!(l<m.length)){U.next=20;break}C=(0,g.Z)(m[l],2),T=C[0],U.t0=(B=C[1]).type,U.next="staticContextParams"===U.t0?8:"contextParams"===U.t0?10:"clientContextParams"===U.t0||"builtInParams"===U.t0?12:16;break;case 8:return u[T]=B.value,U.abrupt("break",17);case 10:return u[T]=t[B.name],U.abrupt("break",17);case 12:return U.next=14,xt(B.name,T,o)();case 14:return u[T]=U.sent,U.abrupt("break",17);case 16:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(B));case 17:l++,U.next=3;break;case 20:if(0===Object.keys(c).length&&Object.assign(u,o),"s3"!==String(o.serviceId).toLowerCase()){U.next=24;break}return U.next=24,f(u);case 24:return U.abrupt("return",u);case 25:case"end":return U.stop()}},n)}));return function(t,e,o){return a.apply(this,arguments)}}(),bn=function a(n){if("string"==typeof n)return a(new URL(n));var c,t=n.hostname,e=n.pathname,o=n.port,s=n.protocol,u=n.search;return u&&(c=function _n(a){var n={};if(a=a.replace(/^\?/,"")){var e,t=(0,te.Z)(a.split("&"));try{for(t.s();!(e=t.n()).done;){var s=e.value.split("="),u=(0,g.Z)(s,2),c=u[0],l=u[1],m=void 0===l?null:l;c=decodeURIComponent(c),m&&(m=decodeURIComponent(m)),c in n?Array.isArray(n[c])?n[c].push(m):n[c]=[n[c],m]:n[c]=m}}catch(C){t.e(C)}finally{t.f()}}return n}(u)),{hostname:t,port:o?parseInt(o):void 0,protocol:s,path:e,query:c}},ur=function(n){return"object"==typeof n?"url"in n?bn(n.url):n:bn(n)},St={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},mt={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function It(a,n,t){return{applyToStack:function(o){o.add(function(n,t){return function(e,o){return function(){var s=Lt((0,He.Z)().mark(function u(c){var m;return(0,He.Z)().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,e(c);case 2:return m=F.sent.response,F.prev=4,F.next=7,t(m,n);case 7:return F.abrupt("return",{response:m,output:F.sent});case 11:throw F.prev=11,F.t0=F.catch(4),Object.defineProperty(F.t0,"$response",{value:m}),"$metadata"in F.t0||(F.t0.message+="\n  Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object."),F.t0;case 16:case"end":return F.stop()}},u,null,[[4,11]])}));return function(u){return s.apply(this,arguments)}}()}}(a,t),St),o.add(function(n,t){return function(e,o){return function(){var s=Lt((0,He.Z)().mark(function u(c){var l,m,C;return(0,He.Z)().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(m=null!==(l=o.endpointV2)&&void 0!==l&&l.url&&n.urlParser?Lt((0,He.Z)().mark(function F(){return(0,He.Z)().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return ae.abrupt("return",n.urlParser(o.endpointV2.url));case 1:case"end":return ae.stop()}},F)})):n.endpoint){B.next=3;break}throw new Error("No valid endpoint provider available.");case 3:return B.next=5,t(c.input,(0,b.Z)((0,b.Z)({},n),{},{endpoint:m}));case 5:return C=B.sent,B.abrupt("return",e((0,b.Z)((0,b.Z)({},c),{},{request:C})));case 7:case"end":return B.stop()}},u)}));return function(u){return s.apply(this,arguments)}}()}}(a,n),mt)}}}var rn={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:mt.name},dn=function(n,t){return{applyToStack:function(o){o.addRelativeTo(function(n){var t=n.config,e=n.instructions;return function(o,s){return function(){var u=Lt((0,He.Z)().mark(function c(l){var m,C,T,B;return(0,He.Z)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,Mt(l.input,{getEndpointParameterInstructions:function(){return e}},(0,b.Z)({},t),s);case 2:return s.endpointV2=T=U.sent,s.authSchemes=null===(m=T.properties)||void 0===m?void 0:m.authSchemes,(B=null===(C=s.authSchemes)||void 0===C?void 0:C[0])&&(s.signing_region=B.signingRegion,s.signing_service=B.signingName),U.abrupt("return",o((0,b.Z)({},l)));case 8:case"end":return U.stop()}},c)}));return function(c){return u.apply(this,arguments)}}()}}({config:n,instructions:t}),rn)}}},yn=function(n){if("function"==typeof n)return n;var t=Promise.resolve(n);return function(){return t}},rr=function(n){var t,e,o,s=null===(t=n.tls)||void 0===t||t,u=n.endpoint,c=null!=u?Lt((0,He.Z)().mark(function m(){return(0,He.Z)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.t0=ur,T.next=3,yn(u)();case 3:return T.t1=T.sent,T.abrupt("return",(0,T.t0)(T.t1));case 5:case"end":return T.stop()}},m)})):void 0,l=!!u;return(0,b.Z)((0,b.Z)({},n),{},{endpoint:c,tls:s,isCustomEndpoint:l,useDualstackEndpoint:yn(null!==(e=n.useDualstackEndpoint)&&void 0!==e&&e),useFipsEndpoint:yn(null!==(o=n.useFipsEndpoint)&&void 0!==o&&o)})},ir=function(){function a(n){(0,p.Z)(this,a),this.method=n.method||"GET",this.hostname=n.hostname||"localhost",this.port=n.port,this.query=n.query||{},this.headers=n.headers||{},this.body=n.body,this.protocol=n.protocol?":"!==n.protocol.slice(-1)?"".concat(n.protocol,":"):n.protocol:"https:",this.path=n.path?"/"!==n.path.charAt(0)?"/".concat(n.path):n.path:"/",this.username=n.username,this.password=n.password,this.fragment=n.fragment}return(0,_.Z)(a,[{key:"clone",value:function(){var t=new a((0,b.Z)((0,b.Z)({},this),{},{headers:(0,b.Z)({},this.headers)}));return t.query&&(t.query=function Wn(a){return Object.keys(a).reduce(function(n,t){var e=a[t];return(0,b.Z)((0,b.Z)({},n),{},(0,d.Z)({},t,Array.isArray(e)?(0,y.Z)(e):e))},{})}(t.query)),t}}],[{key:"isInstance",value:function(t){return!!t&&("method"in t&&"protocol"in t&&"hostname"in t&&"path"in t&&"object"==typeof t.query&&"object"==typeof t.headers)}}]),a}(),yr=function(){return(yr=yr||{}).MD5="MD5",yr.CRC32="CRC32",yr.CRC32C="CRC32C",yr.SHA1="SHA1",yr.SHA256="SHA256",yr}(),O2=[yr.CRC32,yr.CRC32C,yr.SHA1,yr.SHA256],fF=[yr.CRC32,yr.CRC32C,yr.SHA1,yr.SHA256],pF=function(n,t){var o=t.requestAlgorithmMember;if(!o||!n[o])return t.requestChecksumRequired?yr.MD5:void 0;var s=n[o];if(!O2.includes(s))throw new Error('The checksum algorithm "'.concat(s,'" is not supported by the client.')+" Select one of ".concat(O2,"."));return s},wA=function(n){return n===yr.MD5?"content-md5":"x-amz-checksum-".concat(n.toLowerCase())},hF=function(n,t){for(var e=n.toLowerCase(),o=0,s=Object.keys(t);o<s.length;o++)if(e===s[o].toLowerCase())return!0;return!1},SA=function(n){return"function"==typeof ArrayBuffer&&n instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(n)},EA=function(n){return void 0!==n&&"string"!=typeof n&&!ArrayBuffer.isView(n)&&!SA(n)},mF=S(42562),gF=S(25423),PA=function(n,t){var e;return(e={},(0,d.Z)(e,yr.MD5,t.md5),(0,d.Z)(e,yr.CRC32,mF.AwsCrc32),(0,d.Z)(e,yr.CRC32C,gF.AwsCrc32c),(0,d.Z)(e,yr.SHA1,t.sha1),(0,d.Z)(e,yr.SHA256,t.sha256),e)[n]},dp=function(n){return(new TextEncoder).encode(n)},Il=function(n){return"string"==typeof n?dp(n):ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(n)},kA=function(n,t){var e=new n;return e.update(Il(t||"")),e.digest()},vF=function(){var a=Lt(function(n,t){var e=t.streamHasher,o=t.checksumAlgorithmFn,s=t.base64Encoder;return(0,He.Z)().mark(function u(){var c;return(0,He.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return c=EA(n)?e(o,n):kA(o,n),m.t0=s,m.next=4,c;case 4:return m.t1=m.sent,m.abrupt("return",(0,m.t0)(m.t1));case 6:case"end":return m.stop()}},u)})()});return function(t,e){return a.apply(this,arguments)}}(),_F=function(){var o,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[],e=(0,te.Z)(fF);try{for(e.s();!(o=e.n()).done;){var s=o.value;!n.includes(s)||!O2.includes(s)||t.push(s)}}catch(u){e.e(u)}finally{e.f()}return t},yF=function(){var a=Lt(function(n,t){var e=t.config,o=t.responseAlgorithms;return(0,He.Z)().mark(function s(){var u,c,l,m,C,T,B,F,U,ae,ue,me;return(0,He.Z)().wrap(function(we){for(;;)switch(we.prev=we.next){case 0:u=_F(o),c=n.body,l=n.headers,m=(0,te.Z)(u),we.prev=3,m.s();case 5:if((C=m.n()).done){we.next=20;break}if(B=wA(T=C.value),!(F=l[B])){we.next=18;break}return U=PA(T,e),ae=e.streamHasher,ue=e.base64Encoder,we.next=14,vF(c,{streamHasher:ae,checksumAlgorithmFn:U,base64Encoder:ue});case 14:if((me=we.sent)!==F){we.next=17;break}return we.abrupt("break",20);case 17:throw new Error('Checksum mismatch: expected "'.concat(me,'" but received "').concat(F,'"')+' in response header "'.concat(B,'".'));case 18:we.next=5;break;case 20:we.next=25;break;case 22:we.prev=22,we.t0=we.catch(3),m.e(we.t0);case 25:return we.prev=25,m.f(),we.finish(25);case 28:case"end":return we.stop()}},s,null,[[3,22,25,28]])})()});return function(t,e){return a.apply(this,arguments)}}(),bF={name:"flexibleChecksumsMiddleware",step:"build",tags:["BODY_CHECKSUM"],override:!0},F2=function(n,t){return{applyToStack:function(o){o.add(function(n,t){return function(e){return function(){var o=Lt((0,He.Z)().mark(function s(u){var c,l,m,C,T,B,ae,ue,me,Se,we,dt,Ot,ft,jt;return(0,He.Z)().wrap(function(tn){for(;;)switch(tn.prev=tn.next){case 0:if(ir.isInstance(u.request)){tn.next=2;break}return tn.abrupt("return",e(u));case 2:if(l=(c=u.request).body,m=c.headers,C=n.base64Encoder,T=n.streamHasher,ae=pF(B=t.input,{requestChecksumRequired:t.requestChecksumRequired,requestAlgorithmMember:t.requestAlgorithmMember}),ue=l,me=m,!ae){tn.next=24;break}if(Se=wA(ae),we=PA(ae,n),!EA(l)){tn.next=19;break}ue=(0,n.getAwsChunkedEncodingStream)(l,{base64Encoder:C,bodyLengthChecker:n.bodyLengthChecker,checksumLocationName:Se,checksumAlgorithmFn:we,streamHasher:T}),delete(me=(0,b.Z)((0,b.Z)({},m),{},{"content-encoding":m["content-encoding"]?"".concat(m["content-encoding"],",aws-chunked"):"aws-chunked","transfer-encoding":"chunked","x-amz-decoded-content-length":m["content-length"],"x-amz-content-sha256":"STREAMING-UNSIGNED-PAYLOAD-TRAILER","x-amz-trailer":Se}))["content-length"],tn.next=24;break;case 19:if(hF(Se,m)){tn.next=24;break}return tn.next=22,kA(we,l);case 22:dt=tn.sent,me=(0,b.Z)((0,b.Z)({},m),{},(0,d.Z)({},Se,C(dt)));case 24:return tn.next=26,e((0,b.Z)((0,b.Z)({},u),{},{request:(0,b.Z)((0,b.Z)({},c),{},{headers:me,body:ue})}));case 26:return Ot=tn.sent,jt=t.responseAlgorithms,(ft=t.requestValidationModeMember)&&"ENABLED"===B[ft]&&yF(Ot.response,{config:n,responseAlgorithms:jt}),tn.abrupt("return",Ot);case 30:case"end":return tn.stop()}},s)}));return function(s){return o.apply(this,arguments)}}()}}(n,t),bF)}}},SF={step:"finalizeRequest",tags:["CHECK_CONTENT_LENGTH_HEADER"],name:"getCheckContentLengthHeaderPlugin",override:!0},fp=function(){function a(n){(0,p.Z)(this,a),this.statusCode=n.statusCode,this.reason=n.reason,this.headers=n.headers||{},this.body=n.body}return(0,_.Z)(a,null,[{key:"isInstance",value:function(t){return!!t&&("number"==typeof t.statusCode&&"object"==typeof t.headers)}}]),a}(),AA=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Uint8Array,t=arguments.length>1?arguments[1]:void 0;return n instanceof Uint8Array?Promise.resolve(n):t.streamCollector(n)||Promise.resolve(new Uint8Array)},AF=function(n,t){return AA(n,t).then(function(e){return t.utf8Encoder(e)})},RF={relation:"after",toMiddleware:"deserializerMiddleware",tags:["THROW_200_EXCEPTIONS","S3"],name:"throw200ExceptionsMiddleware",override:!0},TF=function(n){return"string"==typeof n&&0===n.indexOf("arn:")&&n.split(":").length>=6},OF={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},BF={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},Z0=function(n){return{applyToStack:function(e){e.add(function MF(a){return function(n){return function(){var t=Lt((0,He.Z)().mark(function e(o){var s,c,l,m,C,T,B,F,U;return(0,He.Z)().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:s=(0,b.Z)({},o.input),c=0,l=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}];case 3:if(!(c<l.length)){ue.next=30;break}if(!(C=s[(m=l[c]).target])){ue.next=27;break}return B=ArrayBuffer.isView(C)?new Uint8Array(C.buffer,C.byteOffset,C.byteLength):"string"==typeof C?a.utf8Decoder(C):new Uint8Array(C),F=a.base64Encoder(B),(U=new a.md5).update(B),ue.t0=b.Z,ue.t1=(0,b.Z)({},s),ue.t2={},(0,d.Z)(T={},m.target,F),ue.t3=d.Z,ue.t4=T,ue.t5=m.hash,ue.t6=a,ue.next=22,U.digest();case 22:ue.t7=ue.sent,ue.t8=ue.t6.base64Encoder.call(ue.t6,ue.t7),(0,ue.t3)(ue.t4,ue.t5,ue.t8),ue.t9=T,s=(0,ue.t0)(ue.t1,ue.t2,ue.t9);case 27:c++,ue.next=3;break;case 30:return ue.abrupt("return",n((0,b.Z)((0,b.Z)({},o),{},{input:s})));case 31:case"end":return ue.stop()}},e)}));return function(e){return t.apply(this,arguments)}}()}}(n),BF)}}},RA=function(){function a(){(0,p.Z)(this,a)}return(0,_.Z)(a,[{key:"trace",value:function(){}},{key:"debug",value:function(){}},{key:"info",value:function(){}},{key:"warn",value:function(){}},{key:"error",value:function(){}}]),a}(),DA=function a(){var n=[],t=[],e=new Set,c=function(B){return n.forEach(function(F){B.add(F.middleware,(0,b.Z)({},F))}),t.forEach(function(F){B.addRelativeTo(F.middleware,(0,b.Z)({},F))}),B},l=function T(B){var F=[];return B.before.forEach(function(U){0===U.before.length&&0===U.after.length?F.push(U):F.push.apply(F,(0,y.Z)(T(U)))}),F.push(B),B.after.reverse().forEach(function(U){0===U.before.length&&0===U.after.length?F.push(U):F.push.apply(F,(0,y.Z)(T(U)))}),F},m=function(){var B=arguments.length>0&&void 0!==arguments[0]&&arguments[0],F=[],U=[],ae={};n.forEach(function(me){var Se=(0,b.Z)((0,b.Z)({},me),{},{before:[],after:[]});Se.name&&(ae[Se.name]=Se),F.push(Se)}),t.forEach(function(me){var Se=(0,b.Z)((0,b.Z)({},me),{},{before:[],after:[]});Se.name&&(ae[Se.name]=Se),U.push(Se)}),U.forEach(function(me){if(me.toMiddleware){var Se=ae[me.toMiddleware];if(void 0===Se){if(B)return;throw new Error("".concat(me.toMiddleware," is not found when adding ").concat(me.name||"anonymous"," middleware ").concat(me.relation," ").concat(me.toMiddleware))}"after"===me.relation&&Se.after.push(me),"before"===me.relation&&Se.before.push(me)}});var ue=function(B){return B.sort(function(F,U){return TA[U.step]-TA[F.step]||IA[U.priority||"normal"]-IA[F.priority||"normal"]})}(F).map(l).reduce(function(me,Se){return me.push.apply(me,(0,y.Z)(Se)),me},[]);return ue},C={add:function(B){var F=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},U=F.name,ae=F.override,ue=(0,b.Z)({step:"initialize",priority:"normal",middleware:B},F);if(U){if(e.has(U)){if(!ae)throw new Error("Duplicate middleware name '".concat(U,"'"));var me=n.findIndex(function(we){return we.name===U}),Se=n[me];if(Se.step!==ue.step||Se.priority!==ue.priority)throw new Error('"'.concat(U,'" middleware with ').concat(Se.priority," priority in ").concat(Se.step," step cannot be ")+"overridden by same-name middleware with ".concat(ue.priority," priority in ").concat(ue.step," step."));n.splice(me,1)}e.add(U)}n.push(ue)},addRelativeTo:function(B,F){var U=F.name,ae=F.override,ue=(0,b.Z)({middleware:B},F);if(U){if(e.has(U)){if(!ae)throw new Error("Duplicate middleware name '".concat(U,"'"));var me=t.findIndex(function(we){return we.name===U}),Se=t[me];if(Se.toMiddleware!==ue.toMiddleware||Se.relation!==ue.relation)throw new Error('"'.concat(U,'" middleware ').concat(Se.relation,' "').concat(Se.toMiddleware,'" middleware cannot be overridden ')+"by same-name middleware ".concat(ue.relation,' "').concat(ue.toMiddleware,'" middleware.'));t.splice(me,1)}e.add(U)}t.push(ue)},clone:function(){return c(a())},use:function(B){B.applyToStack(C)},remove:function(B){return"string"==typeof B?function(B){var F=!1,U=function(ue){return!ue.name||ue.name!==B||(F=!0,e.delete(B),!1)};return n=n.filter(U),t=t.filter(U),F}(B):function(B){var F=!1,U=function(ue){return ue.middleware!==B||(F=!0,ue.name&&e.delete(ue.name),!1)};return n=n.filter(U),t=t.filter(U),F}(B)},removeByTag:function(B){var F=!1,U=function(ue){var me=ue.tags,Se=ue.name;return!me||!me.includes(B)||(Se&&e.delete(Se),F=!0,!1)};return n=n.filter(U),t=t.filter(U),F},concat:function(B){var F=c(a());return F.use(B),F},applyToStack:c,identify:function(){return m(!0).map(function(B){return B.name+": "+(B.tags||[]).join(",")})},resolve:function(B,F){var ae,U=(0,te.Z)(m().map(function(me){return me.middleware}).reverse());try{for(U.s();!(ae=U.n()).done;)B=(0,ae.value)(B,F)}catch(me){U.e(me)}finally{U.f()}return B}};return C},TA={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},IA={high:3,normal:2,low:1},OA=function(){function a(n){(0,p.Z)(this,a),this.middlewareStack=DA(),this.config=n}return(0,_.Z)(a,[{key:"send",value:function(t,e,o){var u="function"==typeof e?e:o,c=t.resolveMiddleware(this.middlewareStack,this.config,"function"!=typeof e?e:void 0);if(!u)return c(t).then(function(l){return l.output});c(t).then(function(l){return u(null,l.output)},function(l){return u(l)}).catch(function(){})}},{key:"destroy",value:function(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}}]),a}(),mc=(0,_.Z)(function a(){(0,p.Z)(this,a),this.middlewareStack=DA()}),Oo="***SensitiveInformation***",L0=function(n){switch(n){case"true":return!0;case"false":return!1;default:throw new Error('Unable to parse boolean value "'.concat(n,'"'))}},pp=function(n){if(null!=n){if("string"==typeof n){var t=parseFloat(n);if(!Number.isNaN(t))return String(t)!==String(n)&&$0.warn(j0("Expected number but observed string: ".concat(n))),t}if("number"==typeof n)return n;throw new TypeError("Expected number, got ".concat(typeof n,": ").concat(n))}},NF=Math.ceil(Math.pow(2,127)*(2-Math.pow(2,-23))),N2=function(n,t){var e=function(n){if(null!=n){if(Number.isInteger(n)&&!Number.isNaN(n))return n;throw new TypeError("Expected integer, got ".concat(typeof n,": ").concat(n))}}(n);if(void 0!==e&&ZF(e,t)!==e)throw new TypeError("Expected ".concat(t,"-bit integer, got ").concat(n));return e},ZF=function(n,t){switch(t){case 32:return Int32Array.of(n)[0];case 16:return Int16Array.of(n)[0];case 8:return Int8Array.of(n)[0]}},gc=function(n,t){if(null==n)throw t?new TypeError("Expected a non-null value for ".concat(t)):new TypeError("Expected a non-null value");return n},Z2=function(n){if(null!=n){if("object"==typeof n&&!Array.isArray(n))return n;var t=Array.isArray(n)?"array":typeof n;throw new TypeError("Expected object, got ".concat(t,": ").concat(n))}},_o=function(n){if(null!=n){if("string"==typeof n)return n;if(["boolean","number","bigint"].includes(typeof n))return $0.warn(j0("Expected string, got ".concat(typeof n,": ").concat(n))),String(n);throw new TypeError("Expected string, got ".concat(typeof n,": ").concat(n))}},$F=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Ol=function(n){var t=n.match($F);if(null===t||t[0].length!==n.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(n)},L2=function(n){return function(n){return N2(n,16)}("string"==typeof n?Ol(n):n)},j0=function(n){return String(new TypeError(n).stack||n).split("\n").slice(0,5).filter(function(t){return!t.includes("stackTraceWarning")}).join("\n")},$0={warn:console.warn},zF=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],j2=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function ZA(a){var n=a.getUTCFullYear(),t=a.getUTCMonth(),e=a.getUTCDay(),o=a.getUTCDate(),s=a.getUTCHours(),u=a.getUTCMinutes(),c=a.getUTCSeconds(),l=o<10?"0".concat(o):"".concat(o),m=s<10?"0".concat(s):"".concat(s),C=u<10?"0".concat(u):"".concat(u),T=c<10?"0".concat(c):"".concat(c);return"".concat(zF[e],", ").concat(l," ").concat(j2[t]," ").concat(n," ").concat(m,":").concat(C,":").concat(T," GMT")}var HF=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),qF=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),KF=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),WF=function(n){if(null!=n){if("string"!=typeof n)throw new TypeError("RFC-7231 date-times must be expressed as strings");var t=HF.exec(n);if(t){var o=(0,g.Z)(t,8),u=o[1],c=o[2],m=o[4],C=o[5],T=o[6],B=o[7];return hp(L2(Fl(o[3])),$2(c),Ka(u,"day",1,31),{hours:m,minutes:C,seconds:T,fractionalMilliseconds:B})}if(t=qF.exec(n)){var U=(0,g.Z)(t,8),ue=U[1],me=U[2],we=U[4],qe=U[5],at=U[6],dt=U[7];return YF(hp(QF(U[3]),$2(me),Ka(ue,"day",1,31),{hours:we,minutes:qe,seconds:at,fractionalMilliseconds:dt}))}if(t=KF.exec(n)){var ft=(0,g.Z)(t,8),Ut=ft[1],tn=ft[2],Vt=ft[3],zt=ft[4],qt=ft[5],qn=ft[6];return hp(L2(Fl(ft[7])),$2(Ut),Ka(tn.trimLeft(),"day",1,31),{hours:Vt,minutes:zt,seconds:qt,fractionalMilliseconds:qn})}throw new TypeError("Invalid RFC-7231 date-time value")}},hp=function(n,t,e,o){var s=t-1;return tM(n,s,e),new Date(Date.UTC(n,s,e,Ka(o.hours,"hour",0,23),Ka(o.minutes,"minute",0,59),Ka(o.seconds,"seconds",0,60),rM(o.fractionalMilliseconds)))},QF=function(n){var t=(new Date).getUTCFullYear(),e=100*Math.floor(t/100)+L2(Fl(n));return e<t?e+100:e},YF=function(n){return n.getTime()-(new Date).getTime()>15768e8?new Date(Date.UTC(n.getUTCFullYear()-100,n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.getUTCMilliseconds())):n},$2=function(n){var t=j2.indexOf(n);if(t<0)throw new TypeError("Invalid month: ".concat(n));return t+1},eM=[31,28,31,30,31,30,31,31,30,31,30,31],tM=function(n,t,e){var o=eM[t];if(1===t&&nM(n)&&(o=29),e>o)throw new TypeError("Invalid day for ".concat(j2[t]," in ").concat(n,": ").concat(e))},nM=function(n){return n%4==0&&(n%100!=0||n%400==0)},Ka=function(n,t,e,o){var s=function(n){return function(n){return N2(n,8)}("string"==typeof n?Ol(n):n)}(Fl(n));if(s<e||s>o)throw new TypeError("".concat(t," must be between ").concat(e," and ").concat(o,", inclusive"));return s},rM=function(n){return null==n?0:1e3*function(n){return function(n){var t=pp(n);if(void 0!==t&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>NF)throw new TypeError("Expected 32-bit float, got ".concat(n));return t}("string"==typeof n?Ol(n):n)}("0."+n)},Fl=function(n){for(var t=0;t<n.length-1&&"0"===n.charAt(t);)t++;return 0===t?n:n.slice(t)},LA=function(a){(0,G.Z)(t,a);var n=(0,H.Z)(t);function t(e){var o;return(0,p.Z)(this,t),o=n.call(this,e.message),Object.setPrototypeOf((0,gt.Z)(o),t.prototype),o.name=e.name,o.$fault=e.$fault,o.$metadata=e.$metadata,o}return(0,_.Z)(t)}((0,V.Z)(Error)),Wa=function(n){return Object.entries(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).filter(function(o){return void 0!==(0,g.Z)(o,2)[1]}).forEach(function(o){var s=(0,g.Z)(o,2),u=s[0];(null==n[u]||""===n[u])&&(n[u]=s[1])}),n.message=n.message||n.Message||"UnknownError",delete n.Message,n},jA=function(n){return function(t){!function(n){var e=n.parsedBody,o=n.exceptionCtor,s=n.errorCode,u=aM(n.output),c=u.httpStatusCode?u.httpStatusCode+"":void 0,l=new o({name:e?.code||e?.Code||s||c||"UnknownError",$fault:"client",$metadata:u});throw Wa(l,e)}({output:t.output,parsedBody:t.parsedBody,exceptionCtor:n,errorCode:t.errorCode})}},aM=function(n){var t,e;return{httpStatusCode:n.statusCode,requestId:null!==(t=null!==(e=n.headers["x-amzn-requestid"])&&void 0!==e?e:n.headers["x-amzn-request-id"])&&void 0!==t?t:n.headers["x-amz-request-id"],extendedRequestId:n.headers["x-amz-id-2"],cfId:n.headers["x-amz-cf-id"]}},$A=function(n){switch(n){case"standard":case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}};function U0(a){return encodeURIComponent(a).replace(/[!'()*]/g,function(n){return"%"+n.charCodeAt(0).toString(16).toUpperCase()})}var sM=function a(n){var t="#text";for(var e in n)n.hasOwnProperty(e)&&void 0!==n[e][t]?n[e]=n[e][t]:"object"==typeof n[e]&&null!==n[e]&&(n[e]=a(n[e]));return n},U2=function(){var n=Object.getPrototypeOf(this).constructor,e=new(Function.bind.apply(String,[null].concat(Array.prototype.slice.call(arguments))));return Object.setPrototypeOf(e,n.prototype),e};function Yi(a,n,t){var e,s;if(typeof n>"u"&&typeof t>"u")e={},s=a;else{if(e=a,"function"==typeof n)return uM(e,n,s=t);s=n}for(var u=0,c=Object.keys(s);u<c.length;u++){var l=c[u];Array.isArray(s[l])?zA(e,null,s,l):e[l]=s[l]}return e}U2.prototype=Object.create(String.prototype,{constructor:{value:U2,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(U2,String);var UA=function(n,t){var e={};for(var o in t)zA(e,n,t,o);return e},uM=function(n,t,e){return Yi(n,Object.entries(e).reduce(function(o,s){var u=(0,g.Z)(s,2),l=u[1];return o[u[0]]=Array.isArray(l)?l:"function"==typeof l?[t,l()]:[t,l],o},{}))},zA=function(n,t,e,o){if(null===t){var U=(0,g.Z)(e[o],2),ae=U[0],ue=U[1];if("function"==typeof ue){var me,Se=void 0===ae&&null!=(me=ue()),we="function"==typeof ae&&!!ae(void 0)||"function"!=typeof ae&&!!ae;Se?n[o]=me:we&&(n[o]=ue())}else{var qe=void 0===ae&&null!=ue,at="function"==typeof ae&&!!ae(ue)||"function"!=typeof ae&&!!ae;(qe||at)&&(n[o]=ue)}}else{var s=e[o];"function"==typeof s&&(s=[,s]);var c=(0,g.Z)(s,3),l=c[0],m=void 0===l?cM:l,C=c[1],T=void 0===C?lM:C,B=c[2],F=void 0===B?o:B;("function"==typeof m&&m(t[F])||"function"!=typeof m&&m)&&(n[o]=T(t[F]))}},cM=function(n){return null!=n},lM=function(n){return n},Xa=function(n,t,e,o,s,u){if(null==t||void 0===t[e])throw new Error("No value provided for input HTTP label: "+e+".");var c=o();if(c.length<=0)throw new Error("Empty value provided for input HTTP label: "+e+".");return n.replace(s,u?c.split("/").map(function(l){return U0(l)}).join("/"):U0(c))},la=function a(n){if(null==n)return{};if(Array.isArray(n))return n.filter(function(u){return null!=u});if("object"==typeof n){for(var t={},e=0,o=Object.keys(n);e<o.length;e++){var s=o[e];null!=n[s]&&(t[s]=a(n[s]))}return t}return n},dM=function(n){return(0,b.Z)((0,b.Z)({},n),n.SSEKMSKeyId&&{SSEKMSKeyId:Oo})},fM=function(n){return(0,b.Z)((0,b.Z)({},n),n.SSECustomerKey&&{SSECustomerKey:Oo})},pM=function(n){return(0,b.Z)((0,b.Z)((0,b.Z)({},n),n.SSEKMSKeyId&&{SSEKMSKeyId:Oo}),n.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Oo})},hM=function(n){return(0,b.Z)((0,b.Z)((0,b.Z)((0,b.Z)({},n),n.SSECustomerKey&&{SSECustomerKey:Oo}),n.SSEKMSKeyId&&{SSEKMSKeyId:Oo}),n.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Oo})},bM=function(n){return(0,b.Z)((0,b.Z)((0,b.Z)({},n),n.SSEKMSKeyId&&{SSEKMSKeyId:Oo}),n.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Oo})},CM=function(n){return(0,b.Z)((0,b.Z)((0,b.Z)((0,b.Z)({},n),n.SSECustomerKey&&{SSECustomerKey:Oo}),n.SSEKMSKeyId&&{SSEKMSKeyId:Oo}),n.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Oo})};function wM(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}var EM=function(){function a(n){(0,p.Z)(this,a),this.value=n}return(0,_.Z)(a,[{key:"toString",value:function(){return function SM(a){return a.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#x0D;").replace(/\n/g,"&#x0A;").replace(/\u0085/g,"&#x85;").replace(/\u2028/,"&#x2028;")}(""+this.value)}}]),a}(),qo=function(){function a(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];(0,p.Z)(this,a),this.name=n,this.children=t,this.attributes={}}return(0,_.Z)(a,[{key:"withName",value:function(t){return this.name=t,this}},{key:"addAttribute",value:function(t,e){return this.attributes[t]=e,this}},{key:"addChildNode",value:function(t){return this.children.push(t),this}},{key:"removeAttribute",value:function(t){return delete this.attributes[t],this}},{key:"toString",value:function(){for(var t=!!this.children.length,e="<".concat(this.name),o=this.attributes,s=0,u=Object.keys(o);s<u.length;s++){var c=u[s],l=o[c];typeof l<"u"&&null!==l&&(e+=" ".concat(c,'="').concat(wM(""+l),'"'))}return e+(t?">".concat(this.children.map(function(m){return m.toString()}).join(""),"</").concat(this.name,">"):"/>")}}],[{key:"of",value:function(t,e,o){var s=new a(t);return void 0!==e&&s.addChildNode(new EM(e)),void 0!==o&&s.withName(o),s}}]),a}(),Ml=function(){function a(n){(0,p.Z)(this,a),this.method=n.method||"GET",this.hostname=n.hostname||"localhost",this.port=n.port,this.query=n.query||{},this.headers=n.headers||{},this.body=n.body,this.protocol=n.protocol?":"!==n.protocol.slice(-1)?"".concat(n.protocol,":"):n.protocol:"https:",this.path=n.path?"/"!==n.path.charAt(0)?"/".concat(n.path):n.path:"/"}return(0,_.Z)(a,[{key:"clone",value:function(){var t=new a((0,b.Z)((0,b.Z)({},this),{},{headers:(0,b.Z)({},this.headers)}));return t.query&&(t.query=function PM(a){return Object.keys(a).reduce(function(n,t){var e=a[t];return(0,b.Z)((0,b.Z)({},n),{},(0,d.Z)({},t,Array.isArray(e)?(0,y.Z)(e):e))},{})}(t.query)),t}}],[{key:"isInstance",value:function(t){return!!t&&("method"in t&&"protocol"in t&&"hostname"in t&&"path"in t&&"object"==typeof t.query&&"object"==typeof t.headers)}}]),a}(),kM=S(53226),AM=function(a){(0,G.Z)(t,a);var n=(0,H.Z)(t);function t(e){var o;return(0,p.Z)(this,t),o=n.call(this,e),Object.setPrototypeOf((0,gt.Z)(o),t.prototype),o}return(0,_.Z)(t)}(LA),RM=function(){var a=Lt((0,He.Z)().mark(function n(t,e){var o,s,u,c,l,m,C,T,B,F,U;return(0,He.Z)().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ue.next=2,e.endpoint();case 2:return s=(o=ue.sent).hostname,c=void 0===(u=o.protocol)?"https":u,l=o.port,m=o.path,C=Yi({},Ko,{"content-type":"application/xml","x-amz-checksum-crc32":t.ChecksumCRC32,"x-amz-checksum-crc32c":t.ChecksumCRC32C,"x-amz-checksum-sha1":t.ChecksumSHA1,"x-amz-checksum-sha256":t.ChecksumSHA256,"x-amz-request-payer":t.RequestPayer,"x-amz-expected-bucket-owner":t.ExpectedBucketOwner,"x-amz-server-side-encryption-customer-algorithm":t.SSECustomerAlgorithm,"x-amz-server-side-encryption-customer-key":t.SSECustomerKey,"x-amz-server-side-encryption-customer-key-md5":t.SSECustomerKeyMD5}),T="".concat(null!=m&&m.endsWith("/")?m.slice(0,-1):m||"")+"/{Key+}",T=Xa(T,t,"Bucket",function(){return t.Bucket},"{Bucket}",!1),T=Xa(T,t,"Key",function(){return t.Key},"{Key+}",!0),B=Yi({"x-id":[,"CompleteMultipartUpload"],uploadId:[,gc(t.UploadId,"UploadId")]}),void 0!==t.MultipartUpload&&(F=VA(t.MultipartUpload,e)),void 0!==t.MultipartUpload&&(U=(U=VA(t.MultipartUpload,e)).withName("CompleteMultipartUpload"),F='<?xml version="1.0" encoding="UTF-8"?>',U.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),F+=U.toString()),ue.abrupt("return",new Ml({protocol:c,hostname:s,port:l,method:"POST",headers:C,path:T,query:B,body:F}));case 16:case"end":return ue.stop()}},n)}));return function(t,e){return a.apply(this,arguments)}}(),DM=function(){var a=Lt((0,He.Z)().mark(function n(t,e){var o,s,u,c,l,m,C,T,B;return(0,He.Z)().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return ae.next=2,e.endpoint();case 2:return s=(o=ae.sent).hostname,c=void 0===(u=o.protocol)?"https":u,l=o.port,m=o.path,C=Yi({},Ko,(0,b.Z)({"x-amz-acl":t.ACL,"cache-control":t.CacheControl,"content-disposition":t.ContentDisposition,"content-encoding":t.ContentEncoding,"content-language":t.ContentLanguage,"content-type":t.ContentType,expires:[function(){return Ko(t.Expires)},function(){return ZA(t.Expires).toString()}],"x-amz-grant-full-control":t.GrantFullControl,"x-amz-grant-read":t.GrantRead,"x-amz-grant-read-acp":t.GrantReadACP,"x-amz-grant-write-acp":t.GrantWriteACP,"x-amz-server-side-encryption":t.ServerSideEncryption,"x-amz-storage-class":t.StorageClass,"x-amz-website-redirect-location":t.WebsiteRedirectLocation,"x-amz-server-side-encryption-customer-algorithm":t.SSECustomerAlgorithm,"x-amz-server-side-encryption-customer-key":t.SSECustomerKey,"x-amz-server-side-encryption-customer-key-md5":t.SSECustomerKeyMD5,"x-amz-server-side-encryption-aws-kms-key-id":t.SSEKMSKeyId,"x-amz-server-side-encryption-context":t.SSEKMSEncryptionContext,"x-amz-server-side-encryption-bucket-key-enabled":[function(){return Ko(t.BucketKeyEnabled)},function(){return t.BucketKeyEnabled.toString()}],"x-amz-request-payer":t.RequestPayer,"x-amz-tagging":t.Tagging,"x-amz-object-lock-mode":t.ObjectLockMode,"x-amz-object-lock-retain-until-date":[function(){return Ko(t.ObjectLockRetainUntilDate)},function(){return(t.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}],"x-amz-object-lock-legal-hold":t.ObjectLockLegalHoldStatus,"x-amz-expected-bucket-owner":t.ExpectedBucketOwner,"x-amz-checksum-algorithm":t.ChecksumAlgorithm},void 0!==t.Metadata&&Object.keys(t.Metadata).reduce(function(ue,me){return ue["x-amz-meta-".concat(me.toLowerCase())]=t.Metadata[me],ue},{}))),T="".concat(null!=m&&m.endsWith("/")?m.slice(0,-1):m||"")+"/{Key+}",T=Xa(T,t,"Bucket",function(){return t.Bucket},"{Bucket}",!1),T=Xa(T,t,"Key",function(){return t.Key},"{Key+}",!0),B=Yi({uploads:[,""],"x-id":[,"CreateMultipartUpload"]}),ae.abrupt("return",new Ml({protocol:c,hostname:s,port:l,method:"POST",headers:C,path:T,query:B,body:void 0}));case 14:case"end":return ae.stop()}},n)}));return function(t,e){return a.apply(this,arguments)}}(),TM=function(){var a=Lt((0,He.Z)().mark(function n(t,e){var o,s,u,c,l,m,C,T,B,F;return(0,He.Z)().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ue.next=2,e.endpoint();case 2:return s=(o=ue.sent).hostname,c=void 0===(u=o.protocol)?"https":u,l=o.port,m=o.path,C=Yi({},Ko,(0,b.Z)({"content-type":t.ContentType||"application/octet-stream","x-amz-acl":t.ACL,"cache-control":t.CacheControl,"content-disposition":t.ContentDisposition,"content-encoding":t.ContentEncoding,"content-language":t.ContentLanguage,"content-length":[function(){return Ko(t.ContentLength)},function(){return t.ContentLength.toString()}],"content-md5":t.ContentMD5,"x-amz-sdk-checksum-algorithm":t.ChecksumAlgorithm,"x-amz-checksum-crc32":t.ChecksumCRC32,"x-amz-checksum-crc32c":t.ChecksumCRC32C,"x-amz-checksum-sha1":t.ChecksumSHA1,"x-amz-checksum-sha256":t.ChecksumSHA256,expires:[function(){return Ko(t.Expires)},function(){return ZA(t.Expires).toString()}],"x-amz-grant-full-control":t.GrantFullControl,"x-amz-grant-read":t.GrantRead,"x-amz-grant-read-acp":t.GrantReadACP,"x-amz-grant-write-acp":t.GrantWriteACP,"x-amz-server-side-encryption":t.ServerSideEncryption,"x-amz-storage-class":t.StorageClass,"x-amz-website-redirect-location":t.WebsiteRedirectLocation,"x-amz-server-side-encryption-customer-algorithm":t.SSECustomerAlgorithm,"x-amz-server-side-encryption-customer-key":t.SSECustomerKey,"x-amz-server-side-encryption-customer-key-md5":t.SSECustomerKeyMD5,"x-amz-server-side-encryption-aws-kms-key-id":t.SSEKMSKeyId,"x-amz-server-side-encryption-context":t.SSEKMSEncryptionContext,"x-amz-server-side-encryption-bucket-key-enabled":[function(){return Ko(t.BucketKeyEnabled)},function(){return t.BucketKeyEnabled.toString()}],"x-amz-request-payer":t.RequestPayer,"x-amz-tagging":t.Tagging,"x-amz-object-lock-mode":t.ObjectLockMode,"x-amz-object-lock-retain-until-date":[function(){return Ko(t.ObjectLockRetainUntilDate)},function(){return(t.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}],"x-amz-object-lock-legal-hold":t.ObjectLockLegalHoldStatus,"x-amz-expected-bucket-owner":t.ExpectedBucketOwner},void 0!==t.Metadata&&Object.keys(t.Metadata).reduce(function(me,Se){return me["x-amz-meta-".concat(Se.toLowerCase())]=t.Metadata[Se],me},{}))),T="".concat(null!=m&&m.endsWith("/")?m.slice(0,-1):m||"")+"/{Key+}",T=Xa(T,t,"Bucket",function(){return t.Bucket},"{Bucket}",!1),T=Xa(T,t,"Key",function(){return t.Key},"{Key+}",!0),B=Yi({"x-id":[,"PutObject"]}),void 0!==t.Body&&(F=t.Body),void 0!==t.Body&&(F=t.Body),ue.abrupt("return",new Ml({protocol:c,hostname:s,port:l,method:"PUT",headers:C,path:T,query:B,body:F}));case 16:case"end":return ue.stop()}},n)}));return function(t,e){return a.apply(this,arguments)}}(),IM=function(){var a=Lt((0,He.Z)().mark(function n(t,e){var o,s,u,c,l,m,C,T,B,F,U;return(0,He.Z)().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ue.next=2,e.endpoint();case 2:return s=(o=ue.sent).hostname,c=void 0===(u=o.protocol)?"https":u,l=o.port,m=o.path,C=Yi({},Ko,{"content-type":"application/xml","content-md5":t.ContentMD5,"x-amz-sdk-checksum-algorithm":t.ChecksumAlgorithm,"x-amz-expected-bucket-owner":t.ExpectedBucketOwner,"x-amz-request-payer":t.RequestPayer}),T="".concat(null!=m&&m.endsWith("/")?m.slice(0,-1):m||"")+"/{Key+}",T=Xa(T,t,"Bucket",function(){return t.Bucket},"{Bucket}",!1),T=Xa(T,t,"Key",function(){return t.Key},"{Key+}",!0),B=Yi({tagging:[,""],versionId:[,t.VersionId]}),void 0!==t.Tagging&&(F=H2(t.Tagging,e)),void 0!==t.Tagging&&(U=H2(t.Tagging,e),F='<?xml version="1.0" encoding="UTF-8"?>',U.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),F+=U.toString()),ue.abrupt("return",new Ml({protocol:c,hostname:s,port:l,method:"PUT",headers:C,path:T,query:B,body:F}));case 16:case"end":return ue.stop()}},n)}));return function(t,e){return a.apply(this,arguments)}}(),OM=function(){var a=Lt((0,He.Z)().mark(function n(t,e){var o,s,u,c,l,m,C,T,B,F;return(0,He.Z)().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ue.next=2,e.endpoint();case 2:return s=(o=ue.sent).hostname,c=void 0===(u=o.protocol)?"https":u,l=o.port,m=o.path,C=Yi({},Ko,{"content-type":"application/octet-stream","content-length":[function(){return Ko(t.ContentLength)},function(){return t.ContentLength.toString()}],"content-md5":t.ContentMD5,"x-amz-sdk-checksum-algorithm":t.ChecksumAlgorithm,"x-amz-checksum-crc32":t.ChecksumCRC32,"x-amz-checksum-crc32c":t.ChecksumCRC32C,"x-amz-checksum-sha1":t.ChecksumSHA1,"x-amz-checksum-sha256":t.ChecksumSHA256,"x-amz-server-side-encryption-customer-algorithm":t.SSECustomerAlgorithm,"x-amz-server-side-encryption-customer-key":t.SSECustomerKey,"x-amz-server-side-encryption-customer-key-md5":t.SSECustomerKeyMD5,"x-amz-request-payer":t.RequestPayer,"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),T="".concat(null!=m&&m.endsWith("/")?m.slice(0,-1):m||"")+"/{Key+}",T=Xa(T,t,"Bucket",function(){return t.Bucket},"{Bucket}",!1),T=Xa(T,t,"Key",function(){return t.Key},"{Key+}",!0),B=Yi({"x-id":[,"UploadPart"],partNumber:[null!=gc(t.PartNumber,"PartNumber"),function(){return t.PartNumber.toString()}],uploadId:[,gc(t.UploadId,"UploadId")]}),void 0!==t.Body&&(F=t.Body),void 0!==t.Body&&(F=t.Body),ue.abrupt("return",new Ml({protocol:c,hostname:s,port:l,method:"PUT",headers:C,path:T,query:B,body:F}));case 16:case"end":return ue.stop()}},n)}));return function(t,e){return a.apply(this,arguments)}}(),FM=function(){var a=Lt((0,He.Z)().mark(function n(t,e){var o,s;return(0,He.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!(200!==t.statusCode&&t.statusCode>=300)){c.next=2;break}return c.abrupt("return",MM(t,e));case 2:return o=Yi({$metadata:vp(t),Expiration:[,t.headers["x-amz-expiration"]],ServerSideEncryption:[,t.headers["x-amz-server-side-encryption"]],VersionId:[,t.headers["x-amz-version-id"]],SSEKMSKeyId:[,t.headers["x-amz-server-side-encryption-aws-kms-key-id"]],BucketKeyEnabled:[function(){return void 0!==t.headers["x-amz-server-side-encryption-bucket-key-enabled"]},function(){return L0(t.headers["x-amz-server-side-encryption-bucket-key-enabled"])}],RequestCharged:[,t.headers["x-amz-request-charged"]]}),c.t0=gc,c.t1=Z2,c.next=7,W2(t.body,e);case 7:return c.t2=c.sent,c.t3=(0,c.t1)(c.t2),void 0!==(s=(0,c.t0)(c.t3,"body")).Bucket&&(o.Bucket=_o(s.Bucket)),void 0!==s.ChecksumCRC32&&(o.ChecksumCRC32=_o(s.ChecksumCRC32)),void 0!==s.ChecksumCRC32C&&(o.ChecksumCRC32C=_o(s.ChecksumCRC32C)),void 0!==s.ChecksumSHA1&&(o.ChecksumSHA1=_o(s.ChecksumSHA1)),void 0!==s.ChecksumSHA256&&(o.ChecksumSHA256=_o(s.ChecksumSHA256)),void 0!==s.ETag&&(o.ETag=_o(s.ETag)),void 0!==s.Key&&(o.Key=_o(s.Key)),void 0!==s.Location&&(o.Location=_o(s.Location)),c.abrupt("return",o);case 19:case"end":return c.stop()}},n)}));return function(t,e){return a.apply(this,arguments)}}(),MM=function(){var a=Lt((0,He.Z)().mark(function n(t,e){var o,s;return(0,He.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.t0=b.Z,l.t1=(0,b.Z)({},t),l.t2={},l.next=5,_p(t.body,e);case 5:return l.t3=l.sent,l.t4={body:l.t3},o=(0,l.t0)(l.t1,l.t2,l.t4),s=yp(t,o.body),l.abrupt("return",mp({output:t,parsedBody:o.body,errorCode:s}));case 11:case"end":return l.stop()}},n)}));return function(t,e){return a.apply(this,arguments)}}(),BM=function(){var a=Lt((0,He.Z)().mark(function n(t,e){var o,s;return(0,He.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!(200!==t.statusCode&&t.statusCode>=300)){c.next=2;break}return c.abrupt("return",NM(t,e));case 2:return o=Yi({$metadata:vp(t),AbortDate:[function(){return void 0!==t.headers["x-amz-abort-date"]},function(){return gc(WF(t.headers["x-amz-abort-date"]))}],AbortRuleId:[,t.headers["x-amz-abort-rule-id"]],ServerSideEncryption:[,t.headers["x-amz-server-side-encryption"]],SSECustomerAlgorithm:[,t.headers["x-amz-server-side-encryption-customer-algorithm"]],SSECustomerKeyMD5:[,t.headers["x-amz-server-side-encryption-customer-key-md5"]],SSEKMSKeyId:[,t.headers["x-amz-server-side-encryption-aws-kms-key-id"]],SSEKMSEncryptionContext:[,t.headers["x-amz-server-side-encryption-context"]],BucketKeyEnabled:[function(){return void 0!==t.headers["x-amz-server-side-encryption-bucket-key-enabled"]},function(){return L0(t.headers["x-amz-server-side-encryption-bucket-key-enabled"])}],RequestCharged:[,t.headers["x-amz-request-charged"]],ChecksumAlgorithm:[,t.headers["x-amz-checksum-algorithm"]]}),c.t0=gc,c.t1=Z2,c.next=7,W2(t.body,e);case 7:return c.t2=c.sent,c.t3=(0,c.t1)(c.t2),void 0!==(s=(0,c.t0)(c.t3,"body")).Bucket&&(o.Bucket=_o(s.Bucket)),void 0!==s.Key&&(o.Key=_o(s.Key)),void 0!==s.UploadId&&(o.UploadId=_o(s.UploadId)),c.abrupt("return",o);case 14:case"end":return c.stop()}},n)}));return function(t,e){return a.apply(this,arguments)}}(),NM=function(){var a=Lt((0,He.Z)().mark(function n(t,e){var o,s;return(0,He.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.t0=b.Z,l.t1=(0,b.Z)({},t),l.t2={},l.next=5,_p(t.body,e);case 5:return l.t3=l.sent,l.t4={body:l.t3},o=(0,l.t0)(l.t1,l.t2,l.t4),s=yp(t,o.body),l.abrupt("return",mp({output:t,parsedBody:o.body,errorCode:s}));case 11:case"end":return l.stop()}},n)}));return function(t,e){return a.apply(this,arguments)}}(),ZM=function(){var a=Lt((0,He.Z)().mark(function n(t,e){var o;return(0,He.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!(200!==t.statusCode&&t.statusCode>=300)){u.next=2;break}return u.abrupt("return",LM(t,e));case 2:return o=Yi({$metadata:vp(t),Expiration:[,t.headers["x-amz-expiration"]],ETag:[,t.headers.etag],ChecksumCRC32:[,t.headers["x-amz-checksum-crc32"]],ChecksumCRC32C:[,t.headers["x-amz-checksum-crc32c"]],ChecksumSHA1:[,t.headers["x-amz-checksum-sha1"]],ChecksumSHA256:[,t.headers["x-amz-checksum-sha256"]],ServerSideEncryption:[,t.headers["x-amz-server-side-encryption"]],VersionId:[,t.headers["x-amz-version-id"]],SSECustomerAlgorithm:[,t.headers["x-amz-server-side-encryption-customer-algorithm"]],SSECustomerKeyMD5:[,t.headers["x-amz-server-side-encryption-customer-key-md5"]],SSEKMSKeyId:[,t.headers["x-amz-server-side-encryption-aws-kms-key-id"]],SSEKMSEncryptionContext:[,t.headers["x-amz-server-side-encryption-context"]],BucketKeyEnabled:[function(){return void 0!==t.headers["x-amz-server-side-encryption-bucket-key-enabled"]},function(){return L0(t.headers["x-amz-server-side-encryption-bucket-key-enabled"])}],RequestCharged:[,t.headers["x-amz-request-charged"]]}),u.next=5,G0(t.body,e);case 5:return u.abrupt("return",o);case 6:case"end":return u.stop()}},n)}));return function(t,e){return a.apply(this,arguments)}}(),LM=function(){var a=Lt((0,He.Z)().mark(function n(t,e){var o,s;return(0,He.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.t0=b.Z,l.t1=(0,b.Z)({},t),l.t2={},l.next=5,_p(t.body,e);case 5:return l.t3=l.sent,l.t4={body:l.t3},o=(0,l.t0)(l.t1,l.t2,l.t4),s=yp(t,o.body),l.abrupt("return",mp({output:t,parsedBody:o.body,errorCode:s}));case 11:case"end":return l.stop()}},n)}));return function(t,e){return a.apply(this,arguments)}}(),jM=function(){var a=Lt((0,He.Z)().mark(function n(t,e){var o;return(0,He.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!(200!==t.statusCode&&t.statusCode>=300)){u.next=2;break}return u.abrupt("return",$M(t,e));case 2:return o=Yi({$metadata:vp(t),VersionId:[,t.headers["x-amz-version-id"]]}),u.next=5,G0(t.body,e);case 5:return u.abrupt("return",o);case 6:case"end":return u.stop()}},n)}));return function(t,e){return a.apply(this,arguments)}}(),$M=function(){var a=Lt((0,He.Z)().mark(function n(t,e){var o,s;return(0,He.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.t0=b.Z,l.t1=(0,b.Z)({},t),l.t2={},l.next=5,_p(t.body,e);case 5:return l.t3=l.sent,l.t4={body:l.t3},o=(0,l.t0)(l.t1,l.t2,l.t4),s=yp(t,o.body),l.abrupt("return",mp({output:t,parsedBody:o.body,errorCode:s}));case 11:case"end":return l.stop()}},n)}));return function(t,e){return a.apply(this,arguments)}}(),UM=function(){var a=Lt((0,He.Z)().mark(function n(t,e){var o;return(0,He.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!(200!==t.statusCode&&t.statusCode>=300)){u.next=2;break}return u.abrupt("return",zM(t,e));case 2:return o=Yi({$metadata:vp(t),ServerSideEncryption:[,t.headers["x-amz-server-side-encryption"]],ETag:[,t.headers.etag],ChecksumCRC32:[,t.headers["x-amz-checksum-crc32"]],ChecksumCRC32C:[,t.headers["x-amz-checksum-crc32c"]],ChecksumSHA1:[,t.headers["x-amz-checksum-sha1"]],ChecksumSHA256:[,t.headers["x-amz-checksum-sha256"]],SSECustomerAlgorithm:[,t.headers["x-amz-server-side-encryption-customer-algorithm"]],SSECustomerKeyMD5:[,t.headers["x-amz-server-side-encryption-customer-key-md5"]],SSEKMSKeyId:[,t.headers["x-amz-server-side-encryption-aws-kms-key-id"]],BucketKeyEnabled:[function(){return void 0!==t.headers["x-amz-server-side-encryption-bucket-key-enabled"]},function(){return L0(t.headers["x-amz-server-side-encryption-bucket-key-enabled"])}],RequestCharged:[,t.headers["x-amz-request-charged"]]}),u.next=5,G0(t.body,e);case 5:return u.abrupt("return",o);case 6:case"end":return u.stop()}},n)}));return function(t,e){return a.apply(this,arguments)}}(),zM=function(){var a=Lt((0,He.Z)().mark(function n(t,e){var o,s;return(0,He.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.t0=b.Z,l.t1=(0,b.Z)({},t),l.t2={},l.next=5,_p(t.body,e);case 5:return l.t3=l.sent,l.t4={body:l.t3},o=(0,l.t0)(l.t1,l.t2,l.t4),s=yp(t,o.body),l.abrupt("return",mp({output:t,parsedBody:o.body,errorCode:s}));case 11:case"end":return l.stop()}},n)}));return function(t,e){return a.apply(this,arguments)}}(),mp=jA(AM),VA=function(n,t){var e=new qo("CompletedMultipartUpload");return null!=n.Parts&&o5(n.Parts,t).map(function(s){s=s.withName("Part"),e.addChildNode(s)}),e},o5=function(n,t){return n.filter(function(e){return null!=e}).map(function(e){var o=function(n,t){var e=new qo("CompletedPart");if(null!=n.ETag){var o=qo.of("ETag",n.ETag).withName("ETag");e.addChildNode(o)}if(null!=n.ChecksumCRC32){var s=qo.of("ChecksumCRC32",n.ChecksumCRC32).withName("ChecksumCRC32");e.addChildNode(s)}if(null!=n.ChecksumCRC32C){var u=qo.of("ChecksumCRC32C",n.ChecksumCRC32C).withName("ChecksumCRC32C");e.addChildNode(u)}if(null!=n.ChecksumSHA1){var c=qo.of("ChecksumSHA1",n.ChecksumSHA1).withName("ChecksumSHA1");e.addChildNode(c)}if(null!=n.ChecksumSHA256){var l=qo.of("ChecksumSHA256",n.ChecksumSHA256).withName("ChecksumSHA256");e.addChildNode(l)}if(null!=n.PartNumber){var m=qo.of("PartNumber",String(n.PartNumber)).withName("PartNumber");e.addChildNode(m)}return e}(e);return o.withName("member")})},H2=function(n,t){var e=new qo("Tagging");if(null!=n.TagSet){var o=Nl(n.TagSet,t),s=new qo("TagSet");o.map(function(u){s.addChildNode(u)}),e.addChildNode(s)}return e},Nl=function(n,t){return n.filter(function(e){return null!=e}).map(function(e){return function(n,t){var e=new qo("Tag");if(null!=n.Key){var o=qo.of("ObjectKey",n.Key).withName("Key");e.addChildNode(o)}if(null!=n.Value){var s=qo.of("Value",n.Value).withName("Value");e.addChildNode(s)}return e}(e).withName("Tag")})},vp=function(n){var t,e;return{httpStatusCode:n.statusCode,requestId:null!==(t=null!==(e=n.headers["x-amzn-requestid"])&&void 0!==e?e:n.headers["x-amzn-request-id"])&&void 0!==t?t:n.headers["x-amz-request-id"],extendedRequestId:n.headers["x-amz-id-2"],cfId:n.headers["x-amz-cf-id"]}},G0=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Uint8Array,t=arguments.length>1?arguments[1]:void 0;return n instanceof Uint8Array?Promise.resolve(n):t.streamCollector(n)||Promise.resolve(new Uint8Array)},Ko=function(n){return!(null==n||""===n||Object.getOwnPropertyNames(n).includes("length")&&0==n.length||Object.getOwnPropertyNames(n).includes("size")&&0==n.size)},W2=function(n,t){return function(n,t){return G0(n,t).then(function(e){return t.utf8Encoder(e)})}(n,t).then(function(e){if(e.length){var o=new kM.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:function(C,T){return""===T.trim()&&T.includes("\n")?"":void 0}});o.addEntity("#xD","\r"),o.addEntity("#10","\n");var s=o.parse(e),u="#text",c=Object.keys(s)[0],l=s[c];return l[u]&&(l[c]=l[u],delete l[u]),sM(l)}return{}})},_p=function(){var a=Lt((0,He.Z)().mark(function n(t,e){var o,s;return(0,He.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,W2(t,e);case 2:return(o=c.sent).Error&&(o.Error.message=null!==(s=o.Error.message)&&void 0!==s?s:o.Error.Message),c.abrupt("return",o);case 5:case"end":return c.stop()}},n)}));return function(t,e){return a.apply(this,arguments)}}(),yp=function(n,t){return void 0!==t?.Code?t.Code:404==n.statusCode?"NotFound":void 0},JA=function(a){(0,G.Z)(t,a);var n=(0,H.Z)(t);function t(e){var o;return(0,p.Z)(this,t),(o=n.call(this)).input=e,o}return(0,_.Z)(t,[{key:"resolveMiddleware",value:function(o,s,u){this.middlewareStack.use(It(s,this.serialize,this.deserialize)),this.middlewareStack.use(dn(s,t.getEndpointParameterInstructions())),this.middlewareStack.use({applyToStack:function(e){e.add(function wF(){return function(a,n){return function(){var t=Lt((0,He.Z)().mark(function e(o){var s,u,c;return(0,He.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return ir.isInstance(s=o.request)&&(s.headers["content-length"]||(c="Are you using a Stream of unknown length as the Body of a PutObject request? Consider using Upload instead from @aws-sdk/lib-storage.","function"==typeof(null==n||null===(u=n.logger)||void 0===u?void 0:u.warn)?n.logger.warn(c):console.warn(c))),m.abrupt("return",a((0,b.Z)({},o)));case 3:case"end":return m.stop()}},e)}));return function(e){return t.apply(this,arguments)}}()}}(),SF)}}),this.middlewareStack.use(Z0(s)),this.middlewareStack.use(F2(s,{input:this.input,requestAlgorithmMember:"ChecksumAlgorithm",requestChecksumRequired:!1}));var c=o.concat(this.middlewareStack),B=s.requestHandler;return c.resolve(function(F){return B.handle(F.request,u||{})},{logger:s.logger,clientName:"S3Client",commandName:"PutObjectCommand",inputFilterSensitiveLog:CM,outputFilterSensitiveLog:bM})}},{key:"serialize",value:function(o,s){return TM(o,s)}},{key:"deserialize",value:function(o,s){return ZM(o,s)}}],[{key:"getEndpointParameterInstructions",value:function(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}}]),t}(mc),y6=function(a){(0,G.Z)(t,a);var n=(0,H.Z)(t);function t(e){var o;return(0,p.Z)(this,t),(o=n.call(this)).input=e,o}return(0,_.Z)(t,[{key:"resolveMiddleware",value:function(o,s,u){this.middlewareStack.use(It(s,this.serialize,this.deserialize)),this.middlewareStack.use(dn(s,t.getEndpointParameterInstructions())),this.middlewareStack.use(Z0(s));var c=o.concat(this.middlewareStack),B=s.requestHandler;return c.resolve(function(F){return B.handle(F.request,u||{})},{logger:s.logger,clientName:"S3Client",commandName:"CreateMultipartUploadCommand",inputFilterSensitiveLog:hM,outputFilterSensitiveLog:pM})}},{key:"serialize",value:function(o,s){return DM(o,s)}},{key:"deserialize",value:function(o,s){return BM(o,s)}}],[{key:"getEndpointParameterInstructions",value:function(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}}]),t}(mc),S6=function(n){return(0,b.Z)((0,b.Z)({},n),n.SSEKMSKeyId&&{SSEKMSKeyId:Oo})},E6=function(n){return(0,b.Z)((0,b.Z)({},n),n.SSECustomerKey&&{SSECustomerKey:Oo})},P6=function(a){(0,G.Z)(t,a);var n=(0,H.Z)(t);function t(e){var o;return(0,p.Z)(this,t),(o=n.call(this)).input=e,o}return(0,_.Z)(t,[{key:"resolveMiddleware",value:function(o,s,u){this.middlewareStack.use(It(s,this.serialize,this.deserialize)),this.middlewareStack.use(dn(s,t.getEndpointParameterInstructions())),this.middlewareStack.use(Z0(s)),this.middlewareStack.use(F2(s,{input:this.input,requestAlgorithmMember:"ChecksumAlgorithm",requestChecksumRequired:!1}));var c=o.concat(this.middlewareStack),B=s.requestHandler;return c.resolve(function(F){return B.handle(F.request,u||{})},{logger:s.logger,clientName:"S3Client",commandName:"UploadPartCommand",inputFilterSensitiveLog:E6,outputFilterSensitiveLog:S6})}},{key:"serialize",value:function(o,s){return OM(o,s)}},{key:"deserialize",value:function(o,s){return UM(o,s)}}],[{key:"getEndpointParameterInstructions",value:function(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}}]),t}(mc),k6=function(a){(0,G.Z)(t,a);var n=(0,H.Z)(t);function t(e){var o;return(0,p.Z)(this,t),(o=n.call(this)).input=e,o}return(0,_.Z)(t,[{key:"resolveMiddleware",value:function(o,s,u){this.middlewareStack.use(It(s,this.serialize,this.deserialize)),this.middlewareStack.use(dn(s,t.getEndpointParameterInstructions())),this.middlewareStack.use(function(n){return{applyToStack:function(e){e.addRelativeTo(function(n){return function(t){return function(){var e=Lt((0,He.Z)().mark(function o(s){var u,c,l,m,C,T,B;return(0,He.Z)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,t(s);case 2:if(fp.isInstance(c=(u=U.sent).response)){U.next=6;break}return U.abrupt("return",u);case 6:if(m=c.body,!((l=c.statusCode)<200||l>=300)){U.next=9;break}return U.abrupt("return",u);case 9:return U.next=11,AA(m,n);case 11:return C=U.sent,U.next=14,AF(C,n);case 14:if(T=U.sent,0!==C.length){U.next=19;break}throw(B=new Error("S3 aborted request")).name="InternalError",B;case 19:return T&&T.match("<Error>")&&(c.statusCode=400),c.body=C,U.abrupt("return",u);case 22:case"end":return U.stop()}},o)}));return function(o){return e.apply(this,arguments)}}()}}(n),RF)}}}(s)),this.middlewareStack.use(Z0(s));var c=o.concat(this.middlewareStack),B=s.requestHandler;return c.resolve(function(F){return B.handle(F.request,u||{})},{logger:s.logger,clientName:"S3Client",commandName:"CompleteMultipartUploadCommand",inputFilterSensitiveLog:fM,outputFilterSensitiveLog:dM})}},{key:"serialize",value:function(o,s){return RM(o,s)}},{key:"deserialize",value:function(o,s){return FM(o,s)}}],[{key:"getEndpointParameterInstructions",value:function(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}}]),t}(mc),A6=function(a){(0,G.Z)(t,a);var n=(0,H.Z)(t);function t(e){var o;return(0,p.Z)(this,t),(o=n.call(this)).input=e,o}return(0,_.Z)(t,[{key:"resolveMiddleware",value:function(o,s,u){this.middlewareStack.use(It(s,this.serialize,this.deserialize)),this.middlewareStack.use(dn(s,t.getEndpointParameterInstructions())),this.middlewareStack.use(F2(s,{input:this.input,requestAlgorithmMember:"ChecksumAlgorithm",requestChecksumRequired:!0}));var c=o.concat(this.middlewareStack),B=s.requestHandler;return c.resolve(function(F){return B.handle(F.request,u||{})},{logger:s.logger,clientName:"S3Client",commandName:"PutObjectTaggingCommand",inputFilterSensitiveLog:function(U){return U},outputFilterSensitiveLog:function(U){return U}})}},{key:"serialize",value:function(o,s){return IM(o,s)}},{key:"deserialize",value:function(o,s){return jM(o,s)}}],[{key:"getEndpointParameterInstructions",value:function(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}}]),t}(mc),X2=S(83358),D6=(0,b.Z)((0,b.Z)({},{lstatSync:function(){}}),{},{runtime:"browser"}),Q2=function(n){if(null==n)return 0;if("string"==typeof n&&(n=Buffer.from(n)),"number"==typeof n.byteLength)return n.byteLength;if("number"==typeof n.length)return n.length;if("number"==typeof n.size)return n.size;if("string"==typeof n.path)try{return D6.lstatSync(n.path).size}catch{return}},Ll=S(13195),T6=S(70574);function YA(a,n){this.v=a,this.k=n}function xp(a){var n,t;function e(s,u){try{var c=a[s](u),l=c.value,m=l instanceof YA;Promise.resolve(m?l.v:l).then(function(C){if(m){var T="return"===s?"return":"next";if(!l.k||C.done)return e(T,C);C=a[T](C).value}o(c.done?"return":"normal",C)},function(C){e("throw",C)})}catch(C){o("throw",C)}}function o(s,u){switch(s){case"return":n.resolve({value:u,done:!0});break;case"throw":n.reject(u);break;default:n.resolve({value:u,done:!1})}(n=n.next)?e(n.key,n.arg):t=null}this._invoke=function(s,u){return new Promise(function(c,l){var m={key:s,arg:u,resolve:c,reject:l,next:null};t?t=t.next=m:(n=t=m,e(s,u))})},"function"!=typeof a.return&&(this.return=void 0)}function Qa(a){return function(){return new xp(a.apply(this,arguments))}}function eR(a,n){return J2.apply(this,arguments)}function J2(){return(J2=Qa((0,He.Z)().mark(function a(n,t){var e,o,s;return(0,He.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:e=1,o=0,s=t;case 3:if(!(s<n.byteLength)){c.next=11;break}return c.next=6,{partNumber:e,data:n.slice(o,s)};case 6:e+=1,s=(o=s)+t,c.next=3;break;case 11:return c.next=13,{partNumber:e,data:n.slice(o),lastPart:!0};case 13:case"end":return c.stop()}},a)}))).apply(this,arguments)}function eo(a){return new YA(a,0)}function Y2(a,n,t){return eP.apply(this,arguments)}function eP(){return(eP=Qa((0,He.Z)().mark(function a(n,t,e){var o,s,u,c,l,m,C,T,B;return(0,He.Z)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:o=1,s={chunks:[],length:0},u=!1,c=!1,U.prev=4,m=ca(e(n));case 6:return U.next=8,eo(m.next());case 8:if(!(u=!(C=U.sent).done)){U.next=24;break}s.chunks.push(T=C.value),s.length+=T.length;case 12:if(!(s.length>=t)){U.next=21;break}return B=s.chunks.length>1?Ll.Buffer.concat(s.chunks):s.chunks[0],U.next=16,{partNumber:o,data:B.slice(0,t)};case 16:s.chunks=[B.slice(t)],s.length=s.chunks[0].length,o+=1,U.next=12;break;case 21:u=!1,U.next=6;break;case 24:U.next=30;break;case 26:U.prev=26,U.t0=U.catch(4),c=!0,l=U.t0;case 30:if(U.prev=30,U.prev=31,!u||null==m.return){U.next=35;break}return U.next=35,eo(m.return());case 35:if(U.prev=35,!c){U.next=38;break}throw l;case 38:return U.finish(35);case 39:return U.finish(30);case 40:return U.next=42,{partNumber:o,data:Ll.Buffer.concat(s.chunks),lastPart:!0};case 42:case"end":return U.stop()}},a,null,[[4,26,30,40],[31,,35,39]])}))).apply(this,arguments)}function I6(a){return tP.apply(this,arguments)}function tP(){return(tP=Qa((0,He.Z)().mark(function a(n){var t,e,o,s,u,c;return(0,He.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:t=!1,e=!1,m.prev=2,s=ca(n);case 4:return m.next=6,eo(s.next());case 6:if(!(t=!(u=m.sent).done)){m.next=13;break}return c=u.value,m.next=10,Ll.Buffer.from(c);case 10:t=!1,m.next=4;break;case 13:m.next=19;break;case 15:m.prev=15,m.t0=m.catch(2),e=!0,o=m.t0;case 19:if(m.prev=19,m.prev=20,!t||null==s.return){m.next=24;break}return m.next=24,eo(s.return());case 24:if(m.prev=24,!e){m.next=27;break}throw o;case 27:return m.finish(24);case 28:return m.finish(19);case 29:case"end":return m.stop()}},a,null,[[2,15,19,29],[20,,24,28]])}))).apply(this,arguments)}function tR(a){return nP.apply(this,arguments)}function nP(){return(nP=Qa((0,He.Z)().mark(function a(n){var t,e,s;return(0,He.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:t=n.getReader(),c.prev=1;case 2:return c.next=5,eo(t.read());case 5:if(s=(e=c.sent).value,!e.done){c.next=10;break}return c.abrupt("return");case 10:return c.next=12,Ll.Buffer.from(s);case 12:c.next=2;break;case 14:c.next=19;break;case 16:throw c.prev=16,c.t0=c.catch(1),c.t0;case 19:return c.prev=19,t.releaseLock(),c.finish(19);case 22:case"end":return c.stop()}},a,null,[[1,16,19,22]])}))).apply(this,arguments)}xp.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},xp.prototype.next=function(a){return this._invoke("next",a)},xp.prototype.throw=function(a){return this._invoke("throw",a)},xp.prototype.return=function(a){return this._invoke("return",a)};var O6=function(n,t){if(n instanceof Ll.Buffer)return eR(n,t);if(n instanceof T6.Readable)return Y2(n,t,I6);if(n instanceof String||"string"==typeof n||n instanceof Uint8Array)return eR(Ll.Buffer.from(n),t);if("function"==typeof n.stream)return Y2(n.stream(),t,tR);if(n instanceof ReadableStream)return Y2(n,t,tR);throw new Error("Body Data is unsupported format, expected data to be one of: string | Uint8Array | Buffer | Readable | ReadableStream | Blob;.")},rP=5242880,F6=function(a){(0,G.Z)(t,a);var e,n=(0,H.Z)(t);function t(e){var o,s;return(0,p.Z)(this,t),(s=n.call(this)).MAX_PARTS=1e4,s.queueSize=4,s.partSize=rP,s.leavePartsOnError=!1,s.tags=[],s.concurrentUploaders=[],s.uploadedParts=[],s.isMultiPart=!0,s.queueSize=e.queueSize||s.queueSize,s.partSize=e.partSize||s.partSize,s.leavePartsOnError=e.leavePartsOnError||s.leavePartsOnError,s.tags=e.tags||s.tags,s.client=e.client,s.params=e.params,s.__validateInput(),s.totalBytes=Q2(s.params.Body),s.bytesUploadedSoFar=0,s.abortController=null!==(o=e.abortController)&&void 0!==o?o:new I2,s}return(0,_.Z)(t,[{key:"abort",value:(e=Lt((0,He.Z)().mark(function s(){return(0,He.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:this.abortController.abort();case 1:case"end":return c.stop()}},s,this)})),function o(){return e.apply(this,arguments)})},{key:"done",value:function(){var e=Lt((0,He.Z)().mark(function s(){return(0,He.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Promise.race([this.__doMultipartUpload(),this.__abortTimeout(this.abortController.signal)]);case 2:return c.abrupt("return",c.sent);case 3:case"end":return c.stop()}},s,this)}));return function o(){return e.apply(this,arguments)}}()},{key:"on",value:function(o,s){return this.uploadEvent=o,(0,Et.Z)((0,Ee.Z)(t.prototype),"on",this).call(this,o,s)}},{key:"__uploadUsingPut",value:function(){var e=Lt((0,He.Z)().mark(function s(u){var l,m,C,T,B,F,U,ae,ue,me,Se,we,qe,c=this;return(0,He.Z)().wrap(function(dt){for(;;)switch(dt.prev=dt.next){case 0:return this.isMultiPart=!1,m=(0,b.Z)((0,b.Z)({},this.params),{},{Body:u.data}),F=function(ft){c.bytesUploadedSoFar=ft.loaded,c.totalBytes=ft.total,c.__notifyProgress({loaded:c.bytesUploadedSoFar,total:c.totalBytes,part:u.partNumber,Key:c.params.Key,Bucket:c.params.Bucket})},null!==(B=(T=(C=this.client.config).requestHandler)instanceof X2.EventEmitter?T:null)&&B.on("xhr.upload.progress",F),dt.next=9,Promise.all([this.client.send(new JA(m)),null==C||null===(l=C.endpoint)||void 0===l?void 0:l.call(C)]);case 9:if(ae=(U=dt.sent)[0],ue=U[1]){dt.next=18;break}return dt.t0=ur,dt.next=16,Mt(m,JA,(0,b.Z)({},C));case 16:dt.t1=dt.sent,ue=(0,dt.t0)(dt.t1);case 18:if(ue){dt.next=20;break}throw new Error('Could not resolve endpoint from S3 "client.config.endpoint()" nor EndpointsV2.');case 20:null!==B&&B.off("xhr.upload.progress",F),me=this.params.Key.split("/").map(function(Ot){return U0(Ot)}).join("/"),Se=U0(this.params.Bucket),void 0,Ot=ue.hostname.startsWith("".concat(Se,".")),we=c.client.config.forcePathStyle?"".concat(ue.protocol,"//").concat(ue.hostname,"/").concat(Se,"/").concat(me):Ot?"".concat(ue.protocol,"//").concat(ue.hostname,"/").concat(me):"".concat(ue.protocol,"//").concat(Se,".").concat(ue.hostname,"/").concat(me),this.singleUploadResult=(0,b.Z)((0,b.Z)({},ae),{},{Bucket:this.params.Bucket,Key:this.params.Key,Location:we}),qe=Q2(u.data),this.__notifyProgress({loaded:qe,total:qe,part:1,Key:this.params.Key,Bucket:this.params.Bucket});case 27:case"end":return dt.stop()}var Ot},s,this)}));return function o(s){return e.apply(this,arguments)}}()},{key:"__createMultipartUpload",value:function(){var e=Lt((0,He.Z)().mark(function s(){var u;return(0,He.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return this.createMultiPartPromise||(u=(0,b.Z)((0,b.Z)({},this.params),{},{Body:void 0}),this.createMultiPartPromise=this.client.send(new y6(u))),m.next=3,this.createMultiPartPromise;case 3:this.uploadId=m.sent.UploadId;case 5:case"end":return m.stop()}},s,this)}));return function o(){return e.apply(this,arguments)}}()},{key:"__doConcurrentUpload",value:function(){var e=Lt((0,He.Z)().mark(function s(u){var l,m,C,T,B,F,U,c=this;return(0,He.Z)().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:l=!1,m=!1,ue.prev=2,T=(0,He.Z)().mark(function me(){var Se,we,qe,at,dt,Ot,ft;return(0,He.Z)().wrap(function(Ut){for(;;)switch(Ut.prev=Ut.next){case 0:if(Se=F.value,!(c.uploadedParts.length>c.MAX_PARTS)){Ut.next=3;break}throw new Error("Exceeded ".concat(c.MAX_PARTS," as part of the upload to ").concat(c.params.Key," and ").concat(c.params.Bucket,"."));case 3:if(Ut.prev=3,!c.abortController.signal.aborted){Ut.next=6;break}return Ut.abrupt("return",{v:void 0});case 6:if(1!==Se.partNumber||!Se.lastPart){Ut.next=11;break}return Ut.next=9,c.__uploadUsingPut(Se);case 9:return Ut.t0=Ut.sent,Ut.abrupt("return",{v:Ut.t0});case 11:if(c.uploadId){Ut.next=16;break}return Ut.next=14,c.__createMultipartUpload();case 14:if(!c.abortController.signal.aborted){Ut.next=16;break}return Ut.abrupt("return",{v:void 0});case 16:return we=Q2(Se.data)||0,dt=0,Ot=function(Vt,zt){(Number(zt.query.partNumber)||-1)===Se.partNumber&&(Vt.total&&we&&(c.bytesUploadedSoFar+=Vt.loaded-dt,dt=Vt.loaded),c.__notifyProgress({loaded:c.bytesUploadedSoFar,total:c.totalBytes,part:Se.partNumber,Key:c.params.Key,Bucket:c.params.Bucket}))},null!==(at=(qe=c.client.config.requestHandler)instanceof X2.EventEmitter?qe:null)&&at.on("xhr.upload.progress",Ot),Ut.next=24,c.client.send(new P6((0,b.Z)((0,b.Z)({},c.params),{},{UploadId:c.uploadId,Body:Se.data,PartNumber:Se.partNumber})));case 24:if(ft=Ut.sent,null!==at&&at.off("xhr.upload.progress",Ot),!c.abortController.signal.aborted){Ut.next=28;break}return Ut.abrupt("return",{v:void 0});case 28:if(ft.ETag){Ut.next=30;break}throw new Error("Part ".concat(Se.partNumber," is missing ETag in UploadPart response. Missing Bucket CORS configuration for ETag header?"));case 30:c.uploadedParts.push((0,b.Z)((0,b.Z)((0,b.Z)((0,b.Z)({PartNumber:Se.partNumber,ETag:ft.ETag},ft.ChecksumCRC32&&{ChecksumCRC32:ft.ChecksumCRC32}),ft.ChecksumCRC32C&&{ChecksumCRC32C:ft.ChecksumCRC32C}),ft.ChecksumSHA1&&{ChecksumSHA1:ft.ChecksumSHA1}),ft.ChecksumSHA256&&{ChecksumSHA256:ft.ChecksumSHA256})),null===at&&(c.bytesUploadedSoFar+=we),c.__notifyProgress({loaded:c.bytesUploadedSoFar,total:c.totalBytes,part:Se.partNumber,Key:c.params.Key,Bucket:c.params.Bucket}),Ut.next=41;break;case 35:if(Ut.prev=35,Ut.t1=Ut.catch(3),c.uploadId){Ut.next=39;break}throw Ut.t1;case 39:if(!c.leavePartsOnError){Ut.next=41;break}throw Ut.t1;case 41:case"end":return Ut.stop()}},me,null,[[3,35]])}),B=ca(u);case 5:return ue.next=7,B.next();case 7:if(!(l=!(F=ue.sent).done)){ue.next=15;break}return ue.delegateYield(T(),"t0",9);case 9:if("object"!=typeof(U=ue.t0)){ue.next=12;break}return ue.abrupt("return",U.v);case 12:l=!1,ue.next=5;break;case 15:ue.next=21;break;case 17:ue.prev=17,ue.t1=ue.catch(2),m=!0,C=ue.t1;case 21:if(ue.prev=21,ue.prev=22,!l||null==B.return){ue.next=26;break}return ue.next=26,B.return();case 26:if(ue.prev=26,!m){ue.next=29;break}throw C;case 29:return ue.finish(26);case 30:return ue.finish(21);case 31:case"end":return ue.stop()}},s,null,[[2,17,21,31],[22,,26,30]])}));return function o(s){return e.apply(this,arguments)}}()},{key:"__doMultipartUpload",value:function(){var e=Lt((0,He.Z)().mark(function s(){var u,c,l,m,C;return(0,He.Z)().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:for(u=O6(this.params.Body,this.partSize),c=0;c<this.queueSize;c++)l=this.__doConcurrentUpload(u),this.concurrentUploaders.push(l);return B.next=4,Promise.all(this.concurrentUploaders);case 4:if(!this.abortController.signal.aborted){B.next=6;break}throw Object.assign(new Error("Upload aborted."),{name:"AbortError"});case 6:if(!this.isMultiPart){B.next=14;break}return this.uploadedParts.sort(function(F,U){return F.PartNumber-U.PartNumber}),C=(0,b.Z)((0,b.Z)({},this.params),{},{Body:void 0,UploadId:this.uploadId,MultipartUpload:{Parts:this.uploadedParts}}),B.next=11,this.client.send(new k6(C));case 11:m=B.sent,B.next=15;break;case 14:m=this.singleUploadResult;case 15:if(!this.tags.length){B.next=18;break}return B.next=18,this.client.send(new A6((0,b.Z)((0,b.Z)({},this.params),{},{Tagging:{TagSet:this.tags}})));case 18:return B.abrupt("return",m);case 19:case"end":return B.stop()}},s,this)}));return function o(){return e.apply(this,arguments)}}()},{key:"__notifyProgress",value:function(o){this.uploadEvent&&this.emit(this.uploadEvent,o)}},{key:"__abortTimeout",value:function(){var e=Lt((0,He.Z)().mark(function s(u){return(0,He.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",new Promise(function(m,C){u.onabort=function(){var T=new Error("Upload aborted.");T.name="AbortError",C(T)}}));case 1:case"end":return l.stop()}},s)}));return function o(s){return e.apply(this,arguments)}}()},{key:"__validateInput",value:function(){if(!this.params)throw new Error("InputError: Upload requires params to be passed to upload.");if(!this.client)throw new Error("InputError: Upload requires a AWS client to do uploads with.");if(this.partSize<rP)throw new Error("EntityTooSmall: Your proposed upload partsize [".concat(this.partSize,"] is smaller than the minimum allowed size [").concat(rP,"] (5MB)"));if(this.queueSize<1)throw new Error("Queue size: Must have at least one uploading queue.")}}]),t}(X2.EventEmitter),Ja=function(a){(0,G.Z)(t,a);var n=(0,H.Z)(t);function t(e){var o;return(0,p.Z)(this,t),o=n.call(this,e),Object.setPrototypeOf((0,gt.Z)(o),t.prototype),o}return(0,_.Z)(t)}(LA),M6=function(a){(0,G.Z)(t,a);var n=(0,H.Z)(t);function t(e){var o;return(0,p.Z)(this,t),(o=n.call(this,(0,b.Z)({name:"InternalErrorException",$fault:"server"},e))).name="InternalErrorException",o.$fault="server",Object.setPrototypeOf((0,gt.Z)(o),t.prototype),o}return(0,_.Z)(t)}(Ja),B6=function(a){(0,G.Z)(t,a);var n=(0,H.Z)(t);function t(e){var o;return(0,p.Z)(this,t),(o=n.call(this,(0,b.Z)({name:"InvalidParameterException",$fault:"client"},e))).name="InvalidParameterException",o.$fault="client",Object.setPrototypeOf((0,gt.Z)(o),t.prototype),o}return(0,_.Z)(t)}(Ja),N6=function(a){(0,G.Z)(t,a);var n=(0,H.Z)(t);function t(e){var o;return(0,p.Z)(this,t),(o=n.call(this,(0,b.Z)({name:"LimitExceededException",$fault:"client"},e))).name="LimitExceededException",o.$fault="client",Object.setPrototypeOf((0,gt.Z)(o),t.prototype),o}return(0,_.Z)(t)}(Ja),Z6=function(a){(0,G.Z)(t,a);var n=(0,H.Z)(t);function t(e){var o;return(0,p.Z)(this,t),(o=n.call(this,(0,b.Z)({name:"NotAuthorizedException",$fault:"client"},e))).name="NotAuthorizedException",o.$fault="client",Object.setPrototypeOf((0,gt.Z)(o),t.prototype),o}return(0,_.Z)(t)}(Ja),L6=function(a){(0,G.Z)(t,a);var n=(0,H.Z)(t);function t(e){var o;return(0,p.Z)(this,t),(o=n.call(this,(0,b.Z)({name:"ResourceConflictException",$fault:"client"},e))).name="ResourceConflictException",o.$fault="client",Object.setPrototypeOf((0,gt.Z)(o),t.prototype),o}return(0,_.Z)(t)}(Ja),j6=function(a){(0,G.Z)(t,a);var n=(0,H.Z)(t);function t(e){var o;return(0,p.Z)(this,t),(o=n.call(this,(0,b.Z)({name:"TooManyRequestsException",$fault:"client"},e))).name="TooManyRequestsException",o.$fault="client",Object.setPrototypeOf((0,gt.Z)(o),t.prototype),o}return(0,_.Z)(t)}(Ja),$6=function(a){(0,G.Z)(t,a);var n=(0,H.Z)(t);function t(e){var o;return(0,p.Z)(this,t),(o=n.call(this,(0,b.Z)({name:"ResourceNotFoundException",$fault:"client"},e))).name="ResourceNotFoundException",o.$fault="client",Object.setPrototypeOf((0,gt.Z)(o),t.prototype),o}return(0,_.Z)(t)}(Ja),U6=function(a){(0,G.Z)(t,a);var n=(0,H.Z)(t);function t(e){var o;return(0,p.Z)(this,t),(o=n.call(this,(0,b.Z)({name:"ExternalServiceException",$fault:"client"},e))).name="ExternalServiceException",o.$fault="client",Object.setPrototypeOf((0,gt.Z)(o),t.prototype),o}return(0,_.Z)(t)}(Ja),z6=function(a){(0,G.Z)(t,a);var n=(0,H.Z)(t);function t(e){var o;return(0,p.Z)(this,t),(o=n.call(this,(0,b.Z)({name:"InvalidIdentityPoolConfigurationException",$fault:"client"},e))).name="InvalidIdentityPoolConfigurationException",o.$fault="client",Object.setPrototypeOf((0,gt.Z)(o),t.prototype),o}return(0,_.Z)(t)}(Ja),G6=function(){var a=Lt((0,He.Z)().mark(function n(t,e){var o,s;return(0,He.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return o=dR("GetCredentialsForIdentity"),s=JSON.stringify(la(t)),c.abrupt("return",lR(e,o,"/",void 0,s));case 3:case"end":return c.stop()}},n)}));return function(t,e){return a.apply(this,arguments)}}(),V6=function(){var a=Lt((0,He.Z)().mark(function n(t,e){var o,s;return(0,He.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return o=dR("GetId"),s=JSON.stringify(la(t)),c.abrupt("return",lR(e,o,"/",void 0,s));case 3:case"end":return c.stop()}},n)}));return function(t,e){return a.apply(this,arguments)}}(),H6=function(){var a=Lt((0,He.Z)().mark(function n(t,e){var s,u;return(0,He.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(t.statusCode>=300)){l.next=2;break}return l.abrupt("return",q6(t,e));case 2:return l.next=4,iP(t.body,e);case 4:return s=Y6(l.sent,e),u=(0,b.Z)({$metadata:Ea(t)},s),l.abrupt("return",u);case 9:case"end":return l.stop()}},n)}));return function(t,e){return a.apply(this,arguments)}}(),q6=function(){var a=Lt((0,He.Z)().mark(function n(t,e){var o,s;return(0,He.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.t0=b.Z,l.t1=(0,b.Z)({},t),l.t2={},l.next=5,fR(t.body,e);case 5:l.t3=l.sent,l.t4={body:l.t3},o=(0,l.t0)(l.t1,l.t2,l.t4),s=pR(t,o.body),l.t5=s,l.next="ExternalServiceException"===l.t5||"com.amazonaws.cognitoidentity#ExternalServiceException"===l.t5?12:"InternalErrorException"===l.t5||"com.amazonaws.cognitoidentity#InternalErrorException"===l.t5?15:"InvalidIdentityPoolConfigurationException"===l.t5||"com.amazonaws.cognitoidentity#InvalidIdentityPoolConfigurationException"===l.t5?18:"InvalidParameterException"===l.t5||"com.amazonaws.cognitoidentity#InvalidParameterException"===l.t5?21:"NotAuthorizedException"===l.t5||"com.amazonaws.cognitoidentity#NotAuthorizedException"===l.t5?24:"ResourceConflictException"===l.t5||"com.amazonaws.cognitoidentity#ResourceConflictException"===l.t5?27:"ResourceNotFoundException"===l.t5||"com.amazonaws.cognitoidentity#ResourceNotFoundException"===l.t5?30:"TooManyRequestsException"===l.t5||"com.amazonaws.cognitoidentity#TooManyRequestsException"===l.t5?33:36;break;case 12:return l.next=14,nR(o,e);case 14:case 17:case 20:case 23:case 26:case 29:case 32:case 35:throw l.sent;case 15:return l.next=17,rR(o,e);case 18:return l.next=20,X6(o,e);case 21:return l.next=23,iR(o,e);case 24:return l.next=26,oR(o,e);case 27:return l.next=29,aR(o,e);case 30:return l.next=32,sR(o,e);case 33:return l.next=35,uR(o,e);case 36:return l.abrupt("return",cR({output:t,parsedBody:o.body,errorCode:s}));case 38:case"end":return l.stop()}},n)}));return function(t,e){return a.apply(this,arguments)}}(),K6=function(){var a=Lt((0,He.Z)().mark(function n(t,e){var s,u;return(0,He.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(t.statusCode>=300)){l.next=2;break}return l.abrupt("return",W6(t,e));case 2:return l.next=4,iP(t.body,e);case 4:return s=la(l.sent),u=(0,b.Z)({$metadata:Ea(t)},s),l.abrupt("return",u);case 9:case"end":return l.stop()}},n)}));return function(t,e){return a.apply(this,arguments)}}(),W6=function(){var a=Lt((0,He.Z)().mark(function n(t,e){var o,s;return(0,He.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.t0=b.Z,l.t1=(0,b.Z)({},t),l.t2={},l.next=5,fR(t.body,e);case 5:l.t3=l.sent,l.t4={body:l.t3},o=(0,l.t0)(l.t1,l.t2,l.t4),s=pR(t,o.body),l.t5=s,l.next="ExternalServiceException"===l.t5||"com.amazonaws.cognitoidentity#ExternalServiceException"===l.t5?12:"InternalErrorException"===l.t5||"com.amazonaws.cognitoidentity#InternalErrorException"===l.t5?15:"InvalidParameterException"===l.t5||"com.amazonaws.cognitoidentity#InvalidParameterException"===l.t5?18:"LimitExceededException"===l.t5||"com.amazonaws.cognitoidentity#LimitExceededException"===l.t5?21:"NotAuthorizedException"===l.t5||"com.amazonaws.cognitoidentity#NotAuthorizedException"===l.t5?24:"ResourceConflictException"===l.t5||"com.amazonaws.cognitoidentity#ResourceConflictException"===l.t5?27:"ResourceNotFoundException"===l.t5||"com.amazonaws.cognitoidentity#ResourceNotFoundException"===l.t5?30:"TooManyRequestsException"===l.t5||"com.amazonaws.cognitoidentity#TooManyRequestsException"===l.t5?33:36;break;case 12:return l.next=14,nR(o,e);case 14:case 17:case 20:case 23:case 26:case 29:case 32:case 35:throw l.sent;case 15:return l.next=17,rR(o,e);case 18:return l.next=20,iR(o,e);case 21:return l.next=23,Q6(o,e);case 24:return l.next=26,oR(o,e);case 27:return l.next=29,aR(o,e);case 30:return l.next=32,sR(o,e);case 33:return l.next=35,uR(o,e);case 36:return l.abrupt("return",cR({output:t,parsedBody:o.body,errorCode:s}));case 38:case"end":return l.stop()}},n)}));return function(t,e){return a.apply(this,arguments)}}(),nR=function(){var a=Lt((0,He.Z)().mark(function n(t,e){var o,s,u;return(0,He.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return s=la(o=t.body),u=new U6((0,b.Z)({$metadata:Ea(t)},s)),l.abrupt("return",Wa(u,o));case 4:case"end":return l.stop()}},n)}));return function(t,e){return a.apply(this,arguments)}}(),rR=function(){var a=Lt((0,He.Z)().mark(function n(t,e){var o,s,u;return(0,He.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return s=la(o=t.body),u=new M6((0,b.Z)({$metadata:Ea(t)},s)),l.abrupt("return",Wa(u,o));case 4:case"end":return l.stop()}},n)}));return function(t,e){return a.apply(this,arguments)}}(),X6=function(){var a=Lt((0,He.Z)().mark(function n(t,e){var o,s,u;return(0,He.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return s=la(o=t.body),u=new z6((0,b.Z)({$metadata:Ea(t)},s)),l.abrupt("return",Wa(u,o));case 4:case"end":return l.stop()}},n)}));return function(t,e){return a.apply(this,arguments)}}(),iR=function(){var a=Lt((0,He.Z)().mark(function n(t,e){var o,s,u;return(0,He.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return s=la(o=t.body),u=new B6((0,b.Z)({$metadata:Ea(t)},s)),l.abrupt("return",Wa(u,o));case 4:case"end":return l.stop()}},n)}));return function(t,e){return a.apply(this,arguments)}}(),Q6=function(){var a=Lt((0,He.Z)().mark(function n(t,e){var o,s,u;return(0,He.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return s=la(o=t.body),u=new N6((0,b.Z)({$metadata:Ea(t)},s)),l.abrupt("return",Wa(u,o));case 4:case"end":return l.stop()}},n)}));return function(t,e){return a.apply(this,arguments)}}(),oR=function(){var a=Lt((0,He.Z)().mark(function n(t,e){var o,s,u;return(0,He.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return s=la(o=t.body),u=new Z6((0,b.Z)({$metadata:Ea(t)},s)),l.abrupt("return",Wa(u,o));case 4:case"end":return l.stop()}},n)}));return function(t,e){return a.apply(this,arguments)}}(),aR=function(){var a=Lt((0,He.Z)().mark(function n(t,e){var o,s,u;return(0,He.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return s=la(o=t.body),u=new L6((0,b.Z)({$metadata:Ea(t)},s)),l.abrupt("return",Wa(u,o));case 4:case"end":return l.stop()}},n)}));return function(t,e){return a.apply(this,arguments)}}(),sR=function(){var a=Lt((0,He.Z)().mark(function n(t,e){var o,s,u;return(0,He.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return s=la(o=t.body),u=new $6((0,b.Z)({$metadata:Ea(t)},s)),l.abrupt("return",Wa(u,o));case 4:case"end":return l.stop()}},n)}));return function(t,e){return a.apply(this,arguments)}}(),uR=function(){var a=Lt((0,He.Z)().mark(function n(t,e){var o,s,u;return(0,He.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return s=la(o=t.body),u=new j6((0,b.Z)({$metadata:Ea(t)},s)),l.abrupt("return",Wa(u,o));case 4:case"end":return l.stop()}},n)}));return function(t,e){return a.apply(this,arguments)}}(),Y6=function(n,t){return UA(n,{Credentials:function(o){return function(n,t){return UA(n,{AccessKeyId:_o,Expiration:function(o){return gc(function(n){if(null!=n){var t;if("number"==typeof n)t=n;else{if("string"!=typeof n)throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");t=function(n){return pp("string"==typeof n?Ol(n):n)}(n)}if(Number.isNaN(t)||t===1/0||t===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(1e3*t))}}(pp(o)))},SecretKey:_o,SessionToken:_o})}(o)},IdentityId:_o})},Ea=function(n){var t,e;return{httpStatusCode:n.statusCode,requestId:null!==(t=null!==(e=n.headers["x-amzn-requestid"])&&void 0!==e?e:n.headers["x-amzn-request-id"])&&void 0!==t?t:n.headers["x-amz-request-id"],extendedRequestId:n.headers["x-amz-id-2"],cfId:n.headers["x-amz-cf-id"]}},cR=jA(Ja),lR=function(){var a=Lt((0,He.Z)().mark(function n(t,e,o,s,u){var c,m,B,F;return(0,He.Z)().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return ae.next=2,t.endpoint();case 2:return F={protocol:void 0===(m=(c=ae.sent).protocol)?"https":m,hostname:c.hostname,port:c.port,method:"POST",path:(B=c.path).endsWith("/")?B.slice(0,-1)+o:B+o,headers:e},void 0!==s&&(F.hostname=s),void 0!==u&&(F.body=u),ae.abrupt("return",new Ml(F));case 12:case"end":return ae.stop()}},n)}));return function(t,e,o,s,u){return a.apply(this,arguments)}}();function dR(a){return{"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.".concat(a)}}var iP=function(n,t){return function(n,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Uint8Array,t=arguments.length>1?arguments[1]:void 0;return n instanceof Uint8Array?Promise.resolve(n):t.streamCollector(n)||Promise.resolve(new Uint8Array)}(n,t).then(function(e){return t.utf8Encoder(e)})}(n,t).then(function(e){return e.length?JSON.parse(e):{}})},fR=function(){var a=Lt((0,He.Z)().mark(function n(t,e){var o,s;return(0,He.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,iP(t,e);case 2:return(s=c.sent).message=null!==(o=s.message)&&void 0!==o?o:s.Message,c.abrupt("return",s);case 5:case"end":return c.stop()}},n)}));return function(t,e){return a.apply(this,arguments)}}(),pR=function(n,t){var o=function(c){var l=c;return"number"==typeof l&&(l=l.toString()),l.indexOf(",")>=0&&(l=l.split(",")[0]),l.indexOf(":")>=0&&(l=l.split(":")[0]),l.indexOf("#")>=0&&(l=l.split("#")[1]),l},s=("x-amzn-errortype",Object.keys(n.headers).find(function(m){return m.toLowerCase()==="x-amzn-errortype".toLowerCase()}));return void 0!==s?o(n.headers[s]):void 0!==t.code?o(t.code):void 0!==t.__type?o(t.__type):void 0},iN=function(a){(0,G.Z)(t,a);var n=(0,H.Z)(t);function t(e){var o;return(0,p.Z)(this,t),(o=n.call(this)).input=e,o}return(0,_.Z)(t,[{key:"resolveMiddleware",value:function(o,s,u){this.middlewareStack.use(It(s,this.serialize,this.deserialize)),this.middlewareStack.use(dn(s,t.getEndpointParameterInstructions()));var c=o.concat(this.middlewareStack),B=s.requestHandler;return c.resolve(function(F){return B.handle(F.request,u||{})},{logger:s.logger,clientName:"CognitoIdentityClient",commandName:"GetIdCommand",inputFilterSensitiveLog:function(U){return U},outputFilterSensitiveLog:function(U){return U}})}},{key:"serialize",value:function(o,s){return V6(o,s)}},{key:"deserialize",value:function(o,s){return K6(o,s)}}],[{key:"getEndpointParameterInstructions",value:function(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}}]),t}(mc),oN=function(a){(0,G.Z)(t,a);var n=(0,H.Z)(t);function t(e){var o,s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(0,p.Z)(this,t),(o=n.call(this,e)).tryNextLink=s,o.name="ProviderError",Object.setPrototypeOf((0,gt.Z)(o),t.prototype),o}return(0,_.Z)(t,null,[{key:"from",value:function(o){return Object.assign(new this(o.message,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]),o)}}]),t}((0,V.Z)(Error)),V0=function(a){(0,G.Z)(t,a);var n=(0,H.Z)(t);function t(e){var o,s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(0,p.Z)(this,t),(o=n.call(this,e,s)).tryNextLink=s,o.name="CredentialsProviderError",Object.setPrototypeOf((0,gt.Z)(o),t.prototype),o}return(0,_.Z)(t)}(oN),hR=function(n,t,e){var o,s,u,c=!1,l=function(){var m=Lt((0,He.Z)().mark(function C(){return(0,He.Z)().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return s||(s=n()),B.prev=1,B.next=4,s;case 4:o=B.sent,u=!0,c=!1;case 7:return B.prev=7,s=void 0,B.finish(7);case 10:return B.abrupt("return",o);case 11:case"end":return B.stop()}},C,null,[[1,,7,10]])}));return function(){return m.apply(this,arguments)}}();return void 0===t?function(){var m=Lt((0,He.Z)().mark(function C(T){return(0,He.Z)().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(u&&(null==T||!T.forceRefresh)){F.next=4;break}return F.next=3,l();case 3:o=F.sent;case 4:return F.abrupt("return",o);case 5:case"end":return F.stop()}},C)}));return function(C){return m.apply(this,arguments)}}():function(){var m=Lt((0,He.Z)().mark(function C(T){return(0,He.Z)().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(u&&(null==T||!T.forceRefresh)){F.next=4;break}return F.next=3,l();case 3:o=F.sent;case 4:if(!c){F.next=6;break}return F.abrupt("return",o);case 6:if(!e||e(o)){F.next=9;break}return c=!0,F.abrupt("return",o);case 9:if(!t(o)){F.next=13;break}return F.next=12,l();case 12:case 13:return F.abrupt("return",o);case 14:case"end":return F.stop()}},C)}));return function(C){return m.apply(this,arguments)}}()},aN=function(a){(0,G.Z)(t,a);var n=(0,H.Z)(t);function t(e){var o;return(0,p.Z)(this,t),(o=n.call(this)).input=e,o}return(0,_.Z)(t,[{key:"resolveMiddleware",value:function(o,s,u){this.middlewareStack.use(It(s,this.serialize,this.deserialize)),this.middlewareStack.use(dn(s,t.getEndpointParameterInstructions()));var c=o.concat(this.middlewareStack),B=s.requestHandler;return c.resolve(function(F){return B.handle(F.request,u||{})},{logger:s.logger,clientName:"CognitoIdentityClient",commandName:"GetCredentialsForIdentityCommand",inputFilterSensitiveLog:function(U){return U},outputFilterSensitiveLog:function(U){return U}})}},{key:"serialize",value:function(o,s){return G6(o,s)}},{key:"deserialize",value:function(o,s){return H6(o,s)}}],[{key:"getEndpointParameterInstructions",value:function(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}}]),t}(mc);function mR(a){return Promise.all(Object.keys(a).reduce(function(n,t){var e=a[t];return n.push("string"==typeof e?[t,e]:e().then(function(o){return[t,o]})),n},[])).then(function(n){return n.reduce(function(t,e){var o=(0,g.Z)(e,2);return t[o[0]]=o[1],t},{})})}function sN(a){return Lt((0,He.Z)().mark(function n(){var e,o,s,u,c,l,m;return(0,He.Z)().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(B.t0=a.client,B.t1=aN,B.t2=a.customRoleArn,B.t3=a.identityId,!a.logins){B.next=10;break}return B.next=7,mR(a.logins);case 7:B.t4=B.sent,B.next=11;break;case 10:B.t4=void 0;case 11:return B.t5=B.t4,B.t6={CustomRoleArn:B.t2,IdentityId:B.t3,Logins:B.t5},B.t7=new B.t1(B.t6),B.next=16,B.t0.send.call(B.t0,B.t7);case 16:return o=void 0===(e=B.sent.Credentials)?cN():e,u=void 0===(s=o.AccessKeyId)?uN():s,c=o.Expiration,m=void 0===(l=o.SecretKey)?lN():l,B.abrupt("return",{identityId:a.identityId,accessKeyId:u,secretAccessKey:m,sessionToken:o.SessionToken,expiration:c});case 26:case"end":return B.stop()}},n)}))}function uN(){throw new V0("Response from Amazon Cognito contained no access key ID")}function cN(){throw new V0("Response from Amazon Cognito contained no credentials")}function lN(){throw new V0("Response from Amazon Cognito contained no secret key")}var oP="IdentityIds",dN=function(){function a(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"aws:cognito-identity-ids";(0,p.Z)(this,a),this.dbName=n}return(0,_.Z)(a,[{key:"getItem",value:function(t){return this.withObjectStore("readonly",function(e){var o=e.get(t);return new Promise(function(s){o.onerror=function(){return s(null)},o.onsuccess=function(){return s(o.result?o.result.value:null)}})}).catch(function(){return null})}},{key:"removeItem",value:function(t){return this.withObjectStore("readwrite",function(e){var o=e.delete(t);return new Promise(function(s,u){o.onerror=function(){return u(o.error)},o.onsuccess=function(){return s()}})})}},{key:"setItem",value:function(t,e){return this.withObjectStore("readwrite",function(o){var s=o.put({id:t,value:e});return new Promise(function(u,c){s.onerror=function(){return c(s.error)},s.onsuccess=function(){return u()}})})}},{key:"getDb",value:function(){var t=self.indexedDB.open(this.dbName,1);return new Promise(function(e,o){t.onsuccess=function(){e(t.result)},t.onerror=function(){o(t.error)},t.onblocked=function(){o(new Error("Unable to access DB"))},t.onupgradeneeded=function(){var s=t.result;s.onerror=function(){o(new Error("Failed to create object store"))},s.createObjectStore(oP,{keyPath:"id"})}})}},{key:"withObjectStore",value:function(t,e){return this.getDb().then(function(o){var s=o.transaction(oP,t);return s.oncomplete=function(){return o.close()},new Promise(function(u,c){s.onerror=function(){return c(s.error)},u(e(s.objectStore(oP)))}).catch(function(u){throw o.close(),u})})}}]),a}(),fN=function(){function a(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,p.Z)(this,a),this.store=n}return(0,_.Z)(a,[{key:"getItem",value:function(t){return t in this.store?this.store[t]:null}},{key:"removeItem",value:function(t){delete this.store[t]}},{key:"setItem",value:function(t,e){this.store[t]=e}}]),a}(),pN=new fN;function aP(a){var n=a.accountId,t=a.cache,e=void 0===t?function hN(){return"object"==typeof self&&self.indexedDB?new dN:"object"==typeof window&&window.localStorage?window.localStorage:pN}():t,o=a.client,s=a.customRoleArn,u=a.identityPoolId,c=a.logins,l=a.userIdentifier,m=void 0===l?c&&0!==Object.keys(c).length?void 0:"ANONYMOUS":l,C=m?"aws:cognito-identity-credentials:".concat(u,":").concat(m):void 0,T=function(){var B=Lt((0,He.Z)().mark(function F(){var U,ue,me;return(0,He.Z)().wrap(function(we){for(;;)switch(we.prev=we.next){case 0:if(we.t0=C,!we.t0){we.next=5;break}return we.next=4,e.getItem(C);case 4:we.t0=we.sent;case 5:if(U=we.t0){we.next=28;break}if(we.t1=o,we.t2=iN,we.t3=n,we.t4=u,!c){we.next=17;break}return we.next=14,mR(c);case 14:we.t5=we.sent,we.next=18;break;case 17:we.t5=void 0;case 18:return we.t6=we.t5,we.t7={AccountId:we.t3,IdentityPoolId:we.t4,Logins:we.t6},we.t8=new we.t2(we.t7),we.next=23,we.t1.send.call(we.t1,we.t8);case 23:me=void 0===(ue=we.sent.IdentityId)?mN():ue,U=me,C&&Promise.resolve(e.setItem(C,U)).catch(function(){});case 28:return T=sN({client:o,customRoleArn:s,logins:c,identityId:U}),we.abrupt("return",T());case 30:case"end":return we.stop()}},F)}));return function(){return B.apply(this,arguments)}}();return function(){return T().catch(function(){var B=Lt((0,He.Z)().mark(function F(U){return(0,He.Z)().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:throw C&&Promise.resolve(e.removeItem(C)).catch(function(){}),U;case 2:case"end":return ue.stop()}},F)}));return function(F){return B.apply(this,arguments)}}())}}function mN(){throw new V0("Response from Amazon Cognito contained no identity ID")}var _R=function(n){return"string"==typeof n&&(n.startsWith("fips-")||n.endsWith("-fips"))},yR=function(n){return _R(n)?["fips-aws-global","aws-fips"].includes(n)?"us-east-1":n.replace(/fips-(dkr-|prod-)?|-fips/,""):n},xR=function(n){var o,t=n.region,e=n.useFipsEndpoint;if(!t)throw new Error("Region is missing");return(0,b.Z)((0,b.Z)({},n),{},{region:(o=Lt((0,He.Z)().mark(function u(){return(0,He.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if("string"!=typeof t){m.next=2;break}return m.abrupt("return",yR(t));case 2:return m.next=4,t();case 4:return m.abrupt("return",yR(m.sent));case 6:case"end":return m.stop()}},u)})),function s(){return o.apply(this,arguments)}),useFipsEndpoint:function(){var o=Lt((0,He.Z)().mark(function u(){return(0,He.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if("string"!=typeof t){m.next=4;break}m.t0=t,m.next=7;break;case 4:return m.next=6,t();case 6:m.t0=m.sent;case 7:if(!_R(m.t0)){m.next=10;break}return m.abrupt("return",!0);case 10:return m.abrupt("return","function"!=typeof e?Promise.resolve(!!e):e());case 11:case"end":return m.stop()}},u)}));return function s(){return o.apply(this,arguments)}}()})},bR="content-length",wN={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},CR=function(n){return{applyToStack:function(e){e.add(function CN(a){return function(n){return function(){var t=Lt((0,He.Z)().mark(function e(o){var s,u,c,l;return(0,He.Z)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(ir.isInstance(s=o.request)&&(c=s.headers,(u=s.body)&&-1===Object.keys(c).map(function(T){return T.toLowerCase()}).indexOf(bR)))try{l=a(u),s.headers=(0,b.Z)((0,b.Z)({},s.headers),{},(0,d.Z)({},bR,String(l)))}catch{}return C.abrupt("return",n((0,b.Z)((0,b.Z)({},o),{},{request:s})));case 3:case"end":return C.stop()}},e)}));return function(e){return t.apply(this,arguments)}}()}}(n.bodyLengthChecker),wN)}}},EN={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},wR=function(n){return{applyToStack:function(e){e.add(function(n){return function(t){return function(){var e=Lt((0,He.Z)().mark(function o(s){var u,l,C;return(0,He.Z)().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(ir.isInstance(s.request)){B.next=2;break}return B.abrupt("return",t(s));case 2:return u=s.request,(void 0===(l=(n.requestHandler.metadata||{}).handlerProtocol)?"":l).indexOf("h2")>=0&&!u.headers[":authority"]?(delete u.headers.host,u.headers[":authority"]=""):u.headers.host||(C=u.hostname,null!=u.port&&(C+=":".concat(u.port)),u.headers.host=C),B.abrupt("return",t(s));case 6:case"end":return B.stop()}},o)}));return function(o){return e.apply(this,arguments)}}()}}(n),EN)}}};function sP(a,n){if(null==a)return{};var e,o,t=function PN(a,n){if(null==a)return{};var o,s,t={},e=Object.keys(a);for(s=0;s<e.length;s++)!(n.indexOf(o=e[s])>=0)&&(t[o]=a[o]);return t}(a,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);for(o=0;o<s.length;o++)!(n.indexOf(e=s[o])>=0)&&Object.prototype.propertyIsEnumerable.call(a,e)&&(t[e]=a[e])}return t}for(var kN=["$metadata"],RN={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},SR=function(n){return{applyToStack:function(e){e.add(function(n,t){return function(){var e=Lt((0,He.Z)().mark(function o(s){var u,c,l,m,C,T,B,ae,ue,me,Se,we,qe,at,dt,Ot,ft,tn;return(0,He.Z)().wrap(function(zt){for(;;)switch(zt.prev=zt.next){case 0:return zt.prev=0,zt.next=3,n(s);case 3:return l=t.clientName,m=t.commandName,C=t.logger,ae=(B=void 0===(T=t.dynamoDbDocumentClientOptions)?{}:T).overrideInputFilterSensitiveLog??t.inputFilterSensitiveLog,ue=B.overrideOutputFilterSensitiveLog??t.outputFilterSensitiveLog,Se=(me=(c=zt.sent).output).$metadata,we=sP(me,kN),null==C||null===(u=C.info)||void 0===u||u.call(C,{clientName:l,commandName:m,input:ae(s.input),output:ue(we),metadata:Se}),zt.abrupt("return",c);case 13:throw zt.prev=13,zt.t0=zt.catch(0),at=t.clientName,dt=t.commandName,tn=(void 0===(ft=t.dynamoDbDocumentClientOptions)?{}:ft).overrideInputFilterSensitiveLog??t.inputFilterSensitiveLog,null==(Ot=t.logger)||null===(qe=Ot.error)||void 0===qe||qe.call(Ot,{clientName:at,commandName:dt,input:tn(s.input),error:zt.t0,metadata:zt.t0.$metadata}),zt.t0;case 20:case"end":return zt.stop()}},o,null,[[0,13]])}));return function(o){return e.apply(this,arguments)}}()},RN)}}},ER="X-Amzn-Trace-Id",ON={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},PR=function(n){return{applyToStack:function(e){e.add(function(n){return function(t){return function(){var e=Lt((0,He.Z)().mark(function o(s){var u,c,l,m;return(0,He.Z)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(ir.isInstance(u=s.request)&&"node"===n.runtime&&!u.headers.hasOwnProperty(ER)){T.next=3;break}return T.abrupt("return",t(s));case 3:return c=process.env.AWS_LAMBDA_FUNCTION_NAME,l=process.env._X_AMZN_TRACE_ID,(m=function(F){return"string"==typeof F&&F.length>0})(c)&&m(l)&&(u.headers[ER]=l),T.abrupt("return",t((0,b.Z)((0,b.Z)({},s),{},{request:u})));case 8:case"end":return T.stop()}},o)}));return function(o){return e.apply(this,arguments)}}()}}(n),ON)}}},Ps=function(){return(Ps=Ps||{}).STANDARD="standard",Ps.ADAPTIVE="adaptive",Ps}(),uP=Ps.STANDARD,FN=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],MN=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],BN=[500,502,503,504],NN=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],kR=function(n){var t,e;return 429===(null===(t=n.$metadata)||void 0===t?void 0:t.httpStatusCode)||FN.includes(n.name)||1==(null===(e=n.$retryable)||void 0===e?void 0:e.throttling)},AR=function(n){var t;return MN.includes(n.name)||NN.includes(n?.code||"")||BN.includes((null===(t=n.$metadata)||void 0===t?void 0:t.httpStatusCode)||0)},LN=function(){function a(n){var t,e,o,s,u;(0,p.Z)(this,a),this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=null!==(t=n?.beta)&&void 0!==t?t:.7,this.minCapacity=null!==(e=n?.minCapacity)&&void 0!==e?e:1,this.minFillRate=null!==(o=n?.minFillRate)&&void 0!==o?o:.5,this.scaleConstant=null!==(s=n?.scaleConstant)&&void 0!==s?s:.4,this.smooth=null!==(u=n?.smooth)&&void 0!==u?u:.8;var c=this.getCurrentTimeInSeconds();this.lastThrottleTime=c,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}return(0,_.Z)(a,[{key:"getCurrentTimeInSeconds",value:function(){return Date.now()/1e3}},{key:"getSendToken",value:(n=Lt((0,He.Z)().mark(function e(){return(0,He.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",this.acquireTokenBucket(1));case 1:case"end":return s.stop()}},e,this)})),function t(){return n.apply(this,arguments)})},{key:"acquireTokenBucket",value:function(){var n=Lt((0,He.Z)().mark(function e(o){var s;return(0,He.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(this.enabled){c.next=2;break}return c.abrupt("return");case 2:if(this.refillTokenBucket(),!(o>this.currentCapacity)){c.next=7;break}return s=(o-this.currentCapacity)/this.fillRate*1e3,c.next=7,new Promise(function(l){return setTimeout(l,s)});case 7:this.currentCapacity=this.currentCapacity-o;case 8:case"end":return c.stop()}},e,this)}));return function t(e){return n.apply(this,arguments)}}()},{key:"refillTokenBucket",value:function(){var t=this.getCurrentTimeInSeconds();this.lastTimestamp?(this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+(t-this.lastTimestamp)*this.fillRate),this.lastTimestamp=t):this.lastTimestamp=t}},{key:"updateClientSendingRate",value:function(t){var e;if(this.updateMeasuredRate(),kR(t)){var o=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=o,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),e=this.cubicThrottle(o),this.enableTokenBucket()}else this.calculateTimeWindow(),e=this.cubicSuccess(this.getCurrentTimeInSeconds());var s=Math.min(e,2*this.measuredTxRate);this.updateTokenBucketRate(s)}},{key:"calculateTimeWindow",value:function(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}},{key:"cubicThrottle",value:function(t){return this.getPrecise(t*this.beta)}},{key:"cubicSuccess",value:function(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}},{key:"enableTokenBucket",value:function(){this.enabled=!0}},{key:"updateTokenBucketRate",value:function(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}},{key:"updateMeasuredRate",value:function(){var t=this.getCurrentTimeInSeconds(),e=Math.floor(2*t)/2;this.requestCount++,e>this.lastTxRateBucket&&(this.measuredTxRate=this.getPrecise(this.requestCount/(e-this.lastTxRateBucket)*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=e)}},{key:"getPrecise",value:function(t){return parseFloat(t.toFixed(8))}}]),a;var n}(),TR=function(n){var t=n.retryDelay,e=n.retryCount,o=n.retryCost;return{getRetryCount:function(){return e},getRetryDelay:function(){return Math.min(2e4,t)},getRetryCost:function(){return o}}},IR=function(){function a(n){(0,p.Z)(this,a),this.maxAttempts=n,this.mode=Ps.STANDARD,this.capacity=500,this.retryBackoffStrategy=function(){var n=100;return{computeNextBackoffDelay:function(s){return Math.floor(Math.min(2e4,Math.random()*Math.pow(2,s)*n))},setDelayBase:function(s){n=s}}}(),this.maxAttemptsProvider="function"==typeof n?n:Lt((0,He.Z)().mark(function t(){return(0,He.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",n);case 1:case"end":return o.stop()}},t)}))}return(0,_.Z)(a,[{key:"acquireInitialRetryToken",value:(n=Lt((0,He.Z)().mark(function e(o){return(0,He.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",TR({retryDelay:100,retryCount:0}));case 1:case"end":return u.stop()}},e)})),function t(e){return n.apply(this,arguments)})},{key:"refreshRetryTokenForRetry",value:function(){var n=Lt((0,He.Z)().mark(function e(o,s){var c,l,m,C;return(0,He.Z)().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,this.getMaxAttempts();case 2:if(!this.shouldRetry(o,s,B.sent)){B.next=11;break}return this.retryBackoffStrategy.setDelayBase("THROTTLING"===(c=s.errorType)?500:100),l=this.retryBackoffStrategy.computeNextBackoffDelay(o.getRetryCount()),m=s.retryAfterHint?Math.max(s.retryAfterHint.getTime()-Date.now()||0,l):l,C=this.getCapacityCost(c),this.capacity-=C,B.abrupt("return",TR({retryDelay:m,retryCount:o.getRetryCount()+1,retryCost:C}));case 11:throw new Error("No retry token available");case 12:case"end":return B.stop()}},e,this)}));return function t(e,o){return n.apply(this,arguments)}}()},{key:"recordSuccess",value:function(t){var e;this.capacity=Math.max(500,this.capacity+(null!==(e=t.getRetryCost())&&void 0!==e?e:1))}},{key:"getCapacity",value:function(){return this.capacity}},{key:"getMaxAttempts",value:function(){var n=Lt((0,He.Z)().mark(function e(){return(0,He.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,this.maxAttemptsProvider();case 3:return s.abrupt("return",s.sent);case 6:return s.prev=6,s.t0=s.catch(0),console.warn("Max attempts provider could not resolve. Using default of ".concat(3)),s.abrupt("return",3);case 10:case"end":return s.stop()}},e,this,[[0,6]])}));return function t(){return n.apply(this,arguments)}}()},{key:"shouldRetry",value:function(t,e,o){return t.getRetryCount()<o&&this.capacity>=this.getCapacityCost(e.errorType)&&this.isRetryableError(e.errorType)}},{key:"getCapacityCost",value:function(t){return"TRANSIENT"===t?10:5}},{key:"isRetryableError",value:function(t){return"THROTTLING"===t||"TRANSIENT"===t}}]),a;var n}(),qN=function(){function a(n,t){(0,p.Z)(this,a),this.maxAttemptsProvider=n,this.mode=Ps.ADAPTIVE,this.rateLimiter=(t??{}).rateLimiter??new LN,this.standardRetryStrategy=new IR(n)}return(0,_.Z)(a,[{key:"acquireInitialRetryToken",value:(n=Lt((0,He.Z)().mark(function e(o){return(0,He.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.rateLimiter.getSendToken();case 2:return u.abrupt("return",this.standardRetryStrategy.acquireInitialRetryToken(o));case 3:case"end":return u.stop()}},e,this)})),function t(e){return n.apply(this,arguments)})},{key:"refreshRetryTokenForRetry",value:function(){var n=Lt((0,He.Z)().mark(function e(o,s){return(0,He.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return this.rateLimiter.updateClientSendingRate(s),c.abrupt("return",this.standardRetryStrategy.refreshRetryTokenForRetry(o,s));case 2:case"end":return c.stop()}},e,this)}));return function t(e,o){return n.apply(this,arguments)}}()},{key:"recordSuccess",value:function(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}}]),a;var n}(),MR=function(n){var t,s,e=n.retryStrategy,o=yn(null!==(t=n.maxAttempts)&&void 0!==t?t:3);return(0,b.Z)((0,b.Z)({},n),{},{maxAttempts:o,retryStrategy:(s=Lt((0,He.Z)().mark(function c(){return(0,He.Z)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(!e){C.next=2;break}return C.abrupt("return",e);case 2:return C.next=4,yn(n.retryMode)();case 4:if(C.sent!==Ps.ADAPTIVE){C.next=7;break}return C.abrupt("return",new qN(o));case 7:return C.abrupt("return",new IR(o));case 8:case"end":return C.stop()}},c)})),function u(){return s.apply(this,arguments)})})},JN=function(n){return n instanceof Error?n:n instanceof Object?Object.assign(new Error,n):"string"==typeof n?new Error(n):new Error("AWS SDK error wrapper for ".concat(n))},eZ=function(n){return typeof n.acquireInitialRetryToken<"u"&&typeof n.refreshRetryTokenForRetry<"u"&&typeof n.recordSuccess<"u"},tZ=function(n){var t={errorType:nZ(n)},e=iZ(n.$response);return e&&(t.retryAfterHint=e),t},nZ=function(n){return kR(n)?"THROTTLING":AR(n)?"TRANSIENT":function(n){var t;if(void 0!==(null===(t=n.$metadata)||void 0===t?void 0:t.httpStatusCode)){var e=n.$metadata.httpStatusCode;return 500<=e&&e<=599&&!AR(n)}return!1}(n)?"SERVER_ERROR":"CLIENT_ERROR"},rZ={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},BR=function(n){return{applyToStack:function(e){e.add(function(n){return function(t,e){return function(){var o=Lt((0,He.Z)().mark(function s(u){var c,l,m,C,T,B,F,U,ae,ue;return(0,He.Z)().wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return Se.next=2,n.retryStrategy();case 2:return c=Se.sent,Se.next=5,n.maxAttempts();case 5:if(l=Se.sent,!eZ(c)){Se.next=26;break}return Se.next=10,c.acquireInitialRetryToken(e.partition_id);case 10:m=Se.sent,C=new Error,T=0,B=0,ir.isInstance(F=u.request)&&(F.headers["amz-sdk-invocation-id"]=fr()),U=(0,He.Z)().mark(function we(){var qe,at,dt,Ot,ft;return(0,He.Z)().wrap(function(Ut){for(;;)switch(Ut.prev=Ut.next){case 0:return Ut.prev=0,ir.isInstance(F)&&(F.headers["amz-sdk-request"]="attempt=".concat(T+1,"; max=").concat(l)),Ut.next=4,t(u);case 4:return at=(qe=Ut.sent).response,dt=qe.output,c.recordSuccess(m),dt.$metadata.attempts=T+1,dt.$metadata.totalRetryDelay=B,Ut.abrupt("return",{v:{response:at,output:dt}});case 13:return Ut.prev=13,Ut.t0=Ut.catch(0),Ot=tZ(Ut.t0),C=JN(Ut.t0),Ut.prev=17,Ut.next=20,c.refreshRetryTokenForRetry(m,Ot);case 20:m=Ut.sent,Ut.next=29;break;case 23:throw Ut.prev=23,Ut.t1=Ut.catch(17),C.$metadata||(C.$metadata={}),C.$metadata.attempts=T+1,C.$metadata.totalRetryDelay=B,C;case 29:return T=m.getRetryCount(),ft=m.getRetryDelay(),B+=ft,Ut.next=34,new Promise(function(tn){return setTimeout(tn,ft)});case 34:case"end":return Ut.stop()}},we,null,[[0,13],[17,23]])});case 17:return Se.delegateYield(U(),"t0",19);case 19:if("object"!=typeof(ae=Se.t0)){Se.next=22;break}return Se.abrupt("return",ae.v);case 22:Se.next=17;break;case 24:Se.next=29;break;case 26:return null!==(ue=c)&&void 0!==ue&&ue.mode&&(e.userAgent=[].concat((0,y.Z)(e.userAgent||[]),[["cfg/retry-mode",c.mode]])),Se.abrupt("return",c.retry(t,u));case 29:case"end":return Se.stop()}},s)}));return function(s){return o.apply(this,arguments)}}()}}(n),rZ)}}},iZ=function(n){if(fp.isInstance(n)){var t=Object.keys(n.headers).find(function(u){return"retry-after"===u.toLowerCase()});if(t){var e=n.headers[t],o=Number(e);return Number.isNaN(o)?new Date(e):new Date(1e3*o)}}},NR=S(98407),ZR={},lP={},bp=0;bp<256;bp++){var Cp=bp.toString(16).toLowerCase();1===Cp.length&&(Cp="0".concat(Cp)),ZR[bp]=Cp,lP[Cp]=bp}function Wo(a){for(var n="",t=0;t<a.byteLength;t++)n+=ZR[a[t]];return n}var dP=function(){function a(n){if((0,p.Z)(this,a),this.bytes=n,8!==n.byteLength)throw new Error("Int64 buffers must be exactly 8 bytes")}return(0,_.Z)(a,[{key:"valueOf",value:function(){var t=this.bytes.slice(0),e=128&t[0];return e&&LR(t),parseInt(Wo(t),16)*(e?-1:1)}},{key:"toString",value:function(){return String(this.valueOf())}}],[{key:"fromNumber",value:function(t){if(t>0x8000000000000000||t<-0x8000000000000000)throw new Error("".concat(t," is too large (or, if negative, too small) to represent as an Int64"));for(var e=new Uint8Array(8),o=7,s=Math.abs(Math.round(t));o>-1&&s>0;o--,s/=256)e[o]=s;return t<0&&LR(e),new a(e)}}]),a}();function LR(a){for(var n=0;n<8;n++)a[n]^=255;for(var t=7;t>-1&&(a[t]++,0===a[t]);t--);}var jR=function(){function a(n,t){(0,p.Z)(this,a),this.toUtf8=n,this.fromUtf8=t}return(0,_.Z)(a,[{key:"format",value:function(t){for(var e=[],o=0,s=Object.keys(t);o<s.length;o++){var u=s[o],c=this.fromUtf8(u);e.push(Uint8Array.from([c.byteLength]),c,this.formatHeaderValue(t[u]))}for(var l=new Uint8Array(e.reduce(function(F,U){return F+U.byteLength},0)),m=0,C=0,T=e;C<T.length;C++){var B=T[C];l.set(B,m),m+=B.byteLength}return l}},{key:"formatHeaderValue",value:function(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":var e=new DataView(new ArrayBuffer(3));return e.setUint8(0,3),e.setInt16(1,t.value,!1),new Uint8Array(e.buffer);case"integer":var o=new DataView(new ArrayBuffer(5));return o.setUint8(0,4),o.setInt32(1,t.value,!1),new Uint8Array(o.buffer);case"long":var s=new Uint8Array(9);return s[0]=5,s.set(t.value.bytes,1),s;case"binary":var u=new DataView(new ArrayBuffer(3+t.value.byteLength));u.setUint8(0,6),u.setUint16(1,t.value.byteLength,!1);var c=new Uint8Array(u.buffer);return c.set(t.value,3),c;case"string":var l=this.fromUtf8(t.value),m=new DataView(new ArrayBuffer(3+l.byteLength));m.setUint8(0,7),m.setUint16(1,l.byteLength,!1);var C=new Uint8Array(m.buffer);return C.set(l,3),C;case"timestamp":var T=new Uint8Array(9);return T[0]=8,T.set(dP.fromNumber(t.value.valueOf()).bytes,1),T;case"uuid":if(!hZ.test(t.value))throw new Error("Invalid UUID received: ".concat(t.value));var B=new Uint8Array(17);return B[0]=9,B.set(function oZ(a){if(a.length%2!=0)throw new Error("Hex encoded strings must have an even number length");for(var n=new Uint8Array(a.length/2),t=0;t<a.length;t+=2){var e=a.slice(t,t+2).toLowerCase();if(!(e in lP))throw new Error("Cannot decode unrecognized sequence ".concat(e," as hexadecimal"));n[t/2]=lP[e]}return n}(t.value.replace(/\-/g,"")),1),B}}},{key:"parse",value:function(t){for(var e={},o=0;o<t.byteLength;){var s=t.getUint8(o++),u=this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+o,s));switch(o+=s,t.getUint8(o++)){case 0:e[u]={type:$R,value:!0};break;case 1:e[u]={type:$R,value:!1};break;case 2:e[u]={type:aZ,value:t.getInt8(o++)};break;case 3:e[u]={type:sZ,value:t.getInt16(o,!1)},o+=2;break;case 4:e[u]={type:uZ,value:t.getInt32(o,!1)},o+=4;break;case 5:e[u]={type:cZ,value:new dP(new Uint8Array(t.buffer,t.byteOffset+o,8))},o+=8;break;case 6:var c=t.getUint16(o,!1);o+=2,e[u]={type:lZ,value:new Uint8Array(t.buffer,t.byteOffset+o,c)},o+=c;break;case 7:var l=t.getUint16(o,!1);o+=2,e[u]={type:dZ,value:this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+o,l))},o+=l;break;case 8:e[u]={type:fZ,value:new Date(new dP(new Uint8Array(t.buffer,t.byteOffset+o,8)).valueOf())},o+=8;break;case 9:var m=new Uint8Array(t.buffer,t.byteOffset+o,16);o+=16,e[u]={type:pZ,value:"".concat(Wo(m.subarray(0,4)),"-").concat(Wo(m.subarray(4,6)),"-").concat(Wo(m.subarray(6,8)),"-").concat(Wo(m.subarray(8,10)),"-").concat(Wo(m.subarray(10)))};break;default:throw new Error("Unrecognized header type tag")}}return e}}]),a}(),$R="boolean",aZ="byte",sZ="short",uZ="integer",cZ="long",lZ="binary",dZ="string",fZ="timestamp",pZ="uuid",hZ=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,vZ=function(){function a(n,t){(0,p.Z)(this,a),this.headerMarshaller=new jR(n,t),this.messageBuffer=[],this.isEndOfStream=!1}return(0,_.Z)(a,[{key:"feed",value:function(t){this.messageBuffer.push(this.decode(t))}},{key:"endOfStream",value:function(){this.isEndOfStream=!0}},{key:"getMessage",value:function(){var t=this.messageBuffer.pop(),e=this.isEndOfStream;return{getMessage:function(){return t},isEndOfStream:function(){return e}}}},{key:"getAvailableMessages",value:function(){var t=this.messageBuffer;this.messageBuffer=[];var e=this.isEndOfStream;return{getMessages:function(){return t},isEndOfStream:function(){return e}}}},{key:"encode",value:function(t){var o=t.body,s=this.headerMarshaller.format(t.headers),u=s.byteLength+o.byteLength+16,c=new Uint8Array(u),l=new DataView(c.buffer,c.byteOffset,c.byteLength),m=new NR.Crc32;return l.setUint32(0,u,!1),l.setUint32(4,s.byteLength,!1),l.setUint32(8,m.update(c.subarray(0,8)).digest(),!1),c.set(s,12),c.set(o,s.byteLength+12),l.setUint32(u-4,m.update(c.subarray(8,u-4)).digest(),!1),c}},{key:"decode",value:function(t){var e=function gZ(a){var n=a.byteLength,t=a.byteOffset,e=a.buffer;if(n<16)throw new Error("Provided message too short to accommodate event stream message overhead");var o=new DataView(e,t,n),s=o.getUint32(0,!1);if(n!==s)throw new Error("Reported message length does not match received message length");var u=o.getUint32(4,!1),c=o.getUint32(8,!1),l=o.getUint32(n-4,!1),m=(new NR.Crc32).update(new Uint8Array(e,t,8));if(c!==m.digest())throw new Error("The prelude checksum specified in the message (".concat(c,") does not match the calculated CRC32 checksum (").concat(m.digest(),")"));if(m.update(new Uint8Array(e,t+8,n-12)),l!==m.digest())throw new Error("The message checksum (".concat(m.digest(),") did not match the expected value of ").concat(l));return{headers:new DataView(e,t+8+4,u),body:new Uint8Array(e,t+8+4+u,s-u-16)}}(t),s=e.body;return{headers:this.headerMarshaller.parse(e.headers),body:s}}},{key:"formatHeaders",value:function(t){return this.headerMarshaller.format(t)}}]),a}(),_Z=function(a){function n(t){(0,p.Z)(this,n),this.options=t}return(0,_.Z)(n,[{key:a,value:function(){return this.asyncIterator()}},{key:"asyncIterator",value:function(){var e=this;return Qa((0,He.Z)().mark(function o(){var s,u,c,l,m,T;return(0,He.Z)().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:s=!1,u=!1,F.prev=2,l=ca(e.options.inputStream);case 4:return F.next=6,eo(l.next());case 6:if(!(s=!(m=F.sent).done)){F.next=14;break}return T=e.options.decoder.decode(m.value),F.next=11,T;case 11:s=!1,F.next=4;break;case 14:F.next=20;break;case 16:F.prev=16,F.t0=F.catch(2),u=!0,c=F.t0;case 20:if(F.prev=20,F.prev=21,!s||null==l.return){F.next=25;break}return F.next=25,eo(l.return());case 25:if(F.prev=25,!u){F.next=28;break}throw c;case 28:return F.finish(25);case 29:return F.finish(20);case 30:case"end":return F.stop()}},o,null,[[2,16,20,30],[21,,25,29]])}))()}}]),n}(Symbol.asyncIterator),yZ=function(a){function n(t){(0,p.Z)(this,n),this.options=t}return(0,_.Z)(n,[{key:a,value:function(){return this.asyncIterator()}},{key:"asyncIterator",value:function(){var e=this;return Qa((0,He.Z)().mark(function o(){var s,u,c,l,m,T;return(0,He.Z)().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:s=!1,u=!1,F.prev=2,l=ca(e.options.messageStream);case 4:return F.next=6,eo(l.next());case 6:if(!(s=!(m=F.sent).done)){F.next=14;break}return T=e.options.encoder.encode(m.value),F.next=11,T;case 11:s=!1,F.next=4;break;case 14:F.next=20;break;case 16:F.prev=16,F.t0=F.catch(2),u=!0,c=F.t0;case 20:if(F.prev=20,F.prev=21,!s||null==l.return){F.next=25;break}return F.next=25,eo(l.return());case 25:if(F.prev=25,!u){F.next=28;break}throw c;case 28:return F.finish(25);case 29:return F.finish(20);case 30:if(!e.options.includeEndFrame){F.next=33;break}return F.next=33,new Uint8Array(0);case 33:case"end":return F.stop()}},o,null,[[2,16,20,30],[21,,25,29]])}))()}}]),n}(Symbol.asyncIterator),xZ=function(a){function n(t){(0,p.Z)(this,n),this.options=t}return(0,_.Z)(n,[{key:a,value:function(){return this.asyncIterator()}},{key:"asyncIterator",value:function(){var e=this;return Qa((0,He.Z)().mark(function o(){var s,u,c,l,m,C,T;return(0,He.Z)().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:s=!1,u=!1,F.prev=2,l=ca(e.options.messageStream);case 4:return F.next=6,eo(l.next());case 6:if(!(s=!(m=F.sent).done)){F.next=18;break}return C=m.value,F.next=10,eo(e.options.deserializer(C));case 10:if(void 0!==(T=F.sent)){F.next=13;break}return F.abrupt("continue",15);case 13:return F.next=15,T;case 15:s=!1,F.next=4;break;case 18:F.next=24;break;case 20:F.prev=20,F.t0=F.catch(2),u=!0,c=F.t0;case 24:if(F.prev=24,F.prev=25,!s||null==l.return){F.next=29;break}return F.next=29,eo(l.return());case 29:if(F.prev=29,!u){F.next=32;break}throw c;case 32:return F.finish(29);case 33:return F.finish(24);case 34:case"end":return F.stop()}},o,null,[[2,20,24,34],[25,,29,33]])}))()}}]),n}(Symbol.asyncIterator),bZ=function(a){function n(t){(0,p.Z)(this,n),this.options=t}return(0,_.Z)(n,[{key:a,value:function(){return this.asyncIterator()}},{key:"asyncIterator",value:function(){var e=this;return Qa((0,He.Z)().mark(function o(){var s,u,c,l,m,T;return(0,He.Z)().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:s=!1,u=!1,F.prev=2,l=ca(e.options.inputStream);case 4:return F.next=6,eo(l.next());case 6:if(!(s=!(m=F.sent).done)){F.next=14;break}return T=e.options.serializer(m.value),F.next=11,T;case 11:s=!1,F.next=4;break;case 14:F.next=20;break;case 16:F.prev=16,F.t0=F.catch(2),u=!0,c=F.t0;case 20:if(F.prev=20,F.prev=21,!s||null==l.return){F.next=25;break}return F.next=25,eo(l.return());case 25:if(F.prev=25,!u){F.next=28;break}throw c;case 28:return F.finish(25);case 29:return F.finish(20);case 30:case"end":return F.stop()}},o,null,[[2,16,20,30],[21,,25,29]])}))()}}]),n}(Symbol.asyncIterator),q0=function(n){return new TextDecoder("utf-8").decode(n)},zR="X-Amz-Date",GR="X-Amz-Signature",VR="X-Amz-Security-Token",HR="authorization",qR=zR.toLowerCase(),kZ=[HR,qR,"date"],AZ=GR.toLowerCase(),fP="x-amz-content-sha256",RZ=VR.toLowerCase(),DZ={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},TZ=/^proxy-/,IZ=/^sec-/,pP="AWS4-HMAC-SHA256",OZ="AWS4-HMAC-SHA256-PAYLOAD",KR="aws4_request",$l={},K0=[],hP=function(n,t,e){return"".concat(n,"/").concat(t,"/").concat(e,"/").concat(KR)},NZ=function(){var a=Lt((0,He.Z)().mark(function n(t,e,o,s,u){var c,l,m,C,T,B;return(0,He.Z)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,WR(t,e.secretAccessKey,e.accessKeyId);case 2:if(c=U.sent,!((l="".concat(o,":").concat(s,":").concat(u,":").concat(Wo(c),":").concat(e.sessionToken))in $l)){U.next=6;break}return U.abrupt("return",$l[l]);case 6:for(K0.push(l);K0.length>50;)delete $l[K0.shift()];m="AWS4".concat(e.secretAccessKey),C=0,T=[o,s,u,KR];case 10:if(!(C<T.length)){U.next=18;break}return B=T[C],U.next=14,WR(t,m,B);case 14:m=U.sent;case 15:C++,U.next=10;break;case 18:return U.abrupt("return",$l[l]=m);case 19:case"end":return U.stop()}},n)}));return function(t,e,o,s,u){return a.apply(this,arguments)}}(),WR=function(n,t,e){var o=new n(t);return o.update(Il(e)),o.digest()},XR=function(n,t,e){var c,o=n.headers,s={},u=(0,te.Z)(Object.keys(o).sort());try{for(u.s();!(c=u.n()).done;){var l=c.value;if(null!=o[l]){var m=l.toLowerCase();(m in DZ||null!=t&&t.has(m)||TZ.test(m)||IZ.test(m))&&(!e||e&&!e.has(m))||(s[m]=o[l].trim().replace(/\s+/g," "))}}}catch(C){u.e(C)}finally{u.f()}return s},_c=function(n){return encodeURIComponent(n).replace(/[!'()*]/g,ZZ)},ZZ=function(n){return"%".concat(n.charCodeAt(0).toString(16).toUpperCase())},mP=function(){var a=Lt(function(n,t){var e=n.headers,o=n.body;return(0,He.Z)().mark(function s(){var u,c,l,m;return(0,He.Z)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:u=0,c=Object.keys(e);case 1:if(!(u<c.length)){T.next=8;break}if((l=c[u]).toLowerCase()!==fP){T.next=5;break}return T.abrupt("return",e[l]);case 5:u++,T.next=1;break;case 8:if(null!=o){T.next=12;break}return T.abrupt("return","e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855");case 12:if("string"!=typeof o&&!ArrayBuffer.isView(o)&&!SA(o)){T.next=20;break}return(m=new t).update(Il(o)),T.t0=Wo,T.next=18,m.digest();case 18:return T.t1=T.sent,T.abrupt("return",(0,T.t0)(T.t1));case 20:return T.abrupt("return","UNSIGNED-PAYLOAD");case 21:case"end":return T.stop()}},s)})()});return function(t,e){return a.apply(this,arguments)}}(),jZ=function(n,t){n=n.toLowerCase();for(var e=0,o=Object.keys(t);e<o.length;e++)if(n===o[e].toLowerCase())return!0;return!1},$Z=["headers","query"],QR=function(n){var t=n.headers,e=n.query,o=sP(n,$Z);return(0,b.Z)((0,b.Z)({},o),{},{headers:(0,b.Z)({},t),query:e?UZ(e):void 0})},UZ=function(n){return Object.keys(n).reduce(function(t,e){var o=n[e];return(0,b.Z)((0,b.Z)({},t),{},(0,d.Z)({},e,Array.isArray(o)?(0,y.Z)(o):o))},{})},zZ=function(n){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e="function"==typeof n.clone?n.clone():QR(n),o=e.headers,s=e.query,u=void 0===s?{}:s,c=0,l=Object.keys(o);c<l.length;c++){var m,C=l[c],T=C.toLowerCase();"x-amz-"===T.slice(0,6)&&(null===(m=t.unhoistableHeaders)||void 0===m||!m.has(T))&&(u[C]=o[C],delete o[C])}return(0,b.Z)((0,b.Z)({},n),{},{headers:o,query:u})},JR=function(n){n="function"==typeof n.clone?n.clone():QR(n);for(var t=0,e=Object.keys(n.headers);t<e.length;t++){var o=e[t];kZ.indexOf(o.toLowerCase())>-1&&delete n.headers[o]}return n},wp=function(){function a(n){var t=n.applyChecksum,e=n.credentials,o=n.region,s=n.service,u=n.sha256,c=n.uriEscapePath,l=void 0===c||c;(0,p.Z)(this,a),this.headerMarshaller=new jR(q0,dp),this.service=s,this.sha256=u,this.uriEscapePath=l,this.applyChecksum="boolean"!=typeof t||t,this.regionProvider=yn(o),this.credentialProvider=yn(e)}return(0,_.Z)(a,[{key:"presign",value:(n=Lt(function(e){var o=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,He.Z)().mark(function u(){var c,l,m,C,T,B,F,U,ae,ue,me,Se,we,qe,at,dt,Ot;return(0,He.Z)().wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return l=void 0===(c=s.signingDate)?new Date:c,C=void 0===(m=s.expiresIn)?3600:m,T=s.unsignableHeaders,B=s.unhoistableHeaders,F=s.signableHeaders,U=s.signingRegion,ae=s.signingService,jt.next=3,o.credentialProvider();case 3:if(o.validateResolvedCredentials(ue=jt.sent),null==U){jt.next=9;break}jt.t0=U,jt.next=12;break;case 9:return jt.next=11,o.regionProvider();case 11:jt.t0=jt.sent;case 12:if(me=jt.t0,Se=W0(l),we=Se.longDate,qe=Se.shortDate,!(C>604800)){jt.next=16;break}return jt.abrupt("return",Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future"));case 16:return at=hP(qe,me,ae??o.service),dt=zZ(JR(e),{unhoistableHeaders:B}),ue.sessionToken&&(dt.query[VR]=ue.sessionToken),dt.query["X-Amz-Algorithm"]=pP,dt.query["X-Amz-Credential"]="".concat(ue.accessKeyId,"/").concat(at),dt.query[zR]=we,dt.query["X-Amz-Expires"]=C.toString(10),Ot=XR(dt,T,F),dt.query["X-Amz-SignedHeaders"]=YR(Ot),jt.t1=o,jt.t2=we,jt.t3=at,jt.t4=o.getSigningKey(ue,me,qe,ae),jt.t5=o,jt.t6=dt,jt.t7=Ot,jt.next=34,mP(e,o.sha256);case 34:return jt.t8=jt.sent,jt.t9=jt.t5.createCanonicalRequest.call(jt.t5,jt.t6,jt.t7,jt.t8),jt.next=38,jt.t1.getSignature.call(jt.t1,jt.t2,jt.t3,jt.t4,jt.t9);case 38:return dt.query[GR]=jt.sent,jt.abrupt("return",dt);case 40:case"end":return jt.stop()}},u)})()}),function t(e){return n.apply(this,arguments)})},{key:"sign",value:function(){var n=Lt((0,He.Z)().mark(function e(o,s){return(0,He.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if("string"!=typeof o){c.next=4;break}return c.abrupt("return",this.signString(o,s));case 4:if(!o.headers||!o.payload){c.next=8;break}return c.abrupt("return",this.signEvent(o,s));case 8:if(!o.message){c.next=12;break}return c.abrupt("return",this.signMessage(o,s));case 12:return c.abrupt("return",this.signRequest(o,s));case 13:case"end":return c.stop()}},e,this)}));return function t(e,o){return n.apply(this,arguments)}}()},{key:"signEvent",value:function(){var n=Lt(function(e,o){var s=this,u=e.headers,c=e.payload,l=o.signingDate,m=void 0===l?new Date:l,C=o.priorSignature,T=o.signingRegion,B=o.signingService;return(0,He.Z)().mark(function F(){var U,ae,me,Se,we,qe,at,dt;return(0,He.Z)().wrap(function(ft){for(;;)switch(ft.prev=ft.next){case 0:if(null==T){ft.next=4;break}ft.t0=T,ft.next=7;break;case 4:return ft.next=6,s.regionProvider();case 6:ft.t0=ft.sent;case 7:return U=ft.t0,ae=W0(m),me=ae.longDate,Se=hP(ae.shortDate,U,B??s.service),ft.next=12,mP({headers:{},body:c},s.sha256);case 12:return we=ft.sent,(qe=new s.sha256).update(u),ft.t1=Wo,ft.next=18,qe.digest();case 18:return ft.t2=ft.sent,at=(0,ft.t1)(ft.t2),dt=[OZ,me,Se,C,at,we].join("\n"),ft.abrupt("return",s.signString(dt,{signingDate:m,signingRegion:U,signingService:B}));case 22:case"end":return ft.stop()}},F)})()});return function t(e,o){return n.apply(this,arguments)}}()},{key:"signMessage",value:function(){var n=Lt(function(e,o){var s=this,u=o.signingDate,c=void 0===u?new Date:u,l=o.signingRegion,m=o.signingService;return(0,He.Z)().mark(function C(){var T;return(0,He.Z)().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return T=s.signEvent({headers:s.headerMarshaller.format(e.message.headers),payload:e.message.body},{signingDate:c,signingRegion:l,signingService:m,priorSignature:e.priorSignature}),F.abrupt("return",T.then(function(U){return{message:e.message,signature:U}}));case 2:case"end":return F.stop()}},C)})()});return function t(e,o){return n.apply(this,arguments)}}()},{key:"signString",value:function(){var n=Lt(function(e){var o=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=s.signingDate,c=void 0===u?new Date:u,l=s.signingRegion,m=s.signingService;return(0,He.Z)().mark(function C(){var T,B,F,U,ae;return(0,He.Z)().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return me.next=2,o.credentialProvider();case 2:if(o.validateResolvedCredentials(T=me.sent),null==l){me.next=8;break}me.t0=l,me.next=11;break;case 8:return me.next=10,o.regionProvider();case 10:me.t0=me.sent;case 11:return B=me.t0,F=W0(c),U=F.shortDate,me.t1=o.sha256,me.next=16,o.getSigningKey(T,B,U,m);case 16:return me.t2=me.sent,(ae=new me.t1(me.t2)).update(Il(e)),me.t3=Wo,me.next=22,ae.digest();case 22:return me.t4=me.sent,me.abrupt("return",(0,me.t3)(me.t4));case 24:case"end":return me.stop()}},C)})()});return function t(e){return n.apply(this,arguments)}}()},{key:"signRequest",value:function(){var n=Lt(function(e){var o=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=s.signingDate,c=void 0===u?new Date:u,l=s.signableHeaders,m=s.unsignableHeaders,C=s.signingRegion,T=s.signingService;return(0,He.Z)().mark(function B(){var F,U,ae,ue,me,Se,we,qe,at,dt;return(0,He.Z)().wrap(function(ft){for(;;)switch(ft.prev=ft.next){case 0:return ft.next=2,o.credentialProvider();case 2:if(o.validateResolvedCredentials(F=ft.sent),null==C){ft.next=8;break}ft.t0=C,ft.next=11;break;case 8:return ft.next=10,o.regionProvider();case 10:ft.t0=ft.sent;case 11:return U=ft.t0,ae=JR(e),ue=W0(c),me=ue.longDate,we=hP(Se=ue.shortDate,U,T??o.service),ae.headers[qR]=me,F.sessionToken&&(ae.headers[RZ]=F.sessionToken),ft.next=19,mP(ae,o.sha256);case 19:return qe=ft.sent,!jZ(fP,ae.headers)&&o.applyChecksum&&(ae.headers[fP]=qe),at=XR(ae,m,l),ft.next=24,o.getSignature(me,we,o.getSigningKey(F,U,Se,T),o.createCanonicalRequest(ae,at,qe));case 24:return dt=ft.sent,ae.headers[HR]="".concat(pP," ")+"Credential=".concat(F.accessKeyId,"/").concat(we,", ")+"SignedHeaders=".concat(YR(at),", ")+"Signature=".concat(dt),ft.abrupt("return",ae);case 27:case"end":return ft.stop()}},B)})()});return function t(e){return n.apply(this,arguments)}}()},{key:"createCanonicalRequest",value:function(t,e,o){var s=Object.keys(e).sort();return"".concat(t.method,"\n").concat(this.getCanonicalPath(t),"\n").concat(function(n){var c,t=n.query,e=void 0===t?{}:t,o=[],s={},u=(0,te.Z)(Object.keys(e).sort());try{var l=function(){var T=c.value;if(T.toLowerCase()===AZ)return"continue";o.push(T);var B=e[T];"string"==typeof B?s[T]="".concat(_c(T),"=").concat(_c(B)):Array.isArray(B)&&(s[T]=B.slice(0).sort().reduce(function(F,U){return F.concat(["".concat(_c(T),"=").concat(_c(U))])},[]).join("&"))};for(u.s();!(c=u.n()).done;)l()}catch(C){u.e(C)}finally{u.f()}return o.map(function(C){return s[C]}).filter(function(C){return C}).join("&")}(t),"\n").concat(s.map(function(u){return"".concat(u,":").concat(e[u])}).join("\n"),"\n\n").concat(s.join(";"),"\n").concat(o)}},{key:"createStringToSign",value:function(){var n=Lt((0,He.Z)().mark(function e(o,s,u){var c,l;return(0,He.Z)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return(c=new this.sha256).update(Il(u)),C.next=4,c.digest();case 4:return l=C.sent,C.abrupt("return","".concat(pP,"\n").concat(o,"\n").concat(s,"\n").concat(Wo(l)));case 6:case"end":return C.stop()}},e,this)}));return function t(e,o,s){return n.apply(this,arguments)}}()},{key:"getCanonicalPath",value:function(t){var e=t.path;if(this.uriEscapePath){var u,o=[],s=(0,te.Z)(e.split("/"));try{for(s.s();!(u=s.n()).done;){var c=u.value;0!==c?.length&&"."!==c&&(".."===c?o.pop():o.push(c))}}catch(C){s.e(C)}finally{s.f()}var l="".concat(null!=e&&e.startsWith("/")?"/":"").concat(o.join("/")).concat(o.length>0&&null!=e&&e.endsWith("/")?"/":"");return encodeURIComponent(l).replace(/%2F/g,"/")}return e}},{key:"getSignature",value:function(){var n=Lt((0,He.Z)().mark(function e(o,s,u,c){var l,m;return(0,He.Z)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,this.createStringToSign(o,s,c);case 2:return l=T.sent,T.t0=this.sha256,T.next=6,u;case 6:return T.t1=T.sent,(m=new T.t0(T.t1)).update(Il(l)),T.t2=Wo,T.next=12,m.digest();case 12:return T.t3=T.sent,T.abrupt("return",(0,T.t2)(T.t3));case 14:case"end":return T.stop()}},e,this)}));return function t(e,o,s,u){return n.apply(this,arguments)}}()},{key:"getSigningKey",value:function(t,e,o,s){return NZ(this.sha256,t,o,e,s||this.service)}},{key:"validateResolvedCredentials",value:function(t){if("object"!=typeof t||"string"!=typeof t.accessKeyId||"string"!=typeof t.secretAccessKey)throw new Error("Resolved credential object is not valid")}}]),a;var n}(),W0=function(n){var t=function(n){return function(n){return"number"==typeof n?new Date(1e3*n):"string"==typeof n?Number(n)?new Date(1e3*Number(n)):new Date(n):n}(n).toISOString().replace(/\.\d{3}Z$/,"Z")}(n).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.slice(0,8)}},YR=function(n){return Object.keys(n).sort().join(";")},eD=function(n){var l,t=n.credentials?tD(n.credentials):n.credentialDefaultProvider(n),e=n.signingEscapePath,o=void 0===e||e,s=n.systemClockOffset,u=void 0===s?n.systemClockOffset||0:s,c=n.sha256;return l=n.signer?yn(n.signer):n.regionInfoProvider?function(){return yn(n.region)().then(function(){var C=Lt((0,He.Z)().mark(function T(B){return(0,He.Z)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.t1=n,U.t2=B,U.next=4,n.useFipsEndpoint();case 4:return U.t3=U.sent,U.next=7,n.useDualstackEndpoint();case 7:return U.t4=U.sent,U.t5={useFipsEndpoint:U.t3,useDualstackEndpoint:U.t4},U.next=11,U.t1.regionInfoProvider.call(U.t1,U.t2,U.t5);case 11:if(U.t0=U.sent,U.t0){U.next=14;break}U.t0={};case 14:return U.t6=U.t0,U.t7=B,U.abrupt("return",[U.t6,U.t7]);case 17:case"end":return U.stop()}},T)}));return function(T){return C.apply(this,arguments)}}()).then(function(C){var T=(0,g.Z)(C,2),B=T[0],ae=B.signingService;n.signingRegion=n.signingRegion||B.signingRegion||T[1],n.signingName=n.signingName||ae||n.serviceId;var ue=(0,b.Z)((0,b.Z)({},n),{},{credentials:t,region:n.signingRegion,service:n.signingName,sha256:c,uriEscapePath:o});return new(n.signerConstructor||wp)(ue)})}:function(){var m=Lt((0,He.Z)().mark(function C(T){var B,F,U;return(0,He.Z)().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return me.t0=Object,me.t1={},me.t2=n.signingName||n.defaultSigningName,me.next=5,yn(n.region)();case 5:return me.t3=me.sent,me.t4={},me.t5={name:"sigv4",signingName:me.t2,signingRegion:me.t3,properties:me.t4},me.t6=T,T=me.t0.assign.call(me.t0,me.t1,me.t5,me.t6),B=T.signingRegion,F=T.signingName,n.signingRegion=n.signingRegion||B,n.signingName=n.signingName||F||n.serviceId,U=(0,b.Z)((0,b.Z)({},n),{},{credentials:t,region:n.signingRegion,service:n.signingName,sha256:c,uriEscapePath:o}),me.abrupt("return",new(n.signerConstructor||wp)(U));case 17:case"end":return me.stop()}},C)}));return function(T){return m.apply(this,arguments)}}(),(0,b.Z)((0,b.Z)({},n),{},{systemClockOffset:u,signingEscapePath:o,credentials:t,signer:l})},tD=function(n){return"function"==typeof n?hR(n,function(t){return void 0!==t.expiration&&t.expiration.getTime()-Date.now()<3e5},function(t){return void 0!==t.expiration}):yn(n)},nD=function(n){return new Date(Date.now()+n)},rD=function(n,t){var e=Date.parse(n);return function(n,t){return Math.abs(nD(t).getTime()-n)>=3e5}(e,t)?e-Date.now():t},iD=function(n){var t,e,o;return fp.isInstance(n)?null!==(t=null===(e=n.headers)||void 0===e?void 0:e.date)&&void 0!==t?t:null===(o=n.headers)||void 0===o?void 0:o.Date:void 0},WZ={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0};function oD(a){return(0,b.Z)((0,b.Z)({},a),{},{customUserAgent:"string"==typeof a.customUserAgent?[[a.customUserAgent]]:a.customUserAgent})}const aD=JSON.parse('{"partitions":[{"id":"aws","outputs":{"dnsSuffix":"amazonaws.com","dualStackDnsSuffix":"api.aws","name":"aws","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^(us|eu|ap|sa|ca|me|af)\\\\-\\\\w+\\\\-\\\\d+$","regions":{"af-south-1":{"description":"Africa (Cape Town)"},"ap-east-1":{"description":"Asia Pacific (Hong Kong)"},"ap-northeast-1":{"description":"Asia Pacific (Tokyo)"},"ap-northeast-2":{"description":"Asia Pacific (Seoul)"},"ap-northeast-3":{"description":"Asia Pacific (Osaka)"},"ap-south-1":{"description":"Asia Pacific (Mumbai)"},"ap-south-2":{"description":"Asia Pacific (Hyderabad)"},"ap-southeast-1":{"description":"Asia Pacific (Singapore)"},"ap-southeast-2":{"description":"Asia Pacific (Sydney)"},"ap-southeast-3":{"description":"Asia Pacific (Jakarta)"},"ap-southeast-4":{"description":"Asia Pacific (Melbourne)"},"aws-global":{"description":"AWS Standard global region"},"ca-central-1":{"description":"Canada (Central)"},"eu-central-1":{"description":"Europe (Frankfurt)"},"eu-central-2":{"description":"Europe (Zurich)"},"eu-north-1":{"description":"Europe (Stockholm)"},"eu-south-1":{"description":"Europe (Milan)"},"eu-south-2":{"description":"Europe (Spain)"},"eu-west-1":{"description":"Europe (Ireland)"},"eu-west-2":{"description":"Europe (London)"},"eu-west-3":{"description":"Europe (Paris)"},"me-central-1":{"description":"Middle East (UAE)"},"me-south-1":{"description":"Middle East (Bahrain)"},"sa-east-1":{"description":"South America (Sao Paulo)"},"us-east-1":{"description":"US East (N. Virginia)"},"us-east-2":{"description":"US East (Ohio)"},"us-west-1":{"description":"US West (N. California)"},"us-west-2":{"description":"US West (Oregon)"}}},{"id":"aws-cn","outputs":{"dnsSuffix":"amazonaws.com.cn","dualStackDnsSuffix":"api.amazonwebservices.com.cn","name":"aws-cn","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^cn\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-cn-global":{"description":"AWS China global region"},"cn-north-1":{"description":"China (Beijing)"},"cn-northwest-1":{"description":"China (Ningxia)"}}},{"id":"aws-us-gov","outputs":{"dnsSuffix":"amazonaws.com","dualStackDnsSuffix":"api.aws","name":"aws-us-gov","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^us\\\\-gov\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-us-gov-global":{"description":"AWS GovCloud (US) global region"},"us-gov-east-1":{"description":"AWS GovCloud (US-East)"},"us-gov-west-1":{"description":"AWS GovCloud (US-West)"}}},{"id":"aws-iso","outputs":{"dnsSuffix":"c2s.ic.gov","dualStackDnsSuffix":"c2s.ic.gov","name":"aws-iso","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-iso\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-global":{"description":"AWS ISO (US) global region"},"us-iso-east-1":{"description":"US ISO East"},"us-iso-west-1":{"description":"US ISO WEST"}}},{"id":"aws-iso-b","outputs":{"dnsSuffix":"sc2s.sgov.gov","dualStackDnsSuffix":"sc2s.sgov.gov","name":"aws-iso-b","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-isob\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-b-global":{"description":"AWS ISOB (US) global region"},"us-isob-east-1":{"description":"US ISOB East (Ohio)"}}},{"id":"aws-iso-e","outputs":{"dnsSuffix":"cloud.adc-e.uk","dualStackDnsSuffix":"cloud.adc-e.uk","name":"aws-iso-e","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^eu\\\\-isoe\\\\-\\\\w+\\\\-\\\\d+$","regions":{}}],"version":"1.1"}');var sD=aD,uD="",QZ=function(n){var s,e=sD.partitions,o=(0,te.Z)(e);try{for(o.s();!(s=o.n()).done;)for(var u=s.value,l=u.outputs,m=0,C=Object.entries(u.regions);m<C.length;m++){var T=(0,g.Z)(C[m],2),F=T[1];if(T[0]===n)return(0,b.Z)((0,b.Z)({},l),F)}}catch(qe){o.e(qe)}finally{o.f()}var ae,U=(0,te.Z)(e);try{for(U.s();!(ae=U.n()).done;){var ue=ae.value,Se=ue.outputs;if(new RegExp(ue.regionRegex).test(n))return(0,b.Z)({},Se)}}catch(qe){U.e(qe)}finally{U.f()}var we=e.find(function(qe){return"aws"===qe.id});if(!we)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return(0,b.Z)({},we.outputs)},cD=function(n){sD=n,uD=arguments.length>1&&void 0!==arguments[1]?arguments[1]:""},JZ=function(){cD(aD,"")},lD=function(){return uD},Sp="endpoints";function mu(a){return"object"!=typeof a||null==a?a:"ref"in a?"$".concat(mu(a.ref)):"fn"in a?"".concat(a.fn,"(").concat((a.argv||[]).map(mu).join(", "),")"):JSON.stringify(a,null,2)}var X0,Xo=function(a){(0,G.Z)(t,a);var n=(0,H.Z)(t);function t(e){var o;return(0,p.Z)(this,t),(o=n.call(this,e)).name="EndpointError",o}return(0,_.Z)(t)}((0,V.Z)(Error)),YZ=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),dD=function(n){return YZ.test(n)||n.startsWith("[")&&n.endsWith("]")},eL=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),fD=function a(n){if(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1]))return eL.test(n);var s,e=n.split("."),o=(0,te.Z)(e);try{for(o.s();!(s=o.n()).done;)if(!a(s.value))return!1}catch(c){o.e(c)}finally{o.f()}return!0},tL=function a(n){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){var o,e=(0,te.Z)(n.split("."));try{for(e.s();!(o=e.n()).done;)if(!a(o.value))return!1}catch(u){e.e(u)}finally{e.f()}return!0}return!(!fD(n)||n.length<3||n.length>63||n!==n.toLowerCase()||dD(n))},nL=function(n){var t=n.split(":");if(t.length<6)return null;var e=(0,Ti.Z)(t),o=e[0],s=e[1],u=e[2],c=e[3],l=e[4],m=e.slice(5);return"arn"!==o||""===s||""===u||""===m[0]?null:{partition:s,service:u,region:c,accountId:l,resourceId:m[0].includes("/")?m[0].split("/"):m}},rL=function(n,t){return n===t},pD=function(n,t){return function(n){var s,t=n.split("."),e=[],o=(0,te.Z)(t);try{for(o.s();!(s=o.n()).done;){var u=s.value,c=u.indexOf("[");if(-1!==c){if(u.indexOf("]")!==u.length-1)throw new Xo("Path: '".concat(n,"' does not end with ']'"));var l=u.slice(c+1,-1);if(Number.isNaN(parseInt(l)))throw new Xo("Invalid array index: '".concat(l,"' in path: '").concat(n,"'"));0!==c&&e.push(u.slice(0,c)),e.push(l)}else e.push(u)}}catch(m){o.e(m)}finally{o.f()}return e}(t).reduce(function(e,o){if("object"!=typeof e)throw new Xo("Index '".concat(o,"' in '").concat(t,"' not found in '").concat(JSON.stringify(n),"'"));return Array.isArray(e)?e[parseInt(o)]:e[o]},n)},oL=function(n){return null!=n},aL=function(n){return!n},gu=function(){return(gu=gu||{}).HTTP="http",gu.HTTPS="https",gu}(),gP=((0,d.Z)(X0={},gu.HTTP,80),(0,d.Z)(X0,gu.HTTPS,443),X0),sL=function(n){var t=function(){try{if(n instanceof URL)return n;if("object"==typeof n&&"hostname"in n){var F=n.hostname,U=n.port,ae=n.protocol,me=n.path,Se=void 0===me?"":me,we=n.query,qe=void 0===we?{}:we,at=new URL("".concat(void 0===ae?"":ae,"//").concat(F).concat(U?":".concat(U):"").concat(Se));return at.search=Object.entries(qe).map(function(dt){var Ot=(0,g.Z)(dt,2),jt=Ot[1];return"".concat(Ot[0],"=").concat(jt)}).join("&"),at}return new URL(n)}catch{return null}}();if(!t)return console.error("Unable to parse ".concat(JSON.stringify(n)," as a whatwg URL.")),null;var e=t.href,o=t.host,s=t.hostname,u=t.pathname;if(t.search)return null;var m=t.protocol.slice(0,-1);if(!Object.values(gu).includes(m))return null;var C=dD(s),T=e.includes("".concat(o,":").concat(gP[m]))||"string"==typeof n&&n.includes("".concat(o,":").concat(gP[m]));return{scheme:m,authority:"".concat(o).concat(T?":".concat(gP[m]):""),path:u,normalizedPath:u.endsWith("/")?u:"".concat(u,"/"),isIp:C}},uL=function(n,t){return n===t},cL=function(n,t,e,o){return t>=e||n.length<e?null:o?n.substring(n.length-e,n.length-t):n.substring(t,e)},lL=function(n){return encodeURIComponent(n).replace(/[!*'()]/g,function(t){return"%".concat(t.charCodeAt(0).toString(16).toUpperCase())})},hD=function(n,t){for(var e=[],o=(0,b.Z)((0,b.Z)({},t.endpointParams),t.referenceRecord),s=0;s<n.length;){var u=n.indexOf("{",s);if(-1===u){e.push(n.slice(s));break}e.push(n.slice(s,u));var c=n.indexOf("}",u);if(-1===c){e.push(n.slice(u));break}"{"===n[u+1]&&"}"===n[c+1]&&(e.push(n.slice(u+1,c)),s=c+2);var l=n.substring(u+1,c);if(l.includes("#")){var m=l.split("#"),C=(0,g.Z)(m,2);e.push(pD(o[C[0]],C[1]))}else e.push(o[l]);s=c+1}return e.join("")},Q0=function(n,t,e){if("string"==typeof n)return hD(n,e);if(n.fn)return mD(n,e);if(n.ref)return function(n,t){var e=n.ref;return(0,b.Z)((0,b.Z)({},t.endpointParams),t.referenceRecord)[e]}(n,e);throw new Xo("'".concat(t,"': ").concat(String(n)," is not a string, function or reference."))},mD=function(n,t){var e=n.fn,s=n.argv.map(function(u){return["boolean","number"].includes(typeof u)?u:Q0(u,"arg",t)});return e.split(".").reduce(function(u,c){return u[c]},q).apply(void 0,(0,y.Z)(s))},fL=["assign"],pL=function(n,t){var e,o,s=n.assign,u=sP(n,fL);if(s&&s in t.referenceRecord)throw new Xo("'".concat(s,"' is already defined in Reference Record."));var c=mD(u,t);return null===(e=t.logger)||void 0===e||null===(o=e.debug)||void 0===o||o.call(e,Sp,"evaluateCondition: ".concat(mu(u)," = ").concat(mu(c))),(0,b.Z)({result:""===c||!!c},null!=s&&{toAssign:{name:s,value:c}})},vP=function(){var s,t=arguments.length>1?arguments[1]:void 0,e={},o=(0,te.Z)(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]);try{for(o.s();!(s=o.n()).done;){var C,T,B,c=pL(s.value,(0,b.Z)((0,b.Z)({},t),{},{referenceRecord:(0,b.Z)((0,b.Z)({},t.referenceRecord),e)})),l=c.result,m=c.toAssign;if(!l)return{result:l};m&&(e[m.name]=m.value,null===(C=t.logger)||void 0===C||null===(T=(B=C).debug)||void 0===T||T.call(B,Sp,"assign: ".concat(m.name," := ").concat(mu(m.value))))}}catch(F){o.e(F)}finally{o.f()}return{result:!0,referenceRecord:e}},hL=function(n,t){return Object.entries(n).reduce(function(e,o){var s=(0,g.Z)(o,2),u=s[0],c=s[1];return(0,b.Z)((0,b.Z)({},e),{},(0,d.Z)({},u,c.map(function(l){var m=Q0(l,"Header value entry",t);if("string"!=typeof m)throw new Xo("Header '".concat(u,"' value '").concat(m,"' is not a string"));return m})))},{})},mL=function a(n,t){if(Array.isArray(n))return n.map(function(e){return a(e,t)});switch(typeof n){case"string":return hD(n,t);case"object":if(null===n)throw new Xo("Unexpected endpoint property: ".concat(n));return gD(n,t);case"boolean":return n;default:throw new Xo("Unexpected endpoint property type: ".concat(typeof n))}},gD=function(n,t){return Object.entries(n).reduce(function(e,o){var s=(0,g.Z)(o,2),u=s[0],c=s[1];return(0,b.Z)((0,b.Z)({},e),{},(0,d.Z)({},u,mL(c,t)))},{})},gL=function(n,t){var e=Q0(n,"Endpoint URL",t);if("string"==typeof e)try{return new URL(e)}catch(o){throw console.error("Failed to construct URL with ".concat(e),o),o}throw new Xo("Endpoint URL must be a string, got ".concat(typeof e))},vL=function(n,t){var e,o,u=n.endpoint,c=vP(n.conditions,t),m=c.referenceRecord;if(c.result){var C=(0,b.Z)((0,b.Z)({},t),{},{referenceRecord:(0,b.Z)((0,b.Z)({},t.referenceRecord),m)}),T=u.url,B=u.properties,F=u.headers;return null===(e=t.logger)||void 0===e||null===(o=e.debug)||void 0===o||o.call(e,Sp,"Resolving endpoint from template: ".concat(mu(u))),(0,b.Z)((0,b.Z)((0,b.Z)({},null!=F&&{headers:hL(F,C)}),null!=B&&{properties:gD(B,C)}),{},{url:gL(T,C)})}},_L=function(n,t){var o=n.error,s=vP(n.conditions,t),c=s.referenceRecord;if(s.result)throw new Xo(Q0(o,"Error",(0,b.Z)((0,b.Z)({},t),{},{referenceRecord:(0,b.Z)((0,b.Z)({},t.referenceRecord),c)})))},yL=function(n,t){var o=n.rules,s=vP(n.conditions,t),c=s.referenceRecord;if(s.result)return vD(o,(0,b.Z)((0,b.Z)({},t),{},{referenceRecord:(0,b.Z)((0,b.Z)({},t.referenceRecord),c)}))},vD=function(n,t){var o,e=(0,te.Z)(n);try{for(e.s();!(o=e.n()).done;){var s=o.value;if("endpoint"===s.type){var u=vL(s,t);if(u)return u}else if("error"===s.type)_L(s,t);else{if("tree"!==s.type)throw new Xo("Unknown endpoint rule: ".concat(s));var c=yL(s,t);if(c)return c}}}catch(l){e.e(l)}finally{e.f()}throw new Xo("Rules evaluation failed")},_D=function(n,t){var e,o,s,u,c,l=t.endpointParams,m=t.logger,C=n.parameters,T=n.rules;null===(e=t.logger)||void 0===e||null===(o=e.debug)||void 0===o||o.call(e,"".concat(Sp," Initial EndpointParams: ").concat(mu(l)));var B=Object.entries(C).filter(function(tn){return null!=(0,g.Z)(tn,2)[1].default}).map(function(tn){var Vt=(0,g.Z)(tn,2);return[Vt[0],Vt[1].default]});if(B.length>0){var U,F=(0,te.Z)(B);try{for(F.s();!(U=F.n()).done;){var ae,ue=(0,g.Z)(U.value,2),me=ue[0];l[me]=null!==(ae=l[me])&&void 0!==ae?ae:ue[1]}}catch(tn){F.e(tn)}finally{F.f()}}var at,we=Object.entries(C).filter(function(tn){return(0,g.Z)(tn,2)[1].required}).map(function(tn){return(0,g.Z)(tn,1)[0]}),qe=(0,te.Z)(we);try{for(qe.s();!(at=qe.n()).done;){var dt=at.value;if(null==l[dt])throw new Xo("Missing required parameter: '".concat(dt,"'"))}}catch(tn){qe.e(tn)}finally{qe.f()}var Ot=vD(T,{endpointParams:l,logger:m,referenceRecord:{}});if(null!==(s=t.endpointParams)&&void 0!==s&&s.Endpoint)try{var ft=new URL(t.endpointParams.Endpoint),Ut=ft.port;Ot.url.protocol=ft.protocol,Ot.url.port=Ut}catch{}return null===(u=t.logger)||void 0===u||null===(c=u.debug)||void 0===c||c.call(u,"".concat(Sp," Resolved endpoint: ").concat(mu(Ot))),Ot},yD="user-agent",_P="x-amz-user-agent",xL=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,bL=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,xP=function(n){var t,e=n[0].split("/").map(function(l){return l.replace(xL,"-")}).join("/"),o=null===(t=n[1])||void 0===t?void 0:t.replace(bL,"-"),s=e.indexOf("/"),u=e.substring(0,s),c=e.substring(s+1);return"api"===u&&(c=c.toLowerCase()),[u,c,o].filter(function(l){return l&&l.length>0}).reduce(function(l,m,C){switch(C){case 0:return m;case 1:return"".concat(l,"/").concat(m);default:return"".concat(l,"#").concat(m)}},"")},wL={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},CD=function(n){return{applyToStack:function(e){e.add(function(n){return function(t,e){return function(){var o=Lt((0,He.Z)().mark(function s(u){var c,l,m,C,T,B,F,U,ae,ue;return(0,He.Z)().wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:if(ir.isInstance(m=u.request)){Se.next=3;break}return Se.abrupt("return",t(u));case 3:return C=m.headers,T=(null==e||null===(c=e.userAgent)||void 0===c?void 0:c.map(xP))||[],Se.next=7,n.defaultUserAgentProvider();case 7:return B=Se.sent.map(xP),F=(null==n||null===(l=n.customUserAgent)||void 0===l?void 0:l.map(xP))||[],U=lD(),ae=(U?[U]:[]).concat([].concat((0,y.Z)(B),(0,y.Z)(T),(0,y.Z)(F))).join(" "),ue=[].concat((0,y.Z)(B.filter(function(we){return we.startsWith("aws-sdk-")})),(0,y.Z)(F)).join(" "),"browser"!==n.runtime?(ue&&(C[_P]=C[_P]?"".concat(C[yD]," ").concat(ue):ue),C[yD]=ae):C[_P]=ae,Se.abrupt("return",t((0,b.Z)((0,b.Z)({},u),{},{request:m})));case 14:case"end":return Se.stop()}},s)}));return function(s){return o.apply(this,arguments)}}()}}(n),wL)}}};var PL=S(46513);function kL(a){var e,n=[],t=(0,te.Z)(Object.keys(a).sort());try{for(t.s();!(e=t.n()).done;){var o=e.value,s=a[o];if(o=_c(o),Array.isArray(s))for(var u=0,c=s.length;u<c;u++)n.push("".concat(o,"=").concat(_c(s[u])));else{var l=o;(s||"string"==typeof s)&&(l+="=".concat(_c(s))),n.push(l)}}}catch(m){t.e(m)}finally{t.f()}return n.join("&")}function AL(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise(function(n,t){a&&setTimeout(function(){var e=new Error("Request did not complete within ".concat(a," ms"));e.name="TimeoutError",t(e)},a)})}for(var wD=function(){function a(n){(0,p.Z)(this,a),"function"==typeof n?this.configProvider=n().then(function(t){return t||{}}):(this.config=n??{},this.configProvider=Promise.resolve(this.config))}return(0,_.Z)(a,[{key:"destroy",value:function(){}},{key:"handle",value:(n=Lt(function(e){var o=this,u=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).abortSignal;return(0,He.Z)().mark(function c(){var l,m,C,T,B,F,U,ae,ue,me,Se,we,at,dt,Ot;return(0,He.Z)().wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:if(o.config){jt.next=4;break}return jt.next=3,o.configProvider;case 3:o.config=jt.sent;case 4:if(l=o.config.requestTimeout,null==u||!u.aborted){jt.next=9;break}return(m=new Error("Request aborted")).name="AbortError",jt.abrupt("return",Promise.reject(m));case 9:return C=e.path,(T=kL(e.query||{}))&&(C+="?".concat(T)),e.fragment&&(C+="#".concat(e.fragment)),B="",(null!=e.username||null!=e.password)&&(ae=null!==(F=e.username)&&void 0!==F?F:"",ue=null!==(U=e.password)&&void 0!==U?U:"",B="".concat(ae,":").concat(ue,"@")),me=e.port,Se=e.method,we="".concat(e.protocol,"//").concat(B).concat(e.hostname).concat(me?":".concat(me):"").concat(C),at={body:"GET"===Se||"HEAD"===Se?void 0:e.body,headers:new Headers(e.headers),method:Se},typeof AbortController<"u"&&(at.signal=u),dt=new Request(we,at),Ot=[fetch(dt).then(function(Ut){var qt,Vt={},zt=(0,te.Z)(Ut.headers.entries());try{for(zt.s();!(qt=zt.n()).done;){var qn=qt.value;Vt[qn[0]]=qn[1]}}catch(lo){zt.e(lo)}finally{zt.f()}return null!=Ut.body?{response:new fp({headers:Vt,reason:Ut.statusText,statusCode:Ut.status,body:Ut.body})}:Ut.blob().then(function(lo){return{response:new fp({headers:Vt,reason:Ut.statusText,statusCode:Ut.status,body:lo})}})}),AL(l)],u&&Ot.push(new Promise(function(Ut,tn){u.onabort=function(){var Vt=new Error("Request aborted");Vt.name="AbortError",tn(Vt)}})),jt.abrupt("return",Promise.race(Ot));case 24:case"end":return jt.stop()}},c)})()}),function t(e){return n.apply(this,arguments)})}]),a;var n}(),vu={},Ul=new Array(64),Ep=0,SD="A".charCodeAt(0),RL="Z".charCodeAt(0);Ep+SD<=RL;Ep++){var ED=String.fromCharCode(Ep+SD);vu[ED]=Ep,Ul[Ep]=ED}for(var J0=0,PD="a".charCodeAt(0),DL="z".charCodeAt(0);J0+PD<=DL;J0++){var kD=String.fromCharCode(J0+PD),AD=J0+26;vu[kD]=AD,Ul[AD]=kD}for(var zl=0;zl<10;zl++){vu[zl.toString(10)]=zl+52;var RD=zl.toString(10),DD=zl+52;vu[RD]=DD,Ul[DD]=RD}vu["+"]=62,Ul[62]="+",vu["/"]=63,Ul[63]="/";var bP=function(n){var t=n.length/4*3;"=="===n.slice(-2)?t-=2:"="===n.slice(-1)&&t--;for(var e=new ArrayBuffer(t),o=new DataView(e),s=0;s<n.length;s+=4){for(var u=0,c=0,l=s,m=s+3;l<=m;l++)if("="!==n[l]){if(!(n[l]in vu))throw new TypeError("Invalid character ".concat(n[l]," in base64 string."));u|=vu[n[l]]<<6*(m-l),c+=6}else u>>=6;var C=s/4*3;u>>=c%8;for(var T=Math.floor(c/8),B=0;B<T;B++){var F=8*(T-B-1);o.setUint8(C+B,(u&255<<F)>>F)}}return new Uint8Array(e)};function CP(a){for(var n="",t=0;t<a.length;t+=3){for(var e=0,o=0,s=t,u=Math.min(t+3,a.length);s<u;s++)e|=a[s]<<8*(u-s-1),o+=8;var c=Math.ceil(o/6);e<<=6*c-o;for(var l=1;l<=c;l++){var m=6*(c-l);n+=Ul[(e&63<<m)>>m]}n+="==".slice(0,4-c)}return n}var wP=function(n){return"function"==typeof Blob&&n instanceof Blob?function IL(a){return SP.apply(this,arguments)}(n):function OL(a){return EP.apply(this,arguments)}(n)};function SP(){return(SP=Lt((0,He.Z)().mark(function a(n){var e;return(0,He.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,FL(n);case 2:return e=bP(s.sent),s.abrupt("return",new Uint8Array(e));case 5:case"end":return s.stop()}},a)}))).apply(this,arguments)}function EP(){return(EP=Lt((0,He.Z)().mark(function a(n){var t,e,o,s,u,c,l;return(0,He.Z)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:t=new Uint8Array(0),e=n.getReader(),o=!1;case 3:if(o){C.next=13;break}return C.next=6,e.read();case 6:u=(s=C.sent).done,(c=s.value)&&(l=t,(t=new Uint8Array(l.length+c.length)).set(l),t.set(c,l.length)),o=u,C.next=3;break;case 13:return C.abrupt("return",t);case 14:case"end":return C.stop()}},a)}))).apply(this,arguments)}function FL(a){return new Promise(function(n,t){var e=new FileReader;e.onloadend=function(){var o;if(2!==e.readyState)return t(new Error("Reader aborted too early"));var s=null!==(o=e.result)&&void 0!==o?o:"",u=s.indexOf(",");n(s.substring(u>-1?u+1:s.length))},e.onabort=function(){return t(new Error("Read aborted"))},e.onerror=function(){return t(e.error)},e.readAsDataURL(a)})}var Y0,kp,ex,tx,nx,rx,ix,ox,Ap,ax,Rp,TD=function(n){return function(){return Promise.reject(n)}},ID=function(n){if("string"==typeof n){for(var t=n.length,e=t-1;e>=0;e--){var o=n.charCodeAt(e);o>127&&o<=2047?t++:o>2047&&o<=65535&&(t+=2),o>=56320&&o<=57343&&e--}return t}if("number"==typeof n.byteLength)return n.byteLength;if("number"==typeof n.size)return n.size;throw new Error("Body Length computation failed for ".concat(n))},ML=S(93962),OD=S.n(ML),FD=function(n){var t=n.serviceId,e=n.clientVersion;return Lt((0,He.Z)().mark(function o(){var s,u,c,l,m,C,T,B,F,U;return(0,He.Z)().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return F=typeof window<"u"&&null!==(s=window)&&void 0!==s&&null!==(u=s.navigator)&&void 0!==u&&u.userAgent?OD().parse(window.navigator.userAgent):void 0,U=[["aws-sdk-js",e],["ua","2.0"],["os/".concat((null==F||null===(c=F.os)||void 0===c?void 0:c.name)||"other"),null==F||null===(l=F.os)||void 0===l?void 0:l.version],["lang/js"],["md/browser","".concat(null!==(m=null==F||null===(C=F.browser)||void 0===C?void 0:C.name)&&void 0!==m?m:"unknown","_").concat(null!==(T=null==F||null===(B=F.browser)||void 0===B?void 0:B.version)&&void 0!==T?T:"unknown")]],t&&U.push(["api/".concat(t),e]),ue.abrupt("return",U);case 4:case"end":return ue.stop()}},o)}))},MD="required",ks="fn",As="argv",Vl="ref",PP="PartitionResult",Ya="tree",Dp="error",Tp="endpoint",BD=((0,d.Z)(Y0={},MD,!1),(0,d.Z)(Y0,"type","String"),Y0),ND=((0,d.Z)(kp={},MD,!0),(0,d.Z)(kp,"default",!1),(0,d.Z)(kp,"type","Boolean"),kp),ZD=(0,d.Z)({},Vl,"Endpoint"),LD=((0,d.Z)(ex={},ks,"booleanEquals"),(0,d.Z)(ex,As,[(0,d.Z)({},Vl,"UseFIPS"),!0]),ex),jD=((0,d.Z)(tx={},ks,"booleanEquals"),(0,d.Z)(tx,As,[(0,d.Z)({},Vl,"UseDualStack"),!0]),tx),es={},$D=((0,d.Z)(rx={},ks,"booleanEquals"),(0,d.Z)(rx,As,[!0,(nx={},(0,d.Z)(nx,ks,"getAttr"),(0,d.Z)(nx,As,[(0,d.Z)({},Vl,PP),"supportsFIPS"]),nx)]),rx),UD=((0,d.Z)(ox={},ks,"booleanEquals"),(0,d.Z)(ox,As,[!0,(ix={},(0,d.Z)(ix,ks,"getAttr"),(0,d.Z)(ix,As,[(0,d.Z)({},Vl,PP),"supportsDualStack"]),ix)]),ox),zD=[ZD],GD=[LD],VD=[jD],NL={version:"1.0",parameters:{Region:BD,UseDualStack:ND,UseFIPS:ND,Endpoint:BD},rules:[{conditions:[(Ap={},(0,d.Z)(Ap,ks,"aws.partition"),(0,d.Z)(Ap,As,[(0,d.Z)({},Vl,"Region")]),(0,d.Z)(Ap,"assign",PP),Ap)],type:Ya,rules:[{conditions:[(ax={},(0,d.Z)(ax,ks,"isSet"),(0,d.Z)(ax,As,zD),ax),(Rp={},(0,d.Z)(Rp,ks,"parseURL"),(0,d.Z)(Rp,As,zD),(0,d.Z)(Rp,"assign","url"),Rp)],type:Ya,rules:[{conditions:GD,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Dp},{type:Ya,rules:[{conditions:VD,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Dp},{endpoint:{url:ZD,properties:es,headers:es},type:Tp}]}]},{conditions:[LD,jD],type:Ya,rules:[{conditions:[$D,UD],type:Ya,rules:[{endpoint:{url:"https://cognito-identity-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:es,headers:es},type:Tp}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Dp}]},{conditions:GD,type:Ya,rules:[{conditions:[$D],type:Ya,rules:[{type:Ya,rules:[{endpoint:{url:"https://cognito-identity-fips.{Region}.{PartitionResult#dnsSuffix}",properties:es,headers:es},type:Tp}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:Dp}]},{conditions:VD,type:Ya,rules:[{conditions:[UD],type:Ya,rules:[{endpoint:{url:"https://cognito-identity.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:es,headers:es},type:Tp}]},{error:"DualStack is enabled but this partition does not support DualStack",type:Dp}]},{endpoint:{url:"https://cognito-identity.{Region}.{PartitionResult#dnsSuffix}",properties:es,headers:es},type:Tp}]}]},ZL=function(n){return _D(NL,{endpointParams:n,logger:(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).logger})},jL=["in-region","cross-region","mobile","standard","legacy"],HD=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).defaultsMode;return hR(Lt((0,He.Z)().mark(function e(){var o;return(0,He.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if("function"!=typeof t){u.next=6;break}return u.next=3,t();case 3:u.t0=u.sent,u.next=7;break;case 6:u.t0=t;case 7:o=u.t0,u.t1=o?.toLowerCase(),u.next="auto"===u.t1?11:"mobile"===u.t1||"in-region"===u.t1||"cross-region"===u.t1||"standard"===u.t1||"legacy"===u.t1?12:void 0===u.t1?13:14;break;case 11:return u.abrupt("return",Promise.resolve($L()?"mobile":"standard"));case 12:return u.abrupt("return",Promise.resolve(o?.toLocaleLowerCase()));case 13:return u.abrupt("return",Promise.resolve("legacy"));case 14:throw new Error('Invalid parameter for "defaultsMode", expect '.concat(jL.join(", "),", got ").concat(o));case 15:case"end":return u.stop()}},e)})))},$L=function(){var n,t,e,o=typeof window<"u"&&null!==(n=window)&&void 0!==n&&null!==(t=n.navigator)&&void 0!==t&&t.userAgent?OD().parse(window.navigator.userAgent):void 0,s=null==o||null===(e=o.platform)||void 0===e?void 0:e.type;return"tablet"===s||"mobile"===s},kP=function(a){(0,G.Z)(t,a);var n=(0,H.Z)(t);function t(e){var o;(0,p.Z)(this,t);var u=function(n){var t,e;return(0,b.Z)((0,b.Z)({},n),{},{useDualstackEndpoint:null!==(t=n.useDualstackEndpoint)&&void 0!==t&&t,useFipsEndpoint:null!==(e=n.useFipsEndpoint)&&void 0!==e&&e,defaultSigningName:"cognito-identity"})}(function(n){var t,e,o,s,u,c,l,m,C,T,B,F=HD(n),U=function(){return F().then($A)},ae=function(n){var t,e,o,s,u,c,l,m,C;return{apiVersion:"2014-06-30",base64Decoder:null!==(t=n?.base64Decoder)&&void 0!==t?t:bP,base64Encoder:null!==(e=n?.base64Encoder)&&void 0!==e?e:CP,disableHostPrefix:null!==(o=n?.disableHostPrefix)&&void 0!==o&&o,endpointProvider:null!==(s=n?.endpointProvider)&&void 0!==s?s:ZL,logger:null!==(u=n?.logger)&&void 0!==u?u:new RA,serviceId:null!==(c=n?.serviceId)&&void 0!==c?c:"Cognito Identity",urlParser:null!==(l=n?.urlParser)&&void 0!==l?l:bn,utf8Decoder:null!==(m=n?.utf8Decoder)&&void 0!==m?m:dp,utf8Encoder:null!==(C=n?.utf8Encoder)&&void 0!==C?C:q0}}(n);return(0,b.Z)((0,b.Z)((0,b.Z)({},ae),n),{},{runtime:"browser",defaultsMode:F,bodyLengthChecker:null!==(t=n?.bodyLengthChecker)&&void 0!==t?t:ID,credentialDefaultProvider:null!==(e=n?.credentialDefaultProvider)&&void 0!==e?e:function(ue){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:null!==(o=n?.defaultUserAgentProvider)&&void 0!==o?o:FD({serviceId:ae.serviceId,clientVersion:"3.350.0"}),maxAttempts:null!==(s=n?.maxAttempts)&&void 0!==s?s:3,region:null!==(u=n?.region)&&void 0!==u?u:TD("Region is missing"),requestHandler:null!==(c=n?.requestHandler)&&void 0!==c?c:new wD(U),retryMode:null!==(l=n?.retryMode)&&void 0!==l?l:Lt((0,He.Z)().mark(function ue(){return(0,He.Z)().wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return Se.next=2,U();case 2:if(Se.t0=Se.sent.retryMode,Se.t0){Se.next=5;break}Se.t0=uP;case 5:return Se.abrupt("return",Se.t0);case 6:case"end":return Se.stop()}},ue)})),sha256:null!==(m=n?.sha256)&&void 0!==m?m:PL.Sha256,streamCollector:null!==(C=n?.streamCollector)&&void 0!==C?C:wP,useDualstackEndpoint:null!==(T=n?.useDualstackEndpoint)&&void 0!==T?T:function(){return Promise.resolve(!1)},useFipsEndpoint:null!==(B=n?.useFipsEndpoint)&&void 0!==B?B:function(){return Promise.resolve(!1)}})}(e)),c=xR(u),l=rr(c),m=MR(l),B=oD(eD(m));return(o=n.call(this,B)).config=B,o.middlewareStack.use(BR(o.config)),o.middlewareStack.use(CR(o.config)),o.middlewareStack.use(wR(o.config)),o.middlewareStack.use(SR()),o.middlewareStack.use(PR(o.config)),o.middlewareStack.use(CD(o.config)),o}return(0,_.Z)(t,[{key:"destroy",value:function(){(0,Et.Z)((0,Ee.Z)(t.prototype),"destroy",this).call(this)}}]),t}(OA),VL={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0};var WL=S(6982),XL=S(44907);function qD(a,n){return function(){var t=Lt((0,He.Z)().mark(function e(o){var s,u,c,l,m,C,T,B;return(0,He.Z)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if("error"!==(s=o.headers[":message-type"].value)){U.next=7;break}throw(u=new Error(o.headers[":error-message"].value||"UnknownError")).name=o.headers[":error-code"].value,u;case 7:if("exception"!==s){U.next=20;break}return l=(0,d.Z)({},c=o.headers[":exception-type"].value,o),U.next=12,a(l);case 12:if(!(m=U.sent).$unknown){U.next=17;break}throw(C=new Error(n(o.body))).name=c,C;case 17:throw m[c];case 20:if("event"!==s){U.next=30;break}return T=(0,d.Z)({},o.headers[":event-type"].value,o),U.next=24,a(T);case 24:if(!(B=U.sent).$unknown){U.next=27;break}return U.abrupt("return");case 27:return U.abrupt("return",B);case 30:throw Error("Unrecognizable event type: ".concat(o.headers[":event-type"].value));case 31:case"end":return U.stop()}},e)}));return function(e){return t.apply(this,arguments)}}()}var JL=function(){function a(n){var t=n.utf8Encoder,e=n.utf8Decoder;(0,p.Z)(this,a),this.eventStreamCodec=new vZ(t,e),this.utfEncoder=t}return(0,_.Z)(a,[{key:"deserialize",value:function(t,e){var o=function QL(a){var n=0,t=0,e=null,o=null,s=function(l){if("number"!=typeof l)throw new Error("Attempted to allocate an event message where size was not a number: "+l);n=l,t=4,e=new Uint8Array(l),new DataView(e.buffer).setUint32(0,l,!1)},u=function(){var c=Qa((0,He.Z)().mark(function l(){var m,C,T,F,U,ae,ue,me;return(0,He.Z)().wrap(function(we){for(;;)switch(we.prev=we.next){case 0:m=a[Symbol.asyncIterator]();case 1:return we.next=4,eo(m.next());case 4:if(T=(C=we.sent).value,!C.done){we.next=19;break}if(n){we.next=12;break}return we.abrupt("return");case 12:if(n!==t){we.next=17;break}return we.next=15,e;case 15:we.next=18;break;case 17:throw new Error("Truncated event message received.");case 18:return we.abrupt("return");case 19:F=T.length,U=0;case 21:if(!(U<F)){we.next=45;break}if(e){we.next=33;break}if(ae=F-U,o||(o=new Uint8Array(4)),ue=Math.min(4-t,ae),o.set(T.slice(U,U+ue),t),U+=ue,!((t+=ue)<4)){we.next=31;break}return we.abrupt("break",45);case 31:s(new DataView(o.buffer).getUint32(0,!1)),o=null;case 33:if(me=Math.min(n-t,F-U),e.set(T.slice(U,U+me),t),t+=me,U+=me,!n||n!==t){we.next=43;break}return we.next=40,e;case 40:e=null,n=0,t=0;case 43:we.next=21;break;case 45:we.next=1;break;case 47:case"end":return we.stop()}},l)}));return function(){return c.apply(this,arguments)}}();return(0,d.Z)({},Symbol.asyncIterator,u)}(t);return new xZ({messageStream:new _Z({inputStream:o,decoder:this.eventStreamCodec}),deserializer:qD(e,this.utfEncoder)})}},{key:"serialize",value:function(t,e){return new yZ({messageStream:new bZ({inputStream:t,serializer:e}),encoder:this.eventStreamCodec,includeEndFrame:!0})}}]),a}(),tj=function(){function a(n){var t=n.utf8Encoder,e=n.utf8Decoder;(0,p.Z)(this,a),this.universalMarshaller=new JL({utf8Decoder:e,utf8Encoder:t})}return(0,_.Z)(a,[{key:"deserialize",value:function(t,e){var n,o=nj(t)?(n=t,(0,d.Z)({},Symbol.asyncIterator,Qa((0,He.Z)().mark(function t(){var e,o,u;return(0,He.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:e=n.getReader(),l.prev=1;case 2:return l.next=5,eo(e.read());case 5:if(u=(o=l.sent).value,!o.done){l.next=10;break}return l.abrupt("return");case 10:return l.next=12,u;case 12:l.next=2;break;case 14:return l.prev=14,e.releaseLock(),l.finish(14);case 17:case"end":return l.stop()}},t,null,[[1,,14,17]])})))):t;return this.universalMarshaller.deserialize(o,e)}},{key:"serialize",value:function(t,e){var o=this.universalMarshaller.serialize(t,e);return"function"==typeof ReadableStream?function(n){var t=n[Symbol.asyncIterator]();return new ReadableStream({pull:function(o){return Lt((0,He.Z)().mark(function s(){var u,l;return(0,He.Z)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,t.next();case 2:if(l=(u=C.sent).value,!u.done){C.next=7;break}return C.abrupt("return",o.close());case 7:o.enqueue(l);case 8:case"end":return C.stop()}},s)}))()}})}(o):o}}]),a}(),nj=function(n){return"function"==typeof ReadableStream&&n instanceof ReadableStream},rj=function(n){return new tj(n)};function ij(a,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1048576;return new Promise(function(e,o){var s=new FileReader;s.addEventListener("error",o),s.addEventListener("abort",o);var u=a.size,c=0;function l(){c>=u?e():s.readAsArrayBuffer(a.slice(c,Math.min(u,c+t)))}s.addEventListener("load",function(m){var C=m.target.result;n(new Uint8Array(C)),c+=C.byteLength,l()}),l()})}var oj=function(){var a=Lt((0,He.Z)().mark(function t(e,o){var s;return(0,He.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return s=new e,c.next=3,ij(o,function(l){s.update(l)});case 3:return c.abrupt("return",s.digest());case 4:case"end":return c.stop()}},t)}));return function n(t,e){return a.apply(this,arguments)}}(),sj=[1732584193,4023233417,2562383102,271733878],uj=function(){function a(){(0,p.Z)(this,a),this.reset()}return(0,_.Z)(a,[{key:"update",value:function(t){if(!function cj(a){return"string"==typeof a?0===a.length:0===a.byteLength}(t)){if(this.finished)throw new Error("Attempted to update an already finished hash.");var e=function lj(a){return"string"==typeof a?dp(a):ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(a)}(t),o=0,s=e.byteLength;for(this.bytesHashed+=s;s>0;)this.buffer.setUint8(this.bufferLength++,e[o++]),s--,64===this.bufferLength&&(this.hashBuffer(),this.bufferLength=0)}}},{key:"digest",value:(n=Lt((0,He.Z)().mark(function e(){var o,s,c,l,m,C,T;return(0,He.Z)().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(!this.finished){if(s=this.bufferLength,c=8*this.bytesHashed,(o=this.buffer).setUint8(this.bufferLength++,128),s%64>=56){for(l=this.bufferLength;l<64;l++)o.setUint8(l,0);this.hashBuffer(),this.bufferLength=0}for(m=this.bufferLength;m<56;m++)o.setUint8(m,0);o.setUint32(56,c>>>0,!0),o.setUint32(60,Math.floor(c/4294967296),!0),this.hashBuffer(),this.finished=!0}for(C=new DataView(new ArrayBuffer(16)),T=0;T<4;T++)C.setUint32(4*T,this.state[T],!0);return F.abrupt("return",new Uint8Array(C.buffer,C.byteOffset,C.byteLength));case 4:case"end":return F.stop()}},e,this)})),function t(){return n.apply(this,arguments)})},{key:"hashBuffer",value:function(){var t=this.buffer,e=this.state,o=e[0],s=e[1],u=e[2],c=e[3];o=to(o,s,u,c,t.getUint32(0,!0),7,3614090360),c=to(c,o,s,u,t.getUint32(4,!0),12,3905402710),u=to(u,c,o,s,t.getUint32(8,!0),17,606105819),s=to(s,u,c,o,t.getUint32(12,!0),22,3250441966),o=to(o,s,u,c,t.getUint32(16,!0),7,4118548399),c=to(c,o,s,u,t.getUint32(20,!0),12,1200080426),u=to(u,c,o,s,t.getUint32(24,!0),17,2821735955),s=to(s,u,c,o,t.getUint32(28,!0),22,4249261313),o=to(o,s,u,c,t.getUint32(32,!0),7,1770035416),c=to(c,o,s,u,t.getUint32(36,!0),12,2336552879),u=to(u,c,o,s,t.getUint32(40,!0),17,4294925233),s=to(s,u,c,o,t.getUint32(44,!0),22,2304563134),o=to(o,s,u,c,t.getUint32(48,!0),7,1804603682),c=to(c,o,s,u,t.getUint32(52,!0),12,4254626195),u=to(u,c,o,s,t.getUint32(56,!0),17,2792965006),o=no(o,s=to(s,u,c,o,t.getUint32(60,!0),22,1236535329),u,c,t.getUint32(4,!0),5,4129170786),c=no(c,o,s,u,t.getUint32(24,!0),9,3225465664),u=no(u,c,o,s,t.getUint32(44,!0),14,643717713),s=no(s,u,c,o,t.getUint32(0,!0),20,3921069994),o=no(o,s,u,c,t.getUint32(20,!0),5,3593408605),c=no(c,o,s,u,t.getUint32(40,!0),9,38016083),u=no(u,c,o,s,t.getUint32(60,!0),14,3634488961),s=no(s,u,c,o,t.getUint32(16,!0),20,3889429448),o=no(o,s,u,c,t.getUint32(36,!0),5,568446438),c=no(c,o,s,u,t.getUint32(56,!0),9,3275163606),u=no(u,c,o,s,t.getUint32(12,!0),14,4107603335),s=no(s,u,c,o,t.getUint32(32,!0),20,1163531501),o=no(o,s,u,c,t.getUint32(52,!0),5,2850285829),c=no(c,o,s,u,t.getUint32(8,!0),9,4243563512),u=no(u,c,o,s,t.getUint32(28,!0),14,1735328473),o=ro(o,s=no(s,u,c,o,t.getUint32(48,!0),20,2368359562),u,c,t.getUint32(20,!0),4,4294588738),c=ro(c,o,s,u,t.getUint32(32,!0),11,2272392833),u=ro(u,c,o,s,t.getUint32(44,!0),16,1839030562),s=ro(s,u,c,o,t.getUint32(56,!0),23,4259657740),o=ro(o,s,u,c,t.getUint32(4,!0),4,2763975236),c=ro(c,o,s,u,t.getUint32(16,!0),11,1272893353),u=ro(u,c,o,s,t.getUint32(28,!0),16,4139469664),s=ro(s,u,c,o,t.getUint32(40,!0),23,3200236656),o=ro(o,s,u,c,t.getUint32(52,!0),4,681279174),c=ro(c,o,s,u,t.getUint32(0,!0),11,3936430074),u=ro(u,c,o,s,t.getUint32(12,!0),16,3572445317),s=ro(s,u,c,o,t.getUint32(24,!0),23,76029189),o=ro(o,s,u,c,t.getUint32(36,!0),4,3654602809),c=ro(c,o,s,u,t.getUint32(48,!0),11,3873151461),u=ro(u,c,o,s,t.getUint32(60,!0),16,530742520),o=io(o,s=ro(s,u,c,o,t.getUint32(8,!0),23,3299628645),u,c,t.getUint32(0,!0),6,4096336452),c=io(c,o,s,u,t.getUint32(28,!0),10,1126891415),u=io(u,c,o,s,t.getUint32(56,!0),15,2878612391),s=io(s,u,c,o,t.getUint32(20,!0),21,4237533241),o=io(o,s,u,c,t.getUint32(48,!0),6,1700485571),c=io(c,o,s,u,t.getUint32(12,!0),10,2399980690),u=io(u,c,o,s,t.getUint32(40,!0),15,4293915773),s=io(s,u,c,o,t.getUint32(4,!0),21,2240044497),o=io(o,s,u,c,t.getUint32(32,!0),6,1873313359),c=io(c,o,s,u,t.getUint32(60,!0),10,4264355552),u=io(u,c,o,s,t.getUint32(24,!0),15,2734768916),s=io(s,u,c,o,t.getUint32(52,!0),21,1309151649),o=io(o,s,u,c,t.getUint32(16,!0),6,4149444226),c=io(c,o,s,u,t.getUint32(44,!0),10,3174756917),u=io(u,c,o,s,t.getUint32(8,!0),15,718787259),s=io(s,u,c,o,t.getUint32(36,!0),21,3951481745),e[0]=o+e[0]&4294967295,e[1]=s+e[1]&4294967295,e[2]=u+e[2]&4294967295,e[3]=c+e[3]&4294967295}},{key:"reset",value:function(){this.state=Uint32Array.from(sj),this.buffer=new DataView(new ArrayBuffer(64)),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}}]),a;var n}();function sx(a,n,t,e,o,s){return((n=(n+a&4294967295)+(e+s&4294967295)&4294967295)<<o|n>>>32-o)+t&4294967295}function to(a,n,t,e,o,s,u){return sx(n&t|~n&e,a,n,o,s,u)}function no(a,n,t,e,o,s,u){return sx(n&e|t&~e,a,n,o,s,u)}function ro(a,n,t,e,o,s,u){return sx(n^t^e,a,n,o,s,u)}function io(a,n,t,e,o,s,u){return sx(t^(n|~e),a,n,o,s,u)}var ux,Ip,cx,lx,dx,fx,Op,px,hx,mx,Fp,Hl,Mp,gx,Bp,Np,vx,_x,yx,xx,ql,Zp,Lp,bx,Cx,wx,Kl,jp,$p,Sx,Ex,Px,kx,Ax,Wl,Up,Rx,zp,Dx,Tx,Ix,Ox,Fx,Xl,Gp,Vp,Mx,Bx,Nx,Ql,Hp,qp,Zx,Lx,jx,Jl,Kp,Wp,$x,Ux,zx,Gx,Vx,Yl,Xp,Hx,Qp,qx,Kx,Wx,Xx,Qx,ed,Jp,Yp,Jx,Yx,e1,td,eh,th,t1,n1,r1,nd,nh,rh,o1,a1,s1,u1,c1,rd,ih,l1,oh,d1,f1,p1,h1,m1,id,ah,sh,g1,v1,_1,od,uh,ch,y1,x1,b1,ad,lh,dh,C1,w1,S1,E1,P1,sd,fh,k1,ph,A1,R1,D1,T1,I1,ud,hh,mh,O1,F1,M1,cd,gh,vh,B1,N1,Z1,ld,_h,yh,L1,j1,$1,U1,z1,G1,dd,xh,bh,fd,Ch,V1,wh,H1,q1,K1,W1,X1,pd,Sh,Eh,Q1,J1,Y1,hd,Ph,kh,eb,tb,nb,md,Ah,Rh,rb,ib,ob,ab,sb,ub,gd,Dh,Th,vd,Ih,cb,Oh,lb,db,fb,pb,hb,_d,Fh,Mh,mb,Bh,gb,vb,Nh,_b,yb,Zh,xb,bb,Cb,wb,Sb,Eb,yd,Pb,kb,Ab,Rb,Db,Tb,Lh,Ib,Ob,Fb,Mb,xd,jh,$h,Uh,Bb,bd,zh,Gh,Vh,Nb,Cd,Hh,qh,Kh,Zb,wd,Wh,Xh,Qh,Lb,jb,$b,Sd,Jh,Yh,Ub,zb,Gb,Vb,Hb,Ed,em,tm,qb,Kb,nm,rm,Wb,Xb,Pd,im,om,am,Qb,kd,sm,um,cm,Jb,Yb,lm,dm,eC,tC,fm,nC,rC,iC,oC,aC,pm,sC,uC,cC,hm,Ad,lC,dC,fC,pC,hC,mC,gC,vC,Rd,Dd,Td,_C,Id,mm,gm,vm,yC,_m,xC,Od,ym,xm,bm,bC,Fd,Cm,wm,CC,Md,Sm,Em,Pm,wC,Bd,km,Am,SC,Nd,Rm,Dm,Tm,EC,Zd,Im,Om,PC,Ld,Fm,Mm,Bm,kC,AC,RC,Nm,DC,TC,IC,Zm,OC,FC,MC,BC,NC,ZC,LC,jC,$C,Lm,UC,zC,GC,VC,HC,qC,KC,WC,jm,$m,Um,zm,Gm,XC,QC,Vm,Hm,qm,Km,Wm,JC,Xm,Qm,Jm,Ym,eg,YC,tg,ng,ew,tw,nw,rg,rw,iw,ig,ow,og,aw,ag,sg,ug,cg,lg,dg,fg,pg,hg,mg,gg,vg,_g,yg,xg,bg,Cg,wg,Sg,Eg,Pg,kg,Ag,Rg,Dg,Tg,sw,uw,cw,lw,dw,fw,pw,Ig,hw,Og,Fg,mw,gw,vw,Mg,_w,Bg,Ng,Zg,Lg,yw,xw,bw,Cw,jg,$g,Ug,zg,Gg,Vg,ww,Sw,Hg,Ew,qg,Pw,kw,Kg,Aw,Wg,Rw,Xg,Dw,Qg,Tw,Iw,Jg,Ow,Fw,Yg,Mw,Bw,Nw,ev,Zw,tv,nv,Lw,jw,rv,iv,ov,av,sv,uv,cv,lv,dv,fv,pv,hv,$w,Uw,zw,Gw,mv,Vw,gv,Hw,vv,qw,_v,Kw,yv,Ww,xv,Xw,bv,Qw,Jw,Cv,Yw,eS,wv,Sv,Ev,tS,Pv,kv,Av,nS,Rv,Dv,rS,iS,oS,jd,Tv,Iv,aS,Ov,sS,uS,cS,lS,dS,Fv,fS,pS,Mv,Bv,hS,Nv,Zv,Lv,mS,gS,jv,$v,Uv,zv,vS,Gv,Vv,Hv,_S,qv,yS,Kv,xS,Wv,bS,Xv,CS,Qv,wS,Jv,SS,Yv,ES,e_,PS,kS,t_,AS,n_,RS,DS,TS,IS,r_,OS,i_,o_,a_,FS,MS,BS,s_,NS,u_,ZS,LS,c_,l_,d_,f_,p_,jS,$S,US,zS,h_,GS,m_,g_,VS,v_,__,y_,x_,b_,C_,w_,S_,E_,P_,k_,A_,R_,D_,T_,I_,O_,F_,M_,HS,qS,B_,KS,N_,Z_,WS,L_,XS,dj=function(n,t){var e=t.base64Encoder,o=t.bodyLengthChecker,s=t.checksumAlgorithmFn,u=t.checksumLocationName,c=t.streamHasher,l=void 0!==e&&void 0!==o&&void 0!==s&&void 0!==u&&void 0!==c,m=l?c(s,n):void 0,C=n.getReader();return new ReadableStream({pull:function(B){return Lt((0,He.Z)().mark(function F(){var U,ae,me;return(0,He.Z)().wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return we.next=2,C.read();case 2:if(ae=(U=we.sent).value,!U.done){we.next=18;break}if(B.enqueue("0\r\n"),!l){we.next=15;break}return we.t0=e,we.next=11,m;case 11:we.t1=we.sent,me=(0,we.t0)(we.t1),B.enqueue("".concat(u,":").concat(me,"\r\n")),B.enqueue("\r\n");case 15:B.close(),we.next=19;break;case 18:B.enqueue("".concat((o(ae)||0).toString(16),"\r\n").concat(ae,"\r\n"));case 19:case"end":return we.stop()}},F)}))()}})},KD="The stream has already been transformed.",fj=function(n){if(!WD(n)&&!XD(n)){var t,e,o=(null==n||null===(t=n.__proto__)||void 0===t||null===(e=t.constructor)||void 0===e?void 0:e.name)||n;throw new Error("Unexpected stream implementation, expect Blob or ReadableStream, got ".concat(o))}var l,s=!1,u=function(){var l=Lt((0,He.Z)().mark(function m(){return(0,He.Z)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(!s){T.next=2;break}throw new Error(KD);case 2:return s=!0,T.next=5,wP(n);case 5:return T.abrupt("return",T.sent);case 6:case"end":return T.stop()}},m)}));return function(){return l.apply(this,arguments)}}();return Object.assign(n,{transformToByteArray:u,transformToString:(l=Lt((0,He.Z)().mark(function C(T){var B;return(0,He.Z)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,u();case 2:if(B=U.sent,"base64"!==T){U.next=7;break}return U.abrupt("return",CP(B));case 7:if("hex"!==T){U.next=11;break}return U.abrupt("return",Wo(B));case 11:if(void 0!==T&&"utf8"!==T&&"utf-8"!==T){U.next=15;break}return U.abrupt("return",q0(B));case 15:if("function"!=typeof TextDecoder){U.next=19;break}return U.abrupt("return",new TextDecoder(T).decode(B));case 19:throw new Error("TextDecoder is not available, please make sure polyfill is provided.");case 20:case"end":return U.stop()}},C)})),function m(C){return l.apply(this,arguments)}),transformToWebStream:function(){if(s)throw new Error(KD);if(s=!0,WD(n))return function(m){if("function"!=typeof m.stream)throw new Error("Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.\nIf you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body");return m.stream()}(n);if(XD(n))return n;throw new Error("Cannot transform payload to web stream, got ".concat(n))}})},WD=function(n){return"function"==typeof Blob&&n instanceof Blob},XD=function(n){return"function"==typeof ReadableStream&&n instanceof ReadableStream},pj=function(){function a(n){(0,p.Z)(this,a),this.sigv4Signer=new wp(n),this.signerOptions=n}return(0,_.Z)(a,[{key:"sign",value:(n=Lt(function(e){var o=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,He.Z)().mark(function u(){return(0,He.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if("*"!==s.signingRegion){l.next=4;break}if("node"===o.signerOptions.runtime){l.next=3;break}throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");case 3:return l.abrupt("return",o.getSigv4aSigner().sign(e,s));case 4:return l.abrupt("return",o.sigv4Signer.sign(e,s));case 5:case"end":return l.stop()}},u)})()}),function t(e){return n.apply(this,arguments)})},{key:"presign",value:function(){var n=Lt(function(e){var o=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,He.Z)().mark(function u(){return(0,He.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if("*"!==s.signingRegion){l.next=4;break}if("node"===o.signerOptions.runtime){l.next=3;break}throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");case 3:return l.abrupt("return",o.getSigv4aSigner().presign(e,s));case 4:return l.abrupt("return",o.sigv4Signer.presign(e,s));case 5:case"end":return l.stop()}},u)})()});return function t(e){return n.apply(this,arguments)}}()},{key:"getSigv4aSigner",value:function(){if(!this.sigv4aSigner){var t;try{if("function"!=typeof(t=S(54287).CrtSignerV4))throw new Error}catch(e){throw e.message="".concat(e.message,'\nPlease check if you have installed "@aws-sdk/signature-v4-crt" package explicitly. \n')+"For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt",e}this.sigv4aSigner=new t((0,b.Z)((0,b.Z)({},this.signerOptions),{},{signingAlgorithm:1}))}return this.sigv4aSigner}}]),a;var n}(),AP="required",Oe="type",bt="rules",pt="conditions",Je="fn",Ye="argv",At="ref",Ii="assign",on="url",an="properties",Fn="authSchemes",Mn="disableDoubleEncoding",Bn="signingName",Ln="signingRegion",sn="headers",ts=!0,Ct="tree",Qo="isSet",j_="substring",JD="hardwareType",YD="regionPrefix",eT="abbaSuffix",RP="outpostId",$_="aws.partition",hn="stringEquals",yc="isValidHostLabel",ri="not",cn="error",tT="parseURL",DP="s3-outposts",Dt="endpoint",nn="booleanEquals",nT="aws.parseArn",jn="s3",rT="aws.isVirtualHostableS3Bucket",Kr="getAttr",An="name",TP="Host override cannot be combined with Dualstack, FIPS, or S3 Accelerate",iT="https://{Bucket}.s3.{partitionResult#dnsSuffix}",oT="bucketArn",aT="arnType",IP="s3-object-lambda",sT="accesspoint",OP="accessPointName",uT="{url#scheme}://{accessPointName}-{bucketArn#accountId}.{url#authority}{url#path}",cT="mrapPartition",lT="outpostType",dT="arnPrefix",xc="{url#scheme}://{url#authority}{url#path}",fT="https://s3.{partitionResult#dnsSuffix}",FP=((0,d.Z)(ux={},AP,!1),(0,d.Z)(ux,Oe,"String"),ux),U_=((0,d.Z)(Ip={},AP,!0),(0,d.Z)(Ip,"default",!1),(0,d.Z)(Ip,Oe,"Boolean"),Ip),JS=((0,d.Z)(cx={},AP,!1),(0,d.Z)(cx,Oe,"Boolean"),cx),pT=((0,d.Z)(lx={},Je,Qo),(0,d.Z)(lx,Ye,[(0,d.Z)({},At,"Bucket")]),lx),ns=(0,d.Z)({},At,"Bucket"),hT=(0,d.Z)({},At,JD),mT=((0,d.Z)(Op={},pt,[(fx={},(0,d.Z)(fx,Je,ri),(0,d.Z)(fx,Ye,[(dx={},(0,d.Z)(dx,Je,Qo),(0,d.Z)(dx,Ye,[(0,d.Z)({},At,"Endpoint")]),dx)]),fx)]),(0,d.Z)(Op,cn,"Expected a endpoint to be specified but no endpoint was found"),(0,d.Z)(Op,Oe,cn),Op),$n=((0,d.Z)(hx={},Je,ri),(0,d.Z)(hx,Ye,[(px={},(0,d.Z)(px,Je,Qo),(0,d.Z)(px,Ye,[(0,d.Z)({},At,"Endpoint")]),px)]),hx),or=((0,d.Z)(mx={},Je,Qo),(0,d.Z)(mx,Ye,[(0,d.Z)({},At,"Endpoint")]),mx),Tr=((0,d.Z)(Fp={},Je,tT),(0,d.Z)(Fp,Ye,[(0,d.Z)({},At,"Endpoint")]),(0,d.Z)(Fp,Ii,"url"),Fp),YS=(0,d.Z)({},Fn,[(Hl={},(0,d.Z)(Hl,Mn,!0),(0,d.Z)(Hl,An,"sigv4"),(0,d.Z)(Hl,Bn,DP),(0,d.Z)(Hl,Ln,"{Region}"),Hl)]),xi={},gT=(0,d.Z)({},At,"ForcePathStyle"),vT=((0,d.Z)(Zh={},pt,[(Mp={},(0,d.Z)(Mp,Je,"uriEncode"),(0,d.Z)(Mp,Ye,[ns]),(0,d.Z)(Mp,Ii,"uri_encoded_bucket"),Mp)]),(0,d.Z)(Zh,Oe,Ct),(0,d.Z)(Zh,bt,[(Bp={},(0,d.Z)(Bp,pt,[(gx={},(0,d.Z)(gx,Je,nn),(0,d.Z)(gx,Ye,[(0,d.Z)({},At,"UseDualStack"),!0]),gx),or]),(0,d.Z)(Bp,cn,"Cannot set dual-stack in combination with a custom endpoint."),(0,d.Z)(Bp,Oe,cn),Bp),(yb={},(0,d.Z)(yb,Oe,Ct),(0,d.Z)(yb,bt,[(Nh={},(0,d.Z)(Nh,pt,[(Np={},(0,d.Z)(Np,Je,$_),(0,d.Z)(Np,Ye,[(0,d.Z)({},At,"Region")]),(0,d.Z)(Np,Ii,"partitionResult"),Np)]),(0,d.Z)(Nh,Oe,Ct),(0,d.Z)(Nh,bt,[(vb={},(0,d.Z)(vb,Oe,Ct),(0,d.Z)(vb,bt,[(Bh={},(0,d.Z)(Bh,pt,[(vx={},(0,d.Z)(vx,Je,nn),(0,d.Z)(vx,Ye,[(0,d.Z)({},At,"Accelerate"),!1]),vx)]),(0,d.Z)(Bh,Oe,Ct),(0,d.Z)(Bh,bt,[(mb={},(0,d.Z)(mb,Oe,Ct),(0,d.Z)(mb,bt,[(Lp={},(0,d.Z)(Lp,pt,[(_x={},(0,d.Z)(_x,Je,nn),(0,d.Z)(_x,Ye,[(0,d.Z)({},At,"UseDualStack"),!0]),_x),$n,(yx={},(0,d.Z)(yx,Je,nn),(0,d.Z)(yx,Ye,[(0,d.Z)({},At,"UseFIPS"),!0]),yx),(xx={},(0,d.Z)(xx,Je,hn),(0,d.Z)(xx,Ye,[(0,d.Z)({},At,"Region"),"aws-global"]),xx)]),(0,d.Z)(Lp,Dt,(Zp={},(0,d.Z)(Zp,on,"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}"),(0,d.Z)(Zp,an,(0,d.Z)({},Fn,[(ql={},(0,d.Z)(ql,Mn,!0),(0,d.Z)(ql,An,"sigv4"),(0,d.Z)(ql,Bn,jn),(0,d.Z)(ql,Ln,"us-east-1"),ql)])),(0,d.Z)(Zp,sn,{}),Zp)),(0,d.Z)(Lp,Oe,Dt),Lp),($p={},(0,d.Z)($p,pt,[(bx={},(0,d.Z)(bx,Je,nn),(0,d.Z)(bx,Ye,[(0,d.Z)({},At,"UseDualStack"),!0]),bx),$n,(Cx={},(0,d.Z)(Cx,Je,nn),(0,d.Z)(Cx,Ye,[(0,d.Z)({},At,"UseFIPS"),!0]),Cx),(wx={},(0,d.Z)(wx,Je,hn),(0,d.Z)(wx,Ye,[(0,d.Z)({},At,"Region"),"aws-global"]),wx)]),(0,d.Z)($p,Dt,(jp={},(0,d.Z)(jp,on,"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}"),(0,d.Z)(jp,an,(0,d.Z)({},Fn,[(Kl={},(0,d.Z)(Kl,Mn,!0),(0,d.Z)(Kl,An,"sigv4"),(0,d.Z)(Kl,Bn,jn),(0,d.Z)(Kl,Ln,"us-east-1"),Kl)])),(0,d.Z)(jp,sn,{}),jp)),(0,d.Z)($p,Oe,Dt),$p),(zp={},(0,d.Z)(zp,pt,[(Sx={},(0,d.Z)(Sx,Je,nn),(0,d.Z)(Sx,Ye,[(0,d.Z)({},At,"UseDualStack"),!0]),Sx),$n,(Ex={},(0,d.Z)(Ex,Je,nn),(0,d.Z)(Ex,Ye,[(0,d.Z)({},At,"UseFIPS"),!0]),Ex),(kx={},(0,d.Z)(kx,Je,ri),(0,d.Z)(kx,Ye,[(Px={},(0,d.Z)(Px,Je,hn),(0,d.Z)(Px,Ye,[(0,d.Z)({},At,"Region"),"aws-global"]),Px)]),kx),(Ax={},(0,d.Z)(Ax,Je,nn),(0,d.Z)(Ax,Ye,[(0,d.Z)({},At,"UseGlobalEndpoint"),!0]),Ax)]),(0,d.Z)(zp,Oe,Ct),(0,d.Z)(zp,bt,[(Rx={},(0,d.Z)(Rx,Dt,(Up={},(0,d.Z)(Up,on,"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}"),(0,d.Z)(Up,an,(0,d.Z)({},Fn,[(Wl={},(0,d.Z)(Wl,Mn,!0),(0,d.Z)(Wl,An,"sigv4"),(0,d.Z)(Wl,Bn,jn),(0,d.Z)(Wl,Ln,"{Region}"),Wl)])),(0,d.Z)(Up,sn,{}),Up)),(0,d.Z)(Rx,Oe,Dt),Rx)]),zp),(Vp={},(0,d.Z)(Vp,pt,[(Dx={},(0,d.Z)(Dx,Je,nn),(0,d.Z)(Dx,Ye,[(0,d.Z)({},At,"UseDualStack"),!0]),Dx),$n,(Tx={},(0,d.Z)(Tx,Je,nn),(0,d.Z)(Tx,Ye,[(0,d.Z)({},At,"UseFIPS"),!0]),Tx),(Ox={},(0,d.Z)(Ox,Je,ri),(0,d.Z)(Ox,Ye,[(Ix={},(0,d.Z)(Ix,Je,hn),(0,d.Z)(Ix,Ye,[(0,d.Z)({},At,"Region"),"aws-global"]),Ix)]),Ox),(Fx={},(0,d.Z)(Fx,Je,nn),(0,d.Z)(Fx,Ye,[(0,d.Z)({},At,"UseGlobalEndpoint"),!1]),Fx)]),(0,d.Z)(Vp,Dt,(Gp={},(0,d.Z)(Gp,on,"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}"),(0,d.Z)(Gp,an,(0,d.Z)({},Fn,[(Xl={},(0,d.Z)(Xl,Mn,!0),(0,d.Z)(Xl,An,"sigv4"),(0,d.Z)(Xl,Bn,jn),(0,d.Z)(Xl,Ln,"{Region}"),Xl)])),(0,d.Z)(Gp,sn,{}),Gp)),(0,d.Z)(Vp,Oe,Dt),Vp),(qp={},(0,d.Z)(qp,pt,[(Mx={},(0,d.Z)(Mx,Je,nn),(0,d.Z)(Mx,Ye,[(0,d.Z)({},At,"UseDualStack"),!1]),Mx),or,Tr,(Bx={},(0,d.Z)(Bx,Je,nn),(0,d.Z)(Bx,Ye,[(0,d.Z)({},At,"UseFIPS"),!0]),Bx),(Nx={},(0,d.Z)(Nx,Je,hn),(0,d.Z)(Nx,Ye,[(0,d.Z)({},At,"Region"),"aws-global"]),Nx)]),(0,d.Z)(qp,Dt,(Hp={},(0,d.Z)(Hp,on,"{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}"),(0,d.Z)(Hp,an,(0,d.Z)({},Fn,[(Ql={},(0,d.Z)(Ql,Mn,!0),(0,d.Z)(Ql,An,"sigv4"),(0,d.Z)(Ql,Bn,jn),(0,d.Z)(Ql,Ln,"us-east-1"),Ql)])),(0,d.Z)(Hp,sn,{}),Hp)),(0,d.Z)(qp,Oe,Dt),qp),(Wp={},(0,d.Z)(Wp,pt,[(Zx={},(0,d.Z)(Zx,Je,nn),(0,d.Z)(Zx,Ye,[(0,d.Z)({},At,"UseDualStack"),!1]),Zx),or,Tr,(Lx={},(0,d.Z)(Lx,Je,nn),(0,d.Z)(Lx,Ye,[(0,d.Z)({},At,"UseFIPS"),!0]),Lx),(jx={},(0,d.Z)(jx,Je,hn),(0,d.Z)(jx,Ye,[(0,d.Z)({},At,"Region"),"aws-global"]),jx)]),(0,d.Z)(Wp,Dt,(Kp={},(0,d.Z)(Kp,on,"{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}"),(0,d.Z)(Kp,an,(0,d.Z)({},Fn,[(Jl={},(0,d.Z)(Jl,Mn,!0),(0,d.Z)(Jl,An,"sigv4"),(0,d.Z)(Jl,Bn,jn),(0,d.Z)(Jl,Ln,"us-east-1"),Jl)])),(0,d.Z)(Kp,sn,{}),Kp)),(0,d.Z)(Wp,Oe,Dt),Wp),(Qp={},(0,d.Z)(Qp,pt,[($x={},(0,d.Z)($x,Je,nn),(0,d.Z)($x,Ye,[(0,d.Z)({},At,"UseDualStack"),!1]),$x),or,Tr,(Ux={},(0,d.Z)(Ux,Je,nn),(0,d.Z)(Ux,Ye,[(0,d.Z)({},At,"UseFIPS"),!0]),Ux),(Gx={},(0,d.Z)(Gx,Je,ri),(0,d.Z)(Gx,Ye,[(zx={},(0,d.Z)(zx,Je,hn),(0,d.Z)(zx,Ye,[(0,d.Z)({},At,"Region"),"aws-global"]),zx)]),Gx),(Vx={},(0,d.Z)(Vx,Je,nn),(0,d.Z)(Vx,Ye,[(0,d.Z)({},At,"UseGlobalEndpoint"),!0]),Vx)]),(0,d.Z)(Qp,Oe,Ct),(0,d.Z)(Qp,bt,[(Hx={},(0,d.Z)(Hx,Dt,(Xp={},(0,d.Z)(Xp,on,"{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}"),(0,d.Z)(Xp,an,(0,d.Z)({},Fn,[(Yl={},(0,d.Z)(Yl,Mn,!0),(0,d.Z)(Yl,An,"sigv4"),(0,d.Z)(Yl,Bn,jn),(0,d.Z)(Yl,Ln,"{Region}"),Yl)])),(0,d.Z)(Xp,sn,{}),Xp)),(0,d.Z)(Hx,Oe,Dt),Hx)]),Qp),(Yp={},(0,d.Z)(Yp,pt,[(qx={},(0,d.Z)(qx,Je,nn),(0,d.Z)(qx,Ye,[(0,d.Z)({},At,"UseDualStack"),!1]),qx),or,Tr,(Kx={},(0,d.Z)(Kx,Je,nn),(0,d.Z)(Kx,Ye,[(0,d.Z)({},At,"UseFIPS"),!0]),Kx),(Xx={},(0,d.Z)(Xx,Je,ri),(0,d.Z)(Xx,Ye,[(Wx={},(0,d.Z)(Wx,Je,hn),(0,d.Z)(Wx,Ye,[(0,d.Z)({},At,"Region"),"aws-global"]),Wx)]),Xx),(Qx={},(0,d.Z)(Qx,Je,nn),(0,d.Z)(Qx,Ye,[(0,d.Z)({},At,"UseGlobalEndpoint"),!1]),Qx)]),(0,d.Z)(Yp,Dt,(Jp={},(0,d.Z)(Jp,on,"{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}"),(0,d.Z)(Jp,an,(0,d.Z)({},Fn,[(ed={},(0,d.Z)(ed,Mn,!0),(0,d.Z)(ed,An,"sigv4"),(0,d.Z)(ed,Bn,jn),(0,d.Z)(ed,Ln,"{Region}"),ed)])),(0,d.Z)(Jp,sn,{}),Jp)),(0,d.Z)(Yp,Oe,Dt),Yp),(th={},(0,d.Z)(th,pt,[(Jx={},(0,d.Z)(Jx,Je,nn),(0,d.Z)(Jx,Ye,[(0,d.Z)({},At,"UseDualStack"),!1]),Jx),$n,(Yx={},(0,d.Z)(Yx,Je,nn),(0,d.Z)(Yx,Ye,[(0,d.Z)({},At,"UseFIPS"),!0]),Yx),(e1={},(0,d.Z)(e1,Je,hn),(0,d.Z)(e1,Ye,[(0,d.Z)({},At,"Region"),"aws-global"]),e1)]),(0,d.Z)(th,Dt,(eh={},(0,d.Z)(eh,on,"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}"),(0,d.Z)(eh,an,(0,d.Z)({},Fn,[(td={},(0,d.Z)(td,Mn,!0),(0,d.Z)(td,An,"sigv4"),(0,d.Z)(td,Bn,jn),(0,d.Z)(td,Ln,"us-east-1"),td)])),(0,d.Z)(eh,sn,{}),eh)),(0,d.Z)(th,Oe,Dt),th),(rh={},(0,d.Z)(rh,pt,[(t1={},(0,d.Z)(t1,Je,nn),(0,d.Z)(t1,Ye,[(0,d.Z)({},At,"UseDualStack"),!1]),t1),$n,(n1={},(0,d.Z)(n1,Je,nn),(0,d.Z)(n1,Ye,[(0,d.Z)({},At,"UseFIPS"),!0]),n1),(r1={},(0,d.Z)(r1,Je,hn),(0,d.Z)(r1,Ye,[(0,d.Z)({},At,"Region"),"aws-global"]),r1)]),(0,d.Z)(rh,Dt,(nh={},(0,d.Z)(nh,on,"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}"),(0,d.Z)(nh,an,(0,d.Z)({},Fn,[(nd={},(0,d.Z)(nd,Mn,!0),(0,d.Z)(nd,An,"sigv4"),(0,d.Z)(nd,Bn,jn),(0,d.Z)(nd,Ln,"us-east-1"),nd)])),(0,d.Z)(nh,sn,{}),nh)),(0,d.Z)(rh,Oe,Dt),rh),(oh={},(0,d.Z)(oh,pt,[(o1={},(0,d.Z)(o1,Je,nn),(0,d.Z)(o1,Ye,[(0,d.Z)({},At,"UseDualStack"),!1]),o1),$n,(a1={},(0,d.Z)(a1,Je,nn),(0,d.Z)(a1,Ye,[(0,d.Z)({},At,"UseFIPS"),!0]),a1),(u1={},(0,d.Z)(u1,Je,ri),(0,d.Z)(u1,Ye,[(s1={},(0,d.Z)(s1,Je,hn),(0,d.Z)(s1,Ye,[(0,d.Z)({},At,"Region"),"aws-global"]),s1)]),u1),(c1={},(0,d.Z)(c1,Je,nn),(0,d.Z)(c1,Ye,[(0,d.Z)({},At,"UseGlobalEndpoint"),!0]),c1)]),(0,d.Z)(oh,Oe,Ct),(0,d.Z)(oh,bt,[(l1={},(0,d.Z)(l1,Dt,(ih={},(0,d.Z)(ih,on,"https://s3-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}"),(0,d.Z)(ih,an,(0,d.Z)({},Fn,[(rd={},(0,d.Z)(rd,Mn,!0),(0,d.Z)(rd,An,"sigv4"),(0,d.Z)(rd,Bn,jn),(0,d.Z)(rd,Ln,"{Region}"),rd)])),(0,d.Z)(ih,sn,{}),ih)),(0,d.Z)(l1,Oe,Dt),l1)]),oh),(sh={},(0,d.Z)(sh,pt,[(d1={},(0,d.Z)(d1,Je,nn),(0,d.Z)(d1,Ye,[(0,d.Z)({},At,"UseDualStack"),!1]),d1),$n,(f1={},(0,d.Z)(f1,Je,nn),(0,d.Z)(f1,Ye,[(0,d.Z)({},At,"UseFIPS"),!0]),f1),(h1={},(0,d.Z)(h1,Je,ri),(0,d.Z)(h1,Ye,[(p1={},(0,d.Z)(p1,Je,hn),(0,d.Z)(p1,Ye,[(0,d.Z)({},At,"Region"),"aws-global"]),p1)]),h1),(m1={},(0,d.Z)(m1,Je,nn),(0,d.Z)(m1,Ye,[(0,d.Z)({},At,"UseGlobalEndpoint"),!1]),m1)]),(0,d.Z)(sh,Dt,(ah={},(0,d.Z)(ah,on,"https://s3-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}"),(0,d.Z)(ah,an,(0,d.Z)({},Fn,[(id={},(0,d.Z)(id,Mn,!0),(0,d.Z)(id,An,"sigv4"),(0,d.Z)(id,Bn,jn),(0,d.Z)(id,Ln,"{Region}"),id)])),(0,d.Z)(ah,sn,{}),ah)),(0,d.Z)(sh,Oe,Dt),sh),(ch={},(0,d.Z)(ch,pt,[(g1={},(0,d.Z)(g1,Je,nn),(0,d.Z)(g1,Ye,[(0,d.Z)({},At,"UseDualStack"),!0]),g1),$n,(v1={},(0,d.Z)(v1,Je,nn),(0,d.Z)(v1,Ye,[(0,d.Z)({},At,"UseFIPS"),!1]),v1),(_1={},(0,d.Z)(_1,Je,hn),(0,d.Z)(_1,Ye,[(0,d.Z)({},At,"Region"),"aws-global"]),_1)]),(0,d.Z)(ch,Dt,(uh={},(0,d.Z)(uh,on,"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}"),(0,d.Z)(uh,an,(0,d.Z)({},Fn,[(od={},(0,d.Z)(od,Mn,!0),(0,d.Z)(od,An,"sigv4"),(0,d.Z)(od,Bn,jn),(0,d.Z)(od,Ln,"us-east-1"),od)])),(0,d.Z)(uh,sn,{}),uh)),(0,d.Z)(ch,Oe,Dt),ch),(dh={},(0,d.Z)(dh,pt,[(y1={},(0,d.Z)(y1,Je,nn),(0,d.Z)(y1,Ye,[(0,d.Z)({},At,"UseDualStack"),!0]),y1),$n,(x1={},(0,d.Z)(x1,Je,nn),(0,d.Z)(x1,Ye,[(0,d.Z)({},At,"UseFIPS"),!1]),x1),(b1={},(0,d.Z)(b1,Je,hn),(0,d.Z)(b1,Ye,[(0,d.Z)({},At,"Region"),"aws-global"]),b1)]),(0,d.Z)(dh,Dt,(lh={},(0,d.Z)(lh,on,"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}"),(0,d.Z)(lh,an,(0,d.Z)({},Fn,[(ad={},(0,d.Z)(ad,Mn,!0),(0,d.Z)(ad,An,"sigv4"),(0,d.Z)(ad,Bn,jn),(0,d.Z)(ad,Ln,"us-east-1"),ad)])),(0,d.Z)(lh,sn,{}),lh)),(0,d.Z)(dh,Oe,Dt),dh),(ph={},(0,d.Z)(ph,pt,[(C1={},(0,d.Z)(C1,Je,nn),(0,d.Z)(C1,Ye,[(0,d.Z)({},At,"UseDualStack"),!0]),C1),$n,(w1={},(0,d.Z)(w1,Je,nn),(0,d.Z)(w1,Ye,[(0,d.Z)({},At,"UseFIPS"),!1]),w1),(E1={},(0,d.Z)(E1,Je,ri),(0,d.Z)(E1,Ye,[(S1={},(0,d.Z)(S1,Je,hn),(0,d.Z)(S1,Ye,[(0,d.Z)({},At,"Region"),"aws-global"]),S1)]),E1),(P1={},(0,d.Z)(P1,Je,nn),(0,d.Z)(P1,Ye,[(0,d.Z)({},At,"UseGlobalEndpoint"),!0]),P1)]),(0,d.Z)(ph,Oe,Ct),(0,d.Z)(ph,bt,[(k1={},(0,d.Z)(k1,Dt,(fh={},(0,d.Z)(fh,on,"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}"),(0,d.Z)(fh,an,(0,d.Z)({},Fn,[(sd={},(0,d.Z)(sd,Mn,!0),(0,d.Z)(sd,An,"sigv4"),(0,d.Z)(sd,Bn,jn),(0,d.Z)(sd,Ln,"{Region}"),sd)])),(0,d.Z)(fh,sn,{}),fh)),(0,d.Z)(k1,Oe,Dt),k1)]),ph),(mh={},(0,d.Z)(mh,pt,[(A1={},(0,d.Z)(A1,Je,nn),(0,d.Z)(A1,Ye,[(0,d.Z)({},At,"UseDualStack"),!0]),A1),$n,(R1={},(0,d.Z)(R1,Je,nn),(0,d.Z)(R1,Ye,[(0,d.Z)({},At,"UseFIPS"),!1]),R1),(T1={},(0,d.Z)(T1,Je,ri),(0,d.Z)(T1,Ye,[(D1={},(0,d.Z)(D1,Je,hn),(0,d.Z)(D1,Ye,[(0,d.Z)({},At,"Region"),"aws-global"]),D1)]),T1),(I1={},(0,d.Z)(I1,Je,nn),(0,d.Z)(I1,Ye,[(0,d.Z)({},At,"UseGlobalEndpoint"),!1]),I1)]),(0,d.Z)(mh,Dt,(hh={},(0,d.Z)(hh,on,"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}"),(0,d.Z)(hh,an,(0,d.Z)({},Fn,[(ud={},(0,d.Z)(ud,Mn,!0),(0,d.Z)(ud,An,"sigv4"),(0,d.Z)(ud,Bn,jn),(0,d.Z)(ud,Ln,"{Region}"),ud)])),(0,d.Z)(hh,sn,{}),hh)),(0,d.Z)(mh,Oe,Dt),mh),(vh={},(0,d.Z)(vh,pt,[(O1={},(0,d.Z)(O1,Je,nn),(0,d.Z)(O1,Ye,[(0,d.Z)({},At,"UseDualStack"),!1]),O1),or,Tr,(F1={},(0,d.Z)(F1,Je,nn),(0,d.Z)(F1,Ye,[(0,d.Z)({},At,"UseFIPS"),!1]),F1),(M1={},(0,d.Z)(M1,Je,hn),(0,d.Z)(M1,Ye,[(0,d.Z)({},At,"Region"),"aws-global"]),M1)]),(0,d.Z)(vh,Dt,(gh={},(0,d.Z)(gh,on,"{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}"),(0,d.Z)(gh,an,(0,d.Z)({},Fn,[(cd={},(0,d.Z)(cd,Mn,!0),(0,d.Z)(cd,An,"sigv4"),(0,d.Z)(cd,Bn,jn),(0,d.Z)(cd,Ln,"us-east-1"),cd)])),(0,d.Z)(gh,sn,{}),gh)),(0,d.Z)(vh,Oe,Dt),vh),(yh={},(0,d.Z)(yh,pt,[(B1={},(0,d.Z)(B1,Je,nn),(0,d.Z)(B1,Ye,[(0,d.Z)({},At,"UseDualStack"),!1]),B1),or,Tr,(N1={},(0,d.Z)(N1,Je,nn),(0,d.Z)(N1,Ye,[(0,d.Z)({},At,"UseFIPS"),!1]),N1),(Z1={},(0,d.Z)(Z1,Je,hn),(0,d.Z)(Z1,Ye,[(0,d.Z)({},At,"Region"),"aws-global"]),Z1)]),(0,d.Z)(yh,Dt,(_h={},(0,d.Z)(_h,on,"{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}"),(0,d.Z)(_h,an,(0,d.Z)({},Fn,[(ld={},(0,d.Z)(ld,Mn,!0),(0,d.Z)(ld,An,"sigv4"),(0,d.Z)(ld,Bn,jn),(0,d.Z)(ld,Ln,"us-east-1"),ld)])),(0,d.Z)(_h,sn,{}),_h)),(0,d.Z)(yh,Oe,Dt),yh),(wh={},(0,d.Z)(wh,pt,[(L1={},(0,d.Z)(L1,Je,nn),(0,d.Z)(L1,Ye,[(0,d.Z)({},At,"UseDualStack"),!1]),L1),or,Tr,(j1={},(0,d.Z)(j1,Je,nn),(0,d.Z)(j1,Ye,[(0,d.Z)({},At,"UseFIPS"),!1]),j1),(U1={},(0,d.Z)(U1,Je,ri),(0,d.Z)(U1,Ye,[($1={},(0,d.Z)($1,Je,hn),(0,d.Z)($1,Ye,[(0,d.Z)({},At,"Region"),"aws-global"]),$1)]),U1),(z1={},(0,d.Z)(z1,Je,nn),(0,d.Z)(z1,Ye,[(0,d.Z)({},At,"UseGlobalEndpoint"),!0]),z1)]),(0,d.Z)(wh,Oe,Ct),(0,d.Z)(wh,bt,[(bh={},(0,d.Z)(bh,pt,[(G1={},(0,d.Z)(G1,Je,hn),(0,d.Z)(G1,Ye,[(0,d.Z)({},At,"Region"),"us-east-1"]),G1)]),(0,d.Z)(bh,Dt,(xh={},(0,d.Z)(xh,on,"{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}"),(0,d.Z)(xh,an,(0,d.Z)({},Fn,[(dd={},(0,d.Z)(dd,Mn,!0),(0,d.Z)(dd,An,"sigv4"),(0,d.Z)(dd,Bn,jn),(0,d.Z)(dd,Ln,"{Region}"),dd)])),(0,d.Z)(xh,sn,{}),xh)),(0,d.Z)(bh,Oe,Dt),bh),(V1={},(0,d.Z)(V1,Dt,(Ch={},(0,d.Z)(Ch,on,"{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}"),(0,d.Z)(Ch,an,(0,d.Z)({},Fn,[(fd={},(0,d.Z)(fd,Mn,!0),(0,d.Z)(fd,An,"sigv4"),(0,d.Z)(fd,Bn,jn),(0,d.Z)(fd,Ln,"{Region}"),fd)])),(0,d.Z)(Ch,sn,{}),Ch)),(0,d.Z)(V1,Oe,Dt),V1)]),wh),(Eh={},(0,d.Z)(Eh,pt,[(H1={},(0,d.Z)(H1,Je,nn),(0,d.Z)(H1,Ye,[(0,d.Z)({},At,"UseDualStack"),!1]),H1),or,Tr,(q1={},(0,d.Z)(q1,Je,nn),(0,d.Z)(q1,Ye,[(0,d.Z)({},At,"UseFIPS"),!1]),q1),(W1={},(0,d.Z)(W1,Je,ri),(0,d.Z)(W1,Ye,[(K1={},(0,d.Z)(K1,Je,hn),(0,d.Z)(K1,Ye,[(0,d.Z)({},At,"Region"),"aws-global"]),K1)]),W1),(X1={},(0,d.Z)(X1,Je,nn),(0,d.Z)(X1,Ye,[(0,d.Z)({},At,"UseGlobalEndpoint"),!1]),X1)]),(0,d.Z)(Eh,Dt,(Sh={},(0,d.Z)(Sh,on,"{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}"),(0,d.Z)(Sh,an,(0,d.Z)({},Fn,[(pd={},(0,d.Z)(pd,Mn,!0),(0,d.Z)(pd,An,"sigv4"),(0,d.Z)(pd,Bn,jn),(0,d.Z)(pd,Ln,"{Region}"),pd)])),(0,d.Z)(Sh,sn,{}),Sh)),(0,d.Z)(Eh,Oe,Dt),Eh),(kh={},(0,d.Z)(kh,pt,[(Q1={},(0,d.Z)(Q1,Je,nn),(0,d.Z)(Q1,Ye,[(0,d.Z)({},At,"UseDualStack"),!1]),Q1),$n,(J1={},(0,d.Z)(J1,Je,nn),(0,d.Z)(J1,Ye,[(0,d.Z)({},At,"UseFIPS"),!1]),J1),(Y1={},(0,d.Z)(Y1,Je,hn),(0,d.Z)(Y1,Ye,[(0,d.Z)({},At,"Region"),"aws-global"]),Y1)]),(0,d.Z)(kh,Dt,(Ph={},(0,d.Z)(Ph,on,"https://s3.{partitionResult#dnsSuffix}/{uri_encoded_bucket}"),(0,d.Z)(Ph,an,(0,d.Z)({},Fn,[(hd={},(0,d.Z)(hd,Mn,!0),(0,d.Z)(hd,An,"sigv4"),(0,d.Z)(hd,Bn,jn),(0,d.Z)(hd,Ln,"us-east-1"),hd)])),(0,d.Z)(Ph,sn,{}),Ph)),(0,d.Z)(kh,Oe,Dt),kh),(Rh={},(0,d.Z)(Rh,pt,[(eb={},(0,d.Z)(eb,Je,nn),(0,d.Z)(eb,Ye,[(0,d.Z)({},At,"UseDualStack"),!1]),eb),$n,(tb={},(0,d.Z)(tb,Je,nn),(0,d.Z)(tb,Ye,[(0,d.Z)({},At,"UseFIPS"),!1]),tb),(nb={},(0,d.Z)(nb,Je,hn),(0,d.Z)(nb,Ye,[(0,d.Z)({},At,"Region"),"aws-global"]),nb)]),(0,d.Z)(Rh,Dt,(Ah={},(0,d.Z)(Ah,on,"https://s3.{partitionResult#dnsSuffix}/{uri_encoded_bucket}"),(0,d.Z)(Ah,an,(0,d.Z)({},Fn,[(md={},(0,d.Z)(md,Mn,!0),(0,d.Z)(md,An,"sigv4"),(0,d.Z)(md,Bn,jn),(0,d.Z)(md,Ln,"us-east-1"),md)])),(0,d.Z)(Ah,sn,{}),Ah)),(0,d.Z)(Rh,Oe,Dt),Rh),(Oh={},(0,d.Z)(Oh,pt,[(rb={},(0,d.Z)(rb,Je,nn),(0,d.Z)(rb,Ye,[(0,d.Z)({},At,"UseDualStack"),!1]),rb),$n,(ib={},(0,d.Z)(ib,Je,nn),(0,d.Z)(ib,Ye,[(0,d.Z)({},At,"UseFIPS"),!1]),ib),(ab={},(0,d.Z)(ab,Je,ri),(0,d.Z)(ab,Ye,[(ob={},(0,d.Z)(ob,Je,hn),(0,d.Z)(ob,Ye,[(0,d.Z)({},At,"Region"),"aws-global"]),ob)]),ab),(sb={},(0,d.Z)(sb,Je,nn),(0,d.Z)(sb,Ye,[(0,d.Z)({},At,"UseGlobalEndpoint"),!0]),sb)]),(0,d.Z)(Oh,Oe,Ct),(0,d.Z)(Oh,bt,[(Th={},(0,d.Z)(Th,pt,[(ub={},(0,d.Z)(ub,Je,hn),(0,d.Z)(ub,Ye,[(0,d.Z)({},At,"Region"),"us-east-1"]),ub)]),(0,d.Z)(Th,Dt,(Dh={},(0,d.Z)(Dh,on,"https://s3.{partitionResult#dnsSuffix}/{uri_encoded_bucket}"),(0,d.Z)(Dh,an,(0,d.Z)({},Fn,[(gd={},(0,d.Z)(gd,Mn,!0),(0,d.Z)(gd,An,"sigv4"),(0,d.Z)(gd,Bn,jn),(0,d.Z)(gd,Ln,"{Region}"),gd)])),(0,d.Z)(Dh,sn,{}),Dh)),(0,d.Z)(Th,Oe,Dt),Th),(cb={},(0,d.Z)(cb,Dt,(Ih={},(0,d.Z)(Ih,on,"https://s3.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}"),(0,d.Z)(Ih,an,(0,d.Z)({},Fn,[(vd={},(0,d.Z)(vd,Mn,!0),(0,d.Z)(vd,An,"sigv4"),(0,d.Z)(vd,Bn,jn),(0,d.Z)(vd,Ln,"{Region}"),vd)])),(0,d.Z)(Ih,sn,{}),Ih)),(0,d.Z)(cb,Oe,Dt),cb)]),Oh),(Mh={},(0,d.Z)(Mh,pt,[(lb={},(0,d.Z)(lb,Je,nn),(0,d.Z)(lb,Ye,[(0,d.Z)({},At,"UseDualStack"),!1]),lb),$n,(db={},(0,d.Z)(db,Je,nn),(0,d.Z)(db,Ye,[(0,d.Z)({},At,"UseFIPS"),!1]),db),(pb={},(0,d.Z)(pb,Je,ri),(0,d.Z)(pb,Ye,[(fb={},(0,d.Z)(fb,Je,hn),(0,d.Z)(fb,Ye,[(0,d.Z)({},At,"Region"),"aws-global"]),fb)]),pb),(hb={},(0,d.Z)(hb,Je,nn),(0,d.Z)(hb,Ye,[(0,d.Z)({},At,"UseGlobalEndpoint"),!1]),hb)]),(0,d.Z)(Mh,Dt,(Fh={},(0,d.Z)(Fh,on,"https://s3.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}"),(0,d.Z)(Fh,an,(0,d.Z)({},Fn,[(_d={},(0,d.Z)(_d,Mn,!0),(0,d.Z)(_d,An,"sigv4"),(0,d.Z)(_d,Bn,jn),(0,d.Z)(_d,Ln,"{Region}"),_d)])),(0,d.Z)(Fh,sn,{}),Fh)),(0,d.Z)(Mh,Oe,Dt),Mh)]),mb)]),Bh),(gb={},(0,d.Z)(gb,cn,"Path-style addressing cannot be used with S3 Accelerate"),(0,d.Z)(gb,Oe,cn),gb)]),vb)]),Nh),(_b={},(0,d.Z)(_b,cn,"A valid partition could not be determined"),(0,d.Z)(_b,Oe,cn),_b)]),yb)]),Zh),Br=((0,d.Z)(xb={},Je,nn),(0,d.Z)(xb,Ye,[(0,d.Z)({},At,"UseDualStack"),!0]),xb),Pi=((0,d.Z)(bb={},Je,nn),(0,d.Z)(bb,Ye,[(0,d.Z)({},At,"Accelerate"),!1]),bb),Vr=((0,d.Z)(Cb={},Je,nn),(0,d.Z)(Cb,Ye,[(0,d.Z)({},At,"UseFIPS"),!0]),Cb),xr=((0,d.Z)(Sb={},Je,ri),(0,d.Z)(Sb,Ye,[(wb={},(0,d.Z)(wb,Je,hn),(0,d.Z)(wb,Ye,[(0,d.Z)({},At,"Region"),"aws-global"]),wb)]),Sb),oo=((0,d.Z)(Eb={},Je,nn),(0,d.Z)(Eb,Ye,[(0,d.Z)({},At,"UseGlobalEndpoint"),!0]),Eb),ao=(0,d.Z)({},Fn,[(yd={},(0,d.Z)(yd,Mn,!0),(0,d.Z)(yd,An,"sigv4"),(0,d.Z)(yd,Bn,jn),(0,d.Z)(yd,Ln,"{Region}"),yd)]),so=((0,d.Z)(Pb={},Je,nn),(0,d.Z)(Pb,Ye,[(0,d.Z)({},At,"UseGlobalEndpoint"),!1]),Pb),wr=((0,d.Z)(kb={},Je,nn),(0,d.Z)(kb,Ye,[(0,d.Z)({},At,"UseDualStack"),!1]),kb),cr=((0,d.Z)(Ab={},Je,nn),(0,d.Z)(Ab,Ye,[(0,d.Z)({},At,"UseFIPS"),!1]),Ab),bc=((0,d.Z)(Rb={},cn,"A valid partition could not be determined"),(0,d.Z)(Rb,Oe,cn),Rb),MP=((0,d.Z)(Lh={},pt,[Vr,(Tb={},(0,d.Z)(Tb,Je,hn),(0,d.Z)(Tb,Ye,[(Db={},(0,d.Z)(Db,Je,Kr),(0,d.Z)(Db,Ye,[(0,d.Z)({},At,"partitionResult"),An]),Db),"aws-cn"]),Tb)]),(0,d.Z)(Lh,cn,"Partition does not support FIPS"),(0,d.Z)(Lh,Oe,cn),Lh),hj=((0,d.Z)(Ob={},Je,hn),(0,d.Z)(Ob,Ye,[(Ib={},(0,d.Z)(Ib,Je,Kr),(0,d.Z)(Ib,Ye,[(0,d.Z)({},At,"partitionResult"),An]),Ib),"aws-cn"]),Ob),Pa=((0,d.Z)(Fb={},Je,nn),(0,d.Z)(Fb,Ye,[(0,d.Z)({},At,"Accelerate"),!0]),Fb),_T=((0,d.Z)($h={},pt,[Br,Vr,Pi,$n,(Mb={},(0,d.Z)(Mb,Je,hn),(0,d.Z)(Mb,Ye,[(0,d.Z)({},At,"Region"),"aws-global"]),Mb)]),(0,d.Z)($h,Dt,((0,d.Z)(jh={},on,"https://{Bucket}.s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}"),(0,d.Z)(jh,an,(0,d.Z)({},Fn,[(xd={},(0,d.Z)(xd,Mn,!0),(0,d.Z)(xd,An,"sigv4"),(0,d.Z)(xd,Bn,jn),(0,d.Z)(xd,Ln,"us-east-1"),xd)])),(0,d.Z)(jh,sn,{}),jh)),(0,d.Z)($h,Oe,Dt),$h),yT=((0,d.Z)(Uh={},on,"https://{Bucket}.s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}"),(0,d.Z)(Uh,an,ao),(0,d.Z)(Uh,sn,{}),Uh),xT=((0,d.Z)(Gh={},pt,[wr,Vr,Pi,$n,(Bb={},(0,d.Z)(Bb,Je,hn),(0,d.Z)(Bb,Ye,[(0,d.Z)({},At,"Region"),"aws-global"]),Bb)]),(0,d.Z)(Gh,Dt,((0,d.Z)(zh={},on,"https://{Bucket}.s3-fips.us-east-1.{partitionResult#dnsSuffix}"),(0,d.Z)(zh,an,(0,d.Z)({},Fn,[(bd={},(0,d.Z)(bd,Mn,!0),(0,d.Z)(bd,An,"sigv4"),(0,d.Z)(bd,Bn,jn),(0,d.Z)(bd,Ln,"us-east-1"),bd)])),(0,d.Z)(zh,sn,{}),zh)),(0,d.Z)(Gh,Oe,Dt),Gh),bT=((0,d.Z)(Vh={},on,"https://{Bucket}.s3-fips.{Region}.{partitionResult#dnsSuffix}"),(0,d.Z)(Vh,an,ao),(0,d.Z)(Vh,sn,{}),Vh),CT=((0,d.Z)(qh={},pt,[Br,cr,Pa,$n,(Nb={},(0,d.Z)(Nb,Je,hn),(0,d.Z)(Nb,Ye,[(0,d.Z)({},At,"Region"),"aws-global"]),Nb)]),(0,d.Z)(qh,Dt,((0,d.Z)(Hh={},on,"https://{Bucket}.s3-accelerate.dualstack.us-east-1.{partitionResult#dnsSuffix}"),(0,d.Z)(Hh,an,(0,d.Z)({},Fn,[(Cd={},(0,d.Z)(Cd,Mn,!0),(0,d.Z)(Cd,An,"sigv4"),(0,d.Z)(Cd,Bn,jn),(0,d.Z)(Cd,Ln,"us-east-1"),Cd)])),(0,d.Z)(Hh,sn,{}),Hh)),(0,d.Z)(qh,Oe,Dt),qh),wT=((0,d.Z)(Kh={},on,"https://{Bucket}.s3-accelerate.dualstack.{partitionResult#dnsSuffix}"),(0,d.Z)(Kh,an,ao),(0,d.Z)(Kh,sn,{}),Kh),ST=((0,d.Z)(Xh={},pt,[Br,cr,Pi,$n,(Zb={},(0,d.Z)(Zb,Je,hn),(0,d.Z)(Zb,Ye,[(0,d.Z)({},At,"Region"),"aws-global"]),Zb)]),(0,d.Z)(Xh,Dt,((0,d.Z)(Wh={},on,"https://{Bucket}.s3.dualstack.us-east-1.{partitionResult#dnsSuffix}"),(0,d.Z)(Wh,an,(0,d.Z)({},Fn,[(wd={},(0,d.Z)(wd,Mn,!0),(0,d.Z)(wd,An,"sigv4"),(0,d.Z)(wd,Bn,jn),(0,d.Z)(wd,Ln,"us-east-1"),wd)])),(0,d.Z)(Wh,sn,{}),Wh)),(0,d.Z)(Xh,Oe,Dt),Xh),ET=((0,d.Z)(Qh={},on,"https://{Bucket}.s3.dualstack.{Region}.{partitionResult#dnsSuffix}"),(0,d.Z)(Qh,an,ao),(0,d.Z)(Qh,sn,{}),Qh),PT=((0,d.Z)(Yh={},pt,[wr,cr,Pi,or,Tr,(jb={},(0,d.Z)(jb,Je,nn),(0,d.Z)(jb,Ye,[(Lb={},(0,d.Z)(Lb,Je,Kr),(0,d.Z)(Lb,Ye,[(0,d.Z)({},At,"url"),"isIp"]),Lb),!0]),jb),($b={},(0,d.Z)($b,Je,hn),(0,d.Z)($b,Ye,[(0,d.Z)({},At,"Region"),"aws-global"]),$b)]),(0,d.Z)(Yh,Dt,((0,d.Z)(Jh={},on,"{url#scheme}://{url#authority}{url#normalizedPath}{Bucket}"),(0,d.Z)(Jh,an,(0,d.Z)({},Fn,[(Sd={},(0,d.Z)(Sd,Mn,!0),(0,d.Z)(Sd,An,"sigv4"),(0,d.Z)(Sd,Bn,jn),(0,d.Z)(Sd,Ln,"us-east-1"),Sd)])),(0,d.Z)(Jh,sn,{}),Jh)),(0,d.Z)(Yh,Oe,Dt),Yh),kT=((0,d.Z)(zb={},Je,nn),(0,d.Z)(zb,Ye,[(Ub={},(0,d.Z)(Ub,Je,Kr),(0,d.Z)(Ub,Ye,[(0,d.Z)({},At,"url"),"isIp"]),Ub),!0]),zb),BP=(0,d.Z)({},At,"url"),AT=((0,d.Z)(tm={},pt,[wr,cr,Pi,or,Tr,(Vb={},(0,d.Z)(Vb,Je,nn),(0,d.Z)(Vb,Ye,[(Gb={},(0,d.Z)(Gb,Je,Kr),(0,d.Z)(Gb,Ye,[BP,"isIp"]),Gb),!1]),Vb),(Hb={},(0,d.Z)(Hb,Je,hn),(0,d.Z)(Hb,Ye,[(0,d.Z)({},At,"Region"),"aws-global"]),Hb)]),(0,d.Z)(tm,Dt,((0,d.Z)(em={},on,"{url#scheme}://{Bucket}.{url#authority}{url#path}"),(0,d.Z)(em,an,(0,d.Z)({},Fn,[(Ed={},(0,d.Z)(Ed,Mn,!0),(0,d.Z)(Ed,An,"sigv4"),(0,d.Z)(Ed,Bn,jn),(0,d.Z)(Ed,Ln,"us-east-1"),Ed)])),(0,d.Z)(em,sn,{}),em)),(0,d.Z)(tm,Oe,Dt),tm),RT=((0,d.Z)(Kb={},Je,nn),(0,d.Z)(Kb,Ye,[(qb={},(0,d.Z)(qb,Je,Kr),(0,d.Z)(qb,Ye,[BP,"isIp"]),qb),!1]),Kb),NP=((0,d.Z)(nm={},on,"{url#scheme}://{url#authority}{url#normalizedPath}{Bucket}"),(0,d.Z)(nm,an,ao),(0,d.Z)(nm,sn,{}),nm),ZP=((0,d.Z)(rm={},on,"{url#scheme}://{Bucket}.{url#authority}{url#path}"),(0,d.Z)(rm,an,ao),(0,d.Z)(rm,sn,{}),rm),DT=((0,d.Z)(Wb={},Dt,ZP),(0,d.Z)(Wb,Oe,Dt),Wb),TT=((0,d.Z)(om={},pt,[wr,cr,Pa,$n,(Xb={},(0,d.Z)(Xb,Je,hn),(0,d.Z)(Xb,Ye,[(0,d.Z)({},At,"Region"),"aws-global"]),Xb)]),(0,d.Z)(om,Dt,((0,d.Z)(im={},on,"https://{Bucket}.s3-accelerate.{partitionResult#dnsSuffix}"),(0,d.Z)(im,an,(0,d.Z)({},Fn,[(Pd={},(0,d.Z)(Pd,Mn,!0),(0,d.Z)(Pd,An,"sigv4"),(0,d.Z)(Pd,Bn,jn),(0,d.Z)(Pd,Ln,"us-east-1"),Pd)])),(0,d.Z)(im,sn,{}),im)),(0,d.Z)(om,Oe,Dt),om),LP=((0,d.Z)(am={},on,"https://{Bucket}.s3-accelerate.{partitionResult#dnsSuffix}"),(0,d.Z)(am,an,ao),(0,d.Z)(am,sn,{}),am),IT=((0,d.Z)(um={},pt,[wr,cr,Pi,$n,(Qb={},(0,d.Z)(Qb,Je,hn),(0,d.Z)(Qb,Ye,[(0,d.Z)({},At,"Region"),"aws-global"]),Qb)]),(0,d.Z)(um,Dt,((0,d.Z)(sm={},on,iT),(0,d.Z)(sm,an,(0,d.Z)({},Fn,[(kd={},(0,d.Z)(kd,Mn,!0),(0,d.Z)(kd,An,"sigv4"),(0,d.Z)(kd,Bn,jn),(0,d.Z)(kd,Ln,"us-east-1"),kd)])),(0,d.Z)(sm,sn,{}),sm)),(0,d.Z)(um,Oe,Dt),um),OT=((0,d.Z)(cm={},on,"https://{Bucket}.s3.{Region}.{partitionResult#dnsSuffix}"),(0,d.Z)(cm,an,ao),(0,d.Z)(cm,sn,{}),cm),eE=((0,d.Z)(Jb={},cn,"Invalid region: region was not a valid DNS name."),(0,d.Z)(Jb,Oe,cn),Jb),Fo=(0,d.Z)({},At,oT),FT=(0,d.Z)({},At,aT),jP=((0,d.Z)(Yb={},Je,Kr),(0,d.Z)(Yb,Ye,[Fo,"service"]),Yb),$P=(0,d.Z)({},At,OP),MT=((0,d.Z)(lm={},pt,[Br]),(0,d.Z)(lm,cn,"S3 Object Lambda does not support Dual-stack"),(0,d.Z)(lm,Oe,cn),lm),BT=((0,d.Z)(dm={},pt,[Pa]),(0,d.Z)(dm,cn,"S3 Object Lambda does not support S3 Accelerate"),(0,d.Z)(dm,Oe,cn),dm),NT=((0,d.Z)(fm={},pt,[(eC={},(0,d.Z)(eC,Je,Qo),(0,d.Z)(eC,Ye,[(0,d.Z)({},At,"DisableAccessPoints")]),eC),(tC={},(0,d.Z)(tC,Je,nn),(0,d.Z)(tC,Ye,[(0,d.Z)({},At,"DisableAccessPoints"),!0]),tC)]),(0,d.Z)(fm,cn,"Access points are not supported for this operation"),(0,d.Z)(fm,Oe,cn),fm),UP=((0,d.Z)(pm={},pt,[(nC={},(0,d.Z)(nC,Je,Qo),(0,d.Z)(nC,Ye,[(0,d.Z)({},At,"UseArnRegion")]),nC),(rC={},(0,d.Z)(rC,Je,nn),(0,d.Z)(rC,Ye,[(0,d.Z)({},At,"UseArnRegion"),!1]),rC),(aC={},(0,d.Z)(aC,Je,ri),(0,d.Z)(aC,Ye,[(oC={},(0,d.Z)(oC,Je,hn),(0,d.Z)(oC,Ye,[(iC={},(0,d.Z)(iC,Je,Kr),(0,d.Z)(iC,Ye,[Fo,"region"]),iC),"{Region}"]),oC)]),aC)]),(0,d.Z)(pm,cn,"Invalid configuration: region from ARN `{bucketArn#region}` does not match client region `{Region}` and UseArnRegion is `false`"),(0,d.Z)(pm,Oe,cn),pm),zP=((0,d.Z)(sC={},Je,Kr),(0,d.Z)(sC,Ye,[(0,d.Z)({},At,"bucketPartition"),An]),sC),ZT=((0,d.Z)(uC={},Je,Kr),(0,d.Z)(uC,Ye,[Fo,"accountId"]),uC),LT=((0,d.Z)(hm={},pt,[Vr,(cC={},(0,d.Z)(cC,Je,hn),(0,d.Z)(cC,Ye,[zP,"aws-cn"]),cC)]),(0,d.Z)(hm,cn,"Partition does not support FIPS"),(0,d.Z)(hm,Oe,cn),hm),GP=(0,d.Z)({},Fn,[(Ad={},(0,d.Z)(Ad,Mn,!0),(0,d.Z)(Ad,An,"sigv4"),(0,d.Z)(Ad,Bn,IP),(0,d.Z)(Ad,Ln,"{bucketArn#region}"),Ad)]),jT=((0,d.Z)(lC={},cn,"Invalid ARN: The access point name may only contain a-z, A-Z, 0-9 and `-`. Found: `{accessPointName}`"),(0,d.Z)(lC,Oe,cn),lC),VP=((0,d.Z)(dC={},cn,"Invalid ARN: The account id may only contain a-z, A-Z, 0-9 and `-`. Found: `{bucketArn#accountId}`"),(0,d.Z)(dC,Oe,cn),dC),HP=((0,d.Z)(fC={},cn,"Invalid region in ARN: `{bucketArn#region}` (invalid DNS name)"),(0,d.Z)(fC,Oe,cn),fC),qP=((0,d.Z)(pC={},cn,"Client was configured for partition `{partitionResult#name}` but ARN (`{Bucket}`) has `{bucketPartition#name}`"),(0,d.Z)(pC,Oe,cn),pC),$T=((0,d.Z)(hC={},cn,"Could not load partition for ARN region `{bucketArn#region}`"),(0,d.Z)(hC,Oe,cn),hC),UT=((0,d.Z)(mC={},cn,"Invalid ARN: The ARN may only contain a single resource component after `accesspoint`."),(0,d.Z)(mC,Oe,cn),mC),zT=((0,d.Z)(gC={},cn,"Invalid ARN: bucket ARN is missing a region"),(0,d.Z)(gC,Oe,cn),gC),GT=((0,d.Z)(vC={},cn,"Invalid ARN: Expected a resource of the format `accesspoint:<accesspoint name>` but no name was provided"),(0,d.Z)(vC,Oe,cn),vC),z_=(0,d.Z)({},Fn,[(Rd={},(0,d.Z)(Rd,Mn,!0),(0,d.Z)(Rd,An,"sigv4"),(0,d.Z)(Rd,Bn,jn),(0,d.Z)(Rd,Ln,"{bucketArn#region}"),Rd)]),VT=(0,d.Z)({},Fn,[(Dd={},(0,d.Z)(Dd,Mn,!0),(0,d.Z)(Dd,An,"sigv4"),(0,d.Z)(Dd,Bn,DP),(0,d.Z)(Dd,Ln,"{bucketArn#region}"),Dd)]),HT=(0,d.Z)({},At,"UseObjectLambdaEndpoint"),KP=(0,d.Z)({},Fn,[(Td={},(0,d.Z)(Td,Mn,!0),(0,d.Z)(Td,An,"sigv4"),(0,d.Z)(Td,Bn,IP),(0,d.Z)(Td,Ln,"{Region}"),Td)]),qT=((0,d.Z)(gm={},pt,[Vr,Br,or,Tr,(_C={},(0,d.Z)(_C,Je,hn),(0,d.Z)(_C,Ye,[(0,d.Z)({},At,"Region"),"aws-global"]),_C)]),(0,d.Z)(gm,Dt,((0,d.Z)(mm={},on,xc),(0,d.Z)(mm,an,(0,d.Z)({},Fn,[(Id={},(0,d.Z)(Id,Mn,!0),(0,d.Z)(Id,An,"sigv4"),(0,d.Z)(Id,Bn,jn),(0,d.Z)(Id,Ln,"us-east-1"),Id)])),(0,d.Z)(mm,sn,{}),mm)),(0,d.Z)(gm,Oe,Dt),gm),KT=((0,d.Z)(yC={},Dt,((0,d.Z)(vm={},on,xc),(0,d.Z)(vm,an,ao),(0,d.Z)(vm,sn,{}),vm)),(0,d.Z)(yC,Oe,Dt),yC),G_=((0,d.Z)(_m={},on,xc),(0,d.Z)(_m,an,ao),(0,d.Z)(_m,sn,{}),_m),WT=((0,d.Z)(xm={},pt,[Vr,Br,$n,(xC={},(0,d.Z)(xC,Je,hn),(0,d.Z)(xC,Ye,[(0,d.Z)({},At,"Region"),"aws-global"]),xC)]),(0,d.Z)(xm,Dt,((0,d.Z)(ym={},on,"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}"),(0,d.Z)(ym,an,(0,d.Z)({},Fn,[(Od={},(0,d.Z)(Od,Mn,!0),(0,d.Z)(Od,An,"sigv4"),(0,d.Z)(Od,Bn,jn),(0,d.Z)(Od,Ln,"us-east-1"),Od)])),(0,d.Z)(ym,sn,{}),ym)),(0,d.Z)(xm,Oe,Dt),xm),XT=((0,d.Z)(bm={},on,"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}"),(0,d.Z)(bm,an,ao),(0,d.Z)(bm,sn,{}),bm),QT=((0,d.Z)(wm={},pt,[Vr,wr,or,Tr,(bC={},(0,d.Z)(bC,Je,hn),(0,d.Z)(bC,Ye,[(0,d.Z)({},At,"Region"),"aws-global"]),bC)]),(0,d.Z)(wm,Dt,((0,d.Z)(Cm={},on,xc),(0,d.Z)(Cm,an,(0,d.Z)({},Fn,[(Fd={},(0,d.Z)(Fd,Mn,!0),(0,d.Z)(Fd,An,"sigv4"),(0,d.Z)(Fd,Bn,jn),(0,d.Z)(Fd,Ln,"us-east-1"),Fd)])),(0,d.Z)(Cm,sn,{}),Cm)),(0,d.Z)(wm,Oe,Dt),wm),JT=((0,d.Z)(Em={},pt,[Vr,wr,$n,(CC={},(0,d.Z)(CC,Je,hn),(0,d.Z)(CC,Ye,[(0,d.Z)({},At,"Region"),"aws-global"]),CC)]),(0,d.Z)(Em,Dt,((0,d.Z)(Sm={},on,"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}"),(0,d.Z)(Sm,an,(0,d.Z)({},Fn,[(Md={},(0,d.Z)(Md,Mn,!0),(0,d.Z)(Md,An,"sigv4"),(0,d.Z)(Md,Bn,jn),(0,d.Z)(Md,Ln,"us-east-1"),Md)])),(0,d.Z)(Sm,sn,{}),Sm)),(0,d.Z)(Em,Oe,Dt),Em),YT=((0,d.Z)(Pm={},on,"https://s3-fips.{Region}.{partitionResult#dnsSuffix}"),(0,d.Z)(Pm,an,ao),(0,d.Z)(Pm,sn,{}),Pm),eI=((0,d.Z)(Am={},pt,[cr,Br,or,Tr,(wC={},(0,d.Z)(wC,Je,hn),(0,d.Z)(wC,Ye,[(0,d.Z)({},At,"Region"),"aws-global"]),wC)]),(0,d.Z)(Am,Dt,((0,d.Z)(km={},on,xc),(0,d.Z)(km,an,(0,d.Z)({},Fn,[(Bd={},(0,d.Z)(Bd,Mn,!0),(0,d.Z)(Bd,An,"sigv4"),(0,d.Z)(Bd,Bn,jn),(0,d.Z)(Bd,Ln,"us-east-1"),Bd)])),(0,d.Z)(km,sn,{}),km)),(0,d.Z)(Am,Oe,Dt),Am),tI=((0,d.Z)(Dm={},pt,[cr,Br,$n,(SC={},(0,d.Z)(SC,Je,hn),(0,d.Z)(SC,Ye,[(0,d.Z)({},At,"Region"),"aws-global"]),SC)]),(0,d.Z)(Dm,Dt,((0,d.Z)(Rm={},on,"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}"),(0,d.Z)(Rm,an,(0,d.Z)({},Fn,[(Nd={},(0,d.Z)(Nd,Mn,!0),(0,d.Z)(Nd,An,"sigv4"),(0,d.Z)(Nd,Bn,jn),(0,d.Z)(Nd,Ln,"us-east-1"),Nd)])),(0,d.Z)(Rm,sn,{}),Rm)),(0,d.Z)(Dm,Oe,Dt),Dm),nI=((0,d.Z)(Tm={},on,"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}"),(0,d.Z)(Tm,an,ao),(0,d.Z)(Tm,sn,{}),Tm),rI=((0,d.Z)(Om={},pt,[cr,wr,or,Tr,(EC={},(0,d.Z)(EC,Je,hn),(0,d.Z)(EC,Ye,[(0,d.Z)({},At,"Region"),"aws-global"]),EC)]),(0,d.Z)(Om,Dt,((0,d.Z)(Im={},on,xc),(0,d.Z)(Im,an,(0,d.Z)({},Fn,[(Zd={},(0,d.Z)(Zd,Mn,!0),(0,d.Z)(Zd,An,"sigv4"),(0,d.Z)(Zd,Bn,jn),(0,d.Z)(Zd,Ln,"us-east-1"),Zd)])),(0,d.Z)(Im,sn,{}),Im)),(0,d.Z)(Om,Oe,Dt),Om),iI=((0,d.Z)(Mm={},pt,[cr,wr,$n,(PC={},(0,d.Z)(PC,Je,hn),(0,d.Z)(PC,Ye,[(0,d.Z)({},At,"Region"),"aws-global"]),PC)]),(0,d.Z)(Mm,Dt,((0,d.Z)(Fm={},on,fT),(0,d.Z)(Fm,an,(0,d.Z)({},Fn,[(Ld={},(0,d.Z)(Ld,Mn,!0),(0,d.Z)(Ld,An,"sigv4"),(0,d.Z)(Ld,Bn,jn),(0,d.Z)(Ld,Ln,"us-east-1"),Ld)])),(0,d.Z)(Fm,sn,{}),Fm)),(0,d.Z)(Mm,Oe,Dt),Mm),oI=((0,d.Z)(Bm={},on,"https://s3.{Region}.{partitionResult#dnsSuffix}"),(0,d.Z)(Bm,an,ao),(0,d.Z)(Bm,sn,{}),Bm),tE=[(0,d.Z)({},At,"Region")],mj=[ns],aI=[(kC={},(0,d.Z)(kC,Je,yc),(0,d.Z)(kC,Ye,[(0,d.Z)({},At,RP),!1]),kC)],sI=[(AC={},(0,d.Z)(AC,Je,hn),(0,d.Z)(AC,Ye,[(0,d.Z)({},At,YD),"beta"]),AC)],gj=[(0,d.Z)({},At,"Endpoint")],V_=[or,Tr],uI=[pT],cI=[(RC={},(0,d.Z)(RC,Je,nT),(0,d.Z)(RC,Ye,[ns]),RC)],vj=[Br,or],Cc=[(Nm={},(0,d.Z)(Nm,Je,$_),(0,d.Z)(Nm,Ye,tE),(0,d.Z)(Nm,Ii,"partitionResult"),Nm)],$d=[(DC={},(0,d.Z)(DC,Je,hn),(0,d.Z)(DC,Ye,[(0,d.Z)({},At,"Region"),"us-east-1"]),DC)],lI=[(TC={},(0,d.Z)(TC,Je,yc),(0,d.Z)(TC,Ye,[(0,d.Z)({},At,"Region"),!1]),TC)],WP=[(IC={},(0,d.Z)(IC,Je,hn),(0,d.Z)(IC,Ye,[FT,sT]),IC)],dI=[(Zm={},(0,d.Z)(Zm,Je,Kr),(0,d.Z)(Zm,Ye,[Fo,"resourceId[1]"]),(0,d.Z)(Zm,Ii,OP),Zm),(FC={},(0,d.Z)(FC,Je,ri),(0,d.Z)(FC,Ye,[(OC={},(0,d.Z)(OC,Je,hn),(0,d.Z)(OC,Ye,[$P,""]),OC)]),FC)],_j=[Fo,"resourceId[1]"],fI=[Br],XP=[Pa],QP=[(NC={},(0,d.Z)(NC,Je,ri),(0,d.Z)(NC,Ye,[(BC={},(0,d.Z)(BC,Je,hn),(0,d.Z)(BC,Ye,[(MC={},(0,d.Z)(MC,Je,Kr),(0,d.Z)(MC,Ye,[Fo,"region"]),MC),""]),BC)]),NC)],pI=[(jC={},(0,d.Z)(jC,Je,ri),(0,d.Z)(jC,Ye,[(LC={},(0,d.Z)(LC,Je,Qo),(0,d.Z)(LC,Ye,[(ZC={},(0,d.Z)(ZC,Je,Kr),(0,d.Z)(ZC,Ye,[Fo,"resourceId[2]"]),ZC)]),LC)]),jC)],yj=[Fo,"resourceId[2]"],JP=[(Lm={},(0,d.Z)(Lm,Je,$_),(0,d.Z)(Lm,Ye,[($C={},(0,d.Z)($C,Je,Kr),(0,d.Z)($C,Ye,[Fo,"region"]),$C)]),(0,d.Z)(Lm,Ii,"bucketPartition"),Lm)],hI=[(zC={},(0,d.Z)(zC,Je,hn),(0,d.Z)(zC,Ye,[zP,(UC={},(0,d.Z)(UC,Je,Kr),(0,d.Z)(UC,Ye,[(0,d.Z)({},At,"partitionResult"),An]),UC)]),zC)],YP=[(VC={},(0,d.Z)(VC,Je,yc),(0,d.Z)(VC,Ye,[(GC={},(0,d.Z)(GC,Je,Kr),(0,d.Z)(GC,Ye,[Fo,"region"]),GC),!0]),VC)],ek=[(HC={},(0,d.Z)(HC,Je,yc),(0,d.Z)(HC,Ye,[ZT,!1]),HC)],mI=[(qC={},(0,d.Z)(qC,Je,yc),(0,d.Z)(qC,Ye,[$P,!1]),qC)],nE=[Vr],gI=[(KC={},(0,d.Z)(KC,Je,yc),(0,d.Z)(KC,Ye,[(0,d.Z)({},At,"Region"),!0]),KC)],tk=[KT],bj=(0,d.Z)({version:"1.0",parameters:{Bucket:FP,Region:FP,UseFIPS:U_,UseDualStack:U_,Endpoint:FP,ForcePathStyle:JS,Accelerate:U_,UseGlobalEndpoint:U_,UseObjectLambdaEndpoint:JS,DisableAccessPoints:JS,DisableMultiRegionAccessPoints:U_,UseArnRegion:JS}},bt,[(XS={},(0,d.Z)(XS,Oe,Ct),(0,d.Z)(XS,bt,[(L_={},(0,d.Z)(L_,pt,[(WC={},(0,d.Z)(WC,Je,Qo),(0,d.Z)(WC,Ye,tE),WC)]),(0,d.Z)(L_,Oe,Ct),(0,d.Z)(L_,bt,[(WS={},(0,d.Z)(WS,Oe,Ct),(0,d.Z)(WS,bt,[(ng={},(0,d.Z)(ng,pt,[pT,(jm={},(0,d.Z)(jm,Je,j_),(0,d.Z)(jm,Ye,[ns,49,50,ts]),(0,d.Z)(jm,Ii,JD),jm),($m={},(0,d.Z)($m,Je,j_),(0,d.Z)($m,Ye,[ns,8,12,ts]),(0,d.Z)($m,Ii,YD),$m),(Um={},(0,d.Z)(Um,Je,j_),(0,d.Z)(Um,Ye,[ns,0,7,ts]),(0,d.Z)(Um,Ii,eT),Um),(zm={},(0,d.Z)(zm,Je,j_),(0,d.Z)(zm,Ye,[ns,32,49,ts]),(0,d.Z)(zm,Ii,RP),zm),(Gm={},(0,d.Z)(Gm,Je,$_),(0,d.Z)(Gm,Ye,tE),(0,d.Z)(Gm,Ii,"regionPartition"),Gm),(XC={},(0,d.Z)(XC,Je,hn),(0,d.Z)(XC,Ye,[(0,d.Z)({},At,eT),"--op-s3"]),XC)]),(0,d.Z)(ng,Oe,Ct),(0,d.Z)(ng,bt,[(tg={},(0,d.Z)(tg,pt,aI),(0,d.Z)(tg,Oe,Ct),(0,d.Z)(tg,bt,[(YC={},(0,d.Z)(YC,Oe,Ct),(0,d.Z)(YC,bt,[(Wm={},(0,d.Z)(Wm,pt,[(QC={},(0,d.Z)(QC,Je,hn),(0,d.Z)(QC,Ye,[hT,"e"]),QC)]),(0,d.Z)(Wm,Oe,Ct),(0,d.Z)(Wm,bt,[(qm={},(0,d.Z)(qm,pt,sI),(0,d.Z)(qm,Oe,Ct),(0,d.Z)(qm,bt,[mT,(Hm={},(0,d.Z)(Hm,pt,V_),(0,d.Z)(Hm,"endpoint",(Vm={},(0,d.Z)(Vm,on,"https://{Bucket}.ec2.{url#authority}"),(0,d.Z)(Vm,an,YS),(0,d.Z)(Vm,sn,xi),Vm)),(0,d.Z)(Hm,Oe,Dt),Hm)]),qm),(0,d.Z)({endpoint:(Km={},(0,d.Z)(Km,on,"https://{Bucket}.ec2.s3-outposts.{Region}.{regionPartition#dnsSuffix}"),(0,d.Z)(Km,an,YS),(0,d.Z)(Km,sn,xi),Km)},Oe,Dt)]),Wm),(eg={},(0,d.Z)(eg,pt,[(JC={},(0,d.Z)(JC,Je,hn),(0,d.Z)(JC,Ye,[hT,"o"]),JC)]),(0,d.Z)(eg,Oe,Ct),(0,d.Z)(eg,bt,[(Jm={},(0,d.Z)(Jm,pt,sI),(0,d.Z)(Jm,Oe,Ct),(0,d.Z)(Jm,bt,[mT,(Qm={},(0,d.Z)(Qm,pt,V_),(0,d.Z)(Qm,"endpoint",(Xm={},(0,d.Z)(Xm,on,"https://{Bucket}.op-{outpostId}.{url#authority}"),(0,d.Z)(Xm,an,YS),(0,d.Z)(Xm,sn,xi),Xm)),(0,d.Z)(Qm,Oe,Dt),Qm)]),Jm),(0,d.Z)({endpoint:(Ym={},(0,d.Z)(Ym,on,"https://{Bucket}.op-{outpostId}.s3-outposts.{Region}.{regionPartition#dnsSuffix}"),(0,d.Z)(Ym,an,YS),(0,d.Z)(Ym,sn,xi),Ym)},Oe,Dt)]),eg),(0,d.Z)({error:'Unrecognized hardware type: "Expected hardware type o or e but got {hardwareType}"'},Oe,cn)]),YC)]),tg),(0,d.Z)({error:"Invalid ARN: The outpost Id must only contain a-z, A-Z, 0-9 and `-`."},Oe,cn)]),ng),(u_={},(0,d.Z)(u_,pt,uI),(0,d.Z)(u_,Oe,Ct),(0,d.Z)(u_,bt,[(rg={},(0,d.Z)(rg,pt,[or,(nw={},(0,d.Z)(nw,Je,ri),(0,d.Z)(nw,Ye,[(tw={},(0,d.Z)(tw,Je,Qo),(0,d.Z)(tw,Ye,[(ew={},(0,d.Z)(ew,Je,tT),(0,d.Z)(ew,Ye,gj),ew)]),tw)]),nw)]),(0,d.Z)(rg,"error","Custom endpoint `{Endpoint}` was not a valid URI"),(0,d.Z)(rg,Oe,cn),rg),(NS={},(0,d.Z)(NS,Oe,Ct),(0,d.Z)(NS,bt,[(og={},(0,d.Z)(og,pt,[(rw={},(0,d.Z)(rw,Je,Qo),(0,d.Z)(rw,Ye,[gT]),rw),(iw={},(0,d.Z)(iw,Je,nn),(0,d.Z)(iw,Ye,[gT,ts]),iw)]),(0,d.Z)(og,Oe,Ct),(0,d.Z)(og,bt,[(ow={},(0,d.Z)(ow,Oe,Ct),(0,d.Z)(ow,bt,[(ig={},(0,d.Z)(ig,pt,cI),(0,d.Z)(ig,"error","Path-style addressing cannot be used with ARN buckets"),(0,d.Z)(ig,Oe,cn),ig),vT]),ow)]),og),(Fg={},(0,d.Z)(Fg,pt,[(aw={},(0,d.Z)(aw,Je,rT),(0,d.Z)(aw,Ye,[ns,!1]),aw)]),(0,d.Z)(Fg,Oe,Ct),(0,d.Z)(Fg,bt,[(Og={},(0,d.Z)(Og,pt,Cc),(0,d.Z)(Og,Oe,Ct),(0,d.Z)(Og,bt,[(hw={},(0,d.Z)(hw,Oe,Ct),(0,d.Z)(hw,bt,[(Ig={},(0,d.Z)(Ig,pt,lI),(0,d.Z)(Ig,Oe,Ct),(0,d.Z)(Ig,bt,[(pw={},(0,d.Z)(pw,Oe,Ct),(0,d.Z)(pw,bt,[MP,(fw={},(0,d.Z)(fw,Oe,Ct),(0,d.Z)(fw,bt,[(ag={},(0,d.Z)(ag,pt,[Pa,Vr]),(0,d.Z)(ag,"error","Accelerate cannot be used with FIPS"),(0,d.Z)(ag,Oe,cn),ag),(dw={},(0,d.Z)(dw,Oe,Ct),(0,d.Z)(dw,bt,[(sg={},(0,d.Z)(sg,pt,[Pa,hj]),(0,d.Z)(sg,"error","S3 Accelerate cannot be used in this region"),(0,d.Z)(sg,Oe,cn),sg),(lw={},(0,d.Z)(lw,Oe,Ct),(0,d.Z)(lw,bt,[(ug={},(0,d.Z)(ug,pt,[or,Br]),(0,d.Z)(ug,"error",TP),(0,d.Z)(ug,Oe,cn),ug),(cw={},(0,d.Z)(cw,Oe,Ct),(0,d.Z)(cw,bt,[(cg={},(0,d.Z)(cg,pt,[or,Vr]),(0,d.Z)(cg,"error",TP),(0,d.Z)(cg,Oe,cn),cg),(uw={},(0,d.Z)(uw,Oe,Ct),(0,d.Z)(uw,bt,[(lg={},(0,d.Z)(lg,pt,[or,Pa]),(0,d.Z)(lg,"error",TP),(0,d.Z)(lg,Oe,cn),lg),(sw={},(0,d.Z)(sw,Oe,Ct),(0,d.Z)(sw,bt,[_T,_T,(dg={},(0,d.Z)(dg,pt,[Br,Vr,Pi,$n,xr,oo]),(0,d.Z)(dg,Oe,Ct),(0,d.Z)(dg,bt,[(0,d.Z)({endpoint:yT},Oe,Dt)]),dg),(fg={},(0,d.Z)(fg,pt,[Br,Vr,Pi,$n,xr,so]),(0,d.Z)(fg,"endpoint",yT),(0,d.Z)(fg,Oe,Dt),fg),xT,xT,(pg={},(0,d.Z)(pg,pt,[wr,Vr,Pi,$n,xr,oo]),(0,d.Z)(pg,Oe,Ct),(0,d.Z)(pg,bt,[(0,d.Z)({endpoint:bT},Oe,Dt)]),pg),(hg={},(0,d.Z)(hg,pt,[wr,Vr,Pi,$n,xr,so]),(0,d.Z)(hg,"endpoint",bT),(0,d.Z)(hg,Oe,Dt),hg),CT,CT,(mg={},(0,d.Z)(mg,pt,[Br,cr,Pa,$n,xr,oo]),(0,d.Z)(mg,Oe,Ct),(0,d.Z)(mg,bt,[(0,d.Z)({endpoint:wT},Oe,Dt)]),mg),(gg={},(0,d.Z)(gg,pt,[Br,cr,Pa,$n,xr,so]),(0,d.Z)(gg,"endpoint",wT),(0,d.Z)(gg,Oe,Dt),gg),ST,ST,(vg={},(0,d.Z)(vg,pt,[Br,cr,Pi,$n,xr,oo]),(0,d.Z)(vg,Oe,Ct),(0,d.Z)(vg,bt,[(0,d.Z)({endpoint:ET},Oe,Dt)]),vg),(_g={},(0,d.Z)(_g,pt,[Br,cr,Pi,$n,xr,so]),(0,d.Z)(_g,"endpoint",ET),(0,d.Z)(_g,Oe,Dt),_g),PT,AT,PT,AT,(xg={},(0,d.Z)(xg,pt,[wr,cr,Pi,or,Tr,kT,xr,oo]),(0,d.Z)(xg,Oe,Ct),(0,d.Z)(xg,bt,[(yg={},(0,d.Z)(yg,pt,$d),(0,d.Z)(yg,"endpoint",NP),(0,d.Z)(yg,Oe,Dt),yg),(0,d.Z)({endpoint:NP},Oe,Dt)]),xg),(Cg={},(0,d.Z)(Cg,pt,[wr,cr,Pi,or,Tr,RT,xr,oo]),(0,d.Z)(Cg,Oe,Ct),(0,d.Z)(Cg,bt,[(bg={},(0,d.Z)(bg,pt,$d),(0,d.Z)(bg,"endpoint",ZP),(0,d.Z)(bg,Oe,Dt),bg),DT]),Cg),(wg={},(0,d.Z)(wg,pt,[wr,cr,Pi,or,Tr,kT,xr,so]),(0,d.Z)(wg,"endpoint",NP),(0,d.Z)(wg,Oe,Dt),wg),(Sg={},(0,d.Z)(Sg,pt,[wr,cr,Pi,or,Tr,RT,xr,so]),(0,d.Z)(Sg,"endpoint",ZP),(0,d.Z)(Sg,Oe,Dt),Sg),TT,TT,(Pg={},(0,d.Z)(Pg,pt,[wr,cr,Pa,$n,xr,oo]),(0,d.Z)(Pg,Oe,Ct),(0,d.Z)(Pg,bt,[(Eg={},(0,d.Z)(Eg,pt,$d),(0,d.Z)(Eg,"endpoint",LP),(0,d.Z)(Eg,Oe,Dt),Eg),(0,d.Z)({endpoint:LP},Oe,Dt)]),Pg),(kg={},(0,d.Z)(kg,pt,[wr,cr,Pa,$n,xr,so]),(0,d.Z)(kg,"endpoint",LP),(0,d.Z)(kg,Oe,Dt),kg),IT,IT,(Dg={},(0,d.Z)(Dg,pt,[wr,cr,Pi,$n,xr,oo]),(0,d.Z)(Dg,Oe,Ct),(0,d.Z)(Dg,bt,[(Rg={},(0,d.Z)(Rg,pt,$d),(0,d.Z)(Rg,"endpoint",(Ag={},(0,d.Z)(Ag,on,iT),(0,d.Z)(Ag,an,ao),(0,d.Z)(Ag,sn,xi),Ag)),(0,d.Z)(Rg,Oe,Dt),Rg),(0,d.Z)({endpoint:OT},Oe,Dt)]),Dg),(Tg={},(0,d.Z)(Tg,pt,[wr,cr,Pi,$n,xr,so]),(0,d.Z)(Tg,"endpoint",OT),(0,d.Z)(Tg,Oe,Dt),Tg)]),sw)]),uw)]),cw)]),lw)]),dw)]),fw)]),pw)]),Ig),eE]),hw)]),Og),bc]),Fg),(Ng={},(0,d.Z)(Ng,pt,[or,Tr,(gw={},(0,d.Z)(gw,Je,hn),(0,d.Z)(gw,Ye,[(mw={},(0,d.Z)(mw,Je,Kr),(0,d.Z)(mw,Ye,[BP,"scheme"]),mw),"http"]),gw),(vw={},(0,d.Z)(vw,Je,rT),(0,d.Z)(vw,Ye,[ns,ts]),vw),cr,wr,Pi]),(0,d.Z)(Ng,Oe,Ct),(0,d.Z)(Ng,bt,[(Bg={},(0,d.Z)(Bg,pt,Cc),(0,d.Z)(Bg,Oe,Ct),(0,d.Z)(Bg,bt,[(_w={},(0,d.Z)(_w,Oe,Ct),(0,d.Z)(_w,bt,[(Mg={},(0,d.Z)(Mg,pt,lI),(0,d.Z)(Mg,Oe,Ct),(0,d.Z)(Mg,bt,[DT]),Mg),eE]),_w)]),Bg),bc]),Ng),(o_={},(0,d.Z)(o_,pt,[(Zg={},(0,d.Z)(Zg,Je,nT),(0,d.Z)(Zg,Ye,mj),(0,d.Z)(Zg,Ii,oT),Zg)]),(0,d.Z)(o_,Oe,Ct),(0,d.Z)(o_,bt,[(i_={},(0,d.Z)(i_,pt,[(Lg={},(0,d.Z)(Lg,Je,Kr),(0,d.Z)(Lg,Ye,[Fo,"resourceId[0]"]),(0,d.Z)(Lg,Ii,aT),Lg),(xw={},(0,d.Z)(xw,Je,ri),(0,d.Z)(xw,Ye,[(yw={},(0,d.Z)(yw,Je,hn),(0,d.Z)(yw,Ye,[FT,""]),yw)]),xw)]),(0,d.Z)(i_,Oe,Ct),(0,d.Z)(i_,bt,[(OS={},(0,d.Z)(OS,Oe,Ct),(0,d.Z)(OS,bt,[(nv={},(0,d.Z)(nv,pt,[(bw={},(0,d.Z)(bw,Je,hn),(0,d.Z)(bw,Ye,[jP,IP]),bw)]),(0,d.Z)(nv,Oe,Ct),(0,d.Z)(nv,bt,[(tv={},(0,d.Z)(tv,pt,WP),(0,d.Z)(tv,Oe,Ct),(0,d.Z)(tv,bt,[(Zw={},(0,d.Z)(Zw,Oe,Ct),(0,d.Z)(Zw,bt,[(ev={},(0,d.Z)(ev,pt,dI),(0,d.Z)(ev,Oe,Ct),(0,d.Z)(ev,bt,[(Nw={},(0,d.Z)(Nw,Oe,Ct),(0,d.Z)(Nw,bt,[MT,(Bw={},(0,d.Z)(Bw,Oe,Ct),(0,d.Z)(Bw,bt,[BT,(Mw={},(0,d.Z)(Mw,Oe,Ct),(0,d.Z)(Mw,bt,[(Yg={},(0,d.Z)(Yg,pt,QP),(0,d.Z)(Yg,Oe,Ct),(0,d.Z)(Yg,bt,[(Fw={},(0,d.Z)(Fw,Oe,Ct),(0,d.Z)(Fw,bt,[NT,(Ow={},(0,d.Z)(Ow,Oe,Ct),(0,d.Z)(Ow,bt,[(Jg={},(0,d.Z)(Jg,pt,pI),(0,d.Z)(Jg,Oe,Ct),(0,d.Z)(Jg,bt,[(Iw={},(0,d.Z)(Iw,Oe,Ct),(0,d.Z)(Iw,bt,[UP,(Tw={},(0,d.Z)(Tw,Oe,Ct),(0,d.Z)(Tw,bt,[(Qg={},(0,d.Z)(Qg,pt,JP),(0,d.Z)(Qg,Oe,Ct),(0,d.Z)(Qg,bt,[(Dw={},(0,d.Z)(Dw,Oe,Ct),(0,d.Z)(Dw,bt,[(Xg={},(0,d.Z)(Xg,pt,Cc),(0,d.Z)(Xg,Oe,Ct),(0,d.Z)(Xg,bt,[(Rw={},(0,d.Z)(Rw,Oe,Ct),(0,d.Z)(Rw,bt,[(Wg={},(0,d.Z)(Wg,pt,hI),(0,d.Z)(Wg,Oe,Ct),(0,d.Z)(Wg,bt,[(Aw={},(0,d.Z)(Aw,Oe,Ct),(0,d.Z)(Aw,bt,[(Kg={},(0,d.Z)(Kg,pt,YP),(0,d.Z)(Kg,Oe,Ct),(0,d.Z)(Kg,bt,[(kw={},(0,d.Z)(kw,Oe,Ct),(0,d.Z)(kw,bt,[(jg={},(0,d.Z)(jg,pt,[(Cw={},(0,d.Z)(Cw,Je,hn),(0,d.Z)(Cw,Ye,[ZT,""]),Cw)]),(0,d.Z)(jg,"error","Invalid ARN: Missing account id"),(0,d.Z)(jg,Oe,cn),jg),(Pw={},(0,d.Z)(Pw,Oe,Ct),(0,d.Z)(Pw,bt,[(qg={},(0,d.Z)(qg,pt,ek),(0,d.Z)(qg,Oe,Ct),(0,d.Z)(qg,bt,[(Ew={},(0,d.Z)(Ew,Oe,Ct),(0,d.Z)(Ew,bt,[(Hg={},(0,d.Z)(Hg,pt,mI),(0,d.Z)(Hg,Oe,Ct),(0,d.Z)(Hg,bt,[(Sw={},(0,d.Z)(Sw,Oe,Ct),(0,d.Z)(Sw,bt,[LT,(ww={},(0,d.Z)(ww,Oe,Ct),(0,d.Z)(ww,bt,[(Ug={},(0,d.Z)(Ug,pt,V_),(0,d.Z)(Ug,"endpoint",($g={},(0,d.Z)($g,on,uT),(0,d.Z)($g,an,GP),(0,d.Z)($g,sn,xi),$g)),(0,d.Z)(Ug,Oe,Dt),Ug),(Gg={},(0,d.Z)(Gg,pt,nE),(0,d.Z)(Gg,"endpoint",(zg={},(0,d.Z)(zg,on,"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}"),(0,d.Z)(zg,an,GP),(0,d.Z)(zg,sn,xi),zg)),(0,d.Z)(Gg,Oe,Dt),Gg),(0,d.Z)({endpoint:(Vg={},(0,d.Z)(Vg,on,"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda.{bucketArn#region}.{bucketPartition#dnsSuffix}"),(0,d.Z)(Vg,an,GP),(0,d.Z)(Vg,sn,xi),Vg)},Oe,Dt)]),ww)]),Sw)]),Hg),jT]),Ew)]),qg),VP]),Pw)]),kw)]),Kg),HP]),Aw)]),Wg),qP]),Rw)]),Xg),bc]),Dw)]),Qg),$T]),Tw)]),Iw)]),Jg),UT]),Ow)]),Fw)]),Yg),zT]),Mw)]),Bw)]),Nw)]),ev),GT]),Zw)]),tv),(0,d.Z)({error:"Invalid ARN: Object Lambda ARNs only support `accesspoint` arn types, but found: `{arnType}`"},Oe,cn)]),nv),(Bv={},(0,d.Z)(Bv,pt,WP),(0,d.Z)(Bv,Oe,Ct),(0,d.Z)(Bv,bt,[(Mv={},(0,d.Z)(Mv,pt,dI),(0,d.Z)(Mv,Oe,Ct),(0,d.Z)(Mv,bt,[(pS={},(0,d.Z)(pS,Oe,Ct),(0,d.Z)(pS,bt,[(Ev={},(0,d.Z)(Ev,pt,QP),(0,d.Z)(Ev,Oe,Ct),(0,d.Z)(Ev,bt,[(Sv={},(0,d.Z)(Sv,pt,WP),(0,d.Z)(Sv,Oe,Ct),(0,d.Z)(Sv,bt,[(wv={},(0,d.Z)(wv,pt,QP),(0,d.Z)(wv,Oe,Ct),(0,d.Z)(wv,bt,[(eS={},(0,d.Z)(eS,Oe,Ct),(0,d.Z)(eS,bt,[NT,(Yw={},(0,d.Z)(Yw,Oe,Ct),(0,d.Z)(Yw,bt,[(Cv={},(0,d.Z)(Cv,pt,pI),(0,d.Z)(Cv,Oe,Ct),(0,d.Z)(Cv,bt,[(Jw={},(0,d.Z)(Jw,Oe,Ct),(0,d.Z)(Jw,bt,[UP,(Qw={},(0,d.Z)(Qw,Oe,Ct),(0,d.Z)(Qw,bt,[(bv={},(0,d.Z)(bv,pt,JP),(0,d.Z)(bv,Oe,Ct),(0,d.Z)(bv,bt,[(Xw={},(0,d.Z)(Xw,Oe,Ct),(0,d.Z)(Xw,bt,[(xv={},(0,d.Z)(xv,pt,Cc),(0,d.Z)(xv,Oe,Ct),(0,d.Z)(xv,bt,[(Ww={},(0,d.Z)(Ww,Oe,Ct),(0,d.Z)(Ww,bt,[(yv={},(0,d.Z)(yv,pt,[(Lw={},(0,d.Z)(Lw,Je,hn),(0,d.Z)(Lw,Ye,[zP,"{partitionResult#name}"]),Lw)]),(0,d.Z)(yv,Oe,Ct),(0,d.Z)(yv,bt,[(Kw={},(0,d.Z)(Kw,Oe,Ct),(0,d.Z)(Kw,bt,[(_v={},(0,d.Z)(_v,pt,YP),(0,d.Z)(_v,Oe,Ct),(0,d.Z)(_v,bt,[(qw={},(0,d.Z)(qw,Oe,Ct),(0,d.Z)(qw,bt,[(vv={},(0,d.Z)(vv,pt,[(jw={},(0,d.Z)(jw,Je,hn),(0,d.Z)(jw,Ye,[jP,jn]),jw)]),(0,d.Z)(vv,Oe,Ct),(0,d.Z)(vv,bt,[(Hw={},(0,d.Z)(Hw,Oe,Ct),(0,d.Z)(Hw,bt,[(gv={},(0,d.Z)(gv,pt,ek),(0,d.Z)(gv,Oe,Ct),(0,d.Z)(gv,bt,[(Vw={},(0,d.Z)(Vw,Oe,Ct),(0,d.Z)(Vw,bt,[(mv={},(0,d.Z)(mv,pt,mI),(0,d.Z)(mv,Oe,Ct),(0,d.Z)(mv,bt,[(Gw={},(0,d.Z)(Gw,Oe,Ct),(0,d.Z)(Gw,bt,[(rv={},(0,d.Z)(rv,pt,XP),(0,d.Z)(rv,"error","Access Points do not support S3 Accelerate"),(0,d.Z)(rv,Oe,cn),rv),(zw={},(0,d.Z)(zw,Oe,Ct),(0,d.Z)(zw,bt,[LT,(Uw={},(0,d.Z)(Uw,Oe,Ct),(0,d.Z)(Uw,bt,[(iv={},(0,d.Z)(iv,pt,vj),(0,d.Z)(iv,"error","DualStack cannot be combined with a Host override (PrivateLink)"),(0,d.Z)(iv,Oe,cn),iv),($w={},(0,d.Z)($w,Oe,Ct),(0,d.Z)($w,bt,[(av={},(0,d.Z)(av,pt,[Vr,Br]),(0,d.Z)(av,"endpoint",(ov={},(0,d.Z)(ov,on,"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}"),(0,d.Z)(ov,an,z_),(0,d.Z)(ov,sn,xi),ov)),(0,d.Z)(av,Oe,Dt),av),(uv={},(0,d.Z)(uv,pt,[Vr,wr]),(0,d.Z)(uv,"endpoint",(sv={},(0,d.Z)(sv,on,"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}"),(0,d.Z)(sv,an,z_),(0,d.Z)(sv,sn,xi),sv)),(0,d.Z)(uv,Oe,Dt),uv),(lv={},(0,d.Z)(lv,pt,[cr,Br]),(0,d.Z)(lv,"endpoint",(cv={},(0,d.Z)(cv,on,"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}"),(0,d.Z)(cv,an,z_),(0,d.Z)(cv,sn,xi),cv)),(0,d.Z)(lv,Oe,Dt),lv),(fv={},(0,d.Z)(fv,pt,[cr,wr,or,Tr]),(0,d.Z)(fv,"endpoint",(dv={},(0,d.Z)(dv,on,uT),(0,d.Z)(dv,an,z_),(0,d.Z)(dv,sn,xi),dv)),(0,d.Z)(fv,Oe,Dt),fv),(hv={},(0,d.Z)(hv,pt,[cr,wr]),(0,d.Z)(hv,"endpoint",(pv={},(0,d.Z)(pv,on,"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.{bucketArn#region}.{bucketPartition#dnsSuffix}"),(0,d.Z)(pv,an,z_),(0,d.Z)(pv,sn,xi),pv)),(0,d.Z)(hv,Oe,Dt),hv)]),$w)]),Uw)]),zw)]),Gw)]),mv),jT]),Vw)]),gv),VP]),Hw)]),vv),(0,d.Z)({error:"Invalid ARN: The ARN was not for the S3 service, found: {bucketArn#service}"},Oe,cn)]),qw)]),_v),HP]),Kw)]),yv),qP]),Ww)]),xv),bc]),Xw)]),bv),$T]),Qw)]),Jw)]),Cv),UT]),Yw)]),eS)]),wv),zT]),Sv)]),Ev),(fS={},(0,d.Z)(fS,Oe,Ct),(0,d.Z)(fS,bt,[(Fv={},(0,d.Z)(Fv,pt,[(tS={},(0,d.Z)(tS,Je,yc),(0,d.Z)(tS,Ye,[$P,ts]),tS)]),(0,d.Z)(Fv,Oe,Ct),(0,d.Z)(Fv,bt,[(dS={},(0,d.Z)(dS,Oe,Ct),(0,d.Z)(dS,bt,[(Pv={},(0,d.Z)(Pv,pt,fI),(0,d.Z)(Pv,"error","S3 MRAP does not support dual-stack"),(0,d.Z)(Pv,Oe,cn),Pv),(lS={},(0,d.Z)(lS,Oe,Ct),(0,d.Z)(lS,bt,[(kv={},(0,d.Z)(kv,pt,nE),(0,d.Z)(kv,"error","S3 MRAP does not support FIPS"),(0,d.Z)(kv,Oe,cn),kv),(cS={},(0,d.Z)(cS,Oe,Ct),(0,d.Z)(cS,bt,[(Av={},(0,d.Z)(Av,pt,XP),(0,d.Z)(Av,"error","S3 MRAP does not support S3 Accelerate"),(0,d.Z)(Av,Oe,cn),Av),(uS={},(0,d.Z)(uS,Oe,Ct),(0,d.Z)(uS,bt,[(Rv={},(0,d.Z)(Rv,pt,[(nS={},(0,d.Z)(nS,Je,nn),(0,d.Z)(nS,Ye,[(0,d.Z)({},At,"DisableMultiRegionAccessPoints"),ts]),nS)]),(0,d.Z)(Rv,"error","Invalid configuration: Multi-Region Access Point ARNs are disabled."),(0,d.Z)(Rv,Oe,cn),Rv),(sS={},(0,d.Z)(sS,Oe,Ct),(0,d.Z)(sS,bt,[(Ov={},(0,d.Z)(Ov,pt,[(Dv={},(0,d.Z)(Dv,Je,$_),(0,d.Z)(Dv,Ye,tE),(0,d.Z)(Dv,Ii,cT),Dv)]),(0,d.Z)(Ov,Oe,Ct),(0,d.Z)(Ov,bt,[(aS={},(0,d.Z)(aS,Oe,Ct),(0,d.Z)(aS,bt,[(Iv={},(0,d.Z)(Iv,pt,[(oS={},(0,d.Z)(oS,Je,hn),(0,d.Z)(oS,Ye,[(rS={},(0,d.Z)(rS,Je,Kr),(0,d.Z)(rS,Ye,[(0,d.Z)({},At,cT),An]),rS),(iS={},(0,d.Z)(iS,Je,Kr),(0,d.Z)(iS,Ye,[Fo,"partition"]),iS)]),oS)]),(0,d.Z)(Iv,Oe,Ct),(0,d.Z)(Iv,bt,[(0,d.Z)({endpoint:(Tv={},(0,d.Z)(Tv,on,"https://{accessPointName}.accesspoint.s3-global.{mrapPartition#dnsSuffix}"),(0,d.Z)(Tv,an,(0,d.Z)({},Fn,[(jd={},(0,d.Z)(jd,Mn,ts),(0,d.Z)(jd,"name","sigv4a"),(0,d.Z)(jd,Bn,jn),(0,d.Z)(jd,"signingRegionSet",["*"]),jd)])),(0,d.Z)(Tv,sn,xi),Tv)},Oe,Dt)]),Iv),(0,d.Z)({error:"Client was configured for partition `{mrapPartition#name}` but bucket referred to partition `{bucketArn#partition}`"},Oe,cn)]),aS)]),Ov),(0,d.Z)({error:"{Region} was not a valid region"},Oe,cn)]),sS)]),uS)]),cS)]),lS)]),dS)]),Fv),(0,d.Z)({error:"Invalid Access Point Name"},Oe,cn)]),fS)]),pS)]),Mv),GT]),Bv),(r_={},(0,d.Z)(r_,pt,[(hS={},(0,d.Z)(hS,Je,hn),(0,d.Z)(hS,Ye,[jP,DP]),hS)]),(0,d.Z)(r_,Oe,Ct),(0,d.Z)(r_,bt,[(Nv={},(0,d.Z)(Nv,pt,fI),(0,d.Z)(Nv,"error","S3 Outposts does not support Dual-stack"),(0,d.Z)(Nv,Oe,cn),Nv),(IS={},(0,d.Z)(IS,Oe,Ct),(0,d.Z)(IS,bt,[(Zv={},(0,d.Z)(Zv,pt,nE),(0,d.Z)(Zv,"error","S3 Outposts does not support FIPS"),(0,d.Z)(Zv,Oe,cn),Zv),(TS={},(0,d.Z)(TS,Oe,Ct),(0,d.Z)(TS,bt,[(Lv={},(0,d.Z)(Lv,pt,XP),(0,d.Z)(Lv,"error","S3 Outposts does not support S3 Accelerate"),(0,d.Z)(Lv,Oe,cn),Lv),(DS={},(0,d.Z)(DS,Oe,Ct),(0,d.Z)(DS,bt,[(jv={},(0,d.Z)(jv,pt,[(gS={},(0,d.Z)(gS,Je,Qo),(0,d.Z)(gS,Ye,[(mS={},(0,d.Z)(mS,Je,Kr),(0,d.Z)(mS,Ye,[Fo,"resourceId[4]"]),mS)]),gS)]),(0,d.Z)(jv,"error","Invalid Arn: Outpost Access Point ARN contains sub resources"),(0,d.Z)(jv,Oe,cn),jv),(RS={},(0,d.Z)(RS,Oe,Ct),(0,d.Z)(RS,bt,[(n_={},(0,d.Z)(n_,pt,[($v={},(0,d.Z)($v,Je,Kr),(0,d.Z)($v,Ye,_j),(0,d.Z)($v,Ii,RP),$v)]),(0,d.Z)(n_,Oe,Ct),(0,d.Z)(n_,bt,[(AS={},(0,d.Z)(AS,Oe,Ct),(0,d.Z)(AS,bt,[(t_={},(0,d.Z)(t_,pt,aI),(0,d.Z)(t_,Oe,Ct),(0,d.Z)(t_,bt,[(kS={},(0,d.Z)(kS,Oe,Ct),(0,d.Z)(kS,bt,[UP,(PS={},(0,d.Z)(PS,Oe,Ct),(0,d.Z)(PS,bt,[(e_={},(0,d.Z)(e_,pt,JP),(0,d.Z)(e_,Oe,Ct),(0,d.Z)(e_,bt,[(ES={},(0,d.Z)(ES,Oe,Ct),(0,d.Z)(ES,bt,[(Yv={},(0,d.Z)(Yv,pt,Cc),(0,d.Z)(Yv,Oe,Ct),(0,d.Z)(Yv,bt,[(SS={},(0,d.Z)(SS,Oe,Ct),(0,d.Z)(SS,bt,[(Jv={},(0,d.Z)(Jv,pt,hI),(0,d.Z)(Jv,Oe,Ct),(0,d.Z)(Jv,bt,[(wS={},(0,d.Z)(wS,Oe,Ct),(0,d.Z)(wS,bt,[(Qv={},(0,d.Z)(Qv,pt,YP),(0,d.Z)(Qv,Oe,Ct),(0,d.Z)(Qv,bt,[(CS={},(0,d.Z)(CS,Oe,Ct),(0,d.Z)(CS,bt,[(Xv={},(0,d.Z)(Xv,pt,ek),(0,d.Z)(Xv,Oe,Ct),(0,d.Z)(Xv,bt,[(bS={},(0,d.Z)(bS,Oe,Ct),(0,d.Z)(bS,bt,[(Wv={},(0,d.Z)(Wv,pt,[(Uv={},(0,d.Z)(Uv,Je,Kr),(0,d.Z)(Uv,Ye,yj),(0,d.Z)(Uv,Ii,lT),Uv)]),(0,d.Z)(Wv,Oe,Ct),(0,d.Z)(Wv,bt,[(xS={},(0,d.Z)(xS,Oe,Ct),(0,d.Z)(xS,bt,[(Kv={},(0,d.Z)(Kv,pt,[(zv={},(0,d.Z)(zv,Je,Kr),(0,d.Z)(zv,Ye,[Fo,"resourceId[3]"]),(0,d.Z)(zv,Ii,OP),zv)]),(0,d.Z)(Kv,Oe,Ct),(0,d.Z)(Kv,bt,[(yS={},(0,d.Z)(yS,Oe,Ct),(0,d.Z)(yS,bt,[(qv={},(0,d.Z)(qv,pt,[(vS={},(0,d.Z)(vS,Je,hn),(0,d.Z)(vS,Ye,[(0,d.Z)({},At,lT),sT]),vS)]),(0,d.Z)(qv,Oe,Ct),(0,d.Z)(qv,bt,[(_S={},(0,d.Z)(_S,Oe,Ct),(0,d.Z)(_S,bt,[(Vv={},(0,d.Z)(Vv,pt,V_),(0,d.Z)(Vv,"endpoint",(Gv={},(0,d.Z)(Gv,on,"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.{url#authority}"),(0,d.Z)(Gv,an,VT),(0,d.Z)(Gv,sn,xi),Gv)),(0,d.Z)(Vv,Oe,Dt),Vv),(0,d.Z)({endpoint:(Hv={},(0,d.Z)(Hv,on,"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.s3-outposts.{bucketArn#region}.{bucketPartition#dnsSuffix}"),(0,d.Z)(Hv,an,VT),(0,d.Z)(Hv,sn,xi),Hv)},Oe,Dt)]),_S)]),qv),(0,d.Z)({error:"Expected an outpost type `accesspoint`, found {outpostType}"},Oe,cn)]),yS)]),Kv),(0,d.Z)({error:"Invalid ARN: expected an access point name"},Oe,cn)]),xS)]),Wv),(0,d.Z)({error:"Invalid ARN: Expected a 4-component resource"},Oe,cn)]),bS)]),Xv),VP]),CS)]),Qv),HP]),wS)]),Jv),qP]),SS)]),Yv),bc]),ES)]),e_),(0,d.Z)({error:"Could not load partition for ARN region {bucketArn#region}"},Oe,cn)]),PS)]),kS)]),t_),(0,d.Z)({error:"Invalid ARN: The outpost Id may only contain a-z, A-Z, 0-9 and `-`. Found: `{outpostId}`"},Oe,cn)]),AS)]),n_),(0,d.Z)({error:"Invalid ARN: The Outpost Id was not set"},Oe,cn)]),RS)]),DS)]),TS)]),IS)]),r_),(0,d.Z)({error:"Invalid ARN: Unrecognized format: {Bucket} (type: {arnType})"},Oe,cn)]),OS)]),i_),(0,d.Z)({error:"Invalid ARN: No ARN type specified"},Oe,cn)]),o_),(s_={},(0,d.Z)(s_,pt,[(a_={},(0,d.Z)(a_,Je,j_),(0,d.Z)(a_,Ye,[ns,0,4,!1]),(0,d.Z)(a_,Ii,dT),a_),(FS={},(0,d.Z)(FS,Je,hn),(0,d.Z)(FS,Ye,[(0,d.Z)({},At,dT),"arn:"]),FS),(BS={},(0,d.Z)(BS,Je,ri),(0,d.Z)(BS,Ye,[(MS={},(0,d.Z)(MS,Je,Qo),(0,d.Z)(MS,Ye,cI),MS)]),BS)]),(0,d.Z)(s_,"error","Invalid ARN: `{Bucket}` was not a valid ARN"),(0,d.Z)(s_,Oe,cn),s_),vT]),NS)]),u_),(g_={},(0,d.Z)(g_,pt,[(ZS={},(0,d.Z)(ZS,Je,Qo),(0,d.Z)(ZS,Ye,[HT]),ZS),(LS={},(0,d.Z)(LS,Je,nn),(0,d.Z)(LS,Ye,[HT,ts]),LS)]),(0,d.Z)(g_,Oe,Ct),(0,d.Z)(g_,bt,[(m_={},(0,d.Z)(m_,pt,Cc),(0,d.Z)(m_,Oe,Ct),(0,d.Z)(m_,bt,[(GS={},(0,d.Z)(GS,Oe,Ct),(0,d.Z)(GS,bt,[(h_={},(0,d.Z)(h_,pt,gI),(0,d.Z)(h_,Oe,Ct),(0,d.Z)(h_,bt,[(zS={},(0,d.Z)(zS,Oe,Ct),(0,d.Z)(zS,bt,[MT,(US={},(0,d.Z)(US,Oe,Ct),(0,d.Z)(US,bt,[BT,($S={},(0,d.Z)($S,Oe,Ct),(0,d.Z)($S,bt,[MP,(jS={},(0,d.Z)(jS,Oe,Ct),(0,d.Z)(jS,bt,[(l_={},(0,d.Z)(l_,pt,V_),(0,d.Z)(l_,"endpoint",(c_={},(0,d.Z)(c_,on,xc),(0,d.Z)(c_,an,KP),(0,d.Z)(c_,sn,xi),c_)),(0,d.Z)(l_,Oe,Dt),l_),(f_={},(0,d.Z)(f_,pt,nE),(0,d.Z)(f_,"endpoint",(d_={},(0,d.Z)(d_,on,"https://s3-object-lambda-fips.{Region}.{partitionResult#dnsSuffix}"),(0,d.Z)(d_,an,KP),(0,d.Z)(d_,sn,xi),d_)),(0,d.Z)(f_,Oe,Dt),f_),(0,d.Z)({endpoint:(p_={},(0,d.Z)(p_,on,"https://s3-object-lambda.{Region}.{partitionResult#dnsSuffix}"),(0,d.Z)(p_,an,KP),(0,d.Z)(p_,sn,xi),p_)},Oe,Dt)]),jS)]),$S)]),US)]),zS)]),h_),eE]),GS)]),m_),bc]),g_),(Z_={},(0,d.Z)(Z_,pt,[(VS={},(0,d.Z)(VS,Je,ri),(0,d.Z)(VS,Ye,uI),VS)]),(0,d.Z)(Z_,Oe,Ct),(0,d.Z)(Z_,bt,[(N_={},(0,d.Z)(N_,pt,Cc),(0,d.Z)(N_,Oe,Ct),(0,d.Z)(N_,bt,[(KS={},(0,d.Z)(KS,Oe,Ct),(0,d.Z)(KS,bt,[(B_={},(0,d.Z)(B_,pt,gI),(0,d.Z)(B_,Oe,Ct),(0,d.Z)(B_,bt,[(qS={},(0,d.Z)(qS,Oe,Ct),(0,d.Z)(qS,bt,[MP,(HS={},(0,d.Z)(HS,Oe,Ct),(0,d.Z)(HS,bt,[qT,qT,(v_={},(0,d.Z)(v_,pt,[Vr,Br,or,Tr,xr,oo]),(0,d.Z)(v_,Oe,Ct),(0,d.Z)(v_,bt,tk),v_),(__={},(0,d.Z)(__,pt,[Vr,Br,or,Tr,xr,so]),(0,d.Z)(__,"endpoint",G_),(0,d.Z)(__,Oe,Dt),__),WT,WT,(y_={},(0,d.Z)(y_,pt,[Vr,Br,$n,xr,oo]),(0,d.Z)(y_,Oe,Ct),(0,d.Z)(y_,bt,[(0,d.Z)({endpoint:XT},Oe,Dt)]),y_),(x_={},(0,d.Z)(x_,pt,[Vr,Br,$n,xr,so]),(0,d.Z)(x_,"endpoint",XT),(0,d.Z)(x_,Oe,Dt),x_),QT,QT,(b_={},(0,d.Z)(b_,pt,[Vr,wr,or,Tr,xr,oo]),(0,d.Z)(b_,Oe,Ct),(0,d.Z)(b_,bt,tk),b_),(C_={},(0,d.Z)(C_,pt,[Vr,wr,or,Tr,xr,so]),(0,d.Z)(C_,"endpoint",G_),(0,d.Z)(C_,Oe,Dt),C_),JT,JT,(w_={},(0,d.Z)(w_,pt,[Vr,wr,$n,xr,oo]),(0,d.Z)(w_,Oe,Ct),(0,d.Z)(w_,bt,[(0,d.Z)({endpoint:YT},Oe,Dt)]),w_),(S_={},(0,d.Z)(S_,pt,[Vr,wr,$n,xr,so]),(0,d.Z)(S_,"endpoint",YT),(0,d.Z)(S_,Oe,Dt),S_),eI,eI,(E_={},(0,d.Z)(E_,pt,[cr,Br,or,Tr,xr,oo]),(0,d.Z)(E_,Oe,Ct),(0,d.Z)(E_,bt,tk),E_),(P_={},(0,d.Z)(P_,pt,[cr,Br,or,Tr,xr,so]),(0,d.Z)(P_,"endpoint",G_),(0,d.Z)(P_,Oe,Dt),P_),tI,tI,(k_={},(0,d.Z)(k_,pt,[cr,Br,$n,xr,oo]),(0,d.Z)(k_,Oe,Ct),(0,d.Z)(k_,bt,[(0,d.Z)({endpoint:nI},Oe,Dt)]),k_),(A_={},(0,d.Z)(A_,pt,[cr,Br,$n,xr,so]),(0,d.Z)(A_,"endpoint",nI),(0,d.Z)(A_,Oe,Dt),A_),rI,rI,(D_={},(0,d.Z)(D_,pt,[cr,wr,or,Tr,xr,oo]),(0,d.Z)(D_,Oe,Ct),(0,d.Z)(D_,bt,[(R_={},(0,d.Z)(R_,pt,$d),(0,d.Z)(R_,"endpoint",G_),(0,d.Z)(R_,Oe,Dt),R_),KT]),D_),(T_={},(0,d.Z)(T_,pt,[cr,wr,or,Tr,xr,so]),(0,d.Z)(T_,"endpoint",G_),(0,d.Z)(T_,Oe,Dt),T_),iI,iI,(F_={},(0,d.Z)(F_,pt,[cr,wr,$n,xr,oo]),(0,d.Z)(F_,Oe,Ct),(0,d.Z)(F_,bt,[(O_={},(0,d.Z)(O_,pt,$d),(0,d.Z)(O_,"endpoint",(I_={},(0,d.Z)(I_,on,fT),(0,d.Z)(I_,an,ao),(0,d.Z)(I_,sn,xi),I_)),(0,d.Z)(O_,Oe,Dt),O_),(0,d.Z)({endpoint:oI},Oe,Dt)]),F_),(M_={},(0,d.Z)(M_,pt,[cr,wr,$n,xr,so]),(0,d.Z)(M_,"endpoint",oI),(0,d.Z)(M_,Oe,Dt),M_)]),HS)]),qS)]),B_),eE]),KS)]),N_),bc]),Z_)]),WS)]),L_),(0,d.Z)({error:"A region must be set when sending requests to S3."},Oe,cn)]),XS)]),Cj=function(n){return _D(bj,{endpointParams:n,logger:(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).logger})},Ej=function(a){(0,G.Z)(t,a);var n=(0,H.Z)(t);function t(e){var o;(0,p.Z)(this,t);var u=function(n){var t,e,o,s,u;return(0,b.Z)((0,b.Z)({},n),{},{useFipsEndpoint:null!==(t=n.useFipsEndpoint)&&void 0!==t&&t,useDualstackEndpoint:null!==(e=n.useDualstackEndpoint)&&void 0!==e&&e,useAccelerateEndpoint:null!==(o=n.useAccelerateEndpoint)&&void 0!==o&&o,useGlobalEndpoint:null!==(s=n.useGlobalEndpoint)&&void 0!==s&&s,disableMultiregionAccessPoints:null!==(u=n.disableMultiregionAccessPoints)&&void 0!==u&&u,defaultSigningName:"s3"})}(function(n){var t,e,o,s,u,c,l,m,C,T,B,F,U,ae,ue,me,Se,we=HD(n),qe=function(){return we().then($A)},at=function(n){var t,e,o,s,u,c,l,m,C,T,B,F;return{apiVersion:"2006-03-01",base64Decoder:null!==(t=n?.base64Decoder)&&void 0!==t?t:bP,base64Encoder:null!==(e=n?.base64Encoder)&&void 0!==e?e:CP,disableHostPrefix:null!==(o=n?.disableHostPrefix)&&void 0!==o&&o,endpointProvider:null!==(s=n?.endpointProvider)&&void 0!==s?s:Cj,logger:null!==(u=n?.logger)&&void 0!==u?u:new RA,serviceId:null!==(c=n?.serviceId)&&void 0!==c?c:"S3",signerConstructor:null!==(l=n?.signerConstructor)&&void 0!==l?l:pj,signingEscapePath:null!==(m=n?.signingEscapePath)&&void 0!==m&&m,urlParser:null!==(C=n?.urlParser)&&void 0!==C?C:bn,useArnRegion:null!==(T=n?.useArnRegion)&&void 0!==T&&T,utf8Decoder:null!==(B=n?.utf8Decoder)&&void 0!==B?B:dp,utf8Encoder:null!==(F=n?.utf8Encoder)&&void 0!==F?F:q0}}(n);return(0,b.Z)((0,b.Z)((0,b.Z)({},at),n),{},{runtime:"browser",defaultsMode:we,bodyLengthChecker:null!==(t=n?.bodyLengthChecker)&&void 0!==t?t:ID,credentialDefaultProvider:null!==(e=n?.credentialDefaultProvider)&&void 0!==e?e:function(dt){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:null!==(o=n?.defaultUserAgentProvider)&&void 0!==o?o:FD({serviceId:at.serviceId,clientVersion:"3.350.0"}),eventStreamSerdeProvider:null!==(s=n?.eventStreamSerdeProvider)&&void 0!==s?s:rj,getAwsChunkedEncodingStream:null!==(u=n?.getAwsChunkedEncodingStream)&&void 0!==u?u:dj,maxAttempts:null!==(c=n?.maxAttempts)&&void 0!==c?c:3,md5:null!==(l=n?.md5)&&void 0!==l?l:uj,region:null!==(m=n?.region)&&void 0!==m?m:TD("Region is missing"),requestHandler:null!==(C=n?.requestHandler)&&void 0!==C?C:new wD(qe),retryMode:null!==(T=n?.retryMode)&&void 0!==T?T:Lt((0,He.Z)().mark(function dt(){return(0,He.Z)().wrap(function(ft){for(;;)switch(ft.prev=ft.next){case 0:return ft.next=2,qe();case 2:if(ft.t0=ft.sent.retryMode,ft.t0){ft.next=5;break}ft.t0=uP;case 5:return ft.abrupt("return",ft.t0);case 6:case"end":return ft.stop()}},dt)})),sdkStreamMixin:null!==(B=n?.sdkStreamMixin)&&void 0!==B?B:fj,sha1:null!==(F=n?.sha1)&&void 0!==F?F:WL.Sha1,sha256:null!==(U=n?.sha256)&&void 0!==U?U:XL.Sha256,streamCollector:null!==(ae=n?.streamCollector)&&void 0!==ae?ae:wP,streamHasher:null!==(ue=n?.streamHasher)&&void 0!==ue?ue:oj,useDualstackEndpoint:null!==(me=n?.useDualstackEndpoint)&&void 0!==me?me:function(){return Promise.resolve(!1)},useFipsEndpoint:null!==(Se=n?.useFipsEndpoint)&&void 0!==Se?Se:function(){return Promise.resolve(!1)}})}(e)),c=xR(u),l=rr(c),m=MR(l),B=function(n){var t,e,o;return(0,b.Z)((0,b.Z)({},n),{},{forcePathStyle:null!==(t=n.forcePathStyle)&&void 0!==t&&t,useAccelerateEndpoint:null!==(e=n.useAccelerateEndpoint)&&void 0!==e&&e,disableMultiregionAccessPoints:null!==(o=n.disableMultiregionAccessPoints)&&void 0!==o&&o})}(eD(m)),U=function(n){return(0,b.Z)((0,b.Z)({},n),{},{eventStreamMarshaller:n.eventStreamSerdeProvider(n)})}(oD(B));return(o=n.call(this,U)).config=U,o.middlewareStack.use(BR(o.config)),o.middlewareStack.use(CR(o.config)),o.middlewareStack.use(wR(o.config)),o.middlewareStack.use(SR()),o.middlewareStack.use(PR(o.config)),o.middlewareStack.use(function(n){return{applyToStack:function(e){e.addRelativeTo(function(n){return function(t,e){return function(){var o=Lt((0,He.Z)().mark(function s(u){var c,l,m,C,T,B,F,U,ae;return(0,He.Z)().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:if(ir.isInstance(u.request)){me.next=2;break}return me.abrupt("return",t(u));case 2:return T=null===(c=e.endpointV2)||void 0===c||null===(l=c.properties)||void 0===l||null===(m=l.authSchemes)||void 0===m?void 0:m[0],B="sigv4a"===T?.name?null==T||null===(C=T.signingRegionSet)||void 0===C?void 0:C.join(","):void 0,me.next=6,n.signer(T);case 6:return F=me.sent,me.t0=t,me.t1=b.Z,me.t2=(0,b.Z)({},u),me.t3={},me.next=13,F.sign(u.request,{signingDate:nD(n.systemClockOffset),signingRegion:B||e.signing_region,signingService:e.signing_service});case 13:return me.t4=me.sent,me.t5={request:me.t4},me.t6=(0,me.t1)(me.t2,me.t3,me.t5),me.next=18,(0,me.t0)(me.t6).catch(function(Se){var we,qe=null!==(we=Se.ServerTime)&&void 0!==we?we:iD(Se.$response);throw qe&&(n.systemClockOffset=rD(qe,n.systemClockOffset)),Se});case 18:return(ae=iD((U=me.sent).response))&&(n.systemClockOffset=rD(ae,n.systemClockOffset)),me.abrupt("return",U);case 22:case"end":return me.stop()}},s)}));return function(s){return o.apply(this,arguments)}}()}}(n),WZ)}}}(o.config)),o.middlewareStack.use({applyToStack:function(e){e.add(function IF(){return function(a){return function(){var n=Lt((0,He.Z)().mark(function t(e){var o,s;return(0,He.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if("string"!=typeof(o=e.input.Bucket)||TF(o)||!(o.indexOf("/")>=0)){c.next=5;break}throw(s=new Error("Bucket name shouldn't contain '/', received '".concat(o,"'"))).name="InvalidBucketName",s;case 5:return c.abrupt("return",a((0,b.Z)({},e)));case 6:case"end":return c.stop()}},t)}));return function(t){return n.apply(this,arguments)}}()}}(),OF)}}),o.middlewareStack.use(function(n){return{applyToStack:function(e){e.add(function GL(a){return function(n){return function(){var t=Lt((0,He.Z)().mark(function e(o){var s;return(0,He.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return ir.isInstance(s=o.request)&&s.body&&"node"===a.runtime&&(s.headers=(0,b.Z)((0,b.Z)({},s.headers),{},{Expect:"100-continue"})),c.abrupt("return",n((0,b.Z)((0,b.Z)({},o),{},{request:s})));case 3:case"end":return c.stop()}},e)}));return function(e){return t.apply(this,arguments)}}()}}(n),VL)}}}(o.config)),o.middlewareStack.use(CD(o.config)),o}return(0,_.Z)(t,[{key:"destroy",value:function(){(0,Et.Z)((0,Ee.Z)(t.prototype),"destroy",this).call(this)}}]),t}(OA),Pj=function(){var a=(0,_.Z)(function n(){(0,p.Z)(this,n)});return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-mediafile-pane-renderer"]],decls:1,vars:0,template:function(t,e){1&t&&r.\u0275\u0275text(0,"Media File")}}),a}(),vI=function(){var a=(0,_.Z)(function n(t){(0,p.Z)(this,n),t.register(new fn.ContentPlugin({id:"media_file",title:"Media File",selectionComponent:void 0,editorComponent:void 0,renderComponent:Pj,handler:void 0}))});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(fn.ContentPluginManager))},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({imports:[E.CommonModule]}),a}(),rE=new r.InjectionToken("Media Settings"),Aj=(0,_.Z)(function a(n){(0,p.Z)(this,a),n&&(this.endpointUrl=n.endpointUrl,this.cloudinaryUrl=n.cloudinaryUrl,this.uploadPreset=n.uploadPreset,this.imageUrl=n.imageUrl,this.bucket=n.bucket,this.prefix=n.prefix)}),nk=(0,_.Z)(function a(n){(0,p.Z)(this,a),n&&(this.id=n.id,this.contentType=n.contentType,this.contentDisposition=n.contentDisposition,this.path=n.path,this.fileName=n.fileName,this.length=n.length,this.extension=n.extension?n.extension:void 0,this.realPath=n.realPath&&""!==n.realPath?n.realPath:void 0)}),iE=function(){var a=function(){function n(t,e,o,s){(0,p.Z)(this,n),this.settings=t,this.cognitoSettings=e,this.http=o,this.authFacade=s}return(0,_.Z)(n,[{key:"bulkUpload",value:function(e){var o=this,u=e.fileNameOverride,l=[];return e.files.forEach(function(m){if(m){var C=new FormData;C.append("File",m,u||m.name),l.push(o.http.post(o.settings.endpointUrl,C).pipe((0,ti.K)(function(T){return(0,zo._)(new Error("Error uploading images."))})))}}),l.length>0?(0,Un.D)(l):(0,je.of)([])}},{key:"bulkUploadS3",value:function(e){var o=this,u=e.fileNameOverride,c=e.nocache,l=[];return e.files.forEach(function(m){m&&l.push(new W.y(function(C){var T=u||fr(),B=m.name.split(".",2),ae=(0,g.Z)(B,2)[1],ue=T+(ae?"."+ae:"");new F6({client:o.buildClient(),params:(0,b.Z)({Bucket:o.settings.bucket,Key:o.settings.prefix+ue,Body:m,ContentType:m.type},c?{CacheControl:"no-cache"}:{})}).done().then(function(){C.next(new nk({id:T,contentType:m.type,contentDisposition:"",path:ue,realPath:o.settings.prefix+ue,length:m.size,fileName:m.name,extension:ae&&""!==ae?ae:void 0})),C.complete()})}))}),l.length>0?(0,Un.D)(l):(0,je.of)([])}},{key:"convertToFiles",value:function(e){var o=this,s=e.map(function(u){return new W.y(function(c){fetch("".concat(o.settings.imageUrl,"/").concat(u.path)).then(function(l){l.blob().then(function(m){new Promise(function(C){var T=new FileReader;T.onload=function(){return C(T.result)},T.readAsDataURL(m)}).then(function(C){var T=o.convertDataURIToBinary(C),B=new File([T],u.fileName,{type:u.contentType});c.next(B),c.complete()})})})})});return(0,Un.D)(s)}},{key:"convertDataURIToBinary",value:function(e){for(var s=e.indexOf(";base64,")+8,u=e.substring(s),c=window.atob(u),l=c.length,m=new Uint8Array(new ArrayBuffer(l)),C=0;C<l;C++)m[C]=c.charCodeAt(C);return m}},{key:"buildClient",value:function(){var e=this;return new Ej({region:this.cognitoSettings.region,credentials:aP({client:new kP({region:this.cognitoSettings.region}),identityPoolId:this.cognitoSettings.identityPoolId,logins:(0,d.Z)({},"cognito-idp.".concat(this.cognitoSettings.region,".amazonaws.com/").concat(this.cognitoSettings.userPoolId),function(){return Rl(e.authFacade.getUser$.pipe((0,Ce.U)(function(s){return s?s.id_token:void 0})))})})})}},{key:"isImage",value:function(e){var o=e.file;return o.type&&0===o.type.indexOf("image/")}},{key:"isVideo",value:function(e){var o=e.file;return o.type&&0===o.type.indexOf("video/")}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(rE),r.\u0275\u0275inject(Dl),r.\u0275\u0275inject(O.HttpClient),r.\u0275\u0275inject(li))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),Nn=S(8154),Bt=S(68488),H_=function(){var a=(0,_.Z)(function n(){(0,p.Z)(this,n)});return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({imports:[E.CommonModule]}),a}(),Pr=function(){var a=function(){function n(){(0,p.Z)(this,n)}return(0,_.Z)(n,[{key:"generateTokens",value:function(e){var o=new Map;return this.attributeTokens(e,o,"",0),o}},{key:"generateGenericTokens",value:function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=new Map;return this.genericTokens(e,s,o,0),s}},{key:"attributeTokens",value:function(e,o,s,u){var c=this;e.forEach(function(l,m){if("widget"!==l.name)for(var C in l)l.type===Bt.AttributeTypes.Complex||"attributes"===C&&l.attributes&&l.attributes.length>0?c.attributeTokens(l.attributes,o,l.type===Bt.AttributeTypes.Complex?"".concat(s):"".concat(s,".").concat(l.name),u+1):"attributes"!==C&&o.set(C===l.name?"".concat(s,".").concat(C):"".concat(s,".").concat(l.name,".").concat(C),l[C])})}},{key:"genericTokens",value:function(e,o,s,u){for(var c in e)if("object"!=typeof e[c])o.set("".concat(s,".").concat(c),e[c]);else if(Array.isArray(e[c])&&"attributes"===c)this.attributeTokens(e[c],o,"".concat(s,".").concat(c),u+1);else if(Array.isArray(e[c]))for(var m=e[c].length,C=0;C<m;C++)this.genericTokens(e[c][C],o,"".concat(s,".").concat(c,".").concat(C),u+1);else this.genericTokens(e[c],o,"".concat(s,".").concat(c),u+1)}},{key:"replaceTokens",value:function(e,o){return o&&o.forEach(function(s,u){e=e.replace("[".concat(u,"]"),"".concat(s))}),e}},{key:"matchTokens",value:function(e,o){for(var s=[],u=o.length,c=0;c<u;c++)e.indexOf("[".concat(o[c],"]"))>-1&&s.push(o[c]);return s}},{key:"discoverTokens",value:function(e){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=e.match(/(\[(?:\[??[^\[]*?\]))/g);return null===s?[]:s.reduce(function(c,l){if(-1!==l.indexOf(" ")||-1===l.indexOf("."))return c;var m=1===l.indexOf(".")?["."]:l.substr(1,l.length-2).split("."),T=(0,g.Z)(m,1)[0];return-1!==c.findIndex(function(B){return B===T})?c:[].concat((0,y.Z)(c),[o?l.substr(1,l.length-2):T])},[])}}]),n}();return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),Oi=S(69490),kr=S(71989),Rj=["gutterEls"];function Dj(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",2,3),r.\u0275\u0275listener("keydown",function(l){r.\u0275\u0275restoreView(t);var m=r.\u0275\u0275nextContext().index,C=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(C.startKeyboardDrag(l,2*m+1,m+1))})("mousedown",function(l){r.\u0275\u0275restoreView(t);var m=r.\u0275\u0275nextContext().index,C=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(C.startMouseDrag(l,2*m+1,m+1))})("touchstart",function(l){r.\u0275\u0275restoreView(t);var m=r.\u0275\u0275nextContext().index,C=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(C.startMouseDrag(l,2*m+1,m+1))})("mouseup",function(l){r.\u0275\u0275restoreView(t);var m=r.\u0275\u0275nextContext().index,C=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(C.clickGutter(l,m+1))})("touchend",function(l){r.\u0275\u0275restoreView(t);var m=r.\u0275\u0275nextContext().index,C=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(C.clickGutter(l,m+1))}),r.\u0275\u0275element(2,"div",4),r.\u0275\u0275elementEnd()}if(2&a){var e=r.\u0275\u0275nextContext(),o=e.index,s=e.$implicit,u=r.\u0275\u0275nextContext();r.\u0275\u0275styleProp("flex-basis",u.gutterSize,"px")("order",2*o+1),r.\u0275\u0275attribute("aria-label",u.gutterAriaLabel)("aria-orientation",u.direction)("aria-valuemin",s.minSize)("aria-valuemax",s.maxSize)("aria-valuenow",s.size)("aria-valuetext",u.getAriaAreaSizeText(s.size))}}function Tj(a,n){1&a&&r.\u0275\u0275template(0,Dj,3,10,"div",1),2&a&&r.\u0275\u0275property("ngIf",!1===n.last)}var Ij=["*"];function q_(a){if(void 0!==a.changedTouches&&a.changedTouches.length>0)return{x:a.changedTouches[0].clientX,y:a.changedTouches[0].clientY};if(void 0!==a.clientX&&void 0!==a.clientY)return{x:a.clientX,y:a.clientY};if(void 0!==a.currentTarget){var n=a.currentTarget;return{x:n.offsetLeft,y:n.offsetTop}}return null}function _I(a,n,t){return Math.abs(a.x-n.x)<=t&&Math.abs(a.y-n.y)<=t}function yI(a,n){var t=a.nativeElement.getBoundingClientRect();return"horizontal"===n?t.width:t.height}function K_(a){return"boolean"==typeof a?a:"false"!==a}function yu(a,n){return null==a?n:(a=Number(a),!isNaN(a)&&a>=0?a:n)}function xI(a,n){if("percent"===a){var t=n.reduce(function(e,o){return null!==o?e+o:e},0);return n.every(function(e){return null!==e})&&t>99.9&&t<100.1}if("pixel"===a)return 1===n.filter(function(e){return null===e}).length}function oE(a){return null===a.size?null:!0===a.component.lockSize?a.size:null===a.component.minSize?null:a.component.minSize>a.size?a.size:a.component.minSize}function aE(a){return null===a.size?null:!0===a.component.lockSize?a.size:null===a.component.maxSize?null:a.component.maxSize<a.size?a.size:a.component.maxSize}function Ud(a,n,t,e){return n.reduce(function(o,s){var u=function Fj(a,n,t,e){return 0===t?{areaSnapshot:n,pixelAbsorb:0,percentAfterAbsorption:n.sizePercentAtStart,pixelRemain:0}:0===n.sizePixelAtStart&&t<0?{areaSnapshot:n,pixelAbsorb:0,percentAfterAbsorption:0,pixelRemain:t}:"percent"===a?function Mj(a,n,t){var o=(a.sizePixelAtStart+n)/t*100;if(n>0){if(null!==a.area.maxSize&&o>a.area.maxSize){var s=a.area.maxSize/100*t;return{areaSnapshot:a,pixelAbsorb:s,percentAfterAbsorption:a.area.maxSize,pixelRemain:a.sizePixelAtStart+n-s}}return{areaSnapshot:a,pixelAbsorb:n,percentAfterAbsorption:o>100?100:o,pixelRemain:0}}if(n<0){if(null!==a.area.minSize&&o<a.area.minSize){var u=a.area.minSize/100*t;return{areaSnapshot:a,pixelAbsorb:u,percentAfterAbsorption:a.area.minSize,pixelRemain:a.sizePixelAtStart+n-u}}return o<0?{areaSnapshot:a,pixelAbsorb:-a.sizePixelAtStart,percentAfterAbsorption:0,pixelRemain:n+a.sizePixelAtStart}:{areaSnapshot:a,pixelAbsorb:n,percentAfterAbsorption:o,pixelRemain:0}}}(n,t,e):"pixel"===a?function Bj(a,n,t){var e=a.sizePixelAtStart+n;return n>0?null!==a.area.maxSize&&e>a.area.maxSize?{areaSnapshot:a,pixelAbsorb:a.area.maxSize-a.sizePixelAtStart,percentAfterAbsorption:-1,pixelRemain:e-a.area.maxSize}:{areaSnapshot:a,pixelAbsorb:n,percentAfterAbsorption:-1,pixelRemain:0}:n<0?null!==a.area.minSize&&e<a.area.minSize?{areaSnapshot:a,pixelAbsorb:a.area.minSize+n-e,percentAfterAbsorption:-1,pixelRemain:e-a.area.minSize}:e<0?{areaSnapshot:a,pixelAbsorb:-a.sizePixelAtStart,percentAfterAbsorption:-1,pixelRemain:n+a.sizePixelAtStart}:{areaSnapshot:a,pixelAbsorb:n,percentAfterAbsorption:-1,pixelRemain:0}:void 0}(n,t):void 0}(a,s,o.remain,e);return o.list.push(u),o.remain=u.pixelRemain,o},{remain:t,list:[]})}function bI(a,n){"percent"===a?n.areaSnapshot.area.size=n.percentAfterAbsorption:"pixel"===a&&null!==n.areaSnapshot.area.size&&(n.areaSnapshot.area.size=n.areaSnapshot.sizePixelAtStart+n.pixelAbsorb)}var Nj=new r.InjectionToken("angular-split-global-config"),W_=function(){var a=function(){function n(t,e,o,s,u){var c=this;(0,p.Z)(this,n),this.ngZone=t,this.elRef=e,this.cdRef=o,this.renderer=s,this.gutterClickDeltaPx=2,this._config={direction:"horizontal",unit:"percent",gutterSize:11,gutterStep:1,restrictMove:!1,useTransition:!1,disabled:!1,dir:"ltr",gutterDblClickDuration:0},this.dragStart=new r.EventEmitter(!1),this.dragEnd=new r.EventEmitter(!1),this.gutterClick=new r.EventEmitter(!1),this.gutterDblClick=new r.EventEmitter(!1),this.dragProgressSubject=new se.x,this.dragProgress$=this.dragProgressSubject.asObservable(),this.isDragging=!1,this.isWaitingClear=!1,this.isWaitingInitialMove=!1,this.dragListeners=[],this.snapshot=null,this.startPoint=null,this.endPoint=null,this.displayedAreas=[],this.hiddenAreas=[],this._clickTimeout=null,this.direction=this._direction,this._config=u?Object.assign(this._config,u):this._config,Object.keys(this._config).forEach(function(l){c[l]=c._config[l]})}return(0,_.Z)(n,[{key:"direction",get:function(){return this._direction},set:function(e){this._direction="vertical"===e?"vertical":"horizontal",this.renderer.addClass(this.elRef.nativeElement,"as-".concat(this._direction)),this.renderer.removeClass(this.elRef.nativeElement,"as-".concat("vertical"===this._direction?"horizontal":"vertical")),this.build(!1,!1)}},{key:"unit",get:function(){return this._unit},set:function(e){this._unit="pixel"===e?"pixel":"percent",this.renderer.addClass(this.elRef.nativeElement,"as-".concat(this._unit)),this.renderer.removeClass(this.elRef.nativeElement,"as-".concat("pixel"===this._unit?"percent":"pixel")),this.build(!1,!0)}},{key:"gutterSize",get:function(){return this._gutterSize},set:function(e){this._gutterSize=yu(e,11),this.build(!1,!1)}},{key:"gutterStep",get:function(){return this._gutterStep},set:function(e){this._gutterStep=yu(e,1)}},{key:"restrictMove",get:function(){return this._restrictMove},set:function(e){this._restrictMove=K_(e)}},{key:"useTransition",get:function(){return this._useTransition},set:function(e){this._useTransition=K_(e),this._useTransition?this.renderer.addClass(this.elRef.nativeElement,"as-transition"):this.renderer.removeClass(this.elRef.nativeElement,"as-transition")}},{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=K_(e),this._disabled?this.renderer.addClass(this.elRef.nativeElement,"as-disabled"):this.renderer.removeClass(this.elRef.nativeElement,"as-disabled")}},{key:"dir",get:function(){return this._dir},set:function(e){this._dir="rtl"===e?"rtl":"ltr",this.renderer.setAttribute(this.elRef.nativeElement,"dir",this._dir)}},{key:"gutterDblClickDuration",get:function(){return this._gutterDblClickDuration},set:function(e){this._gutterDblClickDuration=yu(e,0)}},{key:"transitionEnd",get:function(){var e=this;return new W.y(function(o){return e.transitionEndSubscriber=o}).pipe((0,kr.b)(20))}},{key:"ngAfterViewInit",value:function(){var e=this;this.ngZone.runOutsideAngular(function(){setTimeout(function(){return e.renderer.addClass(e.elRef.nativeElement,"as-init")})})}},{key:"getNbGutters",value:function(){return 0===this.displayedAreas.length?0:this.displayedAreas.length-1}},{key:"addArea",value:function(e){var o={component:e,order:0,size:0,minSize:null,maxSize:null,sizeBeforeCollapse:null,gutterBeforeCollapse:0};!0===e.visible?(this.displayedAreas.push(o),this.build(!0,!0)):this.hiddenAreas.push(o)}},{key:"removeArea",value:function(e){if(this.displayedAreas.some(function(u){return u.component===e})){var o=this.displayedAreas.find(function(u){return u.component===e});this.displayedAreas.splice(this.displayedAreas.indexOf(o),1),this.build(!0,!0)}else if(this.hiddenAreas.some(function(u){return u.component===e})){var s=this.hiddenAreas.find(function(u){return u.component===e});this.hiddenAreas.splice(this.hiddenAreas.indexOf(s),1)}}},{key:"updateArea",value:function(e,o,s){!0===e.visible&&this.build(o,s)}},{key:"showArea",value:function(e){var o,s=this.hiddenAreas.find(function(c){return c.component===e});if(void 0!==s){var u=this.hiddenAreas.splice(this.hiddenAreas.indexOf(s),1);(o=this.displayedAreas).push.apply(o,(0,y.Z)(u)),this.build(!0,!0)}}},{key:"hideArea",value:function(e){var o,s=this.displayedAreas.find(function(c){return c.component===e});if(void 0!==s){var u=this.displayedAreas.splice(this.displayedAreas.indexOf(s),1);u.forEach(function(c){c.order=0,c.size=0}),(o=this.hiddenAreas).push.apply(o,(0,y.Z)(u)),this.build(!0,!0)}}},{key:"getVisibleAreaSizes",value:function(){return this.displayedAreas.map(function(e){return null===e.size?"*":e.size})}},{key:"setVisibleAreaSizes",value:function(e){if(e.length!==this.displayedAreas.length)return!1;var o=e.map(function(u){return yu(u,null)});return!1!==xI(this.unit,o)&&(this.displayedAreas.forEach(function(u,c){return u.component._size=o[c]}),this.build(!1,!0),!0)}},{key:"build",value:function(e,o){if(this.stopDragging(),!0===e&&(this.displayedAreas.every(function(m){return null!==m.component.order})&&this.displayedAreas.sort(function(m,C){return m.component.order-C.component.order}),this.displayedAreas.forEach(function(m,C){m.order=2*C,m.component.setStyleOrder(m.order)})),!0===o){var s=xI(this.unit,this.displayedAreas.map(function(m){return m.component.size}));switch(this.unit){case"percent":var u=100/this.displayedAreas.length;this.displayedAreas.forEach(function(m){m.size=s?m.component.size:u,m.minSize=oE(m),m.maxSize=aE(m)});break;case"pixel":if(s)this.displayedAreas.forEach(function(m){m.size=m.component.size,m.minSize=oE(m),m.maxSize=aE(m)});else{var c=this.displayedAreas.filter(function(m){return null===m.component.size});if(0===c.length&&this.displayedAreas.length>0)this.displayedAreas.forEach(function(m,C){m.size=0===C?null:m.component.size,m.minSize=0===C?null:oE(m),m.maxSize=0===C?null:aE(m)});else if(c.length>1){var l=!1;this.displayedAreas.forEach(function(m){null===m.component.size?!1===l?(m.size=null,m.minSize=null,m.maxSize=null,l=!0):(m.size=100,m.minSize=null,m.maxSize=null):(m.size=m.component.size,m.minSize=oE(m),m.maxSize=aE(m))})}}}}this.refreshStyleSizes(),this.cdRef.markForCheck()}},{key:"refreshStyleSizes",value:function(){var e=this;if("percent"===this.unit)if(1===this.displayedAreas.length)this.displayedAreas[0].component.setStyleFlex(0,0,"100%",!1,!1);else{var o=this.getNbGutters()*this.gutterSize;this.displayedAreas.forEach(function(s){s.component.setStyleFlex(0,0,"calc( ".concat(s.size,"% - ").concat(s.size/100*o,"px )"),null!==s.minSize&&s.minSize===s.size,null!==s.maxSize&&s.maxSize===s.size)})}else"pixel"===this.unit&&this.displayedAreas.forEach(function(s){null===s.size?s.component.setStyleFlex(1,1,1===e.displayedAreas.length?"100%":"auto",!1,!1):1===e.displayedAreas.length?s.component.setStyleFlex(0,0,"100%",!1,!1):s.component.setStyleFlex(0,0,"".concat(s.size,"px"),null!==s.minSize&&s.minSize===s.size,null!==s.maxSize&&s.maxSize===s.size)})}},{key:"clickGutter",value:function(e,o){var s=this,u=q_(e);this.startPoint&&_I(this.startPoint,u,this.gutterClickDeltaPx)&&(!this.isDragging||this.isWaitingInitialMove)&&(null!==this._clickTimeout?(window.clearTimeout(this._clickTimeout),this._clickTimeout=null,this.notify("dblclick",o),this.stopDragging()):this._clickTimeout=window.setTimeout(function(){s._clickTimeout=null,s.notify("click",o),s.stopDragging()},this.gutterDblClickDuration))}},{key:"startKeyboardDrag",value:function(e,o,s){if(!0!==this.disabled&&!0!==this.isWaitingClear){var u=function Oj(a,n){if("horizontal"===n)switch(a.key){case"ArrowLeft":case"ArrowRight":case"PageUp":case"PageDown":break;default:return null}if("vertical"===n)switch(a.key){case"ArrowUp":case"ArrowDown":case"PageUp":case"PageDown":break;default:return null}var t=a.currentTarget,e="PageUp"===a.key||"PageDown"===a.key?500:50,o=t.offsetLeft,s=t.offsetTop;switch(a.key){case"ArrowLeft":o-=e;break;case"ArrowRight":o+=e;break;case"ArrowUp":s-=e;break;case"ArrowDown":s+=e;break;case"PageUp":"vertical"===n?s-=e:o+=e;break;case"PageDown":"vertical"===n?s+=e:o-=e;break;default:return null}return{x:o,y:s}}(e,this.direction);null!==u&&(this.endPoint=u,this.startPoint=q_(e),e.preventDefault(),e.stopPropagation(),this.setupForDragEvent(o,s),this.startDragging(),this.drag(),this.stopDragging())}}},{key:"startMouseDrag",value:function(e,o,s){var u=this;e.preventDefault(),e.stopPropagation(),this.startPoint=q_(e),null!==this.startPoint&&!0!==this.disabled&&!0!==this.isWaitingClear&&(this.setupForDragEvent(o,s),this.dragListeners.push(this.renderer.listen("document","mouseup",this.stopDragging.bind(this))),this.dragListeners.push(this.renderer.listen("document","touchend",this.stopDragging.bind(this))),this.dragListeners.push(this.renderer.listen("document","touchcancel",this.stopDragging.bind(this))),this.ngZone.runOutsideAngular(function(){u.dragListeners.push(u.renderer.listen("document","mousemove",u.mouseDragEvent.bind(u))),u.dragListeners.push(u.renderer.listen("document","touchmove",u.mouseDragEvent.bind(u)))}),this.startDragging())}},{key:"setupForDragEvent",value:function(e,o){var s=this;this.snapshot={gutterNum:o,lastSteppedOffset:0,allAreasSizePixel:yI(this.elRef,this.direction)-this.getNbGutters()*this.gutterSize,allInvolvedAreasSizePercent:100,areasBeforeGutter:[],areasAfterGutter:[]},this.displayedAreas.forEach(function(u){var c={area:u,sizePixelAtStart:yI(u.component.elRef,s.direction),sizePercentAtStart:"percent"===s.unit?u.size:-1};u.order<e?!0===s.restrictMove?s.snapshot.areasBeforeGutter=[c]:s.snapshot.areasBeforeGutter.unshift(c):u.order>e&&(!0===s.restrictMove?0===s.snapshot.areasAfterGutter.length&&(s.snapshot.areasAfterGutter=[c]):s.snapshot.areasAfterGutter.push(c))}),this.snapshot.allInvolvedAreasSizePercent=[].concat((0,y.Z)(this.snapshot.areasBeforeGutter),(0,y.Z)(this.snapshot.areasAfterGutter)).reduce(function(u,c){return u+c.sizePercentAtStart},0)}},{key:"startDragging",value:function(){this.displayedAreas.forEach(function(e){return e.component.lockEvents()}),this.isDragging=!0,this.isWaitingInitialMove=!0}},{key:"mouseDragEvent",value:function(e){e.preventDefault(),e.stopPropagation();var o=q_(e);null!==this._clickTimeout&&!_I(this.startPoint,o,this.gutterClickDeltaPx)&&(window.clearTimeout(this._clickTimeout),this._clickTimeout=null),!1!==this.isDragging&&(this.endPoint=q_(e),null!==this.endPoint&&this.drag())}},{key:"drag",value:function(){var e=this;if(this.isWaitingInitialMove){if(this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y)return;this.ngZone.run(function(){e.isWaitingInitialMove=!1,e.renderer.addClass(e.elRef.nativeElement,"as-dragging"),e.renderer.addClass(e.gutterEls.toArray()[e.snapshot.gutterNum-1].nativeElement,"as-dragged"),e.notify("start",e.snapshot.gutterNum)})}var o="horizontal"===this.direction?this.startPoint.x-this.endPoint.x:this.startPoint.y-this.endPoint.y;"rtl"===this.dir&&"horizontal"===this.direction&&(o=-o);var s=Math.round(o/this.gutterStep)*this.gutterStep;if(s!==this.snapshot.lastSteppedOffset){this.snapshot.lastSteppedOffset=s;var u=Ud(this.unit,this.snapshot.areasBeforeGutter,-s,this.snapshot.allAreasSizePixel),c=Ud(this.unit,this.snapshot.areasAfterGutter,s,this.snapshot.allAreasSizePixel);if(0!==u.remain&&0!==c.remain?Math.abs(u.remain)===Math.abs(c.remain)||(Math.abs(u.remain)>Math.abs(c.remain)?c=Ud(this.unit,this.snapshot.areasAfterGutter,s+u.remain,this.snapshot.allAreasSizePixel):u=Ud(this.unit,this.snapshot.areasBeforeGutter,-(s-c.remain),this.snapshot.allAreasSizePixel)):0!==u.remain?c=Ud(this.unit,this.snapshot.areasAfterGutter,s+u.remain,this.snapshot.allAreasSizePixel):0!==c.remain&&(u=Ud(this.unit,this.snapshot.areasBeforeGutter,-(s-c.remain),this.snapshot.allAreasSizePixel)),"percent"===this.unit){var l=[].concat((0,y.Z)(u.list),(0,y.Z)(c.list)),m=l.find(function(C){return 0!==C.percentAfterAbsorption&&C.percentAfterAbsorption!==C.areaSnapshot.area.minSize&&C.percentAfterAbsorption!==C.areaSnapshot.area.maxSize});m&&(m.percentAfterAbsorption=this.snapshot.allInvolvedAreasSizePercent-l.filter(function(C){return C!==m}).reduce(function(C,T){return C+T.percentAfterAbsorption},0))}u.list.forEach(function(C){return bI(e.unit,C)}),c.list.forEach(function(C){return bI(e.unit,C)}),this.refreshStyleSizes(),this.notify("progress",this.snapshot.gutterNum)}}},{key:"stopDragging",value:function(e){var o=this;if(e&&(e.preventDefault(),e.stopPropagation()),!1!==this.isDragging){for(this.displayedAreas.forEach(function(u){return u.component.unlockEvents()});this.dragListeners.length>0;){var s=this.dragListeners.pop();s&&s()}this.isDragging=!1,!1===this.isWaitingInitialMove&&this.notify("end",this.snapshot.gutterNum),this.renderer.removeClass(this.elRef.nativeElement,"as-dragging"),this.renderer.removeClass(this.gutterEls.toArray()[this.snapshot.gutterNum-1].nativeElement,"as-dragged"),this.snapshot=null,this.isWaitingClear=!0,this.ngZone.runOutsideAngular(function(){setTimeout(function(){o.startPoint=null,o.endPoint=null,o.isWaitingClear=!1})})}}},{key:"notify",value:function(e,o){var s=this,u=this.getVisibleAreaSizes();"start"===e?this.dragStart.emit({gutterNum:o,sizes:u}):"end"===e?this.dragEnd.emit({gutterNum:o,sizes:u}):"click"===e?this.gutterClick.emit({gutterNum:o,sizes:u}):"dblclick"===e?this.gutterDblClick.emit({gutterNum:o,sizes:u}):"transitionEnd"===e?this.transitionEndSubscriber&&this.ngZone.run(function(){return s.transitionEndSubscriber.next(u)}):"progress"===e&&this.dragProgressSubject.next({gutterNum:o,sizes:u})}},{key:"ngOnDestroy",value:function(){this.stopDragging()}},{key:"collapseArea",value:function(e,o,s){var u=this.displayedAreas.find(function(m){return m.component===e});if(void 0!==u){var c="right"===s?1:-1;u.sizeBeforeCollapse||(u.sizeBeforeCollapse=u.size,u.gutterBeforeCollapse=c),u.size=o;var l=this.gutterEls.find(function(m){return m.nativeElement.style.order==="".concat(u.order+c)});l&&this.renderer.addClass(l.nativeElement,"as-split-gutter-collapsed"),this.updateArea(e,!1,!1)}}},{key:"expandArea",value:function(e){var o=this.displayedAreas.find(function(u){return u.component===e});if(void 0!==o&&o.sizeBeforeCollapse){o.size=o.sizeBeforeCollapse,o.sizeBeforeCollapse=null;var s=this.gutterEls.find(function(u){return u.nativeElement.style.order==="".concat(o.order+o.gutterBeforeCollapse)});s&&this.renderer.removeClass(s.nativeElement,"as-split-gutter-collapsed"),this.updateArea(e,!1,!1)}}},{key:"getAriaAreaSizeText",value:function(e){return null===e?null:e.toFixed(0)+" "+this.unit}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(r.NgZone),r.\u0275\u0275directiveInject(r.ElementRef),r.\u0275\u0275directiveInject(r.ChangeDetectorRef),r.\u0275\u0275directiveInject(r.Renderer2),r.\u0275\u0275directiveInject(Nj,8))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["as-split"]],viewQuery:function(t,e){var o;1&t&&r.\u0275\u0275viewQuery(Rj,5),2&t&&r.\u0275\u0275queryRefresh(o=r.\u0275\u0275loadQuery())&&(e.gutterEls=o)},inputs:{direction:"direction",unit:"unit",gutterSize:"gutterSize",gutterStep:"gutterStep",restrictMove:"restrictMove",useTransition:"useTransition",disabled:"disabled",dir:"dir",gutterDblClickDuration:"gutterDblClickDuration",gutterClickDeltaPx:"gutterClickDeltaPx",gutterAriaLabel:"gutterAriaLabel"},outputs:{transitionEnd:"transitionEnd",dragStart:"dragStart",dragEnd:"dragEnd",gutterClick:"gutterClick",gutterDblClick:"gutterDblClick"},exportAs:["asSplit"],ngContentSelectors:Ij,decls:2,vars:1,consts:[["ngFor","",3,"ngForOf"],["role","slider","tabindex","0","class","as-split-gutter",3,"flex-basis","order","keydown","mousedown","touchstart","mouseup","touchend",4,"ngIf"],["role","slider","tabindex","0",1,"as-split-gutter",3,"keydown","mousedown","touchstart","mouseup","touchend"],["gutterEls",""],[1,"as-split-gutter-icon"]],template:function(t,e){1&t&&(r.\u0275\u0275projectionDef(),r.\u0275\u0275projection(0),r.\u0275\u0275template(1,Tj,1,1,"ng-template",0)),2&t&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",e.displayedAreas))},dependencies:[E.NgForOf,E.NgIf],styles:["[_nghost-%COMP%]{display:flex;flex-wrap:nowrap;justify-content:flex-start;align-items:stretch;overflow:hidden;width:100%;height:100%}[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{border:none;flex-grow:0;flex-shrink:0;background-color:#eee;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%] > .as-split-gutter.as-split-gutter-collapsed[_ngcontent-%COMP%]{flex-basis:1px!important;pointer-events:none}[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%] > .as-split-gutter-icon[_ngcontent-%COMP%]{width:100%;height:100%;background-position:center center;background-repeat:no-repeat}[_nghost-%COMP%]    >.as-split-area{flex-grow:0;flex-shrink:0;overflow-x:hidden;overflow-y:auto}[_nghost-%COMP%]    >.as-split-area.as-hidden{flex:0 1 0px!important;overflow-x:hidden;overflow-y:hidden}.as-horizontal[_nghost-%COMP%]{flex-direction:row}.as-horizontal[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{flex-direction:row;cursor:col-resize;height:100%}.as-horizontal[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%] > .as-split-gutter-icon[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==)}.as-horizontal[_nghost-%COMP%]    >.as-split-area{height:100%}.as-vertical[_nghost-%COMP%]{flex-direction:column}.as-vertical[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{flex-direction:column;cursor:row-resize;width:100%}.as-vertical[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]   .as-split-gutter-icon[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAFCAMAAABl/6zIAAAABlBMVEUAAADMzMzIT8AyAAAAAXRSTlMAQObYZgAAABRJREFUeAFjYGRkwIMJSeMHlBkOABP7AEGzSuPKAAAAAElFTkSuQmCC)}.as-vertical[_nghost-%COMP%]    >.as-split-area{width:100%}.as-vertical[_nghost-%COMP%]    >.as-split-area.as-hidden{max-width:0}.as-disabled[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{cursor:default}.as-disabled[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]   .as-split-gutter-icon[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==)}.as-transition.as-init[_nghost-%COMP%]:not(.as-dragging) > .as-split-gutter[_ngcontent-%COMP%], .as-transition.as-init[_nghost-%COMP%]:not(.as-dragging)    >.as-split-area{transition:flex-basis .3s}"],changeDetection:0}),a}(),X_=function(){var a=function(){function n(t,e,o,s){(0,p.Z)(this,n),this.ngZone=t,this.elRef=e,this.renderer=o,this.split=s,this._order=null,this._size=null,this._minSize=null,this._maxSize=null,this._lockSize=!1,this._visible=!0,this.lockListeners=[],this.renderer.addClass(this.elRef.nativeElement,"as-split-area")}return(0,_.Z)(n,[{key:"order",get:function(){return this._order},set:function(e){this._order=yu(e,null),this.split.updateArea(this,!0,!1)}},{key:"size",get:function(){return this._size},set:function(e){this._size=yu(e,null),this.split.updateArea(this,!1,!0)}},{key:"minSize",get:function(){return this._minSize},set:function(e){this._minSize=yu(e,null),this.split.updateArea(this,!1,!0)}},{key:"maxSize",get:function(){return this._maxSize},set:function(e){this._maxSize=yu(e,null),this.split.updateArea(this,!1,!0)}},{key:"lockSize",get:function(){return this._lockSize},set:function(e){this._lockSize=K_(e),this.split.updateArea(this,!1,!0)}},{key:"visible",get:function(){return this._visible},set:function(e){this._visible=K_(e),this._visible?(this.split.showArea(this),this.renderer.removeClass(this.elRef.nativeElement,"as-hidden")):(this.split.hideArea(this),this.renderer.addClass(this.elRef.nativeElement,"as-hidden"))}},{key:"ngOnInit",value:function(){var e=this;this.split.addArea(this),this.ngZone.runOutsideAngular(function(){e.transitionListener=e.renderer.listen(e.elRef.nativeElement,"transitionend",function(o){"flex-basis"===o.propertyName&&e.split.notify("transitionEnd",-1)})})}},{key:"setStyleOrder",value:function(e){this.renderer.setStyle(this.elRef.nativeElement,"order",e)}},{key:"setStyleFlex",value:function(e,o,s,u,c){this.renderer.setStyle(this.elRef.nativeElement,"flex-grow",e),this.renderer.setStyle(this.elRef.nativeElement,"flex-shrink",o),this.renderer.setStyle(this.elRef.nativeElement,"flex-basis",s),!0===u?this.renderer.addClass(this.elRef.nativeElement,"as-min"):this.renderer.removeClass(this.elRef.nativeElement,"as-min"),!0===c?this.renderer.addClass(this.elRef.nativeElement,"as-max"):this.renderer.removeClass(this.elRef.nativeElement,"as-max")}},{key:"lockEvents",value:function(){var e=this;this.ngZone.runOutsideAngular(function(){e.lockListeners.push(e.renderer.listen(e.elRef.nativeElement,"selectstart",function(){return!1})),e.lockListeners.push(e.renderer.listen(e.elRef.nativeElement,"dragstart",function(){return!1}))})}},{key:"unlockEvents",value:function(){for(;this.lockListeners.length>0;){var e=this.lockListeners.pop();e&&e()}}},{key:"ngOnDestroy",value:function(){this.unlockEvents(),this.transitionListener&&this.transitionListener(),this.split.removeArea(this)}},{key:"collapse",value:function(){this.split.collapseArea(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"right")}},{key:"expand",value:function(){this.split.expandArea(this)}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(r.NgZone),r.\u0275\u0275directiveInject(r.ElementRef),r.\u0275\u0275directiveInject(r.Renderer2),r.\u0275\u0275directiveInject(W_))},a.\u0275dir=r.\u0275\u0275defineDirective({type:a,selectors:[["as-split-area"],["","as-split-area",""]],inputs:{order:"order",size:"size",minSize:"minSize",maxSize:"maxSize",lockSize:"lockSize",visible:"visible"},exportAs:["asSplitArea"]}),a}(),sE=function(){var a=function(){function n(){(0,p.Z)(this,n)}return(0,_.Z)(n,null,[{key:"forRoot",value:function(){return console.warn("AngularSplitModule.forRoot() is deprecated and will be removed in v6"),{ngModule:n,providers:[]}}},{key:"forChild",value:function(){return console.warn("AngularSplitModule.forChild() is deprecated and will be removed in v6"),{ngModule:n,providers:[]}}}]),n}();return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({imports:[E.CommonModule]}),a}(),CI=S(78947),Zj=S(73),xu=S(98977),uE=S(44874),wI=S(80155);var wc={async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1},EI=/[&<>"']/,jj=new RegExp(EI.source,"g"),PI=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,$j=new RegExp(PI.source,"g"),Uj={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},kI=function(n){return Uj[n]};function uo(a,n){if(n){if(EI.test(a))return a.replace(jj,kI)}else if(PI.test(a))return a.replace($j,kI);return a}var zj=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function AI(a){return a.replace(zj,function(n,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}var Gj=/(^|[^\[])\^/g;function Nr(a,n){a="string"==typeof a?a:a.source,n=n||"";var t={replace:function(o,s){return s=(s=s.source||s).replace(Gj,"$1"),a=a.replace(o,s),t},getRegex:function(){return new RegExp(a,n)}};return t}var Vj=/[^\w:]/g,Hj=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function RI(a,n,t){if(a){var e;try{e=decodeURIComponent(AI(t)).replace(Vj,"").toLowerCase()}catch{return null}if(0===e.indexOf("javascript:")||0===e.indexOf("vbscript:")||0===e.indexOf("data:"))return null}n&&!Hj.test(t)&&(t=function Xj(a,n){cE[" "+a]||(cE[" "+a]=qj.test(a)?a+"/":dE(a,"/",!0));var t=-1===(a=cE[" "+a]).indexOf(":");return"//"===n.substring(0,2)?t?n:a.replace(Kj,"$1")+n:"/"===n.charAt(0)?t?n:a.replace(Wj,"$1")+n:a+n}(n,t));try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}var cE={},qj=/^[^:]+:\/*[^/]*$/,Kj=/^([^:]+:)[\s\S]*$/,Wj=/^([^:]+:\/*[^/]*)[\s\S]*$/,lE={exec:function(){}};function DI(a,n){var e=a.replace(/\|/g,function(s,u,c){for(var l=!1,m=u;--m>=0&&"\\"===c[m];)l=!l;return l?"|":" |"}).split(/ \|/),o=0;if(e[0].trim()||e.shift(),e.length>0&&!e[e.length-1].trim()&&e.pop(),e.length>n)e.splice(n);else for(;e.length<n;)e.push("");for(;o<e.length;o++)e[o]=e[o].trim().replace(/\\\|/g,"|");return e}function dE(a,n,t){var e=a.length;if(0===e)return"";for(var o=0;o<e;){var s=a.charAt(e-o-1);if(s!==n||t){if(s===n||!t)break;o++}else o++}return a.slice(0,e-o)}function TI(a,n){if(n<1)return"";for(var t="";n>1;)1&n&&(t+=a),n>>=1,a+=a;return t+a}function II(a,n,t,e){var o=n.href,s=n.title?uo(n.title):null,u=a[1].replace(/\\([\[\]])/g,"$1");if("!"!==a[0].charAt(0)){e.state.inLink=!0;var c={type:"link",raw:t,href:o,title:s,text:u,tokens:e.inlineTokens(u)};return e.state.inLink=!1,c}return{type:"image",raw:t,href:o,title:s,text:uo(u)}}var rk=function(){function a(n){(0,p.Z)(this,a),this.options=n||wc}return(0,_.Z)(a,[{key:"space",value:function(t){var e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}},{key:"code",value:function(t){var e=this.rules.block.code.exec(t);if(e){var o=e[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?o:dE(o,"\n")}}}},{key:"fences",value:function(t){var e=this.rules.block.fences.exec(t);if(e){var o=e[0],s=function Yj(a,n){var t=a.match(/^(\s+)(?:```)/);if(null===t)return n;var e=t[1];return n.split("\n").map(function(o){var s=o.match(/^\s+/);return null===s?o:(0,g.Z)(s,1)[0].length>=e.length?o.slice(e.length):o}).join("\n")}(o,e[3]||"");return{type:"code",raw:o,lang:e[2]?e[2].trim().replace(this.rules.inline._escapes,"$1"):e[2],text:s}}}},{key:"heading",value:function(t){var e=this.rules.block.heading.exec(t);if(e){var o=e[2].trim();if(/#$/.test(o)){var s=dE(o,"#");(this.options.pedantic||!s||/ $/.test(s))&&(o=s.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:o,tokens:this.lexer.inline(o)}}}},{key:"hr",value:function(t){var e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:e[0]}}},{key:"blockquote",value:function(t){var e=this.rules.block.blockquote.exec(t);if(e){var o=e[0].replace(/^ *>[ \t]?/gm,""),s=this.lexer.state.top;this.lexer.state.top=!0;var u=this.lexer.blockTokens(o);return this.lexer.state.top=s,{type:"blockquote",raw:e[0],tokens:u,text:o}}}},{key:"list",value:function(t){var e=this.rules.block.list.exec(t);if(e){var o,s,u,c,l,m,C,T,B,F,U,ae,ue=e[1].trim(),me=ue.length>1,Se={type:"list",raw:"",ordered:me,start:me?+ue.slice(0,-1):"",loose:!1,items:[]};ue=me?"\\d{1,9}\\".concat(ue.slice(-1)):"\\".concat(ue),this.options.pedantic&&(ue=me?ue:"[*+-]");for(var we=new RegExp("^( {0,3}".concat(ue,")((?:[\t ][^\\n]*)?(?:\\n|$))"));t&&(ae=!1,(e=we.exec(t))&&!this.rules.block.hr.test(t));){if(t=t.substring((o=e[0]).length),T=e[2].split("\n",1)[0].replace(/^\t+/,function(tn){return" ".repeat(3*tn.length)}),B=t.split("\n",1)[0],this.options.pedantic?(c=2,U=T.trimLeft()):(c=e[2].search(/[^ ]/),U=T.slice(c=c>4?1:c),c+=e[1].length),m=!1,!T&&/^ *$/.test(B)&&(o+=B+"\n",t=t.substring(B.length+1),ae=!0),!ae)for(var qe=new RegExp("^ {0,".concat(Math.min(3,c-1),"}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))")),at=new RegExp("^ {0,".concat(Math.min(3,c-1),"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)")),dt=new RegExp("^ {0,".concat(Math.min(3,c-1),"}(?:```|~~~)")),Ot=new RegExp("^ {0,".concat(Math.min(3,c-1),"}#"));t&&(B=F=t.split("\n",1)[0],this.options.pedantic&&(B=B.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(dt.test(B)||Ot.test(B)||qe.test(B)||at.test(t)));){if(B.search(/[^ ]/)>=c||!B.trim())U+="\n"+B.slice(c);else{if(m||T.search(/[^ ]/)>=4||dt.test(T)||Ot.test(T)||at.test(T))break;U+="\n"+B}!m&&!B.trim()&&(m=!0),o+=F+"\n",t=t.substring(F.length+1),T=B.slice(c)}Se.loose||(C?Se.loose=!0:/\n *\n *$/.test(o)&&(C=!0)),this.options.gfm&&(s=/^\[[ xX]\] /.exec(U))&&(u="[ ] "!==s[0],U=U.replace(/^\[[ xX]\] +/,"")),Se.items.push({type:"list_item",raw:o,task:!!s,checked:u,loose:!1,text:U}),Se.raw+=o}Se.items[Se.items.length-1].raw=o.trimRight(),Se.items[Se.items.length-1].text=U.trimRight(),Se.raw=Se.raw.trimRight();var ft=Se.items.length;for(l=0;l<ft;l++)if(this.lexer.state.top=!1,Se.items[l].tokens=this.lexer.blockTokens(Se.items[l].text,[]),!Se.loose){var jt=Se.items[l].tokens.filter(function(tn){return"space"===tn.type}),Ut=jt.length>0&&jt.some(function(tn){return/\n.*\n/.test(tn.raw)});Se.loose=Ut}if(Se.loose)for(l=0;l<ft;l++)Se.items[l].loose=!0;return Se}}},{key:"html",value:function(t){var e=this.rules.block.html.exec(t);if(e){var o={type:"html",raw:e[0],pre:!this.options.sanitizer&&("pre"===e[1]||"script"===e[1]||"style"===e[1]),text:e[0]};if(this.options.sanitize){var s=this.options.sanitizer?this.options.sanitizer(e[0]):uo(e[0]);o.type="paragraph",o.text=s,o.tokens=this.lexer.inline(s)}return o}}},{key:"def",value:function(t){var e=this.rules.block.def.exec(t);if(e){var o=e[1].toLowerCase().replace(/\s+/g," "),s=e[2]?e[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",u=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline._escapes,"$1"):e[3];return{type:"def",tag:o,raw:e[0],href:s,title:u}}}},{key:"table",value:function(t){var e=this.rules.block.table.exec(t);if(e){var o={type:"table",header:DI(e[1]).map(function(C){return{text:C}}),align:e[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:e[3]&&e[3].trim()?e[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(o.header.length===o.align.length){o.raw=e[0];var u,c,l,m,s=o.align.length;for(u=0;u<s;u++)o.align[u]=/^ *-+: *$/.test(o.align[u])?"right":/^ *:-+: *$/.test(o.align[u])?"center":/^ *:-+ *$/.test(o.align[u])?"left":null;for(s=o.rows.length,u=0;u<s;u++)o.rows[u]=DI(o.rows[u],o.header.length).map(function(C){return{text:C}});for(s=o.header.length,c=0;c<s;c++)o.header[c].tokens=this.lexer.inline(o.header[c].text);for(s=o.rows.length,c=0;c<s;c++)for(m=o.rows[c],l=0;l<m.length;l++)m[l].tokens=this.lexer.inline(m[l].text);return o}}}},{key:"lheading",value:function(t){var e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:"="===e[2].charAt(0)?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}},{key:"paragraph",value:function(t){var e=this.rules.block.paragraph.exec(t);if(e){var o="\n"===e[1].charAt(e[1].length-1)?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:o,tokens:this.lexer.inline(o)}}}},{key:"text",value:function(t){var e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}},{key:"escape",value:function(t){var e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:uo(e[1])}}},{key:"tag",value:function(t){var e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&/^<a /i.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(e[0]):uo(e[0]):e[0]}}},{key:"link",value:function(t){var e=this.rules.inline.link.exec(t);if(e){var o=e[2].trim();if(!this.options.pedantic&&/^</.test(o)){if(!/>$/.test(o))return;var s=dE(o.slice(0,-1),"\\");if((o.length-s.length)%2==0)return}else{var u=function Qj(a,n){if(-1===a.indexOf(n[1]))return-1;for(var t=a.length,e=0,o=0;o<t;o++)if("\\"===a[o])o++;else if(a[o]===n[0])e++;else if(a[o]===n[1]&&--e<0)return o;return-1}(e[2],"()");if(u>-1){var l=(0===e[0].indexOf("!")?5:4)+e[1].length+u;e[2]=e[2].substring(0,u),e[0]=e[0].substring(0,l).trim(),e[3]=""}}var m=e[2],C="";if(this.options.pedantic){var T=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(m);T&&(m=T[1],C=T[3])}else C=e[3]?e[3].slice(1,-1):"";return m=m.trim(),/^</.test(m)&&(m=this.options.pedantic&&!/>$/.test(o)?m.slice(1):m.slice(1,-1)),II(e,{href:m&&m.replace(this.rules.inline._escapes,"$1"),title:C&&C.replace(this.rules.inline._escapes,"$1")},e[0],this.lexer)}}},{key:"reflink",value:function(t,e){var o;if((o=this.rules.inline.reflink.exec(t))||(o=this.rules.inline.nolink.exec(t))){var s=(o[2]||o[1]).replace(/\s+/g," ");if(!(s=e[s.toLowerCase()])){var u=o[0].charAt(0);return{type:"text",raw:u,text:u}}return II(o,s,o[0],this.lexer)}}},{key:"emStrong",value:function(t,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=this.rules.inline.emStrong.lDelim.exec(t);if(s&&(!s[3]||!o.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDF50-\uDF59\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEC0-\uDED3\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDCD0-\uDCEB\uDCF0-\uDCF9\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])/))){var u=s[1]||s[2]||"";if(!u||u&&(""===o||this.rules.inline.punctuation.exec(o))){var l,m,c=s[0].length-1,C=c,T=0,B="*"===s[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(B.lastIndex=0,e=e.slice(-1*t.length+c);null!=(s=B.exec(e));)if(l=s[1]||s[2]||s[3]||s[4]||s[5]||s[6]){if(m=l.length,s[3]||s[4]){C+=m;continue}if((s[5]||s[6])&&c%3&&!((c+m)%3)){T+=m;continue}if(!((C-=m)>0)){m=Math.min(m,m+C+T);var F=t.slice(0,c+s.index+(s[0].length-l.length)+m);if(Math.min(c,m)%2){var U=F.slice(1,-1);return{type:"em",raw:F,text:U,tokens:this.lexer.inlineTokens(U)}}var ae=F.slice(2,-2);return{type:"strong",raw:F,text:ae,tokens:this.lexer.inlineTokens(ae)}}}}}}},{key:"codespan",value:function(t){var e=this.rules.inline.code.exec(t);if(e){var o=e[2].replace(/\n/g," "),s=/[^ ]/.test(o),u=/^ /.test(o)&&/ $/.test(o);return s&&u&&(o=o.substring(1,o.length-1)),o=uo(o,!0),{type:"codespan",raw:e[0],text:o}}}},{key:"br",value:function(t){var e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}},{key:"del",value:function(t){var e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}},{key:"autolink",value:function(t,e){var s,u,o=this.rules.inline.autolink.exec(t);if(o)return u="@"===o[2]?"mailto:"+(s=uo(this.options.mangle?e(o[1]):o[1])):s=uo(o[1]),{type:"link",raw:o[0],text:s,href:u,tokens:[{type:"text",raw:s,text:s}]}}},{key:"url",value:function(t,e){var o;if(o=this.rules.inline.url.exec(t)){var s,u;if("@"===o[2])u="mailto:"+(s=uo(this.options.mangle?e(o[0]):o[0]));else{var c;do{c=o[0],o[0]=this.rules.inline._backpedal.exec(o[0])[0]}while(c!==o[0]);s=uo(o[0]),u="www."===o[1]?"http://"+o[0]:o[0]}return{type:"link",raw:o[0],text:s,href:u,tokens:[{type:"text",raw:s,text:s}]}}}},{key:"inlineText",value:function(t,e){var s,o=this.rules.inline.text.exec(t);if(o)return s=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(o[0]):uo(o[0]):o[0]:uo(this.options.smartypants?e(o[0]):o[0]),{type:"text",raw:o[0],text:s}}}]),a}(),Dn={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:lE,lheading:/^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};Dn.def=Nr(Dn.def).replace("label",Dn._label).replace("title",Dn._title).getRegex(),Dn.bullet=/(?:[*+-]|\d{1,9}[.)])/,Dn.listItemStart=Nr(/^( *)(bull) */).replace("bull",Dn.bullet).getRegex(),Dn.list=Nr(Dn.list).replace(/bull/g,Dn.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Dn.def.source+")").getRegex(),Dn._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Dn._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,Dn.html=Nr(Dn.html,"i").replace("comment",Dn._comment).replace("tag",Dn._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Dn.paragraph=Nr(Dn._paragraph).replace("hr",Dn.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Dn._tag).getRegex(),Dn.blockquote=Nr(Dn.blockquote).replace("paragraph",Dn.paragraph).getRegex(),Dn.normal=(0,b.Z)({},Dn),Dn.gfm=(0,b.Z)((0,b.Z)({},Dn.normal),{},{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),Dn.gfm.table=Nr(Dn.gfm.table).replace("hr",Dn.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Dn._tag).getRegex(),Dn.gfm.paragraph=Nr(Dn._paragraph).replace("hr",Dn.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",Dn.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Dn._tag).getRegex(),Dn.pedantic=(0,b.Z)((0,b.Z)({},Dn.normal),{},{html:Nr("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",Dn._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:lE,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Nr(Dn.normal._paragraph).replace("hr",Dn.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",Dn.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var mn={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:lE,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:lE,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function e8(a){return a.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026")}function OI(a){var t,e,n="",o=a.length;for(t=0;t<o;t++)e=a.charCodeAt(t),Math.random()>.5&&(e="x"+e.toString(16)),n+="&#"+e+";";return n}mn._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",mn.punctuation=Nr(mn.punctuation).replace(/punctuation/g,mn._punctuation).getRegex(),mn.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,mn.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g,mn._comment=Nr(Dn._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),mn.emStrong.lDelim=Nr(mn.emStrong.lDelim).replace(/punct/g,mn._punctuation).getRegex(),mn.emStrong.rDelimAst=Nr(mn.emStrong.rDelimAst,"g").replace(/punct/g,mn._punctuation).getRegex(),mn.emStrong.rDelimUnd=Nr(mn.emStrong.rDelimUnd,"g").replace(/punct/g,mn._punctuation).getRegex(),mn._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,mn._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,mn._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,mn.autolink=Nr(mn.autolink).replace("scheme",mn._scheme).replace("email",mn._email).getRegex(),mn._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,mn.tag=Nr(mn.tag).replace("comment",mn._comment).replace("attribute",mn._attribute).getRegex(),mn._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,mn._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,mn._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,mn.link=Nr(mn.link).replace("label",mn._label).replace("href",mn._href).replace("title",mn._title).getRegex(),mn.reflink=Nr(mn.reflink).replace("label",mn._label).replace("ref",Dn._label).getRegex(),mn.nolink=Nr(mn.nolink).replace("ref",Dn._label).getRegex(),mn.reflinkSearch=Nr(mn.reflinkSearch,"g").replace("reflink",mn.reflink).replace("nolink",mn.nolink).getRegex(),mn.normal=(0,b.Z)({},mn),mn.pedantic=(0,b.Z)((0,b.Z)({},mn.normal),{},{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Nr(/^!?\[(label)\]\((.*?)\)/).replace("label",mn._label).getRegex(),reflink:Nr(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",mn._label).getRegex()}),mn.gfm=(0,b.Z)((0,b.Z)({},mn.normal),{},{escape:Nr(mn.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),mn.gfm.url=Nr(mn.gfm.url,"i").replace("email",mn.gfm._extended_email).getRegex(),mn.breaks=(0,b.Z)((0,b.Z)({},mn.gfm),{},{br:Nr(mn.br).replace("{2,}","*").getRegex(),text:Nr(mn.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var Q_=function(){function a(n){(0,p.Z)(this,a),this.tokens=[],this.tokens.links=Object.create(null),this.options=n||wc,this.options.tokenizer=this.options.tokenizer||new rk,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var t={block:Dn.normal,inline:mn.normal};this.options.pedantic?(t.block=Dn.pedantic,t.inline=mn.pedantic):this.options.gfm&&(t.block=Dn.gfm,t.inline=this.options.breaks?mn.breaks:mn.gfm),this.tokenizer.rules=t}return(0,_.Z)(a,[{key:"lex",value:function(t){t=t.replace(/\r\n|\r/g,"\n"),this.blockTokens(t,this.tokens);for(var e;e=this.inlineQueue.shift();)this.inlineTokens(e.src,e.tokens);return this.tokens}},{key:"blockTokens",value:function(t){var e=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t=this.options.pedantic?t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t.replace(/^( *)(\t+)/gm,function(T,B,F){return B+"    ".repeat(F.length)});for(var s,u,c,l,m=function(){if(e.options.extensions&&e.options.extensions.block&&e.options.extensions.block.some(function(ue){return!!(s=ue.call({lexer:e},t,o))&&(t=t.substring(s.raw.length),o.push(s),!0)}))return"continue";if(s=e.tokenizer.space(t))return t=t.substring(s.raw.length),1===s.raw.length&&o.length>0?o[o.length-1].raw+="\n":o.push(s),"continue";if(s=e.tokenizer.code(t))return t=t.substring(s.raw.length),!(u=o[o.length-1])||"paragraph"!==u.type&&"text"!==u.type?o.push(s):(u.raw+="\n"+s.raw,u.text+="\n"+s.text,e.inlineQueue[e.inlineQueue.length-1].src=u.text),"continue";if((s=e.tokenizer.fences(t))||(s=e.tokenizer.heading(t))||(s=e.tokenizer.hr(t))||(s=e.tokenizer.blockquote(t))||(s=e.tokenizer.list(t))||(s=e.tokenizer.html(t)))return t=t.substring(s.raw.length),o.push(s),"continue";if(s=e.tokenizer.def(t))return t=t.substring(s.raw.length),!(u=o[o.length-1])||"paragraph"!==u.type&&"text"!==u.type?e.tokens.links[s.tag]||(e.tokens.links[s.tag]={href:s.href,title:s.title}):(u.raw+="\n"+s.raw,u.text+="\n"+s.raw,e.inlineQueue[e.inlineQueue.length-1].src=u.text),"continue";if((s=e.tokenizer.table(t))||(s=e.tokenizer.lheading(t)))return t=t.substring(s.raw.length),o.push(s),"continue";if(c=t,e.options.extensions&&e.options.extensions.startBlock){var U,B=1/0,F=t.slice(1);e.options.extensions.startBlock.forEach(function(ue){"number"==typeof(U=ue.call({lexer:this},F))&&U>=0&&(B=Math.min(B,U))}),B<1/0&&B>=0&&(c=t.substring(0,B+1))}if(e.state.top&&(s=e.tokenizer.paragraph(c)))return u=o[o.length-1],l&&"paragraph"===u.type?(u.raw+="\n"+s.raw,u.text+="\n"+s.text,e.inlineQueue.pop(),e.inlineQueue[e.inlineQueue.length-1].src=u.text):o.push(s),l=c.length!==t.length,t=t.substring(s.raw.length),"continue";if(s=e.tokenizer.text(t))return t=t.substring(s.raw.length),(u=o[o.length-1])&&"text"===u.type?(u.raw+="\n"+s.raw,u.text+="\n"+s.text,e.inlineQueue.pop(),e.inlineQueue[e.inlineQueue.length-1].src=u.text):o.push(s),"continue";if(t){var ae="Infinite loop on byte: "+t.charCodeAt(0);if(e.options.silent)return console.error(ae),"break";throw new Error(ae)}};t;){var C=m();if("continue"!==C&&"break"===C)break}return this.state.top=!0,o}},{key:"inline",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.inlineQueue.push({src:t,tokens:e}),e}},{key:"inlineTokens",value:function(t){var s,u,c,m,C,T,e=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],l=t;if(this.tokens.links){var B=Object.keys(this.tokens.links);if(B.length>0)for(;null!=(m=this.tokenizer.rules.inline.reflinkSearch.exec(l));)B.includes(m[0].slice(m[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,m.index)+"["+TI("a",m[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(m=this.tokenizer.rules.inline.blockSkip.exec(l));)l=l.slice(0,m.index)+"["+TI("a",m[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(m=this.tokenizer.rules.inline.escapedEmSt.exec(l));)l=l.slice(0,m.index+m[0].length-2)+"++"+l.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex),this.tokenizer.rules.inline.escapedEmSt.lastIndex--;for(var F=function(){if(C||(T=""),C=!1,e.options.extensions&&e.options.extensions.inline&&e.options.extensions.inline.some(function(qe){return!!(s=qe.call({lexer:e},t,o))&&(t=t.substring(s.raw.length),o.push(s),!0)}))return"continue";if(s=e.tokenizer.escape(t))return t=t.substring(s.raw.length),o.push(s),"continue";if(s=e.tokenizer.tag(t))return t=t.substring(s.raw.length),(u=o[o.length-1])&&"text"===s.type&&"text"===u.type?(u.raw+=s.raw,u.text+=s.text):o.push(s),"continue";if(s=e.tokenizer.link(t))return t=t.substring(s.raw.length),o.push(s),"continue";if(s=e.tokenizer.reflink(t,e.tokens.links))return t=t.substring(s.raw.length),(u=o[o.length-1])&&"text"===s.type&&"text"===u.type?(u.raw+=s.raw,u.text+=s.text):o.push(s),"continue";if((s=e.tokenizer.emStrong(t,l,T))||(s=e.tokenizer.codespan(t))||(s=e.tokenizer.br(t))||(s=e.tokenizer.del(t))||(s=e.tokenizer.autolink(t,OI))||!e.state.inLink&&(s=e.tokenizer.url(t,OI)))return t=t.substring(s.raw.length),o.push(s),"continue";if(c=t,e.options.extensions&&e.options.extensions.startInline){var Se,ue=1/0,me=t.slice(1);e.options.extensions.startInline.forEach(function(qe){"number"==typeof(Se=qe.call({lexer:this},me))&&Se>=0&&(ue=Math.min(ue,Se))}),ue<1/0&&ue>=0&&(c=t.substring(0,ue+1))}if(s=e.tokenizer.inlineText(c,e8))return t=t.substring(s.raw.length),"_"!==s.raw.slice(-1)&&(T=s.raw.slice(-1)),C=!0,(u=o[o.length-1])&&"text"===u.type?(u.raw+=s.raw,u.text+=s.text):o.push(s),"continue";if(t){var we="Infinite loop on byte: "+t.charCodeAt(0);if(e.options.silent)return console.error(we),"break";throw new Error(we)}};t;){var U=F();if("continue"!==U&&"break"===U)break}return o}}],[{key:"rules",get:function(){return{block:Dn,inline:mn}}},{key:"lex",value:function(t,e){return new a(e).lex(t)}},{key:"lexInline",value:function(t,e){return new a(e).inlineTokens(t)}}]),a}(),Sc=function(){function a(n){(0,p.Z)(this,a),this.options=n||wc}return(0,_.Z)(a,[{key:"code",value:function(t,e,o){var s=(e||"").match(/\S*/)[0];if(this.options.highlight){var u=this.options.highlight(t,s);null!=u&&u!==t&&(o=!0,t=u)}return t=t.replace(/\n$/,"")+"\n",s?'<pre><code class="'+this.options.langPrefix+uo(s)+'">'+(o?t:uo(t,!0))+"</code></pre>\n":"<pre><code>"+(o?t:uo(t,!0))+"</code></pre>\n"}},{key:"blockquote",value:function(t){return"<blockquote>\n".concat(t,"</blockquote>\n")}},{key:"html",value:function(t){return t}},{key:"heading",value:function(t,e,o,s){if(this.options.headerIds){var u=this.options.headerPrefix+s.slug(o);return"<h".concat(e,' id="').concat(u,'">').concat(t,"</h").concat(e,">\n")}return"<h".concat(e,">").concat(t,"</h").concat(e,">\n")}},{key:"hr",value:function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}},{key:"list",value:function(t,e,o){var s=e?"ol":"ul";return"<"+s+(e&&1!==o?' start="'+o+'"':"")+">\n"+t+"</"+s+">\n"}},{key:"listitem",value:function(t){return"<li>".concat(t,"</li>\n")}},{key:"checkbox",value:function(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}},{key:"paragraph",value:function(t){return"<p>".concat(t,"</p>\n")}},{key:"table",value:function(t,e){return e&&(e="<tbody>".concat(e,"</tbody>")),"<table>\n<thead>\n"+t+"</thead>\n"+e+"</table>\n"}},{key:"tablerow",value:function(t){return"<tr>\n".concat(t,"</tr>\n")}},{key:"tablecell",value:function(t,e){var o=e.header?"th":"td";return(e.align?"<".concat(o,' align="').concat(e.align,'">'):"<".concat(o,">"))+t+"</".concat(o,">\n")}},{key:"strong",value:function(t){return"<strong>".concat(t,"</strong>")}},{key:"em",value:function(t){return"<em>".concat(t,"</em>")}},{key:"codespan",value:function(t){return"<code>".concat(t,"</code>")}},{key:"br",value:function(){return this.options.xhtml?"<br/>":"<br>"}},{key:"del",value:function(t){return"<del>".concat(t,"</del>")}},{key:"link",value:function(t,e,o){if(null===(t=RI(this.options.sanitize,this.options.baseUrl,t)))return o;var s='<a href="'+t+'"';return e&&(s+=' title="'+e+'"'),s+">"+o+"</a>"}},{key:"image",value:function(t,e,o){if(null===(t=RI(this.options.sanitize,this.options.baseUrl,t)))return o;var s='<img src="'.concat(t,'" alt="').concat(o,'"');return e&&(s+=' title="'.concat(e,'"')),s+(this.options.xhtml?"/>":">")}},{key:"text",value:function(t){return t}}]),a}(),FI=function(){function a(){(0,p.Z)(this,a)}return(0,_.Z)(a,[{key:"strong",value:function(t){return t}},{key:"em",value:function(t){return t}},{key:"codespan",value:function(t){return t}},{key:"del",value:function(t){return t}},{key:"html",value:function(t){return t}},{key:"text",value:function(t){return t}},{key:"link",value:function(t,e,o){return""+o}},{key:"image",value:function(t,e,o){return""+o}},{key:"br",value:function(){return""}}]),a}(),MI=function(){function a(){(0,p.Z)(this,a),this.seen={}}return(0,_.Z)(a,[{key:"serialize",value:function(t){return t.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}},{key:"getNextSafeSlug",value:function(t,e){var o=t,s=0;if(this.seen.hasOwnProperty(o)){s=this.seen[t];do{o=t+"-"+ ++s}while(this.seen.hasOwnProperty(o))}return e||(this.seen[t]=s,this.seen[o]=0),o}},{key:"slug",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=this.serialize(t);return this.getNextSafeSlug(o,e.dryrun)}}]),a}(),J_=function(){function a(n){(0,p.Z)(this,a),this.options=n||wc,this.options.renderer=this.options.renderer||new Sc,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new FI,this.slugger=new MI}return(0,_.Z)(a,[{key:"parse",value:function(t){var s,u,c,l,m,C,T,B,F,U,ae,ue,me,Se,we,qe,at,dt,Ot,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o="",ft=t.length;for(s=0;s<ft;s++)if(U=t[s],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[U.type]&&(!1!==(Ot=this.options.extensions.renderers[U.type].call({parser:this},U))||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(U.type)))o+=Ot||"";else switch(U.type){case"space":continue;case"hr":o+=this.renderer.hr();continue;case"heading":o+=this.renderer.heading(this.parseInline(U.tokens),U.depth,AI(this.parseInline(U.tokens,this.textRenderer)),this.slugger);continue;case"code":o+=this.renderer.code(U.text,U.lang,U.escaped);continue;case"table":for(B="",T="",l=U.header.length,u=0;u<l;u++)T+=this.renderer.tablecell(this.parseInline(U.header[u].tokens),{header:!0,align:U.align[u]});for(B+=this.renderer.tablerow(T),F="",l=U.rows.length,u=0;u<l;u++){for(T="",m=(C=U.rows[u]).length,c=0;c<m;c++)T+=this.renderer.tablecell(this.parseInline(C[c].tokens),{header:!1,align:U.align[c]});F+=this.renderer.tablerow(T)}o+=this.renderer.table(B,F);continue;case"blockquote":F=this.parse(U.tokens),o+=this.renderer.blockquote(F);continue;case"list":for(ae=U.ordered,ue=U.start,me=U.loose,l=U.items.length,F="",u=0;u<l;u++)qe=(we=U.items[u]).checked,at=we.task,Se="",we.task&&(dt=this.renderer.checkbox(qe),me?we.tokens.length>0&&"paragraph"===we.tokens[0].type?(we.tokens[0].text=dt+" "+we.tokens[0].text,we.tokens[0].tokens&&we.tokens[0].tokens.length>0&&"text"===we.tokens[0].tokens[0].type&&(we.tokens[0].tokens[0].text=dt+" "+we.tokens[0].tokens[0].text)):we.tokens.unshift({type:"text",text:dt}):Se+=dt),Se+=this.parse(we.tokens,me),F+=this.renderer.listitem(Se,at,qe);o+=this.renderer.list(F,ae,ue);continue;case"html":o+=this.renderer.html(U.text);continue;case"paragraph":o+=this.renderer.paragraph(this.parseInline(U.tokens));continue;case"text":for(F=U.tokens?this.parseInline(U.tokens):U.text;s+1<ft&&"text"===t[s+1].type;)F+="\n"+((U=t[++s]).tokens?this.parseInline(U.tokens):U.text);o+=e?this.renderer.paragraph(F):F;continue;default:var jt='Token with "'+U.type+'" type was not found.';if(this.options.silent)return void console.error(jt);throw new Error(jt)}return o}},{key:"parseInline",value:function(t,e){e=e||this.renderer;var s,u,c,o="",l=t.length;for(s=0;s<l;s++)if(u=t[s],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[u.type]&&(!1!==(c=this.options.extensions.renderers[u.type].call({parser:this},u))||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(u.type)))o+=c||"";else switch(u.type){case"escape":case"text":o+=e.text(u.text);break;case"html":o+=e.html(u.text);break;case"link":o+=e.link(u.href,u.title,this.parseInline(u.tokens,e));break;case"image":o+=e.image(u.href,u.title,u.text);break;case"strong":o+=e.strong(this.parseInline(u.tokens,e));break;case"em":o+=e.em(this.parseInline(u.tokens,e));break;case"codespan":o+=e.codespan(u.text);break;case"br":o+=e.br();break;case"del":o+=e.del(this.parseInline(u.tokens,e));break;default:var m='Token with "'+u.type+'" type was not found.';if(this.options.silent)return void console.error(m);throw new Error(m)}return o}}],[{key:"parse",value:function(t,e){return new a(e).parse(t)}},{key:"parseInline",value:function(t,e){return new a(e).parseInline(t)}}]),a}(),fE=function(){function a(n){(0,p.Z)(this,a),this.options=n||wc}return(0,_.Z)(a,[{key:"preprocess",value:function(t){return t}},{key:"postprocess",value:function(t){return t}}]),a}();function BI(a,n){return function(t,e,o){"function"==typeof e&&(o=e,e=null);var s=(0,b.Z)({},e),u=function t8(a,n,t){return function(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",a){var o="<p>An error occurred:</p><pre>"+uo(e.message+"",!0)+"</pre>";return n?Promise.resolve(o):t?void t(null,o):o}if(n)return Promise.reject(e);if(!t)throw e;t(e)}}((e=(0,b.Z)((0,b.Z)({},Tn.defaults),s)).silent,e.async,o);if(typeof t>"u"||null===t)return u(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof t)return u(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(function Jj(a){a&&a.sanitize&&!a.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}(e),e.hooks&&(e.hooks.options=e),o){var l,c=e.highlight;try{e.hooks&&(t=e.hooks.preprocess(t)),l=a(t,e)}catch(F){return u(F)}var m=function(U){var ae;if(!U)try{e.walkTokens&&Tn.walkTokens(l,e.walkTokens),ae=n(l,e),e.hooks&&(ae=e.hooks.postprocess(ae))}catch(ue){U=ue}return e.highlight=c,U?u(U):o(null,ae)};if(!c||c.length<3||(delete e.highlight,!l.length))return m();var C=0;return Tn.walkTokens(l,function(F){"code"===F.type&&(C++,setTimeout(function(){c(F.text,F.lang,function(U,ae){if(U)return m(U);null!=ae&&ae!==F.text&&(F.text=ae,F.escaped=!0),0==--C&&m()})},0))}),void(0===C&&m())}if(e.async)return Promise.resolve(e.hooks?e.hooks.preprocess(t):t).then(function(F){return a(F,e)}).then(function(F){return e.walkTokens?Promise.all(Tn.walkTokens(F,e.walkTokens)).then(function(){return F}):F}).then(function(F){return n(F,e)}).then(function(F){return e.hooks?e.hooks.postprocess(F):F}).catch(u);try{e.hooks&&(t=e.hooks.preprocess(t));var T=a(t,e);e.walkTokens&&Tn.walkTokens(T,e.walkTokens);var B=n(T,e);return e.hooks&&(B=e.hooks.postprocess(B)),B}catch(F){return u(F)}}}function Tn(a,n,t){return BI(Q_.lex,J_.parse)(a,n,t)}(0,d.Z)(fE,"passThroughHooks",new Set(["preprocess","postprocess"])),Tn.options=Tn.setOptions=function(a){return function Lj(a){wc=a}(Tn.defaults=(0,b.Z)((0,b.Z)({},Tn.defaults),a)),Tn},Tn.getDefaults=function SI(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}},Tn.defaults=wc,Tn.use=function(){for(var a=Tn.defaults.extensions||{renderers:{},childTokens:{}},n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];t.forEach(function(o){var s=(0,b.Z)({},o);if(s.async=Tn.defaults.async||s.async||!1,o.extensions&&(o.extensions.forEach(function(ue){if(!ue.name)throw new Error("extension name required");if(ue.renderer){var me=a.renderers[ue.name];a.renderers[ue.name]=me?function(){for(var Se=arguments.length,we=new Array(Se),qe=0;qe<Se;qe++)we[qe]=arguments[qe];var at=ue.renderer.apply(this,we);return!1===at&&(at=me.apply(this,we)),at}:ue.renderer}if(ue.tokenizer){if(!ue.level||"block"!==ue.level&&"inline"!==ue.level)throw new Error("extension level must be 'block' or 'inline'");a[ue.level]?a[ue.level].unshift(ue.tokenizer):a[ue.level]=[ue.tokenizer],ue.start&&("block"===ue.level?a.startBlock?a.startBlock.push(ue.start):a.startBlock=[ue.start]:"inline"===ue.level&&(a.startInline?a.startInline.push(ue.start):a.startInline=[ue.start]))}ue.childTokens&&(a.childTokens[ue.name]=ue.childTokens)}),s.extensions=a),o.renderer){var u=Tn.defaults.renderer||new Sc,c=function(me){var Se=u[me];u[me]=function(){for(var we=arguments.length,qe=new Array(we),at=0;at<we;at++)qe[at]=arguments[at];var dt=o.renderer[me].apply(u,qe);return!1===dt&&(dt=Se.apply(u,qe)),dt}};for(var l in o.renderer)c(l);s.renderer=u}if(o.tokenizer){var m=Tn.defaults.tokenizer||new rk,C=function(me){var Se=m[me];m[me]=function(){for(var we=arguments.length,qe=new Array(we),at=0;at<we;at++)qe[at]=arguments[at];var dt=o.tokenizer[me].apply(m,qe);return!1===dt&&(dt=Se.apply(m,qe)),dt}};for(var T in o.tokenizer)C(T);s.tokenizer=m}if(o.hooks){var B=Tn.defaults.hooks||new fE,F=function(me){var Se=B[me];B[me]=fE.passThroughHooks.has(me)?function(we){if(Tn.defaults.async)return Promise.resolve(o.hooks[me].call(B,we)).then(function(at){return Se.call(B,at)});var qe=o.hooks[me].call(B,we);return Se.call(B,qe)}:function(){for(var we=arguments.length,qe=new Array(we),at=0;at<we;at++)qe[at]=arguments[at];var dt=o.hooks[me].apply(B,qe);return!1===dt&&(dt=Se.apply(B,qe)),dt}};for(var U in o.hooks)F(U);s.hooks=B}if(o.walkTokens){var ae=Tn.defaults.walkTokens;s.walkTokens=function(ue){var me=[];return me.push(o.walkTokens.call(this,ue)),ae&&(me=me.concat(ae.call(this,ue))),me}}Tn.setOptions(s)})},Tn.walkTokens=function(a,n){var o,t=[],e=(0,te.Z)(a);try{var s=function(){var c=o.value;switch(t=t.concat(n.call(Tn,c)),c.type){case"table":var m,l=(0,te.Z)(c.header);try{for(l.s();!(m=l.n()).done;)t=t.concat(Tn.walkTokens(m.value.tokens,n))}catch(me){l.e(me)}finally{l.f()}var B,T=(0,te.Z)(c.rows);try{for(T.s();!(B=T.n()).done;){var ae,U=(0,te.Z)(B.value);try{for(U.s();!(ae=U.n()).done;)t=t.concat(Tn.walkTokens(ae.value.tokens,n))}catch(me){U.e(me)}finally{U.f()}}}catch(me){T.e(me)}finally{T.f()}break;case"list":t=t.concat(Tn.walkTokens(c.items,n));break;default:Tn.defaults.extensions&&Tn.defaults.extensions.childTokens&&Tn.defaults.extensions.childTokens[c.type]?Tn.defaults.extensions.childTokens[c.type].forEach(function(me){t=t.concat(Tn.walkTokens(c[me],n))}):c.tokens&&(t=t.concat(Tn.walkTokens(c.tokens,n)))}};for(e.s();!(o=e.n()).done;)s()}catch(u){e.e(u)}finally{e.f()}return t},Tn.parseInline=BI(Q_.lexInline,J_.parseInline),Tn.Parser=J_,Tn.parser=J_.parse,Tn.Renderer=Sc,Tn.TextRenderer=FI,Tn.Lexer=Q_,Tn.lexer=Q_.lex,Tn.Tokenizer=rk,Tn.Slugger=MI,Tn.Hooks=fE,Tn.parse=Tn;var UI,a,o,n8=["*"],NI=function(){var a=function(){function n(){(0,p.Z)(this,n),this._buttonClick$=new se.x,this.copied$=this._buttonClick$.pipe((0,st.w)(function(){return(0,J.T)((0,je.of)(!0),(0,CI.H)(3e3).pipe((0,Zj.h)(!1)))}),(0,xu.x)(),(0,Zi.d)(1)),this.copiedText$=this.copied$.pipe((0,uE.O)(!1),(0,Ce.U)(function(t){return t?"Copied":"Copy"}))}return(0,_.Z)(n,[{key:"onCopyToClipboardClick",value:function(){this._buttonClick$.next()}}]),n}();return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["markdown-clipboard"]],decls:4,vars:7,consts:[[1,"markdown-clipboard-button",3,"click"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"button",0),r.\u0275\u0275listener("click",function(){return e.onCopyToClipboardClick()}),r.\u0275\u0275pipe(1,"async"),r.\u0275\u0275text(2),r.\u0275\u0275pipe(3,"async"),r.\u0275\u0275elementEnd()),2&t&&(r.\u0275\u0275classProp("copied",r.\u0275\u0275pipeBind1(1,3,e.copied$)),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(r.\u0275\u0275pipeBind1(3,5,e.copiedText$)))},dependencies:[E.AsyncPipe],encapsulation:2,changeDetection:0}),a}(),o8=(0,_.Z)(function a(){(0,p.Z)(this,a)}),bu=function(){return(bu=bu||{}).CommandLine="command-line",bu.LineHighlight="line-highlight",bu.LineNumbers="line-numbers",bu}(),ZI=(0,_.Z)(function a(){(0,p.Z)(this,a)}),LI=new r.InjectionToken("SECURITY_CONTEXT"),pE=function(){var a=function(){function n(t,e,o,s,u,c){(0,p.Z)(this,n),this.platform=t,this.securityContext=e,this.http=o,this.clipboardOptions=s,this.sanitizer=c,this.DEFAULT_MARKED_OPTIONS={renderer:new Sc},this.DEFAULT_KATEX_OPTIONS={delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}]},this.DEFAULT_MERMAID_OPTIONS={startOnLoad:!1},this.DEFAULT_CLIPBOARD_OPTIONS={buttonComponent:void 0},this.DEFAULT_PARSE_OPTIONS={decodeHtml:!1,inline:!1,emoji:!1,mermaid:!1,markedOptions:this.DEFAULT_MARKED_OPTIONS,disableSanitizer:!1},this.DEFAULT_RENDER_OPTIONS={clipboard:!1,clipboardOptions:void 0,katex:!1,katexOptions:void 0,mermaid:!1,mermaidOptions:void 0},this._reload$=new se.x,this.reload$=this._reload$.asObservable(),this.options=u}return(0,_.Z)(n,[{key:"options",get:function(){return this._options},set:function(e){this._options=(0,b.Z)((0,b.Z)({},this.DEFAULT_MARKED_OPTIONS),e)}},{key:"renderer",get:function(){return this.options.renderer},set:function(e){this.options.renderer=e}},{key:"parse",value:function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.DEFAULT_PARSE_OPTIONS,s=o.decodeHtml,u=o.inline,c=o.emoji,l=o.mermaid,m=o.disableSanitizer,C=(0,b.Z)((0,b.Z)({},this.options),o.markedOptions);l&&(this.renderer=this.extendRenderer(C.renderer||new Sc));var T=this.trimIndentation(e),B=s?this.decodeHtml(T):T,F=c?this.parseEmoji(B):B,U=this.parseMarked(F,C,u);return(m?U:this.sanitizer.sanitize(this.securityContext,U))||""}},{key:"render",value:function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.DEFAULT_RENDER_OPTIONS,c=o.clipboardOptions,l=o.katex,m=o.katexOptions,C=o.mermaid,T=o.mermaidOptions;o.clipboard&&this.renderClipboard(e,arguments.length>2?arguments[2]:void 0,(0,b.Z)((0,b.Z)((0,b.Z)({},this.DEFAULT_CLIPBOARD_OPTIONS),this.clipboardOptions),c)),l&&this.renderKatex(e,(0,b.Z)((0,b.Z)({},this.DEFAULT_KATEX_OPTIONS),m)),C&&this.renderMermaid(e,(0,b.Z)((0,b.Z)({},this.DEFAULT_MERMAID_OPTIONS),T)),this.highlight(e)}},{key:"reload",value:function(){this._reload$.next()}},{key:"getSource",value:function(e){var o=this;if(!this.http)throw new Error("[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information");return this.http.get(e,{responseType:"text"}).pipe((0,Ce.U)(function(s){return o.handleExtension(e,s)}))}},{key:"highlight",value:function(e){if((0,E.isPlatformBrowser)(this.platform)&&!(typeof Prism>"u"||typeof Prism.highlightAllUnder>"u")){e||(e=document);var o=e.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(o,function(s){return s.classList.add("language-none")}),Prism.highlightAllUnder(e)}}},{key:"decodeHtml",value:function(e){if(!(0,E.isPlatformBrowser)(this.platform))return e;var o=document.createElement("textarea");return o.innerHTML=e,o.value}},{key:"extendRenderer",value:function(e){var o=e;if(!0===o.\u0275NgxMarkdownRendererExtended)return e;var s=e.code;return e.code=function(u,c,l){return"mermaid"===c?'<div class="mermaid">'.concat(u,"</div>"):s.call(this,u,c,l)},o.\u0275NgxMarkdownRendererExtended=!0,e}},{key:"handleExtension",value:function(e,o){var s=e.lastIndexOf("://"),u=s>-1?e.substring(s+4):e,c=u.lastIndexOf("/"),l=c>-1?u.substring(c+1).split("?")[0]:"",m=l.lastIndexOf("."),C=m>-1?l.substring(m+1):"";return C&&"md"!==C?"```"+C+"\n"+o+"\n```":o}},{key:"parseMarked",value:function(e,o){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?Tn.parseInline(e,o):Tn.parse(e,o)}},{key:"parseEmoji",value:function(e){if(!(0,E.isPlatformBrowser)(this.platform))return e;if(typeof joypixels>"u"||typeof joypixels.shortnameToUnicode>"u")throw new Error("[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information");return joypixels.shortnameToUnicode(e)}},{key:"renderKatex",value:function(e,o){if((0,E.isPlatformBrowser)(this.platform)){if(typeof katex>"u"||typeof renderMathInElement>"u")throw new Error("[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information");renderMathInElement(e,o)}}},{key:"renderClipboard",value:function(e,o,s){if((0,E.isPlatformBrowser)(this.platform)){if(typeof ClipboardJS>"u")throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* include Clipboard files to `angular.json` or use imports. See README for more information");if(!o)throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* provide the `viewContainerRef` parameter to `MarkdownService.render()` function");for(var u=s.buttonComponent,c=s.buttonTemplate,l=e.querySelectorAll("pre"),m=function(){var B=l.item(C),F=document.createElement("div");F.style.position="relative",B.parentNode.insertBefore(F,B),F.appendChild(B);var ae,Se,U=document.createElement("div");U.style.position="absolute",U.style.top=".5em",U.style.right=".5em",U.style.opacity="0",U.style.transition="opacity 250ms ease-out",F.insertAdjacentElement("beforeend",U),B.onmouseover=function(){return U.style.opacity="1"},B.onmouseout=function(){return U.style.opacity="0"},(ae=u?o.createComponent(u).hostView:c?o.createEmbeddedView(c):o.createComponent(NI).hostView).rootNodes.forEach(function(we){we.onmouseover=function(){return U.style.opacity="1"},U.appendChild(we),Se=new ClipboardJS(we,{text:function(){return B.innerText}})}),ae.onDestroy(function(){return Se.destroy()})},C=0;C<l.length;C++)m()}}},{key:"renderMermaid",value:function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.DEFAULT_MERMAID_OPTIONS;if((0,E.isPlatformBrowser)(this.platform)){if(typeof mermaid>"u"||typeof mermaid.init>"u")throw new Error("[ngx-markdown] When using the `mermaid` attribute you *have to* include Mermaid files to `angular.json` or use imports. See README for more information");var s=e.querySelectorAll(".mermaid");0!==s.length&&(mermaid.initialize(o),mermaid.init(s))}}},{key:"trimIndentation",value:function(e){return e?e.split("\n").map(function(s){var u=o;return s.length>0&&(u=isNaN(u)?s.search(/\S|$/):Math.min(s.search(/\S|$/),u)),isNaN(o)&&(o=u),u?s.substring(u):s}).join("\n"):"";var o}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(r.PLATFORM_ID),r.\u0275\u0275inject(LI),r.\u0275\u0275inject(O.HttpClient,8),r.\u0275\u0275inject(o8,8),r.\u0275\u0275inject(ZI,8),r.\u0275\u0275inject(Z.DomSanitizer))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),jI=function(){var a=function(){function n(t,e,o){(0,p.Z)(this,n),this.element=t,this.markdownService=e,this.viewContainerRef=o,this.error=new r.EventEmitter,this.load=new r.EventEmitter,this.ready=new r.EventEmitter,this._clipboard=!1,this._commandLine=!1,this._disableSanitizer=!1,this._emoji=!1,this._inline=!1,this._katex=!1,this._lineHighlight=!1,this._lineNumbers=!1,this._mermaid=!1,this._srcRelativeLink=!1,this.destroyed$=new se.x}return(0,_.Z)(n,[{key:"disableSanitizer",get:function(){return this._disableSanitizer},set:function(e){this._disableSanitizer=this.coerceBooleanProperty(e)}},{key:"inline",get:function(){return this._inline},set:function(e){this._inline=this.coerceBooleanProperty(e)}},{key:"srcRelativeLink",get:function(){return this._srcRelativeLink},set:function(e){this._srcRelativeLink=this.coerceBooleanProperty(e)}},{key:"clipboard",get:function(){return this._clipboard},set:function(e){this._clipboard=this.coerceBooleanProperty(e)}},{key:"emoji",get:function(){return this._emoji},set:function(e){this._emoji=this.coerceBooleanProperty(e)}},{key:"katex",get:function(){return this._katex},set:function(e){this._katex=this.coerceBooleanProperty(e)}},{key:"mermaid",get:function(){return this._mermaid},set:function(e){this._mermaid=this.coerceBooleanProperty(e)}},{key:"lineHighlight",get:function(){return this._lineHighlight},set:function(e){this._lineHighlight=this.coerceBooleanProperty(e)}},{key:"lineNumbers",get:function(){return this._lineNumbers},set:function(e){this._lineNumbers=this.coerceBooleanProperty(e)}},{key:"commandLine",get:function(){return this._commandLine},set:function(e){this._commandLine=this.coerceBooleanProperty(e)}},{key:"ngOnChanges",value:function(){this.loadContent()}},{key:"loadContent",value:function(){null==this.data?null==this.src||this.handleSrc():this.handleData()}},{key:"ngAfterViewInit",value:function(){var e=this;!this.data&&!this.src&&this.handleTransclusion(),this.markdownService.reload$.pipe((0,Qr.R)(this.destroyed$)).subscribe(function(){return e.loadContent()})}},{key:"ngOnDestroy",value:function(){this.destroyed$.next(),this.destroyed$.complete()}},{key:"render",value:function(e){var s,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.src&&this.srcRelativeLink&&(s={baseUrl:new URL(this.src,location.origin).pathname});var l={clipboard:this.clipboard,clipboardOptions:{buttonComponent:this.clipboardButtonComponent,buttonTemplate:this.clipboardButtonTemplate},katex:this.katex,katexOptions:this.katexOptions,mermaid:this.mermaid,mermaidOptions:this.mermaidOptions},m=this.markdownService.parse(e,{decodeHtml:o,inline:this.inline,emoji:this.emoji,mermaid:this.mermaid,markedOptions:s,disableSanitizer:this.disableSanitizer});this.element.nativeElement.innerHTML=m,this.handlePlugins(),this.markdownService.render(this.element.nativeElement,l,this.viewContainerRef),this.ready.emit()}},{key:"coerceBooleanProperty",value:function(e){return null!=e&&"false"!=="".concat(String(e))}},{key:"handleData",value:function(){this.render(this.data)}},{key:"handleSrc",value:function(){var e=this;this.markdownService.getSource(this.src).subscribe({next:function(s){e.render(s),e.load.emit(s)},error:function(s){return e.error.emit(s)}})}},{key:"handleTransclusion",value:function(){this.render(this.element.nativeElement.innerHTML,!0)}},{key:"handlePlugins",value:function(){this.commandLine&&(this.setPluginClass(this.element.nativeElement,bu.CommandLine),this.setPluginOptions(this.element.nativeElement,{dataFilterOutput:this.filterOutput,dataHost:this.host,dataPrompt:this.prompt,dataOutput:this.output,dataUser:this.user})),this.lineHighlight&&this.setPluginOptions(this.element.nativeElement,{dataLine:this.line,dataLineOffset:this.lineOffset}),this.lineNumbers&&(this.setPluginClass(this.element.nativeElement,bu.LineNumbers),this.setPluginOptions(this.element.nativeElement,{dataStart:this.start}))}},{key:"setPluginClass",value:function(e,o){for(var s=e.querySelectorAll("pre"),u=0;u<s.length;u++){var c,l=o instanceof Array?o:[o];(c=s.item(u).classList).add.apply(c,(0,y.Z)(l))}}},{key:"setPluginOptions",value:function(e,o){for(var s=this,u=e.querySelectorAll("pre"),c=function(C){Object.keys(o).forEach(function(T){var B=o[T];if(B){var F=s.toLispCase(T);u.item(C).setAttribute(F,B.toString())}})},l=0;l<u.length;l++)c(l)}},{key:"toLispCase",value:function(e){var o=e.match(/([A-Z])/g);if(!o)return e;for(var s=e.toString(),u=0,c=o.length;u<c;u++)s=s.replace(new RegExp(o[u]),"-"+o[u].toLowerCase());return"-"===s.slice(0,1)&&(s=s.slice(1)),s}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(r.ElementRef),r.\u0275\u0275directiveInject(pE),r.\u0275\u0275directiveInject(r.ViewContainerRef))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["markdown"],["","markdown",""]],inputs:{data:"data",src:"src",disableSanitizer:"disableSanitizer",inline:"inline",srcRelativeLink:"srcRelativeLink",clipboard:"clipboard",clipboardButtonComponent:"clipboardButtonComponent",clipboardButtonTemplate:"clipboardButtonTemplate",emoji:"emoji",katex:"katex",katexOptions:"katexOptions",mermaid:"mermaid",mermaidOptions:"mermaidOptions",lineHighlight:"lineHighlight",line:"line",lineOffset:"lineOffset",lineNumbers:"lineNumbers",start:"start",commandLine:"commandLine",filterOutput:"filterOutput",host:"host",prompt:"prompt",output:"output",user:"user"},outputs:{error:"error",load:"load",ready:"ready"},features:[r.\u0275\u0275NgOnChangesFeature],ngContentSelectors:n8,decls:1,vars:0,template:function(t,e){1&t&&(r.\u0275\u0275projectionDef(),r.\u0275\u0275projection(0))},encapsulation:2}),a}(),$I=function(){var a=function(){function n(t,e,o,s,u){(0,p.Z)(this,n),this.domSanitizer=t,this.elementRef=e,this.markdownService=o,this.viewContainerRef=s,this.zone=u}return(0,_.Z)(n,[{key:"transform",value:function(e,o){var s=this;if(null==e)return"";if("string"!=typeof e)return console.error("MarkdownPipe has been invoked with an invalid value type [".concat(typeof e,"]")),e;var u=this.markdownService.parse(e,o);return this.zone.onStable.pipe((0,wI.P)()).subscribe(function(){return s.markdownService.render(s.elementRef.nativeElement,o,s.viewContainerRef)}),this.domSanitizer.bypassSecurityTrustHtml(u)}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Z.DomSanitizer,16),r.\u0275\u0275directiveInject(r.ElementRef,16),r.\u0275\u0275directiveInject(pE,16),r.\u0275\u0275directiveInject(r.ViewContainerRef,16),r.\u0275\u0275directiveInject(r.NgZone,16))},a.\u0275pipe=r.\u0275\u0275definePipe({name:"markdown",type:a,pure:!0}),a}(),ik=function(){var a=function(){function n(){(0,p.Z)(this,n)}return(0,_.Z)(n,null,[{key:"forRoot",value:function(e){return{ngModule:n,providers:[pE,e&&e.loader||[],e&&e.clipboardOptions||[],e&&e.markedOptions||[],{provide:LI,useValue:e&&null!=e.sanitize?e.sanitize:r.SecurityContext.HTML}]}}},{key:"forChild",value:function(){return{ngModule:n}}}]),n}();return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({imports:[E.CommonModule]}),a}();(o=(a=UI||(UI={})).SecurityLevel||(a.SecurityLevel={})).Strict="strict",o.Loose="loose",o.Antiscript="antiscript",o.Sandbox="sandbox",function(o){o.Base="base",o.Forest="forest",o.Dark="dark",o.Default="default",o.Neutral="neutral"}(a.Theme||(a.Theme={})),function(o){o[o.Debug=1]="Debug",o[o.Info=2]="Info",o[o.Warn=3]="Warn",o[o.Error=4]="Error",o[o.Fatal=5]="Fatal"}(a.LogLevel||(a.LogLevel={}));var bi=S(10233),pi=S(72049),Jt=S(5311),En=S(30972),Fi=S(80565);function p8(a,n){1&a&&r.\u0275\u0275elementContainer(0)}function h8(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"form",3),r.\u0275\u0275listener("ngSubmit",function(){r.\u0275\u0275restoreView(t);var u=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(u.submit())}),r.\u0275\u0275elementStart(1,"mat-dialog-content")(2,"div",4),r.\u0275\u0275template(3,p8,1,0,"ng-container",5),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(4,"mat-dialog-actions")(5,"button",6),r.\u0275\u0275text(6,"Save"),r.\u0275\u0275elementEnd()()()}if(2&a){var e=r.\u0275\u0275nextContext(),o=r.\u0275\u0275reference(3);r.\u0275\u0275property("formGroup",e.contentForm),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngTemplateOutlet",o),r.\u0275\u0275advance(2),r.\u0275\u0275property("disabled",!e.contentForm.valid)}}function m8(a,n){1&a&&r.\u0275\u0275elementContainer(0)}function g8(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"div",4),r.\u0275\u0275template(1,m8,1,0,"ng-container",5),r.\u0275\u0275elementEnd()),2&a){r.\u0275\u0275nextContext();var t=r.\u0275\u0275reference(3);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngTemplateOutlet",t)}}function v8(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"li"),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&a){var t=n.$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(t.key)}}function _8(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"ul",18),r.\u0275\u0275template(1,v8,2,1,"li",19),r.\u0275\u0275pipe(2,"keyvalue"),r.\u0275\u0275elementEnd()),2&a){var t=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("hidden",!0),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",r.\u0275\u0275pipeBind1(2,2,t.tokens))}}function y8(a,n){if(1&a&&(r.\u0275\u0275element(0,"classifieds-ui-dynamic-content-viewer",20),r.\u0275\u0275pipe(1,"markdown")),2&a){var t=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("content",r.\u0275\u0275pipeBind1(1,1,t.preview))}}function x8(a,n){if(1&a&&r.\u0275\u0275element(0,"classifieds-ui-dynamic-content-viewer",20),2&a){var t=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("content",t.preview)}}function b8(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"as-split",7)(1,"as-split-area",8)(2,"div"),r.\u0275\u0275template(3,_8,3,4,"ul",9),r.\u0275\u0275elementStart(4,"mat-form-field")(5,"mat-label"),r.\u0275\u0275text(6,"Content Type"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(7,"mat-select",10)(8,"mat-option",11),r.\u0275\u0275text(9,"Markdown"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(10,"mat-option",12),r.\u0275\u0275text(11,"HTML"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(12,"mat-option",13),r.\u0275\u0275text(13,"JSON"),r.\u0275\u0275elementEnd()()()(),r.\u0275\u0275elementStart(14,"as-split",14)(15,"as-split-area",8)(16,"div"),r.\u0275\u0275element(17,"textarea",15),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(18,"as-split-area",8)(19,"div"),r.\u0275\u0275element(20,"textarea",16),r.\u0275\u0275elementEnd()()()(),r.\u0275\u0275elementStart(21,"as-split-area",8),r.\u0275\u0275template(22,y8,2,3,"classifieds-ui-dynamic-content-viewer",17),r.\u0275\u0275template(23,x8,1,1,"classifieds-ui-dynamic-content-viewer",17),r.\u0275\u0275elementEnd()()),2&a){var t=r.\u0275\u0275nextContext();r.\u0275\u0275property("direction",t.splitDirection)("formGroup",t.contentForm),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngIf",t.tokens),r.\u0275\u0275advance(14),r.\u0275\u0275property("cols",t.cols)("rows",t.rows),r.\u0275\u0275advance(3),r.\u0275\u0275property("cols",t.cols)("rows",t.rows),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",t.isMarkdown),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!t.isMarkdown)}}var Ec=(0,_.Z)(function a(n){(0,p.Z)(this,a),n&&(this.content=n.content,this.contentType=n.contentType,n.jsFile&&""!==n.jsFile&&(this.jsFile=n.jsFile),n.jsScript&&""!==n.jsScript&&(this.jsScript=n.jsScript))}),hE=function(){var a=function(){function n(t){(0,p.Z)(this,n),this.fb=t,this.submitted=new r.EventEmitter,this.splitDirection="vertical",this.rows=40,this.cols=100,this.rootForm=!0,this.onTouched=function(){},this.contentForm=this.fb.group({content:this.fb.control("",v.kI.required),contentType:this.fb.control("",v.kI.required),jsScript:this.fb.control("")}),this.isMarkdown=!1,this.contentEditorOptions={theme:"vs-dark",language:"text/html"}}return(0,_.Z)(n,[{key:"snippet",set:function(e){void 0!==e&&this.contentForm.setValue((0,b.Z)((0,b.Z)({},e),{},{jsScript:e.jsScript&&""!==e.jsScript?e.jsScript:""}))}},{key:"ngOnInit",value:function(){var e=this;this.contentForm.get("content").valueChanges.pipe((0,xu.x)(),(0,kr.b)(500),(0,Ce.U)(function(o){return void 0!==e.tokens?e.replaceTokens(o):o})).subscribe(function(o){e.preview=o}),this.contentForm.get("contentType").valueChanges.subscribe(function(o){e.isMarkdown="text/markdown"===o})}},{key:"writeValue",value:function(e){e&&(console.log("write value: ".concat(e)),this.contentForm.setValue(e,{emitEvent:!1}))}},{key:"registerOnChange",value:function(e){this.contentForm.valueChanges.subscribe(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){e?this.contentForm.disable():this.contentForm.enable()}},{key:"validate",value:function(e){return this.contentForm.valid?null:{invalidForm:{valid:!1,message:"snippet is invalid"}}}},{key:"submit",value:function(){this.submitted.emit(new Ec({content:this.contentForm.get("content").value,contentType:this.contentForm.get("contentType").value,jsScript:this.contentForm.get("jsScript").value}))}},{key:"replaceTokens",value:function(e){return this.tokens&&this.tokens.forEach(function(o,s){e=e.replace("[".concat(s,"]"),"".concat(o," [token = '").concat(s,"']"))}),e}},{key:"addScript",value:function(){var e=document.createElement("script");e.type="text/javascript",document.getElementsByTagName("head")[0].appendChild(e)}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(v.QS))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-snippet-form"]],inputs:{tokens:"tokens",splitDirection:"splitDirection",rows:"rows",cols:"cols",rootForm:"rootForm",snippet:"snippet"},outputs:{submitted:"submitted"},features:[r.\u0275\u0275ProvidersFeature([{provide:v.JU,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0},{provide:v.Cf,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0}])],decls:4,vars:2,consts:[[3,"formGroup","ngSubmit",4,"ngIf"],["class","content-inner",4,"ngIf"],["formBodyTpl",""],[3,"formGroup","ngSubmit"],[1,"content-inner"],[4,"ngTemplateOutlet"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"],[3,"direction","formGroup"],["size","50"],[3,"hidden",4,"ngIf"],["required","","formControlName","contentType"],["value","text/markdown"],["value","text/html"],["value","application/json"],["direction","horizontal"],["formControlName","content",3,"cols","rows"],["formControlName","jsScript",3,"cols","rows"],[3,"content",4,"ngIf"],[3,"hidden"],[4,"ngFor","ngForOf"],[3,"content"]],template:function(t,e){1&t&&(r.\u0275\u0275template(0,h8,7,3,"form",0),r.\u0275\u0275template(1,g8,2,1,"div",1),r.\u0275\u0275template(2,b8,24,9,"ng-template",null,2,r.\u0275\u0275templateRefExtractor)),2&t&&(r.\u0275\u0275property("ngIf",e.rootForm),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!e.rootForm))},dependencies:[E.NgForOf,E.NgIf,E.NgTemplateOutlet,v._Y,v.Fj,v.JJ,v.JL,v.Q7,v.sg,v.u,W_,X_,bi.MatLegacyOption,pi.MatLegacyButton,Jt.MatLegacyDialogClose,Jt.MatLegacyDialogContent,Jt.MatLegacyDialogActions,En.MatLegacyFormField,En.MatLegacyLabel,Fi.MatLegacySelect,Nn.DynamicContentViewer,E.KeyValuePipe,$I]}),a}(),ok=function(){var a=(0,_.Z)(function n(){(0,p.Z)(this,n)});return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({imports:[E.CommonModule,v.UX,v.u5,si,sE,Oi.MaterialModule,gs,ik,Nn.UtilsModule]}),a}(),zI=function(){var a=function(){function n(){(0,p.Z)(this,n)}return(0,_.Z)(n,[{key:"parseSnippet",value:function(e){return(0,je.of)(e.snippet.content)}}]),n}();return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),Rn=S(25813),C8=S(21954);function Or(a,n,t){return(0,C8.P)(function(){return a()?n:t})}var Sr=S(26562),hi=S(64744),Y_=S(53726),Hr=S(26073),Mo=S(93670);function w8(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"mat-option",10),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&a){var t=n.$implicit;r.\u0275\u0275property("value",t.value.id),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(t.value.title)}}function S8(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"mat-option",10),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&a){var t=n.$implicit;r.\u0275\u0275property("value",t),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(t)}}function E8(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"mat-form-field",2)(1,"mat-label"),r.\u0275\u0275text(2,"Context"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"mat-select",11),r.\u0275\u0275template(4,S8,2,2,"mat-option",4),r.\u0275\u0275elementEnd()()),2&a){var t=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(4),r.\u0275\u0275property("ngForOf",t.contexts)}}function P8(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"div",12)(1,"mat-checkbox",13),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd()()),2&a){var t=n.index,e=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("formGroupName",t),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(e.flagsAsArray[t])}}function k8(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"div",1)(1,"div"),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"mat-form-field",2)(4,"mat-label"),r.\u0275\u0275text(5,"Type"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(6,"mat-select",3),r.\u0275\u0275template(7,w8,2,2,"mat-option",4),r.\u0275\u0275pipe(8,"keyvalue"),r.\u0275\u0275pipe(9,"async"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275template(10,E8,5,1,"mat-form-field",5),r.\u0275\u0275elementStart(11,"mat-form-field",2),r.\u0275\u0275element(12,"input",6),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(13,"mat-form-field",2),r.\u0275\u0275element(14,"input",7),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(15,"div",8),r.\u0275\u0275template(16,P8,3,2,"div",9),r.\u0275\u0275elementEnd()()),2&a){var t=n.$implicit,e=n.index,o=r.\u0275\u0275nextContext();r.\u0275\u0275property("formGroup",t),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(o.paramName(e)),r.\u0275\u0275advance(5),r.\u0275\u0275property("ngForOf",r.\u0275\u0275pipeBind1(8,5,r.\u0275\u0275pipeBind1(9,7,o.paramPlugins$))),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngIf","context"==t.get("mapping").get("type").value),r.\u0275\u0275advance(6),r.\u0275\u0275property("ngForOf",t.get("flags").controls)}}function A8(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"mat-option",4),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&a){var t=n.$implicit;r.\u0275\u0275property("value",t.value.id),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(t.value.title)}}var Rs=function(a){(0,G.Z)(t,a);var n=(0,H.Z)(t);function t(e){var o;return(0,p.Z)(this,t),o=n.call(this,e),e&&(o.evalParam=e.evalParam,e.condition&&(o.condition=e.condition),e.usedContexts&&(o.usedContexts=e.usedContexts)),o}return(0,_.Z)(t)}(Rn.Plugin),Mi=(0,_.Z)(function a(n){(0,p.Z)(this,a),n&&(this.mapping=new GI(n.mapping),void 0!==n.flags&&(this.flags=n.flags.map(function(t){return new T8(t)})))}),GI=(0,_.Z)(function a(n){(0,p.Z)(this,a),n&&(this.type=n.type,this.value=n.value,this.testValue=n.testValue,this.context=n.context)}),T8=(0,_.Z)(function a(n){(0,p.Z)(this,a),n&&(this.name=n.name,this.enabled=n.enabled)}),Ds=(0,_.Z)(function a(n){(0,p.Z)(this,a),n&&(this.plugin=n.plugin,this.settings=n.settings?new VI(n.settings):new VI)}),VI=(0,_.Z)(function a(n){(0,p.Z)(this,a),n&&(this.paramsString=n.paramsString,n.params&&Array.isArray(n.params)&&(this.params=n.params.map(function(t){return new Mi(t)})))}),Cu=function(){var a=function(n){(0,G.Z)(e,n);var t=(0,H.Z)(e);function e(o,s){return(0,p.Z)(this,e),t.call(this,o,s)}return(0,_.Z)(e,[{key:"pluginDef",value:function(){return(0,je.of)(new Rn.PluginDef({name:"param"}))}}]),e}(Rn.BasePluginManager);return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Rn.PluginConfigurationManager),r.\u0275\u0275inject(Nn.ModuleLoaderService))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),ey=function(){var a=function(){function n(t,e){var o=this;(0,p.Z)(this,n),this.fb=t,this.ppm=e,this.contexts=[],this.params$=new z.X({}),this.paramValues$=new z.X([]),this.init$=new se.x,this.formArray=this.fb.array([]),this.paramPlugins$=this.ppm.getPlugins(),this.flags=new Map,this.savedParams=new Map,this.paramIndexes=new Map,this.paramsSub=this.params$.pipe((0,ee.b)(function(s){var u=new Map((0,y.Z)(o.paramIndexes));o.formArray.clear(),o.paramIndexes.clear();var c=0;for(var l in s)Array.isArray(s[l])?(s[l].forEach(function(m){return o.buildParams(m,c,u)}),c++):0===s[l].indexOf(":")&&(o.buildParams(s[l],c,u),c++)})).subscribe(),this.savedParamsSub=this.formArray.valueChanges.pipe((0,kr.b)(1e3),(0,ee.b)(function(s){for(var u=s.length,c=0;c<u;c++)o.savedParams.set(o.paramName(c),new Mi(s[c]))})).subscribe(),this.paramValuesSub=(0,Sr.a)([this.paramValues$,this.params$,this.init$]).pipe((0,ee.b)(function(s){for(var c=(0,g.Z)(s,1)[0],l=c?c.length:0,m=function(B){var F=Array.from(o.paramIndexes).find(function(U){return(0,g.Z)(U,2)[1]===B});void 0!==F&&o.savedParams.set(F[0],c[B])},C=0;C<l;C++)m(C)})).subscribe(),this.onTouched=function(){},this.flags.set("page","Page"),this.flags.set("limit","Limit"),this.flags.set("offset","Offset"),this.flags.set("searchString","Search String")}return(0,_.Z)(n,[{key:"params",set:function(e){this.params$.next(e)}},{key:"paramValues",set:function(e){this.paramValues$.next(e)}},{key:"flagsAsArray",get:function(){var e=[];return this.flags.forEach(function(o,s){e.push(s)}),e}},{key:"ngOnInit",value:function(){this.init$.next(void 0)}},{key:"writeValue",value:function(e){e&&this.formArray.setValue(e,{emitEvent:!1})}},{key:"registerOnChange",value:function(e){this.formArray.valueChanges.subscribe(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){e?this.formArray.disable():this.formArray.enable()}},{key:"validate",value:function(e){return this.formArray.valid?null:this.formArray.errors}},{key:"buildParams",value:function(e,o,s){var u=this;console.log("build param ".concat(e)),this.paramIndexes.set(e,o),this.formArray.push(this.fb.group({mapping:this.fb.group({type:this.fb.control("",v.kI.required),value:this.fb.control("",v.kI.required),testValue:this.fb.control(""),context:this.fb.control("")}),flags:this.fb.array(this.flagsAsArray.map(function(c){return u.fb.group({name:c,enabled:u.fb.control(!1)})}))})),this.savedParams.has(e)?this.formArray.at(o).setValue(this.savedParams.get(e)):o<this.paramValues$.value.length&&-1===Array.from(s).findIndex(function(c){return(0,g.Z)(c,2)[1]===o})&&this.formArray.at(o).setValue(this.paramValues$.value[o])}},{key:"paramName",value:function(e){var o=0;for(var s in this.params$.value)if(Array.isArray(this.params$.value[s]))for(var u=0;u<this.params$.value[s].length;u++){if(e===o)return this.params$.value[s][u];o++}else if(0===this.params$.value[s].indexOf(":")){if(o===e)return this.params$.value[s];o++}}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(v.QS),r.\u0275\u0275directiveInject(Cu))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-params-form"]],inputs:{contexts:"contexts",params:"params",paramValues:"paramValues"},features:[r.\u0275\u0275ProvidersFeature([{provide:v.JU,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0},{provide:v.Cf,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0}])],decls:1,vars:1,consts:[[3,"formGroup",4,"ngFor","ngForOf"],[3,"formGroup"],["formGroupName","mapping"],["required","","formControlName","type"],[3,"value",4,"ngFor","ngForOf"],["formGroupName","mapping",4,"ngIf"],["matInput","","formControlName","value","placeholder","value","required",""],["matInput","","formControlName","testValue","placeholder","Test Value","required",""],["formArrayName","flags"],[3,"formGroupName",4,"ngFor","ngForOf"],[3,"value"],["formControlName","context"],[3,"formGroupName"],["formControlName","enabled"]],template:function(t,e){1&t&&r.\u0275\u0275template(0,k8,17,9,"div",0),2&t&&r.\u0275\u0275property("ngForOf",e.formArray.controls)},dependencies:[E.NgForOf,E.NgIf,v.Fj,v.JJ,v.JL,v.Q7,v.sg,v.u,v.x0,v.CE,bi.MatLegacyOption,Y_.MatLegacyCheckbox,En.MatLegacyFormField,En.MatLegacyLabel,Hr.MatLegacyInput,Fi.MatLegacySelect,E.AsyncPipe,E.KeyValuePipe]}),a}(),I8=function(){var a=function(){function n(t){var e=this;(0,p.Z)(this,n),this.fb=t,this.contexts=[],this.settings$=new z.X(void 0),this.afterViewInit$=new se.x,this.paramValues$=new z.X([]),this.formGroup=this.fb.group({paramsString:this.fb.control(""),params:this.fb.control([])}),this.paramsStringChangeSub=this.formGroup.get("paramsString").valueChanges.pipe((0,kr.b)(500)).subscribe(function(o){var s=Mo.parse("?"+o);e.paramsParsed=s}),this.settingsSub=this.settings$.pipe((0,ee.b)(function(o){o&&e.formGroup.get("paramsString").setValue(o.paramsString?o.paramsString:"")})).subscribe(),this.settingsParamsSub=(0,Sr.a)([this.settings$,this.formGroup.get("paramsString").valueChanges]).pipe((0,Q.h)(function(o){return void 0!==(0,g.Z)(o,1)[0]}),(0,Rr.g)(1),(0,ee.b)(function(o){var s=(0,g.Z)(o,1);return e.paramValues$.next(s[0].params)})).subscribe(),this.onTouched=function(){}}return(0,_.Z)(n,[{key:"settings",set:function(e){this.settings$.next(e)}},{key:"writeValue",value:function(e){e&&this.formGroup.setValue(e,{emitEvent:!1})}},{key:"registerOnChange",value:function(e){this.formGroup.valueChanges.subscribe(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){e?this.formGroup.disable():this.formGroup.enable()}},{key:"validate",value:function(e){return this.formGroup.valid?null:this.formGroup.errors}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(v.QS))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["druid-params-querystring"]],inputs:{contexts:"contexts",settings:"settings"},features:[r.\u0275\u0275ProvidersFeature([{provide:v.JU,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0},{provide:v.Cf,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0}])],decls:6,vars:4,consts:[[3,"formGroup"],[1,"params-container"],["matInput","","placeholder","Params","formControlName","paramsString"],["formControlName","params",3,"params","paramValues","contexts"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div")(3,"mat-form-field"),r.\u0275\u0275element(4,"input",2),r.\u0275\u0275elementEnd()(),r.\u0275\u0275element(5,"classifieds-ui-params-form",3),r.\u0275\u0275elementEnd()()),2&t&&(r.\u0275\u0275property("formGroup",e.formGroup),r.\u0275\u0275advance(5),r.\u0275\u0275property("params",e.paramsParsed)("paramValues",e.paramValues$.value)("contexts",e.contexts))},dependencies:[v.Fj,v.JJ,v.JL,v.sg,v.u,En.MatLegacyFormField,Hr.MatLegacyInput,ey]}),a}(),O8=function(){var a=function(){function n(t){var e=this;(0,p.Z)(this,n),this.fb=t,this.plugins$=new z.X([]),this.title$=new z.X("Plugin"),this.instance$=new z.X(new Ds),this.instanceForm=this.fb.group({plugin:this.fb.control(""),settings:this.fb.control("")}),this.instanceSub=this.instance$.pipe((0,Q.h)(function(o){return!!o}),(0,ee.b)(function(o){e.instanceForm.get("plugin").setValue(o.plugin)})).subscribe(),this.onTouched=function(){}}return(0,_.Z)(n,[{key:"title",set:function(e){this.title$.next(e)}},{key:"plugins",set:function(e){this.plugins$.next(e)}},{key:"instance",set:function(e){this.instance$.next(e)}},{key:"writeValue",value:function(e){e&&this.instanceForm.setValue(e,{emitEvent:!1})}},{key:"registerOnChange",value:function(e){this.instanceForm.valueChanges.subscribe(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){e?this.instanceForm.disable():this.instanceForm.enable()}},{key:"validate",value:function(e){return this.instanceForm.valid?null:this.instanceForm.errors}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(v.QS))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["druid-params-plugin-instance"]],inputs:{title:"title",plugins:"plugins",instance:"instance"},features:[r.\u0275\u0275ProvidersFeature([{provide:v.JU,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0},{provide:v.Cf,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0}])],decls:10,vars:10,consts:[[3,"formGroup"],["required","","formControlName","plugin"],[3,"value",4,"ngFor","ngForOf"],["formControlName","settings",3,"settings"],[3,"value"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"div",0)(1,"mat-form-field")(2,"mat-label"),r.\u0275\u0275text(3),r.\u0275\u0275pipe(4,"async"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(5,"mat-select",1),r.\u0275\u0275template(6,A8,2,2,"mat-option",2),r.\u0275\u0275pipe(7,"keyvalue"),r.\u0275\u0275pipe(8,"async"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275element(9,"druid-params-querystring",3),r.\u0275\u0275elementEnd()),2&t&&(r.\u0275\u0275property("formGroup",e.instanceForm),r.\u0275\u0275advance(3),r.\u0275\u0275textInterpolate(r.\u0275\u0275pipeBind1(4,4,e.title$)),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngForOf",r.\u0275\u0275pipeBind1(7,6,r.\u0275\u0275pipeBind1(8,8,e.plugins$))),r.\u0275\u0275advance(3),r.\u0275\u0275property("settings",e.instance$.value.settings))},dependencies:[E.NgForOf,v.JJ,v.JL,v.Q7,v.sg,v.u,bi.MatLegacyOption,En.MatLegacyFormField,En.MatLegacyLabel,Fi.MatLegacySelect,I8,E.AsyncPipe,E.KeyValuePipe]}),a}(),Ts=function(){var a=function(){function n(t,e){(0,p.Z)(this,n),this.paramPluginManager=t,this.tokenizerService=e}return(0,_.Z)(n,[{key:"paramValue",value:function(e,o){var s=this;return this.paramPluginManager.getPlugins().pipe((0,Ce.U)(function(u){return Array.from(u).map(function(c){return(0,g.Z)(c,2)[1]})}),(0,Ce.U)(function(u){return u.find(function(c){return c.condition&&c.condition({param:e,metadata:o})||!c.condition&&c.id===e.mapping.type})}),(0,st.w)(function(u){return Or(function(){return!!u},u?u.evalParam({param:e,metadata:o}):(0,je.of)(),(0,je.of)(e.mapping.value))}),(0,Ce.U)(function(u){return e.mapping.value&&"string"==typeof u&&0===s.tokenizerService.discoverTokens(u).length?u:e.mapping.testValue}))}},{key:"paramValues",value:function(e){var o=this;return(0,Un.D)(Array.from(e.keys()).map(function(s){return o.paramValue(e.get(s),new Map).pipe((0,Ce.U)(function(u){return[s,u]}))})).pipe((0,Ce.U)(function(s){return s.reduce(function(u,c){return new Map([].concat((0,y.Z)(u),[c]))},new Map)}),(0,hi.d)(new Map))}},{key:"resolveParams",value:function(e){var o=this,s=e.params;return(0,st.w)(function(){return Or(function(){return Object.keys(s).length>1},(0,Un.D)(Object.keys(s).map(function(u){return o.paramValue(s[u],new Map).pipe((0,Ce.U)(function(c){return(0,d.Z)({},u,c)}))})).pipe((0,Ce.U)(function(u){return u.reduce(function(c,l){return(0,b.Z)((0,b.Z)({},c),l)},{})}),(0,Ce.U)(function(u){return{options:u}})),Or(function(){return 0!==Object.keys(s).length},o.paramValue(0!==Object.keys(s).length?s[Object.keys(s)[0]]:new Mi,new Map).pipe((0,Ce.U)(function(u){return{options:(0,d.Z)({},Object.keys(s)[0],u)}})),(0,je.of)({options:{}})))})}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Cu),r.\u0275\u0275inject(Pr))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),wu=function(){var a=(0,_.Z)(function n(t,e){(0,p.Z)(this,n),t.register(new Rs({id:"static",title:"Static",evalParam:function(t){return(0,je.of)(t.param.mapping.value)}})),t.register(function(n){return new Rs({id:"inputparam",title:"Input Param",evalParam:function(e){var o=e.param,s=e.metadata;return(0,je.of)(o.mapping.value).pipe((0,Ce.U)(function(u){return s.has("inputparams")&&s.get("inputparams").has(u)?s.get("inputparams").get(u):void 0}),(0,st.w)(function(u){return Or(function(){return void 0!==u},void 0!==u?n.paramValue(u,s):(0,je.of)(o.mapping.testValue),(0,je.of)(o.mapping.testValue))}))}})}(e))});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Cu),r.\u0275\u0275inject(Ts))},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({imports:[E.CommonModule,v.u5,v.UX,Oi.MaterialModule]}),a}(),HI="@ngrx/router-store/request",ak=((0,Zt.PH)(HI,(0,Zt.Ky)()),"@ngrx/router-store/navigation"),sk=((0,Zt.PH)(ak,(0,Zt.Ky)()),"@ngrx/router-store/cancel"),uk=((0,Zt.PH)(sk,(0,Zt.Ky)()),"@ngrx/router-store/error"),qI=((0,Zt.PH)(uk,(0,Zt.Ky)()),"@ngrx/router-store/navigated");(0,Zt.PH)(qI,(0,Zt.Ky)());var ck=function(){function a(){(0,p.Z)(this,a)}return(0,_.Z)(a,[{key:"serialize",value:function(t){return{root:this.serializeRoute(t.root),url:t.url}}},{key:"serializeRoute",value:function(t){var e=this,o=t.children.map(function(s){return e.serializeRoute(s)});return{params:t.params,data:t.data,url:t.url,outlet:t.outlet,title:t.title,routeConfig:t.routeConfig?{path:t.routeConfig.path,pathMatch:t.routeConfig.pathMatch,redirectTo:t.routeConfig.redirectTo,outlet:t.routeConfig.outlet,title:"string"==typeof t.routeConfig.title?t.routeConfig.title:void 0}:null,queryParams:t.queryParams,fragment:t.fragment,firstChild:o[0],children:o}}}]),a}(),Is=function(){return(Is=Is||{})[Is.PreActivation=1]="PreActivation",Is[Is.PostActivation=2]="PostActivation",Is}(),KI="router",WI=new r.InjectionToken("@ngrx/router-store Internal Configuration"),XI=new r.InjectionToken("@ngrx/router-store Configuration");function M8(a){return(0,b.Z)({stateKey:KI,serializer:ck,navigationActionTiming:Is.PreActivation},a)}var QI=function(){function a(){(0,p.Z)(this,a)}return(0,_.Z)(a,[{key:"serialize",value:function(t){return{root:this.serializeRoute(t.root),url:t.url}}},{key:"serializeRoute",value:function(t){var e=this,o=t.children.map(function(s){return e.serializeRoute(s)});return{params:t.params,paramMap:t.paramMap,data:t.data,url:t.url,outlet:t.outlet,title:t.title,routeConfig:t.routeConfig?{component:t.routeConfig.component,path:t.routeConfig.path,pathMatch:t.routeConfig.pathMatch,redirectTo:t.routeConfig.redirectTo,outlet:t.routeConfig.outlet,title:t.routeConfig.title}:null,queryParams:t.queryParams,queryParamMap:t.queryParamMap,fragment:t.fragment,component:t.routeConfig?t.routeConfig.component:void 0,root:void 0,parent:void 0,firstChild:o[0],pathFromRoot:void 0,children:o}}}]),a}(),JI=(0,_.Z)(function a(){(0,p.Z)(this,a)}),Bi=function(){return(Bi=Bi||{})[Bi.NONE=1]="NONE",Bi[Bi.ROUTER=2]="ROUTER",Bi[Bi.STORE=3]="STORE",Bi}(),YI=function(){var a=function(){function n(t,e,o,s,u,c){(0,p.Z)(this,n),this.store=t,this.router=e,this.serializer=o,this.errorHandler=s,this.config=u,this.activeRuntimeChecks=c,this.lastEvent=null,this.routerState=null,this.trigger=Bi.NONE,this.stateKey=this.config.stateKey,!(0,Zt.rM)()&&(0,r.isDevMode)()&&(null!=c&&c.strictActionSerializability||null!=c&&c.strictStateSerializability)&&this.serializer instanceof QI&&console.warn("@ngrx/router-store: The serializability runtime checks cannot be enabled with the FullRouterStateSerializer. The FullRouterStateSerializer has an unserializable router state and actions that are not serializable. To use the serializability runtime checks either use the MinimalRouterStateSerializer or implement a custom router state serializer."),this.setUpStoreStateListener(),this.setUpRouterEventsListener()}return(0,_.Z)(n,[{key:"setUpStoreStateListener",value:function(){var e=this;this.store.pipe((0,Zt.Ys)(this.stateKey),(0,ko.M)(this.store)).subscribe(function(o){var s=(0,g.Z)(o,2);e.navigateIfNeeded(s[0],s[1])})}},{key:"navigateIfNeeded",value:function(e,o){var s=this;if(e&&e.state&&this.trigger!==Bi.ROUTER&&!(this.lastEvent instanceof nr.NavigationStart)){var u=e.state.url;(function B8(a,n){return eO(a)===eO(n)})(this.router.url,u)||(this.storeState=o,this.trigger=Bi.STORE,this.router.navigateByUrl(u).catch(function(c){s.errorHandler.handleError(c)}))}}},{key:"setUpRouterEventsListener",value:function(){var s,e=this,o=this.config.navigationActionTiming===Is.PostActivation;this.router.events.pipe((0,ko.M)(this.store)).subscribe(function(u){var c=(0,g.Z)(u,2),l=c[0],m=c[1];e.lastEvent=l,l instanceof nr.NavigationStart?(e.routerState=e.serializer.serialize(e.router.routerState.snapshot),e.trigger!==Bi.STORE&&(e.storeState=m,e.dispatchRouterRequest(l))):l instanceof nr.RoutesRecognized?(s=l,!o&&e.trigger!==Bi.STORE&&e.dispatchRouterNavigation(l)):l instanceof nr.NavigationCancel?(e.dispatchRouterCancel(l),e.reset()):l instanceof nr.NavigationError?(e.dispatchRouterError(l),e.reset()):l instanceof nr.NavigationEnd&&(e.trigger!==Bi.STORE&&(o&&e.dispatchRouterNavigation(s),e.dispatchRouterNavigated(l)),e.reset())})}},{key:"dispatchRouterRequest",value:function(e){this.dispatchRouterAction(HI,{event:e})}},{key:"dispatchRouterNavigation",value:function(e){var o=this.serializer.serialize(e.state);this.dispatchRouterAction(ak,{routerState:o,event:new nr.RoutesRecognized(e.id,e.url,e.urlAfterRedirects,o)})}},{key:"dispatchRouterCancel",value:function(e){this.dispatchRouterAction(sk,{storeState:this.storeState,event:e})}},{key:"dispatchRouterError",value:function(e){this.dispatchRouterAction(uk,{storeState:this.storeState,event:new nr.NavigationError(e.id,e.url,"".concat(e))})}},{key:"dispatchRouterNavigated",value:function(e){var o=this.serializer.serialize(this.router.routerState.snapshot);this.dispatchRouterAction(qI,{event:e,routerState:o})}},{key:"dispatchRouterAction",value:function(e,o){this.trigger=Bi.ROUTER;try{this.store.dispatch({type:e,payload:(0,b.Z)((0,b.Z)({routerState:this.routerState},o),{},{event:0===this.config.routerState?o.event:{id:o.event.id,url:o.event.url,urlAfterRedirects:o.event.urlAfterRedirects}})})}finally{this.trigger=Bi.NONE}}},{key:"reset",value:function(){this.trigger=Bi.NONE,this.storeState=null,this.routerState=null}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Zt.yh),r.\u0275\u0275inject(nr.Router),r.\u0275\u0275inject(JI),r.\u0275\u0275inject(r.ErrorHandler),r.\u0275\u0275inject(XI),r.\u0275\u0275inject(Zt.hg))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}();function eO(a){return a?.length>0&&"/"===a[a.length-1]?a.substring(0,a.length-1):a}function N8(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.makeEnvironmentProviders)([{provide:WI,useValue:a},{provide:XI,useFactory:M8,deps:[WI]},{provide:JI,useClass:a.serializer?a.serializer:0===a.routerState?QI:ck},{provide:r.ENVIRONMENT_INITIALIZER,multi:!0,useFactory:function(){return function(){return(0,r.inject)(YI)}}},YI])}var Z8=function(){var a=function(){function n(){(0,p.Z)(this,n)}return(0,_.Z)(n,null,[{key:"forRoot",value:function(){return{ngModule:n,providers:[N8(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})]}}}]),n}();return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({}),a}();function ty(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function L8(){return(0,Zt.ZF)(KI)}(),n=(0,Zt.P1)(a,function(F){return F&&F.state}),t=(0,Zt.P1)(n,function(F){return F&&F.root}),e=(0,Zt.P1)(t,function(F){if(F){for(var U=F;U.firstChild;)U=U.firstChild;return U}}),o=(0,Zt.P1)(t,function(F){return F&&F.fragment}),s=(0,Zt.P1)(t,function(F){return F&&F.queryParams}),c=(0,Zt.P1)(e,function(F){return F&&F.params}),m=(0,Zt.P1)(e,function(F){return F&&F.data}),T=(0,Zt.P1)(n,function(F){return F&&F.url}),B=(0,Zt.P1)(e,function(F){if(null!=F&&F.routeConfig)return"string"==typeof F.routeConfig.title?F.routeConfig.title:F.title});return{selectCurrentRoute:e,selectFragment:o,selectQueryParams:s,selectQueryParam:function(U){return(0,Zt.P1)(s,function(ae){return ae&&ae[U]})},selectRouteParams:c,selectRouteParam:function(U){return(0,Zt.P1)(c,function(ae){return ae&&ae[U]})},selectRouteData:m,selectRouteDataParam:function(U){return(0,Zt.P1)(m,function(ae){return ae&&ae[U]})},selectUrl:T,selectTitle:B}}var V8=function(){var a=(0,_.Z)(function n(t){(0,p.Z)(this,n),[new Rs({id:"page",title:"Page",usedContexts:function(){return(0,je.of)(["_page"])},condition:function(t){var o=t.metadata;return t.param.flags.findIndex(function(s){return s.enabled&&"page"===s.name})>-1&&o.has("page")},evalParam:function(t){return(0,je.of)("".concat(t.metadata.get("page")))}}),new Rs({id:"searchstring",title:"Searchstring",condition:function(t){var o=t.metadata;return t.param.flags.findIndex(function(s){return s.enabled})>-1&&o.has("searchString")},evalParam:function(t){return(0,je.of)("".concat(t.metadata.get("searchString")))}}),new Rs({id:"route",title:"Route",usedContexts:function(){return(0,je.of)(["_route"])},evalParam:function(t){var e=t.param,s=t.metadata.get("_route");return(0,je.of)(s.params[e.mapping.value])}}),new Rs({id:"querystring",title:"Querystring",usedContexts:function(){return(0,je.of)(["_page"])},evalParam:function(t){var e=t.param,s=t.metadata.get("_route");return(0,je.of)(s.queryParams[e.mapping.value])}}),new Rs({id:"standardpagination",title:"Standard Pagination",usedContexts:function(){return(0,je.of)(["_page"])},condition:function(t){var o=t.metadata;return t.param.flags.findIndex(function(s){return s.enabled&&"offset"===s.name})>-1&&o.has("limit")&&o.has("page")},evalParam:function(t){var o=t.metadata;return(0,je.of)("".concat(+o.get("limit")*(+o.get("page")-1)))}})].forEach(function(e){return t.register(e)})});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Cu))},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({imports:[wu]}),a}(),ny=function(){var a=function(){function n(t,e,o){(0,p.Z)(this,n),this.routerStore=t,this.paramPluginManager=e,this.paramEvaluatorService=o}return(0,_.Z)(n,[{key:"getUrl",value:function(e,o,s){var u=this,c=ty();return this.routerStore.pipe((0,Zt.Ys)(c.selectCurrentRoute),(0,Ce.U)(function(m){return[m,e,e?e.indexOf("?"):-1]}),(0,Ce.U)(function(m){var C=(0,g.Z)(m,3),B=C[1],F=C[2];return[C[0],F>-1?B.substring(0,F):B,F>-1?B.substring(F+1):""]}),(0,st.w)(function(m){var C=(0,g.Z)(m,3),T=C[0],B=C[1],F=C[2],U=Mo.parse(F),ae=B?B.split("/"):[],ue=new Map([].concat((0,y.Z)(s),[["_route",T]])),me=u.paramNames(e),Se=o.reduce(function(Ot,ft,jt){return new Map([].concat((0,y.Z)(Ot),[[me[jt],ft]]))},new Map),we=ae.reduce(function(Ot,ft,jt){return 0===ft.indexOf(":")?[].concat((0,y.Z)(Ot),[u.paramEvaluatorService.paramValue(Se.get(ft),ue)]):[].concat((0,y.Z)(Ot),[(0,je.of)(ae[jt])])},[]),qe=[],at=function(ft){Array.isArray(U[ft])?U[ft].forEach(function(jt){return qe.push(u.paramEvaluatorService.paramValue(Se.get(jt),ue).pipe((0,Ce.U)(function(Ut){return[ft,Ut,!0]})))}):"string"==typeof U[ft]&&U[ft].indexOf(":")>-1?qe.push(u.paramEvaluatorService.paramValue(Se.get(U[ft]),ue).pipe((0,Ce.U)(function(jt){return[ft,jt,!1]}))):qe.push((0,je.of)([ft,U[ft],Array.isArray(U[ft])]))};for(var dt in U)at(dt);return(0,Un.D)([(0,Un.D)(we).pipe((0,Ce.U)(function(Ot){return Ot.filter(function(ft){return null!=ft&&""!==ft&&"undefined"!==ft}).map(function(ft,jt){return 0===jt&&0===ft.indexOf("http")?"".concat(ft,"/"):ft}).join("/")}),(0,hi.d)(B)),(0,Un.D)(qe).pipe((0,ee.b)(function(Ot){return console.log(Ot)}),(0,Ce.U)(function(Ot){return Ot.reduce(function(ft,jt){var Ut=(0,g.Z)(jt,3),tn=Ut[0],Vt=Ut[1],zt=Ut[2];if(null==Vt||""===Vt||"undefined"===Vt){var qt=(0,b.Z)({},ft);return delete qt[tn],qt}return(0,b.Z)((0,b.Z)({},ft),{},(0,d.Z)({},tn,zt?[].concat((0,y.Z)(void 0!==ft[tn]?ft[tn]:[]),[Vt]):Vt))},u.rebuildQueryString(U))}),(0,ee.b)(function(Ot){return console.log(Ot)}),(0,Ce.U)(function(Ot){return Mo.stringify(Ot,{arrayFormat:"repeat",indices:!1})}),(0,hi.d)(F))]).pipe((0,Ce.U)(function(Ot){return Ot.join("?")}))}))}},{key:"paramNames",value:function(e){var o=e?e.indexOf("?"):-1,s=(o>-1?e.substring(0,o):e||"").split("/").reduce(function(m,C,T){return 0===C.indexOf(":")?(0,b.Z)((0,b.Z)({},m),{},(0,d.Z)({},C.substr(1),C)):m},{}),u=(0,b.Z)((0,b.Z)({},s),Mo.parse(e?e.substring(e.indexOf("?")+1):"")),c=[];for(var l in u)Array.isArray(u[l])?u[l].forEach(function(m){return c.push(m)}):0===u[l].indexOf(":")&&c.push(u[l]);return c}},{key:"rebuildQueryString",value:function(e){var o={};for(var s in e)Array.isArray(e[s])?o[s]=[]:null!=s[e]&&""!==s[e]&&"undefined"!==s[e]&&(o[s]=s[e]);return Mo.parse(o)}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Zt.yh),r.\u0275\u0275inject(Cu),r.\u0275\u0275inject(Ts))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}();function H8(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"mat-option",8),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&a){var t=n.$implicit;r.\u0275\u0275property("value",t.value.id),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(t.value.title)}}function q8(a,n){}function K8(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"mat-option",8),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&a){var t=n.$implicit;r.\u0275\u0275property("value",t),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(t)}}function W8(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",9)(1,"mat-form-field")(2,"mat-label"),r.\u0275\u0275text(3,"Binding"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"mat-select",10),r.\u0275\u0275template(5,K8,2,2,"mat-option",2),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(6,"button",6),r.\u0275\u0275listener("click",function(){var c=r.\u0275\u0275restoreView(t).index,l=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(l.removeBinding(c))}),r.\u0275\u0275text(7,"Remove"),r.\u0275\u0275elementEnd()()}if(2&a){var e=n.index,o=r.\u0275\u0275nextContext();r.\u0275\u0275property("formGroupName",e),r.\u0275\u0275advance(5),r.\u0275\u0275property("ngForOf",o.bindableOptions)}}var rs=function(a){(0,G.Z)(t,a);var n=(0,H.Z)(t);function t(e){var o;return(0,p.Z)(this,t),o=n.call(this,e),e&&(o.editor=e.editor,o.fetch=e.fetch,o.getBindings=e.getBindings?e.getBindings:function(){return(0,je.of)([])},o.editorOptions=e.editorOptions?e.editorOptions:function(){return(0,je.of)(new mE)}),o}return(0,_.Z)(t)}(Rn.Plugin),Os=(0,_.Z)(function a(n){(0,p.Z)(this,a),n&&(this.url=n.url,this.method=n.method?n.method:void 0,void 0!==n.renderer&&(this.renderer=new lk(n.renderer)),void 0!==n.params&&(this.params=n.params.map(function(t){return new Mi(t)})),n.body&&(this.body=new Ec(n.body)))}),lk=(0,_.Z)(function a(n){(0,p.Z)(this,a),n&&(this.type=n.type,this.query=n.query,this.trackBy=n.trackBy,void 0!==n.data&&(this.data=new Ec(n.data)),void 0!==n.bindings&&(this.bindings=n.bindings.map(function(t){return new fn.ContentBinding(t)})))}),pr=(0,_.Z)(function a(n){(0,p.Z)(this,a),this.results=[],n&&(this.results=n.results)}),tO=(0,_.Z)(function a(n){(0,p.Z)(this,a),n&&(this.query=n.query,this.trackBy=n.trackBy,this.idMapping=n.idMapping,this.labelMapping=n.labelMapping,this.valueMapping=n.valueMapping,this.multiple=n.multiple,this.limit=n.limit)}),Pc=(0,_.Z)(function a(n){(0,p.Z)(this,a),this.settings=[],this.params=[],n&&(this.plugin=n.plugin,n.renderer&&(this.renderer=new lk(n.renderer)),n.settings&&(this.settings=n.settings.map(function(t){return new Bt.AttributeValue(t)})),n.params&&(this.params=n.params.map(function(t){return new Mi(t)})))}),mE=(0,_.Z)(function a(n){(0,p.Z)(this,a),this.fullscreen=!1,n&&(this.fullscreen=n.fullscreen)}),dk=new tO({query:"",trackBy:"",idMapping:"",labelMapping:"",valueMapping:"",multiple:!1,limit:0}),X8=(new Os({url:"",renderer:{type:"",data:{content:"",contentType:""},query:"",trackBy:"",bindings:[]},params:[]}),function(){var a=function(){function n(t){var e=this;(0,p.Z)(this,n),this.fb=t,this.datasourceOptions$=new z.X(dk),this.formGroup=this.fb.group({query:this.fb.control(""),trackBy:this.fb.control(""),valueMapping:this.fb.control(""),labelMapping:this.fb.control(""),idMapping:this.fb.control(""),multiple:this.fb.control(""),limit:this.fb.control("")}),this.datasourceOptionsSub=this.datasourceOptions$.subscribe(function(o){e.formGroup.setValue(o),e.formGroup.updateValueAndValidity()}),this.onTouched=function(){}}return(0,_.Z)(n,[{key:"datasourceOptions",set:function(e){this.datasourceOptions$.next(e)}},{key:"writeValue",value:function(e){e&&this.formGroup.setValue(e,{emitEvent:!1})}},{key:"registerOnChange",value:function(e){this.formGroup.valueChanges.subscribe(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){e?this.formGroup.disable():this.formGroup.enable()}},{key:"validate",value:function(e){return this.formGroup.valid?null:{datasourceOptions:{valid:!1}}}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(v.QS))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-datasource-options"]],inputs:{datasourceOptions:"datasourceOptions"},features:[r.\u0275\u0275ProvidersFeature([{provide:v.JU,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0},{provide:v.Cf,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0}])],decls:16,vars:1,consts:[[3,"formGroup"],["matInput","","formControlName","query","placeholder","Query"],["matInput","","formControlName","trackBy","placeholder","Track By"],["matInput","","formControlName","idMapping","placeholder","Id"],["matInput","","formControlName","valueMapping","placeholder","Value"],["matInput","","formControlName","labelMapping","placeholder","Label"],["formControlName","multiple"],["matInput","","formControlName","limit","placeholder","Limit"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"div",0)(1,"mat-form-field"),r.\u0275\u0275element(2,"input",1),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"mat-form-field"),r.\u0275\u0275element(4,"input",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(5,"mat-form-field"),r.\u0275\u0275element(6,"input",3),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(7,"mat-form-field"),r.\u0275\u0275element(8,"input",4),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(9,"mat-form-field"),r.\u0275\u0275element(10,"input",5),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(11,"div")(12,"mat-checkbox",6),r.\u0275\u0275text(13,"Multiple"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(14,"mat-form-field"),r.\u0275\u0275element(15,"input",7),r.\u0275\u0275elementEnd()()),2&t&&r.\u0275\u0275property("formGroup",e.formGroup)},dependencies:[v.Fj,v.JJ,v.JL,v.sg,v.u,Y_.MatLegacyCheckbox,En.MatLegacyFormField,Hr.MatLegacyInput],encapsulation:2}),a}()),nO=function(){var a=(0,_.Z)(function n(t){(0,p.Z)(this,n),this.viewContainerRef=t});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(r.ViewContainerRef))},a.\u0275dir=r.\u0275\u0275defineDirective({type:a,selectors:[["","classifiedsUiDatasourceRendererHost",""]]}),a}(),da=function(){var a=function(n){(0,G.Z)(e,n);var t=(0,H.Z)(e);function e(o,s){return(0,p.Z)(this,e),t.call(this,o,s)}return(0,_.Z)(e,[{key:"pluginDef",value:function(){return(0,je.of)(new Rn.PluginDef({name:"datasource"}))}}]),e}(Rn.BasePluginManager);return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Rn.PluginConfigurationManager),r.\u0275\u0275inject(Nn.ModuleLoaderService))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),fk=function(){var a=function(){function n(t,e,o){var s=this;(0,p.Z)(this,n),this.fb=t,this.componentFactoryResolver=e,this.dpm=o,this.datasources$=this.dpm.getPlugins(),this.formGroup=this.fb.group({plugin:this.fb.control("",[v.kI.required]),settings:this.fb.control(""),renderer:this.fb.group({type:this.fb.control("pane"),bindings:this.fb.array([])})}),this.bindableOptions=[],this.contexts=[],this.settings$=new z.X([]),this.componentRef$=new z.X(void 0),this.datasource$=new z.X(void 0),this.afterViewInit$=new se.x,this.contextForwardingSub=this.componentRef$.pipe((0,Q.h)(function(u){return!!u})).subscribe(function(u){u.instance.contexts=s.contexts,u.instance.settings=s.settings$.value}),this.rendererSub=(0,Sr.a)([this.formGroup.get("plugin").valueChanges,this.afterViewInit$]).pipe((0,st.w)(function(u){var l=(0,g.Z)(u,2)[0];return l&&""!==l?s.dpm.getPlugin(l):(0,je.of)(void 0)})).subscribe(function(u){u&&s.renderPlugin(u)}),this.settingsSub=(0,Sr.a)([this.componentRef$,this.settings$]).pipe((0,Q.h)(function(u){return!!(0,g.Z)(u,2)[0]})).subscribe(function(u){var c=(0,g.Z)(u,2);c[0].instance.settings=c[1]}),this.datasourceSub=this.datasource$.pipe((0,ee.b)(function(u){setTimeout(function(){return s.settings$.next(u?u.settings:[])})})).subscribe(function(u){s.formGroup.get("renderer").get("bindings").clear(),u?(s.formGroup.get("plugin").setValue(u.plugin),s.formGroup.get("renderer").get("type").setValue("pane"),u.renderer&&u.renderer.bindings&&u.renderer.bindings.forEach(function(c){s.addBinding(c)})):(s.formGroup.get("plugin").setValue(""),s.formGroup.get("renderer").get("type").setValue("pane"))}),this.onTouched=function(){}}return(0,_.Z)(n,[{key:"datasource",set:function(e){this.datasource$.next(e)}},{key:"bindings",get:function(){return this.formGroup.get("renderer").get("bindings")}},{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){this.afterViewInit$.next(void 0)}},{key:"renderPlugin",value:function(e){var o=this.componentFactoryResolver.resolveComponentFactory(e.editor),s=this.datasourceHost.viewContainerRef;s.clear(),this.componentRef$.next(s.createComponent(o))}},{key:"writeValue",value:function(e){e&&this.formGroup.setValue(e,{emitEvent:!1})}},{key:"registerOnChange",value:function(e){this.formGroup.valueChanges.subscribe(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){e?this.formGroup.disable():this.formGroup.enable()}},{key:"validate",value:function(e){return this.formGroup.valid?null:{invalidForm:{valid:!1,message:"content is invalid"}}}},{key:"addBinding",value:function(e){this.bindings.push(this.fb.group({type:this.fb.control("pane",v.kI.required),id:this.fb.control(e?e.id:"",v.kI.required)}))}},{key:"removeBinding",value:function(e){this.bindings.removeAt(e)}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(v.QS),r.\u0275\u0275directiveInject(r.ComponentFactoryResolver),r.\u0275\u0275directiveInject(da))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-datasource-form"]],viewQuery:function(t,e){var o;1&t&&r.\u0275\u0275viewQuery(nO,7),2&t&&r.\u0275\u0275queryRefresh(o=r.\u0275\u0275loadQuery())&&(e.datasourceHost=o.first)},inputs:{bindableOptions:"bindableOptions",contexts:"contexts",datasource:"datasource"},features:[r.\u0275\u0275ProvidersFeature([{provide:v.JU,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0},{provide:v.Cf,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0}])],decls:16,vars:7,consts:[[3,"formGroup"],["required","","formControlName","plugin"],[3,"value",4,"ngFor","ngForOf"],["classifiedsUiDatasourceRendererHost",""],["formGroupName","renderer"],["formArrayName","bindings"],["type","button",3,"click"],[3,"formGroupName",4,"ngFor","ngForOf"],[3,"value"],[3,"formGroupName"],["required","","formControlName","id"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"div",0)(1,"mat-form-field")(2,"mat-label"),r.\u0275\u0275text(3,"Datasource"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"mat-select",1),r.\u0275\u0275template(5,H8,2,2,"mat-option",2),r.\u0275\u0275pipe(6,"keyvalue"),r.\u0275\u0275pipe(7,"async"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementContainerStart(8),r.\u0275\u0275template(9,q8,0,0,"ng-template",3),r.\u0275\u0275elementContainerEnd(),r.\u0275\u0275elementStart(10,"div",4)(11,"div",5)(12,"button",6),r.\u0275\u0275listener("click",function(){return e.addBinding()}),r.\u0275\u0275text(13,"Add Binding"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(14,"div"),r.\u0275\u0275template(15,W8,8,2,"div",7),r.\u0275\u0275elementEnd()()()()),2&t&&(r.\u0275\u0275property("formGroup",e.formGroup),r.\u0275\u0275advance(5),r.\u0275\u0275property("ngForOf",r.\u0275\u0275pipeBind1(6,3,r.\u0275\u0275pipeBind1(7,5,e.datasources$))),r.\u0275\u0275advance(10),r.\u0275\u0275property("ngForOf",e.bindings.controls))},dependencies:[E.NgForOf,v.JJ,v.JL,v.Q7,v.sg,v.u,v.x0,v.CE,bi.MatLegacyOption,En.MatLegacyFormField,En.MatLegacyLabel,Fi.MatLegacySelect,nO,E.AsyncPipe,E.KeyValuePipe]}),a}(),Q8=function(){var a=function(){function n(t,e){var o=this;(0,p.Z)(this,n),this.fb=t,this.attributeSerializer=e,this.settings$=new z.X(void 0),this.formGroup=this.fb.group({data:this.fb.control("")}),this.settingsSub=this.settings$.pipe((0,Ce.U)(function(s){return s?o.attributeSerializer.deserializeAsObject(s):void 0})).subscribe(function(s){s&&s.data?o.formGroup.get("data").setValue(s.data):o.formGroup.get("data").setValue("")}),this.onTouched=function(){}}return(0,_.Z)(n,[{key:"settings",set:function(e){this.settings$.next(e)}},{key:"ngOnInit",value:function(){}},{key:"writeValue",value:function(e){e&&this.formGroup.setValue(e,{emitEvent:!1})}},{key:"registerOnChange",value:function(e){this.formGroup.valueChanges.subscribe(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){e?this.formGroup.disable():this.formGroup.enable()}},{key:"validate",value:function(e){return this.formGroup.valid?null:{invalidForm:{valid:!1,message:"content is invalid"}}}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(v.QS),r.\u0275\u0275directiveInject(Bt.AttributeSerializerService))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-data-source-form"]],inputs:{settings:"settings"},features:[r.\u0275\u0275ProvidersFeature([{provide:v.JU,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0},{provide:v.Cf,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0}])],decls:2,vars:1,consts:[[3,"formGroup"],["formControlName","data","cols","60","rows","20"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"div",0),r.\u0275\u0275element(1,"textarea",1),r.\u0275\u0275elementEnd()),2&t&&r.\u0275\u0275property("formGroup",e.formGroup)},dependencies:[v.Fj,v.JJ,v.JL,v.sg,v.u]}),a}(),J8=function(){var a=(0,_.Z)(function n(t){(0,p.Z)(this,n),this.controlContainer=t,this.settings=[]});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(v.gN))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-data-datasource"]],inputs:{settings:"settings"},decls:2,vars:2,consts:[[3,"formGroup"],["formControlName","settings",3,"settings"]],template:function(t,e){1&t&&(r.\u0275\u0275elementContainerStart(0,0),r.\u0275\u0275element(1,"classifieds-ui-data-source-form",1),r.\u0275\u0275elementContainerEnd()),2&t&&(r.\u0275\u0275property("formGroup",e.controlContainer.control),r.\u0275\u0275advance(1),r.\u0275\u0275property("settings",e.settings))},dependencies:[v.JJ,v.JL,v.sg,v.u,Q8],encapsulation:2}),a}(),Y8=function(){var a=function(){function n(t,e){var o=this;(0,p.Z)(this,n),this.fb=t,this.attributeSerializer=e,this.settings$=new z.X(void 0),this.formGroup=this.fb.group({data:this.fb.control("")}),this.settingsSub=this.settings$.pipe((0,Ce.U)(function(s){return s?o.attributeSerializer.deserializeAsObject(s):void 0})).subscribe(function(s){}),this.onTouched=function(){}}return(0,_.Z)(n,[{key:"settings",set:function(e){this.settings$.next(e)}},{key:"ngOnInit",value:function(){}},{key:"writeValue",value:function(e){e&&this.formGroup.setValue(e,{emitEvent:!1})}},{key:"registerOnChange",value:function(e){this.formGroup.valueChanges.subscribe(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){e?this.formGroup.disable():this.formGroup.enable()}},{key:"validate",value:function(e){return this.formGroup.valid?null:{invalidForm:{valid:!1,message:"content is invalid"}}}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(v.QS),r.\u0275\u0275directiveInject(Bt.AttributeSerializerService))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-datasource-source-form"]],inputs:{settings:"settings"},features:[r.\u0275\u0275ProvidersFeature([{provide:v.JU,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0},{provide:v.Cf,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0}])],decls:2,vars:0,template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"p"),r.\u0275\u0275text(1,"Datasource"),r.\u0275\u0275elementEnd())}}),a}(),e$=function(){var a=(0,_.Z)(function n(t){(0,p.Z)(this,n),this.controlContainer=t,this.settings=[]});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(v.gN))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-datasource-source"]],inputs:{settings:"settings"},decls:2,vars:2,consts:[[3,"formGroup"],["formControlName","settings",3,"settings"]],template:function(t,e){1&t&&(r.\u0275\u0275elementContainerStart(0,0),r.\u0275\u0275element(1,"classifieds-ui-datasource-source-form",1),r.\u0275\u0275elementContainerEnd()),2&t&&(r.\u0275\u0275property("formGroup",e.controlContainer.control),r.\u0275\u0275advance(1),r.\u0275\u0275property("settings",e.settings))},dependencies:[v.JJ,v.JL,v.sg,v.u,Y8],encapsulation:2}),a}(),t$=function(n){return new rs({id:"data",title:"Data",editor:J8,fetch:function(e){var o=e.settings;return(0,je.of)(new pr).pipe((0,Ce.U)(function(){return n.deserializeAsObject(o)}),(0,Ce.U)(function(s){return new pr({results:JSON.parse(s.data)})}))}})},kc=function(){var a=(0,_.Z)(function n(t,e){(0,p.Z)(this,n),[t$(e),new rs({id:"datasource_datasource",title:"Datasource",editor:e$,fetch:function(e){return(0,je.of)(new pr)}})].forEach(function(o){return t.register(o)})});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(da),r.\u0275\u0275inject(Bt.AttributeSerializerService))},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({imports:[E.CommonModule,v.UX,Oi.MaterialModule,V8]}),a}(),rO=function(){var a=function(){function n(t,e){(0,p.Z)(this,n),this.config=t,this.http=e,this.cache=new Map}return(0,_.Z)(n,[{key:"getData",value:function(e){var o=this;return this.cache.has(e)?(0,je.of)(this.cache.get(e)).pipe((0,Rr.g)(0)):this.http.get("".concat(e)).pipe((0,ti.K)(function(){return(0,je.of)([])}),(0,Ce.U)(function(s){return Array.isArray(s)?s:[s]}),(0,ee.b)(function(s){return o.cache.set(e,s)}))}},{key:"postData",value:function(e){var s=e.body,u=void 0===s?"":s;return this.http.post("".concat(e.url),u).pipe((0,Ce.U)(function(c){return Array.isArray(c)?c:[c]}))}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject($a),r.\u0275\u0275inject(O.HttpClient))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),iO=(0,_.Z)(function a(n){(0,p.Z)(this,a),n&&(this.label=n.label,this.dataItem=n.dataItem,void 0!==n.value&&(this.value=n.value))}),oO=(0,_.Z)(function a(n){(0,p.Z)(this,a),n&&(this.value=n.value,this.label=n.label,this.id=n.id,this.multiple=n.multiple,this.limit=n.limit)}),aO=function(){var a=function(){function n(t,e){(0,p.Z)(this,n),this.dpm=t,this.attributeSerializer=e}return(0,_.Z)(n,[{key:"evalDatasource",value:function(e){var o=this,u=e.metadata,c=e.datasources;return(0,je.of)(e.datasource).pipe((0,st.w)(function(l){return o.dpm.getPlugin(l.plugin).pipe((0,Ce.U)(function(m){return[l,m]}))}),(0,st.w)(function(l){var m=(0,g.Z)(l,2),C=m[0];return m[1].fetch({settings:C.settings,metadata:u,datasource:C,datasources:c}).pipe((0,Ce.U)(function(B){return[C,B]}))}),(0,st.w)(function(l){var m=(0,g.Z)(l,2),T=m[1];return(0,Un.D)(m[0].renderer.bindings.reduce(function(B,F){return[].concat((0,y.Z)(B),(0,y.Z)(c&&c.has(F.id)?[(0,je.of)(c.get(F.id))]:[]))},[])).pipe((0,st.w)(function(B){return B.reduce(function(F,U){return F.pipe((0,st.w)(function(ae){return o.dpm.getPlugin(U.plugin).pipe((0,Ce.U)(function(ue){return[ue,ae,U]}))}),(0,st.w)(function(ae){var ue=(0,g.Z)(ae,3);return ue[0].fetch({settings:U.settings,dataset:ue[1],metadata:u,datasource:ue[2],datasources:c})}))},(0,je.of)(T))}),(0,Ce.U)(function(B){return B}),(0,hi.d)(T))}))}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(da),r.\u0275\u0275inject(Bt.AttributeSerializerService))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),Ac=function(){var a=(0,_.Z)(function n(){(0,p.Z)(this,n)});return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),ry=function(a){(0,G.Z)(t,a);var n=(0,H.Z)(t);function t(e){var o;return(0,p.Z)(this,t),o=n.call(this,e),e&&(o.build=e.build),o}return(0,_.Z)(t)}(Rn.Plugin),r$=function(n){return function(){return new Promise(function(t){n.build(),t()})}},zd=function(){var a=function(n){(0,G.Z)(e,n);var t=(0,H.Z)(e);function e(o,s){return(0,p.Z)(this,e),t.call(this,o,s)}return(0,_.Z)(e,[{key:"pluginDef",value:function(){return(0,je.of)(new Rn.PluginDef({name:"bridgebuilder"}))}}]),e}(Rn.BasePluginManager);return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Rn.PluginConfigurationManager),r.\u0275\u0275inject(Nn.ModuleLoaderService))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),o$=function(){var a=function(){function n(t){(0,p.Z)(this,n),this.bpm=t}return(0,_.Z)(n,[{key:"build",value:function(){try{console.log("build bridge..."),this.bpm.getPlugins().subscribe(function(e){Array.from(e).forEach(function(o){var s=(0,g.Z)(o,2),u=s[0];s[1].build(),console.log("bridge build: "+u)})}),console.log("bridge built.")}catch{}}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(zd))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),sO=function(){var a=(0,_.Z)(function n(t){(0,p.Z)(this,n),console.log("bridge constructor"),t.register(new ry({id:"test",title:"Test",build:function(){Ac.prototype.sayHello2=function(){alert("say hello 2")}}}))});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(zd))},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({providers:[{provide:r.APP_INITIALIZER,useFactory:r$,deps:[o$],multi:!0}]}),a}(),uO=S(24503),pk=S(26067);function a$(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"mat-option",3),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&a){var t=n.$implicit;r.\u0275\u0275property("value",t),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(t)}}function s$(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"mat-option",5),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&a){var t=n.$implicit;r.\u0275\u0275property("value",t.value.name),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(t.value.title)}}function u$(a,n){}var hk=new r.InjectionToken("ContextPlugin"),Fs=function(a){(0,G.Z)(t,a);var n=(0,H.Z)(t);function t(e){var o;return(0,p.Z)(this,t),(o=n.call(this,e)).global=!1,e&&(o.name=o.id,o.baseObject=e.baseObject,o.resolver=e.resolver,o.global=void 0!==e.global&&e.global,o.internal=void 0!==e.internal&&e.internal,o.group=void 0!==e.group?e.group:void 0,e.editorComponent&&(o.editorComponent=e.editorComponent)),o}return(0,_.Z)(t)}(Rn.Plugin),co=(0,_.Z)(function a(n){(0,p.Z)(this,a),this.name=n.name,this.adaptor=n.adaptor,n.plugin&&(this.plugin=n.plugin),"rest"===this.adaptor?this.rest=new Os(n.rest):"snippet"===this.adaptor||"json"===this.adaptor?this.snippet=new Ec(n.snippet):"data"===this.adaptor?this.data=n.data:"token"===this.adaptor?this.tokens=new Map((0,y.Z)(n.tokens)):"datasource"===this.adaptor&&(this.datasource=new Pc(n.datasource))}),mk=(0,_.Z)(function a(n){(0,p.Z)(this,a),n&&(this.name=n.name)}),c$=function(){var a=function(){function n(t,e){var o=this;(0,p.Z)(this,n),this.fb=t,this.attributeSerializer=e,this.contexts=[],this.settings$=new z.X(void 0),this.formGroup=this.fb.group({name:this.fb.control("",[v.kI.required])}),this.settingsSub=this.settings$.pipe((0,Ce.U)(function(s){return s?new mk(o.attributeSerializer.deserializeAsObject(s)):void 0})).subscribe(function(s){s?o.formGroup.get("name").setValue(s.name):o.formGroup.get("name").setValue("")}),this.onTouched=function(){}}return(0,_.Z)(n,[{key:"settings",set:function(e){this.settings$.next(e)}},{key:"writeValue",value:function(e){e&&this.formGroup.setValue(e,{emitEvent:!1})}},{key:"registerOnChange",value:function(e){this.formGroup.valueChanges.subscribe(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){e?this.formGroup.disable():this.formGroup.enable()}},{key:"validate",value:function(e){return this.formGroup.valid?null:{invalidForm:{valid:!1,message:"content is invalid"}}}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(v.QS),r.\u0275\u0275directiveInject(Bt.AttributeSerializerService))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-context-datasource-form"]],inputs:{contexts:"contexts",settings:"settings"},features:[r.\u0275\u0275ProvidersFeature([{provide:v.JU,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0},{provide:v.Cf,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0}])],decls:6,vars:2,consts:[[3,"formGroup"],["required","","formControlName","name"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"div",0)(1,"mat-form-field")(2,"mat-label"),r.\u0275\u0275text(3,"Context"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"mat-select",1),r.\u0275\u0275template(5,a$,2,2,"mat-option",2),r.\u0275\u0275elementEnd()()()),2&t&&(r.\u0275\u0275property("formGroup",e.formGroup),r.\u0275\u0275advance(5),r.\u0275\u0275property("ngForOf",e.contexts))},dependencies:[E.NgForOf,v.JJ,v.JL,v.Q7,v.sg,v.u,bi.MatLegacyOption,En.MatLegacyFormField,En.MatLegacyLabel,Fi.MatLegacySelect]}),a}(),l$=function(){var a=(0,_.Z)(function n(t){(0,p.Z)(this,n),this.controlContainer=t,this.contexts=[],this.settings=[]});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(v.gN))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-context-datasource"]],inputs:{contexts:"contexts",settings:"settings"},decls:2,vars:3,consts:[[3,"formGroup"],["formControlName","settings",3,"contexts","settings"]],template:function(t,e){1&t&&(r.\u0275\u0275elementContainerStart(0,0),r.\u0275\u0275element(1,"classifieds-ui-context-datasource-form",1),r.\u0275\u0275elementContainerEnd()),2&t&&(r.\u0275\u0275property("formGroup",e.controlContainer.control),r.\u0275\u0275advance(1),r.\u0275\u0275property("contexts",e.contexts)("settings",e.settings))},dependencies:[v.JJ,v.JL,v.sg,v.u,c$],encapsulation:2}),a}(),d$=function(){var a=function(){function n(t,e,o){(0,p.Z)(this,n),this.fb=t,this.controlContainer=e,this.attributeSerializer=o}return(0,_.Z)(n,[{key:"ngOnInit",value:function(){var e=this;this.controlContainer.control.addControl("adaptor",this.fb.control("datasource",v.kI.required)),this.controlContainer.control.addControl("datasource",this.fb.control("")),this.controlContainer.control.addControl("_proxy",this.fb.control("")),this.proxyControlSub=this.controlContainer.control.get("_proxy").valueChanges.pipe((0,Ce.U)(function(o){return o?new Pc((0,b.Z)((0,b.Z)({},o),{},{settings:e.attributeSerializer.serialize(o.settings,"settings").attributes})):new Pc}),(0,ee.b)(function(o){return e.controlContainer.control.get("datasource").setValue(o)})).subscribe()}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(v.QS),r.\u0275\u0275directiveInject(v.gN),r.\u0275\u0275directiveInject(Bt.AttributeSerializerService))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-datasource-context-editor"]],viewQuery:function(t,e){var o;1&t&&r.\u0275\u0275viewQuery(fk,7),2&t&&r.\u0275\u0275queryRefresh(o=r.\u0275\u0275loadQuery())&&(e.datasourceFormComp=o.first)},decls:2,vars:1,consts:[[3,"formGroup"],["formControlName","_proxy"]],template:function(t,e){1&t&&(r.\u0275\u0275elementContainerStart(0,0),r.\u0275\u0275element(1,"classifieds-ui-datasource-form",1),r.\u0275\u0275elementContainerEnd()),2&t&&r.\u0275\u0275property("formGroup",e.controlContainer.control)},dependencies:[v.JJ,v.JL,v.sg,v.u,fk],encapsulation:2}),a}(),f$=function(n){return new Fs({id:"route",name:"route",title:"Route",global:!0,baseObject:{path:"",arg0:"",arg2:"",arg3:"",arg4:"",arg5:""},resolver:n})},gk=function(){var a=function(){function n(t){(0,p.Z)(this,n),this.routerStore=t}return(0,_.Z)(n,[{key:"resolve",value:function(e,o){var s=ty();return this.routerStore.pipe((0,Zt.Ys)(s.selectCurrentRoute),(0,Ce.U)(function(c){return{path:"/pages/panelpage/".concat(c.params.panelPageId)}}))}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Zt.yh))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),cO=function(){var a=(0,_.Z)(function n(t){(0,p.Z)(this,n),this.viewContainerRef=t});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(r.ViewContainerRef))},a.\u0275dir=r.\u0275\u0275defineDirective({type:a,selectors:[["","classifiedsUiContextEditorHost",""]]}),a}(),Su=function(){var a=function(n){(0,G.Z)(e,n);var t=(0,H.Z)(e);function e(o,s){return(0,p.Z)(this,e),t.call(this,o,s)}return(0,_.Z)(e,[{key:"pluginDef",value:function(){return(0,je.of)(new Rn.PluginDef({name:"context"}))}}]),e}(Rn.BasePluginManager);return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Rn.PluginConfigurationManager),r.\u0275\u0275inject(Nn.ModuleLoaderService))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),lO=function(){var a=function(){function n(t,e,o){(0,p.Z)(this,n),this.fb=t,this.componentFactoryResolver=e,this.cpm=o,this.contextForm=this.fb.group({name:this.fb.control("",v.kI.required),plugin:this.fb.control("",v.kI.required)}),this.context$=new z.X(void 0),this.onTouched=function(){}}return(0,_.Z)(n,[{key:"context",set:function(e){this.context$.next(e)}},{key:"ngOnInit",value:function(){var e=this;this.contextPlugins=this.cpm.getPlugins().pipe((0,Ce.U)(function(o){return new Map(Array.from(o).filter(function(s,u){return!(0,g.Z)(s,2)[1].internal}).map(function(s,u){var m=(0,g.Z)(s,2)[1];return[m.name,m]}))})),this.contextForm.get("plugin").valueChanges.pipe((0,st.w)(function(o){return e.cpm.getPlugin(o)})).subscribe(function(o){o.editorComponent?e.renderEditor(o):e.editorHost.viewContainerRef.clear()}),this.context$.pipe((0,Q.h)(function(){return!!e.componentRef})).subscribe(function(o){e.componentRef.instance.context=o})}},{key:"writeValue",value:function(e){e&&this.contextForm.setValue(e,{emitEvent:!1})}},{key:"registerOnChange",value:function(e){this.contextForm.valueChanges.subscribe(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){e?this.contextForm.disable():this.contextForm.enable()}},{key:"validate",value:function(e){return this.contextForm.valid?null:{invalidForm:{valid:!1,message:"context is invalid"}}}},{key:"renderEditor",value:function(e){var o=this.componentFactoryResolver.resolveComponentFactory(e.editorComponent),s=this.editorHost.viewContainerRef;s.clear(),this.componentRef=s.createComponent(o),this.componentRef.instance.context=this.context$.value}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(v.QS),r.\u0275\u0275directiveInject(r.ComponentFactoryResolver),r.\u0275\u0275directiveInject(Su))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-context-form"]],viewQuery:function(t,e){var o;1&t&&r.\u0275\u0275viewQuery(cO,7),2&t&&r.\u0275\u0275queryRefresh(o=r.\u0275\u0275loadQuery())&&(e.editorHost=o.first)},inputs:{context:"context"},features:[r.\u0275\u0275ProvidersFeature([{provide:v.JU,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0},{provide:v.Cf,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0}])],decls:12,vars:6,consts:[["fxLayout","column",3,"formGroup"],["matInput","","formControlName","name","placeholder","Name","required",""],["required","","formControlName","plugin"],[3,"value",4,"ngFor","ngForOf"],["classifiedsUiContextEditorHost",""],[3,"value"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"div",0)(1,"mat-form-field"),r.\u0275\u0275element(2,"input",1),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"mat-form-field")(4,"mat-label"),r.\u0275\u0275text(5,"Type"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(6,"mat-select",2),r.\u0275\u0275template(7,s$,2,2,"mat-option",3),r.\u0275\u0275pipe(8,"keyvalue"),r.\u0275\u0275pipe(9,"async"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementContainerStart(10),r.\u0275\u0275template(11,u$,0,0,"ng-template",4),r.\u0275\u0275elementContainerEnd(),r.\u0275\u0275elementEnd()),2&t&&(r.\u0275\u0275property("formGroup",e.contextForm),r.\u0275\u0275advance(7),r.\u0275\u0275property("ngForOf",r.\u0275\u0275pipeBind1(8,2,r.\u0275\u0275pipeBind1(9,4,e.contextPlugins))))},dependencies:[E.NgForOf,v.Fj,v.JJ,v.JL,v.Q7,v.sg,v.u,bi.MatLegacyOption,En.MatLegacyFormField,En.MatLegacyLabel,Hr.MatLegacyInput,Fi.MatLegacySelect,Wt,cO,E.AsyncPipe,E.KeyValuePipe]}),a}(),vk=function(){var a=function(){function n(t){(0,p.Z)(this,n),this.dpm=t}return(0,_.Z)(n,[{key:"resolve",value:function(e,o,s){var u=this;return(0,je.of)(new pr).pipe((0,Ce.U)(function(){return new Pc(o)}),(0,st.w)(function(c){return u.dpm.getPlugin(c.plugin).pipe((0,Ce.U)(function(l){return{ds:c,p:l}}))}),(0,st.w)(function(c){return c.p.fetch({settings:c.ds.settings,metadata:s})}),(0,Ce.U)(function(c){return c}))}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(da))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),v$=function(){function a(n,t){(0,p.Z)(this,a),this.cpm=n,this.rcm=t}return(0,_.Z)(a,[{key:"resolveGlobals",value:function(){return arguments.length>0&&void 0!==arguments[0]||fr(),this.cpm.getPlugins().pipe((0,Ce.U)(function(e){return Array.from(e.values()).filter(function(o){return!0===o.global})}),(0,st.w)(function(e){return J.T.apply(void 0,(0,y.Z)(e.map(function(o){return o.resolver.resolve(o,{}).pipe((0,Ce.U)(function(s){return[o.name,s,e.length]}))}))).pipe((0,uO.R)(function(o,s){var u=(0,g.Z)(s,3),c=u[0],l=u[1],m=u[2];return new Map([].concat((0,y.Z)(o),[["_".concat(c),l],["__len",m]]))},new Map([])),(0,Q.h)(function(o){return o.size-1==+o.get("__len")}),(0,Ce.U)(function(o){return Object.assign.apply(Object,[{}].concat((0,y.Z)((0,y.Z)(o.entries()).filter(function(s){return"__len"!==(0,g.Z)(s,2)[0]}).map(function(s){var u=(0,g.Z)(s,2);return(0,d.Z)({},u[0],u[1])}))))}))}))}},{key:"resolveGlobalsSingle",value:function(){return arguments.length>0&&void 0!==arguments[0]||fr(),this.cpm.getPlugins().pipe((0,Ce.U)(function(e){return Array.from(e.values()).filter(function(o){return!0===o.global})}),(0,st.w)(function(e){return J.T.apply(void 0,(0,y.Z)(e.map(function(o){return o.resolver.resolve(o,{}).pipe((0,Ce.U)(function(s){return[o.name,s]}))})))}))}},{key:"resolveAll",value:function(t){var e=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fr();return J.T.apply(void 0,(0,y.Z)(t.map(function(s){return e.resolve(s,o).pipe((0,Ce.U)(function(u){return[s.name,Array.isArray(u)?u.length>0?u[0]:void 0:u]}))}))).pipe((0,uO.R)(function(s,u){var c=(0,g.Z)(u,2),l=c[0],m=c[1];return new Map([].concat((0,y.Z)(s),[[l,m]]))},new Map),(0,Q.h)(function(s){return s.size===t.length}),(0,Ce.U)(function(s){return Object.assign.apply(Object,[{}].concat((0,y.Z)((0,y.Z)(s.entries()).map(function(u){var c=(0,g.Z)(u,2);return(0,d.Z)({},c[0],c[1])}))))}))}},{key:"resolveAllSingle",value:function(t){var e=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fr();return J.T.apply(void 0,(0,y.Z)(t.map(function(s){return e.resolve(s,o).pipe((0,Ce.U)(function(u){return[s.name,Array.isArray(u)?u.length>0?u[0]:void 0:u]}))}))).pipe((0,Ce.U)(function(s){var u=(0,g.Z)(s,2);return[u[0],u[1]]}))}},{key:"resolveMerged",value:function(t){var e=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fr();return this.rcm.getPlugins().pipe((0,st.w)(function(){return e.rcm.add$.pipe((0,hi.d)(void 0))}),(0,st.w)(function(){return e.rcm.getPlugins()}),(0,st.w)(function(s){return(0,Sr.a)([].concat((0,y.Z)(Array.from(s).map(function(u){return(0,g.Z)(u,2)[1].resolve()})),[e.resolveGlobals(o),0===t.length?(0,je.of)({}):e.resolveAll(t,o)])).pipe((0,kr.b)(0),(0,Ce.U)(function(u){return u.reduce(function(c,l){return(0,b.Z)((0,b.Z)({},c),l)},{})}))}))}},{key:"resolveMergedSingle",value:function(t){var e=this;return arguments.length>1&&void 0!==arguments[1]||fr(),0!==t.length?this.rcm.getPlugins().pipe((0,st.w)(function(s){return J.T.apply(void 0,(0,y.Z)(Array.from(s).map(function(u){return(0,g.Z)(u,2)[1].resolveSingle()})).concat([e.resolveGlobalsSingle(),e.resolveAllSingle(t)]))})):this.rcm.getPlugins().pipe((0,st.w)(function(s){return J.T.apply(void 0,(0,y.Z)(Array.from(s).map(function(u){return(0,g.Z)(u,2)[1].resolveSingle()})).concat([e.resolveGlobalsSingle()]))}))}},{key:"resolve",value:function(t){var e=this;return arguments.length>1&&void 0!==arguments[1]||fr(),t.plugin?this.cpm.getPlugin(t.plugin).pipe((0,st.w)(function(s){return s.resolver.resolve(s,e.getDataObject(t),new Map([["name",t.name]]))})):(0,je.of)(this.getDataObject(t))}},{key:"getDataObject",value:function(t){switch(t.adaptor){case"rest":return t.rest;case"snippet":return t.snippet;case"json":return JSON.parse(t.snippet.content);case"data":return t.data;case"token":return t.tokens;case"datasource":return t.datasource;default:return}}}]),a}(),dO=function(){var a=function(n){(0,G.Z)(e,n);var t=(0,H.Z)(e);function e(o,s){var u;return(0,p.Z)(this,e),(u=t.call(this,o,s)).add$=new pk.t(1),u}return(0,_.Z)(e,[{key:"pluginDef",value:function(){return(0,je.of)(new Rn.PluginDef({name:"resolved_context"}))}},{key:"register",value:function(s){var u=this.pluginInstances.has(s.id);(0,Et.Z)((0,Ee.Z)(e.prototype),"register",this).call(this,s),u||this.add$.next(void 0)}}]),e}(Rn.BasePluginManager);return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Rn.PluginConfigurationManager),r.\u0275\u0275inject(Nn.ModuleLoaderService))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),Gd=function(){var a=function(n){(0,G.Z)(e,n);var t=(0,H.Z)(e);function e(o,s){return(0,p.Z)(this,e),t.call(this,o,s)}return(0,_.Z)(e)}(v$);return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Su),r.\u0275\u0275inject(dO))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),Vd=function(){var a=(0,_.Z)(function n(t,e,o,s,u,c,l,m,C){(0,p.Z)(this,n),t.forEach(function(T){return s.register(T)}),u.register(function(n,t){return new ry({id:"context",title:"Context",build:function(){Ac.prototype.resolveContext=function(o,s){return new Promise(function(u){n.getPlugin(o).pipe((0,st.w)(function(c){return c.resolver.resolve(c,s).pipe((0,kn.q)(1))})).subscribe(function(c){u(c)})})},Ac.prototype.resolveMergedContext=function(o){return new Promise(function(s){t.resolveMerged(o).pipe((0,ee.b)(function(u){return s(u)}),(0,kn.q)(1)).subscribe()})}}})}(s,e)),l.register(function(n,t){return new Rs({id:"context",title:"Context",evalParam:function(o){var s=o.param,c=s.mapping.context&&""!==s.mapping.context?new co(o.metadata.get("contexts").find(function(l){return l.name===s.mapping.context})):void 0;return c?n.resolve(c).pipe((0,kn.q)(1),(0,st.w)(function(l){return Or(function(){return s.mapping.value&&""!==s.mapping.value},(0,je.of)(l).pipe((0,Ce.U)(function(m){return t.generateGenericTokens(Array.isArray(m)?m[0]:m)}),(0,Ce.U)(function(m){return t.replaceTokens("[".concat(s.mapping.value,"]"),m)}),(0,kn.q)(1)),(0,je.of)(Array.isArray(l)?l[0]:l)).pipe((0,kn.q)(1))})):(0,je.of)()},usedContexts:function(o){return(0,je.of)([o.param.mapping.context])}})}(e,o)),c.register(function(n,t){return new rs({id:"context",title:"Context",editor:l$,fetch:function(o){var s=o.settings,u=o.metadata;return(0,je.of)(new pr).pipe((0,Ce.U)(function(){return new mk(t.deserializeAsObject(s))}),(0,Ce.U)(function(c){return u.get("contexts").find(function(l){return l.name===c.name})}),(0,st.w)(function(c){return n.resolve(c).pipe((0,Ce.U)(function(l){return l instanceof pr?l:new pr({results:Array.isArray(l)?l:[l]})}),(0,kn.q)(1))}))},getBindings:function(o){var s=o.settings;return(0,je.of)([]).pipe((0,Ce.U)(function(){return new mk(t.deserializeAsObject(s))}),(0,Ce.U)(function(c){return[new fn.ContentBinding({id:c.name,type:"context"})]}))}})}(e,m)),s.register(function(n){var t={dataset:new pr};return new Fs({id:"datasource",name:"datasource",title:"Datasource",baseObject:t,resolver:n,editorComponent:d$})}(C))});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(hk),r.\u0275\u0275inject(Gd),r.\u0275\u0275inject(Pr),r.\u0275\u0275inject(Su),r.\u0275\u0275inject(zd),r.\u0275\u0275inject(da),r.\u0275\u0275inject(Cu),r.\u0275\u0275inject(Bt.AttributeSerializerService),r.\u0275\u0275inject(vk))},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({providers:[{provide:gk,useClass:gk},{provide:vk,useClass:vk},{provide:hk,useFactory:f$,multi:!0,deps:[gk]}],imports:[E.CommonModule,v.UX,v.u5,Oi.MaterialModule,si,H_,ok,kc]}),a}(),_$=function(){var a=function(){function n(t){(0,p.Z)(this,n),this.contextPlugins=t}return(0,_.Z)(n,[{key:"getAll",value:function(e){return typeof e>"u"?this.contextPlugins:this.contextPlugins.filter(e?function(o){return o.global}:function(o){return!o.global})}},{key:"getAllObjects",value:function(){return this.contextPlugins.map(function(e){return e.baseObject})}},{key:"lookupContext",value:function(e){return this.contextPlugins.find(function(o){return o.name===e})}},{key:"register",value:function(e){this.contextPlugins.push(e)}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(hk))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),y$=function(a){(0,G.Z)(t,a);var n=(0,H.Z)(t);function t(e){var o;return(0,p.Z)(this,t),(o=n.call(this,e)).resolve=e.resolve,o.resolveSingle=e.resolveSingle,o}return(0,_.Z)(t)}(Rn.Plugin),_k=function(){var a=function(){function n(t){(0,p.Z)(this,n),this.ppm=t}return(0,_.Z)(n,[{key:"extractContexts",value:function(e){var o=this;return(0,Un.D)(e.map(function(s){return o.ppm.getPlugin(s.mapping.type).pipe((0,st.w)(function(u){return Or(function(){return!!u&&!!u.usedContexts},u&&u.usedContexts?u.usedContexts({param:s,metadata:new Map([])}):(0,je.of)([]),(0,je.of)([]))}))})).pipe((0,Ce.U)(function(s){return s.reduce(function(u,c){return[].concat((0,y.Z)(u),(0,y.Z)(c.filter(function(l){return!u.includes(l)})))},[])}))}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Cu))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),x$=function(){var a=function(){function n(t,e,o){(0,p.Z)(this,n),this.routerStore=t,this.router=e}return(0,_.Z)(n,[{key:"ngOnInit",value:function(){}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Zt.yh),r.\u0275\u0275directiveInject(nr.Router),r.\u0275\u0275directiveInject(Dr))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["druid-alias-catch-all-router"]],decls:2,vars:0,template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"p"),r.\u0275\u0275text(1,"Page Not Found"),r.\u0275\u0275elementEnd())}}),a}(),b$=[],C$=function(){var a=(0,_.Z)(function n(){(0,p.Z)(this,n)});return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({imports:[Nn.UtilsModule,nr.RouterModule.forChild(b$)]}),a}(),fO=function(a){(0,G.Z)(t,a);var n=(0,H.Z)(t);function t(e){var o;return(0,p.Z)(this,t),o=n.call(this,e),e&&(o.loadingStrategy=e.loadingStrategy,o.matchingStrategy=e.matchingStrategy,o.redirectHandler=e.redirectHandler),o}return(0,_.Z)(t)}(Rn.Plugin),pO=function(){var a=function(n){(0,G.Z)(e,n);var t=(0,H.Z)(e);function e(o,s){return(0,p.Z)(this,e),t.call(this,o,s)}return(0,_.Z)(e,[{key:"pluginDef",value:function(){return(0,je.of)(new Rn.PluginDef({name:"alias"}))}}]),e}(Rn.BasePluginManager);return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Rn.PluginConfigurationManager),r.\u0275\u0275inject(Nn.ModuleLoaderService))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),hO=function(){var a=function(){function n(t,e,o,s){(0,p.Z)(this,n),this.siteName=t,this.router=e,this.apm=o,this.routesLoaded=!1}return(0,_.Z)(n,[{key:"canActivate",value:function(e,o){var s=this;return console.log("catch all alias hit"),new Promise(function(u){s.apm.getPlugins().pipe((0,st.w)(function(c){return(0,Un.D)(s.routesLoaded?[]:Array.from(c).map(function(l){return(0,g.Z)(l,2)[1].loadingStrategy.load()})).pipe((0,hi.d)(void 0))}),(0,ee.b)(function(){return s.routesLoaded=!0}),(0,st.w)(function(){return s.apm.getPlugins()}),(0,st.w)(function(c){return(0,Un.D)(Array.from(c).map(function(l){var T=(0,g.Z)(l,2)[1];return T.matchingStrategy.match(o).pipe((0,Ce.U)(function(B){return[T,B]}))}))})).subscribe(function(c){if(console.log("routes loaded: ".concat(s.routesLoaded?"y":"n")),void 0!==c.map(function(C,T){var B=(0,g.Z)(C,2);return B[1]?B[0]:void 0}).find(function(C){return void 0!==C})){console.log("alias gaurd state: ".concat(o.url));var m=s.router.parseUrl(o.url);u(m)}else u(!0)})})}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Nn.SITE_NAME),r.\u0275\u0275inject(nr.Router),r.\u0275\u0275inject(pO),r.\u0275\u0275inject(Dr))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),mO=S(17714);function w$(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"mat-option",4),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&a){var t=n.$implicit;r.\u0275\u0275property("value",t.value.id),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(t.value.title)}}function S$(a,n){}var gO=function(a){(0,G.Z)(t,a);var n=(0,H.Z)(t);function t(e){var o;return(0,p.Z)(this,t),o=n.call(this,e),e&&(o.editor=e.editor,o.send=e.send),o}return(0,_.Z)(t)}(Rn.Plugin),E$=(0,_.Z)(function a(n){(0,p.Z)(this,a),this.settings=[],n&&(this.data=n.data,n.settings&&Array.isArray(n.settings)&&(this.settings=n.settings.map(function(t){return new Bt.AttributeValue(t)})))}),yk=(0,_.Z)(function a(n){(0,p.Z)(this,a)}),Hd=(0,_.Z)(function a(n){(0,p.Z)(this,a),n&&(this.dataduct=new P$(n.dataduct))}),P$=(0,_.Z)(function a(n){(0,p.Z)(this,a),this.settings=[],n&&(this.plugin=n.plugin,n.settings&&Array.isArray(n.settings)&&(this.settings=n.settings.map(function(t){return new Bt.AttributeValue(t)})))}),vO=function(){var a=(0,_.Z)(function n(t){(0,p.Z)(this,n),this.viewContainerRef=t});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(r.ViewContainerRef))},a.\u0275dir=r.\u0275\u0275defineDirective({type:a,selectors:[["","classifiedsUiDataductRendererHost",""]]}),a}(),gE=function(){var a=function(n){(0,G.Z)(e,n);var t=(0,H.Z)(e);function e(o,s){return(0,p.Z)(this,e),t.call(this,o,s)}return(0,_.Z)(e,[{key:"pluginDef",value:function(){return(0,je.of)(new Rn.PluginDef({name:"dataduct"}))}}]),e}(Rn.BasePluginManager);return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Rn.PluginConfigurationManager),r.\u0275\u0275inject(Nn.ModuleLoaderService))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),k$=function(){var a=function(){function n(t,e){var o=this;(0,p.Z)(this,n),this.dpm=t,this.fb=e,this.contexts=[],this.ductForm=this.fb.group({plugin:this.fb.control("",[v.kI.required]),settings:this.fb.control("")}),this.ducts$=this.dpm.getPlugins(),this.componentRef$=new z.X(void 0),this.persistence$=new z.X(void 0),this.afterViewInit$=new se.x,this.contextForwardingSub=this.componentRef$.pipe((0,Q.h)(function(s){return!!s})).subscribe(function(s){s.instance.contexts=o.contexts,s.instance.settings=o.persistence$.value&&o.persistence$.value.dataduct?o.persistence$.value.dataduct.settings:[]}),this.persistenceSub=(0,Sr.a)([this.persistence$,this.afterViewInit$]).pipe((0,Ce.U)(function(s){return(0,g.Z)(s,1)[0]}),(0,ee.b)(function(s){o.ductForm.get("plugin").setValue(s&&s.dataduct?s.dataduct.plugin:"")}),(0,Rr.g)(1),(0,ee.b)(function(s){o.componentRef$.value&&o.componentRef$.value.instance&&s&&(o.componentRef$.value.instance.settings=s.dataduct?s.dataduct.settings:[])})).subscribe(),this.rendererSub=(0,Sr.a)([this.ductForm.get("plugin").valueChanges,this.afterViewInit$]).pipe((0,st.w)(function(s){var c=(0,g.Z)(s,2)[0];return c&&""!==c?o.dpm.getPlugin(c):(0,je.of)(void 0)})).subscribe(function(s){s&&o.renderPlugin(s)}),this.onTouched=function(){}}return(0,_.Z)(n,[{key:"persistence",set:function(e){this.persistence$.next(e)}},{key:"ngAfterViewInit",value:function(){this.afterViewInit$.next(void 0)}},{key:"writeValue",value:function(e){e&&this.ductForm.setValue(e,{emitEvent:!1})}},{key:"registerOnChange",value:function(e){this.ductForm.valueChanges.subscribe(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){e?this.ductForm.disable():this.ductForm.enable()}},{key:"validate",value:function(e){return this.ductForm.valid?null:this.ductForm.errors}},{key:"renderPlugin",value:function(e){var o=this.datasourceHost.viewContainerRef;o.clear(),this.componentRef$.next(o.createComponent(e.editor))}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(gE),r.\u0275\u0275directiveInject(v.QS))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-persistence-form"]],viewQuery:function(t,e){var o;1&t&&r.\u0275\u0275viewQuery(vO,7),2&t&&r.\u0275\u0275queryRefresh(o=r.\u0275\u0275loadQuery())&&(e.datasourceHost=o.first)},inputs:{contexts:"contexts",persistence:"persistence"},features:[r.\u0275\u0275ProvidersFeature([{provide:v.JU,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0},{provide:v.Cf,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0}])],decls:10,vars:6,consts:[[3,"formGroup"],["required","","formControlName","plugin"],[3,"value",4,"ngFor","ngForOf"],["classifiedsUiDataductRendererHost",""],[3,"value"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"div",0)(1,"mat-form-field")(2,"mat-label"),r.\u0275\u0275text(3,"Plugin"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"mat-select",1),r.\u0275\u0275template(5,w$,2,2,"mat-option",2),r.\u0275\u0275pipe(6,"keyvalue"),r.\u0275\u0275pipe(7,"async"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementContainerStart(8),r.\u0275\u0275template(9,S$,0,0,"ng-template",3),r.\u0275\u0275elementContainerEnd(),r.\u0275\u0275elementEnd()),2&t&&(r.\u0275\u0275property("formGroup",e.ductForm),r.\u0275\u0275advance(5),r.\u0275\u0275property("ngForOf",r.\u0275\u0275pipeBind1(6,2,r.\u0275\u0275pipeBind1(7,4,e.ducts$))))},dependencies:[E.NgForOf,v.JJ,v.JL,v.Q7,v.sg,v.u,bi.MatLegacyOption,En.MatLegacyFormField,En.MatLegacyLabel,Fi.MatLegacySelect,vO,E.AsyncPipe,E.KeyValuePipe]}),a}(),A$=function(){var a=function(){function n(t,e,o,s){(0,p.Z)(this,n),this.data=t,this.dialogRef=e,this.fb=o,this.attributeSerializer=s,this.persistenceForm=this.fb.group({dataduct:this.fb.control("")}),this.contexts=[],this.persistence=new Hd,this.contexts=t.contexts,this.persistence=t.persistence}return(0,_.Z)(n,[{key:"submit",value:function(){var e=this.persistenceForm.value;console.log("persistence form",e);var o=this.attributeSerializer.serialize(e.dataduct.settings,"settings");console.log("persistence settings",o),this.dialogRef.close(new Hd((0,b.Z)((0,b.Z)({},this.persistenceForm.value),{},{dataduct:(0,b.Z)((0,b.Z)({},e.dataduct),{},{settings:o.attributes})})))}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Jt.MAT_LEGACY_DIALOG_DATA),r.\u0275\u0275directiveInject(Jt.MatLegacyDialogRef),r.\u0275\u0275directiveInject(v.QS),r.\u0275\u0275directiveInject(Bt.AttributeSerializerService))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-persistence-dialog"]],decls:8,vars:4,consts:[[1,"persistence-form",3,"formGroup","ngSubmit"],[1,"content-inner"],["fxLayout","column"],["formControlName","dataduct",3,"contexts","persistence"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"form",0),r.\u0275\u0275listener("ngSubmit",function(){return e.submit()}),r.\u0275\u0275elementStart(1,"mat-dialog-content")(2,"div",1)(3,"div",2),r.\u0275\u0275element(4,"classifieds-ui-persistence-form",3),r.\u0275\u0275elementEnd()()(),r.\u0275\u0275elementStart(5,"mat-dialog-actions")(6,"button",4),r.\u0275\u0275text(7,"Save"),r.\u0275\u0275elementEnd()()()),2&t&&(r.\u0275\u0275property("formGroup",e.persistenceForm),r.\u0275\u0275advance(4),r.\u0275\u0275property("contexts",e.contexts)("persistence",e.persistence),r.\u0275\u0275advance(2),r.\u0275\u0275property("disabled",!e.persistenceForm.valid))},dependencies:[v._Y,v.JJ,v.JL,v.sg,v.u,pi.MatLegacyButton,Jt.MatLegacyDialogClose,Jt.MatLegacyDialogContent,Jt.MatLegacyDialogActions,k$]}),a}(),R$=function(){var a=(0,_.Z)(function n(){(0,p.Z)(this,n)});return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({imports:[E.CommonModule,v.u5,v.UX,Oi.MaterialModule]}),a}(),D$=function(){var a=function(){function n(t){(0,p.Z)(this,n),this.dpm=t}return(0,_.Z)(n,[{key:"persist",value:function(e){var o=e.data,s=e.persistence;return this.dpm.getPlugin(s.dataduct.plugin).pipe((0,st.w)(function(u){return u.send(new E$({data:o,settings:s.dataduct.settings}))}),(0,Ce.U)(function(){}))}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(gE))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}();function T$(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div"),r.\u0275\u0275element(1,"druid-detour-interaction-listener",4),r.\u0275\u0275elementStart(2,"button",3),r.\u0275\u0275listener("click",function(){var c=r.\u0275\u0275restoreView(t).index,l=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(l.deleteListener$.next(c))}),r.\u0275\u0275text(3,"Delete"),r.\u0275\u0275elementEnd()()}if(2&a){var e=n.index,o=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("formControlName",e)("listener",o.interactions$.value.interactions.listeners[e])}}var Rc=(0,_.Z)(function a(n){(0,p.Z)(this,a),this.interactions=n&&n.interactions?new _O(n.interactions):new _O}),_O=(0,_.Z)(function a(n){(0,p.Z)(this,a),this.listeners=[],n&&n.listeners&&Array.isArray(n.listeners)&&(this.listeners=n.listeners.map(function(t){return new yO(t)}))}),yO=(0,_.Z)(function a(n){(0,p.Z)(this,a),this.handler=n&&n.handler?new Ds(n.handler):new Ds,this.event=n&&n.event?new Ds(n.event):new Ds}),xO=function(){var a=function(n){(0,G.Z)(e,n);var t=(0,H.Z)(e);function e(o,s){return(0,p.Z)(this,e),t.call(this,o,s)}return(0,_.Z)(e,[{key:"pluginDef",value:function(){return(0,je.of)(new Rn.PluginDef({name:"interaction_event"}))}}]),e}(Rn.BasePluginManager);return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Rn.PluginConfigurationManager),r.\u0275\u0275inject(Nn.ModuleLoaderService))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),bO=function(){var a=function(n){(0,G.Z)(e,n);var t=(0,H.Z)(e);function e(o,s){return(0,p.Z)(this,e),t.call(this,o,s)}return(0,_.Z)(e,[{key:"pluginDef",value:function(){return(0,je.of)(new Rn.PluginDef({name:"interaction_handler"}))}},{key:"discovery",value:function(){(0,Et.Z)((0,Ee.Z)(e.prototype),"discovery",this).call(this)}}]),e}(Rn.BasePluginManager);return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Rn.PluginConfigurationManager),r.\u0275\u0275inject(Nn.ModuleLoaderService))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),I$=function(){var a=function(){function n(t,e,o){var s=this;(0,p.Z)(this,n),this.fb=t,this.iepm=e,this.ihpm=o,this.eventPlugins$=this.iepm.getPlugins(),this.handlerPlugins$=this.ihpm.getPlugins(),this.listenerForm=this.fb.group({event:this.fb.control(""),handler:this.fb.control("")}),this.contexts=[],this.listener$=new z.X(new yO),this.event$=new z.X(new Ds),this.handler$=new z.X(new Ds),this.listenerSub=this.listener$.pipe((0,ee.b)(function(u){s.event$.next(u&&u.event?u.event:new Ds),s.handler$.next(u&&u.handler?u.handler:new Ds)})).subscribe(),this.onTouched=function(){}}return(0,_.Z)(n,[{key:"listener",set:function(e){this.listener$.next(e)}},{key:"writeValue",value:function(e){e&&this.listenerForm.setValue(e,{emitEvent:!1})}},{key:"registerOnChange",value:function(e){this.listenerForm.valueChanges.subscribe(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){e?this.listenerForm.disable():this.listenerForm.enable()}},{key:"validate",value:function(e){return this.listenerForm.valid?null:this.listenerForm.errors}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(v.QS),r.\u0275\u0275directiveInject(xO),r.\u0275\u0275directiveInject(bO))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["druid-detour-interaction-listener"]],inputs:{contexts:"contexts",listener:"listener"},features:[r.\u0275\u0275ProvidersFeature([{provide:v.JU,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0},{provide:v.Cf,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0}])],decls:5,vars:9,consts:[[3,"formGroup"],["formControlName","event","title","Event",3,"plugins","instance"],["formControlName","handler","title","Handler",3,"plugins","instance"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"div",0),r.\u0275\u0275element(1,"druid-params-plugin-instance",1),r.\u0275\u0275pipe(2,"async"),r.\u0275\u0275element(3,"druid-params-plugin-instance",2),r.\u0275\u0275pipe(4,"async"),r.\u0275\u0275elementEnd()),2&t&&(r.\u0275\u0275property("formGroup",e.listenerForm),r.\u0275\u0275advance(1),r.\u0275\u0275property("plugins",r.\u0275\u0275pipeBind1(2,5,e.eventPlugins$))("instance",e.event$.value),r.\u0275\u0275advance(2),r.\u0275\u0275property("plugins",r.\u0275\u0275pipeBind1(4,7,e.handlerPlugins$))("instance",e.handler$.value))},dependencies:[v.JJ,v.JL,v.sg,v.u,O8,E.AsyncPipe]}),a}(),O$=function(){var a=function(){function n(t){var e=this;(0,p.Z)(this,n),this.fb=t,this.interactions$=new z.X(new Rc({interactions:{listeners:[]}})),this.contexts$=new z.X([]),this.afterViewInit$=new se.x,this.interactionsForm=this.fb.group({listeners:this.fb.array([])}),this.addListener$=new se.x,this.deleteListener$=new se.x,this.addListenerSub=this.addListener$.pipe((0,ee.b)(function(){return e.listeners.push(e.fb.control(""))})).subscribe(),this.deleteListenerSub=this.deleteListener$.pipe((0,ee.b)(function(o){e.interactions$.value.interactions.listeners.splice(o,1),e.listeners.removeAt(o)})).subscribe(),this.interactionsSub=(0,Sr.a)([this.interactions$,this.afterViewInit$]).pipe((0,Ce.U)(function(o){return(0,g.Z)(o,1)[0]}),(0,Q.h)(function(o){return 0!==o.interactions.listeners.length}),(0,ee.b)(function(o){e.listeners.clear(),o.interactions.listeners.forEach(function(s,u){e.listeners.push(e.fb.control(""))})})).subscribe(),this.onTouched=function(){}}return(0,_.Z)(n,[{key:"interactions",set:function(e){this.interactions$.next(e)}},{key:"contexts",set:function(e){this.contexts$.next(e)}},{key:"listeners",get:function(){return this.interactionsForm.get("listeners")}},{key:"ngAfterViewInit",value:function(){this.afterViewInit$.next(void 0),this.afterViewInit$.complete()}},{key:"writeValue",value:function(e){e&&this.interactionsForm.setValue(e,{emitEvent:!1})}},{key:"registerOnChange",value:function(e){this.interactionsForm.valueChanges.subscribe(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){e?this.interactionsForm.disable():this.interactionsForm.enable()}},{key:"validate",value:function(e){return this.interactionsForm.valid?null:this.interactionsForm.errors}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(v.QS))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["druid-detour-interactions-form"]],inputs:{interactions:"interactions",contexts:"contexts"},features:[r.\u0275\u0275ProvidersFeature([{provide:v.JU,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0},{provide:v.Cf,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0}])],decls:5,vars:2,consts:[[3,"formGroup"],["formArrayName","listeners"],[4,"ngFor","ngForOf"],["type","button",3,"click"],[3,"formControlName","listener"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"div",0)(1,"div",1),r.\u0275\u0275template(2,T$,4,2,"div",2),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(3,"button",3),r.\u0275\u0275listener("click",function(){return e.addListener$.next(void 0)}),r.\u0275\u0275text(4,"Add Listener"),r.\u0275\u0275elementEnd()),2&t&&(r.\u0275\u0275property("formGroup",e.interactionsForm),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngForOf",e.listeners.controls))},dependencies:[E.NgForOf,v.JJ,v.JL,v.sg,v.u,v.CE,I$]}),a}(),F$=function(){var a=function(){function n(t,e,o){(0,p.Z)(this,n),this.data=t,this.dialogRef=e,this.fb=o,this.interactionsForm=this.fb.group({interactions:this.fb.control("")}),this.contexts=[],this.interactions=new Rc,this.contexts=t.contexts,this.interactions=t.interactions}return(0,_.Z)(n,[{key:"submit",value:function(){var e=new Rc(this.interactionsForm.value);console.log("interactions payload",e),this.dialogRef.close(e)}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Jt.MAT_LEGACY_DIALOG_DATA),r.\u0275\u0275directiveInject(Jt.MatLegacyDialogRef),r.\u0275\u0275directiveInject(v.QS))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["druid-detour-interactions-dialog"]],decls:8,vars:4,consts:[[1,"interactions-form",3,"formGroup","ngSubmit"],[1,"content-inner"],["fxLayout","column"],["formControlName","interactions",3,"contexts","interactions"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"form",0),r.\u0275\u0275listener("ngSubmit",function(){return e.submit()}),r.\u0275\u0275elementStart(1,"mat-dialog-content")(2,"div",1)(3,"div",2),r.\u0275\u0275element(4,"druid-detour-interactions-form",3),r.\u0275\u0275elementEnd()()(),r.\u0275\u0275elementStart(5,"mat-dialog-actions")(6,"button",4),r.\u0275\u0275text(7,"Save"),r.\u0275\u0275elementEnd()()()),2&t&&(r.\u0275\u0275property("formGroup",e.interactionsForm),r.\u0275\u0275advance(4),r.\u0275\u0275property("contexts",e.contexts)("interactions",e.interactions),r.\u0275\u0275advance(2),r.\u0275\u0275property("disabled",!e.interactionsForm.valid))},dependencies:[v._Y,v.JJ,v.JL,v.sg,v.u,pi.MatLegacyButton,Jt.MatLegacyDialogClose,Jt.MatLegacyDialogContent,Jt.MatLegacyDialogActions,O$]}),a}(),M$=function(a){(0,G.Z)(t,a);var n=(0,H.Z)(t);function t(e){return(0,p.Z)(this,t),n.call(this,e)}return(0,_.Z)(t)}(Rn.Plugin),N$=function(){var a=(0,_.Z)(function n(t){(0,p.Z)(this,n),t.register(new M$({title:"DOM",id:"dom"}))});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(xO))},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({imports:[E.CommonModule,v.u5,v.UX,Oi.MaterialModule,wu]}),a}(),CO=function(a){(0,G.Z)(t,a);var n=(0,H.Z)(t);function t(e){return(0,p.Z)(this,t),n.call(this,e)}return(0,_.Z)(t)}(Rn.Plugin),Dc=S(1621),vE=S(6606),Eu=S(9263),is=S(28413),qd=S(78),xk=S(8055),Kd=function(a){(0,G.Z)(t,a);var n=(0,H.Z)(t);function t(e){var o;return(0,p.Z)(this,t),o=n.call(this,e),e&&(o.create=e.create,o.read=e.read,o.update=e.update,o.delete=e.delete,e.query&&(o.query=e.query)),o}return(0,_.Z)(t)}(Rn.Plugin),wO=(0,_.Z)(function a(n){(0,p.Z)(this,a),this.options=[],this.params=[],n&&(this.adaptorName=n.adaptorName,this.optionsString=n.optionsString?n.optionsString:void 0,this.paramsString=n.paramsString?n.paramsString:void 0,n.options&&Array.isArray(n.options)&&(this.options=n.options.map(function(t){return new Mi(t)})),n.params&&Array.isArray(n.params)&&(this.params=n.params.map(function(t){return new Mi(t)})))}),Z$=function(){var a=function(){function n(t,e){var o=this;(0,p.Z)(this,n),this.fb=t,this.attributeSerializer=e,this.contexts=[],this.settings$=new z.X(void 0),this.datasource$=new z.X(void 0),this.optionValues$=new z.X([]),this.paramValues$=new z.X([]),this.formGroup=this.fb.group({adaptorName:this.fb.control(""),optionsString:this.fb.control(""),paramsString:this.fb.control(""),options:this.fb.control([]),params:this.fb.control([])}),this.settingsSub=this.settings$.pipe((0,Ce.U)(function(s){return s?new wO(o.attributeSerializer.deserializeAsObject(s)):void 0}),(0,ee.b)(function(s){return setTimeout(function(){return o.datasource$.next(s)})})).subscribe(function(s){s?(o.formGroup.get("adaptorName").setValue(s.adaptorName),o.formGroup.get("optionsString").setValue(s.optionsString?s.optionsString:""),o.formGroup.get("paramsString").setValue(s.paramsString?s.paramsString:"")):(o.formGroup.get("adaptorName").setValue(""),o.formGroup.get("optionsString").setValue(""),o.formGroup.get("paramsString").setValue(""),setTimeout(function(){return o.optionValues$.next([])},2),setTimeout(function(){return o.optionValues$.next([])},2))}),this.datasourceOptionsSub=(0,Sr.a)([this.datasource$,this.formGroup.get("optionsString").valueChanges]).pipe((0,Q.h)(function(s){return void 0!==(0,g.Z)(s,1)[0]}),(0,Rr.g)(1),(0,ee.b)(function(s){var u=(0,g.Z)(s,1);return o.optionValues$.next(u[0].options)})).subscribe(),this.datasourceParamsSub=(0,Sr.a)([this.datasource$,this.formGroup.get("paramsString").valueChanges]).pipe((0,Q.h)(function(s){return void 0!==(0,g.Z)(s,1)[0]}),(0,Rr.g)(1),(0,ee.b)(function(s){var u=(0,g.Z)(s,1);return o.paramValues$.next(u[0].params)})).subscribe(),this.optionsStringChangeSub=this.formGroup.get("optionsString").valueChanges.pipe((0,kr.b)(500)).subscribe(function(s){var u=Mo.parse("?"+s);o.optionsParsed=u}),this.paramsStringChangeSub=this.formGroup.get("paramsString").valueChanges.pipe((0,kr.b)(500)).subscribe(function(s){var u=Mo.parse("?"+s);o.paramsParsed=u}),this.onTouched=function(){}}return(0,_.Z)(n,[{key:"settings",set:function(e){this.settings$.next(e)}},{key:"ngOnInit",value:function(){}},{key:"writeValue",value:function(e){e&&this.formGroup.setValue(e,{emitEvent:!1})}},{key:"registerOnChange",value:function(e){this.formGroup.valueChanges.subscribe(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){e?this.formGroup.disable():this.formGroup.enable()}},{key:"validate",value:function(e){return this.formGroup.valid?null:this.formGroup.errors}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(v.QS),r.\u0275\u0275directiveInject(Bt.AttributeSerializerService))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-crud-adaptor-datasource-form"]],inputs:{contexts:"contexts",settings:"settings"},features:[r.\u0275\u0275ProvidersFeature([{provide:v.JU,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0},{provide:v.Cf,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0}])],decls:14,vars:7,consts:[[3,"formGroup"],["matInput","","placeholder","Adaptor","formControlName","adaptorName","required",""],[1,"options-container"],["matInput","","placeholder","Options","formControlName","optionsString"],["formControlName","options",3,"params","paramValues","contexts"],[1,"params-container"],["matInput","","placeholder","Params","formControlName","paramsString"],["formControlName","params",3,"params","paramValues","contexts"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"div",0)(1,"div")(2,"mat-form-field"),r.\u0275\u0275element(3,"input",1),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(4,"div",2)(5,"div")(6,"mat-form-field"),r.\u0275\u0275element(7,"input",3),r.\u0275\u0275elementEnd()(),r.\u0275\u0275element(8,"classifieds-ui-params-form",4),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(9,"div",5)(10,"div")(11,"mat-form-field"),r.\u0275\u0275element(12,"input",6),r.\u0275\u0275elementEnd()(),r.\u0275\u0275element(13,"classifieds-ui-params-form",7),r.\u0275\u0275elementEnd()()),2&t&&(r.\u0275\u0275property("formGroup",e.formGroup),r.\u0275\u0275advance(8),r.\u0275\u0275property("params",e.optionsParsed)("paramValues",e.optionValues$.value)("contexts",e.contexts),r.\u0275\u0275advance(5),r.\u0275\u0275property("params",e.paramsParsed)("paramValues",e.paramValues$.value)("contexts",e.contexts))},dependencies:[v.Fj,v.JJ,v.JL,v.Q7,v.sg,v.u,En.MatLegacyFormField,Hr.MatLegacyInput,ey]}),a}(),SO=function(){var a=(0,_.Z)(function n(t){(0,p.Z)(this,n),this.controlContainer=t,this.settings=[],this.contexts=[]});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(v.gN))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-crud-adaptor-datasource"]],inputs:{settings:"settings",contexts:"contexts"},decls:2,vars:3,consts:[[3,"formGroup"],["formControlName","settings",3,"settings","contexts"]],template:function(t,e){1&t&&(r.\u0275\u0275elementContainerStart(0,0),r.\u0275\u0275element(1,"classifieds-ui-crud-adaptor-datasource-form",1),r.\u0275\u0275elementContainerEnd()),2&t&&(r.\u0275\u0275property("formGroup",e.controlContainer.control),r.\u0275\u0275advance(1),r.\u0275\u0275property("settings",e.settings)("contexts",e.contexts))},dependencies:[v.JJ,v.JL,v.sg,v.u,Z$],encapsulation:2}),a}(),Pu=function(){var a=function(n){(0,G.Z)(e,n);var t=(0,H.Z)(e);function e(o,s){return(0,p.Z)(this,e),t.call(this,o,s)}return(0,_.Z)(e,[{key:"pluginDef",value:function(){return(0,je.of)(new Rn.PluginDef({name:"crud_adaptor"}))}}]),e}(Rn.BasePluginManager);return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Rn.PluginConfigurationManager),r.\u0275\u0275inject(Nn.ModuleLoaderService))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),iy=function(){var a=function(){function n(t){(0,p.Z)(this,n),this.crud=t,this.cachedCollectionQueries=[],this.cachedCollectionIgnore={p:{create:void 0,update:void 0,delete:void 0,query:void 0,read:void 0},input:{identity:void 0}}}return(0,_.Z)(n,[{key:"evaluatePlugins",value:function(e){var o=this,s=e.object,u=e.plugins,c=e.op,l=e.parentObject,C=Object.keys(u).filter(function(T){return!u[T].ops||u[T].ops.includes(c)}).map(function(T){return o.crud.getPlugin(u[T].plugin?u[T].plugin:T).pipe((0,Ce.U)(function(B){return{p:B,params:u[T].params?Object.keys(u[T].params).reduce(function(F,U){return(0,b.Z)((0,b.Z)({},F),{},(0,d.Z)({},U,u[T].params[U]instanceof Mi?u[T].params[U]:new Mi({flags:[],mapping:{type:"static",value:u[T].params[U],context:void 0,testValue:u[T].params[U]}})))},{}):{}}}),(0,st.w)(function(B){return B.p[c]({rule:void 0,object:s,parentObject:l,params:B.params,identity:function(ue){var me=ue.object,Se=ue.parentObject;return(0,je.of)({identity:me.id?me.id:Se?Se.id:void 0})}})}),(0,st.w)(function(B){return Or(function(){return u[T].plugins&&0!==Object.keys(u[T].plugins).length},u[T].plugins&&0!==Object.keys(u[T].plugins).length?o.evaluatePlugins({plugins:u[T].plugins,object:B.entity?B.entity:s,parentObject:B.originalEntity?B.originalEntity:s,op:c}):(0,je.of)(B),(0,je.of)(B))}))});return(0,Un.D)(C).pipe((0,Ce.U)(function(){return s}))}},{key:"evaluateCollectionPlugins",value:function(e){var o=this,s=e.query,u=e.objects,c=e.plugins,l=e.op,m=e.parentObjects;console.log("evaluate collection plugins");var C=Object.keys(c),T=C.filter(function(F){return!c[F].ops||c[F].ops.includes(l)}).map(function(F){return o.crud.getPlugin(c[F].plugin?c[F].plugin:F).pipe((0,Ce.U)(function(U){return{p:U,params:c[F].params?Object.keys(c[F].params).reduce(function(ae,ue){return(0,b.Z)((0,b.Z)({},ae),{},(0,d.Z)({},ue,c[F].params[ue]instanceof Mi?c[F].params[ue]:new Mi({flags:[],mapping:{type:"static",value:c[F].params[ue],context:void 0,testValue:c[F].params[ue]}})))},{}):{}}}),(0,st.w)(function(U){var ae=U.p,ue=U.params;return o.buildQueryRule({params:s,config:c[F]}).pipe((0,Ce.U)(function(me){return{p:ae,params:ue,rule:me.rule}}))}),(0,st.w)(function(U){return o.flightAndCacheAwareCollectionQuery({p:U.p,input:{rule:U.rule,objects:u,parentObjects:m,params:U.params,identity:function(we){var qe=we.object,at=we.parentObject;return(0,je.of)({identity:qe.id?qe.id:at?at.id:void 0})}}}).pipe((0,ee.b)(function(){return console.log("end of crud query call")}))}),(0,st.w)(function(U){return Or(function(){return c[F].plugins&&0!==Object.keys(c[F].plugins).length},o.evaluateCollectionPlugins({query:s,plugins:c[F].plugins&&0!==Object.keys(c[F].plugins).length?c[F].plugins:{},objects:U.entities?U.entities:u,parentObjects:U.originalEntities?U.originalEntities:u,op:l}),(0,je.of)(U))}),(0,ee.b)(function(U){return console.log("end of op",U)}))});return C.filter(function(F){return!c[F].ops||c[F].ops.includes(l)}).find(function(F){return c[F].fallback})&&T.length>1?T.reduce(function(F,U){return F.pipe((0,st.w)(function(ae){return ae&&Array.isArray(ae)&&ae.length>0?(0,je.of)(ae):U.pipe((0,Ce.U)(function(ue){return ue&&ue.entities&&Array.isArray(ue.entities)?ue.entities:[]}))}),(0,st.w)(function(ae){return(0,je.of)(ae.length>0?ae:[])}))},(0,je.of)([])):1===T.length?T[0].pipe((0,Ce.U)(function(F){return(0,y.Z)(F.entities)})):(0,Un.D)(T).pipe((0,Ce.U)(function(F){return F.reduce(function(U,ae){return[].concat((0,y.Z)(U),(0,y.Z)(ae.entities))},[])}),(0,hi.d)([]))}},{key:"buildQueryRule",value:function(e){var o=e.params,s=e.config;return new W.y(function(u){var c=[];"string"==typeof o&&o.split("&").map(function(C){return C.split("=",2)}).reduce(function(C,T){var B=(0,g.Z)(T,2),F=B[0],U=B[1];return new Map([].concat((0,y.Z)(Array.from(C).filter(function(ae){return(0,g.Z)(ae,2)[0]!==F})),[[F,[].concat((0,y.Z)(C.has(F)?C.get(F):[]),[U])]]))},new Map).forEach(function(C,T){return c.push({any:C.map(function(B){return(0,b.Z)({fact:"identity"===T?"identity":"entity",operator:s.queryMappings&&s.queryMappings.has(T)&&s.queryMappings.get(T).defaultOperator?s.queryMappings.get(T).defaultOperator:"equal",value:B},"identity"===T?{}:{path:"$.".concat(T)})})})});var m=c.length>0?new qd.Rule({conditions:{all:c},event:{type:"visible"}}):void 0;u.next({rule:m}),u.complete()})}},{key:"flightAndCacheAwareCollectionQuery",value:function(e){var o=this,s=this.cachedCollectionQueries.findIndex(function(u){var c=u.p,l=u.input,m=(0,xk.getDiff)((0,b.Z)((0,b.Z)({},e.p),o.cachedCollectionIgnore.p),(0,b.Z)((0,b.Z)({},c),o.cachedCollectionIgnore.p)),C=(0,xk.getDiff)((0,b.Z)((0,b.Z)({},e.input),o.cachedCollectionIgnore.input),(0,b.Z)((0,b.Z)({},l),o.cachedCollectionIgnore.input));return 0===m.length&&0===C.length});return-1===s&&(this.cachedCollectionQueries.push({p:e.p,input:e.input,query$:new pk.t}),s=this.cachedCollectionQueries.length-1,e.p.query(e.input).pipe((0,ee.b)(function(u){return o.cachedCollectionQueries[s].query$.next(u)}),(0,kn.q)(1)).subscribe()),this.cachedCollectionQueries[s].query$.pipe((0,kn.q)(1))}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Pu))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),oy=function(){var a=(0,_.Z)(function n(t,e,o,s,u,c,l,m){(0,p.Z)(this,n),t.register(function(n,t,e,o,s,u){return new rs({id:"crud_adaptor",title:"Crud Adaptor",editor:SO,fetch:function(l){var m=l.settings,C=l.metadata;return(0,je.of)(new pr).pipe((0,Ce.U)(function(){return t.deserializeAsObject(m)}),(0,Ce.U)(function(T){return new wO(T)}),(0,st.w)(function(T){return e.getPlugin(T.adaptorName).pipe((0,Ce.U)(function(B){return{plugin:B,ds:T}}))}),(0,Ce.U)(function(T){var F=T.ds;return{plugin:T.plugin,ds:F,optionNames:F.optionsString?F.optionsString.split("&").filter(function(U){return-1!==U.indexOf("=:")}).map(function(U){return U.split("=",2)[1].substr(1)}):[]}}),(0,st.w)(function(T){var B=T.plugin,F=T.ds,U=T.optionNames;return(0,Un.D)([o.paramValues(F.options.reduce(function(ae,ue,me){return new Map([].concat((0,y.Z)(ae),[[U[me],ue]]))},new Map)).pipe((0,Ce.U)(function(ae){return Array.from(ae).reduce(function(ue,me){var Se=(0,g.Z)(me,2),we=Se[0],qe=Se[1];return(0,b.Z)((0,b.Z)({},ue),{},(0,d.Z)({},we,qe))},{})})),F.paramsString&&""!==F.paramsString?u.getUrl("?"+F.paramsString,F.params,C).pipe((0,kn.q)(1)):(0,je.of)(void 0)]).pipe((0,Ce.U)(function(ae){var ue=(0,g.Z)(ae,2);return{plugin:B,options:ue[0],query:ue[1]}}))}),(0,st.w)(function(T){var U=T.query;return s.evaluateCollectionPlugins({plugins:(0,d.Z)({},T.plugin.id,{params:T.options}),op:"query",query:U&&U.substr(1)})}),(0,Ce.U)(function(T){return new pr({results:T})}))},editorOptions:function(){return(0,je.of)(new mE({fullscreen:!0}))},getBindings:function(l){return(0,je.of)([])}})}(0,u,e,c,l,m)),o.register(function(n){var t=n.crudDataHelper,e=n.attributeSerializer;return new gO({id:"crud",title:"Crud",editor:SO,send:function(s){return(0,je.of)(new yk({})).pipe((0,Ce.U)(function(){return{settings:e.deserializeAsObject(s.settings)}}),(0,ee.b)(function(u){return console.log("crud data duct",u.settings)}),(0,Ce.U)(function(u){var c=u.settings;return{plugins:(0,d.Z)({},"".concat(c.adaptorName),{plugin:"".concat(c.adaptorName),ops:["create"],params:"".concat(c.optionsString).split("&").reduce(function(l,m,C){return(0,b.Z)((0,b.Z)({},l),{},(0,d.Z)({},m.split("=",1)[0],new Mi(c.options[C])))},{})})}}),(0,st.w)(function(u){return t.evaluatePlugins({object:s.data,plugins:u.plugins,op:"create",parentObject:{id:fr()}})}),(0,Ce.U)(function(){return new yk({})}))}})}({crudDataHelper:l,attributeSerializer:u}))});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(da),r.\u0275\u0275inject(Pu),r.\u0275\u0275inject(gE),r.\u0275\u0275inject(_k),r.\u0275\u0275inject(Bt.AttributeSerializerService),r.\u0275\u0275inject(Ts),r.\u0275\u0275inject(iy),r.\u0275\u0275inject(ny))},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({imports:[E.CommonModule,v.UX,v.u5,Oi.MaterialModule,Vd,wu]}),a}(),bk=function(){function a(n,t,e,o){(0,p.Z)(this,a),this.crud=t,this.entityDefinitionService=e,this.crudDataHelperService=o,this._name="".concat(n," CrudDataService"),this.entityName=n}return(0,_.Z)(a,[{key:"name",get:function(){return this._name}},{key:"add",value:function(t){var e=this.entityDefinitionService.getDefinition(this.entityName).metadata;return this.crudDataHelperService.evaluatePlugins({object:t,plugins:e.crud,op:"create"})}},{key:"update",value:function(t){var e=this.entityDefinitionService.getDefinition(this.entityName).metadata;return this.crudDataHelperService.evaluatePlugins({object:t.changes,plugins:e.crud,op:"update"})}},{key:"upsert",value:function(t){var e=this.entityDefinitionService.getDefinition(this.entityName).metadata;return this.crudDataHelperService.evaluatePlugins({object:t,plugins:e.crud,op:"update"})}},{key:"delete",value:function(t){var e=this,o=this.entityDefinitionService.getDefinition(this.entityName).metadata;return this.getById(t).pipe((0,st.w)(function(s){return e.crudDataHelperService.evaluatePlugins({object:s,plugins:o.crud,op:"delete"})}),(0,Ce.U)(function(){return t}))}},{key:"getAll",value:function(){var t=this.entityDefinitionService.getDefinition(this.entityName).metadata;return this.crudDataHelperService.evaluateCollectionPlugins({plugins:t.crud,op:"query"})}},{key:"getById",value:function(t){var e=this.entityDefinitionService.getDefinition(this.entityName).metadata;return this.crudDataHelperService.evaluateCollectionPlugins({query:"identity=".concat(t),plugins:e.crud,op:"query"}).pipe((0,Ce.U)(function(o){return o&&0!==o.length?o[0]:void 0}))}},{key:"getWithQuery",value:function(t){var e=this.entityDefinitionService.getDefinition(this.entityName).metadata;return this.crudDataHelperService.evaluateCollectionPlugins({query:t,plugins:e.crud,op:"query"})}}]),a}(),EO=function(){var a=function(){function n(){(0,p.Z)(this,n),this.operatorsMap=new Map([["=","equal"],["!=","notEqual"]])}return(0,_.Z)(n,[{key:"buildFields",value:function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=new Map;return this.genericFields(e,s,o,0),s}},{key:"attributeFields",value:function(e,o,s,u){var c=this;e.forEach(function(l,m){if("widget"!==l.name)for(var C in l)l.type===Bt.AttributeTypes.Complex||"attributes"===C&&l.attributes&&l.attributes.length>0?c.attributeFields(l.attributes,o,l.type===Bt.AttributeTypes.Complex?"".concat(s):"".concat(s,".").concat(l.name),u+1):"attributes"!==C&&(C===l.name?o.set("".concat(s,".").concat(C),{name:"".concat(s,".").concat(C),type:c.resolveAttributeType(l.type),defaultValue:l[C]}):o.set("".concat(s,".").concat(l.name,".").concat(C),{name:"".concat(s,".").concat(l.name,".").concat(C),type:c.resolveAttributeType(l.type),defaultValue:l[C]}))})}},{key:"genericFields",value:function(e,o,s,u){for(var c in e){var l=typeof e[c];if("object"!==l)o.set("".concat(s,".").concat(c),{name:"".concat(s,".").concat(c),type:this.resolveNativeType(l),defaultValue:e[c]});else if(Array.isArray(e[c])&&"attributes"===c)this.attributeFields(e[c],o,"".concat(s,".").concat(c),u+1);else if(Array.isArray(e[c]))for(var m=e[c].length,C=0;C<m;C++)this.genericFields(e[c][C],o,"".concat(s,".").concat(c,".").concat(C),u+1);else this.genericFields(e[c],o,"".concat(s,".").concat(c),u+1)}}},{key:"toEngineRule",value:function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=[];if(void 0!==e.rules&&Array.isArray(e.rules)){for(var m=e.rules.length,C=0;C<m;C++)if(!("field"in e.rules[C])||null!=e.condition&&""!==e.condition){var U=this.toEngineRule(e.rules[C],o+1);s.push(U.conditions)}else{var T=e.rules[C].field.indexOf("."),B=e.rules[C].field.substr(0,T),F=e.rules[C].field.substr(T+1);s.push({fact:B,path:"$.".concat(F),operator:this.operatorsMap.get(e.rules[C].operator),value:e.rules[C].value})}return new qd.Rule("and"===e.condition?{conditions:{all:s},event:0===o?{type:"visible"}:void 0}:{conditions:{any:s},event:0===o?{type:"visible"}:void 0})}var u=e.field.indexOf("."),c=e.field.substr(0,u),l=e.field.substr(u+1);return s.push({fact:c,path:"$.".concat(l),operator:this.operatorsMap.get(e.operator),value:e.value}),new qd.Rule({conditions:{all:s},event:0===o?{type:"visible"}:void 0})}},{key:"extractConditions",value:function(e){var s=this.toEngineRule(e);return[].concat((0,y.Z)(void 0!==s.conditions.any?s.conditions.any:[]),(0,y.Z)(void 0!==s.conditions.all?s.conditions.all:[]))}},{key:"resolveNativeType",value:function(e){switch(e){case"number":return"number";case"boolean":return"boolean";default:return"string"}}},{key:"resolveAttributeType",value:function(e){switch(e){case Bt.AttributeTypes.Float:case Bt.AttributeTypes.Number:return"number";case Bt.AttributeTypes.Bool:return"boolean";default:return"string"}}}]),n}();return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),Ck=function(){var a=function(){function n(t,e){(0,p.Z)(this,n),this.rulesParser=t,this.inlineContextResolver=e}return(0,_.Z)(n,[{key:"evaluate",value:function(e){var o=this;return this.inlineContextResolver.resolveMerged(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],"rules:".concat(fr())).pipe((0,kn.q)(1),(0,Ce.U)(function(u){return[(0,b.Z)({},u),new qd.Engine]}),(0,ee.b)(function(u){var m=(0,g.Z)(u,2)[1],C=o.rulesParser.toEngineRule(e);m.addRule(C)}),(0,st.w)(function(u){var c=(0,g.Z)(u,2),l=c[0],m=c[1];return new W.y(function(C){m.run(l).then(function(T){C.next(T.events.findIndex(function(B){return"visible"===B.type})>-1),C.complete()})})}))}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(EO),r.\u0275\u0275inject(Gd))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}();function Jo(a){if(null==a)throw new TypeError("Cannot destructure "+a)}S(61562);var wk=S(37400),PO=S(89984),Sk=function(n){var s=n.method,c=n.path,m=n.port,T=n.protocol,U=n.service,ae=n.cognitoSettings,ue=n.authFacade;return(0,je.of)(new ir({body:n.body,headers:n.headers,hostname:n.hostname,method:void 0===s?"GET":s,path:void 0===c?"/":c,port:void 0===m?443:m,protocol:void 0===T?"https:":T,query:n.query})).pipe((0,ee.b)(function(){return console.log(".marker({ event: BEGIN , context: s3, entity: sig , op: signv4 , meta: {  } })")}),(0,st.w)(function(me){return(0,wk.D)(new wp({credentials:aP({client:new kP({region:ae.region}),identityPoolId:ae.identityPoolId,logins:(0,d.Z)({},"cognito-idp.".concat(ae.region,".amazonaws.com/").concat(ae.userPoolId),function(){return Rl(ue.getUser$.pipe((0,Ce.U)(function(we){return we?we.id_token:void 0})))})}),region:ae.region,service:U,sha256:PO.Sha256}).sign(me).then(function(Se){return console.log(".marker({ event: RESOLVED, entity: s3 , op: signv4 , meta: {  } })"),Se})).pipe((0,ee.b)(function(){return console.log(".marker({ /s3/sign/after/sig })")}),(0,kn.q)(1))}),(0,Ce.U)(function(me){return me}),(0,ee.b)(function(){return console.log(".marker({ event: END , context: s3, entity: sig , op: signv4 , meta: {  } })")}))},U$=function(){var a=(0,_.Z)(function n(t,e,o,s,u,c,l){(0,p.Z)(this,n),o.register(function(n,t,e,o,s,u){return new Kd({id:"aws_s3_entity",title:"AWS S3 Entity",create:function(l){var m=l.object,C=l.identity,T=l.params,B=l.parentObject;return(0,je.of)({success:!1}).pipe(o.resolveParams({params:T}),(0,st.w)(function(F){var U=F.options;return C({object:m,parentObject:B}).pipe((0,Ce.U)(function(ae){return{identity:ae.identity,options:U}}))}),(0,st.w)(function(F){var U=F.options,ae=F.identity;return Sk({method:"PUT",body:JSON.stringify(m),headers:{"Content-Type":"application/json",host:"".concat(U.bucket,".s3.amazonaws.com")},hostname:"".concat(U.bucket,".s3.amazonaws.com"),path:"".concat(U.prefix).concat(ae,".json"),protocol:"https:",service:"s3",cognitoSettings:e,authFacade:t}).pipe((0,Ce.U)(function(ue){return{signedHttpRequest:ue,options:U}}))}),(0,ee.b)(function(F){return delete F.signedHttpRequest.headers.host}),(0,Ce.U)(function(F){var U=F.signedHttpRequest,ae=F.options;return{signedHttpRequest:U,options:ae,url:"https://".concat(ae.bucket,".s3.amazonaws.com").concat(U.path)}}),(0,st.w)(function(F){var U=F.signedHttpRequest;return s.put(F.url,JSON.stringify(m),{headers:U.headers,withCredentials:!1})}),(0,Ce.U)(function(){return{success:!0}}))},read:function(l){return Jo(l),(0,je.of)({success:!1})},update:function(l){var m=l.object,C=l.identity,T=l.params;return(0,je.of)({success:!1}).pipe(o.resolveParams({params:T}),(0,st.w)(function(B){var F=B.options;return C({object:m}).pipe((0,Ce.U)(function(U){return{identity:U.identity,options:F}}))}),(0,st.w)(function(B){var F=B.options,U=B.identity;return Sk({method:"PUT",body:JSON.stringify(m),headers:{"Content-Type":"application/json",host:"".concat(F.bucket,".s3.amazonaws.com")},hostname:"".concat(F.bucket,".s3.amazonaws.com"),path:"".concat(F.prefix).concat(U,".json"),protocol:"https:",service:"s3",cognitoSettings:e,authFacade:t}).pipe((0,Ce.U)(function(ae){return{signedHttpRequest:ae,options:F}}))}),(0,ee.b)(function(B){return delete B.signedHttpRequest.headers.host}),(0,Ce.U)(function(B){var F=B.signedHttpRequest,U=B.options;return{signedHttpRequest:F,options:U,url:"https://".concat(U.bucket,".s3.amazonaws.com").concat(F.path)}}),(0,st.w)(function(B){var F=B.signedHttpRequest;return s.put(B.url,JSON.stringify(m),{headers:F.headers,withCredentials:!1})}),(0,Ce.U)(function(){return{success:!0}}))},delete:function(l){return Jo(l),(0,je.of)({success:!1})},query:function(l){var m=l.rule,C=l.params;return(0,je.of)({entities:[],success:!1}).pipe(o.resolveParams({params:C}),(0,Ce.U)(function(T){return{options:T.options,identityCondition:m.conditions.all.map(function(F){return F.any.find(function(U){return"identity"===U.fact})}).find(function(F){return!!F})}}),(0,st.w)(function(T){var B=T.identityCondition,F=T.options;return Or(function(){return void 0!==B&&B&&"identity"===B.fact&&F&&F.bucket},Sk({method:"GET",body:void 0,headers:{"Content-Type":"application/json",host:"".concat(F?F.bucket:"",".s3.amazonaws.com")},hostname:"".concat(F?F.bucket:"",".s3.amazonaws.com"),path:"".concat(F&&F.prefix?F.prefix:"").concat(B?B.value:"",".json"),protocol:"https:",service:"s3",cognitoSettings:e,authFacade:t}).pipe((0,ee.b)(function(){return console.log(".marker({ event: AFTER , entity: s3 , op: query , meta: { action: createSignedRequest } })")}),(0,ee.b)(function(U){return delete U.headers.host}),(0,Ce.U)(function(U){return{signedHttpRequest:U,options:F,url:"https://".concat(F.bucket,".s3.amazonaws.com").concat(U.path)}}),(0,ee.b)(function(){return console.log(".marker({ event: BEFORE , entity: crud , op: query , meta: { http: get } })")}),(0,st.w)(function(U){return s.get(U.url,{headers:U.signedHttpRequest.headers,withCredentials:!1})}),(0,ee.b)(function(){return console.log(".marker({ event: AFTER , entity: s3 , op: query , meta: { http: get } })")}),(0,Ce.U)(function(U){return{entities:U?[U]:[],success:!!U}})),(0,je.of)({entities:[],success:!1}))}))}})}(0,s,t,u,c))});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Dl),r.\u0275\u0275inject(r.PLATFORM_ID),r.\u0275\u0275inject(Pu),r.\u0275\u0275inject(li),r.\u0275\u0275inject(Ts),r.\u0275\u0275inject(O.HttpClient),r.\u0275\u0275inject(Nn.AsyncApiCallHelperService))},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({imports:[Nn.UtilsModule,ua,oy]}),a}(),_E=function(n){var s=n.method,c=n.path,m=n.port,T=n.protocol,U=n.service,ae=n.cognitoSettings,ue=n.authFacade;return(0,je.of)(new ir({body:n.body,headers:n.headers,hostname:n.hostname,method:void 0===s?"GET":s,path:void 0===c?"/":c,port:void 0===m?443:m,protocol:void 0===T?"https:":T,query:n.query})).pipe((0,ee.b)(function(){return console.log(".marker({ event: BEGIN , context: os, entity: sig , op: signv4 , meta: {  } })")}),(0,st.w)(function(me){return(0,wk.D)(new wp({credentials:aP({client:new kP({region:ae.region}),identityPoolId:ae.identityPoolId,logins:(0,d.Z)({},"cognito-idp.".concat(ae.region,".amazonaws.com/").concat(ae.userPoolId),function(){return Rl(ue.getUser$.pipe((0,Ce.U)(function(we){return we?we.id_token:void 0})))})}),region:ae.region,service:U,sha256:PO.Sha256,applyChecksum:!1}).sign(me).then(function(Se){return console.log(".marker({ event: RESOLVED, entity: os , op: signv4 , meta: {  } })"),Se})).pipe((0,ee.b)(function(){return console.log(".marker({ /os/sign/after/sig })")}),(0,kn.q)(1))}),(0,Ce.U)(function(me){return me}),(0,ee.b)(function(){return console.log(".marker({ event: END , context: os, entity: sig , op: signv4 , meta: {  } })")}))},V$=function(){var a=(0,_.Z)(function n(t,e,o,s,u,c){(0,p.Z)(this,n),o.register(function(n,t,e,o,s){return new Kd({id:"aws_opensearch_template",title:"AWS Opensearch Template",create:function(c){return(0,je.of)({success:!1})},read:function(c){return Jo(c),(0,je.of)({success:!1})},update:function(c){return(0,je.of)({success:!1})},delete:function(c){return Jo(c),(0,je.of)({success:!1})},query:function(c){var l=c.rule,m=c.params;return(0,je.of)({entities:[],success:!1}).pipe((0,st.w)(function(){return m&&0!==Object.keys(m).length?(0,Un.D)(Object.keys(m).map(function(C){return o.paramValue(m[C],new Map).pipe((0,Ce.U)(function(T){return(0,d.Z)({},C,T)}))})).pipe((0,Ce.U)(function(C){return C.reduce(function(T,B){return(0,b.Z)((0,b.Z)({},T),B)},{})}),(0,Ce.U)(function(C){return{options:C}})):(0,je.of)({options:{}})}),(0,Ce.U)(function(C){var T=C.options;return{options:T,body:JSON.stringify({id:T.id,params:l?l.conditions.all.reduce(function(B,F){return(0,b.Z)((0,b.Z)({},B),F.any.reduce(function(U,ae){return(0,b.Z)((0,b.Z)({},U),{},(0,d.Z)({},ae.path.substr(2),[].concat((0,y.Z)(U[ae.path.substr(2)]?U[ae.path.substr(2)]:[]),[JSON.parse(decodeURIComponent(ae.value))])))},{}))},{}):{}})}}),(0,ee.b)(function(C){return console.log("open search template query body",C.body)}),(0,st.w)(function(C){var T=C.options;return _E({method:"POST",body:C.body,headers:{"Content-Type":"application/json",host:"".concat(T.domain,".").concat(T.region,".es.amazonaws.com")},hostname:"".concat(T.domain,".").concat(T.region,".es.amazonaws.com"),path:"/".concat(T.index,"/_search/template"),protocol:"https:",service:"es",cognitoSettings:e,authFacade:t}).pipe((0,Ce.U)(function(F){return{signedHttpRequest:F,options:T}}))}),(0,st.w)(function(C){var T=C.signedHttpRequest,B=C.options;delete T.headers.host;var F="https://".concat(B.domain,".").concat(B.region,".es.amazonaws.com/").concat(B.index,"/_search/template");return s.post(F,T.body,{headers:T.headers,withCredentials:!1}).pipe((0,Ce.U)(function(U){return{res:U,options:B}}))}),(0,Ce.U)(function(C){var T=C.res,B=C.options;return{entities:B.hits&&T&&T.hits&&T.hits.hits?T.hits.hits.map(function(F){return B.source?F._source:F}):[T],success:!0}}))}})}(0,s,t,u,c)),o.register(function(n,t,e,o){return new Kd({id:"aws_opensearch_entity",title:"AWS Opensearch Entity",create:function(u){var c=u.object,l=u.identity,m=u.params,C=u.parentObject;return(0,je.of)({success:!1}).pipe(e.resolveParams({params:m}),(0,st.w)(function(T){var B=T.options;return l({object:c,parentObject:C}).pipe((0,Ce.U)(function(F){return{identity:F.identity,options:B}}))}),(0,st.w)(function(T){var B=T.options,F=T.identity;return _E((0,b.Z)((0,b.Z)({method:"PUT",body:JSON.stringify(c),headers:{"Content-Type":"application/json",host:"".concat(B.domain,".").concat(B.region,".es.amazonaws.com")},hostname:"".concat(B.domain,".").concat(B.region,".es.amazonaws.com"),path:"/".concat(B.index,"/_doc/").concat(F),protocol:"https:",service:"es"},(0,b.Z)({},B.pipeline?{query:{pipeline:B.pipeline}}:{})),{},{cognitoSettings:t,authFacade:n})).pipe((0,Ce.U)(function(U){return{signedHttpRequest:U,options:B,identity:F}}))}),(0,st.w)(function(T){var B=T.signedHttpRequest,F=T.options,U=T.identity;delete B.headers.host;var ae="https://".concat(F.domain,".").concat(F.region,".es.amazonaws.com/").concat(F.index,"/_doc/").concat(U);return o.put(ae,JSON.stringify(c),{headers:B.headers,withCredentials:!1,params:(0,b.Z)({},F.pipeline?{pipeline:F.pipeline}:{})}).pipe((0,Ce.U)(function(ue){return{res:ue,options:F}}))}),(0,Ce.U)(function(){return{success:!0}}))},read:function(u){return Jo(u),(0,je.of)({success:!1})},update:function(u){var c=u.object,l=u.identity,m=u.params,C=u.parentObject;return(0,je.of)({success:!1}).pipe(e.resolveParams({params:m}),(0,st.w)(function(T){var B=T.options;return l({object:c,parentObject:C}).pipe((0,Ce.U)(function(F){return{identity:F.identity,options:B}}))}),(0,st.w)(function(T){var B=T.options,F=T.identity;return _E((0,b.Z)((0,b.Z)({method:"PUT",body:JSON.stringify(c),headers:{"Content-Type":"application/json",host:"".concat(B.domain,".").concat(B.region,".es.amazonaws.com")},hostname:"".concat(B.domain,".").concat(B.region,".es.amazonaws.com"),path:"/".concat(B.index,"/_doc/").concat(F),protocol:"https:",service:"es"},(0,b.Z)({},B.pipeline?{query:{pipeline:B.pipeline}}:{})),{},{cognitoSettings:t,authFacade:n})).pipe((0,Ce.U)(function(U){return{signedHttpRequest:U,options:B,identity:F}}))}),(0,st.w)(function(T){var B=T.signedHttpRequest,F=T.options,U=T.identity;delete B.headers.host;var ae="https://".concat(F.domain,".").concat(F.region,".es.amazonaws.com/").concat(F.index,"/_doc/").concat(U);return o.put(ae,JSON.stringify(c),{headers:B.headers,withCredentials:!1,params:(0,b.Z)({},F.pipeline?{pipeline:F.pipeline}:{})}).pipe((0,Ce.U)(function(ue){return{res:ue,options:F}}))}),(0,Ce.U)(function(){return{success:!0}}))},delete:function(u){return Jo(u),(0,je.of)({success:!1})},query:function(u){var c=u.rule,l=u.params;return(0,je.of)({entities:[],success:!1}).pipe((0,ee.b)(function(){console.log("crud open search query",c,l)}),e.resolveParams({params:l}),(0,Ce.U)(function(m){return{options:m.options,identityCondition:c.conditions.all.map(function(T){return T.any.find(function(B){return"identity"===B.fact})}).find(function(T){return!!T})}}),(0,st.w)(function(m){var C=m.options,T=m.identityCondition;return _E({method:"GET",headers:{"Content-Type":"application/json",host:"".concat(C.domain,".").concat(C.region,".es.amazonaws.com")},hostname:"".concat(C.domain,".").concat(C.region,".es.amazonaws.com"),path:"/".concat(C.index,"/_doc/").concat(T?T.value:""),protocol:"https:",service:"es",cognitoSettings:t,authFacade:n}).pipe((0,ee.b)(function(){return console.log(".marker({ event: AFTER , entity: opensearch , op: query , meta: { action: createSignedRequest } })")}),(0,ee.b)(function(B){return delete B.headers.host}),(0,Ce.U)(function(B){return{signedHttpRequest:B,options:C,url:"https://".concat(C.domain,".").concat(C.region,".es.amazonaws.com").concat(B.path)}}),(0,ee.b)(function(){return console.log(".marker({ event: BEFORE , entity: crud , op: query , meta: { http: get } })")}),(0,st.w)(function(B){return o.get(B.url,{headers:B.signedHttpRequest.headers,withCredentials:!1}).pipe((0,ti.K)(function(){return(0,je.of)(void 0)}))}),(0,ee.b)(function(){return console.log(".marker({ event: AFTER , entity: opensearch , op: query , meta: { http: get } })")}),(0,Ce.U)(function(B){return{entities:B?[B._source]:[],success:!!B}}))}))}})}(s,t,u,c))});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Dl),r.\u0275\u0275inject(r.PLATFORM_ID),r.\u0275\u0275inject(Pu),r.\u0275\u0275inject(li),r.\u0275\u0275inject(Ts),r.\u0275\u0275inject(O.HttpClient))},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({imports:[ua,oy]}),a}(),Ms=S(64567),H$=S(81382),ay=S(42375),q$=Object.prototype.toString;var AO=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")},yE=function(){function a(n,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}return function(n,t,e){return t&&a(n.prototype,t),e&&a(n,e),n}}();function RO(a){return a.split("").map(function(n){return"(?:"+n.toUpperCase()+"|"+n.toLowerCase()+")"}).join("")}function Wd(a,n){for(var t=a.length-1;t>=0;t--)a[t]===n&&Array.prototype.splice.call(a,t,1)}function K$(a,n){return Object.prototype.hasOwnProperty.call(a,n)}var Ek={},DO=function(){function a(){AO(this,a),this.plurals=[],this.singulars=[],this.uncountables=[],this.humans=[],this.acronyms={},this.acronymRegex=/(?=a)b/}return yE(a,null,[{key:"getInstance",value:function(t){return Ek[t]=Ek[t]||new a,Ek[t]}}]),yE(a,[{key:"acronym",value:function(t){this.acronyms[t.toLowerCase()]=t;var e=[];for(var o in this.acronyms)K$(this.acronyms,o)&&e.push(this.acronyms[o]);this.acronymRegex=new RegExp(e.join("|"))}},{key:"plural",value:function(t,e){"string"==typeof t&&Wd(this.uncountables,t),Wd(this.uncountables,e),this.plurals.unshift([t,e])}},{key:"singular",value:function(t,e){"string"==typeof t&&Wd(this.uncountables,t),Wd(this.uncountables,e),this.singulars.unshift([t,e])}},{key:"irregular",value:function(t,e){Wd(this.uncountables,t),Wd(this.uncountables,e);var o=t[0],s=t.substr(1),u=e[0],c=e.substr(1);if(o.toUpperCase()===u.toUpperCase())this.plural(new RegExp("("+o+")"+s+"$","i"),"$1"+c),this.plural(new RegExp("("+u+")"+c+"$","i"),"$1"+c),this.singular(new RegExp("("+o+")"+s+"$","i"),"$1"+s),this.singular(new RegExp("("+u+")"+c+"$","i"),"$1"+s);else{var l=RO(s),m=RO(c);this.plural(new RegExp(o.toUpperCase()+l+"$"),u.toUpperCase()+c),this.plural(new RegExp(o.toLowerCase()+l+"$"),u.toLowerCase()+c),this.plural(new RegExp(u.toUpperCase()+m+"$"),u.toUpperCase()+c),this.plural(new RegExp(u.toLowerCase()+m+"$"),u.toLowerCase()+c),this.singular(new RegExp(o.toUpperCase()+l+"$"),o.toUpperCase()+s),this.singular(new RegExp(o.toLowerCase()+l+"$"),o.toLowerCase()+s),this.singular(new RegExp(u.toUpperCase()+m+"$"),o.toUpperCase()+s),this.singular(new RegExp(u.toLowerCase()+m+"$"),o.toLowerCase()+s)}}},{key:"uncountable",value:function(){for(var t=arguments.length,e=Array(t),o=0;o<t;o++)e[o]=arguments[o];this.uncountables=this.uncountables.concat(e)}},{key:"human",value:function(t,e){this.humans.unshift([t,e])}},{key:"clear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";"all"===t?(this.plurals=[],this.singulars=[],this.uncountables=[],this.humans=[]):this[t]=[]}}]),a}(),TO={en:function W$(a){a.plural(/$/,"s"),a.plural(/s$/i,"s"),a.plural(/^(ax|test)is$/i,"$1es"),a.plural(/(octop|vir)us$/i,"$1i"),a.plural(/(octop|vir)i$/i,"$1i"),a.plural(/(alias|status)$/i,"$1es"),a.plural(/(bu)s$/i,"$1ses"),a.plural(/(buffal|tomat)o$/i,"$1oes"),a.plural(/([ti])um$/i,"$1a"),a.plural(/([ti])a$/i,"$1a"),a.plural(/sis$/i,"ses"),a.plural(/(?:([^f])fe|([lr])f)$/i,"$1$2ves"),a.plural(/(hive)$/i,"$1s"),a.plural(/([^aeiouy]|qu)y$/i,"$1ies"),a.plural(/(x|ch|ss|sh)$/i,"$1es"),a.plural(/(matr|vert|ind)(?:ix|ex)$/i,"$1ices"),a.plural(/^(m|l)ouse$/i,"$1ice"),a.plural(/^(m|l)ice$/i,"$1ice"),a.plural(/^(ox)$/i,"$1en"),a.plural(/^(oxen)$/i,"$1"),a.plural(/(quiz)$/i,"$1zes"),a.singular(/s$/i,""),a.singular(/(ss)$/i,"$1"),a.singular(/(n)ews$/i,"$1ews"),a.singular(/([ti])a$/i,"$1um"),a.singular(/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)(sis|ses)$/i,"$1sis"),a.singular(/(^analy)(sis|ses)$/i,"$1sis"),a.singular(/([^f])ves$/i,"$1fe"),a.singular(/(hive)s$/i,"$1"),a.singular(/(tive)s$/i,"$1"),a.singular(/([lr])ves$/i,"$1f"),a.singular(/([^aeiouy]|qu)ies$/i,"$1y"),a.singular(/(s)eries$/i,"$1eries"),a.singular(/(m)ovies$/i,"$1ovie"),a.singular(/(x|ch|ss|sh)es$/i,"$1"),a.singular(/^(m|l)ice$/i,"$1ouse"),a.singular(/(bus)(es)?$/i,"$1"),a.singular(/(o)es$/i,"$1"),a.singular(/(shoe)s$/i,"$1"),a.singular(/(cris|test)(is|es)$/i,"$1is"),a.singular(/^(a)x[ie]s$/i,"$1xis"),a.singular(/(octop|vir)(us|i)$/i,"$1us"),a.singular(/(alias|status)(es)?$/i,"$1"),a.singular(/^(ox)en/i,"$1"),a.singular(/(vert|ind)ices$/i,"$1ex"),a.singular(/(matr)ices$/i,"$1ix"),a.singular(/(quiz)zes$/i,"$1"),a.singular(/(database)s$/i,"$1"),a.irregular("person","people"),a.irregular("man","men"),a.irregular("child","children"),a.irregular("sex","sexes"),a.irregular("move","moves"),a.irregular("zombie","zombies"),a.uncountable("equipment","information","rice","money","species","series","fish","sheep","jeans","police")}};function os(a,n){if(function kO(a){return"[object Function]"===q$.call(a)}(a)&&(n=a,a=null),a=a||"en",!n)return DO.getInstance(a);n(DO.getInstance(a))}for(var IO in TO)os(IO,TO[IO]);function FO(a){return function OO(a,n){var e,o,s,t=""+a;if(0===t.length)return t;var u=t.toLowerCase().match(/\b\w+$/);if(u&&os().uncountables.indexOf(u[0])>-1)return t;for(var c=0,l=n.length;c<l;c++)if(s=(e=n[c])[1],t.match(o=e[0])){t=t.replace(o,s);break}return t}(a,os(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en").plurals)}function MO(a){var n=null==a?"":String(a);return n.charAt(0).toUpperCase()+n.slice(1)}function Tc(a,n){null==n&&(n=!0);var t=""+a;return t=(t=n?t.replace(/^[a-z\d]*/,function(e){return os().acronyms[e]||MO(e)}):t.replace(new RegExp("^(?:"+os().acronymRegex.source+"(?=\\b|[A-Z_])|\\w)"),function(e){return e.toLowerCase()})).replace(/(?:_|(\/))([a-z\d]*)/gi,function(e,o,s,u,c){return o||(o=""),""+o+(os().acronyms[s]||MO(s))}),t}var BO={\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00c6:"AE",\u00c7:"C",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00d0:"D",\u00d1:"N",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O","\xd7":"x",\u00d8:"O",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00dd:"Y",\u00de:"Th",\u00df:"ss",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00e6:"ae",\u00e7:"c",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00f0:"d",\u00f1:"n",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00fd:"y",\u00fe:"th",\u00ff:"y",\u0100:"A",\u0101:"a",\u0102:"A",\u0103:"a",\u0104:"A",\u0105:"a",\u0106:"C",\u0107:"c",\u0108:"C",\u0109:"c",\u010a:"C",\u010b:"c",\u010c:"C",\u010d:"c",\u010e:"D",\u010f:"d",\u0110:"D",\u0111:"d",\u0112:"E",\u0113:"e",\u0114:"E",\u0115:"e",\u0116:"E",\u0117:"e",\u0118:"E",\u0119:"e",\u011a:"E",\u011b:"e",\u011c:"G",\u011d:"g",\u011e:"G",\u011f:"g",\u0120:"G",\u0121:"g",\u0122:"G",\u0123:"g",\u0124:"H",\u0125:"h",\u0126:"H",\u0127:"h",\u0128:"I",\u0129:"i",\u012a:"I",\u012b:"i",\u012c:"I",\u012d:"i",\u012e:"I",\u012f:"i",\u0130:"I",\u0131:"i",\u0132:"IJ",\u0133:"ij",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013a:"l",\u013b:"L",\u013c:"l",\u013d:"L",\u013e:"l",\u013f:"L",\u0140:"l",\u0141:"L",\u0142:"l",\u0143:"N",\u0144:"n",\u0145:"N",\u0146:"n",\u0147:"N",\u0148:"n",\u0149:"'n",\u014a:"NG",\u014b:"ng",\u014c:"O",\u014d:"o",\u014e:"O",\u014f:"o",\u0150:"O",\u0151:"o",\u0152:"OE",\u0153:"oe",\u0154:"R",\u0155:"r",\u0156:"R",\u0157:"r",\u0158:"R",\u0159:"r",\u015a:"S",\u015b:"s",\u015c:"S",\u015d:"s",\u015e:"S",\u015f:"s",\u0160:"S",\u0161:"s",\u0162:"T",\u0163:"t",\u0164:"T",\u0165:"t",\u0166:"T",\u0167:"t",\u0168:"U",\u0169:"u",\u016a:"U",\u016b:"u",\u016c:"U",\u016d:"u",\u016e:"U",\u016f:"u",\u0170:"U",\u0171:"u",\u0172:"U",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017a:"z",\u017b:"Z",\u017c:"z",\u017d:"Z",\u017e:"z",\u0410:"A",\u0411:"B",\u0412:"V",\u0413:"G",\u0414:"D",\u0415:"E",\u0401:"E",\u0416:"ZH",\u0417:"Z",\u0418:"I",\u0419:"J",\u041a:"K",\u041b:"L",\u041c:"M",\u041d:"N",\u041e:"O",\u041f:"P",\u0420:"R",\u0421:"S",\u0422:"T",\u0423:"U",\u0424:"F",\u0425:"KH",\u0426:"C",\u0427:"CH",\u0428:"SH",\u0429:"SHCH",\u042a:"",\u042b:"Y",\u042c:"",\u042d:"E",\u042e:"YU",\u042f:"YA",\u0430:"a",\u0431:"b",\u0432:"v",\u0433:"g",\u0434:"d",\u0435:"e",\u0451:"e",\u0436:"zh",\u0437:"z",\u0438:"i",\u0439:"j",\u043a:"k",\u043b:"l",\u043c:"m",\u043d:"n",\u043e:"o",\u043f:"p",\u0440:"r",\u0441:"s",\u0442:"t",\u0443:"u",\u0444:"f",\u0445:"kh",\u0446:"c",\u0447:"ch",\u0448:"sh",\u0449:"shch",\u044a:"",\u044b:"y",\u044c:"",\u044d:"e",\u044e:"yu",\u044f:"ya"},Pk={};function r7(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"mat-option",5),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&a){var t=n.index;r.\u0275\u0275property("value",t),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1("panel page | level: ",t,"")}}function o7(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"mat-form-field")(1,"mat-select",3),r.\u0275\u0275template(2,r7,2,2,"mat-option",4),r.\u0275\u0275pipe(3,"async"),r.\u0275\u0275elementEnd()()),2&a){var t=r.\u0275\u0275nextContext();r.\u0275\u0275advance(2),r.\u0275\u0275property("ngForOf",r.\u0275\u0275pipeBind1(3,1,t.panelPages$))}}function a7(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"mat-option",5),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&a){var t=n.index;r.\u0275\u0275property("value",t),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1("panel | ",t,"")}}function s7(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"mat-form-field")(1,"mat-select",6),r.\u0275\u0275template(2,a7,2,2,"mat-option",4),r.\u0275\u0275pipe(3,"async"),r.\u0275\u0275elementEnd()()),2&a){var t=r.\u0275\u0275nextContext();r.\u0275\u0275advance(2),r.\u0275\u0275property("ngForOf",r.\u0275\u0275pipeBind1(3,1,t.panels$))}}function u7(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"mat-option",5),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&a){var t=n.index;r.\u0275\u0275property("value",t),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1("pane | ",t,"")}}function c7(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"mat-form-field")(1,"mat-select",7),r.\u0275\u0275template(2,u7,2,2,"mat-option",4),r.\u0275\u0275pipe(3,"async"),r.\u0275\u0275elementEnd()()),2&a){var t=r.\u0275\u0275nextContext();r.\u0275\u0275advance(2),r.\u0275\u0275property("ngForOf",r.\u0275\u0275pipeBind1(3,1,t.panes$))}}function l7(a,n){if(1&a&&r.\u0275\u0275element(0,"druid-panels-panelpage-linkedlist",8),2&a){var t=r.\u0275\u0275nextContext();r.\u0275\u0275property("panelPages",t.nested)}}function d7(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"a",2),r.\u0275\u0275listener("click",function(){var u=r.\u0275\u0275restoreView(t).$implicit,c=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(c.onItemSelect(u.id))}),r.\u0275\u0275elementStart(1,"span",6),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd()()}if(2&a){var e=n.$implicit;r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate2("",e.title," [",e.id,"]")}}function f7(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"mat-nav-list"),r.\u0275\u0275template(1,d7,3,2,"a",5),r.\u0275\u0275pipe(2,"async"),r.\u0275\u0275elementEnd()),2&a){var t=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",r.\u0275\u0275pipeBind1(2,1,t.panels$))}}!function(){function a(){for(var n in AO(this,a),this.approximations={},BO)this.approximate(n,BO[n])}yE(a,null,[{key:"getInstance",value:function(t){return Pk[t]=Pk[t]||new a,Pk[t]}}]),yE(a,[{key:"approximate",value:function(t,e){this.approximations[t]=e}},{key:"transliterate",value:function(t,e){var o=this;return t.replace(/[^\u0000-\u007f]/g,function(s){return o.approximations[s]||e||"?"})}}])}();var h7=(0,_.Z)(function a(n){(0,p.Z)(this,a),n&&(this.openSearchDomain=n.openSearchDomain,this.s3Bucket=n.s3Bucket,this.objectsRootUrl=n.objectsRootUrl)}),ii=(0,_.Z)(function a(n){(0,p.Z)(this,a),this.gridItems=[],this.panels=[],this.contexts=[],this.rowSettings=[],this.entityPermissions=new ZO,n&&(this.id=n.id,this.layoutType=n.layoutType,this.displayType=n.displayType,this.name=n.name?n.name:void 0,this.title=n.title?n.title:void 0,this.site=n.site?n.site:void 0,this.userId=n.userId?n.userId:void 0,this.path=n.path?n.path:void 0,this.persistence=n.persistence?new Hd(n.persistence):void 0,this.interactions=n.interactions?new Rc(n.interactions):void 0,n.panels&&(this.panels=n.panels.map(function(t){return new Bs(t)})),n.gridItems&&(this.gridItems=n.gridItems.map(function(t){return new m7(t)})),n.contexts&&(this.contexts=n.contexts.map(function(t){return new co(t)})),n.layoutSetting&&(this.layoutSetting=new br(n.layoutSetting)),n.rowSettings&&Array.isArray(n.rowSettings)&&(this.rowSettings=n.rowSettings.map(function(t){return new br(t)})),n.entityPermissions&&(this.entityPermissions=new ZO(n.entityPermissions)),n.cssFile&&(this.cssFile=n.cssFile))}),Bs=(0,_.Z)(function a(n){(0,p.Z)(this,a),this.settings=[],this.panes=[],n&&(this.name=n.name?n.name:void 0,this.label=n.label?n.label:void 0,this.stylePlugin=n.stylePlugin,n.settings&&(this.settings=n.settings.map(function(t){return new Bt.AttributeValue(t)})),n.panes&&(this.panes=n.panes.map(function(t){return new Wr(t)})),n.columnSetting&&(this.columnSetting=new br(n.columnSetting)))}),Wr=(0,_.Z)(function a(n){(0,p.Z)(this,a),this.settings=[],this.locked=!1,this.contexts=[],n&&(this.name=n.name,this.label=n.label,this.contentPlugin=n.contentPlugin,this.locked=void 0!==n.locked&&n.locked,n.linkedPageId&&(this.linkedPageId=n.linkedPageId),void 0!==n.metadata&&(this.metadata=new Map((0,y.Z)(n.metadata))),void 0!==n.settings&&(this.settings=n.settings.map(function(t){return new Bt.AttributeValue(t)})),void 0!==n.contexts&&(this.contexts=n.contexts.map(function(t){return new co(t)})),void 0!==n.rule&&"string"!=typeof n.rule&&(this.rule=(0,b.Z)({},n.rule)),n.nestedPage&&(this.nestedPage=new ii(n.nestedPage)),n.resolvedContext&&(this.resolvedContext=(0,b.Z)({},n.resolvedContext)))}),m7=(0,_.Z)(function a(n){(0,p.Z)(this,a),n&&(this.cols=n.cols,this.rows=n.rows,this.x=n.x,this.y=n.y,this.weight=n.weight)}),br=(0,_.Z)(function a(n){(0,p.Z)(this,a),this.settings=[],n&&n.settings&&Array.isArray(n.settings)&&(this.settings=n.settings.map(function(t){return new Bt.AttributeValue(t)}))}),ZO=(0,_.Z)(function a(n){(0,p.Z)(this,a),this.readUserIds=[],this.writeUserIds=[],this.deleteUserIds=[],n&&(this.readUserIds=n.readUserIds?n.readUserIds.map(function(t){return t}):[],this.writeUserIds=n.writeUserIds?n.writeUserIds.map(function(t){return t}):[],this.deleteUserIds=n.deleteUserIds?n.deleteUserIds.map(function(t){return t}):[])}),yo=function(){var a=function(){function n(t){(0,p.Z)(this,n),this.attributeSerializer=t}return(0,_.Z)(n,[{key:"handleFile",value:function(e){return(0,je.of)()}},{key:"handlesType",value:function(e){return!1}},{key:"implementsRendererOverride",value:function(){return!1}},{key:"hasRendererOverride",value:function(e){return(0,je.of)(!1)}},{key:"isDynamic",value:function(e){return!1}},{key:"isData",value:function(e){return!1}},{key:"buildDynamicItems",value:function(e,o){return(0,je.of)([])}},{key:"fetchDynamicData",value:function(e,o){return(0,je.of)(new pr)}},{key:"getBindings",value:function(e,o){return(0,je.of)([])}},{key:"toObject",value:function(e){return(0,je.of)(this.attributeSerializer.deserializeAsObject(e))}},{key:"buildSettings",value:function(e){return this.attributeSerializer.serialize(e,"root").attributes}},{key:"fromPanes",value:function(e){var o=this;return e.map(function(s){return new Wr(o.attributeSerializer.deserialize(s))})}},{key:"wrapPanel",value:function(e){return new Bs({stylePlugin:void 0,settings:[],panes:e,columnSetting:new br})}},{key:"stateDefinition",value:function(e){return(0,je.of)({})}},{key:"editorOptions",value:function(e){return(0,je.of)(new fn.ContentPluginEditorOptions)}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Bt.AttributeSerializerService))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),g7=function(){var a=function(){function n(t,e){var o=this;(0,p.Z)(this,n),this.fb=t,this.panelHandler=e,this.panelPages$=new z.X([]),this.panels$=new z.X([]),this.panes$=new z.X([]),this.nested$=new z.X([]),this.formGroup=this.fb.group({panelPage:this.fb.control(void 0),panel:this.fb.control(void 0),pane:this.fb.control(void 0),nested:this.fb.control(void 0)}),this.panelPageSub=this.formGroup.get("panelPage").valueChanges.subscribe(function(s){o.panels$.next(new ii(o.panelPages$.value[s]).panels)}),this.panelSub=this.formGroup.get("panel").valueChanges.subscribe(function(s){o.panes$.next(new Bs(o.panels$.value[s]).panes)}),this.paneSub=this.formGroup.get("pane").valueChanges.pipe((0,Ce.U)(function(s){return o.panes$.value[s]}),(0,st.w)(function(s){return Or(function(){return"panel"===s.contentPlugin},o.panelHandler.toObject(s.settings),(0,je.of)(void 0))}),(0,Q.h)(function(s){return!!s})).subscribe(function(s){o.nested$.next([s])}),this.onTouched=function(){}}return(0,_.Z)(n,[{key:"panelPages",get:function(){return this.panelPages$.value&&Array.isArray(this.panelPages$.value)?this.panelPages$.value:[]},set:function(e){this.panelPages$.next(e)}},{key:"panels",get:function(){return this.panels$.value&&Array.isArray(this.panels$.value)?this.panels$.value:[]},set:function(e){this.panels$.next(e)}},{key:"panes",get:function(){return this.panes$.value&&Array.isArray(this.panes$.value)?this.panes$.value:[]},set:function(e){this.panes$.next(e)}},{key:"nested",get:function(){return this.nested$.value&&void 0!==typeof this.nested$.value&&this.nested$.value.length>0?(0,y.Z)(this.nested$.value):void 0}},{key:"writeValue",value:function(e){e&&this.formGroup.setValue(e,{emitEvent:!1})}},{key:"registerOnChange",value:function(e){this.formGroup.valueChanges.subscribe(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){e?this.formGroup.disable():this.formGroup.enable()}},{key:"validate",value:function(e){return this.formGroup.valid?null:{invalidForm:{valid:!1}}}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(v.QS),r.\u0275\u0275directiveInject(yo))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["druid-panels-panelpage-linkedlist"]],inputs:{panelPages:"panelPages",panels:"panels",panes:"panes"},features:[r.\u0275\u0275ProvidersFeature([{provide:v.JU,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0},{provide:v.Cf,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0}])],decls:5,vars:5,consts:[[3,"formGroup"],[4,"ngIf"],["formControlName","nested",3,"panelPages",4,"ngIf"],["required","","formControlName","panelPage"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["required","","formControlName","panel"],["required","","formControlName","pane"],["formControlName","nested",3,"panelPages"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"div",0),r.\u0275\u0275template(1,o7,4,3,"mat-form-field",1),r.\u0275\u0275template(2,s7,4,3,"mat-form-field",1),r.\u0275\u0275template(3,c7,4,3,"mat-form-field",1),r.\u0275\u0275template(4,l7,1,1,"druid-panels-panelpage-linkedlist",2),r.\u0275\u0275elementEnd()),2&t&&(r.\u0275\u0275property("formGroup",e.formGroup),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.panelPages.length>0),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.panels.length>0),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.panes.length>0),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.nested))},dependencies:[E.NgForOf,E.NgIf,v.JJ,v.JL,v.Q7,v.sg,v.u,bi.MatLegacyOption,En.MatLegacyFormField,Fi.MatLegacySelect,a,E.AsyncPipe],encapsulation:2}),a}(),v7=function(){var a=function(){function n(t,e,o,s,u,c){(0,p.Z)(this,n),this.siteName=t,this.bottomSheetRef=e,this.handler=o,this.dialog=s,this.fb=u,this.selectedIndex=0,this.panelPagesService=c.getEntityCollectionService("PanelPage"),this.panelPageListItemsService=c.getEntityCollectionService("PanelPageListItem")}return(0,_.Z)(n,[{key:"ngOnInit",value:function(){}},{key:"onNewSelect",value:function(){var e=this,o=fr(),s=new ii({id:void 0,layoutType:"split",displayType:"page",site:this.siteName,gridItems:[],panels:[],layoutSetting:new br,rowSettings:[]});this.panelFormGroup.get("panes").push(this.fb.group({contentPlugin:"panel",name:o,label:o,rule:new v.p4(""),settings:this.fb.array(this.handler.buildSettings(s).map(function(u){return e.convertToGroup(u)}))})),this.bottomSheetRef.dismiss()}},{key:"onLinkSelect",value:function(){this.selectedIndex=1,this.panels$=this.panelPageListItemsService.getWithQuery("site=".concat(encodeURIComponent(this.siteName)))}},{key:"onEmbedSelect",value:function(){var e=fr();this.panelFormGroup.get("panes").push(this.fb.group({contentPlugin:"panel",name:e,label:e,rule:new v.p4(""),locked:new v.p4(!0),settings:this.fb.array([])})),this.bottomSheetRef.dismiss()}},{key:"onItemSelect",value:function(e){var o=fr();this.panelFormGroup.get("panes").push(this.fb.group({contentPlugin:"panel",name:o,label:o,rule:new v.p4(""),linkedPageId:new v.p4(e,v.kI.required),locked:new v.p4(!0),settings:this.fb.array([])})),this.bottomSheetRef.dismiss()}},{key:"convertToGroup",value:function(e){var o=this,s=this.fb.group({name:new v.p4(e.name,v.kI.required),type:new v.p4(e.type,v.kI.required),displayName:new v.p4(e.displayName,v.kI.required),value:new v.p4(e.value,v.kI.required),computedValue:new v.p4(e.value,v.kI.required),attributes:new v.vC([])});return e.attributes&&e.attributes.length>0&&e.attributes.forEach(function(u){s.get("attributes").push(o.convertToGroup(u))}),s}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Nn.SITE_NAME),r.\u0275\u0275directiveInject(Dc.MatBottomSheetRef),r.\u0275\u0275directiveInject(yo),r.\u0275\u0275directiveInject(Jt.MatLegacyDialog),r.\u0275\u0275directiveInject(v.QS),r.\u0275\u0275directiveInject(Dr))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-panel-selector"]],inputs:{panelFormGroup:"panelFormGroup"},decls:11,vars:1,consts:[["mat-align-tabs","start",3,"selectedIndex"],["label","Type"],["mat-list-item","","mat-list-item","",3,"click"],["label","Search"],["matTabContent",""],["mat-list-item","","mat-list-item","",3,"click",4,"ngFor","ngForOf"],["mat-line",""]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"mat-tab-group",0)(1,"mat-tab",1)(2,"mat-nav-list")(3,"a",2),r.\u0275\u0275listener("click",function(){return e.onNewSelect()}),r.\u0275\u0275text(4,"New Panel"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(5,"a",2),r.\u0275\u0275listener("click",function(){return e.onLinkSelect()}),r.\u0275\u0275text(6,"Link Panel"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(7,"a",2),r.\u0275\u0275listener("click",function(){return e.onEmbedSelect()}),r.\u0275\u0275text(8,"Embed Panel"),r.\u0275\u0275elementEnd()()(),r.\u0275\u0275elementStart(9,"mat-tab",3),r.\u0275\u0275template(10,f7,3,3,"ng-template",4),r.\u0275\u0275elementEnd()()),2&t&&r.\u0275\u0275property("selectedIndex",e.selectedIndex)},dependencies:[E.NgForOf,vE.MatLine,Eu.MatLegacyNavList,Eu.MatLegacyListItem,is.MatLegacyTabGroup,is.MatLegacyTab,is.MatLegacyTabContent,E.AsyncPipe]}),a}(),_7=function(){var a=function(){function n(){(0,p.Z)(this,n)}return(0,_.Z)(n,[{key:"ngOnInit",value:function(){}}]),n}();return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-panel-editor"]],decls:2,vars:0,template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"p"),r.\u0275\u0275text(1,"panel-editor works!"),r.\u0275\u0275elementEnd())}}),a}(),as=(0,_.Z)(function a(n){(0,p.Z)(this,a),this.panels=[],n&&(this.id=n.id,void 0!==n.panels&&Array.isArray(n.panels)&&(this.panels=n.panels.map(function(t){return new Ic(t)})))}),Ic=(0,_.Z)(function a(n){(0,p.Z)(this,a),this.panes=[],n&&void 0!==n.panes&&Array.isArray(n.panes)&&(this.panes=n.panes.map(function(t){return new Yo(t)}))}),Yo=(0,_.Z)(function a(n){(0,p.Z)(this,a),n&&(void 0!==n.state&&(this.state=new Bt.AttributeValue(n.state)),null!=n.nestedPage&&(this.nestedPage=new as(n.nestedPage)))}),kk=function(){var a=function(){function n(t,e,o,s,u,c){(0,p.Z)(this,n),this.siteName=t,this.panelHandler=e,this.attributeSerializer=o,this.rulesResolver=s,this.dpm=u,this.datasourceEvalutator=c}return(0,_.Z)(n,[{key:"handleFile",value:function(e){return(0,je.of)([])}},{key:"handlesType",value:function(e){return!1}},{key:"implementsRendererOverride",value:function(){return!0}},{key:"hasRendererOverride",value:function(e){return(0,je.of)(!1)}},{key:"isDynamic",value:function(e){return!0}},{key:"isData",value:function(e){return!0}},{key:"fetchDynamicData",value:function(e,o){var s=this,u=o.has("dataPanes")?new Map(o.get("dataPanes").map(function(l){return[l.name,l]})):new Map([]),c=new Map(Array.from(u).map(function(l){var m=(0,g.Z)(l,2);return[m[0],new Pc(s.attributeSerializer.deserializeAsObject(m[1].settings))]}));return this.toObject(e).pipe((0,st.w)(function(l){return s.datasourceEvalutator.evalDatasource({datasource:l,metadata:o,datasources:c})}))}},{key:"buildDynamicItems",value:function(e,o){var s=this,u=new Map(o.get("dataPanes").map(function(c){return[c.name,c]}));return this.fetchDynamicData(e,o).pipe((0,st.w)(function(c){return s.toObject(e).pipe((0,Ce.U)(function(l){return[l,c]}))}),(0,st.w)(function(c){var l=(0,g.Z)(c,2),m=l[0],C=l[1];return s.getBindings(e,"pane").pipe((0,Ce.U)(function(T){return[m,C,T]}))}),(0,st.w)(function(c){var l=(0,g.Z)(c,3),m=l[0],C=l[1],T=l[2];return Or(function(){return 0!==C.results.length&&T.length>0},(0,Un.D)(C.results.map(function(B){return(0,Un.D)(T.filter(function(F){return!u.has(F.id)}).map(function(F){return(0,je.of)(o.get("panes").find(function(U){return U.name===F.id})).pipe((0,st.w)(function(U){return Or(function(){return U&&U.rule&&null!==U.rule&&""!==U.rule.condition},U?s.rulesResolver.evaluate(U.rule,[].concat((0,y.Z)(o.get("contexts")),(0,y.Z)(void 0!==U.contexts?U.contexts:[]),[new co({name:"_root",adaptor:"data",data:B})])).pipe((0,Ce.U)(function(ae){return[U,ae]})):(0,je.of)([U,!1]),(0,je.of)(!1).pipe((0,Ce.U)(function(ae){return[U,ae]})))}),(0,Q.h)(function(U){return(0,g.Z)(U,2)[1]}),(0,Ce.U)(function(U){return(0,g.Z)(U,2)[0].name}),(0,hi.d)(F.id))})).pipe((0,Ce.U)(function(F){return F.reduce(function(U,ae){return[].concat((0,y.Z)(U),[ae])},[])}))})).pipe((0,Ce.U)(function(B){return[m,C,B]})),new W.y(function(B){B.next([m,C,[]]),B.complete()}))}),(0,Ce.U)(function(c){var l=(0,g.Z)(c,3),T=l[2];return l[1].results.reduce(function(B,F,U){return[].concat((0,y.Z)(B),(0,y.Z)(T[U]?T[U].map(function(ae){return new Wr((0,b.Z)((0,b.Z)({},o.get("panes").find(function(ue){return ue.name===ae})),{},{rule:void 0,label:fr(),contexts:[].concat((0,y.Z)(o.get("contexts")),[new co({name:"_root",adaptor:"data",data:F})])}))}):[]))},[])}),(0,Ce.U)(function(c){return new Bs({stylePlugin:void 0,settings:[],panes:c,columnSetting:new br})}),(0,Ce.U)(function(c){return s.panelHandler.buildSettings(new ii({id:void 0,layoutType:"grid",displayType:"page",site:s.siteName,gridItems:[],layoutSetting:new br,rowSettings:[],panels:[c]}))}),(0,Ce.U)(function(c){return c.find(function(l){return"panels"===l.name}).attributes[0].attributes.find(function(l){return"panes"===l.name}).attributes}))}},{key:"getBindings",value:function(e,o,s){var u=this,c=s?new Map(s.get("dataPanes").map(function(l){return[l.name,l]})):new Map;return"context"===o?this.toObject(e).pipe((0,Ce.U)(function(l){return[l,l.params?l.params.reduce(function(m,C){return[].concat((0,y.Z)(m),(0,y.Z)("form"===C.mapping.type?[new fn.ContentBinding({id:"form__".concat(C.mapping.value.split(".",2)[0].trim()),type:"context"})]:[]))},[]):[]]}),(0,st.w)(function(l){var C=(0,g.Z)(l,2)[0];return u.dpm.getPlugin(C.plugin).pipe((0,st.w)(function(B){return B.getBindings({settings:C.settings,metadata:s}).pipe((0,Ce.U)(function(F){return[C,F]}))}))}),(0,st.w)(function(l){var m=(0,g.Z)(l,2),T=m[1];return(0,Un.D)(m[0].renderer.bindings.reduce(function(B,F){return[].concat((0,y.Z)(B),(0,y.Z)(c.has(F.id)?[u.toObject(c.get(F.id).settings)]:[]))},[])).pipe((0,st.w)(function(B){return(0,Un.D)(B.map(function(F){return u.dpm.getPlugin(F.plugin).pipe((0,st.w)(function(U){return U.getBindings({settings:F.settings,metadata:s})}))})).pipe((0,Ce.U)(function(F){return F.reduce(function(U,ae){return[].concat((0,y.Z)(U),(0,y.Z)(ae))},T)}),(0,hi.d)(T))}),(0,hi.d)(T))})):this.toObject(e).pipe((0,st.w)(function(l){return Or(function(){return l.renderer.type===o},(0,je.of)(l.renderer.bindings),(0,je.of)([]))}))}},{key:"toObject",value:function(e){return(0,je.of)(this.attributeSerializer.deserializeAsObject(e))}},{key:"buildSettings",value:function(e){return this.attributeSerializer.serialize(e,"root").attributes}},{key:"getRenderType",value:function(e){var o=[e.find(function(s){return"renderer"===s.name})].map(function(s){return s.attributes.find(function(u){return"type"===u.name})});return o.length>0?o[0].value:void 0}},{key:"stateDefinition",value:function(e){return(0,je.of)({autocomplete:{input:""},loading:"y"})}},{key:"editorOptions",value:function(e){var o=this;return this.toObject(e).pipe((0,st.w)(function(s){return o.dpm.getPlugin(s&&s.plugin?s.plugin:"data").pipe((0,Ce.U)(function(u){return[s,u]}))}),(0,st.w)(function(s){var u=(0,g.Z)(s,2),c=u[0],l=u[1];return l.editorOptions?l.editorOptions({settings:c&&c.settings?c.settings:[]}):(0,je.of)(void 0)}),(0,Ce.U)(function(s){return new fn.ContentPluginEditorOptions({fullscreen:!!s&&s.fullscreen})}))}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Nn.SITE_NAME),r.\u0275\u0275inject(yo),r.\u0275\u0275inject(Bt.AttributeSerializerService),r.\u0275\u0275inject(Ck),r.\u0275\u0275inject(da),r.\u0275\u0275inject(aO))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),y7=function(){var a=function(){function n(t,e,o,s,u){(0,p.Z)(this,n),this.data=t,this.dialogRef=e,this.fb=o,this.attributeSerializer=s,this.datasourceHandler=u,this.datasource=new Pc,this.bindableOptions=[],this.contexts=[],this.formGroup=this.fb.group({source:this.fb.control("")})}return(0,_.Z)(n,[{key:"ngOnInit",value:function(){var e=this,o=this.data.panelFormGroup.get("panes");if(this.bindableOptions=o.controls.reduce(function(u,c){return c.get("name").value?[].concat((0,y.Z)(u),[c.get("name").value]):(0,y.Z)(u)},[]),this.contexts=this.data.contexts.map(function(u){return u.name}),void 0!==this.data.panelIndex&&this.data.paneIndex<o.length){var s=o.at(this.data.paneIndex).get("settings").value.map(function(u){return new Bt.AttributeValue(u)});this.datasourceHandler.toObject(s).subscribe(function(u){e.datasource=u})}}},{key:"onSubmit",value:function(){var e=this,o=this.attributeSerializer.serialize(this.formGroup.value.source,"source"),s=this.data.panelFormGroup.get("panes").at(this.data.paneIndex);void 0===this.data.paneIndex?(this.data.panelFormGroup.get("panes").push(this.fb.group({contentPlugin:"datasource",name:new v.p4(""),label:new v.p4(""),rule:new v.p4(""),settings:this.fb.array(o.attributes.map(function(u){return e.attributeSerializer.convertToGroup(u)}))})),console.log(this.data.panelFormGroup.get("panes").value)):(s.get("settings").clear(),o.attributes.forEach(function(u){return s.get("settings").push(e.attributeSerializer.convertToGroup(u))})),this.dialogRef.close()}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Jt.MAT_LEGACY_DIALOG_DATA),r.\u0275\u0275directiveInject(Jt.MatLegacyDialogRef),r.\u0275\u0275directiveInject(v.QS),r.\u0275\u0275directiveInject(Bt.AttributeSerializerService),r.\u0275\u0275directiveInject(kk))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-datasource-editor"]],decls:4,vars:4,consts:[[3,"formGroup","ngSubmit"],["formControlName","source",3,"bindableOptions","contexts","datasource"],["type","submit"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"form",0),r.\u0275\u0275listener("ngSubmit",function(){return e.onSubmit()}),r.\u0275\u0275element(1,"classifieds-ui-datasource-form",1),r.\u0275\u0275elementStart(2,"button",2),r.\u0275\u0275text(3,"Save"),r.\u0275\u0275elementEnd()()),2&t&&(r.\u0275\u0275property("formGroup",e.formGroup),r.\u0275\u0275advance(1),r.\u0275\u0275property("bindableOptions",e.bindableOptions)("contexts",e.contexts)("datasource",e.datasource))},dependencies:[v._Y,v.JJ,v.JL,v.sg,v.u,fk]}),a}(),x7=function(n){return new fn.ContentPlugin({id:"panel",title:"Panel",selectionComponent:v7,editorComponent:_7,renderComponent:void 0,handler:n})},b7=function(n){return new fn.ContentPlugin({id:"datasource",title:"Datasource",selectionComponent:void 0,editorComponent:y7,renderComponent:void 0,handler:n})},LO=(0,Zt.PH)("[PageBuilder] Load Rest Data",(0,Zt.Ky)()),jO=(0,Zt.PH)("[PageBuilder] Load Rest Data Success",(0,Zt.Ky)()),Ak=((0,Zt.PH)("[PageBuilder] Load Rest Data Error",(0,Zt.Ky)()),(0,Zt.PH)("[PageBuilder] Set Page Info",(0,Zt.Ky)())),$O=(0,Zt.PH)("[PageBuilder] Set Form",(0,Zt.Ky)()),Rk=(0,Zt.PH)("[PageBuilder] Set Page",(0,Zt.Ky)()),UO=(0,Zt.PH)("[PageBuilder] Selection Path",(0,Zt.Ky)()),w7=function(){var a=function(){function n(t,e,o){var s=this;(0,p.Z)(this,n),this.actions$=t,this.datasourceApi=e,this.snippetParserService=o,this.loadRestData$=_i(function(){return s.actions$.pipe(Ho(LO),(0,Li.b)(function(u){return s.fetchRestdata$(u.rest).pipe((0,ti.K)(function(){return[]}),(0,Ce.U)(function(c){return void 0!==u.rest.renderer&&void 0!==u.rest.renderer.query&&""!==u.rest.renderer.query?(0,Ms.JSONPath)({path:u.rest.renderer.query,json:c}):c}),(0,Ce.U)(function(c){return jO({tag:u.tag,data:new pr({results:c})})}))}))})}return(0,_.Z)(n,[{key:"fetchRestdata$",value:function(e){var o=this;switch(e.method?e.method:"get"){case"post":case"POST":return(0,je.of)([]).pipe((0,st.w)(function(){return o.snippetParserService.parseSnippet({snippet:e.body})}),(0,st.w)(function(u){return o.datasourceApi.postData({url:e.url,body:u})}));default:return this.datasourceApi.getData(e.url)}}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(na),r.\u0275\u0275inject(rO),r.\u0275\u0275inject(zI))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),uy=(0,_.Z)(function a(n){(0,p.Z)(this,a),n&&(this.id=n.id,this.path=n.path,this.realPath=n.realPath,this.args=n.args)}),zO="pageBuilder",E7=(0,Zt.Lq)({dataTags:[],datasets:[],pageInfo:void 0,formNames:[],forms:[],page:void 0,selectionPath:[]},(0,Zt.on)(jO,function(a,n){var t=a.dataTags.findIndex(function(o){return o===n.tag});if(t>-1&&void 0!==a.forms[t]){var e=(0,b.Z)({},a);return e.datasets[t].push(n.data),e}return(0,b.Z)((0,b.Z)({},a),{},{dataTags:[].concat((0,y.Z)(a.dataTags),[n.tag]),datasets:[].concat((0,y.Z)(a.datasets),[[n.data]])})}),(0,Zt.on)($O,function(a,n){var t=a.formNames.findIndex(function(e){return e===n.name});return(0,b.Z)((0,b.Z)({},a),{},t>-1&&void 0!==a.forms[t]?{forms:a.forms.map(function(e,o){return o===t?n.form:e})}:{formNames:[].concat((0,y.Z)(a.formNames),[n.name]),forms:[].concat((0,y.Z)(a.forms),[n.form])})}),(0,Zt.on)(Ak,function(a,n){return(0,b.Z)((0,b.Z)({},a),{},{pageInfo:void 0!==n.info?new uy(n.info):void 0})}),(0,Zt.on)(Rk,function(a,n){return(0,b.Z)((0,b.Z)({},a),{},{page:void 0!==n.page?new ii(n.page):void 0})}),(0,Zt.on)(UO,function(a,n){return(0,b.Z)((0,b.Z)({},a),{},{selectionPath:void 0!==n.path?n.path:[]})}));function P7(a,n){return E7(a,n)}var xE=new r.InjectionToken("StylePlugin"),GO=new r.InjectionToken("PanelsSettings"),Dk=function(){var a=(0,_.Z)(function n(t,e,o,s,u,c,l,m,C,T,B,F){(0,p.Z)(this,n);var U=function(n,t){return{PanelPageListItem:{entityName:"PanelPageListItem",crud:{idb_keyval:{params:{prefix:"panelpage__"},queryMappings:new Map([["site",{defaultOperator:"term||wildcard"}],["path",{defaultOperator:"term||wildcard"}]])}}},PanelPage:{entityName:"PanelPage",crud:(0,b.Z)((0,b.Z)({save:{ops:["create","update"],plugin:"rest",params:{entityName:"PanelPage"}}},(0,E.isPlatformServer)(n)?{}:{readPrimary:{fallback:!0,ops:["create","update","query"],plugin:"idb_keyval",params:{prefix:"panelpage__"}}}),{},{readFallback:{fallback:!0,ops:["query"],plugin:"rest",params:{entityName:"PanelPage",root:t.objectsRootUrl,suffix:".json"}}})},PanelPageState:{entityName:"PanelPageState"}}}(t,o);s.registerMetadataMap(U),c.registerService("PanelPageState",new Nn.NoopDataService("PanelPageState")),c.registerService("PanelPage",new bk("PanelPage",T,B,F)),c.registerService("PanelPageListItem",new bk("PanelPageListItem",T,B,F)),e.forEach(function(ae){return u.register(ae)}),l.register(function(n,t){return new ry({id:"panels",title:"Panels",build:function(){Ac.prototype.writePaneState=function(o,s){return new Promise(function(u){var c=n.getEntityCollectionService("PanelPageState");c.getByKey(o.id).pipe((0,ti.K)(function(){return(0,je.of)(new as({id:o.id,panels:[]}))}),(0,Ce.U)(function(l){return void 0===l?new as({id:o.id,panels:[]}):l}),(0,Ce.U)(function(l){for(var m=t.serialize(s,"root"),C=new as((0,b.Z)((0,b.Z)({},l),{},{panels:[]})),T=0;T<o.panelIndex+1;T++){C.panels.push(T<l.panels.length?new Ic((0,b.Z)((0,b.Z)({},l.panels[T]),{},{panes:[]})):new Ic);for(var B=0;B<o.paneIndex+1;B++)C.panels[T].panes.push(T===o.panelIndex&&B===o.paneIndex?new Yo(T<l.panels.length&&B<l.panels[T].panes.length?(0,b.Z)((0,b.Z)({},l.panels[T].panes[B]),{},{state:m}):{state:m}):T<l.panels.length&&B<l.panels[T].panes.length?new Yo((0,b.Z)({},l.panels[T].panes[B])):new Yo)}return C}),(0,st.w)(function(l){return c.upsert(l)})).subscribe(function(l){u(l)})})}}})}(m,C)),c.registerService("PanelPageForm",new bk("PanelPageForm",T,B,F))});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(r.PLATFORM_ID),r.\u0275\u0275inject(fn.CONTENT_PLUGIN),r.\u0275\u0275inject(GO),r.\u0275\u0275inject(Qi),r.\u0275\u0275inject(fn.ContentPluginManager),r.\u0275\u0275inject(oc),r.\u0275\u0275inject(zd),r.\u0275\u0275inject(Dr),r.\u0275\u0275inject(Bt.AttributeSerializerService),r.\u0275\u0275inject(Pu),r.\u0275\u0275inject(Qi),r.\u0275\u0275inject(iy))},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({providers:[{provide:yo,useClass:yo},{provide:fn.CONTENT_PLUGIN,useFactory:x7,multi:!0,deps:[yo]},{provide:fn.CONTENT_PLUGIN,useFactory:b7,multi:!0,deps:[kk]},{provide:uu,useClass:vl}],imports:[E.CommonModule,v.u5,v.UX,Zt.Aw.forFeature(zO,P7),au.forFeature([w7]),Oi.MaterialModule,kc,ua,U$,V$,oy]}),a}(),VO=(0,_.Z)(function a(n){(0,p.Z)(this,a),n&&(this.panelPage=n.panelPage,null!=n.panel&&(this.panel=n.panel),null!=n.pane&&(this.pane=n.pane),null!=n.nested&&"object"==typeof n.nested&&(this.nested=new a(n.nested)))}),HO=function(){var a=function(){function n(t){(0,p.Z)(this,n),this.controlContainer=t,this.savable=!0,this.nested=!1,this.dashboard=[],this.layoutSetting=new br,this.rowSettings=[],this.ancestory=[]}return(0,_.Z)(n,[{key:"gridItems",get:function(){return[]}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(v.gN))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-layout-editor-base"]],inputs:{savable:"savable",nested:"nested",editor:"editor",dashboard:"dashboard",layoutSetting:"layoutSetting",rowSettings:"rowSettings",columnSettings:"columnSettings",editablePaneTpl:"editablePaneTpl",extraActionsAreaTmpl:"extraActionsAreaTmpl",contextsMenuTpl:"contextsMenuTpl",ancestory:"ancestory"},decls:0,vars:0,template:function(t,e){},encapsulation:2}),a}(),qO=function(){var a=function(){function n(t){(0,p.Z)(this,n),this.controlContainer=t,this.displayMainControls=!1,this.displayItemHeader=!1}return(0,_.Z)(n,[{key:"columnSettings",get:function(){var e=this.panelPage?this.panelPage.panels.reduce(function(o,s){return[].concat((0,y.Z)(o),[new br(s.columnSetting)])},[]):[];return e}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(v.gN,8))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-layout-renderer-base"]],inputs:{panelPage:"panelPage",displayMainControls:"displayMainControls",displayItemHeader:"displayItemHeader",renderPanelTpl:"renderPanelTpl"},decls:0,vars:0,template:function(t,e){},encapsulation:2}),a}(),k7=function(){var a=function(){function n(){(0,p.Z)(this,n),this.settings=[],this.panes=[],this.originMappings=[],this.ancestory=[]}return(0,_.Z)(n,[{key:"mergeContexts",value:function(e){if(void 0!==e||void 0!==this.contexts)return void 0!==e&&void 0!==this.contexts?[].concat((0,y.Z)(e),(0,y.Z)(this.contexts)):void 0!==e?e:this.contexts}}]),n}();return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-panel-style-renderer-base"]],inputs:{settings:"settings",panes:"panes",originPanes:"originPanes",originMappings:"originMappings",contexts:"contexts",ancestory:"ancestory"},decls:0,vars:0,template:function(t,e){},encapsulation:2}),a}(),KO=function(){var a=function(){function n(t,e){(0,p.Z)(this,n),this.es=t,this.panelHandler=e}return(0,_.Z)(n,[{key:"panelPageService",get:function(){return this.es.getEntityCollectionService("PanelPage")}},{key:"reducePage",value:function(e){var o=this;return e.panels.reduce(function(s,u,c){return o.reducePanels(s,u,c)},[])}},{key:"reducePanels",value:function(e,o,s){var u=this;return[].concat((0,y.Z)(e),(0,y.Z)(o.panes.reduce(function(c,l,m){return u.reducePanes(c,l,m).map(function(C){return C.pipe((0,Ce.U)(function(T){var B=(0,g.Z)(T,2);return[s,B[0],B[1]]}))})},[])))}},{key:"reducePanes",value:function(e,o,s){return[].concat((0,y.Z)(e),(0,y.Z)("panel"===o.contentPlugin?[this.nestedPage$(o).pipe((0,Ce.U)(function(u){return[s,u]}))]:[]))}},{key:"nestedPage$",value:function(e){return console.log("get nested panel page"),e.linkedPageId&&""!==e.linkedPageId?this.getByKey(e.linkedPageId).pipe((0,ee.b)(function(){return console.log("get(".concat(e.linkedPageId,")"))})):this.getEmbedded(e.settings).pipe((0,ee.b)(function(){return console.log("toObject()")}))}},{key:"remapNested",value:function(e,o){o.forEach(function(s){var u=(0,g.Z)(s,3);e.panels[u[0]].panes[u[1]].nestedPage=u[2]})}},{key:"getByKey",value:function(e){var o=this;return this.panelPageService.getByKey(e).pipe((0,Ce.U)(function(s){return new ii(s)}),(0,st.w)(function(s){return Or(function(){return o.reducePage(s).length>0},(0,Un.D)(o.reducePage(s)).pipe((0,ee.b)(function(u){return o.remapNested(s,u)}),(0,Ce.U)(function(){return s})),(0,je.of)(s))}))}},{key:"getEmbedded",value:function(e){var o=this;return this.panelHandler.toObject(e).pipe((0,Ce.U)(function(s){return new ii(s)}),(0,st.w)(function(s){return Or(function(){return o.reducePage(s).length>0},(0,Un.D)(o.reducePage(s)).pipe((0,ee.b)(function(u){return o.remapNested(s,u)}),(0,Ce.U)(function(){return s})),(0,je.of)(s))}))}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Dr),r.\u0275\u0275inject(yo))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),A7=function(){var a=function(){function n(t){(0,p.Z)(this,n),this.panelHandler=t}return(0,_.Z)(n,[{key:"rebuildPage",value:function(e,o){return new ii((0,b.Z)((0,b.Z)({},e),{},{panels:this.rebuildPanels(e.panels,(0,y.Z)(o))}))}},{key:"rebuildPanels",value:function(e,o){var s=this;return e.filter(function(u,c){return s.rebuildCondition(o[0],c)}).map(function(u){return new Bs((0,b.Z)((0,b.Z)({},u),{},{panes:s.rebuildPanes(u.panes,o.slice(1))}))})}},{key:"rebuildPanes",value:function(e,o){var s=this;return e.filter(function(u,c){return s.rebuildCondition(o[0],c)}).map(function(u){return new Wr("panel"===u.contentPlugin?(0,b.Z)((0,b.Z)({},u),{},{nestedPage:void 0,settings:s.panelHandler.buildSettings(s.rebuildPage(u.nestedPage,o.slice(1)))}):(0,b.Z)({},u))})}},{key:"rebuildCondition",value:function(e,o){return 0===e||(e>-1?o===e+-1*e:o!==-1*e+e)}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(yo))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),R7=function(){var a=function(){function n(t){(0,p.Z)(this,n),this.panelHandler=t}return(0,_.Z)(n,[{key:"convertPageToState",value:function(e){var o=this;return(0,je.of)(new as).pipe((0,st.w)(function(){return(0,Un.D)(e.panels.map(function(s){return o.convertPanelToState(s)}))}),(0,Ce.U)(function(s){return new as({id:e.id,panels:s})}))}},{key:"convertPanelToState",value:function(e){var o=this;return(0,je.of)(new Ic).pipe((0,st.w)(function(){return(0,Un.D)(e.panes.map(function(s){return o.convertPaneToState(s)}))}),(0,Ce.U)(function(s){return new Ic({panes:s})}))}},{key:"convertPaneToState",value:function(e){var o=this;return(0,je.of)(new Yo).pipe((0,st.w)(function(s){return Or(function(){return o.hasNestedPanelPage(e)},o.panelHandler.toObject(e.settings).pipe((0,st.w)(function(u){return o.convertPageToState(u)}),(0,Ce.U)(function(u){return new Yo({state:new Bt.AttributeValue,nestedPage:u})})),(0,je.of)(s))}))}},{key:"hasNestedPanelPage",value:function(e){return"panel"===e.contentPlugin&&(null==e.linkedPageId||""===e.linkedPageId)}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(yo))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),D7=function(){var a=function(){function n(t){(0,p.Z)(this,n),this.panelsLoaderService=t}return(0,_.Z)(n,[{key:"walkPageHierarchy",value:function(e){var o=this,s=e.panelPage,u=e.visitorFunc,c=e.defaultv,l=e.ancestory;return new W.y(function(m){for(var C=s.panels.length,T=[],B=0;B<C;B++)for(var F=s.panels[B].panes.length,U=0;U<F;U++)T.push(u({pane:s.panels[B].panes[U],panelPage:s,ancestoryWithSelf:[].concat((0,y.Z)(l),[B,U])})),s.panels[B].panes[U].nestedPage&&s.panels[B].panes[U].nestedPage.panels&&0!==s.panels[B].panes[U].nestedPage.panels.length&&T.push(o.walkPageHierarchy({panelPage:s,visitorFunc:u,defaultv:c,ancestory:[].concat((0,y.Z)(l),[B,U])}));0===T.length?(m.next(c),m.complete()):(0,Un.D)(T).pipe((0,Ce.U)(function(ae){return ae.reduce(function(ue,me){return[].concat((0,y.Z)(ue),(0,y.Z)(me))},c)}),(0,ee.b)(function(ae){m.next(ae),m.complete()})).subscribe()})}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(KO))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),WO=function(){var a=function(){function n(t,e){var o=this;(0,p.Z)(this,n),this.panelsVisitorService=t,this.cpm=e,this.gatherPaneContexts=function(s){var u=s.pane,c=s.panelPage,l=s.ancestoryWithSelf;return o.cpm.getPlugin(u.contentPlugin).pipe((0,st.w)(function(m){return m.handler?m.handler.stateDefinition(u.settings):(0,je.of)({})}),(0,Ce.U)(function(m){return new co({name:"panestate-"+l.join("-"),adaptor:"data",plugin:"panestate",data:{id:c?c.id:"",selectionPath:(0,y.Z)(l),value:m}})}),(0,Ce.U)(function(m){return[m]}),(0,kn.q)(1))}}return(0,_.Z)(n,[{key:"allActivePageContexts",value:function(e){var s=e.ancestory;return this.panelsVisitorService.walkPageHierarchy({panelPage:e.panelPage,ancestory:void 0===s?[]:s,visitorFunc:this.gatherPaneContexts,defaultv:[]})}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(D7),r.\u0275\u0275inject(fn.ContentPluginManager))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),T7=function(){var a=function(){function n(t){(0,p.Z)(this,n),this.attributeSerializer=t}return(0,_.Z)(n,[{key:"buildToAncestorySpec",value:function(e){for(var o=e.panelPageState,s=e.ancestory,u=0;u<s[0]+1;u++)if(o.panels.length<u+1&&o.panels.push(new Ic),u===s[0]&&s.length>1)for(var c=0;c<s[1]+1;c++)o.panels[s[0]].panes.length<c+1&&o.panels[s[0]].panes.push(new Yo({state:this.attributeSerializer.serialize({},"root")})),c===s[1]&&s.length>2&&(o.panels[s[0]].panes[c].nestedPage||(o.panels[s[0]].panes[c].nestedPage=new as),this.buildToAncestorySpec({panelPageState:o.panels[s[0]].panes[c].nestedPage,ancestory:s.slice(2)}))}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Bt.AttributeSerializerService))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),Xd=function(){var a=function(n){(0,G.Z)(e,n);var t=(0,H.Z)(e);function e(o,s){return(0,p.Z)(this,e),t.call(this,o,s)}return(0,_.Z)(e,[{key:"pluginDef",value:function(){return(0,je.of)(new Rn.PluginDef({name:"style"}))}}]),e}(Rn.BasePluginManager);return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Rn.PluginConfigurationManager),r.\u0275\u0275inject(Nn.ModuleLoaderService))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),XO=function(){var a=function(){function n(t){(0,p.Z)(this,n),this.spm=t}return(0,_.Z)(n,[{key:"alterResolvedPanes",value:function(e){var o=this,s=e.panel,u=e.resolvedPanes,c=e.originMappings;return(0,je.of)(void 0).pipe((0,st.w)(function(){return s.stylePlugin&&""!==s.stylePlugin?o.spm.getPlugin(s.stylePlugin):(0,je.of)(void 0)}),(0,st.w)(function(l){return l&&l.handler?l.handler.alterResolvedPanes({settings:s.settings,resolvedPanes:u,originMappings:c}):(0,je.of)({resolvedPanes:u,originMappings:c})}))}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Xd))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),Tk=function(){var a=function(){function n(t,e,o,s){(0,p.Z)(this,n),this.panelHandler=t,this.rulesResolver=e,this.inlineContextResolver=o,this.cpm=s}return(0,_.Z)(n,[{key:"usedContexts",value:function(e){var o=this;return this.panesPlugins(e).pipe((0,st.w)(function(s){return o.dataPanes(e).pipe((0,Ce.U)(function(u){return{plugins:s,dataPanes:u}}))}),(0,st.w)(function(s){var u=s.plugins,c=s.dataPanes;return(0,Un.D)(e.reduce(function(l,m){var C=u.get(m.contentPlugin);return void 0!==C.handler?[].concat((0,y.Z)(l),[C.handler.getBindings(m.settings,"context",new Map([["dataPanes",c]])).pipe((0,Ce.U)(function(T){return T.map(function(B){return B.id})}))]):(0,y.Z)(l)},[])).pipe((0,Ce.U)(function(l){return l.reduce(function(m,C){return[].concat((0,y.Z)(m),(0,y.Z)(C))},[])}))}))}},{key:"staticPanes",value:function(e){return this.cpm.getPlugins(e.reduce(function(o,s){return-1===o.findIndex(function(u){return u===s.contentPlugin})?[].concat((0,y.Z)(o),[s.contentPlugin]):(0,y.Z)(o)},[])).pipe((0,Ce.U)(function(o){return e.filter(function(s){return void 0===o.get(s.contentPlugin).handler||!o.get(s.contentPlugin).handler.isDynamic(s.settings)})}))}},{key:"dataPanes",value:function(e){return this.cpm.getPlugins(e.reduce(function(o,s){return-1===o.findIndex(function(u){return u===s.contentPlugin})?[].concat((0,y.Z)(o),[s.contentPlugin]):(0,y.Z)(o)},[])).pipe((0,Ce.U)(function(o){return e.filter(function(s){return void 0!==o.get(s.contentPlugin).handler&&o.get(s.contentPlugin).handler.isData(s.settings)})}))}},{key:"panesPlugins",value:function(e){return this.cpm.getPlugins(e.reduce(function(o,s){return-1===o.findIndex(function(u){return u===s.contentPlugin})?[].concat((0,y.Z)(o),[s.contentPlugin]):(0,y.Z)(o)},[]))}},{key:"resolvePanes",value:function(e){var o=this,s=e.panes,u=e.contexts,c=e.resolvedContext;return console.log("resolve panes"),this.panesPlugins(s).pipe((0,st.w)(function(l){return(0,Un.D)(s.reduce(function(m,C){var T=l.get(C.contentPlugin);return[].concat((0,y.Z)(m),void 0!==T.handler?[T.handler.getBindings(C.settings,"pane").pipe((0,Ce.U)(function(B){return B.map(function(F){return F.id})}))]:[(0,je.of)([])])},[]))})).pipe((0,Ce.U)(function(l){return l.reduce(function(m,C){return[].concat((0,y.Z)(m),(0,y.Z)(C))},[])}),(0,st.w)(function(l){return o.panesPlugins(s).pipe((0,Ce.U)(function(m){return[l,m]}))}),(0,st.w)(function(l){var m=(0,g.Z)(l,2),C=m[0],T=m[1];return(0,Un.D)(s.reduce(function(B,F){var U=T.get(F.contentPlugin);return void 0!==U.handler&&U.handler.isDynamic(F.settings)?[].concat((0,y.Z)(B),[U.handler.isData(F.settings)&&-1!==C.findIndex(function(ae){return ae===F.name})?(0,je.of)([]):(0,Un.D)([o.staticPanes(s),o.dataPanes(s)]).pipe((0,st.w)(function(ae){var ue=(0,g.Z)(ae,2),me=ue[0],Se=ue[1];return U.handler.buildDynamicItems(F.settings,new Map([].concat((0,y.Z)(void 0===F.metadata?[]:F.metadata),[["tag",fr()],["panes",me],["dataPanes",Se],["contexts",void 0!==u?u:[]]]))).pipe((0,Ce.U)(function(we){return o.panelHandler.fromPanes(we)}),(0,Ce.U)(function(we){return o.panelHandler.wrapPanel(we).panes}),(0,kn.q)(1))}))]):""===F.name||-1===C.findIndex(function(ae){return ae===F.name})?[].concat((0,y.Z)(B),[(0,je.of)([new Wr((0,b.Z)((0,b.Z)({},F),{},{contexts:[].concat((0,y.Z)(u),(0,y.Z)(F.contexts?F.contexts:[]))}))]).pipe((0,st.w)(function(ae){return Or(function(){return null!=ae[0].rule&&""!==ae[0].rule.condition},o.rulesResolver.evaluate(ae[0].rule,[].concat((0,y.Z)(u),(0,y.Z)(F.contexts?F.contexts:[]))).pipe((0,Ce.U)(function(ue){return ue?ae:[]})),(0,je.of)(ae))}))]):(0,y.Z)(B)},[])).pipe((0,st.w)(function(B){return Or(function(){return 0===B.reduce(function(F,U){return[].concat((0,y.Z)(F),(0,y.Z)(U))},[]).length},(0,je.of)([B,[]]),(0,Un.D)((0,y.Z)(B.reduce(function(F,U){return[].concat((0,y.Z)(F),(0,y.Z)(U.map(function(ae){return ae.contexts&&0!==ae.contexts.length?o.inlineContextResolver.resolveAll(ae.contexts).pipe((0,kn.q)(1)):(0,je.of)({}).pipe((0,kn.q)(1))})))},[]))).pipe((0,Ce.U)(function(F){return[B,F.map(function(U){return(0,b.Z)((0,b.Z)({},U),c)})]})))}),(0,Ce.U)(function(B){var F=(0,g.Z)(B,2),ae=F[1],ue=[],me=[];return F[0].forEach(function(Se,we){ue=[].concat((0,y.Z)(void 0===ue?[]:ue),(0,y.Z)(Se.map(function(qe,at){return new Wr((0,b.Z)((0,b.Z)({},qe),{},{resolvedContext:ae[ue.length+at]}))}))),me=[].concat((0,y.Z)(me&&[]),(0,y.Z)(Se.map(function(){return we})))}),{resolvedPanes:ue,originMappings:me}}))}))}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(yo),r.\u0275\u0275inject(Ck),r.\u0275\u0275inject(Gd),r.\u0275\u0275inject(fn.ContentPluginManager))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),bE=function(a){(0,G.Z)(t,a);var n=(0,H.Z)(t);function t(e){var o;return(0,p.Z)(this,t),o=n.call(this,e),e&&(o.name=o.id,o.title=e.title,o.editorComponent=e.editorComponent?e.editorComponent:void 0,o.renderComponent=e.renderComponent?e.renderComponent:void 0,e.handler&&(o.handler=e.handler)),o}return(0,_.Z)(t)}(Rn.Plugin),CE=function(){var a=function(n){(0,G.Z)(e,n);var t=(0,H.Z)(e);function e(){var o;return(0,p.Z)(this,e),(o=t.call(this)).pageChange$=new se.x,o.pageSize=20,o.dataStream=new z.X([]),o.subscription=new mO.w0,o.lastPage=0,o.paneItems=[],o}return(0,_.Z)(e,[{key:"panes",set:function(s){this.paneItems=[].concat((0,y.Z)(this.paneItems),(0,y.Z)(s)),this.dataStream.next(this.paneItems)}},{key:"connect",value:function(s){var u=this;return this.subscription.add(s.viewChange.subscribe(function(c){var l=Math.ceil((c.end+1)/u.pageSize);l>u.lastPage&&(u.lastPage=l,u.pageChange$.next(l))})),this.dataStream}},{key:"disconnect",value:function(s){this.subscription.unsubscribe()}}]),e}(H$.DataSource);return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),Qd=(0,Zt.ZF)(zO),wE=function(n){return(0,Zt.P1)(Qd,function(t){var e=t.dataTags.findIndex(function(o){return o===n});if(e>-1)return t.datasets[e][t.datasets[e].length-1]})},I7=(0,Zt.P1)(Qd,function(a){return a.pageInfo}),O7=(0,Zt.P1)(Qd,function(a){return a.page}),F7=(0,Zt.P1)(Qd,function(a){return a.selectionPath}),QO=(0,Zt.P1)(Qd,function(a){return a.formNames}),M7=(0,Zt.P1)(Qd,function(a){return a.forms}),B7=(0,Zt.P1)(QO,M7,function(a,n,t){var e=a.findIndex(function(o){return o===t.name});if(e>-1)return n[e]}),ea=function(){var a=function(){function n(t){var e=this;(0,p.Z)(this,n),this.store=t,this.getPageInfo$=this.store.pipe((0,Zt.Ys)(I7)),this.getPage$=this.store.pipe((0,Zt.Ys)(O7)),this.getSelectionPath$=this.store.pipe((0,Zt.Ys)(F7)),this.getFormNames$=this.store.pipe((0,Zt.Ys)(QO)),this.getForm$=function(o){return e.store.pipe((0,Zt.Ys)(B7,{name:o}))}}return(0,_.Z)(n,[{key:"loadRestData",value:function(e,o){this.store.dispatch(LO({tag:e,rest:o}))}},{key:"setPageInfo",value:function(e){this.store.dispatch(Ak({info:e}))}},{key:"setPage",value:function(e){this.store.dispatch(Rk({page:e}))}},{key:"setSelectionPath",value:function(e){this.store.dispatch(UO({path:e}))}},{key:"setForm",value:function(e,o){this.store.dispatch($O({name:e,form:o}))}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Zt.yh))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),cy=(0,_.Z)(function a(n){(0,p.Z)(this,a),this.readUserIds=[],n&&(this.title=n.title,this.name=n.name,this.path=n.path,this.cssFile=n.cssFile,n.readUserIds&&(this.readUserIds=n.readUserIds.map(function(t){return t})))}),JO=(0,_.Z)(function a(n){(0,p.Z)(this,a),n&&(this.label=n.label,this.name=n.name)}),YO=(0,_.Z)(function a(n){(0,p.Z)(this,a),n&&(this.label=n.label,this.name=n.name)}),ku=(0,_.Z)(function a(n){(0,p.Z)(this,a),this.panels=[],n&&(this.id=n.id,this.name=n.name,this.title=n.title,this.derivativeId=n.derivativeId,n.panels&&(this.panels=n.panels.map(function(t){return new N7(t)})))}),N7=(0,_.Z)(function a(n){(0,p.Z)(this,a),this.panes=[],n&&(this.name=n.name,this.label=n.label,n.panes&&(this.panes=n.panes.map(function(t){return new Z7(t)})))}),Z7=(0,_.Z)(function a(n){(0,p.Z)(this,a),this.settings=[],n&&(this.name=n.name,this.label=n.label,this.contentPlugin=n.contentPlugin,n.settings&&(this.settings=n.settings.map(function(t){return new Bt.AttributeValue(t)})))}),Ik=(0,_.Z)(function a(n){(0,p.Z)(this,a),n&&(this.name=n.name,this.field=n.field)}),L7=function(){var a=function(){function n(t,e,o,s){var u=this;(0,p.Z)(this,n),this.pageBuilderFacade=t,this.panelStateArchitectService=e,this.attributeSerializer=o,this.selectEntities=function(c){return c.entities},this.selectById=function(c){var l=c.id;return(0,Zt.P1)(u.selectEntities,function(m){return m[l]?m[l]:void 0})},this.panelPageStateService=s.getEntityCollectionService("PanelPageState")}return(0,_.Z)(n,[{key:"mergeState",value:function(e){var o=this,u=e.settings,c=e.plugin,l=e.ancestory;return(0,je.of)(e.state).pipe((0,st.w)(function(m){return o.pageBuilderFacade.getPageInfo$.pipe((0,Ce.U)(function(C){return[m,C]}))}),(0,st.w)(function(m){var C=(0,g.Z)(m,2),T=C[0],B=C[1];return c.handler.stateDefinition(u).pipe((0,Ce.U)(function(F){return[T,B,F]}))}),(0,st.w)(function(m){var C=(0,g.Z)(m,3),T=C[0],B=C[1],F=C[2];return o.panelPageStateService.collection$.pipe((0,Zt.Ys)(o.selectById({id:B.id})),(0,Ce.U)(function(U){return[T,new as(U||{id:B.id,panels:[]}),F]}),(0,kn.q)(1))}),(0,Ce.U)(function(m){var C=(0,g.Z)(m,3),T=C[0],B=C[1],F=C[2];o.panelStateArchitectService.buildToAncestorySpec({panelPageState:B,ancestory:(0,y.Z)(l)});var U="$."+l.map(function(ue,me){return"".concat((me+1)%2==0?"panes":(0===me?"":"nestedPage.")+"panels","[").concat(ue,"]")}).join(".");return[T,B,F,(0,Ms.JSONPath)({path:U,json:B})[0]]}),(0,ee.b)(function(m){var C=(0,g.Z)(m,4),T=C[0],F=C[2],U=C[3],ae=U.state?U.state.root?o.attributeSerializer.deserialize(U.state).root:o.attributeSerializer.deserialize(U.state):{},ue=ay(ae&&0!==Object.keys(ae).length?ae:F,T);U.state=o.attributeSerializer.serialize(ue,"root")}),(0,Ce.U)(function(m){var C=(0,g.Z)(m,4);return{paneState:C[3],pageState:C[1]}}))}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(ea),r.\u0275\u0275inject(T7),r.\u0275\u0275inject(Bt.AttributeSerializerService),r.\u0275\u0275inject(Dr))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),e3=function(){var a=function(){function n(t){(0,p.Z)(this,n),this.attributeSerializer=t}return(0,_.Z)(n,[{key:"serializeForm",value:function(e){for(var o=e.panels.length,s={},u=0;u<o;u++){for(var c=e.panels[u].panes.length,l=new Map,m=0;m<c;m++){var C=this.serializeFormPane(e.panels[u].panes[m]);if(e.panels[u].panes[m].name&&null!==e.panels[u].panes[m].name&&(s[e.panels[u].panes[m].name]||e.panels[u].panes[m].name===FO(e.panels[u].panes[m].name))){l.has(e.panels[u].panes[m].name)||l.set(e.panels[u].panes[m].name,typeof s[e.panels[u].panes[m].name]<"u"?[s[e.panels[u].panes[m].name]]:[]);var T=l.get(e.panels[u].panes[m].name);l.set(e.panels[u].panes[m].name,[].concat((0,y.Z)(T),[C]))}else s=e.panels[u].panes[m].name&&""!==e.panels[u].panes[m].name?(0,b.Z)((0,b.Z)({},s),{},(0,d.Z)({},e.panels[u].panes[m].name,C)):(0,b.Z)((0,b.Z)({},s),C)}Array.from(l).forEach(function(B){var F=(0,g.Z)(B,2);return s[F[0]]=F[1]})}return s}},{key:"serializeFormPane",value:function(e){if("panel"===e.contentPlugin)return this.serializeForm(new ku(this.attributeSerializer.deserializeAsObject(e.settings,!0)));var o=this.attributeSerializer.deserializeAsObject(e.settings,!0);return void 0!==o?o.value:void 0}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Bt.AttributeSerializerService))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),Ok=function(){var a=function(){function n(){(0,p.Z)(this,n)}return(0,_.Z)(n,[{key:"makeJsonNode",value:function(){return{attributes:{},children:{}}}},{key:"reduceCss",value:function(e,o){var s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e&&e.children?Object.keys(e.children).filter(function(u){return s?0===u.indexOf(o):0!==u.indexOf(o)}).reduce(function(u,c){return(0,b.Z)((0,b.Z)({},u),{},{children:(0,b.Z)((0,b.Z)({},u.children),{},(0,d.Z)({},s?c.substr(c.indexOf(o)+o.length).trim():c,e.children[c]))})},this.makeJsonNode()):this.makeJsonNode()}},{key:"reduceSelector",value:function(e,o){var s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e?Object.keys(e).filter(function(u){return s?0===u.indexOf(o):0!==u.indexOf(o)}).reduce(function(u,c){return(0,b.Z)((0,b.Z)({},u),{},(0,d.Z)({},s?c.substr(c.indexOf(o)+o.length).trim():c,e[c]))},{}):{}}}]),n}();return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}();function j7(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"ngx-dropzone-remove-badge",1),r.\u0275\u0275listener("click",function(o){r.\u0275\u0275restoreView(t);var s=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(s._remove(o))}),r.\u0275\u0275elementEnd()}}var Fk=[[["ngx-dropzone-label"]]],Mk=["ngx-dropzone-label"],$7=["fileInput"];function U7(a,n){1&a&&r.\u0275\u0275projection(0,2,["*ngIf","!_hasPreviews"])}var z7=[[["ngx-dropzone-preview"]],"*",[["ngx-dropzone-label"]]],G7=["ngx-dropzone-preview","*","ngx-dropzone-label"];function V7(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"ngx-dropzone-remove-badge",2),r.\u0275\u0275listener("click",function(o){r.\u0275\u0275restoreView(t);var s=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(s._remove(o))}),r.\u0275\u0275elementEnd()}}function H7(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"video",2),r.\u0275\u0275listener("click",function(o){return o.stopPropagation()}),r.\u0275\u0275element(1,"source",3),r.\u0275\u0275elementEnd()),2&a){var t=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("src",t.sanitizedVideoSrc,r.\u0275\u0275sanitizeUrl)}}function q7(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"ngx-dropzone-remove-badge",4),r.\u0275\u0275listener("click",function(o){r.\u0275\u0275restoreView(t);var s=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(s._remove(o))}),r.\u0275\u0275elementEnd()}}var t3=function(){var a=(0,_.Z)(function n(){(0,p.Z)(this,n)});return a.\u0275fac=function(t){return new(t||a)},a.\u0275dir=r.\u0275\u0275defineDirective({type:a,selectors:[["ngx-dropzone-label"]]}),a}();function Jd(a){return null!=a&&"false"!=="".concat(a)}var Bk=function(){var a=(0,_.Z)(function n(){(0,p.Z)(this,n)});return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["ngx-dropzone-remove-badge"]],decls:3,vars:0,consts:[["x1","0","y1","0","x2","10","y2","10"],["x1","0","y1","10","x2","10","y2","0"]],template:function(t,e){1&t&&(r.\u0275\u0275namespaceSVG(),r.\u0275\u0275elementStart(0,"svg"),r.\u0275\u0275element(1,"line",0)(2,"line",1),r.\u0275\u0275elementEnd())},styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;height:22px;width:22px;position:absolute;top:5px;right:5px;border-radius:50%;background:#bbb;color:#333;cursor:pointer}[_nghost-%COMP%]:hover{background:#aeaeae}[_nghost-%COMP%] > svg[_ngcontent-%COMP%]{height:10px;width:10px}[_nghost-%COMP%] > svg[_ngcontent-%COMP%] > line[_ngcontent-%COMP%]{stroke-width:2px;stroke:#fff}"]}),a}(),Ns=function(){return(Ns=Ns||{})[Ns.BACKSPACE=8]="BACKSPACE",Ns[Ns.DELETE=46]="DELETE",Ns}(),Yd=function(){var a=function(){function n(t){(0,p.Z)(this,n),this.sanitizer=t,this._removable=!1,this.removed=new r.EventEmitter,this.tabIndex=0}return(0,_.Z)(n,[{key:"file",get:function(){return this._file},set:function(e){this._file=e}},{key:"removable",get:function(){return this._removable},set:function(e){this._removable=Jd(e)}},{key:"keyEvent",value:function(e){switch(e.keyCode){case Ns.BACKSPACE:case Ns.DELETE:this.remove()}}},{key:"hostStyle",get:function(){return this.sanitizer.bypassSecurityTrustStyle("\n\t\t\tdisplay: flex;\n\t\t\theight: 140px;\n\t\t\tmin-height: 140px;\n\t\t\tmin-width: 180px;\n\t\t\tmax-width: 180px;\n\t\t\tjustify-content: center;\n\t\t\talign-items: center;\n\t\t\tpadding: 0 20px;\n\t\t\tmargin: 10px;\n\t\t\tborder-radius: 5px;\n\t\t\tposition: relative;\n\t\t")}},{key:"_remove",value:function(e){e.stopPropagation(),this.remove()}},{key:"remove",value:function(){this._removable&&this.removed.next(this.file)}},{key:"readFile",value:(t=Lt((0,He.Z)().mark(function o(){var s=this;return(0,He.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",new Promise(function(l,m){var C=new FileReader;if(C.onload=function(T){l(T.target.result)},C.onerror=function(T){console.error("FileReader failed on file ".concat(s.file.name,".")),m(T)},!s.file)return m("No file to read. Please provide a file using the [file] Input property.");C.readAsDataURL(s.file)}));case 1:case"end":return c.stop()}},o)})),function e(){return t.apply(this,arguments)})}]),n;var t}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Z.DomSanitizer))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["ngx-dropzone-preview"]],hostVars:3,hostBindings:function(t,e){1&t&&r.\u0275\u0275listener("keyup",function(s){return e.keyEvent(s)}),2&t&&(r.\u0275\u0275hostProperty("tabindex",e.tabIndex),r.\u0275\u0275styleMap(e.hostStyle))},inputs:{file:"file",removable:"removable"},outputs:{removed:"removed"},ngContentSelectors:Mk,decls:2,vars:1,consts:[[3,"click",4,"ngIf"],[3,"click"]],template:function(t,e){1&t&&(r.\u0275\u0275projectionDef(Fk),r.\u0275\u0275projection(0),r.\u0275\u0275template(1,j7,1,0,"ngx-dropzone-remove-badge",0)),2&t&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.removable))},dependencies:[Bk,E.NgIf],styles:["[_nghost-%COMP%]{background-image:linear-gradient(to top,#ededed,#efefef,#f1f1f1,#f4f4f4,#f6f6f6)}[_nghost-%COMP%]:hover, [_nghost-%COMP%]:focus{background-image:linear-gradient(to top,#e3e3e3,#ebeaea,#e8e7e7,#ebeaea,#f4f4f4);outline:0}[_nghost-%COMP%]:hover   ngx-dropzone-remove-badge[_ngcontent-%COMP%], [_nghost-%COMP%]:focus   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:1}[_nghost-%COMP%]   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]     ngx-dropzone-label{overflow-wrap:break-word}"]}),a}(),n3=function(){var a=function(){function n(){(0,p.Z)(this,n)}return(0,_.Z)(n,[{key:"parseFileList",value:function(e,o,s,u){for(var c=[],l=[],m=0;m<e.length;m++){var C=e.item(m);this.isAccepted(C,o)?s&&C.size>s?this.rejectFile(l,C,"size"):!u&&c.length>=1?this.rejectFile(l,C,"no_multiple"):c.push(C):this.rejectFile(l,C,"type")}return{addedFiles:c,rejectedFiles:l}}},{key:"isAccepted",value:function(e,o){if("*"===o)return!0;var s=o.split(",").map(function(m){return m.toLowerCase().trim()}),u=e.type.toLowerCase(),c=e.name.toLowerCase();return!!s.find(function(m){return m.endsWith("/*")?u.split("/")[0]===m.split("/")[0]:m.startsWith(".")?c.endsWith(m):m==u})}},{key:"rejectFile",value:function(e,o,s){var u=o;u.reason=s,e.push(u)}}]),n}();return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),SE=function(){var a=function(){function n(t){(0,p.Z)(this,n),this.service=t,this.change=new r.EventEmitter,this.accept="*",this._disabled=!1,this._multiple=!0,this._maxFileSize=void 0,this._expandable=!1,this._disableClick=!1,this._processDirectoryDrop=!1,this._isHovered=!1}return(0,_.Z)(n,[{key:"_hasPreviews",get:function(){return!!this._previewChildren.length}},{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=Jd(e),this._isHovered&&(this._isHovered=!1)}},{key:"multiple",get:function(){return this._multiple},set:function(e){this._multiple=Jd(e)}},{key:"maxFileSize",get:function(){return this._maxFileSize},set:function(e){this._maxFileSize=function K7(a){return isNaN(parseFloat(a))||isNaN(Number(a))?null:Number(a)}(e)}},{key:"expandable",get:function(){return this._expandable},set:function(e){this._expandable=Jd(e)}},{key:"disableClick",get:function(){return this._disableClick},set:function(e){this._disableClick=Jd(e)}},{key:"processDirectoryDrop",get:function(){return this._processDirectoryDrop},set:function(e){this._processDirectoryDrop=Jd(e)}},{key:"_onClick",value:function(){this.disableClick||this.showFileSelector()}},{key:"_onDragOver",value:function(e){this.disabled||(this.preventDefault(e),this._isHovered=!0)}},{key:"_onDragLeave",value:function(){this._isHovered=!1}},{key:"_onDrop",value:function(e){var o=this;if(!this.disabled)if(this.preventDefault(e),this._isHovered=!1,this.processDirectoryDrop&&DataTransferItem.prototype.webkitGetAsEntry){var s=e.dataTransfer.items;if(s.length>0){for(var u=[],c=[],l=0;l<s.length;l++){var m=s[l].webkitGetAsEntry();m.isFile?u.push(e.dataTransfer.files[l]):m.isDirectory&&c.push(m)}var C=new DataTransfer;if(u.forEach(function(ae){C.items.add(ae)}),!c.length&&C.items.length&&this.handleFileDrop(C.files),c.length){var F,T=[],B=(0,te.Z)(c);try{for(B.s();!(F=B.n()).done;)T.push(this.extractFilesFromDirectory(F.value))}catch(ae){B.e(ae)}finally{B.f()}Promise.all(T).then(function(ae){ae.reduce(function(ue,me){return[].concat((0,y.Z)(ue),(0,y.Z)(me))}).forEach(function(ue){C.items.add(ue)}),o.handleFileDrop(C.files)})}}}else this.handleFileDrop(e.dataTransfer.files)}},{key:"extractFilesFromDirectory",value:function(e){function o(u){return s.apply(this,arguments)}function s(){return(s=Lt((0,He.Z)().mark(function u(c){return(0,He.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.prev=0,m.next=3,new Promise(function(C,T){return c.file(C,T)});case 3:return m.abrupt("return",m.sent);case 6:m.prev=6,m.t0=m.catch(0),console.log("Error converting a fileEntry to a File: ",m.t0);case 9:case"end":return m.stop()}},u,null,[[0,6]])}))).apply(this,arguments)}return new Promise(function(u,c){var l=[],m=e.createReader();!function T(){m.readEntries(function(){var B=Lt((0,He.Z)().mark(function F(U){var ae,ue,me,Se;return(0,He.Z)().wrap(function(at){for(;;)switch(at.prev=at.next){case 0:if(U.length){at.next=4;break}u(l),at.next=25;break;case 4:ae=U.filter(function(dt){return dt.isFile}),ue=(0,te.Z)(ae),at.prev=6,ue.s();case 8:if((me=ue.n()).done){at.next=16;break}return Se=me.value,at.next=12,o(Se);case 12:l.push(at.sent);case 14:at.next=8;break;case 16:at.next=21;break;case 18:at.prev=18,at.t0=at.catch(6),ue.e(at.t0);case 21:return at.prev=21,ue.f(),at.finish(21);case 24:T();case 25:case"end":return at.stop()}},F,null,[[6,18,21,24]])}));return function(F){return B.apply(this,arguments)}}())}()})}},{key:"showFileSelector",value:function(){this.disabled||this._fileInput.nativeElement.click()}},{key:"_onFilesSelected",value:function(e){this.handleFileDrop(e.target.files),this._fileInput.nativeElement.value="",this.preventDefault(e)}},{key:"handleFileDrop",value:function(e){var o=this.service.parseFileList(e,this.accept,this.maxFileSize,this.multiple);this.change.next({addedFiles:o.addedFiles,rejectedFiles:o.rejectedFiles,source:this})}},{key:"preventDefault",value:function(e){e.preventDefault(),e.stopPropagation()}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(n3,2))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["ngx-dropzone"],["","ngx-dropzone",""]],contentQueries:function(t,e,o){var s;1&t&&r.\u0275\u0275contentQuery(o,Yd,5),2&t&&r.\u0275\u0275queryRefresh(s=r.\u0275\u0275loadQuery())&&(e._previewChildren=s)},viewQuery:function(t,e){var o;1&t&&r.\u0275\u0275viewQuery($7,7),2&t&&r.\u0275\u0275queryRefresh(o=r.\u0275\u0275loadQuery())&&(e._fileInput=o.first)},hostVars:8,hostBindings:function(t,e){1&t&&r.\u0275\u0275listener("click",function(){return e._onClick()})("dragover",function(s){return e._onDragOver(s)})("dragleave",function(){return e._onDragLeave()})("drop",function(s){return e._onDrop(s)}),2&t&&r.\u0275\u0275classProp("ngx-dz-disabled",e.disabled)("expandable",e.expandable)("unclickable",e.disableClick)("ngx-dz-hovered",e._isHovered)},inputs:{accept:"accept",disabled:"disabled",multiple:"multiple",maxFileSize:"maxFileSize",expandable:"expandable",disableClick:"disableClick",processDirectoryDrop:"processDirectoryDrop",id:"id",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedBy:["aria-describedby","ariaDescribedBy"]},outputs:{change:"change"},features:[r.\u0275\u0275ProvidersFeature([n3])],ngContentSelectors:G7,decls:5,vars:8,consts:[["type","file",3,"id","multiple","accept","disabled","change"],["fileInput",""],[4,"ngIf"]],template:function(t,e){1&t&&(r.\u0275\u0275projectionDef(z7),r.\u0275\u0275elementStart(0,"input",0,1),r.\u0275\u0275listener("change",function(s){return e._onFilesSelected(s)}),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(2,U7,1,0,"ng-content",2),r.\u0275\u0275projection(3),r.\u0275\u0275projection(4,1)),2&t&&(r.\u0275\u0275property("id",e.id)("multiple",e.multiple)("accept",e.accept)("disabled",e.disabled),r.\u0275\u0275attribute("aria-label",e.ariaLabel)("aria-labelledby",e.ariaLabelledby)("aria-describedby",e.ariaDescribedBy),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",!e._hasPreviews))},dependencies:[E.NgIf],styles:["[_nghost-%COMP%]{display:flex;align-items:center;height:180px;background:#fff;cursor:pointer;color:#717386;border:2px dashed #717386;border-radius:5px;font-size:16px;overflow-x:auto}.ngx-dz-hovered[_nghost-%COMP%]{border-style:solid}.ngx-dz-disabled[_nghost-%COMP%]{opacity:.5;cursor:no-drop;pointer-events:none}.expandable[_nghost-%COMP%]{overflow:hidden;height:unset;min-height:180px;flex-wrap:wrap}.unclickable[_nghost-%COMP%]{cursor:default}[_nghost-%COMP%]     ngx-dropzone-label{text-align:center;z-index:10;margin:10px auto}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}[_nghost-%COMP%]   input[_ngcontent-%COMP%]:focus +   ngx-dropzone-label{outline:1px dotted #000;outline:-webkit-focus-ring-color auto 5px}"]}),a}(),r3=function(){var a=function(n){(0,G.Z)(e,n);var t=(0,H.Z)(e);function e(o){var s;return(0,p.Z)(this,e),(s=t.call(this,o)).defaultImgLoading="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBzdHlsZT0ibWFyZ2luOiBhdXRvOyBiYWNrZ3JvdW5kOiByZ2IoMjQxLCAyNDIsIDI0Mykgbm9uZSByZXBlYXQgc2Nyb2xsIDAlIDAlOyBkaXNwbGF5OiBibG9jazsgc2hhcGUtcmVuZGVyaW5nOiBhdXRvOyIgd2lkdGg9IjIyNHB4IiBoZWlnaHQ9IjIyNHB4IiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQiPgo8Y2lyY2xlIGN4PSI1MCIgY3k9IjUwIiByPSIxNCIgc3Ryb2tlLXdpZHRoPSIzIiBzdHJva2U9IiM4NWEyYjYiIHN0cm9rZS1kYXNoYXJyYXk9IjIxLjk5MTE0ODU3NTEyODU1MiAyMS45OTExNDg1NzUxMjg1NTIiIGZpbGw9Im5vbmUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+CiAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJyb3RhdGUiIGR1cj0iMS4xNjI3OTA2OTc2NzQ0MTg0cyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGtleVRpbWVzPSIwOzEiIHZhbHVlcz0iMCA1MCA1MDszNjAgNTAgNTAiPjwvYW5pbWF0ZVRyYW5zZm9ybT4KPC9jaXJjbGU+CjxjaXJjbGUgY3g9IjUwIiBjeT0iNTAiIHI9IjEwIiBzdHJva2Utd2lkdGg9IjMiIHN0cm9rZT0iI2JiY2VkZCIgc3Ryb2tlLWRhc2hhcnJheT0iMTUuNzA3OTYzMjY3OTQ4OTY2IDE1LjcwNzk2MzI2Nzk0ODk2NiIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjE1LjcwNzk2MzI2Nzk0ODk2NiIgZmlsbD0ibm9uZSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIj4KICA8YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InJvdGF0ZSIgZHVyPSIxLjE2Mjc5MDY5NzY3NDQxODRzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIga2V5VGltZXM9IjA7MSIgdmFsdWVzPSIwIDUwIDUwOy0zNjAgNTAgNTAiPjwvYW5pbWF0ZVRyYW5zZm9ybT4KPC9jaXJjbGU+CjwhLS0gW2xkaW9dIGdlbmVyYXRlZCBieSBodHRwczovL2xvYWRpbmcuaW8vIC0tPjwvc3ZnPg==",s.imageSrc=s.sanitizer.bypassSecurityTrustUrl(s.defaultImgLoading),s}return(0,_.Z)(e,[{key:"file",get:function(){return this._file},set:function(s){this._file=s,this.renderImage()}},{key:"ngOnInit",value:function(){this.renderImage()}},{key:"renderImage",value:function(){var s=this;this.readFile().then(function(u){return setTimeout(function(){return s.imageSrc=u})}).catch(function(u){return console.error(u)})}}]),e}(Yd);return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Z.DomSanitizer))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["ngx-dropzone-image-preview"]],inputs:{file:"file"},features:[r.\u0275\u0275ProvidersFeature([{provide:Yd,useExisting:a}]),r.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:Mk,decls:3,vars:2,consts:[[3,"src"],[3,"click",4,"ngIf"],[3,"click"]],template:function(t,e){1&t&&(r.\u0275\u0275projectionDef(Fk),r.\u0275\u0275element(0,"img",0),r.\u0275\u0275projection(1),r.\u0275\u0275template(2,V7,1,0,"ngx-dropzone-remove-badge",1)),2&t&&(r.\u0275\u0275property("src",e.imageSrc,r.\u0275\u0275sanitizeUrl),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",e.removable))},dependencies:[Bk,E.NgIf],styles:["[_nghost-%COMP%]{min-width:unset!important;max-width:unset!important;padding:0!important}[_nghost-%COMP%]:hover   img[_ngcontent-%COMP%], [_nghost-%COMP%]:focus   img[_ngcontent-%COMP%]{opacity:.7}[_nghost-%COMP%]:hover   ngx-dropzone-remove-badge[_ngcontent-%COMP%], [_nghost-%COMP%]:focus   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:1}[_nghost-%COMP%]   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]   img[_ngcontent-%COMP%]{max-height:100%;border-radius:5px;opacity:.8}[_nghost-%COMP%]     ngx-dropzone-label{position:absolute;overflow-wrap:break-word}"]}),a}(),W7=function(){var a=function(n){(0,G.Z)(e,n);var t=(0,H.Z)(e);function e(o){return(0,p.Z)(this,e),t.call(this,o)}return(0,_.Z)(e,[{key:"ngOnInit",value:function(){this.file?(this.videoSrc=URL.createObjectURL(this.file),this.sanitizedVideoSrc=this.sanitizer.bypassSecurityTrustUrl(this.videoSrc)):console.error("No file to read. Please provide a file using the [file] Input property.")}},{key:"ngOnDestroy",value:function(){URL.revokeObjectURL(this.videoSrc)}}]),e}(Yd);return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Z.DomSanitizer))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["ngx-dropzone-video-preview"]],features:[r.\u0275\u0275ProvidersFeature([{provide:Yd,useExisting:a}]),r.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:Mk,decls:3,vars:2,consts:[["controls","",3,"click",4,"ngIf"],[3,"click",4,"ngIf"],["controls","",3,"click"],[3,"src"],[3,"click"]],template:function(t,e){1&t&&(r.\u0275\u0275projectionDef(Fk),r.\u0275\u0275template(0,H7,2,1,"video",0),r.\u0275\u0275projection(1),r.\u0275\u0275template(2,q7,1,0,"ngx-dropzone-remove-badge",1)),2&t&&(r.\u0275\u0275property("ngIf",e.sanitizedVideoSrc),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",e.removable))},dependencies:[Bk,E.NgIf],styles:["[_nghost-%COMP%]{min-width:unset!important;max-width:unset!important;padding:0!important}[_nghost-%COMP%]:hover   video[_ngcontent-%COMP%], [_nghost-%COMP%]:focus   video[_ngcontent-%COMP%]{opacity:.7}[_nghost-%COMP%]:hover   ngx-dropzone-remove-badge[_ngcontent-%COMP%], [_nghost-%COMP%]:focus   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:1}[_nghost-%COMP%]   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]   video[_ngcontent-%COMP%]{max-height:100%;border-radius:5px}[_nghost-%COMP%]     ngx-dropzone-label{position:absolute;overflow-wrap:break-word}"]}),a}(),EE=function(){var a=(0,_.Z)(function n(){(0,p.Z)(this,n)});return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({imports:[[E.CommonModule]]}),a}(),X7=["treeContainer"];function Q7(a,n){if(1&a&&r.\u0275\u0275element(0,"i",0),2&a){var t=r.\u0275\u0275nextContext();r.\u0275\u0275property("ngClass",t.getClassNames("arrowIcon"))}}function J7(a,n){1&a&&r.\u0275\u0275elementContainer(0)}function Y7(a,n){if(1&a&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,J7,1,0,"ng-container",10),r.\u0275\u0275elementContainerEnd()),2&a){var t=n.ngIf,e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngTemplateOutlet",t)("ngTemplateOutletContext",e.getArrowIconContext())}}function e9(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"a",9),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(t);var u=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(u.toggleCollapse())}),r.\u0275\u0275template(1,Y7,2,2,"ng-container",3),r.\u0275\u0275elementEnd()}if(2&a){var e=r.\u0275\u0275nextContext(),o=r.\u0275\u0275reference(2);r.\u0275\u0275property("ngClass",e.getClassNames("arrowIconButton",e.data.collapsed?"collapsed":"")),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.getArrowIconTemplate())("ngIfElse",o)}}function t9(a,n){1&a&&r.\u0275\u0275elementContainer(0)}function n9(a,n){if(1&a&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"div",0),r.\u0275\u0275template(2,t9,1,0,"ng-container",10),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd()),2&a){var t=n.ngIf,e=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("ngClass",e.getClassNames("buttonGroup","rightAlign")),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngTemplateOutlet",t)("ngTemplateOutletContext",e.getButtonGroupContext())}}function r9(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",11),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(t);var s=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(s.addRuleSet())}),r.\u0275\u0275element(1,"i",0),r.\u0275\u0275text(2," Ruleset "),r.\u0275\u0275elementEnd()}if(2&a){var e=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("ngClass",e.getClassNames("button"))("disabled",e.disabled),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngClass",e.getClassNames("addIcon"))}}function i9(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"button",11),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(t);var s=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(s.removeRuleSet())}),r.\u0275\u0275element(2,"i",0),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd()}if(2&a){var e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngClass",e.getClassNames("button","removeButton"))("disabled",e.disabled),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngClass",e.getClassNames("removeIcon"))}}function o9(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",0)(1,"button",11),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(t);var s=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(s.addRule())}),r.\u0275\u0275element(2,"i",0),r.\u0275\u0275text(3," Rule "),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(4,r9,3,3,"button",12),r.\u0275\u0275template(5,i9,3,3,"ng-container",13),r.\u0275\u0275elementEnd()}if(2&a){var e=r.\u0275\u0275nextContext();r.\u0275\u0275property("ngClass",e.getClassNames("buttonGroup","rightAlign")),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngClass",e.getClassNames("button"))("disabled",e.disabled),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngClass",e.getClassNames("addIcon")),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",e.allowRuleset),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!!e.parentValue&&e.allowRuleset)}}function a9(a,n){1&a&&r.\u0275\u0275elementContainer(0)}function s9(a,n){if(1&a&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,a9,1,0,"ng-container",10),r.\u0275\u0275elementContainerEnd()),2&a){var t=n.ngIf,e=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("ngTemplateOutlet",t)("ngTemplateOutletContext",e.getSwitchGroupContext())}}function u9(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",0)(1,"div",0)(2,"input",14,15),r.\u0275\u0275listener("ngModelChange",function(s){r.\u0275\u0275restoreView(t);var u=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(u.data.condition=s)}),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"label",9),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(t);var s=r.\u0275\u0275reference(3),u=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(u.changeCondition(s.value))}),r.\u0275\u0275text(5,"AND"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(6,"div",0)(7,"input",16,17),r.\u0275\u0275listener("ngModelChange",function(s){r.\u0275\u0275restoreView(t);var u=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(u.data.condition=s)}),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(9,"label",9),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(t);var s=r.\u0275\u0275reference(8),u=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(u.changeCondition(s.value))}),r.\u0275\u0275text(10,"OR"),r.\u0275\u0275elementEnd()()()}if(2&a){var e=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("ngClass",e.getClassNames("switchGroup","transition")),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngClass",e.getClassNames("switchControl")),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngClass",e.getClassNames("switchRadio"))("ngModel",e.data.condition)("disabled",e.disabled),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngClass",e.getClassNames("switchLabel")),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngClass",e.getClassNames("switchControl")),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngClass",e.getClassNames("switchRadio"))("ngModel",e.data.condition)("disabled",e.disabled),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngClass",e.getClassNames("switchLabel"))}}function c9(a,n){if(1&a&&r.\u0275\u0275template(0,u9,11,11,"div",8),2&a){var t=r.\u0275\u0275nextContext();r.\u0275\u0275property("ngIf",t.data)}}function l9(a,n){1&a&&r.\u0275\u0275elementContainer(0)}function d9(a,n){if(1&a&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"div",0),r.\u0275\u0275template(2,l9,1,0,"ng-container",10),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd()),2&a){var t=n.ngIf,e=r.\u0275\u0275nextContext(3).$implicit,o=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngClass",o.getClassNames("buttonGroup","rightAlign")),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngTemplateOutlet",t)("ngTemplateOutletContext",o.getRemoveButtonContext(e))}}function f9(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",0)(1,"button",11),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(t);var s=r.\u0275\u0275nextContext(3).$implicit,u=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(u.removeRule(s,u.data))}),r.\u0275\u0275element(2,"i",0),r.\u0275\u0275elementEnd()()}if(2&a){var e=r.\u0275\u0275nextContext(5);r.\u0275\u0275property("ngClass",e.getClassNames("removeButtonSize","rightAlign")),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngClass",e.getClassNames("button","removeButton"))("disabled",e.disabled),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngClass",e.getClassNames("removeIcon"))}}function p9(a,n){1&a&&r.\u0275\u0275elementContainer(0)}function h9(a,n){if(1&a&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,p9,1,0,"ng-container",10),r.\u0275\u0275elementContainerEnd()),2&a){var t=n.ngIf,e=r.\u0275\u0275nextContext(4).$implicit,o=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngTemplateOutlet",t)("ngTemplateOutletContext",o.getEntityContext(e))}}function m9(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"div",27),r.\u0275\u0275template(1,h9,2,2,"ng-container",3),r.\u0275\u0275elementEnd()),2&a){r.\u0275\u0275nextContext();var t=r.\u0275\u0275reference(6),e=r.\u0275\u0275nextContext(4);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.getEntityTemplate())("ngIfElse",t)}}function g9(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"option",30),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&a){var t=n.$implicit;r.\u0275\u0275property("ngValue",t.value),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",t.name," ")}}function v9(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",0)(1,"select",28),r.\u0275\u0275listener("ngModelChange",function(u){r.\u0275\u0275restoreView(t);var c=r.\u0275\u0275nextContext(3).$implicit;return r.\u0275\u0275resetView(c.entity=u)})("ngModelChange",function(u){r.\u0275\u0275restoreView(t);var c=r.\u0275\u0275nextContext(3),l=c.$implicit,m=c.index,C=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(C.changeEntity(u,l,m,C.data))}),r.\u0275\u0275template(2,g9,2,2,"option",29),r.\u0275\u0275elementEnd()()}if(2&a){var e=r.\u0275\u0275nextContext(3).$implicit,o=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("ngClass",o.getClassNames("entityControlSize")),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngClass",o.getClassNames("entityControl"))("ngModel",e.entity)("disabled",o.disabled),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",o.entities)}}function _9(a,n){1&a&&r.\u0275\u0275elementContainer(0)}function y9(a,n){if(1&a&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,_9,1,0,"ng-container",10),r.\u0275\u0275elementContainerEnd()),2&a){var t=n.ngIf,e=r.\u0275\u0275nextContext(3).$implicit,o=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngTemplateOutlet",t)("ngTemplateOutletContext",o.getFieldContext(e))}}function x9(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"option",30),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&a){var t=n.$implicit;r.\u0275\u0275property("ngValue",t.value),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",t.name," ")}}function b9(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",0)(1,"select",28),r.\u0275\u0275listener("ngModelChange",function(u){r.\u0275\u0275restoreView(t);var c=r.\u0275\u0275nextContext(3).$implicit;return r.\u0275\u0275resetView(c.field=u)})("ngModelChange",function(u){r.\u0275\u0275restoreView(t);var c=r.\u0275\u0275nextContext(3).$implicit,l=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(l.changeField(u,c))}),r.\u0275\u0275template(2,x9,2,2,"option",29),r.\u0275\u0275elementEnd()()}if(2&a){var e=r.\u0275\u0275nextContext(3).$implicit,o=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("ngClass",o.getClassNames("fieldControlSize")),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngClass",o.getClassNames("fieldControl"))("ngModel",e.field)("disabled",o.disabled),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",o.getFields(e.entity))}}function C9(a,n){1&a&&r.\u0275\u0275elementContainer(0)}function w9(a,n){if(1&a&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,C9,1,0,"ng-container",10),r.\u0275\u0275elementContainerEnd()),2&a){var t=n.ngIf,e=r.\u0275\u0275nextContext(3).$implicit,o=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngTemplateOutlet",t)("ngTemplateOutletContext",o.getOperatorContext(e))}}function S9(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"option",30),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&a){var t=n.$implicit;r.\u0275\u0275property("ngValue",t),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",t," ")}}function E9(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",0)(1,"select",28),r.\u0275\u0275listener("ngModelChange",function(u){r.\u0275\u0275restoreView(t);var c=r.\u0275\u0275nextContext(3).$implicit;return r.\u0275\u0275resetView(c.operator=u)})("ngModelChange",function(){r.\u0275\u0275restoreView(t);var u=r.\u0275\u0275nextContext(3).$implicit,c=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(c.changeOperator(u))}),r.\u0275\u0275template(2,S9,2,2,"option",29),r.\u0275\u0275elementEnd()()}if(2&a){var e=r.\u0275\u0275nextContext(3).$implicit,o=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("ngClass",o.getClassNames("operatorControlSize")),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngClass",o.getClassNames("operatorControl"))("ngModel",e.operator)("disabled",o.disabled),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",o.getOperators(e.field))}}function P9(a,n){1&a&&r.\u0275\u0275elementContainer(0)}function k9(a,n){if(1&a&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,P9,1,0,"ng-container",10),r.\u0275\u0275elementContainerEnd()),2&a){var t=n.ngIf,e=r.\u0275\u0275nextContext(3).$implicit,o=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngTemplateOutlet",t)("ngTemplateOutletContext",o.getInputContext(e))}}function A9(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"input",39),r.\u0275\u0275listener("ngModelChange",function(u){r.\u0275\u0275restoreView(t);var c=r.\u0275\u0275nextContext(4).$implicit;return r.\u0275\u0275resetView(c.value=u)})("ngModelChange",function(){r.\u0275\u0275restoreView(t);var u=r.\u0275\u0275nextContext(6);return r.\u0275\u0275resetView(u.changeInput())}),r.\u0275\u0275elementEnd()}if(2&a){var e=r.\u0275\u0275nextContext(4).$implicit,o=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("ngClass",o.getClassNames("inputControl"))("ngModel",e.value)("disabled",o.disabled)}}function R9(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"input",40),r.\u0275\u0275listener("ngModelChange",function(u){r.\u0275\u0275restoreView(t);var c=r.\u0275\u0275nextContext(4).$implicit;return r.\u0275\u0275resetView(c.value=u)})("ngModelChange",function(){r.\u0275\u0275restoreView(t);var u=r.\u0275\u0275nextContext(6);return r.\u0275\u0275resetView(u.changeInput())}),r.\u0275\u0275elementEnd()}if(2&a){var e=r.\u0275\u0275nextContext(4).$implicit,o=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("ngClass",o.getClassNames("inputControl"))("ngModel",e.value)("disabled",o.disabled)}}function D9(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"input",41),r.\u0275\u0275listener("ngModelChange",function(u){r.\u0275\u0275restoreView(t);var c=r.\u0275\u0275nextContext(4).$implicit;return r.\u0275\u0275resetView(c.value=u)})("ngModelChange",function(){r.\u0275\u0275restoreView(t);var u=r.\u0275\u0275nextContext(6);return r.\u0275\u0275resetView(u.changeInput())}),r.\u0275\u0275elementEnd()}if(2&a){var e=r.\u0275\u0275nextContext(4).$implicit,o=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("ngClass",o.getClassNames("inputControl"))("ngModel",e.value)("disabled",o.disabled)}}function T9(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"input",42),r.\u0275\u0275listener("ngModelChange",function(u){r.\u0275\u0275restoreView(t);var c=r.\u0275\u0275nextContext(4).$implicit;return r.\u0275\u0275resetView(c.value=u)})("ngModelChange",function(){r.\u0275\u0275restoreView(t);var u=r.\u0275\u0275nextContext(6);return r.\u0275\u0275resetView(u.changeInput())}),r.\u0275\u0275elementEnd()}if(2&a){var e=r.\u0275\u0275nextContext(4).$implicit,o=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("ngClass",o.getClassNames("inputControl"))("ngModel",e.value)("disabled",o.disabled)}}function I9(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"option",30),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&a){var t=n.$implicit;r.\u0275\u0275property("ngValue",t.value),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",t.name," ")}}function O9(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"select",28),r.\u0275\u0275listener("ngModelChange",function(u){r.\u0275\u0275restoreView(t);var c=r.\u0275\u0275nextContext(4).$implicit;return r.\u0275\u0275resetView(c.value=u)})("ngModelChange",function(){r.\u0275\u0275restoreView(t);var u=r.\u0275\u0275nextContext(6);return r.\u0275\u0275resetView(u.changeInput())}),r.\u0275\u0275template(1,I9,2,2,"option",29),r.\u0275\u0275elementEnd()}if(2&a){var e=r.\u0275\u0275nextContext(4).$implicit,o=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("ngClass",o.getClassNames("inputControl"))("ngModel",e.value)("disabled",o.disabled),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",o.getOptions(e.field))}}function F9(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"option",30),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&a){var t=n.$implicit;r.\u0275\u0275property("ngValue",t.value),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",t.name," ")}}function M9(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"select",43),r.\u0275\u0275listener("ngModelChange",function(u){r.\u0275\u0275restoreView(t);var c=r.\u0275\u0275nextContext(4).$implicit;return r.\u0275\u0275resetView(c.value=u)})("ngModelChange",function(){r.\u0275\u0275restoreView(t);var u=r.\u0275\u0275nextContext(6);return r.\u0275\u0275resetView(u.changeInput())}),r.\u0275\u0275template(2,F9,2,2,"option",29),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd()}if(2&a){var e=r.\u0275\u0275nextContext(4).$implicit,o=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngClass",o.getClassNames("inputControl"))("ngModel",e.value)("disabled",o.disabled),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",o.getOptions(e.field))}}function B9(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"input",44),r.\u0275\u0275listener("ngModelChange",function(u){r.\u0275\u0275restoreView(t);var c=r.\u0275\u0275nextContext(4).$implicit;return r.\u0275\u0275resetView(c.value=u)})("ngModelChange",function(){r.\u0275\u0275restoreView(t);var u=r.\u0275\u0275nextContext(6);return r.\u0275\u0275resetView(u.changeInput())}),r.\u0275\u0275elementEnd()}if(2&a){var e=r.\u0275\u0275nextContext(4).$implicit,o=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("ngClass",o.getClassNames("inputControl"))("ngModel",e.value)("disabled",o.disabled)}}function N9(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"div",31),r.\u0275\u0275template(1,A9,1,3,"input",32),r.\u0275\u0275template(2,R9,1,3,"input",33),r.\u0275\u0275template(3,D9,1,3,"input",34),r.\u0275\u0275template(4,T9,1,3,"input",35),r.\u0275\u0275template(5,O9,2,4,"select",36),r.\u0275\u0275template(6,M9,3,4,"ng-container",37),r.\u0275\u0275template(7,B9,1,3,"input",38),r.\u0275\u0275elementEnd()),2&a){var t=r.\u0275\u0275nextContext(3).$implicit,e=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("ngClass",e.getClassNames("inputControlSize"))("ngSwitch",e.getInputType(t.field,t.operator)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngSwitchCase","string"),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngSwitchCase","number"),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngSwitchCase","date"),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngSwitchCase","time"),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngSwitchCase","category"),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngSwitchCase","multiselect"),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngSwitchCase","boolean")}}function Z9(a,n){if(1&a&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,d9,3,3,"ng-container",3),r.\u0275\u0275template(2,f9,3,4,"ng-template",null,21,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275template(4,m9,2,2,"div",22),r.\u0275\u0275template(5,v9,3,5,"ng-template",null,23,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275template(7,y9,2,2,"ng-container",3),r.\u0275\u0275template(8,b9,3,5,"ng-template",null,24,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275template(10,w9,2,2,"ng-container",3),r.\u0275\u0275template(11,E9,3,5,"ng-template",null,25,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275template(13,k9,2,2,"ng-container",3),r.\u0275\u0275template(14,N9,8,9,"ng-template",null,26,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementContainerEnd()),2&a){var t=r.\u0275\u0275reference(3),e=r.\u0275\u0275reference(9),o=r.\u0275\u0275reference(12),s=r.\u0275\u0275reference(15),u=r.\u0275\u0275nextContext(2).$implicit,c=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",c.getRemoveButtonTemplate())("ngIfElse",t),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngIf",null==c.entities?null:c.entities.length),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngIf",c.getFieldTemplate())("ngIfElse",e),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngIf",c.getOperatorTemplate())("ngIfElse",o),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngIf",c.findTemplateForRule(u))("ngIfElse",s)}}function L9(a,n){if(1&a&&r.\u0275\u0275element(0,"query-builder",45),2&a){var t=r.\u0275\u0275nextContext(2).$implicit,e=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("data",t)("disabled",e.disabled)("parentTouchedCallback",e.parentTouchedCallback||e.onTouchedCallback)("parentChangeCallback",e.parentChangeCallback||e.onChangeCallback)("parentInputTemplates",e.parentInputTemplates||e.inputTemplates)("parentOperatorTemplate",e.parentOperatorTemplate||e.operatorTemplate)("parentFieldTemplate",e.parentFieldTemplate||e.fieldTemplate)("parentEntityTemplate",e.parentEntityTemplate||e.entityTemplate)("parentSwitchGroupTemplate",e.parentSwitchGroupTemplate||e.switchGroupTemplate)("parentButtonGroupTemplate",e.parentButtonGroupTemplate||e.buttonGroupTemplate)("parentRemoveButtonTemplate",e.parentRemoveButtonTemplate||e.removeButtonTemplate)("parentEmptyWarningTemplate",e.parentEmptyWarningTemplate||e.emptyWarningTemplate)("parentArrowIconTemplate",e.parentArrowIconTemplate||e.arrowIconTemplate)("parentValue",e.data)("classNames",e.classNames)("config",e.config)("allowRuleset",e.allowRuleset)("allowCollapse",e.allowCollapse)("emptyMessage",e.emptyMessage)("operatorMap",e.operatorMap)}}function j9(a,n){1&a&&r.\u0275\u0275elementContainer(0)}function $9(a,n){if(1&a&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,j9,1,0,"ng-container",10),r.\u0275\u0275elementContainerEnd()),2&a){var t=r.\u0275\u0275nextContext().ngIf,e=r.\u0275\u0275nextContext(4);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngTemplateOutlet",t)("ngTemplateOutletContext",e.getEmptyWarningContext())}}function U9(a,n){if(1&a&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,$9,2,2,"ng-container",13),r.\u0275\u0275elementContainerEnd()),2&a){var t=r.\u0275\u0275nextContext().ngIf;r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",t.invalid)}}function z9(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"p",0),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&a){var t=r.\u0275\u0275nextContext(5);r.\u0275\u0275property("ngClass",t.getClassNames("emptyWarning")),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",t.emptyMessage," ")}}function G9(a,n){if(1&a&&r.\u0275\u0275template(0,z9,2,2,"p",8),2&a){var t=r.\u0275\u0275nextContext().ngIf;r.\u0275\u0275property("ngIf",t.invalid)}}function V9(a,n){if(1&a&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"li",0),r.\u0275\u0275template(2,Z9,16,9,"ng-container",13),r.\u0275\u0275template(3,L9,1,20,"query-builder",19),r.\u0275\u0275template(4,U9,2,1,"ng-container",3),r.\u0275\u0275template(5,G9,1,1,"ng-template",null,20,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd()),2&a){var t=n.ngIf,e=r.\u0275\u0275reference(6),o=r.\u0275\u0275nextContext(3);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngClass",o.getQueryItemClassName(t)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!t.ruleset),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",t.ruleset),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",o.getEmptyWarningTemplate())("ngIfElse",e)}}var H9=function(n,t){return{ruleset:n,invalid:t}};function q9(a,n){if(1&a&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,V9,7,5,"ng-container",13),r.\u0275\u0275elementContainerEnd()),2&a){var t=n.$implicit,e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",r.\u0275\u0275pureFunction2(1,H9,!!t.rules,!e.config.allowEmptyRulesets&&t.rules&&0===t.rules.length))}}function K9(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"ul",0),r.\u0275\u0275template(1,q9,2,4,"ng-container",18),r.\u0275\u0275elementEnd()),2&a){var t=r.\u0275\u0275nextContext();r.\u0275\u0275property("ngClass",t.getClassNames("tree")),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",t.data.rules)}}var W9=function(){var a=(0,_.Z)(function n(t){(0,p.Z)(this,n),this.template=t});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(r.TemplateRef))},a.\u0275dir=r.\u0275\u0275defineDirective({type:a,selectors:[["","queryOperator",""]]}),a}(),X9=function(){var a=(0,_.Z)(function n(t){(0,p.Z)(this,n),this.template=t});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(r.TemplateRef))},a.\u0275dir=r.\u0275\u0275defineDirective({type:a,selectors:[["","queryField",""]]}),a}(),Q9=function(){var a=(0,_.Z)(function n(t){(0,p.Z)(this,n),this.template=t});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(r.TemplateRef))},a.\u0275dir=r.\u0275\u0275defineDirective({type:a,selectors:[["","queryEntity",""]]}),a}(),J9=function(){var a=(0,_.Z)(function n(t){(0,p.Z)(this,n),this.template=t});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(r.TemplateRef))},a.\u0275dir=r.\u0275\u0275defineDirective({type:a,selectors:[["","querySwitchGroup",""]]}),a}(),Y9=function(){var a=(0,_.Z)(function n(t){(0,p.Z)(this,n),this.template=t});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(r.TemplateRef))},a.\u0275dir=r.\u0275\u0275defineDirective({type:a,selectors:[["","queryButtonGroup",""]]}),a}(),eU=function(){var a=function(){function n(t){(0,p.Z)(this,n),this.template=t}return(0,_.Z)(n,[{key:"queryInputType",get:function(){return this._type},set:function(e){e&&(this._type=e)}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(r.TemplateRef))},a.\u0275dir=r.\u0275\u0275defineDirective({type:a,selectors:[["","queryInput",""]],inputs:{queryInputType:"queryInputType"}}),a}(),tU=function(){var a=(0,_.Z)(function n(t){(0,p.Z)(this,n),this.template=t});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(r.TemplateRef))},a.\u0275dir=r.\u0275\u0275defineDirective({type:a,selectors:[["","queryRemoveButton",""]]}),a}(),nU=function(){var a=(0,_.Z)(function n(t){(0,p.Z)(this,n),this.template=t});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(r.TemplateRef))},a.\u0275dir=r.\u0275\u0275defineDirective({type:a,selectors:[["","queryEmptyWarning",""]]}),a}(),rU=function(){var a=(0,_.Z)(function n(t){(0,p.Z)(this,n),this.template=t});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(r.TemplateRef))},a.\u0275dir=r.\u0275\u0275defineDirective({type:a,selectors:[["","queryArrowIcon",""]]}),a}(),iU={provide:v.JU,useExisting:(0,r.forwardRef)(function(){return Nk}),multi:!0},oU={provide:v.Cf,useExisting:(0,r.forwardRef)(function(){return Nk}),multi:!0},Nk=function(){var a=function(){function n(t){var e=this;(0,p.Z)(this,n),this.changeDetectorRef=t,this.defaultClassNames={arrowIconButton:"q-arrow-icon-button",arrowIcon:"q-icon q-arrow-icon",removeIcon:"q-icon q-remove-icon",addIcon:"q-icon q-add-icon",button:"q-button",buttonGroup:"q-button-group",removeButton:"q-remove-button",switchGroup:"q-switch-group",switchLabel:"q-switch-label",switchRadio:"q-switch-radio",rightAlign:"q-right-align",transition:"q-transition",collapsed:"q-collapsed",treeContainer:"q-tree-container",tree:"q-tree",row:"q-row",connector:"q-connector",rule:"q-rule",ruleSet:"q-ruleset",invalidRuleSet:"q-invalid-ruleset",emptyWarning:"q-empty-warning",fieldControl:"q-field-control",fieldControlSize:"q-control-size",entityControl:"q-entity-control",entityControlSize:"q-control-size",operatorControl:"q-operator-control",operatorControlSize:"q-control-size",inputControl:"q-input-control",inputControlSize:"q-control-size"},this.defaultOperatorMap={string:["=","!=","contains","like"],number:["=","!=",">",">=","<","<="],time:["=","!=",">",">=","<","<="],date:["=","!=",">",">=","<","<="],category:["=","!=","in","not in"],boolean:["="]},this.disabled=!1,this.data={condition:"and",rules:[]},this.allowRuleset=!0,this.allowCollapse=!1,this.emptyMessage="A ruleset cannot be empty. Please add a rule or remove it all together.",this.classNames={},this.operatorMap={},this.config={fields:{}},this.persistValueOnFieldChange=!1,this.defaultTemplateTypes=["string","number","time","date","category","boolean","multiselect"],this.defaultPersistValueTypes=["string","number","time","date","boolean"],this.defaultEmptyList=[],this.operatorsCache={},this.inputContextCache=new Map,this.operatorContextCache=new Map,this.fieldContextCache=new Map,this.entityContextCache=new Map,this.removeButtonContextCache=new Map,this.getDisabledState=function(){return e.disabled},this.fields=[],this.filterFields=[],this.entities=[]}return(0,_.Z)(n,[{key:"condintion",get:function(){var e;return null===(e=this.data)||void 0===e?void 0:e.condition}},{key:"ngOnChanges",value:function(e){var o=this.config,s=typeof o;if("object"!==s)throw new Error("Expected 'config' must be a valid object, got ".concat(s," instead."));this.fields=Object.keys(o.fields).map(function(u){var c=o.fields[u];return c.value=c.value||u,c}),this.entities=o.entities?Object.keys(o.entities).map(function(u){var c=o.entities?o.entities[u]:[];return c.value=c.value||u,c}):[],this.operatorsCache={}}},{key:"validate",value:function(e){var o={},s=[],u=!1;return!this.config.allowEmptyRulesets&&this.checkEmptyRuleInRuleset(this.data)&&(o.empty="Empty rulesets are not allowed.",u=!0),this.validateRulesInRuleset(this.data,s),s.length&&(o.rules=s,u=!0),u?o:null}},{key:"value",get:function(){return this.data},set:function(e){this.data=e||{condition:"and",rules:[]},this.handleDataChange()}},{key:"writeValue",value:function(e){this.value=e}},{key:"registerOnChange",value:function(e){var o=this;this.onChangeCallback=function(){return e(o.data)}}},{key:"registerOnTouched",value:function(e){var o=this;this.onTouchedCallback=function(){return e(o.data)}}},{key:"setDisabledState",value:function(e){this.disabled=e,this.changeDetectorRef.detectChanges()}},{key:"findTemplateForRule",value:function(e){var o=this.getInputType(e.field,e.operator);if(o){var s=this.findQueryInput(o);return s?s.template:(-1===this.defaultTemplateTypes.indexOf(o)&&console.warn("Could not find template for field with type: ".concat(o)),null)}}},{key:"findQueryInput",value:function(e){return(this.parentInputTemplates||this.inputTemplates).find(function(s){return s.queryInputType===e})}},{key:"getOperators",value:function(e){if(this.operatorsCache[e])return this.operatorsCache[e];var o=this.defaultEmptyList,s=this.config.fields[e];if(this.config.getOperators)return this.config.getOperators(e,s);var u=s.type;return s&&s.operators?o=s.operators:u?(0===(o=this.operatorMap&&this.operatorMap[u]||this.defaultOperatorMap[u]||this.defaultEmptyList).length&&console.warn("No operators found for field '".concat(e,"' with type ").concat(s.type,". ")+"Please define an 'operators' property on the field or use the 'operatorMap' binding to fix this."),s.nullable&&(o=o.concat(["is null","is not null"]))):console.warn("No 'type' property found on field: '".concat(e,"'")),this.operatorsCache[e]=o,o}},{key:"getFields",value:function(e){return this.entities.length&&e?this.fields.filter(function(o){return o&&o.entity===e}):this.fields}},{key:"getInputType",value:function(e,o){if(this.config.getInputType)return this.config.getInputType(e,o);if(!this.config.fields[e])throw new Error("No configuration for field '".concat(e,"' could be found! Please add it to config.fields."));var s=this.config.fields[e].type;switch(o){case"is null":case"is not null":return null;case"in":case"not in":return"category"===s||"boolean"===s?"multiselect":s;default:return s}}},{key:"getOptions",value:function(e){return this.config.getOptions?this.config.getOptions(e):this.config.fields[e].options||this.defaultEmptyList}},{key:"getClassNames",value:function(){for(var e=this.classNames?this.classNames:this.defaultClassNames,o=this.defaultClassNames,s=arguments.length,u=new Array(s),c=0;c<s;c++)u[c]=arguments[c];var l=u.map(function(m){return e[m]||o[m]}).filter(function(m){return!!m});return l.length?l.join(" "):[]}},{key:"getDefaultField",value:function(e){if(e){if(void 0!==e.defaultField)return this.getDefaultValue(e.defaultField);var o=this.fields.filter(function(s){return s&&s.entity===e.value});return o&&o.length?o[0]:(console.warn("No fields found for entity '".concat(e.name,"'. ")+"A 'defaultOperator' is also not specified on the field config. Operator value will default to null."),null)}return null}},{key:"getDefaultOperator",value:function(e){if(e&&void 0!==e.defaultOperator)return this.getDefaultValue(e.defaultOperator);var o=this.getOperators(e.value);return o&&o.length?o[0]:(console.warn("No operators found for field '".concat(e.value,"'. ")+"A 'defaultOperator' is also not specified on the field config. Operator value will default to null."),null)}},{key:"addRule",value:function(e){if(!this.disabled){if(e=e||this.data,this.config.addRule)this.config.addRule(e);else{var o=this.fields[0];e.rules=e.rules.concat([{field:o.value,operator:this.getDefaultOperator(o),value:this.getDefaultValue(o.defaultValue),entity:o.entity}])}this.handleTouched(),this.handleDataChange()}}},{key:"removeRule",value:function(e,o){this.disabled||(o=o||this.data,this.config.removeRule?this.config.removeRule(e,o):o.rules=o.rules.filter(function(s){return s!==e}),this.inputContextCache.delete(e),this.operatorContextCache.delete(e),this.fieldContextCache.delete(e),this.entityContextCache.delete(e),this.removeButtonContextCache.delete(e),this.handleTouched(),this.handleDataChange())}},{key:"addRuleSet",value:function(e){this.disabled||(e=e||this.data,this.config.addRuleSet?this.config.addRuleSet(e):e.rules=e.rules.concat([{condition:"and",rules:[]}]),this.handleTouched(),this.handleDataChange())}},{key:"removeRuleSet",value:function(e,o){this.disabled||(e=e||this.data,o=o||this.parentValue,this.config.removeRuleSet?this.config.removeRuleSet(e,o):o&&(o.rules=o.rules.filter(function(s){return s!==e})),this.handleTouched(),this.handleDataChange())}},{key:"transitionEnd",value:function(e){this.treeContainer.nativeElement.style.maxHeight=null}},{key:"toggleCollapse",value:function(){var e=this;this.computedTreeContainerHeight(),setTimeout(function(){e.data.collapsed=!e.data.collapsed},100)}},{key:"computedTreeContainerHeight",value:function(){var e=this.treeContainer.nativeElement;e&&e.firstElementChild&&(e.style.maxHeight=e.firstElementChild.clientHeight+8+"px")}},{key:"changeCondition",value:function(e){this.disabled||(this.data.condition=e,this.handleTouched(),this.handleDataChange())}},{key:"changeOperator",value:function(e){this.disabled||(e.value=this.config.coerceValueForOperator?this.config.coerceValueForOperator(e.operator,e.value,e):this.coerceValueForOperator(e.operator,e.value,e),this.handleTouched(),this.handleDataChange())}},{key:"coerceValueForOperator",value:function(e,o,s){return"multiselect"!==this.getInputType(s.field,e)||Array.isArray(o)?o:[o]}},{key:"changeInput",value:function(){this.disabled||(this.handleTouched(),this.handleDataChange())}},{key:"changeField",value:function(e,o){if(!this.disabled){var s=this.inputContextCache.get(o),c=this.config.fields[e],l=this.calculateFieldChangeValue(s&&s.field,c,o.value);void 0!==l?o.value=l:delete o.value,o.operator=this.getDefaultOperator(c),this.inputContextCache.delete(o),this.operatorContextCache.delete(o),this.fieldContextCache.delete(o),this.entityContextCache.delete(o),this.getInputContext(o),this.getFieldContext(o),this.getOperatorContext(o),this.getEntityContext(o),this.handleTouched(),this.handleDataChange()}}},{key:"changeEntity",value:function(e,o,s,u){if(!this.disabled){var c=s,l=u,m=this.entities.find(function(T){return T.value===e}),C=this.getDefaultField(m);l||(c=(l=this.data).rules.findIndex(function(T){return T===o})),o.field=C.value,l.rules[c]=o,C?this.changeField(C.value,o):(this.handleTouched(),this.handleDataChange())}}},{key:"getDefaultValue",value:function(e){return"function"==typeof e?e():e}},{key:"getOperatorTemplate",value:function(){var e=this.parentOperatorTemplate||this.operatorTemplate;return e?e.template:null}},{key:"getFieldTemplate",value:function(){var e=this.parentFieldTemplate||this.fieldTemplate;return e?e.template:null}},{key:"getEntityTemplate",value:function(){var e=this.parentEntityTemplate||this.entityTemplate;return e?e.template:null}},{key:"getArrowIconTemplate",value:function(){var e=this.parentArrowIconTemplate||this.arrowIconTemplate;return e?e.template:null}},{key:"getButtonGroupTemplate",value:function(){var e=this.parentButtonGroupTemplate||this.buttonGroupTemplate;return e?e.template:null}},{key:"getSwitchGroupTemplate",value:function(){var e=this.parentSwitchGroupTemplate||this.switchGroupTemplate;return e?e.template:null}},{key:"getRemoveButtonTemplate",value:function(){var e=this.parentRemoveButtonTemplate||this.removeButtonTemplate;return e?e.template:null}},{key:"getEmptyWarningTemplate",value:function(){var e=this.parentEmptyWarningTemplate||this.emptyWarningTemplate;return e?e.template:null}},{key:"getQueryItemClassName",value:function(e){var o=this.getClassNames("row","connector","transition");return o+=" "+this.getClassNames(e.ruleset?"ruleSet":"rule"),e.invalid&&(o+=" "+this.getClassNames("invalidRuleSet")),o}},{key:"getButtonGroupContext",value:function(){return this.buttonGroupContext||(this.buttonGroupContext={addRule:this.addRule.bind(this),addRuleSet:this.allowRuleset&&this.addRuleSet.bind(this),removeRuleSet:this.allowRuleset&&this.parentValue&&this.removeRuleSet.bind(this),getDisabledState:this.getDisabledState,$implicit:this.data}),this.buttonGroupContext}},{key:"getRemoveButtonContext",value:function(e){return this.removeButtonContextCache.has(e)||this.removeButtonContextCache.set(e,{removeRule:this.removeRule.bind(this),getDisabledState:this.getDisabledState,$implicit:e}),this.removeButtonContextCache.get(e)}},{key:"getFieldContext",value:function(e){return this.fieldContextCache.has(e)||this.fieldContextCache.set(e,{onChange:this.changeField.bind(this),getFields:this.getFields.bind(this),getDisabledState:this.getDisabledState,fields:this.fields,$implicit:e}),this.fieldContextCache.get(e)}},{key:"getEntityContext",value:function(e){return this.entityContextCache.has(e)||this.entityContextCache.set(e,{onChange:this.changeEntity.bind(this),getDisabledState:this.getDisabledState,entities:this.entities,$implicit:e}),this.entityContextCache.get(e)}},{key:"getSwitchGroupContext",value:function(){return{onChange:this.changeCondition.bind(this),getDisabledState:this.getDisabledState,$implicit:this.data}}},{key:"getArrowIconContext",value:function(){return{getDisabledState:this.getDisabledState,$implicit:this.data}}},{key:"getEmptyWarningContext",value:function(){return{getDisabledState:this.getDisabledState,message:this.emptyMessage,$implicit:this.data}}},{key:"getOperatorContext",value:function(e){return this.operatorContextCache.has(e)||this.operatorContextCache.set(e,{onChange:this.changeOperator.bind(this),getDisabledState:this.getDisabledState,operators:this.getOperators(e.field),$implicit:e}),this.operatorContextCache.get(e)}},{key:"getInputContext",value:function(e){return this.inputContextCache.has(e)||this.inputContextCache.set(e,{onChange:this.changeInput.bind(this),getDisabledState:this.getDisabledState,options:this.getOptions(e.field),field:this.config.fields[e.field],$implicit:e}),this.inputContextCache.get(e)}},{key:"calculateFieldChangeValue",value:function(e,o,s){return null!=this.config.calculateFieldChangeValue?this.config.calculateFieldChangeValue(e,o,s):this.persistValueOnFieldChange&&null!=e&&null!=o&&e.type===o.type&&-1!==this.defaultPersistValueTypes.indexOf(e.type)?s:o&&void 0!==o.defaultValue?this.getDefaultValue(o.defaultValue):void 0}},{key:"checkEmptyRuleInRuleset",value:function(e){var o=this;return!e||!e.rules||0===e.rules.length||e.rules.some(function(s){return!!s.rules&&o.checkEmptyRuleInRuleset(s)})}},{key:"validateRulesInRuleset",value:function(e,o){var s=this;e&&e.rules&&e.rules.length>0&&e.rules.forEach(function(u){if(u.rules)return s.validateRulesInRuleset(u,o);if(u.field){var c=s.config.fields[u.field];if(c&&c.validator){var l=c.validator(u,e);null!=l&&o.push(l)}}})}},{key:"handleDataChange",value:function(){this.changeDetectorRef.markForCheck(),this.onChangeCallback&&this.onChangeCallback(),this.parentChangeCallback&&this.parentChangeCallback()}},{key:"handleTouched",value:function(){this.onTouchedCallback&&this.onTouchedCallback(),this.parentTouchedCallback&&this.parentTouchedCallback()}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(r.ChangeDetectorRef))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["query-builder"]],contentQueries:function(t,e,o){var s;1&t&&(r.\u0275\u0275contentQuery(o,Y9,5),r.\u0275\u0275contentQuery(o,J9,5),r.\u0275\u0275contentQuery(o,X9,5),r.\u0275\u0275contentQuery(o,Q9,5),r.\u0275\u0275contentQuery(o,W9,5),r.\u0275\u0275contentQuery(o,tU,5),r.\u0275\u0275contentQuery(o,nU,5),r.\u0275\u0275contentQuery(o,rU,5),r.\u0275\u0275contentQuery(o,eU,5)),2&t&&(r.\u0275\u0275queryRefresh(s=r.\u0275\u0275loadQuery())&&(e.buttonGroupTemplate=s.first),r.\u0275\u0275queryRefresh(s=r.\u0275\u0275loadQuery())&&(e.switchGroupTemplate=s.first),r.\u0275\u0275queryRefresh(s=r.\u0275\u0275loadQuery())&&(e.fieldTemplate=s.first),r.\u0275\u0275queryRefresh(s=r.\u0275\u0275loadQuery())&&(e.entityTemplate=s.first),r.\u0275\u0275queryRefresh(s=r.\u0275\u0275loadQuery())&&(e.operatorTemplate=s.first),r.\u0275\u0275queryRefresh(s=r.\u0275\u0275loadQuery())&&(e.removeButtonTemplate=s.first),r.\u0275\u0275queryRefresh(s=r.\u0275\u0275loadQuery())&&(e.emptyWarningTemplate=s.first),r.\u0275\u0275queryRefresh(s=r.\u0275\u0275loadQuery())&&(e.arrowIconTemplate=s.first),r.\u0275\u0275queryRefresh(s=r.\u0275\u0275loadQuery())&&(e.inputTemplates=s))},viewQuery:function(t,e){var o;1&t&&r.\u0275\u0275viewQuery(X7,7),2&t&&r.\u0275\u0275queryRefresh(o=r.\u0275\u0275loadQuery())&&(e.treeContainer=o.first)},hostVars:1,hostBindings:function(t,e){2&t&&r.\u0275\u0275attribute("query-builder-condition",e.condintion)},inputs:{disabled:"disabled",data:"data",allowRuleset:"allowRuleset",allowCollapse:"allowCollapse",emptyMessage:"emptyMessage",classNames:"classNames",operatorMap:"operatorMap",parentValue:"parentValue",config:"config",parentArrowIconTemplate:"parentArrowIconTemplate",parentInputTemplates:"parentInputTemplates",parentOperatorTemplate:"parentOperatorTemplate",parentFieldTemplate:"parentFieldTemplate",parentEntityTemplate:"parentEntityTemplate",parentSwitchGroupTemplate:"parentSwitchGroupTemplate",parentButtonGroupTemplate:"parentButtonGroupTemplate",parentRemoveButtonTemplate:"parentRemoveButtonTemplate",parentEmptyWarningTemplate:"parentEmptyWarningTemplate",parentChangeCallback:"parentChangeCallback",parentTouchedCallback:"parentTouchedCallback",persistValueOnFieldChange:"persistValueOnFieldChange",value:"value"},features:[r.\u0275\u0275ProvidersFeature([iU,oU]),r.\u0275\u0275NgOnChangesFeature],decls:13,vars:8,consts:[[3,"ngClass"],["defaultArrowIcon",""],[3,"ngClass","click",4,"ngIf"],[4,"ngIf","ngIfElse"],["defaultButtonGroup",""],["defaultSwitchGroup",""],[3,"ngClass","transitionend"],["treeContainer",""],[3,"ngClass",4,"ngIf"],[3,"ngClass","click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["type","button",3,"ngClass","disabled","click"],["type","button",3,"ngClass","disabled","click",4,"ngIf"],[4,"ngIf"],["type","radio","value","and",3,"ngClass","ngModel","disabled","ngModelChange"],["andOption",""],["type","radio","value","or",3,"ngClass","ngModel","disabled","ngModelChange"],["orOption",""],[4,"ngFor","ngForOf"],[3,"data","disabled","parentTouchedCallback","parentChangeCallback","parentInputTemplates","parentOperatorTemplate","parentFieldTemplate","parentEntityTemplate","parentSwitchGroupTemplate","parentButtonGroupTemplate","parentRemoveButtonTemplate","parentEmptyWarningTemplate","parentArrowIconTemplate","parentValue","classNames","config","allowRuleset","allowCollapse","emptyMessage","operatorMap",4,"ngIf"],["defaultEmptyWarning",""],["defaultRemoveButton",""],["class","q-inline-block-display",4,"ngIf"],["defaultEntity",""],["defaultField",""],["defaultOperator",""],["defaultInput",""],[1,"q-inline-block-display"],[3,"ngClass","ngModel","disabled","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[3,"ngClass","ngSwitch"],["type","text",3,"ngClass","ngModel","disabled","ngModelChange",4,"ngSwitchCase"],["type","number",3,"ngClass","ngModel","disabled","ngModelChange",4,"ngSwitchCase"],["type","date",3,"ngClass","ngModel","disabled","ngModelChange",4,"ngSwitchCase"],["type","time",3,"ngClass","ngModel","disabled","ngModelChange",4,"ngSwitchCase"],[3,"ngClass","ngModel","disabled","ngModelChange",4,"ngSwitchCase"],[4,"ngSwitchCase"],["type","checkbox",3,"ngClass","ngModel","disabled","ngModelChange",4,"ngSwitchCase"],["type","text",3,"ngClass","ngModel","disabled","ngModelChange"],["type","number",3,"ngClass","ngModel","disabled","ngModelChange"],["type","date",3,"ngClass","ngModel","disabled","ngModelChange"],["type","time",3,"ngClass","ngModel","disabled","ngModelChange"],["multiple","",3,"ngClass","ngModel","disabled","ngModelChange"],["type","checkbox",3,"ngClass","ngModel","disabled","ngModelChange"],[3,"data","disabled","parentTouchedCallback","parentChangeCallback","parentInputTemplates","parentOperatorTemplate","parentFieldTemplate","parentEntityTemplate","parentSwitchGroupTemplate","parentButtonGroupTemplate","parentRemoveButtonTemplate","parentEmptyWarningTemplate","parentArrowIconTemplate","parentValue","classNames","config","allowRuleset","allowCollapse","emptyMessage","operatorMap"]],template:function(t,e){if(1&t&&(r.\u0275\u0275elementStart(0,"div",0),r.\u0275\u0275template(1,Q7,1,1,"ng-template",null,1,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275template(3,e9,2,3,"a",2),r.\u0275\u0275template(4,n9,3,3,"ng-container",3),r.\u0275\u0275template(5,o9,6,6,"ng-template",null,4,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275template(7,s9,2,2,"ng-container",3),r.\u0275\u0275template(8,c9,1,1,"ng-template",null,5,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(10,"div",6,7),r.\u0275\u0275listener("transitionend",function(c){return e.transitionEnd(c)}),r.\u0275\u0275template(12,K9,2,2,"ul",8),r.\u0275\u0275elementEnd()),2&t){var o=r.\u0275\u0275reference(6),s=r.\u0275\u0275reference(9);r.\u0275\u0275property("ngClass",e.getClassNames("switchRow")),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngIf",e.allowCollapse),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.getButtonGroupTemplate())("ngIfElse",o),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngIf",e.getSwitchGroupTemplate())("ngIfElse",s),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngClass",e.getClassNames("treeContainer",e.data.collapsed?"collapsed":"")),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",e.data&&e.data.rules)}},dependencies:[E.NgClass,E.NgForOf,E.NgIf,E.NgTemplateOutlet,E.NgSwitch,E.NgSwitchCase,v.YN,v.Kr,v.Fj,v.wV,v.Wl,v.EJ,v.K7,v._,v.JJ,v.On,a],styles:['@charset "UTF-8";[_nghost-%COMP%]{display:block;width:100%}[_nghost-%COMP%]   .q-icon[_ngcontent-%COMP%]{font-style:normal;font-size:12px}[_nghost-%COMP%]   .q-remove-icon[_ngcontent-%COMP%]:before{content:"\\274c"}[_nghost-%COMP%]   .q-arrow-icon-button[_ngcontent-%COMP%]{float:left;margin:4px 6px 4px 0;transform:rotate(90deg);transition:linear .25s transform;cursor:pointer}[_nghost-%COMP%]   .q-arrow-icon-button.q-collapsed[_ngcontent-%COMP%]{transform:rotate(0)}[_nghost-%COMP%]   .q-arrow-icon[_ngcontent-%COMP%]:before{content:"\\25b6"}[_nghost-%COMP%]   .q-add-icon[_ngcontent-%COMP%]{color:#555}[_nghost-%COMP%]   .q-add-icon[_ngcontent-%COMP%]:before{content:"\\2795"}[_nghost-%COMP%]   .q-remove-button[_ngcontent-%COMP%]{color:#b3415d;width:31px}[_nghost-%COMP%]   .q-switch-group[_ngcontent-%COMP%], [_nghost-%COMP%]   .q-button-group[_ngcontent-%COMP%]{font-family:Lucida Grande,Tahoma,Verdana,sans-serif;overflow:hidden}[_nghost-%COMP%]   .q-right-align[_ngcontent-%COMP%]{float:right}[_nghost-%COMP%]   .q-button[_ngcontent-%COMP%]{margin-left:8px;padding:0 8px;background-color:#fff}[_nghost-%COMP%]   .q-button[_ngcontent-%COMP%]:disabled{display:none}[_nghost-%COMP%]   .q-control-size[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;padding-right:10px}[_nghost-%COMP%]   .q-input-control[_ngcontent-%COMP%], [_nghost-%COMP%]   .q-operator-control[_ngcontent-%COMP%], [_nghost-%COMP%]   .q-field-control[_ngcontent-%COMP%], [_nghost-%COMP%]   .q-entity-control[_ngcontent-%COMP%]{display:inline-block;padding:5px 8px;color:#555;background-color:#fff;background-image:none;border:1px solid #ccc;border-radius:4px;box-sizing:border-box;width:auto;min-width:180px}[_nghost-%COMP%]   .q-input-control[_ngcontent-%COMP%]:disabled, [_nghost-%COMP%]   .q-operator-control[_ngcontent-%COMP%]:disabled, [_nghost-%COMP%]   .q-field-control[_ngcontent-%COMP%]:disabled, [_nghost-%COMP%]   .q-entity-control[_ngcontent-%COMP%]:disabled{border-color:transparent}[_nghost-%COMP%]   .q-operator-control[_ngcontent-%COMP%], [_nghost-%COMP%]   .q-field-control[_ngcontent-%COMP%], [_nghost-%COMP%]   .q-entity-control[_ngcontent-%COMP%], [_nghost-%COMP%]   .q-input-control[_ngcontent-%COMP%]:not([type=checkbox]){min-height:32px;-webkit-appearance:none}[_nghost-%COMP%]   .q-switch-label[_ngcontent-%COMP%], [_nghost-%COMP%]   .q-button[_ngcontent-%COMP%]{float:left;margin-bottom:0;font-size:14px;line-height:30px;font-weight:400;text-align:center;text-shadow:none;border:1px solid rgba(0,0,0,.2);box-sizing:border-box}[_nghost-%COMP%]   .q-switch-label[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .q-button[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#f0f0f0}[_nghost-%COMP%]   .q-switch-label[_ngcontent-%COMP%]{background-color:#e4e4e4;padding:0 8px}[_nghost-%COMP%]   .q-switch-radio[_ngcontent-%COMP%]{position:absolute;clip:rect(0,0,0,0);height:1px;width:1px;border:0;overflow:hidden}[_nghost-%COMP%]   .q-switch-radio[_ngcontent-%COMP%]:checked + .q-switch-label[_ngcontent-%COMP%]{border:1px solid rgb(97,158,215);background:white;color:#3176b3}[_nghost-%COMP%]   .q-switch-radio[_ngcontent-%COMP%]:disabled + .q-switch-label[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .q-switch-radio[_ngcontent-%COMP%]:checked:disabled + .q-switch-label[_ngcontent-%COMP%]{display:initial;color:initial;cursor:default;border-color:transparent}[_nghost-%COMP%]   .q-invalid-ruleset[_ngcontent-%COMP%]{border:1px solid rgba(179,65,93,.5)!important;background:rgba(179,65,93,.1)!important}[_nghost-%COMP%]   .q-empty-warning[_ngcontent-%COMP%]{color:#8d252e;text-align:center}[_nghost-%COMP%]   .q-ruleset[_ngcontent-%COMP%]{border:1px solid #CCC}[_nghost-%COMP%]   .q-rule[_ngcontent-%COMP%]{border:1px solid #CCC;background:white}[_nghost-%COMP%]   .q-transition[_ngcontent-%COMP%]{transition:all .1s ease-in-out}[_nghost-%COMP%]   .q-tree-container[_ngcontent-%COMP%]{width:100%;overflow:hidden;transition:ease-in .25s max-height}[_nghost-%COMP%]   .q-tree-container.q-collapsed[_ngcontent-%COMP%]{max-height:0!important}[_nghost-%COMP%]   .q-tree[_ngcontent-%COMP%]{list-style:none;margin:4px 0 2px}[_nghost-%COMP%]   .q-row[_ngcontent-%COMP%]{padding:6px 8px;margin-top:6px}[_nghost-%COMP%]   .q-connector[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .q-connector[_ngcontent-%COMP%]:before{top:-5px;border-width:0 0 2px 2px}[_nghost-%COMP%]   .q-connector[_ngcontent-%COMP%]:after{border-width:0 0 0 2px;top:50%}[_nghost-%COMP%]   .q-connector[_ngcontent-%COMP%]:before, [_nghost-%COMP%]   .q-connector[_ngcontent-%COMP%]:after{content:"";left:-12px;border-color:#ccc;border-style:solid;width:9px;height:calc(50% + 6px);position:absolute}[_nghost-%COMP%]   .q-connector[_ngcontent-%COMP%]:last-child:after{content:none}[_nghost-%COMP%]   .q-inline-block-display[_ngcontent-%COMP%]{display:inline-block;vertical-align:top}']}),a}(),aU=function(){var a=(0,_.Z)(function n(){(0,p.Z)(this,n)});return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({imports:[E.CommonModule,v.u5]}),a}();function sU(a,n){if(1&a&&r.\u0275\u0275element(0,"div",3),2&a){var t=n.index,e=r.\u0275\u0275nextContext();r.\u0275\u0275property("ngStyle",e.gridRenderer.getGridColumnStyle(t))}}function uU(a,n){if(1&a&&r.\u0275\u0275element(0,"div",4),2&a){var t=n.index,e=r.\u0275\u0275nextContext();r.\u0275\u0275property("ngStyle",e.gridRenderer.getGridRowStyle(t))}}var o3=["*"];function cU(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",8),r.\u0275\u0275listener("mousedown",function(o){r.\u0275\u0275restoreView(t);var s=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(s.resize.dragStartDelay(o))})("touchstart",function(o){r.\u0275\u0275restoreView(t);var s=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(s.resize.dragStartDelay(o))}),r.\u0275\u0275elementEnd()}}function lU(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",9),r.\u0275\u0275listener("mousedown",function(o){r.\u0275\u0275restoreView(t);var s=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(s.resize.dragStartDelay(o))})("touchstart",function(o){r.\u0275\u0275restoreView(t);var s=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(s.resize.dragStartDelay(o))}),r.\u0275\u0275elementEnd()}}function dU(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",10),r.\u0275\u0275listener("mousedown",function(o){r.\u0275\u0275restoreView(t);var s=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(s.resize.dragStartDelay(o))})("touchstart",function(o){r.\u0275\u0275restoreView(t);var s=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(s.resize.dragStartDelay(o))}),r.\u0275\u0275elementEnd()}}function fU(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",11),r.\u0275\u0275listener("mousedown",function(o){r.\u0275\u0275restoreView(t);var s=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(s.resize.dragStartDelay(o))})("touchstart",function(o){r.\u0275\u0275restoreView(t);var s=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(s.resize.dragStartDelay(o))}),r.\u0275\u0275elementEnd()}}function pU(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",12),r.\u0275\u0275listener("mousedown",function(o){r.\u0275\u0275restoreView(t);var s=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(s.resize.dragStartDelay(o))})("touchstart",function(o){r.\u0275\u0275restoreView(t);var s=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(s.resize.dragStartDelay(o))}),r.\u0275\u0275elementEnd()}}function hU(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",13),r.\u0275\u0275listener("mousedown",function(o){r.\u0275\u0275restoreView(t);var s=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(s.resize.dragStartDelay(o))})("touchstart",function(o){r.\u0275\u0275restoreView(t);var s=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(s.resize.dragStartDelay(o))}),r.\u0275\u0275elementEnd()}}function mU(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",14),r.\u0275\u0275listener("mousedown",function(o){r.\u0275\u0275restoreView(t);var s=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(s.resize.dragStartDelay(o))})("touchstart",function(o){r.\u0275\u0275restoreView(t);var s=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(s.resize.dragStartDelay(o))}),r.\u0275\u0275elementEnd()}}function gU(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",15),r.\u0275\u0275listener("mousedown",function(o){r.\u0275\u0275restoreView(t);var s=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(s.resize.dragStartDelay(o))})("touchstart",function(o){r.\u0275\u0275restoreView(t);var s=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(s.resize.dragStartDelay(o))}),r.\u0275\u0275elementEnd()}}var ly,Oc,fa,dy,Zs,fy,py,hy,my,Hn=function(){return(Hn=Hn||{}).Fit="fit",Hn.ScrollVertical="scrollVertical",Hn.ScrollHorizontal="scrollHorizontal",Hn.Fixed="fixed",Hn.VerticalFixed="verticalFixed",Hn.HorizontalFixed="horizontalFixed",Hn}(),Au=function(){return(Au=Au||{}).Always="always",Au.OnDragAndResize="onDrag&Resize",Au.None="none",Au}(),Xn=function(){return(Xn=Xn||{}).None="none",Xn.CompactUp="compactUp",Xn.CompactLeft="compactLeft",Xn.CompactUpAndLeft="compactUp&Left",Xn.CompactLeftAndUp="compactLeft&Up",Xn.CompactRight="compactRight",Xn.CompactUpAndRight="compactUp&Right",Xn.CompactRightAndUp="compactRight&Up",Xn.CompactDown="compactDown",Xn.CompactDownAndLeft="compactDown&Left",Xn.CompactLeftAndDown="compactLeft&Down",Xn.CompactDownAndRight="compactDown&Right",Xn.CompactRightAndDown="compactRight&Down",Xn}(),mi=function(){return(mi=mi||{}).LTR="ltr",mi.RTL="rtl",mi}(),vU=function(){function a(n){(0,p.Z)(this,a),this.gridster=n}return(0,_.Z)(a,[{key:"destroy",value:function(){this.gridster=null}},{key:"checkCompact",value:function(){this.gridster.$options.compactType!==Xn.None&&(this.gridster.$options.compactType===Xn.CompactUp?this.checkCompactMovement("y",-1):this.gridster.$options.compactType===Xn.CompactLeft?this.checkCompactMovement("x",-1):this.gridster.$options.compactType===Xn.CompactUpAndLeft?(this.checkCompactMovement("y",-1),this.checkCompactMovement("x",-1)):this.gridster.$options.compactType===Xn.CompactLeftAndUp?(this.checkCompactMovement("x",-1),this.checkCompactMovement("y",-1)):this.gridster.$options.compactType===Xn.CompactRight?this.checkCompactMovement("x",1):this.gridster.$options.compactType===Xn.CompactUpAndRight?(this.checkCompactMovement("y",-1),this.checkCompactMovement("x",1)):this.gridster.$options.compactType===Xn.CompactRightAndUp?(this.checkCompactMovement("x",1),this.checkCompactMovement("y",-1)):this.gridster.$options.compactType===Xn.CompactDown?this.checkCompactMovement("y",1):this.gridster.$options.compactType===Xn.CompactDownAndLeft?(this.checkCompactMovement("y",1),this.checkCompactMovement("x",-1)):this.gridster.$options.compactType===Xn.CompactDownAndRight?(this.checkCompactMovement("y",1),this.checkCompactMovement("x",1)):this.gridster.$options.compactType===Xn.CompactLeftAndDown?(this.checkCompactMovement("x",-1),this.checkCompactMovement("y",1)):this.gridster.$options.compactType===Xn.CompactRightAndDown&&(this.checkCompactMovement("x",1),this.checkCompactMovement("y",1)))}},{key:"checkCompactItem",value:function(t){this.gridster.$options.compactType!==Xn.None&&(this.gridster.$options.compactType===Xn.CompactUp?this.moveTillCollision(t,"y",-1):this.gridster.$options.compactType===Xn.CompactLeft?this.moveTillCollision(t,"x",-1):this.gridster.$options.compactType===Xn.CompactUpAndLeft?(this.moveTillCollision(t,"y",-1),this.moveTillCollision(t,"x",-1)):this.gridster.$options.compactType===Xn.CompactLeftAndUp?(this.moveTillCollision(t,"x",-1),this.moveTillCollision(t,"y",-1)):this.gridster.$options.compactType===Xn.CompactUpAndRight?(this.moveTillCollision(t,"y",-1),this.moveTillCollision(t,"x",1)):this.gridster.$options.compactType===Xn.CompactDown?this.moveTillCollision(t,"y",1):this.gridster.$options.compactType===Xn.CompactDownAndLeft?(this.moveTillCollision(t,"y",1),this.moveTillCollision(t,"x",-1)):this.gridster.$options.compactType===Xn.CompactLeftAndDown?(this.moveTillCollision(t,"x",-1),this.moveTillCollision(t,"y",1)):this.gridster.$options.compactType===Xn.CompactDownAndRight?(this.moveTillCollision(t,"y",1),this.moveTillCollision(t,"x",1)):this.gridster.$options.compactType===Xn.CompactRightAndDown&&(this.moveTillCollision(t,"x",1),this.moveTillCollision(t,"y",1)))}},{key:"checkCompactMovement",value:function(t,e){var o=this,s=!1;this.gridster.grid.forEach(function(u){!1!==u.$item.compactEnabled&&o.moveTillCollision(u.$item,t,e)&&(s=!0,u.item[t]=u.$item[t],u.itemChanged())}),s&&this.checkCompact()}},{key:"moveTillCollision",value:function(t,e,o){return t[e]+=o,this.gridster.checkCollision(t)?(t[e]-=o,!1):(this.moveTillCollision(t,e,o),!0)}}]),a}(),_U={gridType:Hn.Fit,scale:1,fixedColWidth:250,fixedRowHeight:250,keepFixedHeightInMobile:!1,keepFixedWidthInMobile:!1,setGridSize:!1,compactType:Xn.None,mobileBreakpoint:640,useBodyForBreakpoint:!1,allowMultiLayer:!1,defaultLayerIndex:0,maxLayerIndex:2,baseLayerIndex:1,minCols:1,maxCols:100,minRows:1,maxRows:100,defaultItemCols:1,defaultItemRows:1,maxItemCols:50,maxItemRows:50,minItemCols:1,minItemRows:1,minItemArea:1,maxItemArea:2500,addEmptyRowsCount:0,rowHeightRatio:1,margin:10,outerMargin:!0,outerMarginTop:null,outerMarginRight:null,outerMarginBottom:null,outerMarginLeft:null,useTransformPositioning:!0,scrollSensitivity:10,scrollSpeed:20,initCallback:void 0,destroyCallback:void 0,gridSizeChangedCallback:void 0,itemChangeCallback:void 0,itemResizeCallback:void 0,itemInitCallback:void 0,itemRemovedCallback:void 0,itemValidateCallback:void 0,enableEmptyCellClick:!1,enableEmptyCellContextMenu:!1,enableEmptyCellDrop:!1,enableEmptyCellDrag:!1,enableOccupiedCellDrop:!1,emptyCellClickCallback:void 0,emptyCellContextMenuCallback:void 0,emptyCellDropCallback:void 0,emptyCellDragCallback:void 0,emptyCellDragMaxCols:50,emptyCellDragMaxRows:50,ignoreMarginInRow:!1,draggable:{delayStart:0,enabled:!1,ignoreContentClass:"gridster-item-content",ignoreContent:!1,dragHandleClass:"drag-handler",stop:void 0,start:void 0,dropOverItems:!1,dropOverItemsCallback:void 0},resizable:{delayStart:0,enabled:!1,handles:{s:!0,e:!0,n:!0,w:!0,se:!0,ne:!0,sw:!0,nw:!0},stop:void 0,start:void 0},swap:!0,swapWhileDragging:!1,pushItems:!1,disablePushOnDrag:!1,disablePushOnResize:!1,pushDirections:{north:!0,east:!0,south:!0,west:!0},pushResizeItems:!1,displayGrid:Au.OnDragAndResize,disableWindowResize:!1,disableWarnings:!1,scrollToNewItems:!1,disableScrollHorizontal:!1,disableScrollVertical:!1,enableBoundaryControl:!1,disableAutoPositionOnConflict:!1,dirType:mi.LTR},Bo=function(){function a(){(0,p.Z)(this,a)}return(0,_.Z)(a,null,[{key:"merge",value:function(t,e,o){for(var s in e)void 0!==e[s]&&o.hasOwnProperty(s)&&("object"==typeof e[s]?(s in t||(t[s]={}),t[s]=a.merge(t[s],e[s],o[s])):t[s]=e[s]);return t}},{key:"checkTouchEvent",value:function(t){void 0===t.clientX&&t.touches&&(t.touches&&t.touches.length?(t.clientX=t.touches[0].clientX,t.clientY=t.touches[0].clientY):t.changedTouches&&t.changedTouches.length&&(t.clientX=t.changedTouches[0].clientX,t.clientY=t.changedTouches[0].clientY))}},{key:"checkContentClassForEvent",value:function(t,e){if(t.$options.draggable.ignoreContent){if(!a.checkDragHandleClass(e.target,e.currentTarget,t.$options.draggable.dragHandleClass,t.$options.draggable.ignoreContentClass))return!0}else if(a.checkContentClass(e.target,e.currentTarget,t.$options.draggable.ignoreContentClass))return!0;return!1}},{key:"checkContentClassForEmptyCellClickEvent",value:function(t,e){return a.checkContentClass(e.target,e.currentTarget,t.$options.draggable.ignoreContentClass)||a.checkContentClass(e.target,e.currentTarget,t.$options.draggable.dragHandleClass)}},{key:"checkDragHandleClass",value:function(t,e,o,s){if(!t||t===e)return!1;if(t.hasAttribute("class")){var u=t.getAttribute("class").split(" ");if(u.indexOf(o)>-1)return!0;if(u.indexOf(s)>-1)return!1}return a.checkDragHandleClass(t.parentNode,e,o,s)}},{key:"checkContentClass",value:function(t,e,o){return!(!t||t===e)&&(!!(t.hasAttribute("class")&&t.getAttribute("class").split(" ").indexOf(o)>-1)||a.checkContentClass(t.parentNode,e,o))}},{key:"compareItems",value:function(t,e){return t.y>e.y?-1:t.y<e.y?1:t.x>e.x?-1:1}}]),a}(),yU=function(){function a(n){var t=this;(0,p.Z)(this,a),this.gridster=n,this.emptyCellClickCb=function(e){if(t.gridster&&!t.gridster.movingItem&&!Bo.checkContentClassForEmptyCellClickEvent(t.gridster,e)){var o=t.getValidItemFromEvent(e);o&&(t.gridster.options.emptyCellClickCallback&&t.gridster.options.emptyCellClickCallback(e,o),t.gridster.cdRef.markForCheck())}},this.emptyCellContextMenuCb=function(e){if(!t.gridster.movingItem&&!Bo.checkContentClassForEmptyCellClickEvent(t.gridster,e)){e.preventDefault(),e.stopPropagation();var o=t.getValidItemFromEvent(e);o&&(t.gridster.options.emptyCellContextMenuCallback&&t.gridster.options.emptyCellContextMenuCallback(e,o),t.gridster.cdRef.markForCheck())}},this.emptyCellDragDrop=function(e){var o=t.getValidItemFromEvent(e);o&&(t.gridster.options.emptyCellDropCallback&&t.gridster.options.emptyCellDropCallback(e,o),t.gridster.cdRef.markForCheck())},this.emptyCellDragOver=function(e){e.preventDefault(),e.stopPropagation();var o=t.getValidItemFromEvent(e);o?(e.dataTransfer&&(e.dataTransfer.dropEffect="move"),t.gridster.movingItem=o):(e.dataTransfer&&(e.dataTransfer.dropEffect="none"),t.gridster.movingItem=null),t.gridster.previewStyle()},this.emptyCellMouseDown=function(e){if(!Bo.checkContentClassForEmptyCellClickEvent(t.gridster,e)){e.preventDefault(),e.stopPropagation();var o=t.getValidItemFromEvent(e);!o||1!==e.buttons&&!(e instanceof TouchEvent)||(t.initialItem=o,t.gridster.movingItem=o,t.gridster.previewStyle(),t.gridster.zone.runOutsideAngular(function(){t.removeWindowMousemoveListenerFn=t.gridster.renderer.listen("window","mousemove",t.emptyCellMouseMove),t.removeWindowTouchmoveListenerFn=t.gridster.renderer.listen("window","touchmove",t.emptyCellMouseMove)}),t.removeWindowMouseupListenerFn=t.gridster.renderer.listen("window","mouseup",t.emptyCellMouseUp),t.removeWindowTouchendListenerFn=t.gridster.renderer.listen("window","touchend",t.emptyCellMouseUp))}},this.emptyCellMouseMove=function(e){e.preventDefault(),e.stopPropagation();var o=t.getValidItemFromEvent(e,t.initialItem);o&&(t.gridster.movingItem=o,t.gridster.previewStyle())},this.emptyCellMouseUp=function(e){t.removeWindowMousemoveListenerFn(),t.removeWindowTouchmoveListenerFn(),t.removeWindowMouseupListenerFn(),t.removeWindowTouchendListenerFn();var o=t.getValidItemFromEvent(e,t.initialItem);o&&(t.gridster.movingItem=o),t.gridster.options.emptyCellDragCallback&&t.gridster.movingItem&&t.gridster.options.emptyCellDragCallback(e,t.gridster.movingItem),setTimeout(function(){t.initialItem=null,t.gridster&&(t.gridster.movingItem=null,t.gridster.previewStyle())}),t.gridster.cdRef.markForCheck()}}return(0,_.Z)(a,[{key:"destroy",value:function(){this.gridster.previewStyle&&this.gridster.previewStyle(),this.gridster.movingItem=null,this.initialItem=this.gridster=null,this.removeDocumentDragendListenerFn&&(this.removeDocumentDragendListenerFn(),this.removeDocumentDragendListenerFn=null)}},{key:"updateOptions",value:function(){var t=this;this.gridster.$options.enableEmptyCellClick&&!this.removeEmptyCellClickListenerFn&&this.gridster.options.emptyCellClickCallback?(this.removeEmptyCellClickListenerFn=this.gridster.renderer.listen(this.gridster.el,"click",this.emptyCellClickCb),this.removeEmptyCellTouchendListenerFn=this.gridster.renderer.listen(this.gridster.el,"touchend",this.emptyCellClickCb)):!this.gridster.$options.enableEmptyCellClick&&this.removeEmptyCellClickListenerFn&&this.removeEmptyCellTouchendListenerFn&&(this.removeEmptyCellClickListenerFn(),this.removeEmptyCellTouchendListenerFn(),this.removeEmptyCellClickListenerFn=null,this.removeEmptyCellTouchendListenerFn=null),this.gridster.$options.enableEmptyCellContextMenu&&!this.removeEmptyCellContextMenuListenerFn&&this.gridster.options.emptyCellContextMenuCallback?this.removeEmptyCellContextMenuListenerFn=this.gridster.renderer.listen(this.gridster.el,"contextmenu",this.emptyCellContextMenuCb):!this.gridster.$options.enableEmptyCellContextMenu&&this.removeEmptyCellContextMenuListenerFn&&(this.removeEmptyCellContextMenuListenerFn(),this.removeEmptyCellContextMenuListenerFn=null),this.gridster.$options.enableEmptyCellDrop&&!this.removeEmptyCellDropListenerFn&&this.gridster.options.emptyCellDropCallback?(this.removeEmptyCellDropListenerFn=this.gridster.renderer.listen(this.gridster.el,"drop",this.emptyCellDragDrop),this.gridster.zone.runOutsideAngular(function(){t.removeEmptyCellDragoverListenerFn=t.gridster.renderer.listen(t.gridster.el,"dragover",t.emptyCellDragOver)}),this.removeDocumentDragendListenerFn=this.gridster.renderer.listen("document","dragend",function(){t.gridster.movingItem=null,t.gridster.previewStyle()})):!this.gridster.$options.enableEmptyCellDrop&&this.removeEmptyCellDropListenerFn&&this.removeEmptyCellDragoverListenerFn&&this.removeDocumentDragendListenerFn&&(this.removeEmptyCellDropListenerFn(),this.removeEmptyCellDragoverListenerFn(),this.removeDocumentDragendListenerFn(),this.removeEmptyCellDragoverListenerFn=null,this.removeEmptyCellDropListenerFn=null,this.removeDocumentDragendListenerFn=null),this.gridster.$options.enableEmptyCellDrag&&!this.removeEmptyCellMousedownListenerFn&&this.gridster.options.emptyCellDragCallback?(this.removeEmptyCellMousedownListenerFn=this.gridster.renderer.listen(this.gridster.el,"mousedown",this.emptyCellMouseDown),this.removeEmptyCellTouchstartListenerFn=this.gridster.renderer.listen(this.gridster.el,"touchstart",this.emptyCellMouseDown)):!this.gridster.$options.enableEmptyCellDrag&&this.removeEmptyCellMousedownListenerFn&&this.removeEmptyCellTouchstartListenerFn&&(this.removeEmptyCellMousedownListenerFn(),this.removeEmptyCellTouchstartListenerFn(),this.removeEmptyCellMousedownListenerFn=null,this.removeEmptyCellTouchstartListenerFn=null)}},{key:"getPixelsX",value:function(t,e){var o=this.gridster.options.scale;return o?(t.clientX-e.left)/o+this.gridster.el.scrollLeft-this.gridster.gridRenderer.getLeftMargin():t.clientX+this.gridster.el.scrollLeft-e.left-this.gridster.gridRenderer.getLeftMargin()}},{key:"getPixelsY",value:function(t,e){var o=this.gridster.options.scale;return o?(t.clientY-e.top)/o+this.gridster.el.scrollTop-this.gridster.gridRenderer.getTopMargin():t.clientY+this.gridster.el.scrollTop-e.top-this.gridster.gridRenderer.getTopMargin()}},{key:"getValidItemFromEvent",value:function(t,e){t.preventDefault(),t.stopPropagation(),Bo.checkTouchEvent(t);var o=this.gridster.el.getBoundingClientRect(),s=this.getPixelsX(t,o),u=this.getPixelsY(t,o),c={x:this.gridster.pixelsToPositionX(s,Math.floor,!0),y:this.gridster.pixelsToPositionY(u,Math.floor,!0),cols:this.gridster.$options.defaultItemCols,rows:this.gridster.$options.defaultItemRows};if(e&&(c.cols=Math.min(Math.abs(e.x-c.x)+1,this.gridster.$options.emptyCellDragMaxCols),c.rows=Math.min(Math.abs(e.y-c.y)+1,this.gridster.$options.emptyCellDragMaxRows),e.x<c.x?c.x=e.x:e.x-c.x>this.gridster.$options.emptyCellDragMaxCols-1&&(c.x=this.gridster.movingItem?this.gridster.movingItem.x:0),e.y<c.y?c.y=e.y:e.y-c.y>this.gridster.$options.emptyCellDragMaxRows-1&&(c.y=this.gridster.movingItem?this.gridster.movingItem.y:0)),this.gridster.$options.enableOccupiedCellDrop||!this.gridster.checkCollision(c))return c}}]),a}(),xU=function(){function a(n){(0,p.Z)(this,a),this.gridster=n,this.lastGridColumnStyles={},this.lastGridRowStyles={}}return(0,_.Z)(a,[{key:"destroy",value:function(){this.gridster=null}},{key:"updateItem",value:function(t,e,o){if(this.gridster.mobile)this.clearCellPosition(o,t),o.setStyle(t,"height",this.gridster.$options.keepFixedHeightInMobile?(e.rows-1)*this.gridster.$options.margin+e.rows*this.gridster.$options.fixedRowHeight+"px":e.rows*this.gridster.curWidth/e.cols+"px"),o.setStyle(t,"width",this.gridster.$options.keepFixedWidthInMobile?this.gridster.$options.fixedColWidth+"px":""),o.setStyle(t,"margin-bottom",this.gridster.$options.margin+"px"),o.setStyle(t,mi.LTR?"margin-right":"margin-left","");else{var s=Math.round(this.gridster.curColWidth*e.x),u=Math.round(this.gridster.curRowHeight*e.y),c=this.gridster.curColWidth*e.cols-this.gridster.$options.margin,l=this.gridster.curRowHeight*e.rows-this.gridster.$options.margin;this.setCellPosition(o,t,s,u),o.setStyle(t,"width",c+"px"),o.setStyle(t,"height",l+"px");var m=null,C=null;this.gridster.$options.outerMargin&&(this.gridster.rows===e.rows+e.y&&(m=null!==this.gridster.$options.outerMarginBottom?this.gridster.$options.outerMarginBottom+"px":this.gridster.$options.margin+"px"),this.gridster.columns===e.cols+e.x&&(C=null!==this.gridster.$options.outerMarginBottom?this.gridster.$options.outerMarginRight+"px":this.gridster.$options.margin+"px")),o.setStyle(t,"margin-bottom",m),o.setStyle(t,mi.LTR?"margin-right":"margin-left",C)}}},{key:"updateGridster",value:function(){var t="",e="",o="",s="";if(this.gridster.$options.gridType===Hn.Fit)t=Hn.Fit,e=Hn.ScrollVertical,o=Hn.ScrollHorizontal,s=Hn.Fixed;else if(this.gridster.$options.gridType===Hn.ScrollVertical)this.gridster.curRowHeight=this.gridster.curColWidth*this.gridster.$options.rowHeightRatio,t=Hn.ScrollVertical,e=Hn.Fit,o=Hn.ScrollHorizontal,s=Hn.Fixed;else if(this.gridster.$options.gridType===Hn.ScrollHorizontal){var u=this.gridster.$options.rowHeightRatio;this.gridster.curColWidth=this.gridster.curRowHeight*(u>=1?u:u+1),t=Hn.ScrollHorizontal,e=Hn.Fit,o=Hn.ScrollVertical,s=Hn.Fixed}else this.gridster.$options.gridType===Hn.Fixed?(this.gridster.curColWidth=this.gridster.$options.fixedColWidth+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),this.gridster.curRowHeight=this.gridster.$options.fixedRowHeight+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),t=Hn.Fixed,e=Hn.Fit,o=Hn.ScrollVertical,s=Hn.ScrollHorizontal):this.gridster.$options.gridType===Hn.VerticalFixed?(this.gridster.curRowHeight=this.gridster.$options.fixedRowHeight+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),t=Hn.ScrollVertical,e=Hn.Fit,o=Hn.ScrollHorizontal,s=Hn.Fixed):this.gridster.$options.gridType===Hn.HorizontalFixed&&(this.gridster.curColWidth=this.gridster.$options.fixedColWidth+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),t=Hn.ScrollHorizontal,e=Hn.Fit,o=Hn.ScrollVertical,s=Hn.Fixed);this.gridster.mobile||this.gridster.$options.setGridSize&&this.gridster.$options.gridType!==Hn.Fit?this.gridster.renderer.removeClass(this.gridster.el,t):this.gridster.renderer.addClass(this.gridster.el,t),this.gridster.renderer.removeClass(this.gridster.el,e),this.gridster.renderer.removeClass(this.gridster.el,o),this.gridster.renderer.removeClass(this.gridster.el,s)}},{key:"getGridColumnStyle",value:function(t){var e={left:this.gridster.curColWidth*t,width:this.gridster.curColWidth-this.gridster.$options.margin,height:this.gridster.gridRows.length*this.gridster.curRowHeight-this.gridster.$options.margin,style:{}};e.style=(0,b.Z)((0,b.Z)({},this.getLeftPosition(e.left)),{},{width:e.width+"px",height:e.height+"px"});var o=this.lastGridColumnStyles[t];return o&&o.left===e.left&&o.width===e.width&&o.height===e.height?o.style:(this.lastGridColumnStyles[t]=e,e.style)}},{key:"getGridRowStyle",value:function(t){var e={top:this.gridster.curRowHeight*t,width:this.gridster.gridColumns.length*this.gridster.curColWidth+this.gridster.$options.margin,height:this.gridster.curRowHeight-this.gridster.$options.margin,style:{}};e.style=(0,b.Z)((0,b.Z)({},this.getTopPosition(e.top)),{},{width:e.width+"px",height:e.height+"px"});var o=this.lastGridRowStyles[t];return o&&o.top===e.top&&o.width===e.width&&o.height===e.height?o.style:(this.lastGridRowStyles[t]=e,e.style)}},{key:"getLeftPosition",value:function(t){var e=this.gridster.$options.dirType===mi.RTL?-t:t;return this.gridster.$options.useTransformPositioning?{transform:"translateX("+e+"px)"}:{left:this.getLeftMargin()+e+"px"}}},{key:"getTopPosition",value:function(t){return this.gridster.$options.useTransformPositioning?{transform:"translateY("+t+"px)"}:{top:this.getTopMargin()+t+"px"}}},{key:"clearCellPosition",value:function(t,e){this.gridster.$options.useTransformPositioning?t.setStyle(e,"transform",""):(t.setStyle(e,"top",""),t.setStyle(e,"left",""))}},{key:"setCellPosition",value:function(t,e,o,s){var u=this.gridster.$options.dirType===mi.RTL?-o:o;this.gridster.$options.useTransformPositioning?t.setStyle(e,"transform","translate3d("+u+"px, "+s+"px, 0)"):(t.setStyle(e,"left",this.getLeftMargin()+u+"px"),t.setStyle(e,"top",this.getTopMargin()+s+"px"))}},{key:"getLeftMargin",value:function(){return this.gridster.$options.outerMargin?null!==this.gridster.$options.outerMarginLeft?this.gridster.$options.outerMarginLeft:this.gridster.$options.margin:0}},{key:"getTopMargin",value:function(){return this.gridster.$options.outerMargin?null!==this.gridster.$options.outerMarginTop?this.gridster.$options.outerMarginTop:this.gridster.$options.margin:0}}]),a}(),bU=function(){var a=function(){function n(t,e){(0,p.Z)(this,n),this.renderer=e,this.el=t.nativeElement}return(0,_.Z)(n,[{key:"ngOnInit",value:function(){var e=this;this.sub=this.previewStyle$.subscribe(function(o){return e.previewStyle(o)})}},{key:"ngOnDestroy",value:function(){this.sub&&this.sub.unsubscribe()}},{key:"previewStyle",value:function(e){e?(this.renderer.setStyle(this.el,"display","block"),this.gridRenderer.updateItem(this.el,e,this.renderer)):this.renderer.setStyle(this.el,"display","")}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(r.ElementRef),r.\u0275\u0275directiveInject(r.Renderer2))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["gridster-preview"]],inputs:{previewStyle$:"previewStyle$",gridRenderer:"gridRenderer"},standalone:!0,features:[r.\u0275\u0275StandaloneFeature],decls:0,vars:0,template:function(t,e){},styles:["gridster-preview{position:absolute;display:none;background:rgba(0,0,0,.15)}\n"],encapsulation:2}),a}(),Zk=function(){var a=function(){function n(t,e,o,s){var u=this;(0,p.Z)(this,n),this.renderer=e,this.cdRef=o,this.zone=s,this.columns=0,this.rows=0,this.gridColumns=[],this.gridRows=[],this.previewStyle$=new r.EventEmitter,this.calculateLayout$=new se.x,this.resize$=new se.x,this.destroy$=new se.x,this.optionsChanged=function(){u.setOptions();for(var c=u.grid.length-1;c>=0;c--)u.grid[c].updateOptions();u.calculateLayout()},this.onResize=function(){u.el.clientWidth&&(u.options.setGridSize&&(u.renderer.setStyle(u.el,"width",""),u.renderer.setStyle(u.el,"height","")),u.setGridSize(),u.calculateLayout())},this.getNextPossiblePosition=function(c){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};-1===c.cols&&(c.cols=u.$options.defaultItemCols),-1===c.rows&&(c.rows=u.$options.defaultItemRows),u.setGridDimensions();for(var C,m=l.y||0;m<u.rows;m++)for(c.y=m,C=l.x||0;C<u.columns;C++)if(c.x=C,!u.checkCollision(c))return!0;var T=u.$options.maxRows>=u.rows+c.rows;return!(u.rows<=u.columns&&T)&&u.$options.maxCols>=u.columns+c.cols?(c.x=u.columns,c.y=0,!0):!!T&&(c.y=u.rows,c.x=0,!0)},this.getFirstPossiblePosition=function(c){var l=Object.assign({},c);return u.getNextPossiblePosition(l),l},this.getLastPossiblePosition=function(c){var l={y:0,x:0};l=u.grid.reduce(function(C,T){var B={y:T.$item.y+T.$item.rows-1,x:T.$item.x+T.$item.cols-1};return 1===Bo.compareItems(C,B)?B:C},l);var m=Object.assign({},c);return u.getNextPossiblePosition(m,l),m},this.el=t.nativeElement,this.$options=JSON.parse(JSON.stringify(_U)),this.mobile=!1,this.curWidth=0,this.curHeight=0,this.grid=[],this.curColWidth=0,this.curRowHeight=0,this.dragInProgress=!1,this.emptyCell=new yU(this),this.compact=new vU(this),this.gridRenderer=new xU(this)}return(0,_.Z)(n,[{key:"checkCollisionTwoItems",value:function(e,o){if(!(e.x<o.x+o.cols&&e.x+e.cols>o.x&&e.y<o.y+o.rows&&e.y+e.rows>o.y))return!1;if(!this.$options.allowMultiLayer)return!0;var u=this.$options.defaultLayerIndex;return(void 0===e.layerIndex?u:e.layerIndex)===(void 0===o.layerIndex?u:o.layerIndex)}},{key:"ngOnInit",value:function(){var e=this;this.options.initCallback&&this.options.initCallback(this),this.calculateLayout$.pipe((0,kr.b)(0),(0,Qr.R)(this.destroy$)).subscribe(function(){return e.calculateLayout()}),this.resize$.pipe((0,st.w)(function(){return(0,CI.H)(100)}),(0,Qr.R)(this.destroy$)).subscribe(function(){return e.resize()})}},{key:"ngOnChanges",value:function(e){var o=this;e.options&&(this.setOptions(),this.options.api={optionsChanged:this.optionsChanged,resize:this.onResize,getNextPossiblePosition:this.getNextPossiblePosition,getFirstPossiblePosition:this.getFirstPossiblePosition,getLastPossiblePosition:this.getLastPossiblePosition,getItemComponent:function(u){return o.getItemComponent(u)}},this.columns=this.$options.minCols,this.rows=this.$options.minRows+this.$options.addEmptyRowsCount,this.setGridSize(),this.calculateLayout())}},{key:"resize",value:function(){var e,o;"fit"!==this.$options.gridType||this.mobile?(o=this.el.clientWidth,e=this.el.clientHeight):(o=this.el.offsetWidth,e=this.el.offsetHeight),(o!==this.curWidth||e!==this.curHeight)&&this.checkIfToResize()&&this.onResize()}},{key:"setOptions",value:function(){this.$options=Bo.merge(this.$options,this.options,this.$options),this.$options.disableWindowResize||this.windowResize?this.$options.disableWindowResize&&this.windowResize&&(this.windowResize(),this.windowResize=null):this.windowResize=this.renderer.listen("window","resize",this.onResize),this.emptyCell.updateOptions()}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.previewStyle$.complete(),this.windowResize&&this.windowResize(),this.options&&this.options.destroyCallback&&this.options.destroyCallback(this),this.options&&this.options.api&&(this.options.api.resize=void 0,this.options.api.optionsChanged=void 0,this.options.api.getNextPossiblePosition=void 0,this.options.api=void 0),this.emptyCell.destroy(),this.emptyCell=null,this.compact.destroy(),this.compact=null}},{key:"checkIfToResize",value:function(){var e=this.el.clientWidth,o=this.el.offsetWidth,s=this.el.scrollWidth,u=this.el.clientHeight,c=this.el.offsetHeight,l=this.el.scrollHeight;return!(e<o&&l>c&&l-c<o-e||u<c&&s>o&&s-o<c-u)}},{key:"checkIfMobile",value:function(){return this.$options.useBodyForBreakpoint?this.$options.mobileBreakpoint>document.body.clientWidth:this.$options.mobileBreakpoint>this.curWidth}},{key:"setGridSize",value:function(){var o,s,e=this.el;this.$options.setGridSize||this.$options.gridType===Hn.Fit&&!this.mobile?(o=e.offsetWidth,s=e.offsetHeight):(o=e.clientWidth,s=e.clientHeight),this.curWidth=o,this.curHeight=s}},{key:"setGridDimensions",value:function(){this.setGridSize(),!this.mobile&&this.checkIfMobile()?(this.mobile=!this.mobile,this.renderer.addClass(this.el,"mobile")):this.mobile&&!this.checkIfMobile()&&(this.mobile=!this.mobile,this.renderer.removeClass(this.el,"mobile"));for(var u,e=this.$options.minRows,o=this.$options.minCols,s=this.grid.length-1;s>=0;s--)(u=this.grid[s]).notPlaced||(e=Math.max(e,u.$item.y+u.$item.rows),o=Math.max(o,u.$item.x+u.$item.cols));e+=this.$options.addEmptyRowsCount,(this.columns!==o||this.rows!==e)&&(this.columns=o,this.rows=e,this.options.gridSizeChangedCallback&&this.options.gridSizeChangedCallback(this))}},{key:"calculateLayout",value:function(){if(this.compact&&this.compact.checkCompact(),this.setGridDimensions(),this.$options.outerMargin){var e=-this.$options.margin;null!==this.$options.outerMarginLeft?(e+=this.$options.outerMarginLeft,this.renderer.setStyle(this.el,"padding-left",this.$options.outerMarginLeft+"px")):(e+=this.$options.margin,this.renderer.setStyle(this.el,"padding-left",this.$options.margin+"px")),null!==this.$options.outerMarginRight?(e+=this.$options.outerMarginRight,this.renderer.setStyle(this.el,"padding-right",this.$options.outerMarginRight+"px")):(e+=this.$options.margin,this.renderer.setStyle(this.el,"padding-right",this.$options.margin+"px")),this.curColWidth=(this.curWidth-e)/this.columns;var o=-this.$options.margin;null!==this.$options.outerMarginTop?(o+=this.$options.outerMarginTop,this.renderer.setStyle(this.el,"padding-top",this.$options.outerMarginTop+"px")):(o+=this.$options.margin,this.renderer.setStyle(this.el,"padding-top",this.$options.margin+"px")),null!==this.$options.outerMarginBottom?(o+=this.$options.outerMarginBottom,this.renderer.setStyle(this.el,"padding-bottom",this.$options.outerMarginBottom+"px")):(o+=this.$options.margin,this.renderer.setStyle(this.el,"padding-bottom",this.$options.margin+"px")),this.curRowHeight=(this.curHeight-o)/this.rows*this.$options.rowHeightRatio}else this.curColWidth=(this.curWidth+this.$options.margin)/this.columns,this.curRowHeight=(this.curHeight+this.$options.margin)/this.rows*this.$options.rowHeightRatio,this.renderer.setStyle(this.el,"padding-left","0px"),this.renderer.setStyle(this.el,"padding-right","0px"),this.renderer.setStyle(this.el,"padding-top","0px"),this.renderer.setStyle(this.el,"padding-bottom","0px");this.gridRenderer.updateGridster(),this.$options.setGridSize?(this.renderer.addClass(this.el,"gridSize"),this.mobile||(this.renderer.setStyle(this.el,"width",this.columns*this.curColWidth+this.$options.margin+"px"),this.renderer.setStyle(this.el,"height",this.rows*this.curRowHeight+this.$options.margin+"px"))):(this.renderer.removeClass(this.el,"gridSize"),this.renderer.setStyle(this.el,"width",""),this.renderer.setStyle(this.el,"height","")),this.updateGrid();for(var u,s=this.grid.length-1;s>=0;s--)(u=this.grid[s]).setSize(),u.drag.toggle(),u.resize.toggle();this.resize$.next()}},{key:"updateGrid",value:function(){"always"!==this.$options.displayGrid||this.mobile?"onDrag&Resize"===this.$options.displayGrid&&this.dragInProgress?this.renderer.addClass(this.el,"display-grid"):("none"===this.$options.displayGrid||!this.dragInProgress||this.mobile)&&this.renderer.removeClass(this.el,"display-grid"):this.renderer.addClass(this.el,"display-grid"),this.setGridDimensions(),this.gridColumns.length=n.getNewArrayLength(this.columns,this.curWidth,this.curColWidth),this.gridRows.length=n.getNewArrayLength(this.rows,this.curHeight,this.curRowHeight),this.cdRef.markForCheck()}},{key:"addItem",value:function(e){void 0===e.$item.cols&&(e.$item.cols=this.$options.defaultItemCols,e.item.cols=e.$item.cols,e.itemChanged()),void 0===e.$item.rows&&(e.$item.rows=this.$options.defaultItemRows,e.item.rows=e.$item.rows,e.itemChanged()),-1===e.$item.x||-1===e.$item.y?this.autoPositionItem(e):this.checkCollision(e.$item)&&(this.$options.disableWarnings||(e.notPlaced=!0,console.warn("Can't be placed in the bounds of the dashboard, trying to auto position!/n"+JSON.stringify(e.item,["cols","rows","x","y"]))),this.$options.disableAutoPositionOnConflict?e.notPlaced=!0:this.autoPositionItem(e)),this.grid.push(e),this.calculateLayout$.next()}},{key:"removeItem",value:function(e){this.grid.splice(this.grid.indexOf(e),1),this.calculateLayout$.next(),this.options.itemRemovedCallback&&this.options.itemRemovedCallback(e.item,e)}},{key:"checkCollision",value:function(e){var o=!1;if(this.options.itemValidateCallback&&(o=!this.options.itemValidateCallback(e)),!o&&this.checkGridCollision(e)&&(o=!0),!o){var s=this.findItemWithItem(e);s&&(o=s)}return o}},{key:"checkGridCollision",value:function(e){var ae=e.cols*e.rows;return!(e.y>-1&&e.x>-1&&e.cols+e.x<=this.$options.maxCols&&e.rows+e.y<=this.$options.maxRows&&e.cols<=(void 0===e.maxItemCols?this.$options.maxItemCols:e.maxItemCols)&&e.cols>=(void 0===e.minItemCols?this.$options.minItemCols:e.minItemCols)&&e.rows<=(void 0===e.maxItemRows?this.$options.maxItemRows:e.maxItemRows)&&e.rows>=(void 0===e.minItemRows?this.$options.minItemRows:e.minItemRows)&&(void 0===e.minItemArea?this.$options.minItemArea:e.minItemArea)<=ae&&(void 0===e.maxItemArea?this.$options.maxItemArea:e.maxItemArea)>=ae)}},{key:"findItemWithItem",value:function(e){for(var s,o=0;o<this.grid.length;o++)if((s=this.grid[o]).$item!==e&&this.checkCollisionTwoItems(s.$item,e))return s;return!1}},{key:"findItemsWithItem",value:function(e){for(var u,o=[],s=0;s<this.grid.length;s++)(u=this.grid[s]).$item!==e&&this.checkCollisionTwoItems(u.$item,e)&&o.push(u);return o}},{key:"autoPositionItem",value:function(e){this.getNextPossiblePosition(e.$item)?(e.notPlaced=!1,e.item.x=e.$item.x,e.item.y=e.$item.y,e.itemChanged()):(e.notPlaced=!0,this.$options.disableWarnings||console.warn("Can't be placed in the bounds of the dashboard!/n"+JSON.stringify(e.item,["cols","rows","x","y"])))}},{key:"pixelsToPositionX",value:function(e,o,s){var u=o(e/this.curColWidth);return s?u:Math.max(u,0)}},{key:"pixelsToPositionY",value:function(e,o,s){var u=o(e/this.curRowHeight);return s?u:Math.max(u,0)}},{key:"positionXToPixels",value:function(e){return e*this.curColWidth}},{key:"positionYToPixels",value:function(e){return e*this.curRowHeight}},{key:"getItemComponent",value:function(e){return this.grid.find(function(o){return o.item===e})}},{key:"checkCollisionForSwaping",value:function(e){var o=!1;if(this.options.itemValidateCallback&&(o=!this.options.itemValidateCallback(e)),!o&&this.checkGridCollision(e)&&(o=!0),!o){var s=this.findItemWithItemForSwapping(e);s&&(o=s)}return o}},{key:"findItemWithItemForSwapping",value:function(e){for(var s,o=this.grid.length-1;o>-1;o--)if((s=this.grid[o]).$item!==e&&n.checkCollisionTwoItemsForSwaping(s.$item,e))return s;return!1}},{key:"previewStyle",value:function(){this.movingItem?(this.compact&&arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.compact.checkCompactItem(this.movingItem),this.previewStyle$.next(this.movingItem)):this.previewStyle$.next(null)}}],[{key:"checkCollisionTwoItemsForSwaping",value:function(e,o){return e.x+(1===e.cols?0:1)<o.x+o.cols&&e.x+e.cols>o.x+(1===o.cols?0:1)&&e.y+(1===e.rows?0:1)<o.y+o.rows&&e.y+e.rows>o.y+(1===o.rows?0:1)}},{key:"getNewArrayLength",value:function(e,o,s){var u=Math.max(e,Math.floor(o/s));return u<0?0:Number.isFinite(u)?Math.floor(u):0}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(r.ElementRef),r.\u0275\u0275directiveInject(r.Renderer2),r.\u0275\u0275directiveInject(r.ChangeDetectorRef),r.\u0275\u0275directiveInject(r.NgZone))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["gridster"]],inputs:{options:"options"},standalone:!0,features:[r.\u0275\u0275NgOnChangesFeature,r.\u0275\u0275StandaloneFeature],ngContentSelectors:o3,decls:4,vars:4,consts:[["class","gridster-column",3,"ngStyle",4,"ngFor","ngForOf"],["class","gridster-row",3,"ngStyle",4,"ngFor","ngForOf"],[1,"gridster-preview",3,"gridRenderer","previewStyle$"],[1,"gridster-column",3,"ngStyle"],[1,"gridster-row",3,"ngStyle"]],template:function(t,e){1&t&&(r.\u0275\u0275projectionDef(),r.\u0275\u0275template(0,sU,1,1,"div",0),r.\u0275\u0275template(1,uU,1,1,"div",1),r.\u0275\u0275projection(2),r.\u0275\u0275element(3,"gridster-preview",2)),2&t&&(r.\u0275\u0275property("ngForOf",e.gridColumns),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",e.gridRows),r.\u0275\u0275advance(2),r.\u0275\u0275property("gridRenderer",e.gridRenderer)("previewStyle$",e.previewStyle$))},dependencies:[E.NgForOf,E.NgStyle,bU],styles:["gridster{position:relative;box-sizing:border-box;background:grey;width:100%;height:100%;-webkit-user-select:none;user-select:none;display:block}gridster.fit{overflow-x:hidden;overflow-y:hidden}gridster.scrollVertical{overflow-x:hidden;overflow-y:auto}gridster.scrollHorizontal{overflow-x:auto;overflow-y:hidden}gridster.fixed{overflow:auto}gridster.mobile{overflow-x:hidden;overflow-y:auto}gridster.mobile gridster-item{position:relative}gridster.gridSize{height:initial;width:initial}gridster.gridSize.fit{height:100%;width:100%}gridster .gridster-column,gridster .gridster-row{position:absolute;display:none;transition:.3s;box-sizing:border-box}gridster.display-grid .gridster-column,gridster.display-grid .gridster-row{display:block}gridster .gridster-column{border-left:1px solid white;border-right:1px solid white}gridster .gridster-row{border-top:1px solid white;border-bottom:1px solid white}\n"],encapsulation:2}),a}(),a3=function(){function a(n){(0,p.Z)(this,a),this.iteration=0,this.pushedItems=[],this.pushedItemsTemp=[],this.pushedItemsTempPath=[],this.pushedItemsPath=[],this.gridsterItem=n,this.gridster=n.gridster,this.tryPattern={fromEast:[this.tryWest,this.trySouth,this.tryNorth,this.tryEast],fromWest:[this.tryEast,this.trySouth,this.tryNorth,this.tryWest],fromNorth:[this.trySouth,this.tryEast,this.tryWest,this.tryNorth],fromSouth:[this.tryNorth,this.tryEast,this.tryWest,this.trySouth]},this.fromSouth="fromSouth",this.fromNorth="fromNorth",this.fromEast="fromEast",this.fromWest="fromWest"}return(0,_.Z)(a,[{key:"destroy",value:function(){this.gridster=this.gridsterItem=null}},{key:"pushItems",value:function(t,e){if(this.gridster.$options.pushItems&&!e){this.pushedItemsOrder=[],this.iteration=0;var o=this.push(this.gridsterItem,t);return o||this.restoreTempItems(),this.pushedItemsOrder=[],this.pushedItemsTemp=[],this.pushedItemsTempPath=[],o}return!1}},{key:"restoreTempItems",value:function(){for(var t=this.pushedItemsTemp.length-1;t>-1;t--)this.removeFromTempPushed(this.pushedItemsTemp[t])}},{key:"restoreItems",value:function(){for(var o,t=0,e=this.pushedItems.length;t<e;t++)(o=this.pushedItems[t]).$item.x=o.item.x||0,o.$item.y=o.item.y||0,o.setSize();this.pushedItems=[],this.pushedItemsPath=[]}},{key:"setPushedItems",value:function(){for(var o,t=0,e=this.pushedItems.length;t<e;t++)(o=this.pushedItems[t]).checkItemChanges(o.$item,o.item);this.pushedItems=[],this.pushedItemsPath=[]}},{key:"checkPushBack",value:function(){for(var t=this.pushedItems.length-1,e=!1;t>-1;t--)this.checkPushedItem(this.pushedItems[t],t)&&(e=!0);e&&this.checkPushBack()}},{key:"push",value:function(t,e){if(this.iteration>100)return console.warn("max iteration reached"),!1;if(this.gridster.checkGridCollision(t.$item)||""===e)return!1;var o=this.gridster.findItemsWithItem(t.$item),s=e===this.fromNorth||e===this.fromWest;o.sort(function(B,F){return s?F.$item.y-B.$item.y||F.$item.x-B.$item.x:B.$item.y-F.$item.y||B.$item.x-F.$item.x});for(var c,u=0,l=!0,m=[];u<o.length;u++)if((c=o[u])!==this.gridsterItem){if(!c.canBeDragged()){l=!1;break}var C=this.pushedItemsTemp.indexOf(c);if(C>-1&&this.pushedItemsTempPath[C].length>10){l=!1;break}if(this.tryPattern[e][0].call(this,c,t))this.pushedItemsOrder.push(c),m.push(c);else if(this.tryPattern[e][1].call(this,c,t))this.pushedItemsOrder.push(c),m.push(c);else if(this.tryPattern[e][2].call(this,c,t))this.pushedItemsOrder.push(c),m.push(c);else{if(!this.tryPattern[e][3].call(this,c,t)){l=!1;break}this.pushedItemsOrder.push(c),m.push(c)}}if(!l&&(u=this.pushedItemsOrder.lastIndexOf(m[0]))>-1)for(var T=this.pushedItemsOrder.length-1;T>=u;T--)c=this.pushedItemsOrder[T],this.pushedItemsOrder.pop(),this.removeFromTempPushed(c),this.removeFromPushedItem(c);return this.iteration++,l}},{key:"trySouth",value:function(t,e){return!!this.gridster.$options.pushDirections.south&&(this.addToTempPushed(t),t.$item.y=e.$item.y+e.$item.rows,this.push(t,this.fromNorth)?(t.setSize(),this.addToPushed(t),!0):(this.removeFromTempPushed(t),!1))}},{key:"tryNorth",value:function(t,e){return!!this.gridster.$options.pushDirections.north&&(this.addToTempPushed(t),t.$item.y=e.$item.y-t.$item.rows,this.push(t,this.fromSouth)?(t.setSize(),this.addToPushed(t),!0):(this.removeFromTempPushed(t),!1))}},{key:"tryEast",value:function(t,e){return!!this.gridster.$options.pushDirections.east&&(this.addToTempPushed(t),t.$item.x=e.$item.x+e.$item.cols,this.push(t,this.fromWest)?(t.setSize(),this.addToPushed(t),!0):(this.removeFromTempPushed(t),!1))}},{key:"tryWest",value:function(t,e){return!!this.gridster.$options.pushDirections.west&&(this.addToTempPushed(t),t.$item.x=e.$item.x-t.$item.cols,this.push(t,this.fromEast)?(t.setSize(),this.addToPushed(t),!0):(this.removeFromTempPushed(t),!1))}},{key:"addToTempPushed",value:function(t){var e=this.pushedItemsTemp.indexOf(t);-1===e&&(e=this.pushedItemsTemp.push(t)-1,this.pushedItemsTempPath[e]=[]),this.pushedItemsTempPath[e].push({x:t.$item.x,y:t.$item.y})}},{key:"removeFromTempPushed",value:function(t){var e=this.pushedItemsTemp.indexOf(t),o=this.pushedItemsTempPath[e].pop();o&&(t.$item.x=o.x,t.$item.y=o.y,t.setSize(),this.pushedItemsTempPath[e].length||(this.pushedItemsTemp.splice(e,1),this.pushedItemsTempPath.splice(e,1)))}},{key:"addToPushed",value:function(t){if(this.pushedItems.indexOf(t)<0)this.pushedItems.push(t),this.pushedItemsPath.push([{x:t.item.x||0,y:t.item.y||0},{x:t.$item.x,y:t.$item.y}]);else{var e=this.pushedItems.indexOf(t);this.pushedItemsPath[e].push({x:t.$item.x,y:t.$item.y})}}},{key:"removeFromPushed",value:function(t){t>-1&&(this.pushedItems.splice(t,1),this.pushedItemsPath.splice(t,1))}},{key:"removeFromPushedItem",value:function(t){var e=this.pushedItems.indexOf(t);e>-1&&(this.pushedItemsPath[e].pop(),this.pushedItemsPath.length||(this.pushedItems.splice(e,1),this.pushedItemsPath.splice(e,1)))}},{key:"checkPushedItem",value:function(t,e){for(var u,c,l,o=this.pushedItemsPath[e],s=o.length-2,m=!1;s>-1;s--)c=t.$item.x,l=t.$item.y,t.$item.x=(u=o[s]).x,t.$item.y=u.y,this.gridster.findItemWithItem(t.$item)?(t.$item.x=c,t.$item.y=l):(t.setSize(),o.splice(s+1,o.length-s-1),m=!0);return o.length<2&&this.removeFromPushed(e),m}}]),a}(),s3=50;function u3(a,n,t,e,o,s,u,c,l,m){ly=a.$options.scrollSensitivity,Oc=a.$options.scrollSpeed,dy=l,Zs=m;var C=(fa=a.el).offsetWidth,B=fa.scrollLeft,F=fa.scrollTop,U=t-F,ue=s.clientX,me=s.clientY;if(!a.$options.disableScrollVertical)if(u.clientY<me&&fa.offsetHeight+F-t-o<ly){if(m3(),dy&&Zs&&!Zs.south||my)return;my=c3(1,c,u)}else if(u.clientY>me&&F>0&&U<ly){if(h3(),dy&&Zs&&!Zs.north||hy)return;hy=c3(-1,c,u)}else u.clientY!==me&&jk();var we=n-B;if(!a.$options.disableScrollHorizontal)if(u.clientX<ue&&B+C-n-e<=ly){if(p3(),dy&&Zs&&!Zs.east||fy)return;fy=l3(1,c,u)}else if(u.clientX>ue&&B>0&&we<ly){if(f3(),dy&&Zs&&!Zs.west||py)return;py=l3(-1,c,u)}else u.clientX!==ue&&Lk()}function c3(a,n,t){var e=t.clientY;return window.setInterval(function(){(!fa||-1===a&&fa.scrollTop-Oc<0)&&jk(),fa.scrollTop+=a*Oc,n({clientX:t.clientX,clientY:e+=a*Oc})},s3)}function l3(a,n,t){var e=t.clientX;return window.setInterval(function(){(!fa||-1===a&&fa.scrollLeft-Oc<0)&&Lk(),fa.scrollLeft+=a*Oc,n({clientX:e+=a*Oc,clientY:t.clientY})},s3)}function d3(){Lk(),jk(),fa=null}function Lk(){f3(),p3()}function jk(){m3(),h3()}function f3(){fy&&(clearInterval(fy),fy=0)}function p3(){py&&(clearInterval(py),py=0)}function h3(){my&&(clearInterval(my),my=0)}function m3(){hy&&(clearInterval(hy),hy=0)}var CU=function(){function a(n){(0,p.Z)(this,a),this.gridsterItem=n,this.gridster=n.gridster}return(0,_.Z)(a,[{key:"destroy",value:function(){this.gridster=this.gridsterItem=this.swapedItem=null}},{key:"swapItems",value:function(){this.gridster.$options.swap&&(this.checkSwapBack(),this.checkSwap(this.gridsterItem))}},{key:"checkSwapBack",value:function(){if(this.swapedItem){var t=this.swapedItem.$item.x,e=this.swapedItem.$item.y;this.swapedItem.$item.x=this.swapedItem.item.x||0,this.swapedItem.$item.y=this.swapedItem.item.y||0,this.gridster.checkCollision(this.swapedItem.$item)?(this.swapedItem.$item.x=t,this.swapedItem.$item.y=e):(this.swapedItem.setSize(),this.gridsterItem.$item.x=this.gridsterItem.item.x||0,this.gridsterItem.$item.y=this.gridsterItem.item.y||0,this.swapedItem=void 0)}}},{key:"restoreSwapItem",value:function(){this.swapedItem&&(this.swapedItem.$item.x=this.swapedItem.item.x||0,this.swapedItem.$item.y=this.swapedItem.item.y||0,this.swapedItem.setSize(),this.swapedItem=void 0)}},{key:"setSwapItem",value:function(){this.swapedItem&&(this.swapedItem.checkItemChanges(this.swapedItem.$item,this.swapedItem.item),this.swapedItem=void 0)}},{key:"checkSwap",value:function(t){var e;if((e=this.gridster.$options.swapWhileDragging?this.gridster.checkCollisionForSwaping(t.$item):this.gridster.checkCollision(t.$item))&&!0!==e&&e.canBeDragged()){var o=e,s=o.$item.x,u=o.$item.y,c=t.$item.x,l=t.$item.y,m=c-s,C=l-u;o.$item.x=t.item.x-m,o.$item.y=t.item.y-C,t.$item.x=o.item.x+m,t.$item.y=o.item.y+C,this.gridster.checkCollision(o.$item)||this.gridster.checkCollision(t.$item)?(t.$item.x=c,t.$item.y=l,o.$item.x=s,o.$item.y=u):(o.setSize(),this.swapedItem=o,this.gridster.$options.swapWhileDragging&&(this.gridsterItem.checkItemChanges(this.gridsterItem.$item,this.gridsterItem.item),this.setSwapItem()))}}}]),a}(),ki=function(){return(ki=ki||{}).UP="UP",ki.DOWN="DOWN",ki.LEFT="LEFT",ki.RIGHT="RIGHT",ki}(),SU=function(){function a(n,t,e){var o=this;(0,p.Z)(this,a),this.zone=e,this.collision=!1,this.dragMove=function(s){s.stopPropagation(),s.preventDefault(),Bo.checkTouchEvent(s);var c,l,m,C,u=o.getDirections(s);o.gridster.options.enableBoundaryControl&&(u.includes(ki.UP)&&o.gridsterItem.el.getBoundingClientRect().top<o.gridster.el.getBoundingClientRect().top+(null!==(c=o.outerMarginTop)&&void 0!==c?c:o.margin)&&(u=u.filter(function(T){return T!=ki.UP}),s=new MouseEvent(s.type,{clientX:s.clientX,clientY:o.lastMouse.clientY})),u.includes(ki.LEFT)&&o.gridsterItem.el.getBoundingClientRect().left<o.gridster.el.getBoundingClientRect().left+(null!==(l=o.outerMarginLeft)&&void 0!==l?l:o.margin)&&(u=u.filter(function(T){return T!=ki.LEFT}),s=new MouseEvent(s.type,{clientX:o.lastMouse.clientX,clientY:s.clientY})),u.includes(ki.RIGHT)&&o.gridsterItem.el.getBoundingClientRect().right>o.gridster.el.getBoundingClientRect().right-(null!==(m=o.outerMarginRight)&&void 0!==m?m:o.margin)&&(u=u.filter(function(T){return T!=ki.RIGHT}),s=new MouseEvent(s.type,{clientX:o.lastMouse.clientX,clientY:s.clientY})),u.includes(ki.DOWN)&&o.gridsterItem.el.getBoundingClientRect().bottom>o.gridster.el.getBoundingClientRect().bottom-(null!==(C=o.outerMarginBottom)&&void 0!==C?C:o.margin)&&(u=u.filter(function(T){return T!=ki.DOWN}),s=new MouseEvent(s.type,{clientX:s.clientX,clientY:o.lastMouse.clientY}))),u.length&&(o.offsetLeft=o.gridster.el.scrollLeft-o.gridster.el.offsetLeft,o.offsetTop=o.gridster.el.scrollTop-o.gridster.el.offsetTop,u3(o.gridster,o.left,o.top,o.width,o.height,s,o.lastMouse,o.calculateItemPositionFromMousePosition),o.calculateItemPositionFromMousePosition(s))},this.calculateItemPositionFromMousePosition=function(s){o.gridster.options.scale?o.calculateItemPositionWithScale(s,o.gridster.options.scale):o.calculateItemPositionWithoutScale(s),o.calculateItemPosition(),o.lastMouse.clientX=s.clientX,o.lastMouse.clientY=s.clientY,o.zone.run(function(){o.gridster.updateGrid()})},this.dragStop=function(s){s.stopPropagation(),s.preventDefault(),d3(),o.cancelOnBlur(),o.mousemove(),o.mouseup(),o.mouseleave(),o.touchmove(),o.touchend(),o.touchcancel(),o.gridsterItem.renderer.removeClass(o.gridsterItem.el,"gridster-item-moving"),o.gridster.dragInProgress=!1,o.gridster.updateGrid(),o.path=[],o.gridster.options.draggable&&o.gridster.options.draggable.stop?Promise.resolve(o.gridster.options.draggable.stop(o.gridsterItem.item,o.gridsterItem,s)).then(o.makeDrag,o.cancelDrag):o.makeDrag(),setTimeout(function(){o.gridster&&(o.gridster.movingItem=null,o.gridster.previewStyle(!0))})},this.cancelDrag=function(){o.gridsterItem.$item.x=o.gridsterItem.item.x||0,o.gridsterItem.$item.y=o.gridsterItem.item.y||0,o.gridsterItem.setSize(),o.push&&o.push.restoreItems(),o.swap&&o.swap.restoreSwapItem(),o.push&&(o.push.destroy(),o.push=null),o.swap&&(o.swap.destroy(),o.swap=null)},this.makeDrag=function(){o.gridster.$options.draggable.dropOverItems&&o.gridster.options.draggable&&o.gridster.options.draggable.dropOverItemsCallback&&o.collision&&!0!==o.collision&&o.collision.$item&&o.gridster.options.draggable.dropOverItemsCallback(o.gridsterItem.item,o.collision.item,o.gridster),o.collision=!1,o.gridsterItem.setSize(),o.gridsterItem.checkItemChanges(o.gridsterItem.$item,o.gridsterItem.item),o.push&&o.push.setPushedItems(),o.swap&&o.swap.setSwapItem(),o.push&&(o.push.destroy(),o.push=null),o.swap&&(o.swap.destroy(),o.swap=null)},this.dragStartDelay=function(s){if(!s.target.classList.contains("gridster-item-resizable-handler")&&!Bo.checkContentClassForEvent(o.gridster,s))if(Bo.checkTouchEvent(s),o.gridster.$options.draggable.delayStart)var c=setTimeout(function(){o.dragStart(s),ae()},o.gridster.$options.draggable.delayStart),l=o.gridsterItem.renderer.listen("document","mouseup",ae),m=o.gridsterItem.renderer.listen("document","mouseleave",ae),C=o.gridsterItem.renderer.listen("window","blur",ae),T=o.gridsterItem.renderer.listen("document","touchmove",function U(ue){Bo.checkTouchEvent(ue),(Math.abs(ue.clientX-s.clientX)>9||Math.abs(ue.clientY-s.clientY)>9)&&ae()}),B=o.gridsterItem.renderer.listen("document","touchend",ae),F=o.gridsterItem.renderer.listen("document","touchcancel",ae);else o.dragStart(s);function ae(){clearTimeout(c),C(),l(),m(),T(),B(),F()}},this.gridsterItem=n,this.gridster=t,this.lastMouse={clientX:0,clientY:0},this.path=[]}return(0,_.Z)(a,[{key:"destroy",value:function(){this.gridster.previewStyle&&this.gridster.previewStyle(!0),this.gridsterItem=this.gridster=this.collision=null,this.mousedown&&(this.mousedown(),this.touchstart())}},{key:"dragStart",value:function(t){var e=this;t.which&&1!==t.which||(this.gridster.options.draggable&&this.gridster.options.draggable.start&&this.gridster.options.draggable.start(this.gridsterItem.item,this.gridsterItem,t),t.stopPropagation(),t.preventDefault(),this.zone.runOutsideAngular(function(){e.mousemove=e.gridsterItem.renderer.listen("document","mousemove",e.dragMove),e.touchmove=e.gridster.renderer.listen(e.gridster.el,"touchmove",e.dragMove)}),this.mouseup=this.gridsterItem.renderer.listen("document","mouseup",this.dragStop),this.mouseleave=this.gridsterItem.renderer.listen("document","mouseleave",this.dragStop),this.cancelOnBlur=this.gridsterItem.renderer.listen("window","blur",this.dragStop),this.touchend=this.gridsterItem.renderer.listen("document","touchend",this.dragStop),this.touchcancel=this.gridsterItem.renderer.listen("document","touchcancel",this.dragStop),this.gridsterItem.renderer.addClass(this.gridsterItem.el,"gridster-item-moving"),this.margin=this.gridster.$options.margin,this.outerMarginTop=this.gridster.$options.outerMarginTop,this.outerMarginRight=this.gridster.$options.outerMarginRight,this.outerMarginBottom=this.gridster.$options.outerMarginBottom,this.outerMarginLeft=this.gridster.$options.outerMarginLeft,this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,this.left=this.gridsterItem.left-this.margin,this.top=this.gridsterItem.top-this.margin,this.originalClientX=t.clientX,this.originalClientY=t.clientY,this.width=this.gridsterItem.width,this.height=this.gridsterItem.height,this.diffLeft=this.gridster.$options.dirType===mi.RTL?t.clientX-this.gridster.el.scrollWidth+this.gridsterItem.left:t.clientX+this.offsetLeft-this.margin-this.left,this.diffTop=t.clientY+this.offsetTop-this.margin-this.top,this.gridster.movingItem=this.gridsterItem.$item,this.gridster.previewStyle(!0),this.push=new a3(this.gridsterItem),this.swap=new CU(this.gridsterItem),this.gridster.dragInProgress=!0,this.gridster.updateGrid(),this.path.push({x:this.gridsterItem.item.x||0,y:this.gridsterItem.item.y||0}))}},{key:"calculateItemPositionWithScale",value:function(t,e){this.left=this.gridster.$options.dirType===mi.RTL?this.gridster.el.scrollWidth-this.originalClientX+(t.clientX-this.originalClientX)/e+this.diffLeft:this.originalClientX+(t.clientX-this.originalClientX)/e+this.offsetLeft-this.diffLeft,this.top=this.originalClientY+(t.clientY-this.originalClientY)/e+this.offsetTop-this.diffTop}},{key:"calculateItemPositionWithoutScale",value:function(t){this.left=this.gridster.$options.dirType===mi.RTL?this.gridster.el.scrollWidth-t.clientX+this.diffLeft:t.clientX+this.offsetLeft-this.diffLeft,this.top=t.clientY+this.offsetTop-this.diffTop}},{key:"calculateItemPosition",value:function(){if(this.gridster.movingItem=this.gridsterItem.$item,this.positionX=this.gridster.pixelsToPositionX(this.left,Math.round),this.positionY=this.gridster.pixelsToPositionY(this.top,Math.round),this.positionXBackup=this.gridsterItem.$item.x,this.positionYBackup=this.gridsterItem.$item.y,this.gridsterItem.$item.x=this.positionX,this.gridster.checkGridCollision(this.gridsterItem.$item)&&(this.gridsterItem.$item.x=this.positionXBackup),this.gridsterItem.$item.y=this.positionY,this.gridster.checkGridCollision(this.gridsterItem.$item)&&(this.gridsterItem.$item.y=this.positionYBackup),this.gridster.gridRenderer.setCellPosition(this.gridsterItem.renderer,this.gridsterItem.el,this.left,this.top),this.positionXBackup!==this.gridsterItem.$item.x||this.positionYBackup!==this.gridsterItem.$item.y){var t=this.path[this.path.length-1],e="";t.x<this.gridsterItem.$item.x?e=this.push.fromWest:t.x>this.gridsterItem.$item.x?e=this.push.fromEast:t.y<this.gridsterItem.$item.y?e=this.push.fromNorth:t.y>this.gridsterItem.$item.y&&(e=this.push.fromSouth),this.push.pushItems(e,this.gridster.$options.disablePushOnDrag),this.swap.swapItems(),this.collision=this.gridster.checkCollision(this.gridsterItem.$item),this.collision?(this.gridsterItem.$item.x=this.positionXBackup,this.gridsterItem.$item.y=this.positionYBackup,this.gridster.$options.draggable.dropOverItems&&!0!==this.collision&&this.collision.$item&&(this.gridster.movingItem=null)):this.path.push({x:this.gridsterItem.$item.x,y:this.gridsterItem.$item.y}),this.push.checkPushBack()}else this.collision=!1;this.gridster.previewStyle(!0)}},{key:"toggle",value:function(){var t=this.gridsterItem.canBeDragged();!this.enabled&&t?(this.enabled=!this.enabled,this.mousedown=this.gridsterItem.renderer.listen(this.gridsterItem.el,"mousedown",this.dragStartDelay),this.touchstart=this.gridsterItem.renderer.listen(this.gridsterItem.el,"touchstart",this.dragStartDelay)):this.enabled&&!t&&(this.enabled=!this.enabled,this.mousedown(),this.touchstart())}},{key:"getDirections",value:function(t){var e=[];return 0===this.lastMouse.clientX&&0===this.lastMouse.clientY&&(this.lastMouse.clientY=t.clientY,this.lastMouse.clientX=t.clientX),this.lastMouse.clientY>t.clientY&&e.push(ki.UP),this.lastMouse.clientY<t.clientY&&e.push(ki.DOWN),this.lastMouse.clientX<t.clientX&&e.push(ki.RIGHT),this.lastMouse.clientX>t.clientX&&e.push(ki.LEFT),e}}]),a}(),EU=function(){function a(n){(0,p.Z)(this,a),this.pushedItems=[],this.pushedItemsPath=[],this.gridsterItem=n,this.gridster=n.gridster,this.tryPattern={fromEast:this.tryWest,fromWest:this.tryEast,fromNorth:this.trySouth,fromSouth:this.tryNorth},this.fromSouth="fromSouth",this.fromNorth="fromNorth",this.fromEast="fromEast",this.fromWest="fromWest"}return(0,_.Z)(a,[{key:"destroy",value:function(){this.gridster=this.gridsterItem=null}},{key:"pushItems",value:function(t){return!!this.gridster.$options.pushResizeItems&&this.push(this.gridsterItem,t)}},{key:"restoreItems",value:function(){for(var o,t=0,e=this.pushedItems.length;t<e;t++)(o=this.pushedItems[t]).$item.x=o.item.x||0,o.$item.y=o.item.y||0,o.$item.cols=o.item.cols||1,o.$item.row=o.item.row||1,o.setSize();this.pushedItems=[],this.pushedItemsPath=[]}},{key:"setPushedItems",value:function(){for(var o,t=0,e=this.pushedItems.length;t<e;t++)(o=this.pushedItems[t]).checkItemChanges(o.$item,o.item);this.pushedItems=[],this.pushedItemsPath=[]}},{key:"checkPushBack",value:function(){for(var t=this.pushedItems.length-1,e=!1;t>-1;t--)this.checkPushedItem(this.pushedItems[t],t)&&(e=!0);e&&this.checkPushBack()}},{key:"push",value:function(t,e){var o=this.gridster.checkCollision(t.$item);if(o&&!0!==o&&o!==this.gridsterItem&&o.canBeResized()){if(this.tryPattern[e].call(this,o,t,e))return!0}else if(!1===o)return!0;return!1}},{key:"trySouth",value:function(t,e,o){var s=t.$item.y,u=t.$item.rows;return t.$item.y=e.$item.y+e.$item.rows,t.$item.rows=u+s-t.$item.y,this.gridster.checkCollisionTwoItems(t.$item,e.$item)||this.gridster.checkGridCollision(t.$item)?(t.$item.y=s,t.$item.rows=u,!1):(t.setSize(),this.addToPushed(t),this.push(e,o),!0)}},{key:"tryNorth",value:function(t,e,o){var s=t.$item.rows;return t.$item.rows=e.$item.y-t.$item.y,this.gridster.checkCollisionTwoItems(t.$item,e.$item)||this.gridster.checkGridCollision(t.$item)?(t.$item.rows=s,!1):(t.setSize(),this.addToPushed(t),this.push(e,o),!0)}},{key:"tryEast",value:function(t,e,o){var s=t.$item.x,u=t.$item.cols;return t.$item.x=e.$item.x+e.$item.cols,t.$item.cols=u+s-t.$item.x,this.gridster.checkCollisionTwoItems(t.$item,e.$item)||this.gridster.checkGridCollision(t.$item)?(t.$item.x=s,t.$item.cols=u,!1):(t.setSize(),this.addToPushed(t),this.push(e,o),!0)}},{key:"tryWest",value:function(t,e,o){var s=t.$item.cols;return t.$item.cols=e.$item.x-t.$item.x,this.gridster.checkCollisionTwoItems(t.$item,e.$item)||this.gridster.checkGridCollision(t.$item)?(t.$item.cols=s,!1):(t.setSize(),this.addToPushed(t),this.push(e,o),!0)}},{key:"addToPushed",value:function(t){if(this.pushedItems.indexOf(t)<0)this.pushedItems.push(t),this.pushedItemsPath.push([{x:t.item.x||0,y:t.item.y||0,cols:t.item.cols||0,rows:t.item.rows||0},{x:t.$item.x,y:t.$item.y,cols:t.$item.cols,rows:t.$item.rows}]);else{var e=this.pushedItems.indexOf(t);this.pushedItemsPath[e].push({x:t.$item.x,y:t.$item.y,cols:t.$item.cols,rows:t.$item.rows})}}},{key:"removeFromPushed",value:function(t){t>-1&&(this.pushedItems.splice(t,1),this.pushedItemsPath.splice(t,1))}},{key:"checkPushedItem",value:function(t,e){for(var u,c,l,m,C,o=this.pushedItemsPath[e],s=o.length-2;s>-1;s--)c=t.$item.x,l=t.$item.y,m=t.$item.cols,C=t.$item.rows,t.$item.x=(u=o[s]).x,t.$item.y=u.y,t.$item.cols=u.cols,t.$item.rows=u.rows,this.gridster.findItemWithItem(t.$item)?(t.$item.x=c,t.$item.y=l,t.$item.cols=m,t.$item.rows=C):(t.setSize(),o.splice(s+1,o.length-1-s));return o.length<2&&(this.removeFromPushed(e),!0)}}]),a}(),PU=function(){function a(n,t,e){var o=this;(0,p.Z)(this,a),this.zone=e,this.directionFunction=null,this.dragMove=function(s){if(null===o.directionFunction)throw new Error("The `directionFunction` has not been set before calling `dragMove`.");s.stopPropagation(),s.preventDefault(),Bo.checkTouchEvent(s),o.offsetTop=o.gridster.el.scrollTop-o.gridster.el.offsetTop,o.offsetLeft=o.gridster.el.scrollLeft-o.gridster.el.offsetLeft,u3(o.gridster,o.left,o.top,o.width,o.height,s,o.lastMouse,o.directionFunction,!0,o.resizeEventScrollType);var u=o.gridster.options.scale||1;o.directionFunction({clientX:o.originalClientX+(s.clientX-o.originalClientX)/u,clientY:o.originalClientY+(s.clientY-o.originalClientY)/u}),o.lastMouse.clientX=s.clientX,o.lastMouse.clientY=s.clientY,o.zone.run(function(){o.gridster.updateGrid()})},this.dragStop=function(s){s.stopPropagation(),s.preventDefault(),d3(),o.mousemove(),o.mouseup(),o.mouseleave(),o.cancelOnBlur(),o.touchmove(),o.touchend(),o.touchcancel(),o.gridster.dragInProgress=!1,o.gridster.updateGrid(),o.gridster.options.resizable&&o.gridster.options.resizable.stop?Promise.resolve(o.gridster.options.resizable.stop(o.gridsterItem.item,o.gridsterItem,s)).then(o.makeResize,o.cancelResize):o.makeResize(),setTimeout(function(){o.gridsterItem.renderer.removeClass(o.gridsterItem.el,"gridster-item-resizing"),o.gridster&&(o.gridster.movingItem=null,o.gridster.previewStyle())})},this.cancelResize=function(){o.gridsterItem.$item.cols=o.gridsterItem.item.cols||1,o.gridsterItem.$item.rows=o.gridsterItem.item.rows||1,o.gridsterItem.$item.x=o.gridsterItem.item.x||0,o.gridsterItem.$item.y=o.gridsterItem.item.y||0,o.gridsterItem.setSize(),o.push.restoreItems(),o.pushResize.restoreItems(),o.push.destroy(),o.push=null,o.pushResize.destroy(),o.pushResize=null},this.makeResize=function(){o.gridsterItem.setSize(),o.gridsterItem.checkItemChanges(o.gridsterItem.$item,o.gridsterItem.item),o.push.setPushedItems(),o.pushResize.setPushedItems(),o.push.destroy(),o.push=null,o.pushResize.destroy(),o.pushResize=null},this.handleNorth=function(s){if(o.top=s.clientY+o.offsetTop-o.diffTop,o.height=o.bottom-o.top,o.minHeight>o.height?(o.height=o.minHeight,o.top=o.bottom-o.minHeight):o.gridster.options.enableBoundaryControl&&(o.top=Math.max(0,o.top),o.height=o.bottom-o.top),o.newPosition=o.gridster.pixelsToPositionY(o.top+(o.gridster.options.pushItems?o.margin:0),Math.floor),o.gridsterItem.$item.y!==o.newPosition){if(o.itemBackup[1]=o.gridsterItem.$item.y,o.itemBackup[3]=o.gridsterItem.$item.rows,o.gridsterItem.$item.rows+=o.gridsterItem.$item.y-o.newPosition,o.gridsterItem.$item.y=o.newPosition,o.pushResize.pushItems(o.pushResize.fromSouth),o.push.pushItems(o.push.fromSouth,o.gridster.$options.disablePushOnResize),o.gridster.checkCollision(o.gridsterItem.$item))return o.gridsterItem.$item.y=o.itemBackup[1],o.gridsterItem.$item.rows=o.itemBackup[3],o.top=o.gridster.positionYToPixels(o.gridsterItem.$item.y),o.setItemTop(o.gridster.positionYToPixels(o.gridsterItem.$item.y)),void o.setItemHeight(o.gridster.positionYToPixels(o.gridsterItem.$item.rows)-o.margin);o.gridster.previewStyle(),o.pushResize.checkPushBack(),o.push.checkPushBack()}o.setItemTop(o.top),o.setItemHeight(o.height)},this.handleWest=function(s){if(o.left=(o.gridster.$options.dirType===mi.RTL?o.originalClientX+(o.originalClientX-s.clientX):s.clientX)+o.offsetLeft-o.diffLeft,o.width=o.right-o.left,o.minWidth>o.width?(o.width=o.minWidth,o.left=o.right-o.minWidth):o.gridster.options.enableBoundaryControl&&(o.left=Math.max(0,o.left),o.width=o.right-o.left),o.newPosition=o.gridster.pixelsToPositionX(o.left+(o.gridster.options.pushItems?o.margin:0),Math.floor),o.gridsterItem.$item.x!==o.newPosition){if(o.itemBackup[0]=o.gridsterItem.$item.x,o.itemBackup[2]=o.gridsterItem.$item.cols,o.gridsterItem.$item.cols+=o.gridsterItem.$item.x-o.newPosition,o.gridsterItem.$item.x=o.newPosition,o.pushResize.pushItems(o.pushResize.fromEast),o.push.pushItems(o.push.fromEast,o.gridster.$options.disablePushOnResize),o.gridster.checkCollision(o.gridsterItem.$item))return o.gridsterItem.$item.x=o.itemBackup[0],o.gridsterItem.$item.cols=o.itemBackup[2],o.left=o.gridster.positionXToPixels(o.gridsterItem.$item.x),o.setItemLeft(o.gridster.positionXToPixels(o.gridsterItem.$item.x)),void o.setItemWidth(o.gridster.positionXToPixels(o.gridsterItem.$item.cols)-o.margin);o.gridster.previewStyle(),o.pushResize.checkPushBack(),o.push.checkPushBack()}o.setItemLeft(o.left),o.setItemWidth(o.width)},this.handleSouth=function(s){if(o.height=s.clientY+o.offsetTop-o.diffBottom-o.top,o.minHeight>o.height&&(o.height=o.minHeight),o.bottom=o.top+o.height,o.gridster.options.enableBoundaryControl){var u,c=null!==(u=o.outerMarginBottom)&&void 0!==u?u:o.margin,l=o.gridster.el.getBoundingClientRect();o.bottom=Math.min(o.bottom,l.bottom-l.top-2*c),o.height=o.bottom-o.top}if(o.newPosition=o.gridster.pixelsToPositionY(o.bottom+(o.gridster.options.pushItems?0:o.margin),Math.ceil),o.gridsterItem.$item.y+o.gridsterItem.$item.rows!==o.newPosition){if(o.itemBackup[3]=o.gridsterItem.$item.rows,o.gridsterItem.$item.rows=o.newPosition-o.gridsterItem.$item.y,o.pushResize.pushItems(o.pushResize.fromNorth),o.push.pushItems(o.push.fromNorth,o.gridster.$options.disablePushOnResize),o.gridster.checkCollision(o.gridsterItem.$item))return o.gridsterItem.$item.rows=o.itemBackup[3],void o.setItemHeight(o.gridster.positionYToPixels(o.gridsterItem.$item.rows)-o.margin);o.gridster.previewStyle(),o.pushResize.checkPushBack(),o.push.checkPushBack()}o.setItemHeight(o.height)},this.handleEast=function(s){if(o.width=(o.gridster.$options.dirType===mi.RTL?o.originalClientX+(o.originalClientX-s.clientX):s.clientX)+o.offsetLeft-o.diffRight-o.left,o.minWidth>o.width&&(o.width=o.minWidth),o.right=o.left+o.width,o.gridster.options.enableBoundaryControl){var c,l=null!==(c=o.outerMarginRight)&&void 0!==c?c:o.margin,m=o.gridster.el.getBoundingClientRect();o.right=Math.min(o.right,m.right-m.left-2*l),o.width=o.right-o.left}if(o.newPosition=o.gridster.pixelsToPositionX(o.right+(o.gridster.options.pushItems?0:o.margin),Math.ceil),o.gridsterItem.$item.x+o.gridsterItem.$item.cols!==o.newPosition){if(o.itemBackup[2]=o.gridsterItem.$item.cols,o.gridsterItem.$item.cols=o.newPosition-o.gridsterItem.$item.x,o.pushResize.pushItems(o.pushResize.fromWest),o.push.pushItems(o.push.fromWest,o.gridster.$options.disablePushOnResize),o.gridster.checkCollision(o.gridsterItem.$item))return o.gridsterItem.$item.cols=o.itemBackup[2],void o.setItemWidth(o.gridster.positionXToPixels(o.gridsterItem.$item.cols)-o.margin);o.gridster.previewStyle(),o.pushResize.checkPushBack(),o.push.checkPushBack()}o.setItemWidth(o.width)},this.handleNorthWest=function(s){o.handleNorth(s),o.handleWest(s)},this.handleNorthEast=function(s){o.handleNorth(s),o.handleEast(s)},this.handleSouthWest=function(s){o.handleSouth(s),o.handleWest(s)},this.handleSouthEast=function(s){o.handleSouth(s),o.handleEast(s)},this.gridsterItem=n,this.gridster=t,this.lastMouse={clientX:0,clientY:0},this.itemBackup=[0,0,0,0],this.resizeEventScrollType={west:!1,east:!1,north:!1,south:!1}}return(0,_.Z)(a,[{key:"destroy",value:function(){var t;null===(t=this.gridster)||void 0===t||t.previewStyle(),this.gridster=this.gridsterItem=null}},{key:"dragStart",value:function(t){var e=this;if(!t.which||1===t.which){this.gridster.options.resizable&&this.gridster.options.resizable.start&&this.gridster.options.resizable.start(this.gridsterItem.item,this.gridsterItem,t),t.stopPropagation(),t.preventDefault(),this.zone.runOutsideAngular(function(){e.mousemove=e.gridsterItem.renderer.listen("document","mousemove",e.dragMove),e.touchmove=e.gridster.renderer.listen(e.gridster.el,"touchmove",e.dragMove)}),this.mouseup=this.gridsterItem.renderer.listen("document","mouseup",this.dragStop),this.mouseleave=this.gridsterItem.renderer.listen("document","mouseleave",this.dragStop),this.cancelOnBlur=this.gridsterItem.renderer.listen("window","blur",this.dragStop),this.touchend=this.gridsterItem.renderer.listen("document","touchend",this.dragStop),this.touchcancel=this.gridsterItem.renderer.listen("document","touchcancel",this.dragStop),this.gridsterItem.renderer.addClass(this.gridsterItem.el,"gridster-item-resizing"),this.lastMouse.clientX=t.clientX,this.lastMouse.clientY=t.clientY,this.left=this.gridsterItem.left,this.top=this.gridsterItem.top,this.originalClientX=t.clientX,this.originalClientY=t.clientY,this.width=this.gridsterItem.width,this.height=this.gridsterItem.height,this.bottom=this.gridsterItem.top+this.gridsterItem.height,this.right=this.gridsterItem.left+this.gridsterItem.width,this.margin=this.gridster.$options.margin,this.outerMarginTop=this.gridster.$options.outerMarginTop,this.outerMarginRight=this.gridster.$options.outerMarginRight,this.outerMarginBottom=this.gridster.$options.outerMarginBottom,this.outerMarginLeft=this.gridster.$options.outerMarginLeft,this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,this.diffLeft=t.clientX+this.offsetLeft-this.left,this.diffRight=t.clientX+this.offsetLeft-this.right,this.diffTop=t.clientY+this.offsetTop-this.top,this.diffBottom=t.clientY+this.offsetTop-this.bottom,this.minHeight=this.gridster.positionYToPixels(this.gridsterItem.$item.minItemRows||this.gridster.$options.minItemRows)-this.margin,this.minWidth=this.gridster.positionXToPixels(this.gridsterItem.$item.minItemCols||this.gridster.$options.minItemCols)-this.margin,this.gridster.movingItem=this.gridsterItem.$item,this.gridster.previewStyle(),this.push=new a3(this.gridsterItem),this.pushResize=new EU(this.gridsterItem),this.gridster.dragInProgress=!0,this.gridster.updateGrid();var o=t.target.classList;o.contains("handle-n")?(this.resizeEventScrollType.north=!0,this.directionFunction=this.handleNorth):o.contains("handle-w")?this.gridster.$options.dirType===mi.RTL?(this.resizeEventScrollType.east=!0,this.directionFunction=this.handleEast):(this.resizeEventScrollType.west=!0,this.directionFunction=this.handleWest):o.contains("handle-s")?(this.resizeEventScrollType.south=!0,this.directionFunction=this.handleSouth):o.contains("handle-e")?this.gridster.$options.dirType===mi.RTL?(this.resizeEventScrollType.west=!0,this.directionFunction=this.handleWest):(this.resizeEventScrollType.east=!0,this.directionFunction=this.handleEast):o.contains("handle-nw")?this.gridster.$options.dirType===mi.RTL?(this.resizeEventScrollType.north=!0,this.resizeEventScrollType.east=!0,this.directionFunction=this.handleNorthEast):(this.resizeEventScrollType.north=!0,this.resizeEventScrollType.west=!0,this.directionFunction=this.handleNorthWest):o.contains("handle-ne")?this.gridster.$options.dirType===mi.RTL?(this.resizeEventScrollType.north=!0,this.resizeEventScrollType.west=!0,this.directionFunction=this.handleNorthWest):(this.resizeEventScrollType.north=!0,this.resizeEventScrollType.east=!0,this.directionFunction=this.handleNorthEast):o.contains("handle-sw")?this.gridster.$options.dirType===mi.RTL?(this.resizeEventScrollType.south=!0,this.resizeEventScrollType.east=!0,this.directionFunction=this.handleSouthEast):(this.resizeEventScrollType.south=!0,this.resizeEventScrollType.west=!0,this.directionFunction=this.handleSouthWest):o.contains("handle-se")&&(this.gridster.$options.dirType===mi.RTL?(this.resizeEventScrollType.south=!0,this.resizeEventScrollType.west=!0,this.directionFunction=this.handleSouthWest):(this.resizeEventScrollType.south=!0,this.resizeEventScrollType.east=!0,this.directionFunction=this.handleSouthEast))}}},{key:"toggle",value:function(){this.resizeEnabled=this.gridsterItem.canBeResized(),this.resizableHandles=this.gridsterItem.getResizableHandles()}},{key:"dragStartDelay",value:function(t){var e=this;if(Bo.checkTouchEvent(t),this.gridster.$options.resizable.delayStart)var o=setTimeout(function(){e.dragStart(t),F()},this.gridster.$options.resizable.delayStart),s=this.zone.runOutsideAngular(function(){return{cancelMouse:e.gridsterItem.renderer.listen("document","mouseup",F),cancelMouseLeave:e.gridsterItem.renderer.listen("document","mouseleave",F),cancelOnBlur:e.gridsterItem.renderer.listen("window","blur",F),cancelTouchMove:e.gridsterItem.renderer.listen("document","touchmove",B),cancelTouchEnd:e.gridsterItem.renderer.listen("document","touchend",F),cancelTouchCancel:e.gridsterItem.renderer.listen("document","touchcancel",F)}}),u=s.cancelMouse,c=s.cancelMouseLeave,l=s.cancelOnBlur,m=s.cancelTouchMove,C=s.cancelTouchEnd,T=s.cancelTouchCancel;else this.dragStart(t);function B(U){Bo.checkTouchEvent(U),(Math.abs(U.clientX-t.clientX)>9||Math.abs(U.clientY-t.clientY)>9)&&F()}function F(){clearTimeout(o),l(),u(),c(),m(),C(),T()}}},{key:"setItemTop",value:function(t){this.gridster.gridRenderer.setCellPosition(this.gridsterItem.renderer,this.gridsterItem.el,this.left,t)}},{key:"setItemLeft",value:function(t){this.gridster.gridRenderer.setCellPosition(this.gridsterItem.renderer,this.gridsterItem.el,t,this.top)}},{key:"setItemHeight",value:function(t){this.gridsterItem.renderer.setStyle(this.gridsterItem.el,"height",t+"px")}},{key:"setItemWidth",value:function(t){this.gridsterItem.renderer.setStyle(this.gridsterItem.el,"width",t+"px")}}]),a}(),kU=function(){var a=function(){function n(t,e,o,s){(0,p.Z)(this,n),this.renderer=o,this.zone=s,this.itemInit=new r.EventEmitter,this.itemChange=new r.EventEmitter,this.itemResize=new r.EventEmitter,this.el=t.nativeElement,this.$item={cols:-1,rows:-1,x:-1,y:-1},this.gridster=e,this.drag=new SU(this,e,this.zone),this.resize=new PU(this,e,this.zone)}return(0,_.Z)(n,[{key:"zIndex",get:function(){return this.getLayerIndex()+this.gridster.$options.baseLayerIndex}},{key:"ngOnInit",value:function(){this.gridster.addItem(this)}},{key:"ngOnChanges",value:function(e){e.item&&(this.updateOptions(),this.init||this.gridster.calculateLayout$.next()),e.item&&e.item.previousValue&&this.setSize()}},{key:"updateOptions",value:function(){this.$item=Bo.merge(this.$item,this.item,{cols:void 0,rows:void 0,x:void 0,y:void 0,layerIndex:void 0,dragEnabled:void 0,resizeEnabled:void 0,compactEnabled:void 0,maxItemRows:void 0,minItemRows:void 0,maxItemCols:void 0,minItemCols:void 0,maxItemArea:void 0,minItemArea:void 0,resizableHandles:{s:void 0,e:void 0,n:void 0,w:void 0,se:void 0,ne:void 0,sw:void 0,nw:void 0}})}},{key:"ngOnDestroy",value:function(){this.gridster.removeItem(this),this.drag.destroy(),this.resize.destroy(),this.gridster=this.drag=this.resize=null}},{key:"setSize",value:function(){this.renderer.setStyle(this.el,"display",this.notPlaced?"":"block"),this.gridster.gridRenderer.updateItem(this.el,this.$item,this.renderer),this.updateItemSize()}},{key:"updateItemSize",value:function(){var o=this.$item.x*this.gridster.curColWidth,s=this.$item.cols*this.gridster.curColWidth-this.gridster.$options.margin,u=this.$item.rows*this.gridster.curRowHeight-this.gridster.$options.margin;this.top=this.$item.y*this.gridster.curRowHeight,this.left=o,!this.init&&s>0&&u>0&&(this.init=!0,this.item.initCallback&&this.item.initCallback(this.item,this),this.gridster.options.itemInitCallback&&this.gridster.options.itemInitCallback(this.item,this),this.itemInit.next({item:this.item,itemComponent:this}),this.gridster.$options.scrollToNewItems&&this.el.scrollIntoView(!1)),(s!==this.width||u!==this.height)&&(this.width=s,this.height=u,this.gridster.options.itemResizeCallback&&this.gridster.options.itemResizeCallback(this.item,this),this.itemResize.next({item:this.item,itemComponent:this}))}},{key:"itemChanged",value:function(){this.gridster.options.itemChangeCallback&&this.gridster.options.itemChangeCallback(this.item,this),this.itemChange.next({item:this.item,itemComponent:this})}},{key:"checkItemChanges",value:function(e,o){e.rows===o.rows&&e.cols===o.cols&&e.x===o.x&&e.y===o.y||(this.gridster.checkCollision(this.$item)?(this.$item.x=o.x||0,this.$item.y=o.y||0,this.$item.cols=o.cols||1,this.$item.rows=o.rows||1,this.setSize()):(this.item.cols=this.$item.cols,this.item.rows=this.$item.rows,this.item.x=this.$item.x,this.item.y=this.$item.y,this.gridster.calculateLayout$.next(),this.itemChanged()))}},{key:"canBeDragged",value:function(){var e=this.gridster.$options.draggable.enabled;return!this.gridster.mobile&&e&&(void 0===this.$item.dragEnabled?e:this.$item.dragEnabled)}},{key:"canBeResized",value:function(){var e=this.gridster.$options.resizable.enabled;return!this.gridster.mobile&&e&&(void 0===this.$item.resizeEnabled?e:this.$item.resizeEnabled)}},{key:"getResizableHandles",value:function(){var e=this.gridster.$options.resizable.handles,o=this.$item.resizableHandles;return void 0===o?e:(0,b.Z)((0,b.Z)({},e),o)}},{key:"bringToFront",value:function(e){if(!(e&&e<=0)){var o=this.getLayerIndex(),s=this.gridster.$options.maxLayerIndex;if(o<s){var u=e?o+e:s;this.item.layerIndex=this.$item.layerIndex=u>s?s:u}}}},{key:"sendToBack",value:function(e){if(!(e&&e<=0)){var o=this.getLayerIndex();if(o>0){var s=e?o-e:0;this.item.layerIndex=this.$item.layerIndex=s<0?0:s}}}},{key:"getLayerIndex",value:function(){return void 0!==this.item.layerIndex?this.item.layerIndex:void 0!==this.gridster.$options.defaultLayerIndex?this.gridster.$options.defaultLayerIndex:0}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(r.ElementRef),r.\u0275\u0275directiveInject(Zk),r.\u0275\u0275directiveInject(r.Renderer2),r.\u0275\u0275directiveInject(r.NgZone))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["gridster-item"]],hostVars:2,hostBindings:function(t,e){2&t&&r.\u0275\u0275styleProp("z-index",e.zIndex)},inputs:{item:"item"},outputs:{itemInit:"itemInit",itemChange:"itemChange",itemResize:"itemResize"},standalone:!0,features:[r.\u0275\u0275NgOnChangesFeature,r.\u0275\u0275StandaloneFeature],ngContentSelectors:o3,decls:9,vars:8,consts:[["class","gridster-item-resizable-handler handle-s",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-e",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-n",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-w",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-se",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-ne",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-sw",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-nw",3,"mousedown","touchstart",4,"ngIf"],[1,"gridster-item-resizable-handler","handle-s",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-e",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-n",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-w",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-se",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-ne",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-sw",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-nw",3,"mousedown","touchstart"]],template:function(t,e){1&t&&(r.\u0275\u0275projectionDef(),r.\u0275\u0275projection(0),r.\u0275\u0275template(1,cU,1,0,"div",0),r.\u0275\u0275template(2,lU,1,0,"div",1),r.\u0275\u0275template(3,dU,1,0,"div",2),r.\u0275\u0275template(4,fU,1,0,"div",3),r.\u0275\u0275template(5,pU,1,0,"div",4),r.\u0275\u0275template(6,hU,1,0,"div",5),r.\u0275\u0275template(7,mU,1,0,"div",6),r.\u0275\u0275template(8,gU,1,0,"div",7)),2&t&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",(null==e.resize.resizableHandles?null:e.resize.resizableHandles.s)&&e.resize.resizeEnabled),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",(null==e.resize.resizableHandles?null:e.resize.resizableHandles.e)&&e.resize.resizeEnabled),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",(null==e.resize.resizableHandles?null:e.resize.resizableHandles.n)&&e.resize.resizeEnabled),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",(null==e.resize.resizableHandles?null:e.resize.resizableHandles.w)&&e.resize.resizeEnabled),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",(null==e.resize.resizableHandles?null:e.resize.resizableHandles.se)&&e.resize.resizeEnabled),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",(null==e.resize.resizableHandles?null:e.resize.resizableHandles.ne)&&e.resize.resizeEnabled),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",(null==e.resize.resizableHandles?null:e.resize.resizableHandles.sw)&&e.resize.resizeEnabled),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",(null==e.resize.resizableHandles?null:e.resize.resizableHandles.nw)&&e.resize.resizeEnabled))},dependencies:[E.NgIf],styles:["gridster-item{box-sizing:border-box;z-index:1;position:absolute;overflow:hidden;transition:.3s;display:none;background:white;-webkit-user-select:text;user-select:text}gridster-item.gridster-item-moving{cursor:move}gridster-item.gridster-item-resizing,gridster-item.gridster-item-moving{transition:0s;z-index:2;box-shadow:0 0 5px 5px #0003,0 6px 10px #00000024,0 1px 18px #0000001f}.gridster-item-resizable-handler{position:absolute;z-index:2}.gridster-item-resizable-handler.handle-n{cursor:ns-resize;height:10px;right:0;top:0;left:0}.gridster-item-resizable-handler.handle-e{cursor:ew-resize;width:10px;bottom:0;right:0;top:0}.gridster-item-resizable-handler.handle-s{cursor:ns-resize;height:10px;right:0;bottom:0;left:0}.gridster-item-resizable-handler.handle-w{cursor:ew-resize;width:10px;left:0;top:0;bottom:0}.gridster-item-resizable-handler.handle-ne{cursor:ne-resize;width:10px;height:10px;right:0;top:0}.gridster-item-resizable-handler.handle-nw{cursor:nw-resize;width:10px;height:10px;left:0;top:0}.gridster-item-resizable-handler.handle-se{cursor:se-resize;width:0;height:0;right:0;bottom:0;border-style:solid;border-width:0 0 10px 10px;border-color:transparent}.gridster-item-resizable-handler.handle-sw{cursor:sw-resize;width:10px;height:10px;left:0;bottom:0}gridster-item:hover .gridster-item-resizable-handler.handle-se{border-color:transparent transparent #ccc}\n"],encapsulation:2}),a}(),g3=function(){var a=(0,_.Z)(function n(){(0,p.Z)(this,n)});return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({}),a}(),gy=S(28972),xo=S(75376),Fc=S(51372),ef=S(55198),AU=S(97040),tf=S(93168),PE=["innerGridItem"];function RU(a,n){1&a&&r.\u0275\u0275elementContainer(0)}var Mc=function(n){return{i:n}};function DU(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"div",2)(1,"p",4),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"div",5),r.\u0275\u0275template(4,RU,1,0,"ng-container",6),r.\u0275\u0275elementEnd()()),2&a){var t=n.index,e=r.\u0275\u0275nextContext().index,o=r.\u0275\u0275nextContext();r.\u0275\u0275property("fxFlex",o.dashboard[o.itemIndex(e,t)].cols),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate3("row: ",e," | column: ",t," | size: ",o.dashboard[o.itemIndex(e,t)].cols,""),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngStyle",o.gridItemInnerStyles(e,t)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngTemplateOutlet",o.innerGridItemTmpl)("ngTemplateOutletContext",r.\u0275\u0275pureFunction1(7,Mc,o.itemIndex(e,t)))}}var TU=function(){return{height:"100%"}};function IU(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"div",2)(1,"div",3),r.\u0275\u0275template(2,DU,5,9,"div",1),r.\u0275\u0275elementEnd()()),2&a){var t=n.index,e=r.\u0275\u0275nextContext();r.\u0275\u0275property("fxFlex",e.rowFlex(t)),r.\u0275\u0275advance(1),r.\u0275\u0275property("fxLayout",e.rowDirection(t))("ngStyle",r.\u0275\u0275pureFunction0(4,TU)),r.\u0275\u0275advance(1),r.\u0275\u0275property("for",e.totalColumns(t))}}var $k=["gridItemActions"],Uk=["extraActions"],v3=["mainControls"],_3=["itemHeader"];function OU(a,n){1&a&&r.\u0275\u0275elementContainer(0)}function FU(a,n){1&a&&r.\u0275\u0275elementContainer(0)}function MU(a,n){1&a&&r.\u0275\u0275elementContainer(0)}function BU(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"gridster-item",8)(1,"div",9)(2,"div",10,11),r.\u0275\u0275template(4,FU,1,0,"ng-container",12),r.\u0275\u0275elementStart(5,"button",13),r.\u0275\u0275listener("mousedown",function(){var l=r.\u0275\u0275restoreView(t).index,m=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(m.removeItem(l))})("touchstart",function(){var l=r.\u0275\u0275restoreView(t).index,m=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(m.removeItem(l))}),r.\u0275\u0275text(6,"Delete"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(7,"div",14),r.\u0275\u0275template(8,MU,1,0,"ng-container",12),r.\u0275\u0275elementEnd()()()}if(2&a){var e=n.$implicit,o=n.index,s=r.\u0275\u0275nextContext();r.\u0275\u0275property("item",e),r.\u0275\u0275advance(2),r.\u0275\u0275property("hidden",!s.displayItemHeader),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngTemplateOutlet",s.gridItemActionsTmpl)("ngTemplateOutletContext",r.\u0275\u0275pureFunction1(6,Mc,o)),r.\u0275\u0275advance(4),r.\u0275\u0275property("ngTemplateOutlet",s.innerGridItemTmpl)("ngTemplateOutletContext",r.\u0275\u0275pureFunction1(8,Mc,o))}}function NU(a,n){1&a&&r.\u0275\u0275elementContainer(0)}function ZU(a,n){1&a&&r.\u0275\u0275elementContainer(0)}function LU(a,n){1&a&&r.\u0275\u0275elementContainer(0)}var y3=function(){return{i:0}};function jU(a,n){1&a&&r.\u0275\u0275elementContainer(0)}function $U(a,n){1&a&&r.\u0275\u0275elementContainer(0)}function UU(a,n){1&a&&r.\u0275\u0275elementContainer(0)}function zU(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"as-split-area",15)(1,"div",16)(2,"div",17,18),r.\u0275\u0275template(4,$U,1,0,"ng-container",19),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(5,"div",20),r.\u0275\u0275template(6,UU,1,0,"ng-container",19),r.\u0275\u0275elementEnd()()()),2&a){var t=n.index,e=r.\u0275\u0275nextContext().index,o=r.\u0275\u0275nextContext();r.\u0275\u0275property("size",o.itemSize(e,t)),r.\u0275\u0275advance(2),r.\u0275\u0275property("hidden",!o.displayItemHeader),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngTemplateOutlet",o.gridItemActionsTmpl)("ngTemplateOutletContext",r.\u0275\u0275pureFunction1(6,Mc,o.itemIndex(e,t))),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngTemplateOutlet",o.innerGridItemTmpl)("ngTemplateOutletContext",r.\u0275\u0275pureFunction1(8,Mc,o.itemIndex(e,t)))}}function GU(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",6)(1,"div",7)(2,"button",8)(3,"mat-icon"),r.\u0275\u0275text(4,"menu"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(5,"mat-menu",null,9)(7,"button",10),r.\u0275\u0275listener("mousedown",function(){var l=r.\u0275\u0275restoreView(t).index,m=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(m.addColumn(l))}),r.\u0275\u0275text(8,"Add Column"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(9,"button",10),r.\u0275\u0275listener("mousedown",function(){var l=r.\u0275\u0275restoreView(t).index,m=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(m.layoutSettings("row",l))}),r.\u0275\u0275text(10,"Layout Settings"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(11,"button",11),r.\u0275\u0275listener("mousedown",function(){var l=r.\u0275\u0275restoreView(t).index,m=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(m.removeRow(l))}),r.\u0275\u0275text(12,"Delete"),r.\u0275\u0275elementEnd()()(),r.\u0275\u0275elementStart(13,"div",12)(14,"as-split",13),r.\u0275\u0275listener("dragEnd",function(c){var m=r.\u0275\u0275restoreView(t).index,C=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(C.dragEnd(m,c))}),r.\u0275\u0275template(15,zU,7,10,"as-split-area",14),r.\u0275\u0275elementEnd()()()}if(2&a){var e=n.index,o=r.\u0275\u0275reference(6),s=r.\u0275\u0275nextContext();r.\u0275\u0275advance(2),r.\u0275\u0275property("matMenuTriggerFor",o),r.\u0275\u0275advance(13),r.\u0275\u0275property("for",s.totalColumns(e))}}function VU(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",6),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(t);var o=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(o.login())}),r.\u0275\u0275text(1,"login"),r.\u0275\u0275elementEnd()}}var HU=function(n){return[n,"manage"]};function qU(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"div",7)(1,"a",8),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd()()),2&a){var t=n.$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275property("routerLink",r.\u0275\u0275pureFunction1(2,HU,t.path)),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(t.path)}}var KU=["*"];function WU(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"li")(1,"button",15),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(t);var o=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(o.editor.submit())}),r.\u0275\u0275text(2,"Save"),r.\u0275\u0275elementEnd()()}}function XU(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"li")(1,"button",16),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(t);var o=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(o.editor.onPropertiesClick())}),r.\u0275\u0275text(2,"Properties"),r.\u0275\u0275elementEnd()()}}function QU(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"li")(1,"button",16),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(t);var o=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(o.editor.onDeleteClick())}),r.\u0275\u0275text(2,"Delete"),r.\u0275\u0275elementEnd()()}}function JU(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"li")(1,"button",16),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(t);var o=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(o.editor.onRulesClick())}),r.\u0275\u0275text(2,"Rules"),r.\u0275\u0275elementEnd()()}}function YU(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"li")(1,"button",17),r.\u0275\u0275listener("mousedown",function(){r.\u0275\u0275restoreView(t);var o=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(o.editor.onPersistenceClick())}),r.\u0275\u0275text(2,"Persistence"),r.\u0275\u0275elementEnd()()}}function ez(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"li")(1,"button",17),r.\u0275\u0275listener("mousedown",function(){r.\u0275\u0275restoreView(t);var o=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(o.editor.onInteractionsClick())}),r.\u0275\u0275text(2,"Interactions"),r.\u0275\u0275elementEnd()()}}function tz(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"li")(1,"button",18),r.\u0275\u0275listener("mousedown",function(){r.\u0275\u0275restoreView(t);var o=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(o.editor.applyStyle(0))})("touchstart",function(){r.\u0275\u0275restoreView(t);var o=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(o.editor.applyStyle(0))}),r.\u0275\u0275text(2,"Apply Style"),r.\u0275\u0275elementEnd()()}}function nz(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"li")(1,"button",18),r.\u0275\u0275listener("mousedown",function(){r.\u0275\u0275restoreView(t);var o=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(o.editor.removeStyle(0))})("touchstart",function(){r.\u0275\u0275restoreView(t);var o=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(o.editor.removeStyle(0))}),r.\u0275\u0275text(2,"Remove Style"),r.\u0275\u0275elementEnd()()}}function rz(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",35),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(t),r.\u0275\u0275nextContext(2);var o=r.\u0275\u0275reference(2);return r.\u0275\u0275resetView(o.toggle())}),r.\u0275\u0275elementStart(1,"mat-icon"),r.\u0275\u0275text(2,"menu"),r.\u0275\u0275elementEnd()()}}function iz(a,n){1&a&&(r.\u0275\u0275elementStart(0,"mat-icon"),r.\u0275\u0275text(1,"arrow_drop_down"),r.\u0275\u0275elementEnd())}function oz(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"button",36),r.\u0275\u0275template(1,iz,2,0,"mat-icon",4),r.\u0275\u0275elementEnd()),2&a){var t=r.\u0275\u0275nextContext(2),e=r.\u0275\u0275reference(29);r.\u0275\u0275property("matMenuTriggerFor",e),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",t.nested)}}function az(a,n){1&a&&r.\u0275\u0275elementContainer(0)}function sz(a,n){if(1&a&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,az,1,0,"ng-container",23),r.\u0275\u0275elementContainerEnd()),2&a){var t=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngTemplateOutlet",t.contextsMenuTpl)}}function uz(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"div",37),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&a){var t=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(t.editor.panelStyleTitle(0))}}function cz(a,n){1&a&&r.\u0275\u0275element(0,"span",38)}function lz(a,n){1&a&&r.\u0275\u0275elementContainer(0)}function dz(a,n){1&a&&(r.\u0275\u0275elementStart(0,"div",39),r.\u0275\u0275text(1,"Quell"),r.\u0275\u0275elementEnd())}function fz(a,n){if(1&a&&(r.\u0275\u0275template(0,rz,3,0,"button",19),r.\u0275\u0275template(1,oz,2,2,"button",20),r.\u0275\u0275elementStart(2,"div"),r.\u0275\u0275template(3,sz,2,1,"ng-container",4),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(4,uz,2,1,"div",21),r.\u0275\u0275template(5,cz,1,0,"span",22),r.\u0275\u0275template(6,lz,1,0,"ng-container",23),r.\u0275\u0275elementStart(7,"div",24)(8,"mat-form-field")(9,"mat-select",25)(10,"mat-option",26),r.\u0275\u0275text(11,"page"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(12,"mat-option",27),r.\u0275\u0275text(13,"form"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(14,"mat-option",28),r.\u0275\u0275text(15,"json"),r.\u0275\u0275elementEnd()()()(),r.\u0275\u0275elementStart(16,"div",29)(17,"mat-form-field")(18,"mat-select",30)(19,"mat-option",31),r.\u0275\u0275text(20,"grid"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(21,"mat-option",32),r.\u0275\u0275text(22,"gridless"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(23,"mat-option",33),r.\u0275\u0275text(24,"split"),r.\u0275\u0275elementEnd()()()(),r.\u0275\u0275template(25,dz,2,0,"div",34)),2&a){var t=r.\u0275\u0275nextContext();r.\u0275\u0275property("ngIf",!t.nested),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",t.nested),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",t.savable),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",t.editor.hasPanelStyle(0)&&t.nested),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",t.nested),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngTemplateOutlet",t.extraActionsAreaTmpl),r.\u0275\u0275advance(19),r.\u0275\u0275property("ngIf",!t.nested)}}function pz(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"div",37),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&a){var t=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(t.editor.panelStyleTitle(0))}}function hz(a,n){if(1&a&&r.\u0275\u0275template(0,pz,2,1,"div",21),2&a){var t=r.\u0275\u0275nextContext();r.\u0275\u0275property("ngIf",t.editor.hasPanelStyle(0)&&!t.nested)}}function mz(a,n){1&a&&r.\u0275\u0275elementContainer(0)}var zk=function(n,t){return{i:n,j:t}};function gz(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"div",43),r.\u0275\u0275template(1,mz,1,0,"ng-container",44),r.\u0275\u0275elementEnd()),2&a){var t=n.index,e=r.\u0275\u0275nextContext().i,o=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("ngTemplateOutlet",o.editablePaneTpl)("ngTemplateOutletContext",r.\u0275\u0275pureFunction2(2,zk,e,t))}}function vz(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"ngx-dropzone",40),r.\u0275\u0275listener("change",function(u){var l=r.\u0275\u0275restoreView(t).i,m=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(m.editor.onFileChange(u,l))})("cdkDropListDropped",function(u){r.\u0275\u0275restoreView(t);var c=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(c.editor.onDrop(u))}),r.\u0275\u0275elementStart(1,"div",null,41),r.\u0275\u0275template(3,gz,2,5,"div",42),r.\u0275\u0275elementEnd()()}if(2&a){var e=n.i,o=r.\u0275\u0275nextContext();r.\u0275\u0275property("cdkDropListData",e)("multiple",!0)("disableClick",!0),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngForOf",o.editor.panelPanes(e).controls)}}function _z(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",15),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(t);var o=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(o.editor.submit())}),r.\u0275\u0275text(1,"Save"),r.\u0275\u0275elementEnd()}}function yz(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",16),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(t);var o=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(o.editor.onPropertiesClick())}),r.\u0275\u0275text(1,"Properties"),r.\u0275\u0275elementEnd()}}function xz(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",16),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(t);var o=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(o.editor.onDeleteClick())}),r.\u0275\u0275text(1,"Delete"),r.\u0275\u0275elementEnd()}}function bz(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",16),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(t);var o=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(o.editor.onRulesClick())}),r.\u0275\u0275text(1,"Rules"),r.\u0275\u0275elementEnd()}}function Cz(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",17),r.\u0275\u0275listener("mousedown",function(){r.\u0275\u0275restoreView(t);var o=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(o.editor.onPersistenceClick())}),r.\u0275\u0275text(1,"Persistence"),r.\u0275\u0275elementEnd()}}function wz(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",17),r.\u0275\u0275listener("mousedown",function(){r.\u0275\u0275restoreView(t);var o=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(o.editor.onInteractionsClick())}),r.\u0275\u0275text(1,"Interactions"),r.\u0275\u0275elementEnd()}}function Sz(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",18),r.\u0275\u0275listener("mousedown",function(){r.\u0275\u0275restoreView(t);var o=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(o.editor.applyStyle(0))})("touchstart",function(){r.\u0275\u0275restoreView(t);var o=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(o.editor.applyStyle(0))}),r.\u0275\u0275text(1,"Apply Style"),r.\u0275\u0275elementEnd()}}function Ez(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",18),r.\u0275\u0275listener("mousedown",function(){r.\u0275\u0275restoreView(t);var o=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(o.editor.removeStyle(0))})("touchstart",function(){r.\u0275\u0275restoreView(t);var o=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(o.editor.removeStyle(0))}),r.\u0275\u0275text(1,"Remove Style"),r.\u0275\u0275elementEnd()}}function Pz(a,n){1&a&&r.\u0275\u0275elementContainer(0)}function kz(a,n){if(1&a&&r.\u0275\u0275template(0,Pz,1,0,"ng-container",2),2&a){var t=n.i,e=r.\u0275\u0275nextContext();r.\u0275\u0275property("ngTemplateOutlet",e.renderPanelTpl)("ngTemplateOutletContext",r.\u0275\u0275pureFunction1(2,Mc,t))}}function Az(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"li")(1,"button",16),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(t);var o=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(o.editor.submit())}),r.\u0275\u0275text(2,"Save"),r.\u0275\u0275elementEnd()()}}function Rz(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"li")(1,"button",17),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(t);var o=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(o.editor.onRulesClick())}),r.\u0275\u0275text(2,"Rules"),r.\u0275\u0275elementEnd()()}}function Dz(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"li")(1,"button",5),r.\u0275\u0275listener("mousedown",function(){r.\u0275\u0275restoreView(t);var o=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(o.editor.onPersistenceClick())}),r.\u0275\u0275text(2,"Persistence"),r.\u0275\u0275elementEnd()()}}function Tz(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"li")(1,"button",5),r.\u0275\u0275listener("mousedown",function(){r.\u0275\u0275restoreView(t);var o=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(o.editor.onInteractionsClick())}),r.\u0275\u0275text(2,"Interactions"),r.\u0275\u0275elementEnd()()}}function Iz(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"li")(1,"button",17),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(t);var o=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(o.editor.onDeleteClick())}),r.\u0275\u0275text(2,"Delete"),r.\u0275\u0275elementEnd()()}}function Oz(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",32),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(t),r.\u0275\u0275nextContext(2);var o=r.\u0275\u0275reference(2);return r.\u0275\u0275resetView(o.toggle())}),r.\u0275\u0275elementStart(1,"mat-icon"),r.\u0275\u0275text(2,"menu"),r.\u0275\u0275elementEnd()()}}function Fz(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"button",33)(1,"mat-icon"),r.\u0275\u0275text(2,"menu"),r.\u0275\u0275elementEnd()()),2&a){r.\u0275\u0275nextContext(2);var t=r.\u0275\u0275reference(30);r.\u0275\u0275property("matMenuTriggerFor",t)}}function Mz(a,n){1&a&&r.\u0275\u0275element(0,"span",34)}function Bz(a,n){1&a&&r.\u0275\u0275elementContainer(0)}function Nz(a,n){if(1&a&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,Bz,1,0,"ng-container",30),r.\u0275\u0275elementContainerEnd()),2&a){var t=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngTemplateOutlet",t.contextsMenuTpl)}}function Zz(a,n){1&a&&r.\u0275\u0275elementContainer(0)}function Lz(a,n){1&a&&(r.\u0275\u0275elementStart(0,"div",35),r.\u0275\u0275text(1,"Quell"),r.\u0275\u0275elementEnd())}function jz(a,n){if(1&a&&(r.\u0275\u0275template(0,Oz,3,0,"button",18),r.\u0275\u0275template(1,Fz,3,1,"button",19),r.\u0275\u0275template(2,Mz,1,0,"span",20),r.\u0275\u0275elementStart(3,"div"),r.\u0275\u0275template(4,Nz,2,1,"ng-container",4),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(5,"div",21)(6,"mat-form-field")(7,"mat-select",22)(8,"mat-option",23),r.\u0275\u0275text(9,"page"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(10,"mat-option",24),r.\u0275\u0275text(11,"form"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(12,"mat-option",25),r.\u0275\u0275text(13,"json"),r.\u0275\u0275elementEnd()()()(),r.\u0275\u0275elementStart(14,"div",26)(15,"mat-form-field")(16,"mat-select",27)(17,"mat-option",28),r.\u0275\u0275text(18,"gridless"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(19,"mat-option",29),r.\u0275\u0275text(20,"split"),r.\u0275\u0275elementEnd()()()(),r.\u0275\u0275template(21,Zz,1,0,"ng-container",30),r.\u0275\u0275template(22,Lz,2,0,"div",31)),2&a){var t=r.\u0275\u0275nextContext();r.\u0275\u0275property("ngIf",!t.nested),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",t.nested),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",t.nested),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",t.savable),r.\u0275\u0275advance(17),r.\u0275\u0275property("ngTemplateOutlet",t.extraActionsAreaTmpl),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!t.nested)}}function $z(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",42),r.\u0275\u0275listener("mousedown",function(){r.\u0275\u0275restoreView(t);var o=r.\u0275\u0275nextContext().i,s=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(s.editor.applyStyle(o))})("touchstart",function(){r.\u0275\u0275restoreView(t);var o=r.\u0275\u0275nextContext().i,s=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(s.editor.applyStyle(o))}),r.\u0275\u0275text(1,"Apply Style"),r.\u0275\u0275elementEnd()}}function Uz(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",42),r.\u0275\u0275listener("mousedown",function(){r.\u0275\u0275restoreView(t);var o=r.\u0275\u0275nextContext().i,s=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(s.editor.removeStyle(o))})("touchstart",function(){r.\u0275\u0275restoreView(t);var o=r.\u0275\u0275nextContext().i,s=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(s.editor.removeStyle(o))}),r.\u0275\u0275text(1,"Remove Style"),r.\u0275\u0275elementEnd()}}function zz(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"div",43),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&a){var t=r.\u0275\u0275nextContext().i,e=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(e.editor.panelStyleTitle(t))}}function Gz(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",36)(1,"mat-icon"),r.\u0275\u0275text(2,"arrow_drop_down"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(3,"mat-menu",null,37)(5,"button",5),r.\u0275\u0275listener("mousedown",function(){var l=r.\u0275\u0275restoreView(t).i;r.\u0275\u0275nextContext();var m=r.\u0275\u0275reference(22);return r.\u0275\u0275resetView(m.layoutSettings("column",l))}),r.\u0275\u0275text(6,"Layout Settings"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(7,"button",38),r.\u0275\u0275listener("mousedown",function(){var l=r.\u0275\u0275restoreView(t).i,m=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(m.editor.addContent(l))})("touchstart",function(){var l=r.\u0275\u0275restoreView(t).i,m=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(m.editor.addContent(l))}),r.\u0275\u0275text(8,"Add Content"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(9,"button",38),r.\u0275\u0275listener("mousedown",function(){var l=r.\u0275\u0275restoreView(t).i,m=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(m.editor.editPanelProps(l))})("touchstart",function(){var l=r.\u0275\u0275restoreView(t).i,m=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(m.editor.editPanelProps(l))}),r.\u0275\u0275text(10,"Props"),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(11,$z,2,0,"button",39),r.\u0275\u0275template(12,Uz,2,0,"button",39),r.\u0275\u0275elementStart(13,"button",40),r.\u0275\u0275listener("mousedown",function(){var l=r.\u0275\u0275restoreView(t).i;r.\u0275\u0275nextContext();var m=r.\u0275\u0275reference(22);return r.\u0275\u0275resetView(m.removeColumn2(l))})("touchstart",function(){var l=r.\u0275\u0275restoreView(t).i;r.\u0275\u0275nextContext();var m=r.\u0275\u0275reference(22);return r.\u0275\u0275resetView(m.removeColumn2(l))}),r.\u0275\u0275text(14,"Delete"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275template(15,zz,2,1,"div",41)}if(2&a){var e=n.i,o=r.\u0275\u0275reference(4),s=r.\u0275\u0275nextContext();r.\u0275\u0275property("matMenuTriggerFor",o),r.\u0275\u0275advance(11),r.\u0275\u0275property("ngIf",!s.editor.hasPanelStyle(e)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",s.editor.hasPanelStyle(e)),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngIf",s.editor.hasPanelStyle(e))}}function Vz(a,n){1&a&&r.\u0275\u0275elementContainer(0)}function Hz(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"div",47),r.\u0275\u0275template(1,Vz,1,0,"ng-container",48),r.\u0275\u0275elementEnd()),2&a){var t=n.index,e=r.\u0275\u0275nextContext().i,o=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("ngTemplateOutlet",o.editablePaneTpl)("ngTemplateOutletContext",r.\u0275\u0275pureFunction2(2,zk,e,t))}}function qz(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"ngx-dropzone",44),r.\u0275\u0275listener("change",function(u){var l=r.\u0275\u0275restoreView(t).i,m=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(m.editor.onFileChange(u,l))})("cdkDropListDropped",function(u){r.\u0275\u0275restoreView(t);var c=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(c.editor.onDrop(u))}),r.\u0275\u0275elementStart(1,"div",null,45),r.\u0275\u0275template(3,Hz,2,5,"div",46),r.\u0275\u0275elementEnd()()}if(2&a){var e=n.i,o=r.\u0275\u0275nextContext();r.\u0275\u0275property("cdkDropListData",e)("multiple",!0)("disableClick",!0),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngForOf",o.editor.panelPanes(e).controls)}}function Kz(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",16),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(t);var o=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(o.editor.submit())}),r.\u0275\u0275text(1,"Save"),r.\u0275\u0275elementEnd()}}function Wz(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",17),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(t);var o=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(o.editor.onRulesClick())}),r.\u0275\u0275text(1,"Rules"),r.\u0275\u0275elementEnd()}}function Xz(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",5),r.\u0275\u0275listener("mousedown",function(){r.\u0275\u0275restoreView(t);var o=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(o.editor.onPersistenceClick())}),r.\u0275\u0275text(1,"Persistence"),r.\u0275\u0275elementEnd()}}function Qz(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",5),r.\u0275\u0275listener("mousedown",function(){r.\u0275\u0275restoreView(t);var o=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(o.editor.onInteractionsClick())}),r.\u0275\u0275text(1,"Interactions"),r.\u0275\u0275elementEnd()}}function Jz(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",17),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(t);var o=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(o.editor.onDeleteClick())}),r.\u0275\u0275text(1,"Delete"),r.\u0275\u0275elementEnd()}}function Yz(a,n){1&a&&r.\u0275\u0275elementContainer(0)}function eG(a,n){if(1&a&&r.\u0275\u0275template(0,Yz,1,0,"ng-container",2),2&a){var t=n.i,e=r.\u0275\u0275nextContext();r.\u0275\u0275property("ngTemplateOutlet",e.renderPanelTpl)("ngTemplateOutletContext",r.\u0275\u0275pureFunction1(2,Mc,t))}}var hG=function(){var a=function(){function n(t){(0,p.Z)(this,n),this.attributeMatcher=t,this.dashboard=[],this.layoutSetting=new br,this.rowSettings=[],this.columnSettings=[]}return(0,_.Z)(n,[{key:"totalRows",get:function(){return 0==this.dashboard.length?0:this.dashboard.reduce(function(e,o){return o.y>e?o.y:e},0)+1}},{key:"direction",get:function(){var e=this.attributeMatcher.getComputedValue("direction",this.layoutSetting?this.layoutSetting.settings:[]);return!e||"column"!==e.trim()&&"row"!==e.trim()?"column":e}},{key:"ngOnInit",value:function(){console.log(this.dashboard)}},{key:"itemIndex",value:function(e,o){return this.dashboard.findIndex(function(s){return s.y===e&&s.x===o})}},{key:"totalColumns",value:function(e){return this.dashboard.reduce(function(o,s){return s.y===e?o+1:o},0)}},{key:"rowDirection",value:function(e){var o=this.attributeMatcher.getComputedValue("direction",this.rowSettings&&this.rowSettings[e]?this.rowSettings[e].settings:[]);return!o||"column"!==o.trim()&&"row"!==o.trim()?"row":o}},{key:"rowFlex",value:function(e){var o=this;return["flexGrow","flexShrink","flexBasis"].map(function(l){return o.attributeMatcher.getComputedValue(l,o.rowSettings&&o.rowSettings[e]?o.rowSettings[e].settings:[])}).map(function(l){return null!=l&&""!==l&&""!==l.trim()?"".concat(l.trim()):""}).join(" ")}},{key:"gridItemInnerStyles",value:function(e,o){var s=this.itemIndex(e,o);return{height:this.calculateHeight(this.attributeMatcher.getComputedValue("height",this.columnSettings&&this.columnSettings[s]?this.columnSettings[s].settings:[]))}}},{key:"calculateHeight",value:function(e){return null!=e?e.trim():"auto"}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Bt.AttributeMatcherService))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-flex-layout"]],contentQueries:function(t,e,o){var s;1&t&&r.\u0275\u0275contentQuery(o,PE,5),2&t&&r.\u0275\u0275queryRefresh(s=r.\u0275\u0275loadQuery())&&(e.innerGridItemTmpl=s.first)},inputs:{dashboard:"dashboard",layoutSetting:"layoutSetting",rowSettings:"rowSettings",columnSettings:"columnSettings"},decls:2,vars:2,consts:[["fxFill","",3,"fxLayout"],[3,"fxFlex",4,"for"],[3,"fxFlex"],[3,"fxLayout","ngStyle"],["hidden",""],[1,"grid-item-inner",3,"ngStyle"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"div",0),r.\u0275\u0275template(1,IU,3,5,"div",1),r.\u0275\u0275elementEnd()),2&t&&(r.\u0275\u0275property("fxLayout",e.direction),r.\u0275\u0275advance(1),r.\u0275\u0275property("for",e.totalRows))},dependencies:[E.NgTemplateOutlet,E.NgStyle,Wt,Ma,In,Ue,Nn.ForDirective]}),a}(),x3=function(){var a=function(){function n(){(0,p.Z)(this,n),this.itemAdded=new r.EventEmitter,this.itemRemoved=new r.EventEmitter,this.dashboard=[],this.displayMainControls=!0,this.displayItemHeader=!0,this.itemHeights=[],this.rows=0}return(0,_.Z)(n,[{key:"grid",get:function(){return this.dashboard}},{key:"cumulativeHeight",get:function(){var e=this,o=[];return this.heightsMatrix.forEach(function(s){o.push(e.itemHeights.reduce(function(u,c){return c>u?c:u}))}),o.reduce(function(s,u){return s+u})}},{key:"heightsMatrix",get:function(){var e=this;return this.dashboard.reduce(function(o,s,u){return o[s.y]=void 0!==o[s.y]?[].concat((0,y.Z)(o[s.y]),[e.itemHeights[u]]):[e.itemHeights[u]],o},[])}},{key:"ngOnInit",value:function(){}},{key:"removeItem",value:function(e){this.dashboard.splice(e,1),this.itemHeights.splice(e,1),this.itemRemoved.emit(e)}},{key:"addColumn",value:function(){console.log("add column grid"),this.dashboard.push({cols:1,rows:1,y:0,x:this.dashboard.length}),this.itemAdded.emit()}},{key:"addRow",value:function(){this.dashboard.push({cols:1,rows:1,y:this.rows++,x:0}),this.itemAdded.emit()}},{key:"setItemContentHeight",value:function(e,o){this.itemHeights[e]=o+(this.displayItemHeader?this.itemHeaderHeight(e):0),this.refreshGridHeight()}},{key:"refreshGridHeight",value:function(){this.gridHeight=this.cumulativeHeight+16*this.gridster.rows}},{key:"itemHeaderHeight",value:function(e){return this.itemHeaders.find(function(o,s){return s===e}).nativeElement.offsetHeight}}]),n}();return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-grid-layout"]],contentQueries:function(t,e,o){var s;1&t&&(r.\u0275\u0275contentQuery(o,$k,5),r.\u0275\u0275contentQuery(o,PE,5),r.\u0275\u0275contentQuery(o,Uk,5)),2&t&&(r.\u0275\u0275queryRefresh(s=r.\u0275\u0275loadQuery())&&(e.gridItemActionsTmpl=s.first),r.\u0275\u0275queryRefresh(s=r.\u0275\u0275loadQuery())&&(e.innerGridItemTmpl=s.first),r.\u0275\u0275queryRefresh(s=r.\u0275\u0275loadQuery())&&(e.extraActionsTmpl=s.first))},viewQuery:function(t,e){var o;1&t&&(r.\u0275\u0275viewQuery(Zk,5),r.\u0275\u0275viewQuery(v3,5),r.\u0275\u0275viewQuery(_3,5)),2&t&&(r.\u0275\u0275queryRefresh(o=r.\u0275\u0275loadQuery())&&(e.gridster=o.first),r.\u0275\u0275queryRefresh(o=r.\u0275\u0275loadQuery())&&(e.mainControls=o.first),r.\u0275\u0275queryRefresh(o=r.\u0275\u0275loadQuery())&&(e.itemHeaders=o))},inputs:{dashboard:"dashboard",displayMainControls:"displayMainControls",displayItemHeader:"displayItemHeader",options:"options"},outputs:{itemAdded:"itemAdded",itemRemoved:"itemRemoved"},decls:11,vars:6,consts:[[1,"layout-wrapper"],[1,"main-controls",3,"hidden"],["mainControls",""],["type","button",3,"mousedown"],[4,"ngTemplateOutlet"],[1,"layout-inner"],[3,"options"],[3,"item",4,"ngFor","ngForOf"],[3,"item"],["fxLayout","column","fxFill",""],["fxFlex","0 1 auto",1,"grid-item-header",3,"hidden"],["itemHeader",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["type","button",1,"delete",3,"mousedown","touchstart"],["fxFlex","",1,"grid-item-inner"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"div",0)(1,"div",1,2)(3,"button",3),r.\u0275\u0275listener("mousedown",function(){return e.addColumn()}),r.\u0275\u0275text(4,"Add Column"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(5,"button",3),r.\u0275\u0275listener("mousedown",function(){return e.addRow()}),r.\u0275\u0275text(6,"Add Row"),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(7,OU,1,0,"ng-container",4),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(8,"div",5)(9,"gridster",6),r.\u0275\u0275template(10,BU,9,10,"gridster-item",7),r.\u0275\u0275elementEnd()()()),2&t&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("hidden",!e.displayMainControls),r.\u0275\u0275advance(6),r.\u0275\u0275property("ngTemplateOutlet",e.extraActionsTmpl),r.\u0275\u0275advance(1),r.\u0275\u0275styleProp("height",e.gridHeight,"px"),r.\u0275\u0275advance(1),r.\u0275\u0275property("options",e.options),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",e.dashboard))},dependencies:[E.NgForOf,E.NgTemplateOutlet,Wt,Ma,In,Zk,kU],styles:[".layout-wrapper[_ngcontent-%COMP%], .layout-inner[_ngcontent-%COMP%]{height:100%}.grid-item-header[_ngcontent-%COMP%]{background-color:#ccc;padding:.5em}button.delete[_ngcontent-%COMP%]{float:right}.main-controls[_ngcontent-%COMP%]{background-color:#fff;padding:.5em}"]}),a}(),b3=function(){var a=function(){function n(){(0,p.Z)(this,n),this.displayMainControls=!0,this.displayItemHeader=!0,this.nested=!1}return(0,_.Z)(n,[{key:"ngOnInit",value:function(){}}]),n}();return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-gridless-layout"]],contentQueries:function(t,e,o){var s;1&t&&(r.\u0275\u0275contentQuery(o,$k,5),r.\u0275\u0275contentQuery(o,PE,5),r.\u0275\u0275contentQuery(o,Uk,5)),2&t&&(r.\u0275\u0275queryRefresh(s=r.\u0275\u0275loadQuery())&&(e.gridItemActionsTmpl=s.first),r.\u0275\u0275queryRefresh(s=r.\u0275\u0275loadQuery())&&(e.innerGridItemTmpl=s.first),r.\u0275\u0275queryRefresh(s=r.\u0275\u0275loadQuery())&&(e.extraActionsTmpl=s.first))},hostVars:2,hostBindings:function(t,e){2&t&&r.\u0275\u0275classProp("is-nested",e.nested)},inputs:{displayMainControls:"displayMainControls",displayItemHeader:"displayItemHeader",nested:"nested"},decls:11,vars:9,consts:[[1,"layout-wrapper"],[1,"main-controls",3,"hidden"],["mainControls",""],[4,"ngTemplateOutlet"],[1,"layout-inner"],["fxLayout","column","fxFill",""],["fxFlex","0 1 auto",1,"grid-item-header",3,"hidden"],["itemHeader",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["fxFlex","",1,"grid-item-inner"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"div",0)(1,"div",1,2),r.\u0275\u0275template(3,NU,1,0,"ng-container",3),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"div",4)(5,"div",5)(6,"div",6,7),r.\u0275\u0275template(8,ZU,1,0,"ng-container",8),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(9,"div",9),r.\u0275\u0275template(10,LU,1,0,"ng-container",8),r.\u0275\u0275elementEnd()()()()),2&t&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("hidden",!e.displayMainControls),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngTemplateOutlet",e.extraActionsTmpl),r.\u0275\u0275advance(3),r.\u0275\u0275property("hidden",!e.displayItemHeader),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngTemplateOutlet",e.gridItemActionsTmpl)("ngTemplateOutletContext",r.\u0275\u0275pureFunction0(7,y3)),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngTemplateOutlet",e.innerGridItemTmpl)("ngTemplateOutletContext",r.\u0275\u0275pureFunction0(8,y3)))},dependencies:[E.NgTemplateOutlet,Wt,Ma,In],styles:[".layout-wrapper[_ngcontent-%COMP%], .layout-inner[_ngcontent-%COMP%]{height:100%}.is-nested[_nghost-%COMP%]   .layout-wrapper[_ngcontent-%COMP%]{padding:0 .25em;border:1px solid #ccc}.main-controls[_ngcontent-%COMP%]{display:flex;padding:0;align-items:baseline;border-bottom:1px solid #ccc;margin-bottom:.25em}.grid-item-header[_ngcontent-%COMP%]{padding:0;display:flex;align-items:baseline}"]}),a}(),mG=function(){var a=function(){function n(t){(0,p.Z)(this,n),this.fb=t,this.settingValues=[],this.layoutForm=this.fb.group({settings:this.fb.control("")}),this.onTouched=function(){}}return(0,_.Z)(n,[{key:"attributes",get:function(){return this.layout.settings.has(this.type)?this.layout.settings.get(this.type):[]}},{key:"ngOnInit",value:function(){}},{key:"writeValue",value:function(e){e&&this.layoutForm.setValue(e,{emitEvent:!1})}},{key:"registerOnChange",value:function(e){this.layoutForm.valueChanges.subscribe(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){e?this.layoutForm.disable():this.layoutForm.enable()}},{key:"validate",value:function(e){return this.layoutForm.valid?null:{invalidForm:{valid:!1,message:"layout is invalid"}}}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(v.QS))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["druid-layout-form"]],inputs:{layout:"layout",type:"type",settingValues:"settingValues"},features:[r.\u0275\u0275ProvidersFeature([{provide:v.JU,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0},{provide:v.Cf,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0}])],decls:2,vars:3,consts:[[3,"formGroup"],["formControlName","settings",3,"attributes","attributeValues"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"div",0),r.\u0275\u0275element(1,"classifieds-ui-attributes-builder",1),r.\u0275\u0275elementEnd()),2&t&&(r.\u0275\u0275property("formGroup",e.layoutForm),r.\u0275\u0275advance(1),r.\u0275\u0275property("attributes",e.attributes)("attributeValues",e.settingValues))},dependencies:[v.JJ,v.JL,v.sg,v.u,Bt.AttributesBuilderComponent]}),a}(),gG=function(){var a=function(){function n(t,e,o,s){(0,p.Z)(this,n),this.data=t,this.dialogRef=e,this.valueComputerService=o,this.fb=s,this.settingValues=[],this.dialogForm=this.fb.group({layout:this.fb.control("")})}return(0,_.Z)(n,[{key:"attrValues",get:function(){return""===this.dialogForm.get("layout").value?this.settingValues:this.dialogForm.get("layout").value.settings.map(function(e){return new Bt.AttributeValue(e)})}},{key:"ngOnInit",value:function(){this.layout=this.data.layout,this.type=this.data.type,this.settingValues=this.data.settingValues}},{key:"submit",value:function(){console.log(this.attrValues);var e=this.valueComputerService.compute(this.attrValues);this.dialogRef.close(e)}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Jt.MAT_LEGACY_DIALOG_DATA),r.\u0275\u0275directiveInject(Jt.MatLegacyDialogRef),r.\u0275\u0275directiveInject(Bt.ValueComputerService),r.\u0275\u0275directiveInject(v.QS))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["druid-layout-dialog"]],decls:6,vars:5,consts:[[1,"layout-form",3,"formGroup","ngSubmit"],["formControlName","layout",3,"layout","type","settingValues"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"form",0),r.\u0275\u0275listener("ngSubmit",function(){return e.submit()}),r.\u0275\u0275elementStart(1,"mat-dialog-content"),r.\u0275\u0275element(2,"druid-layout-form",1),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"mat-dialog-actions")(4,"button",2),r.\u0275\u0275text(5,"Save"),r.\u0275\u0275elementEnd()()()),2&t&&(r.\u0275\u0275property("formGroup",e.dialogForm),r.\u0275\u0275advance(2),r.\u0275\u0275property("layout",e.layout)("type",e.type)("settingValues",e.settingValues),r.\u0275\u0275advance(2),r.\u0275\u0275property("disabled",!e.dialogForm.valid))},dependencies:[v._Y,v.JJ,v.JL,v.sg,v.u,pi.MatLegacyButton,Jt.MatLegacyDialogClose,Jt.MatLegacyDialogContent,Jt.MatLegacyDialogActions,mG]}),a}(),kE=function(){var a=function(n){(0,G.Z)(e,n);var t=(0,H.Z)(e);function e(o,s){return(0,p.Z)(this,e),t.call(this,o,s)}return(0,_.Z)(e,[{key:"pluginDef",value:function(){return(0,je.of)(new Rn.PluginDef({name:"layout"}))}}]),e}(Rn.BasePluginManager);return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Rn.PluginConfigurationManager),r.\u0275\u0275inject(Nn.ModuleLoaderService))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),C3=function(){var a=function(){function n(t,e,o){(0,p.Z)(this,n),this.el=t,this.dialog=e,this.lpm=o,this.itemAdded=new r.EventEmitter,this.itemRemoved=new r.EventEmitter,this.dashboard=[],this.displayMainControls=!0,this.displayItemHeader=!0,this.nested=!1,this.layoutSettingChange=new r.EventEmitter,this.rowSettingsChange=new r.EventEmitter,this.columnSettingsChange=new r.EventEmitter,this.rows=0,this.sizes=[]}return(0,_.Z)(n,[{key:"totalRows",get:function(){return 0==this.dashboard.length?0:this.dashboard.reduce(function(e,o){return o.y>e?o.y:e},0)+1}},{key:"ngOnInit",value:function(){if(0===this.dashboard.length)this.addRow();else{for(var e=0;e<this.totalRows;e++){var o=this.totalColumns(e);this.sizes.push([]);for(var s=0;s<o;s++){var u=this.itemIndex(e,s);this.sizes[e].push(this.dashboard[u].cols)}}if(this.totalRows!==this.rowSettings.length&&0===this.rowSettings.length){for(var c=[],l=0;l<this.totalRows;l++)c.push(new br);this.rowSettings=c,this.rowSettingsChange.emit(this.rowSettings)}for(var m=0,C=0;C<this.totalRows;C++)m+=this.totalColumns(C);if(m!==this.columnSettings.length&&0===this.columnSettings.length){for(var T=[],B=0;B<this.totalRows;B++)for(var F=0;F<this.totalColumns(B);F++)T.push(new br);this.columnSettings=T,this.columnSettingsChange.emit(this.columnSettings)}}}},{key:"removeRow",value:function(e){for(var o=this.dashboard.reduce(function(m,C,T){return[].concat((0,y.Z)(m),(0,y.Z)(C.y===e?[T]:[]))},[]),s=o.length,u=0,c=0;c<s;c++)this.dashboard.splice(o[c]-u,1),this.rowSettings.splice(e,1),u++,this.itemRemoved.emit(o[c]),this.rowSettingsChange.emit(this.rowSettings);s=this.dashboard.length;for(var l=0;l<s;l++)this.dashboard[l].y>e&&(this.dashboard[l].y=this.dashboard[l].y-1)}},{key:"removeColumn",value:function(e,o){var s=this.itemIndex(e,o);this.dashboard.splice(s,1),this.itemRemoved.emit(s)}},{key:"removeColumn2",value:function(e){this.dashboard.splice(e,1),this.itemRemoved.emit(e)}},{key:"addRow",value:function(){this.sizes.push([]),this.rowSettings=[].concat((0,y.Z)(this.rowSettings.map(function(e){return new br(e)})),[new br]),this.addColumn(0===this.totalRows?0:this.totalRows),this.rowSettingsChange.emit(this.rowSettings)}},{key:"addColumn",value:function(e){var o=this,s=this.totalColumns(e),u=0===s?100:100/(s+1);this.sizes[e][s]=u,this.dashboard.push({cols:u,rows:1,y:e,x:s}),this.itemAdded.emit(),setTimeout(function(){return o.resetGutter()})}},{key:"dragEnd",value:function(e,o){var s=o.sizes,u=this.dashboard.length,c=0;this.sizes[e]=(0,y.Z)(s);for(var l=this.dashboard.map(function(C){return(0,b.Z)({},C)}),m=0;m<u;m++)this.dashboard[m].y===e&&(l[m].cols=s[c],c+=1);this.dashboard=l}},{key:"itemIndex",value:function(e,o){return this.dashboard.findIndex(function(s){return s.y===e&&s.x===o})}},{key:"itemSize",value:function(e,o){return this.dashboard[this.itemIndex(e,o)].cols}},{key:"totalColumns",value:function(e){return this.dashboard.reduce(function(o,s){return s.y===e?o+1:o},0)}},{key:"resetGutter",value:function(){this.el.nativeElement.querySelectorAll(".as-split-gutter").forEach(function(e){e.style.height="auto"})}},{key:"settingValues",value:function(e,o){switch(e){case"column":return this.columnSettings[o].settings;case"row":return this.rowSettings[o].settings;case"global":return this.layoutSetting.settings;default:return[]}}},{key:"layoutSettings",value:function(e,o){var s=this;this.lpm.getPlugin("split").pipe((0,st.w)(function(u){return s.dialog.open(gG,{data:{layout:u,type:e,settingValues:s.settingValues(e,o)}}).afterClosed()}),(0,Q.h)(function(u){return!!u})).subscribe(function(u){switch(e){case"column":s.columnSettings=s.columnSettings.map(function(c,l){return new br(l===o?{settings:u.map(function(m){return new Bt.AttributeValue(m)})}:c)}),console.log(s.columnSettings),s.columnSettingsChange.emit(s.columnSettings);break;case"row":s.rowSettings=s.rowSettings.map(function(c,l){return new br(l===o?{settings:u.map(function(m){return new Bt.AttributeValue(m)})}:c)}),console.log(s.rowSettings),s.rowSettingsChange.emit(s.rowSettings);break;case"global":s.layoutSetting=new br({settings:u.map(function(c){return new Bt.AttributeValue(c)})}),s.layoutSettingChange.emit(s.layoutSetting)}})}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(r.ElementRef),r.\u0275\u0275directiveInject(Jt.MatLegacyDialog),r.\u0275\u0275directiveInject(kE))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-split-layout"]],contentQueries:function(t,e,o){var s;1&t&&(r.\u0275\u0275contentQuery(o,$k,5),r.\u0275\u0275contentQuery(o,PE,5),r.\u0275\u0275contentQuery(o,Uk,5)),2&t&&(r.\u0275\u0275queryRefresh(s=r.\u0275\u0275loadQuery())&&(e.gridItemActionsTmpl=s.first),r.\u0275\u0275queryRefresh(s=r.\u0275\u0275loadQuery())&&(e.innerGridItemTmpl=s.first),r.\u0275\u0275queryRefresh(s=r.\u0275\u0275loadQuery())&&(e.extraActionsTmpl=s.first))},viewQuery:function(t,e){var o;1&t&&(r.\u0275\u0275viewQuery(v3,5),r.\u0275\u0275viewQuery(_3,5),r.\u0275\u0275viewQuery(X_,5)),2&t&&(r.\u0275\u0275queryRefresh(o=r.\u0275\u0275loadQuery())&&(e.mainControls=o.first),r.\u0275\u0275queryRefresh(o=r.\u0275\u0275loadQuery())&&(e.itemHeaders=o),r.\u0275\u0275queryRefresh(o=r.\u0275\u0275loadQuery())&&(e.splitAreas=o))},hostVars:2,hostBindings:function(t,e){2&t&&r.\u0275\u0275classProp("is-nested",e.nested)},inputs:{dashboard:"dashboard",displayMainControls:"displayMainControls",displayItemHeader:"displayItemHeader",nested:"nested",layoutSetting:"layoutSetting",rowSettings:"rowSettings",columnSettings:"columnSettings"},outputs:{itemAdded:"itemAdded",itemRemoved:"itemRemoved",layoutSettingChange:"layoutSettingChange",rowSettingsChange:"rowSettingsChange",columnSettingsChange:"columnSettingsChange"},decls:6,vars:3,consts:[[1,"layout-wrapper"],[1,"main-controls",3,"hidden"],["mainControls",""],[4,"ngTemplateOutlet"],[1,"layout-inner"],["class","rows-wrapper",4,"for"],[1,"rows-wrapper"],[1,"row-controls"],["mat-button","","type","button",3,"matMenuTriggerFor"],["rowActions","matMenu"],["type","button","mat-menu-item","",3,"mousedown"],["type","button","mat-menu-item","",1,"remove-row",3,"mousedown"],[1,"rows-inner"],["unit","percent","direction","horizontal",3,"dragEnd"],[3,"size",4,"for"],[3,"size"],["fxLayout","column","fxFill",""],[1,"grid-item-header",3,"hidden"],["itemHeader",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["fxFlex","",1,"grid-item-inner"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"div",0)(1,"div",1,2),r.\u0275\u0275template(3,jU,1,0,"ng-container",3),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"div",4),r.\u0275\u0275template(5,GU,16,2,"div",5),r.\u0275\u0275elementEnd()()),2&t&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("hidden",!e.displayMainControls),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngTemplateOutlet",e.extraActionsTmpl),r.\u0275\u0275advance(2),r.\u0275\u0275property("for",e.totalRows))},dependencies:[E.NgTemplateOutlet,pi.MatLegacyButton,gy.MatIcon,xo.MatLegacyMenu,xo.MatLegacyMenuItem,xo.MatLegacyMenuTrigger,Wt,Ma,In,W_,X_,Nn.ForDirective],styles:[".layout-wrapper[_ngcontent-%COMP%], .layout-inner[_ngcontent-%COMP%]{height:100%}.grid-item-header[_ngcontent-%COMP%]{padding:0;display:flex;align-items:baseline}button.delete[_ngcontent-%COMP%]{float:right}.main-controls[_ngcontent-%COMP%]{display:flex;padding:0;align-items:baseline}.rows-inner[_ngcontent-%COMP%]{height:auto;background-color:#fff}.row-controls[_ngcontent-%COMP%]{background-color:gray;padding:0}.remove-row[_ngcontent-%COMP%]{float:right}.is-nested[_nghost-%COMP%]   .layout-wrapper[_ngcontent-%COMP%]{padding:0 .25em;border:1px solid #ccc}.mat-menu-trigger[_ngcontent-%COMP%]{min-width:0;padding:0;margin:0;color:#fff}.mat-menu-trigger[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{transform:rotate(-90deg)}"]}),a}(),w3=function(a){(0,G.Z)(t,a);var n=(0,H.Z)(t);function t(e){var o;if((0,p.Z)(this,t),(o=n.call(this,e)).settings=new Map,e.settings){var s=[];o.renderer=e.renderer,o.editor=e.editor,e.settings.forEach(function(u,c){s.push([c,u.map(function(l){return new Bt.Attribute(l)})])}),o.settings=new Map(s)}return o}return(0,_.Z)(t)}(Rn.Plugin),S3=function(){var a=function(){function n(t,e,o,s){(0,p.Z)(this,n),this.siteName=t,this.authFacade=e,this.controlContainer=o,this.close=new r.EventEmitter,this.panelPageListItemsService=s.getEntityCollectionService("PanelPageListItem")}return(0,_.Z)(n,[{key:"ngOnInit",value:function(){this.panelPageListItems$=this.panelPageListItemsService.getWithQuery("site=".concat(encodeURIComponent('{"term":{"site.keyword":{"value":"'.concat(this.siteName,'"}}}')))),this.isAuthenticated$=this.authFacade.getUser$.pipe((0,Ce.U)(function(e){return!!e}))}},{key:"login",value:function(){this.authFacade.login()}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Nn.SITE_NAME),r.\u0275\u0275directiveInject(li),r.\u0275\u0275directiveInject(v.gN),r.\u0275\u0275directiveInject(Dr))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["druid-layout-sidenav"]],outputs:{close:"close"},ngContentSelectors:KU,decls:12,vars:6,consts:[[1,"close-wrapper"],[3,"click"],["type","button","class","login","mat-button","",3,"click",4,"ngIf"],[1,"viewport-container"],["appendOnly","","itemSize","48",1,"viewport"],["class","pp-item",4,"cdkVirtualFor","cdkVirtualForOf"],["type","button","mat-button","",1,"login",3,"click"],[1,"pp-item"],[3,"routerLink"]],template:function(t,e){1&t&&(r.\u0275\u0275projectionDef(),r.\u0275\u0275elementStart(0,"div",0)(1,"mat-icon",1),r.\u0275\u0275listener("click",function(){return e.close.emit()}),r.\u0275\u0275text(2,"close"),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(3,VU,2,0,"button",2),r.\u0275\u0275pipe(4,"async"),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(5,"mat-divider"),r.\u0275\u0275projection(6),r.\u0275\u0275element(7,"mat-divider"),r.\u0275\u0275elementStart(8,"div",3)(9,"cdk-virtual-scroll-viewport",4),r.\u0275\u0275template(10,qU,3,4,"div",5),r.\u0275\u0275pipe(11,"async"),r.\u0275\u0275elementEnd()()),2&t&&(r.\u0275\u0275advance(3),r.\u0275\u0275property("ngIf",!r.\u0275\u0275pipeBind1(4,2,e.isAuthenticated$)),r.\u0275\u0275advance(7),r.\u0275\u0275property("cdkVirtualForOf",r.\u0275\u0275pipeBind1(11,4,e.panelPageListItems$)))},dependencies:[E.NgIf,nr.RouterLink,pi.MatLegacyButton,AU.MatDivider,gy.MatIcon,tf.CdkFixedSizeVirtualScroll,tf.CdkVirtualForOf,tf.CdkVirtualScrollViewport,E.AsyncPipe],styles:["[_nghost-%COMP%]{height:100%;display:flex;flex-direction:column}.close-wrapper[_ngcontent-%COMP%]{padding:16px 16px 0;position:relative}.login[_ngcontent-%COMP%]{position:absolute;top:7px;right:5px}.pp-item[_ngcontent-%COMP%]{line-height:48px}.viewport[_ngcontent-%COMP%]{height:100%;width:300px}.viewport-container[_ngcontent-%COMP%]{flex:1;padding:0 0 0 16px;box-sizing:border-box}"]}),a}(),vG=function(){var a=function(n){(0,G.Z)(e,n);var t=(0,H.Z)(e);function e(o,s,u,c){var l;return(0,p.Z)(this,e),(l=t.call(this,u)).siteName=o,l.authFacade=s,l.controlContainer=u,l.panelPageListItemsService=c.getEntityCollectionService("PanelPageListItem"),l}return(0,_.Z)(e,[{key:"ngOnInit",value:function(){this.panelPageListItems$=this.panelPageListItemsService.getWithQuery("site=".concat(encodeURIComponent('{"term":{"site.keyword":{"value":"'.concat(this.siteName,'"}}}')))),this.isAuthenticated$=this.authFacade.getUser$.pipe((0,Ce.U)(function(s){return!!s}))}},{key:"login",value:function(){this.authFacade.login()}}]),e}(HO);return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Nn.SITE_NAME),r.\u0275\u0275directiveInject(li),r.\u0275\u0275directiveInject(v.gN),r.\u0275\u0275directiveInject(Dr))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-gridless-layout-editor"]],features:[r.\u0275\u0275InheritDefinitionFeature],decls:42,vars:19,consts:[["autosize","",3,"hasBackdrop"],["fixedInViewport","","mode","over"],["drawer",""],[3,"close"],[4,"ngIf"],["type","button","mat-menu-item","",3,"mousedown","touchstart"],["cdkDropListGroup","",3,"formGroup","nested"],["extraActions",""],["gridItemActions",""],["innerGridItem",""],["topActions","matMenu"],["mat-menu-item","","type","submit",3,"click",4,"ngIf"],["type","button","mat-menu-item","",3,"click",4,"ngIf"],["type","button","mat-menu-item","",3,"mousedown",4,"ngIf"],["mat-menu-item","","type","button",3,"mousedown","touchstart",4,"ngIf"],["mat-menu-item","","type","submit",3,"click"],["type","button","mat-menu-item","",3,"click"],["type","button","mat-menu-item","",3,"mousedown"],["mat-menu-item","","type","button",3,"mousedown","touchstart"],["mat-button","","type","button","class","drawer-trigger",3,"click",4,"ngIf"],["mat-button","","type","button",3,"matMenuTriggerFor",4,"ngIf"],["class","style-title",4,"ngIf"],["class","spacer",4,"ngIf"],[4,"ngTemplateOutlet"],[1,"display-type"],["required","","formControlName","displayType"],["value","page"],["value","form"],["value","json"],[1,"layout-type"],["required","","formControlName","layoutType"],["value","grid"],["value","gridless"],["value","split"],["class","brand",4,"ngIf"],["mat-button","","type","button",1,"drawer-trigger",3,"click"],["mat-button","","type","button",3,"matMenuTriggerFor"],[1,"style-title"],[1,"spacer"],[1,"brand"],["cdkDropList","",1,"panel-dropzone",3,"cdkDropListData","multiple","disableClick","change","cdkDropListDropped"],["panes",""],["cdkDrag","",4,"ngFor","ngForOf"],["cdkDrag",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,e){if(1&t){var o=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"mat-sidenav-container",0)(1,"mat-sidenav",1,2)(3,"druid-layout-sidenav",3),r.\u0275\u0275listener("close",function(){r.\u0275\u0275restoreView(o);var u=r.\u0275\u0275reference(2);return r.\u0275\u0275resetView(u.toggle())}),r.\u0275\u0275elementStart(4,"nav")(5,"ul"),r.\u0275\u0275template(6,WU,3,0,"li",4),r.\u0275\u0275template(7,XU,3,0,"li",4),r.\u0275\u0275template(8,QU,3,0,"li",4),r.\u0275\u0275template(9,JU,3,0,"li",4),r.\u0275\u0275template(10,YU,3,0,"li",4),r.\u0275\u0275template(11,ez,3,0,"li",4),r.\u0275\u0275elementStart(12,"li")(13,"button",5),r.\u0275\u0275listener("mousedown",function(){return e.editor.addContent(0)})("touchstart",function(){return e.editor.addContent(0)}),r.\u0275\u0275text(14,"Add Content"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(15,"li")(16,"button",5),r.\u0275\u0275listener("mousedown",function(){return e.editor.editPanelProps(0)})("touchstart",function(){return e.editor.editPanelProps(0)}),r.\u0275\u0275text(17,"Props"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275template(18,tz,3,0,"li",4),r.\u0275\u0275template(19,nz,3,0,"li",4),r.\u0275\u0275elementEnd()()()(),r.\u0275\u0275elementStart(20,"mat-sidenav-content")(21,"classifieds-ui-gridless-layout",6),r.\u0275\u0275template(22,fz,26,7,"ng-template",null,7,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275template(24,hz,1,1,"ng-template",null,8,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275template(26,vz,4,4,"ng-template",null,9,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementEnd()()(),r.\u0275\u0275elementStart(28,"mat-menu",null,10),r.\u0275\u0275template(30,_z,2,0,"button",11),r.\u0275\u0275template(31,yz,2,0,"button",12),r.\u0275\u0275template(32,xz,2,0,"button",12),r.\u0275\u0275template(33,bz,2,0,"button",12),r.\u0275\u0275template(34,Cz,2,0,"button",13),r.\u0275\u0275template(35,wz,2,0,"button",13),r.\u0275\u0275elementStart(36,"button",5),r.\u0275\u0275listener("mousedown",function(){return e.editor.addContent(0)})("touchstart",function(){return e.editor.addContent(0)}),r.\u0275\u0275text(37,"Add Content"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(38,"button",5),r.\u0275\u0275listener("mousedown",function(){return e.editor.editPanelProps(0)})("touchstart",function(){return e.editor.editPanelProps(0)}),r.\u0275\u0275text(39,"Props"),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(40,Sz,2,0,"button",14),r.\u0275\u0275template(41,Ez,2,0,"button",14),r.\u0275\u0275elementEnd()}2&t&&(r.\u0275\u0275property("hasBackdrop",!1),r.\u0275\u0275advance(6),r.\u0275\u0275property("ngIf",e.savable),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.savable||e.nested),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.nested),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.nested),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.savable),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.savable),r.\u0275\u0275advance(7),r.\u0275\u0275property("ngIf",!e.editor.hasPanelStyle(0)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.editor.hasPanelStyle(0)),r.\u0275\u0275advance(2),r.\u0275\u0275property("formGroup",e.controlContainer.control)("nested",e.nested),r.\u0275\u0275advance(9),r.\u0275\u0275property("ngIf",e.savable),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.savable||e.nested),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.nested),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.nested),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.savable),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.savable),r.\u0275\u0275advance(5),r.\u0275\u0275property("ngIf",!e.editor.hasPanelStyle(0)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.editor.hasPanelStyle(0)))},dependencies:[E.NgForOf,E.NgIf,E.NgTemplateOutlet,v.JJ,v.JL,v.Q7,v.sg,v.u,Fc.CdkDropList,Fc.CdkDropListGroup,Fc.CdkDrag,bi.MatLegacyOption,pi.MatLegacyButton,gy.MatIcon,En.MatLegacyFormField,xo.MatLegacyMenu,xo.MatLegacyMenuItem,xo.MatLegacyMenuTrigger,Fi.MatLegacySelect,ef.MatSidenav,ef.MatSidenavContainer,ef.MatSidenavContent,SE,b3,S3],styles:[".layout-type[_ngcontent-%COMP%]     .mat-form-field-wrapper, .display-type[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding-bottom:0}.layout-type[_ngcontent-%COMP%]     .mat-form-field-label-wrapper, .display-type[_ngcontent-%COMP%]     .mat-form-field-label-wrapper{display:none}.layout-type[_ngcontent-%COMP%]     .mat-form-field-infix, .display-type[_ngcontent-%COMP%]     .mat-form-field-infix{border-top:none;padding:0;margin:0}.layout-type[_ngcontent-%COMP%]     .mat-form-field, .display-type[_ngcontent-%COMP%]     .mat-form-field{width:70px}.layout-type[_ngcontent-%COMP%]     .mat-select-value, .display-type[_ngcontent-%COMP%]     .mat-select-value{text-align:right}.layout-type[_ngcontent-%COMP%]     .mat-form-field-underline, .display-type[_ngcontent-%COMP%]     .mat-form-field-underline{display:none}.mat-menu-trigger[_ngcontent-%COMP%]{min-width:0;padding:0;margin:0}.cdk-drag[_ngcontent-%COMP%]{padding:.25em}.brand[_ngcontent-%COMP%]{font-family:sans-serif;text-align:right;flex:1;letter-spacing:.2em;font-weight:lighter;color:#c82913}.spacer[_ngcontent-%COMP%]{flex:1}.style-title[_ngcontent-%COMP%]{font-family:sans-serif;font-weight:500;text-transform:lowercase;color:#000}.mat-icon[_ngcontent-%COMP%]{color:#000}.drawer-trigger[_ngcontent-%COMP%]{min-width:0;padding:0;margin:0}"]}),a}(),_G=function(){var a=function(n){(0,G.Z)(e,n);var t=(0,H.Z)(e);function e(o){var s;return(0,p.Z)(this,e),(s=t.call(this,o)).controlContainer=o,s}return(0,_.Z)(e,[{key:"ngOnInit",value:function(){}}]),e}(qO);return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(v.gN,8))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-gridless-layout-renderer"]],features:[r.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[[3,"displayMainControls","displayItemHeader"],["innerGridItem",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"classifieds-ui-gridless-layout",0),r.\u0275\u0275template(1,kz,1,4,"ng-template",null,1,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementEnd()),2&t&&r.\u0275\u0275property("displayMainControls",e.displayMainControls)("displayItemHeader",e.displayItemHeader)},dependencies:[E.NgTemplateOutlet,b3],styles:["[_nghost-%COMP%]{height:100%}"]}),a}(),yG=function(){var a=function(n){(0,G.Z)(e,n);var t=(0,H.Z)(e);function e(o){var s;return(0,p.Z)(this,e),(s=t.call(this,o)).controlContainer=o,s}return(0,_.Z)(e,[{key:"gridItems",get:function(){return this.dashboard.map(function(s,u){return(0,b.Z)((0,b.Z)({},s),{},{cols:Math.floor(s.cols),weight:u})})}},{key:"ngOnInit",value:function(){}}]),e}(HO);return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(v.gN))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-split-layout-editor"]],features:[r.\u0275\u0275InheritDefinitionFeature],decls:42,vars:17,consts:[["autosize","",3,"hasBackdrop"],["fixedInViewport","","mode","over"],["drawer",""],[3,"close"],[4,"ngIf"],["type","button","mat-menu-item","",3,"mousedown"],["type","button","mat-menu-item","",3,"click"],["cdkDropListGroup","",3,"nested","formGroup","dashboard","layoutSetting","rowSettings","columnSettings","itemAdded","itemRemoved","layoutSettingChange","rowSettingsChange","columnSettingsChange"],["splitLayout",""],["extraActions",""],["gridItemActions",""],["innerGridItem",""],["topActions","matMenu"],["mat-menu-item","","type","submit",3,"click",4,"ngIf"],["mat-menu-item","","type","button",3,"click",4,"ngIf"],["type","button","mat-menu-item","",3,"mousedown",4,"ngIf"],["mat-menu-item","","type","submit",3,"click"],["mat-menu-item","","type","button",3,"click"],["mat-button","","type","button","class","drawer-trigger",3,"click",4,"ngIf"],["mat-button","","type","button",3,"matMenuTriggerFor",4,"ngIf"],["class","spacer",4,"ngIf"],[1,"display-type"],["required","","formControlName","displayType"],["value","page"],["value","form"],["value","json"],[1,"layout-type"],["required","","formControlName","layoutType"],["value","gridless"],["value","split"],[4,"ngTemplateOutlet"],["class","brand",4,"ngIf"],["mat-button","","type","button",1,"drawer-trigger",3,"click"],["mat-button","","type","button",3,"matMenuTriggerFor"],[1,"spacer"],[1,"brand"],["mat-button","","type","button",1,"panel-actions-btn",3,"matMenuTriggerFor"],["panelActions","matMenu"],["type","button","mat-menu-item","",3,"mousedown","touchstart"],["mat-menu-item","","type","button",3,"mousedown","touchstart",4,"ngIf"],["type","button","mat-menu-item","",1,"delete",3,"mousedown","touchstart"],["class","style-title",4,"ngIf"],["mat-menu-item","","type","button",3,"mousedown","touchstart"],[1,"style-title"],["cdkDropList","",1,"panel-dropzone",3,"cdkDropListData","multiple","disableClick","change","cdkDropListDropped"],["panes",""],["cdkDrag","",4,"ngFor","ngForOf"],["cdkDrag",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,e){if(1&t){var o=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"mat-sidenav-container",0)(1,"mat-sidenav",1,2)(3,"druid-layout-sidenav",3),r.\u0275\u0275listener("close",function(){r.\u0275\u0275restoreView(o);var u=r.\u0275\u0275reference(2);return r.\u0275\u0275resetView(u.toggle())}),r.\u0275\u0275elementStart(4,"nav")(5,"ul"),r.\u0275\u0275template(6,Az,3,0,"li",4),r.\u0275\u0275elementStart(7,"li")(8,"button",5),r.\u0275\u0275listener("mousedown",function(){r.\u0275\u0275restoreView(o);var u=r.\u0275\u0275reference(22);return r.\u0275\u0275resetView(u.addRow())}),r.\u0275\u0275text(9,"Add Row"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(10,"li")(11,"button",6),r.\u0275\u0275listener("click",function(){return e.editor.onPropertiesClick()}),r.\u0275\u0275text(12,"Props"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(13,"li")(14,"button",5),r.\u0275\u0275listener("mousedown",function(){r.\u0275\u0275restoreView(o);var u=r.\u0275\u0275reference(22);return r.\u0275\u0275resetView(u.layoutSettings("global"))}),r.\u0275\u0275text(15,"Layout Settings"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275template(16,Rz,3,0,"li",4),r.\u0275\u0275template(17,Dz,3,0,"li",4),r.\u0275\u0275template(18,Tz,3,0,"li",4),r.\u0275\u0275template(19,Iz,3,0,"li",4),r.\u0275\u0275elementEnd()()()(),r.\u0275\u0275elementStart(20,"mat-sidenav-content")(21,"classifieds-ui-split-layout",7,8),r.\u0275\u0275listener("itemAdded",function(){return e.editor.onItemAdded()})("itemRemoved",function(u){return e.editor.onItemRemoved(u)})("layoutSettingChange",function(u){return e.editor.onLayoutSettingChange(u)})("rowSettingsChange",function(u){return e.editor.onRowSettingsChange(u)})("columnSettingsChange",function(u){return e.editor.onColumnSettingsChange(u)}),r.\u0275\u0275template(23,jz,23,6,"ng-template",null,9,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275template(25,Gz,16,4,"ng-template",null,10,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275template(27,qz,4,4,"ng-template",null,11,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementEnd()()(),r.\u0275\u0275elementStart(29,"mat-menu",null,12),r.\u0275\u0275template(31,Kz,2,0,"button",13),r.\u0275\u0275elementStart(32,"button",5),r.\u0275\u0275listener("mousedown",function(){r.\u0275\u0275restoreView(o);var u=r.\u0275\u0275reference(22);return r.\u0275\u0275resetView(u.addRow())}),r.\u0275\u0275text(33,"Add Row"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(34,"button",6),r.\u0275\u0275listener("click",function(){return e.editor.onPropertiesClick()}),r.\u0275\u0275text(35,"Props"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(36,"button",5),r.\u0275\u0275listener("mousedown",function(){r.\u0275\u0275restoreView(o);var u=r.\u0275\u0275reference(22);return r.\u0275\u0275resetView(u.layoutSettings("global"))}),r.\u0275\u0275text(37,"Layout Settings"),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(38,Wz,2,0,"button",14),r.\u0275\u0275template(39,Xz,2,0,"button",15),r.\u0275\u0275template(40,Qz,2,0,"button",15),r.\u0275\u0275template(41,Jz,2,0,"button",14),r.\u0275\u0275elementEnd()}2&t&&(r.\u0275\u0275property("hasBackdrop",!1),r.\u0275\u0275advance(6),r.\u0275\u0275property("ngIf",e.savable),r.\u0275\u0275advance(10),r.\u0275\u0275property("ngIf",e.nested),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.savable),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.savable),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.nested),r.\u0275\u0275advance(2),r.\u0275\u0275property("nested",e.nested)("formGroup",e.controlContainer.control)("dashboard",e.dashboard)("layoutSetting",e.layoutSetting)("rowSettings",e.rowSettings)("columnSettings",e.columnSettings),r.\u0275\u0275advance(10),r.\u0275\u0275property("ngIf",e.savable),r.\u0275\u0275advance(7),r.\u0275\u0275property("ngIf",e.nested),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.savable),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.savable),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.nested))},dependencies:[E.NgForOf,E.NgIf,E.NgTemplateOutlet,v.JJ,v.JL,v.Q7,v.sg,v.u,Fc.CdkDropList,Fc.CdkDropListGroup,Fc.CdkDrag,bi.MatLegacyOption,pi.MatLegacyButton,gy.MatIcon,En.MatLegacyFormField,xo.MatLegacyMenu,xo.MatLegacyMenuItem,xo.MatLegacyMenuTrigger,Fi.MatLegacySelect,ef.MatSidenav,ef.MatSidenavContainer,ef.MatSidenavContent,SE,C3,S3],styles:[".layout-type[_ngcontent-%COMP%]     .mat-form-field-wrapper, .display-type[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding-bottom:0}.layout-type[_ngcontent-%COMP%]     .mat-form-field-label-wrapper, .display-type[_ngcontent-%COMP%]     .mat-form-field-label-wrapper{display:none}.layout-type[_ngcontent-%COMP%]     .mat-form-field-infix, .display-type[_ngcontent-%COMP%]     .mat-form-field-infix{border-top:none;padding:0;margin:0}.layout-type[_ngcontent-%COMP%]     .mat-form-field, .display-type[_ngcontent-%COMP%]     .mat-form-field{width:70px}.layout-type[_ngcontent-%COMP%]     .mat-select-value, .display-type[_ngcontent-%COMP%]     .mat-select-value{text-align:right}.layout-type[_ngcontent-%COMP%]     .mat-form-field-underline, .display-type[_ngcontent-%COMP%]     .mat-form-field-underline{display:none}.mat-menu-trigger[_ngcontent-%COMP%]{min-width:0;padding:0;margin:0}.cdk-drag[_ngcontent-%COMP%]{padding:.25em}.panel-actions-btn[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{transform:rotate(-90deg)}.brand[_ngcontent-%COMP%]{font-family:sans-serif;text-align:right;flex:1;letter-spacing:.2em;font-weight:lighter;color:#c82913}.spacer[_ngcontent-%COMP%]{flex:1}.style-title[_ngcontent-%COMP%]{font-family:sans-serif;font-weight:500;text-transform:lowercase;color:#000}.drawer-trigger[_ngcontent-%COMP%]{min-width:0;padding:0;margin:0}"]}),a}(),xG=function(){var a=function(n){(0,G.Z)(e,n);var t=(0,H.Z)(e);function e(o){var s;return(0,p.Z)(this,e),(s=t.call(this,o)).controlContainer=o,s}return(0,_.Z)(e,[{key:"ngOnInit",value:function(){}}]),e}(qO);return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(v.gN,8))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-flex-layout-renderer"]],features:[r.\u0275\u0275InheritDefinitionFeature],decls:3,vars:4,consts:[[3,"dashboard","layoutSetting","rowSettings","columnSettings"],["innerGridItem",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"classifieds-ui-flex-layout",0),r.\u0275\u0275template(1,eG,1,4,"ng-template",null,1,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementEnd()),2&t&&r.\u0275\u0275property("dashboard",null==e.panelPage?null:e.panelPage.gridItems)("layoutSetting",e.panelPage.layoutSetting)("rowSettings",e.panelPage.rowSettings)("columnSettings",e.columnSettings)},dependencies:[E.NgTemplateOutlet,hG],encapsulation:2}),a}(),bG=function(){var n=new Map([["row",[new Bt.Attribute({name:"flexGrow",type:Bt.AttributeTypes.Text,label:"Flex Grow",required:!1,widget:"text",options:{},attributes:[]}),new Bt.Attribute({name:"flexShrink",type:Bt.AttributeTypes.Text,label:"Flex Shrink",required:!1,widget:"text",options:{},attributes:[]}),new Bt.Attribute({name:"flexBasis",type:Bt.AttributeTypes.Text,label:"Flex Basis",required:!1,widget:"text",options:{},attributes:[]}),new Bt.Attribute({name:"height",type:Bt.AttributeTypes.Text,label:"Height",required:!1,widget:"text",options:{},attributes:[]}),new Bt.Attribute({name:"direction",type:Bt.AttributeTypes.Text,label:"Direction",required:!1,widget:"text",options:{},attributes:[]})]],["column",[new Bt.Attribute({name:"height",type:Bt.AttributeTypes.Text,label:"Height",required:!1,widget:"text",options:{},attributes:[]})]],["global",[new Bt.Attribute({name:"direction",type:Bt.AttributeTypes.Text,label:"Direction",required:!1,widget:"text",options:{},attributes:[]})]]]);return new w3({id:"split",title:"Split",editor:yG,renderer:xG,settings:n})},E3=function(){var a=(0,_.Z)(function n(t){(0,p.Z)(this,n),[bG(),new w3({id:"gridless",title:"Gridless",editor:vG,renderer:_G,settings:new Map})].forEach(function(e){t.register(e)})});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(kE))},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({imports:[E.CommonModule,v.u5,nr.RouterModule,v.UX,Oi.MaterialModule,si,sE,g3,EE,Nn.UtilsModule,H_,Bt.AttributesModule]}),a}();function wG(a,n){if(1&a&&r.\u0275\u0275element(0,"ngx-json-viewer",12),2&a){var t=r.\u0275\u0275nextContext();r.\u0275\u0275property("json",t.jsonData)("expanded",!1)}}var AE=(0,_.Z)(function a(n){(0,p.Z)(this,a),this.params=[],n&&(this.url=n.url,this.method=n.method?n.method:void 0,void 0!==n.renderer&&(this.renderer=new lk(n.renderer)),void 0!==n.params&&(this.params=n.params.map(function(t){return new Mi(t)})),n.body&&(this.body=new Ec(n.body)))}),vy=function(){var a=function(){function n(t,e,o){var s=this;(0,p.Z)(this,n),this.fb=t,this.datasourceApi=e,this.tokenizerService=o,this.dataChange=new r.EventEmitter,this.contexts=[],this.sourceForm=this.fb.group({url:this.fb.control("",v.kI.required),params:this.fb.control([]),body:this.fb.control(""),method:this.fb.control("get",[v.kI.required])}),this.restSource$=new z.X(new AE),this.componentDestroyed=new se.x,this.refreshData$=new se.x,this.refreshSubscription=this.refreshData$.pipe((0,Ce.U)(function(){return s.generateUrl()}),(0,ee.b)(function(u){return console.log(u)}),(0,Q.h)(function(u){return u&&""!==u.trim()}),(0,st.w)(function(u){return s.datasourceApi.getData(u).pipe((0,ti.K)(function(c){return console.log(c),(0,je.of)([])}))}),(0,Qr.R)(this.componentDestroyed)).subscribe(function(u){s.jsonData=u,s.dataChange.emit(u)}),this.urlChangeSub=this.sourceForm.get("url").valueChanges.pipe((0,kr.b)(500),(0,Q.h)(function(u){return u&&""!==u.trim()}),(0,Ce.U)(function(u){return[u,u.indexOf("?")]}),(0,Ce.U)(function(u){var c=(0,g.Z)(u,2),l=c[0],m=c[1];return[m>-1?l.substring(0,m):l,m>-1?l.substring(m+1):""]})).subscribe(function(u){var c=(0,g.Z)(u,2),m=c[1],C=c[0].split("/").reduce(function(B,F,U){return 0===F.indexOf(":")?(0,b.Z)((0,b.Z)({},B),{},(0,d.Z)({},F.substr(1),F)):B},{}),T=(0,b.Z)((0,b.Z)({},C),Mo.parse(m));s.paramsParsed=T}),this.restSourceSub=this.restSource$.pipe((0,ee.b)(function(u){u?(s.sourceForm.get("url").setValue(u.url),s.sourceForm.get("method").setValue(u.method?u.method:""),s.sourceForm.get("body").setValue(u.body?(0,b.Z)((0,b.Z)({},u.body),{},{jsScript:""}):"")):(s.sourceForm.get("url").setValue(""),s.sourceForm.get("method").setValue(""),s.sourceForm.get("body").setValue(""))})).subscribe(),this.onTouched=function(){}}return(0,_.Z)(n,[{key:"restSource",set:function(e){this.restSource$.next(e)}},{key:"ngOnInit",value:function(){var e=this;this.sourceForm.valueChanges.pipe((0,kr.b)(1e3)).subscribe(function(){console.log("refresh data"),e.refreshData$.next(void 0)})}},{key:"ngOnDestroy",value:function(){this.componentDestroyed.next(void 0),this.componentDestroyed.complete()}},{key:"writeValue",value:function(e){e&&this.sourceForm.setValue(e,{emitEvent:!1})}},{key:"registerOnChange",value:function(e){this.sourceForm.valueChanges.subscribe(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){e?this.sourceForm.disable():this.sourceForm.enable()}},{key:"validate",value:function(e){return this.sourceForm.valid?null:{invalidForm:{valid:!1,message:"source is invalid"}}}},{key:"generateUrl",value:function(){console.log("generate url");for(var e=this.sourceForm.get("url").value,o=e?e.split("?",2):["",""],s=(0,g.Z)(o,2),u=s[0],c=s[1],l=Mo.parse(c),m={},C=u.split("/"),T=C.length,B=[],F=0,U=0;U<T;U++)if(0===C[U].indexOf(":")){if(!this.sourceForm.get("params").value[F])return"";var ae=this.sourceForm.get("params").value[F].mapping;B.push("static"===ae.value.type?ae.value.value:ae.value.testValue),F++}else B.push(C[U]);for(var ue in l)if("string"==typeof l[ue]&&l[ue].indexOf(":")>-1){if(!this.sourceForm.get("params").value[F])return"";var me=this.sourceForm.get("params").value[F].mapping;m[ue]="static"===me.type?me.value:me.testValue,F++}var Se=B.join("/")+(""!==c?"?"+Mo.stringify((0,b.Z)((0,b.Z)({},l),m)):"");return console.log(Se),Se}},{key:"onDataChange",value:function(e){this.tokens=this.tokenizerService.generateGenericTokens(e[0])}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(v.QS),r.\u0275\u0275directiveInject(rO),r.\u0275\u0275directiveInject(Pr))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-rest-source-form"]],inputs:{restSource:"restSource",contexts:"contexts"},outputs:{dataChange:"dataChange"},features:[r.\u0275\u0275ProvidersFeature([{provide:v.JU,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0},{provide:v.Cf,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0}])],decls:19,vars:7,consts:[["direction","horizontal",3,"formGroup"],["as-split-area","","size","50"],["required","","formControlName","method"],["value","get"],["value","post"],["value","put"],["value","delete"],["matInput","","placeholder","Url","formControlName","url","required",""],["formControlName","body","rows","10","cols","40",3,"rootForm","tokens"],["formControlName","params",3,"params","paramValues","contexts"],["size","50"],[3,"json","expanded",4,"ngIf"],[3,"json","expanded"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"as-split",0)(1,"div",1)(2,"div")(3,"mat-form-field")(4,"mat-select",2)(5,"mat-option",3),r.\u0275\u0275text(6,"GET"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(7,"mat-option",4),r.\u0275\u0275text(8,"POST"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(9,"mat-option",5),r.\u0275\u0275text(10,"PUT"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(11,"mat-option",6),r.\u0275\u0275text(12,"DELETE"),r.\u0275\u0275elementEnd()()(),r.\u0275\u0275elementStart(13,"mat-form-field"),r.\u0275\u0275element(14,"input",7),r.\u0275\u0275elementEnd()(),r.\u0275\u0275element(15,"classifieds-ui-snippet-form",8)(16,"classifieds-ui-params-form",9),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(17,"as-split-area",10),r.\u0275\u0275template(18,wG,1,2,"ngx-json-viewer",11),r.\u0275\u0275elementEnd()()),2&t&&(r.\u0275\u0275property("formGroup",e.sourceForm),r.\u0275\u0275advance(15),r.\u0275\u0275property("rootForm",!1)("tokens",e.tokens),r.\u0275\u0275advance(1),r.\u0275\u0275property("params",e.paramsParsed)("paramValues",e.restSource$.value.params)("contexts",e.contexts),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",e.jsonData))},dependencies:[E.NgIf,v.Fj,v.JJ,v.JL,v.Q7,v.sg,v.u,bi.MatLegacyOption,En.MatLegacyFormField,Hr.MatLegacyInput,Fi.MatLegacySelect,W_,X_,r0,hE,ey]}),a}(),SG=function(){var a=function(){function n(t,e){(0,p.Z)(this,n),this.attributeSerializer=t,this.controlContainer=e,this.contexts=[]}return(0,_.Z)(n,[{key:"settings",set:function(e){this.restSource=e?new AE(this.attributeSerializer.deserializeAsObject(e)):void 0}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Bt.AttributeSerializerService),r.\u0275\u0275directiveInject(v.gN))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-rest-datasource"]],inputs:{settings:"settings",contexts:"contexts"},decls:2,vars:3,consts:[[3,"formGroup"],["formControlName","settings",3,"restSource","contexts"]],template:function(t,e){1&t&&(r.\u0275\u0275elementContainerStart(0,0),r.\u0275\u0275element(1,"classifieds-ui-rest-source-form",1),r.\u0275\u0275elementContainerEnd()),2&t&&(r.\u0275\u0275property("formGroup",e.controlContainer.control),r.\u0275\u0275advance(1),r.\u0275\u0275property("restSource",e.restSource)("contexts",e.contexts))},dependencies:[v.JJ,v.JL,v.sg,v.u,vy],encapsulation:2}),a}(),_y=function(n){var m,t=n.method,e=n.url,o=n.data,s=n.options,u=n.params,c=n.http;if(o instanceof Error)return(0,je.of)([]);switch(t){case"DELETE":m=c.delete(e,s),u.has("saveDelay")&&(m=m.pipe((0,Rr.g)(+u.get("saveDelay"))));break;case"GET":var C=u.has("suffix")?e+u.get("suffix"):e;m=c.get(C,s),u.has("getDelay")&&(m=m.pipe((0,Rr.g)(+u.get("getDelay"))));break;case"POST":m=c.post(e,o,s),u.has("saveDelay")&&(m=m.pipe((0,Rr.g)(+u.get("saveDelay"))));break;case"PUT":m=c.put(e,o,s),u.has("saveDelay")&&(m=m.pipe((0,Rr.g)(+u.get("saveDelay"))));break;default:var T=new Error("Unimplemented HTTP method, "+t);m=(0,zo._)(T)}return u.has("timeout")&&(m=m.pipe((0,Wi.V)(+u.get("timeout")+ +u.get("saveDelay")))),m.pipe((0,ti.K)(function(){return(0,je.of)([])}))},P3=function(){var a=function(){function n(t,e,o,s){(0,p.Z)(this,n),this.attrbuteSerializer=t,this.http=e,this.snippetParserService=o,this.urlGenerator=s}return(0,_.Z)(n,[{key:"fetchDataset",value:function(e){var o=this,s=e.settings,u=e.metadata;return(0,je.of)(new pr).pipe((0,ee.b)(function(){return console.log("START rest fetch")}),(0,Ce.U)(function(){return o.attrbuteSerializer.deserializeAsObject(s)}),(0,Ce.U)(function(c){return new AE(c)}),(0,st.w)(function(c){return o.urlGenerator.getUrl(c.url,c.params,u).pipe((0,Ce.U)(function(l){return new AE((0,b.Z)((0,b.Z)({},c),{},{url:l}))}))}),(0,Q.h)(function(c){return c.url&&""!==c.url.trim()&&c.url.indexOf("http")>-1}),(0,st.w)(function(c){return _y({url:c.url,method:"POST"===c.method.toUpperCase()?"POST":"GET",http:o.http,params:new Map}).pipe((0,ti.K)(function(){return(0,je.of)([])}),(0,Ce.U)(function(l){return Array.isArray(l)?l:[l]}),(0,Ce.U)(function(l){return new pr({results:l})}))}),(0,ee.b)(function(){return console.log("END rest fetch")}))}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Bt.AttributeSerializerService),r.\u0275\u0275inject(O.HttpClient),r.\u0275\u0275inject(zI),r.\u0275\u0275inject(ny))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),k3=function(){var a=function(n){(0,G.Z)(e,n);var t=(0,H.Z)(e);function e(o){var s;return(0,p.Z)(this,e),(s=t.call(this,o)).pluralizer2=o,s}return(0,_.Z)(e,[{key:"getResourceUrls",value:function(s,u){var l=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?u:ol(u);return{entityResourceUrl:"".concat(l,"/").concat(s,"/").toLowerCase(),collectionResourceUrl:"".concat(l,"/").concat(this.pluralizer2.pluralize(s),"/").toLowerCase()}}}]),e}(k0);return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(uu))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),kG=function(){var a=(0,_.Z)(function n(t,e,o,s,u,c,l,m,C){(0,p.Z)(this,n),t.register(function(n,t,e){return new rs({id:"rest",title:"Rest",editor:SG,fetch:function(s){return n.fetchDataset({settings:s.settings,metadata:s.metadata})},editorOptions:function(){return(0,je.of)(new mE({fullscreen:!0}))},getBindings:function(s){var u=s.settings;return(0,je.of)([]).pipe((0,Ce.U)(function(){return e.deserializeAsObject(u)}),(0,Ce.U)(function(l){return new Os(l)}),(0,st.w)(function(l){return t.extractContexts(l.params)}),(0,Ce.U)(function(l){return l.map(function(m){return new fn.ContentBinding({id:m,type:"context"})})}))}})}(e,o,s)),u.register(function(n,t,e,o){return new Kd({id:"rest",title:"Rest",create:function(u){var c=u.object,l=u.params;return(0,je.of)({success:!1}).pipe((0,st.w)(function(){return n.paramValues(new Map(Object.keys(l).map(function(m){return[m,l[m]]})))}),(0,st.w)(function(m){return _y({method:"POST",url:e.entityResource(m.get("entityName"),m.has("root")?m.get("root"):o.root?o.root:"api",!0),data:c||new Error("No entity to add"),params:m,http:t})}),(0,Ce.U)(function(){return{success:!0,entity:c}}))},read:function(u){return Jo(u),(0,je.of)({success:!1})},update:function(u){var c=u.object,l=u.identity,m=u.params,C=u.parentObject;return(0,je.of)({success:!1}).pipe((0,st.w)(function(){return l({object:c,parentObject:C})}),(0,st.w)(function(T){var B=T.identity;return n.paramValues(new Map(Object.keys(m).map(function(F){return[F,m[F]]}))).pipe((0,Ce.U)(function(F){return{identity:B,options:F}}))}),(0,st.w)(function(T){var B=T.identity,F=T.options;return _y({method:"PUT",url:e.entityResource(F.get("entityName"),F.has("root")?F.get("root"):o.root?o.root:"api",!0)+"".concat(B),data:c||new Error("No entity to add"),params:F,http:t})}),(0,Ce.U)(function(){return{success:!0,entity:c}}))},delete:function(u){return Jo(u),(0,je.of)({success:!1})},query:function(u){var c=u.params,l=u.rule;return(0,je.of)({success:!1}).pipe((0,st.w)(function(){return n.paramValues(new Map(Object.keys(c).map(function(m){return[m,c[m]]})))}),(0,st.w)(function(m){return new W.y(function(C){var T=l?l.conditions.all.reduce(function(F,U){return[].concat((0,y.Z)(F),(0,y.Z)(U.any.filter(function(ae){return"identity"!==ae.fact}).map(function(ae){return"".concat(ae.path.substr(2),"=").concat(ae.value)})))},[]):[],B=l?l.conditions.all.reduce(function(F,U){return F||U.any.find(function(ae){return"identity"===ae.fact})},void 0):void 0;C.next({identityFact:B,options:m,query:T.length>0?new O.HttpParams({fromString:T.join("&")}):void 0,path:B?B.value:""}),C.complete()})}),(0,st.w)(function(m){var C=m.options,T=m.query,B=m.path,F=m.identityFact;return Or(function(){return!!F},_y({method:"GET",url:e.entityResource(C.get("entityName"),C.has("root")?C.get("root"):o.root?o.root:"api",!0)+B,options:{params:T},params:C,http:t}).pipe((0,Ce.U)(function(U){return{success:!0,entities:Array.isArray(U)?U:[U]}})),_y({method:"GET",url:e.collectionResource(C.get("entityName"),C.has("root")?C.get("root"):o.root?o.root:"api")+B,options:{params:T},params:C,http:t}).pipe((0,Ce.U)(function(U){return{success:!0,entities:U}})))}))}})}(c,l,m,C))});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(da),r.\u0275\u0275inject(P3),r.\u0275\u0275inject(_k),r.\u0275\u0275inject(Bt.AttributeSerializerService),r.\u0275\u0275inject(Pu),r.\u0275\u0275inject(Ts),r.\u0275\u0275inject(O.HttpClient),r.\u0275\u0275inject(k3),r.\u0275\u0275inject($a))},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({providers:[P3,k3],imports:[E.CommonModule,v.u5,v.UX,Oi.MaterialModule,sE,gs,ok,kc,H_,oy,wu]}),a}(),yy=S(87260),Gk=S(38369),AG=S(39663),RG=S(10420),A3=S(1817),R3=S(96607),TG=function(){var a=(0,_.Z)(function n(){(0,p.Z)(this,n)});return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({}),a}(),nf=function(n){var t=n.selector,o=n.document.createDocumentFragment();if(!t||-1!==t.indexOf("undefined"))return!1;try{o.querySelector(t)}catch{return!1}return!0},IG=/\/\*[\s\S]*?\*\//g,OG=/([^\:]+):([^\;]*);/,FG=/(\/\*[\s\S]*?\*\/)|([^\s\;\{\}][^\;\{\}]*(?=\{))|(\})|([^\;\{\}]+\;(?!\s*\*\/))/gim,RE=function(n){return typeof n>"u"||0==n.length||null==n},MG={ordered:!1,comments:!1,stripComments:!1,split:!1},BG=function(){var a=function(){function n(t){var e=this;(0,p.Z)(this,n),this.document=t,this.mutate$=new se.x,this.mutated$=new se.x,this.mutateSub=this.mutate$.pipe((0,Q.h)(function(o){var s=o.record;return"attributes"===s.type&&"style"===s.attributeName&&!!s.target}),(0,kr.b)(2e3),(0,st.w)(function(o){return e.mapRecord({record:o.record,overlay:o.overlay})}),(0,ee.b)(function(o){return e.mutated$.next({stylesheet:o.stylesheet})})).subscribe()}return(0,_.Z)(n,[{key:"stylize",value:function(e){var o=this,s=e.targetNode,u=new Map;new MutationObserver(function(m){m.forEach(function(C){o.mutate$.next({record:C,overlay:u})})}).observe(s,{childList:!0,attributes:!0,subtree:!0,attributeFilter:["style"],attributeOldValue:!0})}},{key:"mapRecord",value:function(e){var o=this,s=e.record,u=e.overlay;return new W.y(function(c){var l=R3.default(s.target),m=o.toJSON("".concat(l," { ").concat(s.oldValue," }")),C=m.children[l]?Object.keys(m.children[l].attributes).reduce(function(ae,ue){return(0,b.Z)((0,b.Z)({},ae),{},(0,d.Z)({},Tc(ue.replace("-","_"),!1),m.children[l].attributes[ue]))},{}):void 0,T=Object.keys(s.target.style).reduce(function(ae,ue){return!Number.isNaN(parseInt(ue))&&s.target.style.hasOwnProperty(Tc(s.target.style[ue].replace("-","_"),!1))?(0,b.Z)((0,b.Z)({},ae),{},(0,d.Z)({},Tc(s.target.style[ue].replace("-","_"),!1),s.target.style[Tc(s.target.style[ue].replace("-","_"),!1)])):ae},{}),B=ay(C,T);u.set(l,B);var F=[];u.forEach(function(ae,ue){var Se=ue.split(" ").reduce(function(at,dt,Ot){return-1!==dt.indexOf(".pane-")||-1!==dt.indexOf(".panel-")?{selector:[].concat((0,y.Z)(at.selector),[dt.replace(/^(.*?)(\.pane-|\.panel-page|\.panel-)([0-9]*)(.*?)$/,"$2$3")]),chars:at.chars+dt.length,lastIndex:at.chars+Ot+dt.length}:(0,b.Z)((0,b.Z)({},at),{},{chars:at.chars+dt.length})},{selector:[],chars:0,lastIndex:0});if(0!==Se.selector.length){var we=(Se.selector.join(" ")+" "+ue.slice(Se.lastIndex).split(">").join("")).replace(/(\.ng\-[a-zA-Z0-9_-]*)/gm,"").trim();0===we.indexOf(".panel-page")&&(we=we.substr(12).trim()),nf({selector:we,document:o.document})&&F.push(we+" { "+Object.keys(ae).reduce(function(at,dt){return dt.match(/^[a-zA-Z-]*$/gm)?"".concat(at).concat(function J$(a){return a.replace(/_/g,"-")}(function sy(a){var n=""+a;return n=n.replace(new RegExp("(?:([A-Za-z\\d])|^)("+os().acronymRegex.source+")(?=\\b|[^a-z])","g"),function(t,e,o){return(e||"")+(e?"_":"")+o.toLowerCase()}),(n=(n=(n=n.replace(/([A-Z\d]+)([A-Z][a-z])/g,"$1_$2")).replace(/([a-z\d])([A-Z])/g,"$1_$2")).replace(/-/g,"_")).toLowerCase()}(dt)),": ").concat(ae[dt],";"):at},"")+" }")}});var U=F.join("\n");c.next({stylesheet:U}),c.complete()})}},{key:"toJSON",value:function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:MG,m={children:{},attributes:{}},C=null,T=0;for(o.stripComments&&(o.comments=!1,e=e.replace(IG,""));null!=(C=FG.exec(e));)if(!RE(C[1])&&o.comments)m[T++]=C[1].trim();else if(RE(C[2])){if(!RE(C[3]))return m;if(!RE(C[4])){var Se=C[4].trim(),we=OG.exec(Se);if(we){var qe=we[1].trim(),at=we[2].trim();if(o.ordered)m[T++]={name:qe,value:at,type:"attr"};else if(qe in m.attributes){var dt=m.attributes[qe];dt instanceof Array||(m.attributes[qe]=[dt]),m.attributes[qe].push(at)}else m.attributes[qe]=at}else m[T++]=Se}}else{var B=C[2].trim(),F=this.toJSON(e,o);if(o.ordered)m[T++]={name:B,value:F,type:"rule"};else{var U=o.split?B.split(","):[B];for(var ae in U){var ue=U[ae].trim();if(ue in m.children)for(var me in F.attributes)m.children[ue].attributes[me]=F.attributes[me];else m.children[ue]=F}}}return m}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(E.DOCUMENT))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),bo=function(){return(bo=bo||{})[bo.KEEP=0]="KEEP",bo[bo.ADD=1]="ADD",bo[bo.REMOVE=2]="REMOVE",bo}(),NG=function(){var a=function(){function n(t){var e=this;(0,p.Z)(this,n),this.document=t,this.mutate=new se.x,this.mutated$=new se.x,this.mutateub=this.mutate.pipe((0,Q.h)(function(o){var s=o.record;return"attributes"===s.type&&"class"===s.attributeName&&!!s.target}),(0,kr.b)(2e3),(0,st.w)(function(o){var u=o.overlay;return e.mapRecord({record:o.record,overlay:u,originals:o.originals}).pipe((0,ti.K)(function(l){return(0,je.of)({classes:u})}))}),(0,ee.b)(function(o){return e.mutated$.next({classes:o.classes})})).subscribe()}return(0,_.Z)(n,[{key:"classify",value:function(e){var o=this,s=e.targetNode,u=new Map,c=new Map;new MutationObserver(function(C){C.forEach(function(T){o.mutate.next({record:T,overlay:u,originals:c})})}).observe(s,{childList:!0,attributes:!0,subtree:!0,attributeFilter:["class"],attributeOldValue:!0})}},{key:"mapRecord",value:function(e){var o=this,s=e.record,u=e.overlay,c=e.originals;return new W.y(function(l){var m=R3.default(s.target),C="",T=s.oldValue.split(" ").map(function(we){return we.trim()}),F=m.split(" ").reduce(function(we,qe,at){return-1!==qe.indexOf(".pane-")||-1!==qe.indexOf(".panel-")?{selector:[].concat((0,y.Z)(we.selector),[qe.replace(/^(.*?)(\.pane-|\.panel-page|\.panel-)([0-9]*)(.*?)$/,"$2$3")]),chars:we.chars+qe.length,lastIndex:we.chars+at+qe.length}:(0,b.Z)((0,b.Z)({},we),{},{chars:we.chars+qe.length})},{selector:[],chars:0,lastIndex:0});if(0!==F.selector.length){var U=m.substring(F.lastIndex).split(">").map(function(we){return we.trim()}).filter(function(we){return""!==we}).map(function(we,qe){var at=we.indexOf("."),dt=-1===at?U:we.substring(0,at),ft=(-1===at?[]:we.substring(at+1).split(".")).filter(function(jt){return void 0!==T.find(function(Ut){return jt===Ut})});return(0===qe?" > ":"")+dt+(0===ft.length?"":"."+ft.join("."))});0===(C=(F.selector.join(" ")+U.join(" > ")).replace(/(\.ng\-[a-zA-Z0-9_-]*)/gm,"")).indexOf(".panel-page")&&(C=C.substr(12).trim())}if(nf({selector:C,document:o.document})){c.has(C)||c.set(C,new Set(T));var ue=s.target.classList,me=new Map(Array.from(ue.values()).map(function(we){return["".concat(we),!c.has(C)||!c.get(C).has("".concat(we))&&0!=="".concat(we).indexOf("ng-")&&0!=="".concat(we).indexOf("mat-")?bo.ADD:bo.KEEP]})),Se=Array.from(c.get(C)).reduce(function(we,qe){return[-1===Array.from(ue.values()).findIndex(function(at){return at===qe})?qe:void 0]},[]).filter(function(we){return void 0!==we});0!==Se.length&&Se.forEach(function(we){return me.set(we,bo.REMOVE)}),0===me.size&&u.has(C)?u.delete(C):0!==me.size&&u.set(C,me),l.next({classes:u}),l.complete()}else l.error(new Error('Selector invalid "'+C+'"')),l.complete()})}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(E.DOCUMENT))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}();function ZG(a,n){}function LG(a,n){if(1&a&&r.\u0275\u0275element(0,"classifieds-ui-panel-page",4),2&a){var t=r.\u0275\u0275nextContext();r.\u0275\u0275property("panelPage",t.panelPage)("nested",!0)("contexts",t.contexts)("css",t.filteredCss)("listeners",t.filteredListeners)("ancestory",t.ancestoryWithSelf)}}function jG(a,n){if(1&a&&r.\u0275\u0275element(0,"classifieds-ui-panel-page",5),2&a){var t=r.\u0275\u0275nextContext();r.\u0275\u0275property("id",t.linkedPageId)("nested",!0)("contexts",t.contexts)("ancestory",t.ancestoryWithSelf)}}function $G(a,n){if(1&a&&r.\u0275\u0275element(0,"classifieds-ui-panel-page",4),2&a){var t=r.\u0275\u0275nextContext();r.\u0275\u0275property("panelPage",t.embedPanel)("nested",!0)("contexts",t.contexts)("css",t.filteredCss)("listeners",t.filteredListeners)("ancestory",t.ancestoryWithSelf)}}var UG=["panes"];function zG(a,n){}function GG(a,n){if(1&a&&r.\u0275\u0275element(0,"classifieds-ui-render-pane",8),2&a){var t=n.$implicit,e=n.index,o=r.\u0275\u0275nextContext(3),s=r.\u0275\u0275reference(1);r.\u0275\u0275property("formControlName",e)("pluginName",t.contentPlugin)("settings",t.settings)("name",t.name)("label",t.label)("originPane",o.panel.panes[o.originMappings[e]])("contexts",t.contexts)("displayType",o.displayType)("resolvedContext",t.resolvedContext)("indexPosition",e)("css",o.filteredCss)("listeners",o.filteredListeners)("ancestory",o.ancestoryWithSelf$.value)("panes",s)("originPanes",o.originPanes)}}function VG(a,n){if(1&a&&(r.\u0275\u0275elementContainerStart(0)(1)(2,6),r.\u0275\u0275template(3,GG,1,15,"classifieds-ui-render-pane",7),r.\u0275\u0275elementContainerEnd()()()),2&a){var t=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(3),r.\u0275\u0275property("ngForOf",t.resolvedPanes)}}function HG(a,n){if(1&a&&r.\u0275\u0275element(0,"classifieds-ui-render-pane",10),2&a){var t=n.$implicit,e=n.index,o=r.\u0275\u0275nextContext(3),s=r.\u0275\u0275reference(1);r.\u0275\u0275property("pluginName",t.contentPlugin)("settings",t.settings)("name",t.name)("label",t.label)("originPane",o.panel.panes[o.originMappings[e]])("contexts",t.contexts)("linkedPageId",t.linkedPageId)("displayType",o.displayType)("resolvedContext",t.resolvedContext)("indexPosition",e)("css",o.filteredCss)("listeners",o.filteredListeners)("ancestory",o.ancestoryWithSelf$.value)("panes",s)("originPanes",o.originPanes)}}function qG(a,n){if(1&a&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,HG,1,15,"classifieds-ui-render-pane",9),r.\u0275\u0275elementContainerEnd()),2&a){var t=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",t.resolvedPanes)}}function KG(a,n){if(1&a&&(r.\u0275\u0275elementContainerStart(0)(1,4),r.\u0275\u0275template(2,VG,4,1,"ng-container",5),r.\u0275\u0275template(3,qG,2,1,"ng-container",5),r.\u0275\u0275elementContainerEnd()()),2&a){var t=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("ngSwitch",t.displayType),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngSwitchCase","form"),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngSwitchCase","page")}}var WG=["renderPanelTpl"];function XG(a,n){}function QG(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",4),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(t);var o=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(o.submit())}),r.\u0275\u0275text(1,"Submit"),r.\u0275\u0275elementEnd()}}function JG(a,n){if(1&a&&(r.\u0275\u0275elementContainerStart(0,0)(1,5),r.\u0275\u0275element(2,"classifieds-ui-render-panel",6),r.\u0275\u0275elementContainerEnd()()),2&a){var t=n.i,e=r.\u0275\u0275nextContext();r.\u0275\u0275property("formGroup",e.pageForm),r.\u0275\u0275advance(2),r.\u0275\u0275property("formControlName",t)("panel",e.panelPageCached.panels[t])("nested",e.nested$.value)("contexts",e.contexts$.value)("resolvedContext",e.resolvedContext)("contextsChanged",e.contextsChanged)("displayType",e.panelPageCached.displayType)("indexPosition",t)("css",e.filteredCss)("listeners",e.filteredListeners)("ancestory",e.ancestory$.value)}}var DE=function(){var a=(0,_.Z)(function n(t){(0,p.Z)(this,n),this.viewContainerRef=t});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(r.ViewContainerRef))},a.\u0275dir=r.\u0275\u0275defineDirective({type:a,selectors:[["","classifiedsUiPaneContentHost",""]]}),a}(),D3=function(){var a=(0,_.Z)(function n(t){(0,p.Z)(this,n),this.viewContainerRef=t});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(r.ViewContainerRef))},a.\u0275dir=r.\u0275\u0275defineDirective({type:a,selectors:[["","classifiedsUiLayoutRendererHost",""]]}),a}(),Ls=function(){function a(n,t,e,o,s,u,c,l,m,C,T,B,F,U,ae,ue,me,Se,we,qe,at,dt,Ot,ft,jt,Ut,tn){var Vt=this;(0,p.Z)(this,a),this.platformId=n,this.mediaSettings=t,this.routerStore=e,this.fb=o,this.el=s,this.inlineContextResolver=u,this.pageBuilderFacade=c,this.cpm=l,this.cxm=m,this.lpm=C,this.componentFactoryResolver=T,this.styleLoader=B,this.http=F,this.cssHelper=U,this.attributeSerializer=ae,this.formService=ue,this.panelsContextService=me,this.asyncApiCallHelperSvc=Se,this.crudDataHelperService=we,this.entityDefinitionService=qe,this.ngZone=at,this.persistService=dt,this.stylizerService=Ot,this.classifyService=ft,this.fileService=jt,this.authFacade=Ut,this.resolvedContext={},this.contextsChanged=[],this.persistenceEnabled=!1,this.onInit$=new se.x,this.afterViewInit$=new se.x,this.afterContentInit$=new se.x,this.renderLayout$=new se.x,this.id$=new z.X(void 0),this.panelPage$=new z.X(void 0),this.nested$=new z.X(!1),this.ancestory$=new z.X([]),this.contexts$=new z.X([]),this.instanceUniqueIdentity=fr(),this.isStable=!1,this.managedCssCache="",this.managedClassesCache={},this.filteredListeners=[],this.css$=new z.X({css:this.cssHelper.makeJsonNode(),classes:{}}),this.cssSub=this.css$.subscribe(function(zt){Vt.nested$.value&&console.log("filtered css nested",zt),Vt.filteredCss=zt}),this.listeners$=new z.X([]),this.listenersSub=this.listeners$.pipe((0,ee.b)(function(zt){Vt.filteredListeners=zt})).subscribe(),this.settingsFormArray=this.fb.array([]),this.pageForm=this.fb.group({panels:this.fb.array([])}),this.bridgeSub=this.pageForm.valueChanges.pipe((0,Q.h)(function(){return Vt.nested$.value}),(0,kr.b)(500)).subscribe(function(zt){console.log("write page"),console.log(zt),Vt.settingsFormArray.clear();var qt=Vt.attributeSerializer.convertToGroup(Vt.attributeSerializer.serialize(zt,"value").attributes[0]);Vt.settingsFormArray.push(qt),console.log(qt.value)}),this.idOrPanelPageSub=(0,Sr.a)([this.id$,this.panelPage$]).pipe((0,xu.x)(),(0,Ce.U)(function(zt){var qt=(0,g.Z)(zt,2);return{id:qt[0],panelPage:qt[1]}}),(0,Q.h)(function(zt){return!!zt.id||!!zt.panelPage}),(0,st.w)(function(zt){var qt=zt.id;return Or(function(){return!qt},(0,je.of)({panelPage:zt.panelPage}),new W.y(function(Er){var lo=Vt.entityDefinitionService.getDefinition("PanelPage").metadata;return Vt.crudDataHelperService.evaluateCollectionPlugins({query:"identity=".concat(qt),plugins:lo.crud,op:"query"}).pipe((0,Ce.U)(function(us){return us&&0!==us.length?us[0]:void 0}),(0,ee.b)(function(us){Er.next({panelPage:us}),Er.complete()})).subscribe()}))}),(0,st.w)(function(zt){var qt=zt.panelPage;return Vt.cpm.getPlugins(qt.panels.reduce(function(qn,Er){return Er.panes.forEach(function(lo){qn.includes(lo.contentPlugin)||qn.push(lo.contentPlugin)}),qn},[])).pipe((0,Ce.U)(function(){return{panelPage:qt}}))}),(0,st.w)(function(zt){var qt=zt.panelPage;return Or(function(){return!Vt.nested$.value},
/*!this.nested ? this.panelsContextService.allActivePageContexts({ panelPage: p }).pipe(
                  map(paneContexts => [p, isDynamic, paneContexts])
                ): of([p, isDynamic, []]),*/
Vt.panelsContextService.allActivePageContexts({panelPage:qt}).pipe((0,Ce.U)(function(qn){return{panelPage:qt,contexts:Array.from(qn)}})),(0,je.of)({panelPage:qt,contexts:[]}))}),(0,ee.b)(function(zt){var qt=zt.panelPage,qn=zt.contexts;Vt.hookupFormChange({panelPage:qt}),Vt.populatePanelsFormArray({panelPage:qt}),Vt.panelPageCached=qt,Vt.persistenceEnabled=qt.persistence&&qt.persistence.dataduct&&qt.persistence.dataduct.plugin&&""!==qt.persistence.dataduct.plugin,Vt.filteredListeners=qt.interactions&&qt.interactions.interactions&&qt.interactions.interactions.listeners?qt.interactions.interactions.listeners:[],Vt.renderLayout$.next(qt),Vt.contexts$.next([].concat((0,y.Z)(qt.contexts?qt.contexts.map(function(Er){return new co(Er)}):[]),(0,y.Z)(qn))),Vt.hookupCss({file:qt.cssFile?qt.cssFile.trim():void 0}),console.log("cached panel page: ".concat(qt.id))})).subscribe(),this.hookupContextSub=(0,Sr.a)(this.contexts$,this.afterContentInit$).pipe((0,Ce.U)(function(zt){return(0,g.Z)(zt,1)[0]}),(0,st.w)(function(zt){return Vt.inlineContextResolver.resolveMerged(zt,"panelpage:".concat(fr())).pipe((0,st.w)(function(qt){return Vt.cxm.getPlugins().pipe((0,Ce.U)(function(qn){return{contexts:zt,resolvedContext:qt,globalPlugins:Array.from(qn.values()).filter(function(Er){return!0===Er.global})}}))}),(0,kn.q)(1))}),(0,ee.b)(function(){Vt.resolveSub&&Vt.resolveSub.unsubscribe()}),(0,ee.b)(function(zt){var qt=zt.contexts,Er=zt.globalPlugins;Vt.resolvedContext=zt.resolvedContext;var lo=new se.x;if((0,E.isPlatformServer)(Vt.platformId))var us=setInterval(function(){0===a.registredContextListeners.size&&(lo.next(),lo.complete(),clearInterval(us))},1e3);Vt.resolveSub=Vt.inlineContextResolver.resolveMergedSingle(qt).pipe((0,yy.T)(Er.length+(qt?qt.length:0)),(0,ee.b)(function(){return a.registredContextListeners.add(Vt.instanceUniqueIdentity)}),(0,ee.b)(function(Ru){return console.log("buffer",Ru)}),function DG(a){for(var n,t,e=arguments.length,o=new Array(e>1?e-1:0),s=1;s<e;s++)o[s-1]=arguments[s];var u=null!==(n=(0,RG.yG)(o))&&void 0!==n?n:eu.z,c=null!==(t=o[0])&&void 0!==t?t:null,l=o[1]||1/0;return(0,vs.e)(function(m,C){var T=[],B=!1,F=function(me){var Se=me.buffer;me.subs.unsubscribe(),(0,AG.P)(T,me),C.next(Se),B&&U()},U=function(){if(T){var me=new mO.w0;C.add(me);var we={buffer:[],subs:me};T.push(we),(0,A3.f)(me,u,function(){return F(we)},a)}};null!==c&&c>=0?(0,A3.f)(C,u,U,c,!0):B=!0,U();var ae=(0,mo.x)(C,function(ue){var we,me=T.slice(),Se=(0,te.Z)(me);try{for(Se.s();!(we=Se.n()).done;){var qe=we.value,at=qe.buffer;at.push(ue),l<=at.length&&F(qe)}}catch(dt){Se.e(dt)}finally{Se.f()}},function(){for(;T?.length;)C.next(T.shift().buffer);ae?.unsubscribe(),C.complete(),C.unsubscribe()},void 0,function(){return T=null});m.subscribe(ae)})}(1),(0,ee.b)(function(Ru){0===Ru.length&&a.registredContextListeners.delete(Vt.instanceUniqueIdentity)}),(0,Q.h)(function(Ru){return 0!==Ru.length}),(0,ee.b)(function(Ru){Vt.contextsChanged=Ru.reduce(function(ZE,pA){var LE=(0,g.Z)(pA,2)[0];return[].concat((0,y.Z)(ZE),(0,y.Z)(ZE.includes(LE)?[]:[LE]))},[]),Vt.resolvedContext=Ru.reduce(function(ZE,pA){var Sy=(0,g.Z)(pA,2),LE=Sy[0],dF=Sy[1];return(0,b.Z)((0,b.Z)({},ZE),{},(0,d.Z)({},LE,dF))},Vt.resolvedContext)}),(0,ee.b)(function(){return a.registredContextListeners.delete(Vt.instanceUniqueIdentity)}),(0,E.isPlatformServer)(Vt.platformId)?(0,Qr.R)(lo):(0,ee.b)(function(){})).subscribe()})).subscribe(),this.renderLayoutSub=(0,Sr.a)([this.renderLayout$,this.afterViewInit$]).pipe((0,Rr.g)(1),(0,Ce.U)(function(zt){return{panelPage:(0,g.Z)(zt,1)[0]}}),(0,st.w)(function(zt){var qt=zt.panelPage;return Vt.lpm.getPlugin(qt.layoutType).pipe((0,Ce.U)(function(qn){return{panelPage:qt,plugin:qn}}))}),(0,ee.b)(function(){return console.log("start render layout")}),(0,Ce.U)(function(zt){return{panelPage:zt.panelPage,plugin:zt.plugin,viewContainerRef:Vt.layoutRendererHost.viewContainerRef}}),(0,ee.b)(function(zt){return zt.viewContainerRef.clear()}),(0,Ce.U)(function(zt){return{panelPage:zt.panelPage,layoutRendererRef:zt.viewContainerRef.createComponent(zt.plugin.renderer)}}),(0,ee.b)(function(zt){return Vt.layoutRendererRef=zt.layoutRendererRef}),(0,ee.b)(function(zt){var qt=zt.layoutRendererRef,qn=zt.panelPage;qt.instance.renderPanelTpl=Vt.renderPanelTpl,qt.instance.panelPage=qn}),(0,ee.b)(function(){return console.log("end render layout")})).subscribe(),this.stylizerSub=this.afterViewInit$.pipe((0,Q.h)(function(){return(0,E.isPlatformBrowser)(Vt.platformId)}),(0,ee.b)(function(){Vt.stylizerService.stylize({targetNode:Vt.el.nativeElement})})).subscribe(),this.classifySub=this.afterViewInit$.pipe((0,Q.h)(function(){return(0,E.isPlatformBrowser)(Vt.platformId)}),(0,ee.b)(function(){Vt.classifyService.classify({targetNode:Vt.el.nativeElement})})).subscribe(),this.stylizerMutatedSub=(0,E.isPlatformBrowser)(this.platformId)?this.stylizerService.mutated$.pipe((0,kr.b)(2e3),(0,yy.T)(1),(0,st.w)(function(zt){var qt=zt.stylesheet;return Vt.authFacade.getUser$.pipe((0,Ce.U)(function(qn){return{stylesheet:qt,isAuthenticated:!!qn}}))}),(0,Q.h)(function(zt){return zt.isAuthenticated}),(0,ee.b)(function(zt){console.log("merged css",zt.stylesheet)}),(0,Q.h)(function(){return!!Vt.panelPageCached&&!!Vt.panelPageCached.id}),(0,st.w)(function(zt){var qt=zt.stylesheet;return Vt.isStable?(0,je.of)({stylesheet:qt}):Vt.ngZone.onStable.asObservable().pipe((0,Ce.U)(function(){return{stylesheet:qt}}),(0,kn.q)(1))}),(0,Ce.U)(function(zt){var qt=zt.stylesheet;return{stylesheet:(Vt.managedCssCache&&""!==Vt.managedCssCache.trim()?Vt.managedCssCache+"\n":"")+qt}}),(0,Li.b)(function(zt){return Vt.fileService.bulkUpload({nocache:!0,files:[new File([zt.stylesheet],"panelpage__".concat(Vt.panelPageCached.id,".css"))],fileNameOverride:"panelpage__".concat(Vt.panelPageCached.id,".css")})}),(0,ee.b)(function(){console.log("stylesheet saved.")})).subscribe():void 0,this.classifyMutatedSub=(0,E.isPlatformBrowser)(this.platformId)?this.classifyService.mutated$.pipe((0,kr.b)(2e3),(0,yy.T)(1),(0,st.w)(function(zt){var qt=zt.classes;return Vt.authFacade.getUser$.pipe((0,Ce.U)(function(qn){return{classes:qt,isAuthenticated:!!qn}}))}),(0,Q.h)(function(zt){return zt.isAuthenticated}),(0,ee.b)(function(zt){console.log("merged classes",zt.classes)}),(0,Q.h)(function(){return!!Vt.panelPageCached&&!!Vt.panelPageCached.id}),(0,st.w)(function(zt){var qt=zt.classes;return Vt.isStable?(0,je.of)({classes:qt}):Vt.ngZone.onStable.asObservable().pipe((0,Ce.U)(function(){return{classes:qt}}),(0,kn.q)(1))}),(0,Ce.U)(function(zt){var qt=zt.classes;return{classes:Array.from(qt.keys()).reduce(function(qn,Er){return(0,b.Z)((0,b.Z)({},qn),{},(0,d.Z)({},Er,Array.from(qt.get(Er).keys()).filter(function(lo){return qt.get(Er).get(lo)!==bo.KEEP}).reduce(function(lo,us){return(0,b.Z)((0,b.Z)({},lo),{},(0,d.Z)({},us,qt.get(Er).get(us)))},{})))},{})}}),(0,Ce.U)(function(zt){return{classes:ay(Vt.managedClassesCache,zt.classes)}}),(0,Ce.U)(function(zt){return{json:JSON.stringify(zt.classes)}}),(0,Li.b)(function(zt){return Vt.fileService.bulkUpload({nocache:!0,files:[new File([zt.json],"panelpage__".concat(Vt.panelPageCached.id,"__classes.json"))],fileNameOverride:"panelpage__".concat(Vt.panelPageCached.id,"__classes.json")})}),(0,ee.b)(function(){console.log("classes saved.")})).subscribe():void 0,this.onStableSub=this.ngZone.onStable.asObservable().pipe((0,ee.b)(function(){return Vt.isStable=!0})).subscribe(),this.onUnstableSub=this.ngZone.onUnstable.asObservable().pipe((0,ee.b)(function(){return Vt.isStable=!1})).subscribe(),this.onTouched=function(){},this.panelPageService=tn.getEntityCollectionService("PanelPage"),this.panelPageFormService=tn.getEntityCollectionService("PanelPageForm"),this.panelPageStateService=tn.getEntityCollectionService("PanelPageState")}return(0,_.Z)(a,[{key:"id",set:function(t){this.id$.next(t)}},{key:"panelPage",set:function(t){this.panelPage$.next(t)}},{key:"nested",set:function(t){this.nested$.next(t)}},{key:"contexts",set:function(t){this.contexts$.next(t)}},{key:"ancestory",set:function(t){this.ancestory$.next(t)}},{key:"css",set:function(t){this.css$.next(t)}},{key:"listeners",set:function(t){this.listeners$.next(t)}},{key:"panelsArray",get:function(){return this.pageForm.get("panels")}},{key:"ngOnInit",value:function(){this.onInit$.next(void 0)}},{key:"ngAfterViewInit",value:function(){this.afterViewInit$.next(void 0)}},{key:"ngAfterContentInit",value:function(){this.afterContentInit$.next(void 0)}},{key:"ngOnDestroy",value:function(){a.registredContextListeners.delete(this.instanceUniqueIdentity)}},{key:"populatePanelsFormArray",value:function(t){var e=this,o=t.panelPage;this.panelsArray.clear(),o.panels.forEach(function(){e.panelsArray.push(e.fb.control(""))})}},{key:"hookupFormChange",value:function(t){var e=this,o=t.panelPage;this.pageForm.valueChanges.pipe((0,kr.b)(100),(0,Q.h)(function(){return void 0!==o&&"form"===o.displayType})).subscribe(function(s){var u=new ku((0,b.Z)((0,b.Z)({},s),{},{name:o.name,title:o.title,derivativeId:o.id}));e.pageBuilderFacade.setForm(o.name,u)})}},{key:"hookupCss",value:function(t){var e=this;(0,Un.D)([(0,je.of)(void 0),(0,je.of)(void 0),(0,je.of)(void 0),this.panelPageCached.id?this.http.get("".concat(this.mediaSettings.imageUrl,"/media/panelpage__").concat(this.panelPageCached.id,"__classes.json")).pipe((0,ti.K)(function(){return(0,je.of)(void 0)}),(0,hi.d)(void 0)):(0,je.of)(void 0)]).pipe((0,ee.b)(function(s){var u=(0,g.Z)(s,4),c=u[0],l=u[1],m=u[2],C=u[3];console.log("fetched managed panelpage css and class files");var T={};e.managedCssCache="",e.managedClassesCache=C,c&&(T=ay(T,c)),l&&(e.managedCssCache=m,T=ay(T,l)),e.filteredCss={css:T,classes:C}})).subscribe()}},{key:"submit",value:function(){if(this.pageForm.valid){var t=new ku((0,b.Z)({},this.pageForm.value)),e=this.formService.serializeForm(t);console.log(t),console.log(this.formService.serializeForm(t)),console.log("form data",e),this.persistService.persist({data:e,persistence:this.panelPageCached.persistence}).subscribe(function(){console.log("persisted data")})}else console.log("detected form invalid")}},{key:"writeValue",value:function(t){t&&this.settingsFormArray.setValue(t,{emitEvent:!1})}},{key:"registerOnChange",value:function(t){this.settingsFormArray.valueChanges.subscribe(t)}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){t?this.settingsFormArray.disable():this.settingsFormArray.enable()}},{key:"validate",value:function(t){var e=this;return this.settingsFormArray.statusChanges.pipe((0,uE.O)(this.settingsFormArray.status),(0,Q.h)(function(o){return"PENDING"!==o}),(0,kr.b)(1),(0,kn.q)(1),(0,Ce.U)(function(o){return e.settingsFormArray.valid?null:{invalidForm:{valid:!1,message:"content is invalid"}}}))}}]),a}();Ls.registredContextListeners=new Set,Ls.\u0275fac=function(n){return new(n||Ls)(r.\u0275\u0275directiveInject(r.PLATFORM_ID),r.\u0275\u0275directiveInject(rE),r.\u0275\u0275directiveInject(Zt.yh),r.\u0275\u0275directiveInject(v.QS),r.\u0275\u0275directiveInject(r.ElementRef),r.\u0275\u0275directiveInject(Gd),r.\u0275\u0275directiveInject(ea),r.\u0275\u0275directiveInject(fn.ContentPluginManager),r.\u0275\u0275directiveInject(Su),r.\u0275\u0275directiveInject(kE),r.\u0275\u0275directiveInject(r.ComponentFactoryResolver),r.\u0275\u0275directiveInject(Nn.StyleLoaderService),r.\u0275\u0275directiveInject(O.HttpClient),r.\u0275\u0275directiveInject(Ok),r.\u0275\u0275directiveInject(Bt.AttributeSerializerService),r.\u0275\u0275directiveInject(e3),r.\u0275\u0275directiveInject(WO),r.\u0275\u0275directiveInject(Nn.AsyncApiCallHelperService),r.\u0275\u0275directiveInject(iy),r.\u0275\u0275directiveInject(Qi),r.\u0275\u0275directiveInject(r.NgZone),r.\u0275\u0275directiveInject(D$),r.\u0275\u0275directiveInject(BG),r.\u0275\u0275directiveInject(NG),r.\u0275\u0275directiveInject(iE),r.\u0275\u0275directiveInject(li),r.\u0275\u0275directiveInject(Dr))},Ls.\u0275cmp=r.\u0275\u0275defineComponent({type:Ls,selectors:[["classifieds-ui-panel-page"]],viewQuery:function(n,t){var e;1&n&&(r.\u0275\u0275viewQuery(x3,5),r.\u0275\u0275viewQuery(WG,7),r.\u0275\u0275viewQuery(D3,5)),2&n&&(r.\u0275\u0275queryRefresh(e=r.\u0275\u0275loadQuery())&&(t.gridLayout=e.first),r.\u0275\u0275queryRefresh(e=r.\u0275\u0275loadQuery())&&(t.renderPanelTpl=e.first),r.\u0275\u0275queryRefresh(e=r.\u0275\u0275loadQuery())&&(t.layoutRendererHost=e.first))},hostVars:2,hostBindings:function(n,t){2&n&&r.\u0275\u0275classProp("panel-page",!0)},inputs:{id:"id",panelPage:"panelPage",nested:"nested",contexts:"contexts",ancestory:"ancestory",css:"css",listeners:"listeners",resolvedContext:"resolvedContext"},features:[r.\u0275\u0275ProvidersFeature([{provide:v.JU,useExisting:(0,r.forwardRef)(function(){return Ls}),multi:!0},{provide:v.SD,useExisting:(0,r.forwardRef)(function(){return Ls}),multi:!0}])],decls:6,vars:2,consts:[[3,"formGroup"],["classifiedsUiLayoutRendererHost",""],["type","button",3,"click",4,"ngIf"],["renderPanelTpl",""],["type","button",3,"click"],["formArrayName","panels"],[3,"formControlName","panel","nested","contexts","resolvedContext","contextsChanged","displayType","indexPosition","css","listeners","ancestory"]],template:function(n,t){1&n&&(r.\u0275\u0275elementStart(0,"div",0),r.\u0275\u0275elementContainerStart(1),r.\u0275\u0275template(2,XG,0,0,"ng-template",1),r.\u0275\u0275elementContainerEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(3,QG,2,0,"button",2),r.\u0275\u0275template(4,JG,3,12,"ng-template",null,3,r.\u0275\u0275templateRefExtractor)),2&n&&(r.\u0275\u0275property("formGroup",t.pageForm),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngIf",t.persistenceEnabled))},dependencies:function(){return[E.NgIf,v.JJ,v.JL,v.sg,v.u,v.CE,YG,D3]},styles:["[_nghost-%COMP%]     gridster{background-color:#fff}[_nghost-%COMP%]     gridster-item{background-color:#fff}"]});var xy=function(){var a=function(){function n(t,e,o,s,u,c,l,m,C,T,B){var F=this;(0,p.Z)(this,n),this.document=t,this.platformId=e,this.el=o,this.renderer2=s,this.componentFactoryResolver=u,this.panelHandler=c,this.fb=l,this.cpm=m,this.cssHelper=C,this.paneStateService=T,this.settings=[],this.ancestory=[],this.panes=[],this.originPanes=[],this.afterContentInit$=new se.x,this.resolvedContext$=new z.X({}),this.schedulePluginChange=new se.x,this.ancestoryWithSelf=[],this.filteredListeners=[],this.css$=new z.X({css:this.cssHelper.makeJsonNode(),classes:{}}),this.cssSub=(0,Sr.a)([this.css$,this.afterContentInit$,this.schedulePluginChange]).pipe((0,Ce.U)(function(U){return(0,g.Z)(U,1)[0]}),(0,Ce.U)(function(U){return{css:F.cssHelper.reduceCss(U.css,".pane-".concat(F.indexPosition)),classes:F.cssHelper.reduceSelector(U.classes,".pane-".concat(F.indexPosition))}}),(0,Ce.U)(function(U){var ae=U.css,ue=U.classes;return[F.cssHelper.reduceCss(ae,".panel-page",!1),F.cssHelper.reduceCss(ae,".panel-page"),F.cssHelper.reduceSelector(ue,".panel-page",!1),F.cssHelper.reduceSelector(ue,".panel-page")]}),(0,ee.b)(function(U){var ae=(0,g.Z)(U,4);return F.filteredCss={css:ae[1],classes:ae[3]}}),(0,Ce.U)(function(U){var ae=(0,g.Z)(U,4);return{css:ae[0],classes:ae[2]}}),(0,Ce.U)(function(U){var ue=U.classes;return{css:{children:Object.keys(U.css.children).reduce(function(we,qe){return(0,b.Z)((0,b.Z)({},we),0===qe.indexOf(">")?(0,d.Z)({},F.ancestoryWithSelf.map(function(at,dt){return(dt+1)%2==0?".pane-".concat(at):".panel-".concat(at)}).join(" ")+" "+qe,ue[qe]):(0,d.Z)({},qe,ue[qe]))},{})},classes:Object.keys(ue).reduce(function(we,qe){return(0,b.Z)((0,b.Z)({},we),0===qe.indexOf(">")?(0,d.Z)({},F.ancestoryWithSelf.map(function(at,dt){return(dt+1)%2==0?".pane-".concat(at):".panel-".concat(at)}).join(" ")+" "+qe,ue[qe]):(0,d.Z)({},qe,ue[qe]))},{})}}),(0,Rr.g)(500)).subscribe(function(U){var ae=U.css,ue=U.classes;console.log("reduced classes",ue);var me=Object.keys(ae.children).filter(function(we){return""===we||nf({selector:we,document:F.document})}),Se=Object.keys(ue).filter(function(we){return""===we||nf({selector:we,document:F.document})});Se.forEach(function(we,qe){for(var at=""===we?[F.el.nativeElement]:-1!==we.indexOf(">")?F.document.querySelectorAll(we):F.el.nativeElement.querySelectorAll(we),dt=at.length,Ot=0;Ot<dt;Ot++)for(var ft=ue[Se[qe]],jt=Object.keys(ft),Ut=jt.length,tn=0;tn<Ut;tn++)at[Ot]&&(ft[jt[tn]]===bo.REMOVE?(console.log("remove class ".concat(jt[tn])),F.renderer2.removeClass(at[Ot],jt[tn])):(console.log("add class ".concat(jt[tn])),F.renderer2.addClass(at[Ot],jt[tn])))}),me.forEach(function(we){console.log("search: ".concat(we));for(var qe=""===we?[F.el.nativeElement]:-1!==we.indexOf(">")?F.document.querySelectorAll(we):F.el.nativeElement.querySelectorAll(we),at=qe.length,dt=Object.keys(ae.children[we].attributes),Ot=function(Ut){qe[Ut]&&dt.forEach(function(tn){console.log("".concat(we," { ").concat(tn,": ").concat(ae.children[we].attributes[tn],"; }"));var Vt=Tc(tn.replace("-","_"),!1);F.renderer2.setStyle(qe[Ut],Vt,ae.children[we].attributes[tn])})},ft=0;ft<at;ft++)Ot(ft)})}),this.listeners$=new z.X([]),this.listenersSub=(0,Sr.a)([this.listeners$,this.schedulePluginChange]).pipe((0,Ce.U)(function(U){return(0,g.Z)(U,1)[0]}),(0,ee.b)(function(U){console.log("pane listeners",U)})).subscribe(),this.paneForm=this.fb.group({contentPlugin:this.fb.control("",v.kI.required),name:this.fb.control(""),label:this.fb.control(""),settings:this.fb.control("")}),this.paneFormSub=this.paneForm.valueChanges.subscribe(function(U){console.log("pane form value plugin: ".concat(F.pluginName)),console.log(U)}),this.scheduleStateChange$=new se.x,this.scheduleStateChangeSub=this.scheduleStateChange$.pipe((0,st.w)(function(U){return F.paneStateService.mergeState({state:U.state,ancestory:(0,y.Z)(F.ancestoryWithSelf),settings:F.settings,plugin:F.contentPlugin})})).subscribe(function(U){F.panelPageStateService.upsert(U.pageState)}),this.onTouched=function(){},this.pluginChangeSub=this.schedulePluginChange.pipe((0,Q.h)(function(){return F.pluginName&&null!==F.pluginName&&""!==F.pluginName}),(0,st.w)(function(){return F.cpm.getPlugin(F.pluginName)})).subscribe(function(U){F.contentPlugin=U,F.paneForm.get("contentPlugin").setValue(U.name),F.paneForm.get("name").setValue(F.name),F.paneForm.get("label").setValue(F.label),"panel"===F.pluginName?F.resolveNestedPanelPage():F.renderPaneContent()}),this.embedPanelSub=this.resolvedContext$.pipe((0,Ce.U)(function(U){U&&U._root&&!F.linkedPageId&&0===F.settings.length&&(F.embedPanel=new ii(U._root))})).subscribe(),this.panelPageStateService=B.getEntityCollectionService("PanelPageState")}return(0,_.Z)(n,[{key:"resolvedContext",set:function(e){this.resolvedContext$.next(e)}},{key:"css",set:function(e){this.css$.next(e)}},{key:"listeners",set:function(e){this.listeners$.next(e)}},{key:"indexPositionClass",get:function(){return"pane-".concat(this.indexPosition)}},{key:"dynamicPanel",get:function(){return new ii(this.resolvedContext._root)}},{key:"ngOnInit",value:function(){this.ancestoryWithSelf=[].concat((0,y.Z)(this.ancestory?this.ancestory:[]),(0,y.Z)(null!=this.indexPosition?[this.indexPosition]:[])),this.schedulePluginChange.next(void 0)}},{key:"ngOnChanges",value:function(e){if(e.ancestory||e.indexPosition){var o=[].concat((0,y.Z)(e.ancestory.currentValue?e.ancestory.currentValue:this.ancestory?this.ancestory:[]),(0,y.Z)(null!=e.indexPosition.currentValue?[e.indexPosition.currentValue]:this.indexPosition?[this.indexPosition]:[]));(o.length!==this.ancestoryWithSelf.length||0!==this.ancestoryWithSelf.filter(function(s,u){return o[u]!==s}).length)&&(this.ancestoryWithSelf=o)}this.schedulePluginChange.next(void 0)}},{key:"ngAfterContentInit",value:function(){this.afterContentInit$.next(void 0)}},{key:"writeValue",value:function(e){e&&this.paneForm.setValue(e,{emitEvent:!1})}},{key:"registerOnChange",value:function(e){this.paneForm.valueChanges.subscribe(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){e?this.paneForm.disable():this.paneForm.enable()}},{key:"validate",value:function(e){var o=this;return this.paneForm.statusChanges.pipe((0,uE.O)(this.paneForm.status),(0,Q.h)(function(s){return"PENDING"!==s}),(0,kr.b)(1),(0,kn.q)(1),(0,Ce.U)(function(s){return o.paneForm.valid?null:{invalidForm:{invalidForm:{valid:!1,message:"pane is invalid"}}}}))}},{key:"resolveNestedPanelPage",value:function(){var e=this;this.panelHandler.toObject(this.settings).subscribe(function(o){e.panelPage=new ii((0,b.Z)((0,b.Z)({},o),{},{contexts:e.contexts}))})}},{key:"renderPaneContent",value:function(){var e=this,o=this.componentFactoryResolver.resolveComponentFactory(this.contentPlugin.renderComponent),s=this.contentPaneHost.viewContainerRef;s.clear(),this.componentRef=s.createComponent(o),this.componentRef.instance.settings=this.settings,this.componentRef.instance.name=this.name,this.componentRef.instance.label=this.label,this.componentRef.instance.panes=this.panes,this.componentRef.instance.originPanes=this.originPanes,this.componentRef.instance.contexts=this.contexts.map(function(u){return new co(u)}),this.componentRef.instance.displayType=this.displayType,this.componentRef.instance.resolvedContext=this.resolvedContext$.value,this.componentRef.instance.ancestory=this.ancestoryWithSelf,this.componentRef.instance.state&&this.contentPlugin.handler&&this.contentPlugin.handler.stateDefinition(this.settings).pipe((0,kn.q)(1)).subscribe(function(u){e.componentRef.instance.state=u||{}}),this.componentRef.instance.stateChange&&this.componentRef.instance.stateChange.subscribe(function(u){e.scheduleStateChange$.next({state:u})})}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(E.DOCUMENT),r.\u0275\u0275directiveInject(r.PLATFORM_ID),r.\u0275\u0275directiveInject(r.ElementRef),r.\u0275\u0275directiveInject(r.Renderer2),r.\u0275\u0275directiveInject(r.ComponentFactoryResolver),r.\u0275\u0275directiveInject(yo),r.\u0275\u0275directiveInject(v.QS),r.\u0275\u0275directiveInject(fn.ContentPluginManager),r.\u0275\u0275directiveInject(Ok),r.\u0275\u0275directiveInject(L7),r.\u0275\u0275directiveInject(Dr))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-render-pane"]],viewQuery:function(t,e){var o;1&t&&r.\u0275\u0275viewQuery(DE,7),2&t&&r.\u0275\u0275queryRefresh(o=r.\u0275\u0275loadQuery())&&(e.contentPaneHost=o.first)},hostVars:5,hostBindings:function(t,e){2&t&&(r.\u0275\u0275attribute("data-index",e.indexPosition),r.\u0275\u0275classMap(e.indexPositionClass),r.\u0275\u0275classProp("pane",!0))},inputs:{pluginName:"pluginName",settings:"settings",linkedPageId:"linkedPageId",contexts:"contexts",originPane:"originPane",displayType:"displayType",name:"name",label:"label",indexPosition:"indexPosition",ancestory:"ancestory",panes:"panes",originPanes:"originPanes",resolvedContext:"resolvedContext",css:"css",listeners:"listeners"},features:[r.\u0275\u0275ProvidersFeature([{provide:v.JU,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0},{provide:v.SD,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0}]),r.\u0275\u0275NgOnChangesFeature],decls:6,vars:4,consts:[["fxFlex","",3,"formGroup"],["classifiedsUiPaneContentHost",""],["fxFlex","","formControlName","settings",3,"panelPage","nested","contexts","css","listeners","ancestory",4,"ngIf"],["fxFlex","","formControlName","settings",3,"id","nested","contexts","ancestory",4,"ngIf"],["fxFlex","","formControlName","settings",3,"panelPage","nested","contexts","css","listeners","ancestory"],["fxFlex","","formControlName","settings",3,"id","nested","contexts","ancestory"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"div",0),r.\u0275\u0275elementContainerStart(1),r.\u0275\u0275template(2,ZG,0,0,"ng-template",1),r.\u0275\u0275elementContainerEnd(),r.\u0275\u0275template(3,LG,1,6,"classifieds-ui-panel-page",2),r.\u0275\u0275template(4,jG,1,4,"classifieds-ui-panel-page",3),r.\u0275\u0275template(5,$G,1,6,"classifieds-ui-panel-page",2),r.\u0275\u0275elementEnd()),2&t&&(r.\u0275\u0275property("formGroup",e.paneForm),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngIf","panel"==e.pluginName&&!e.linkedPageId&&0!==e.settings.length),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","panel"==e.pluginName&&e.linkedPageId),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","panel"==e.pluginName&&!e.linkedPageId&&0===e.settings.length))},dependencies:[E.NgIf,v.JJ,v.JL,v.sg,v.u,DE,Ls],styles:["[_nghost-%COMP%]{height:100%}"]}),a}(),YG=function(){var a=function(){function n(t,e,o,s,u,c,l,m,C,T){var B=this;(0,p.Z)(this,n),this.platformId=t,this.document=e,this.hostEl=o,this.renderer2=s,this.componentFactoryResolver=u,this.fb=c,this.panelResolverService=l,this.spm=m,this.cssHelper=C,this.styleResolverService=T,this.nested=!1,this.resolvedContext={},this.heightChange=new r.EventEmitter,this.panelForm=this.fb.group({name:this.fb.control(""),label:this.fb.control(""),panes:this.fb.array([])}),this.panelFormSub=this.panelForm.valueChanges.subscribe(function(F){console.log("paneL form value"),console.log(F)}),this.filteredListeners=[],this.afterContentInit$=new se.x,this.schedulePanelRender=new se.x,this.rendered$=new se.x,this.css$=new z.X({css:this.cssHelper.makeJsonNode(),classes:{}}),this.cssSub=(0,Sr.a)([this.css$,this.afterContentInit$,this.rendered$]).pipe((0,ee.b)(function(F){var U=(0,g.Z)(F,1);return console.log("css node",U[0].css)}),(0,Ce.U)(function(F){return(0,g.Z)(F,1)[0]}),(0,Ce.U)(function(F){return{css:B.cssHelper.reduceCss(F.css,".panel-".concat(B.indexPosition$.value)),classes:B.cssHelper.reduceSelector(F.classes,".panel-".concat(B.indexPosition$.value))}}),(0,Ce.U)(function(F){var U=F.css,ae=F.classes;return[B.cssHelper.reduceCss(U,".pane-",!1),U,B.cssHelper.reduceSelector(ae,".pane-",!1),ae]}),(0,ee.b)(function(F){var U=(0,g.Z)(F,4);return B.filteredCss={css:U[1],classes:U[3]}}),(0,Ce.U)(function(F){var U=(0,g.Z)(F,3);return{css:U[0],classes:U[2]}}),(0,Ce.U)(function(F){var ae=F.classes;return{css:{children:Object.keys(F.css.children).reduce(function(Se,we){return(0,b.Z)((0,b.Z)({},Se),0===we.indexOf(">")?(0,d.Z)({},B.ancestoryWithSelf$.value.map(function(qe,at){return(at+1)%2==0?".pane-".concat(qe):".panel-".concat(qe)}).join(" ")+" "+we,ae[we]):(0,d.Z)({},we,ae[we]))},{})},classes:Object.keys(ae).reduce(function(Se,we){return(0,b.Z)((0,b.Z)({},Se),0===we.indexOf(">")?(0,d.Z)({},B.ancestoryWithSelf$.value.map(function(qe,at){return(at+1)%2==0?".pane-".concat(qe):".panel-".concat(qe)}).join(" ")+" "+we,ae[we]):(0,d.Z)({},we,ae[we]))},{})}}),(0,Rr.g)(1)).subscribe(function(F){var U=F.css,ae=F.classes;console.log("classes",ae);var ue=Object.keys(U.children).filter(function(Se){return""===Se||nf({selector:Se,document:B.document})}),me=Object.keys(ae).filter(function(Se){return""===Se||nf({selector:Se,document:B.document})});me.forEach(function(Se,we){for(var qe=""===Se?[B.hostEl.nativeElement]:-1!==Se.indexOf(">")?B.document.querySelectorAll(Se):B.hostEl.nativeElement.querySelectorAll(Se),at=qe.length,dt=0;dt<at;dt++)for(var Ot=ae[me[we]],ft=Object.keys(Ot),jt=ft.length,Ut=0;Ut<jt;Ut++)qe[dt]&&(Ot[ft[Ut]]===bo.REMOVE?(console.log("remove class ".concat(ft[Ut])),B.renderer2.removeClass(qe[dt],ft[Ut])):(console.log("add class ".concat(ft[Ut])),B.renderer2.addClass(qe[dt],ft[Ut])))}),ue.forEach(function(Se){console.log("search: ".concat(Se));for(var we=""===Se?[B.hostEl.nativeElement]:-1!==Se.indexOf(">")?B.document.querySelectorAll(Se):B.hostEl.nativeElement.querySelectorAll(Se),qe=we.length,at=Object.keys(U.children[Se].attributes),dt=function(jt){we[jt]&&at.forEach(function(Ut){console.log("".concat(Se," { ").concat(Ut,": ").concat(U.children[Se].attributes[Ut],"; }"));var tn=Tc(Ut.replace("-","_"),!1);B.renderer2.setStyle(we[jt],tn,U.children[Se].attributes[Ut])})},Ot=0;Ot<qe;Ot++)dt(Ot)})}),this.listeners$=new z.X([]),this.listenersSub=this.listeners$.pipe((0,ee.b)(function(F){console.log("panel listeners",F),B.filteredListeners=F})).subscribe(),this.scheduleRender=new se.x,this.scheduleRenderSub=this.scheduleRender.pipe((0,ee.b)(function(){return console.log("schdule renderer before [".concat(B.panel.name,"]"))}),(0,st.w)(function(F){var U=(0,g.Z)(F,3),ae=U[0];return B.panelResolverService.resolvePanes({panes:ae,contexts:U[1],resolvedContext:U[2]}).pipe((0,Ce.U)(function(Se){return{resolvedPanes:Se.resolvedPanes,originMappings:Se.originMappings,panes:ae}}))}),(0,st.w)(function(F){var U=F.panes;return B.styleResolverService.alterResolvedPanes({panel:B.panel,resolvedPanes:F.resolvedPanes,originMappings:F.originMappings}).pipe((0,Ce.U)(function(me){return{panes:U,resolvedPanes:me.resolvedPanes,originMappings:me.originMappings}}))}),(0,ee.b)(function(){return console.log("schdule renderer after [".concat(B.panel.name,"]"))})).subscribe(function(F){var U=F.panes,ae=F.resolvedPanes,ue=F.originMappings;console.log("render panel: ".concat(B.panel.name)),B.resolvedPanes=ae,B.originPanes=U,B.originMappings=ue,B.populatePanesFormArray(),void 0!==B.stylePlugin?B.renderPanelContent():B.rendered$.next(void 0)}),this.schduleContextChange=new se.x,this.schedulePanelRenderSub=this.schedulePanelRender.pipe((0,st.w)(function(F){return B.spm.getPlugin(F)})).subscribe(function(F){var U=B.componentFactoryResolver.resolveComponentFactory(F.renderComponent),ae=B.panelHost.viewContainerRef;ae.clear();var ue=ae.createComponent(U);B.componentRef=ue,ue.instance.settings=B.panel.settings,ue.instance.panes=B.resolvedPanes,ue.instance.originPanes=B.panel.panes,ue.instance.originMappings=B.originMappings,ue.instance.contexts=B.contexts.map(function(me){return new co(me)}),ue.instance.displayType=B.displayType,ue.instance.ancestory=B.ancestoryWithSelf$.value,ue.instance.resolvedContext=B.resolvedContext,ue.instance.panel=B.panel,ue.instance.indexPosition=B.indexPosition$.value,B.rendered$.next(void 0)}),this.originMappings=[],this.resolvedContexts=[],this.ancestoryWithSelf$=new z.X([]),this.ancestory$=new z.X([]),this.indexPosition$=new z.X(void 0),this.onTouched=function(){},this.ancestorySub=(0,Sr.a)([this.ancestory$,this.indexPosition$]).pipe((0,ee.b)(function(F){var U=(0,g.Z)(F,2),ue=U[1];B.ancestoryWithSelf$.next([].concat((0,y.Z)(U[0]),[ue]))})).subscribe(),this.counter=n.COUNTER++}return(0,_.Z)(n,[{key:"contextChanged",set:function(e){}},{key:"contextsChanged",set:function(e){var o=this;e.map(function(s){return o.schduleContextChange.next(s)})}},{key:"indexPosition",set:function(e){this.indexPosition$.next(e)}},{key:"ancestory",set:function(e){this.ancestory$.next(e)}},{key:"css",set:function(e){this.css$.next(e)}},{key:"listeners",set:function(e){this.listeners$.next(e)}},{key:"indexPositionClass",get:function(){return"panel-".concat(this.indexPosition$.value)}},{key:"panesArray",get:function(){return this.panelForm.get("panes")}},{key:"ngOnInit",value:function(){var e=this;this.stylePlugin=void 0!==this.panel.stylePlugin&&""!==this.panel.stylePlugin?this.panel.stylePlugin:void 0,void 0!==this.panel&&void 0!==this.panelHost&&(console.log("panel render init [".concat(this.panel.name)),this.panelResolverService.usedContexts(this.panel.panes).pipe((0,Ce.U)(function(o){return o.filter(function(s){return"_page"!==s&&"_root"!==s&&"."!==s&&0!==s.indexOf("panestate-"+e.ancestoryWithSelf$.value.join("-"))})}),(0,ee.b)(function(o){return console.log("contexts [".concat(e.panel.name,"]: ").concat(o.join(",")))}),(0,st.w)(function(o){return e.schduleContextChange.pipe((0,ee.b)(function(s){return console.log("detected change [".concat(e.panel.name,"]: ").concat(s))}),(0,Ce.U)(function(s){return[o,s]}))}),(0,ee.b)(function(o){var s=(0,g.Z)(o,2),u=s[0],c=s[1];return console.log("detected change [".concat(e.panel.name,"]: ").concat(c," : ctx: ").concat(u.join(",")))}),(0,Q.h)(function(o){var s=(0,g.Z)(o,2),u=s[0],c=s[1];return Array.isArray(u)&&-1!==u.findIndex(function(l){return l===c})}),(0,kr.b)(100)).subscribe(function(o){var s=(0,g.Z)(o,2),u=s[0],c=s[1];console.log("Context changed [".concat(e.panel.name,"]: ").concat(c)),console.log("contexts detected [".concat(e.panel.name,"]: ").concat(u.join(","))),e.scheduleRender.next([e.panel.panes,e.contexts,e.resolvedContext])}))}},{key:"ngOnChanges",value:function(e){this.stylePlugin=void 0!==this.panel.stylePlugin&&""!==this.panel.stylePlugin?this.panel.stylePlugin:void 0,e.resolvedContext&&void 0===e.resolvedContext.previousValue&&this.scheduleRender.next([this.panel.panes,this.contexts,this.resolvedContext])}},{key:"ngAfterViewInit",value:function(){}},{key:"ngAfterContentInit",value:function(){this.afterContentInit$.next(void 0)}},{key:"writeValue",value:function(e){e&&this.panelForm.setValue(e,{emitEvent:!1})}},{key:"registerOnChange",value:function(e){this.panelForm.valueChanges.subscribe(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){e?this.panelForm.disable():this.panelForm.enable()}},{key:"validate",value:function(e){var o=this;return this.panelForm.statusChanges.pipe((0,uE.O)(this.panelForm.status),(0,Q.h)(function(s){return"PENDING"!==s}),(0,kr.b)(1),(0,kn.q)(1),(0,Ce.U)(function(s){return o.panelForm.valid?null:{invalidForm:{valid:!1,message:"panel are invalid"}}}))}},{key:"populatePanesFormArray",value:function(){var e=this;this.panesArray.clear(),this.resolvedPanes.forEach(function(o,s){e.panesArray.push(e.fb.control(""))})}},{key:"renderPanelContent",value:function(){this.schedulePanelRender.next(this.stylePlugin)}}]),n}();return a.COUNTER=0,a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(r.PLATFORM_ID),r.\u0275\u0275directiveInject(E.DOCUMENT),r.\u0275\u0275directiveInject(r.ElementRef),r.\u0275\u0275directiveInject(r.Renderer2),r.\u0275\u0275directiveInject(r.ComponentFactoryResolver),r.\u0275\u0275directiveInject(v.QS),r.\u0275\u0275directiveInject(Tk),r.\u0275\u0275directiveInject(Xd),r.\u0275\u0275directiveInject(Ok),r.\u0275\u0275directiveInject(XO))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-render-panel"]],viewQuery:function(t,e){var o;1&t&&(r.\u0275\u0275viewQuery(DE,7),r.\u0275\u0275viewQuery(UG,7),r.\u0275\u0275viewQuery(xy,5)),2&t&&(r.\u0275\u0275queryRefresh(o=r.\u0275\u0275loadQuery())&&(e.panelHost=o.first),r.\u0275\u0275queryRefresh(o=r.\u0275\u0275loadQuery())&&(e.paneContainer=o.first),r.\u0275\u0275queryRefresh(o=r.\u0275\u0275loadQuery())&&(e.renderedPanes=o))},hostVars:5,hostBindings:function(t,e){2&t&&(r.\u0275\u0275attribute("data-index",e.indexPosition$.value),r.\u0275\u0275classMap(e.indexPositionClass),r.\u0275\u0275classProp("panel",!0))},inputs:{panel:"panel",contexts:"contexts",nested:"nested",displayType:"displayType",resolvedContext:"resolvedContext",contextChanged:"contextChanged",contextsChanged:"contextsChanged",indexPosition:"indexPosition",ancestory:"ancestory",css:"css",listeners:"listeners"},outputs:{heightChange:"heightChange"},features:[r.\u0275\u0275ProvidersFeature([{provide:v.JU,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0},{provide:v.SD,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0}]),r.\u0275\u0275NgOnChangesFeature],decls:5,vars:2,consts:[[1,"render-panel",3,"formGroup"],["panes",""],["classifiedsUiPaneContentHost",""],[4,"ngIf"],[3,"ngSwitch"],[4,"ngSwitchCase"],["formArrayName","panes"],[3,"formControlName","pluginName","settings","name","label","originPane","contexts","displayType","resolvedContext","indexPosition","css","listeners","ancestory","panes","originPanes",4,"ngFor","ngForOf"],[3,"formControlName","pluginName","settings","name","label","originPane","contexts","displayType","resolvedContext","indexPosition","css","listeners","ancestory","panes","originPanes"],[3,"pluginName","settings","name","label","originPane","contexts","linkedPageId","displayType","resolvedContext","indexPosition","css","listeners","ancestory","panes","originPanes",4,"ngFor","ngForOf"],[3,"pluginName","settings","name","label","originPane","contexts","linkedPageId","displayType","resolvedContext","indexPosition","css","listeners","ancestory","panes","originPanes"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"div",0,1),r.\u0275\u0275elementContainerStart(2),r.\u0275\u0275template(3,zG,0,0,"ng-template",2),r.\u0275\u0275elementContainerEnd(),r.\u0275\u0275template(4,KG,4,3,"ng-container",3),r.\u0275\u0275elementEnd()),2&t&&(r.\u0275\u0275property("formGroup",e.panelForm),r.\u0275\u0275advance(4),r.\u0275\u0275property("ngIf",!e.stylePlugin&&e.resolvedPanes))},dependencies:[E.NgForOf,E.NgIf,E.NgSwitch,E.NgSwitchCase,v.JJ,v.JL,v.sg,v.u,v.CE,DE,xy],styles:["[_nghost-%COMP%]{height:100%}.render-panel[_ngcontent-%COMP%]{height:100%}"]}),a}(),Vk=function(){var a=(0,_.Z)(function n(t){(0,p.Z)(this,n),t.register(new CO({id:"panels_form_submit",title:"Submit Panels Form"})),t.register(new CO({id:"panels_dialog",title:"Open Panels Dialog"}))});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(bO))},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({imports:[E.CommonModule,v.u5,Nn.UtilsModule,v.UX,Dk,E3]}),a}(),Bc={},by={},T3={},I3=!1;function nV(a,n){return Hk.apply(this,arguments)}function Hk(){return Hk=Lt((0,He.Z)().mark(function a(n,t){var e,s;return(0,He.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=by[n],c.next=3,e.get(t);case 3:return s=(0,c.sent)(),c.abrupt("return",s);case 6:case"end":return c.stop()}},a)})),Hk.apply(this,arguments)}function O3(a,n){return qk.apply(this,arguments)}function qk(){return qk=Lt((0,He.Z)().mark(function a(n,t){return(0,He.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!T3[t]){o.next=2;break}return o.abrupt("return",n);case 2:if(I3){o.next=6;break}return o.next=5,S.I("default");case 5:I3=!0;case 6:return o.next=8,n.init(S.S.default);case 8:return T3[t]=!0,o.abrupt("return",n);case 10:case"end":return o.stop()}},a)})),qk.apply(this,arguments)}function Kk(a,n){return Wk.apply(this,arguments)}function Wk(){return Wk=Lt((0,He.Z)().mark(function a(n,t){var e,o,s;return(0,He.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if("string"!=typeof n){c.next=7;break}return e=n,c.next=4,F3(e,t);case 4:case 11:return c.abrupt("return",c.sent);case 7:if("script"!==n.type){c.next=14;break}return o=n,c.next=11,F3(o.remoteEntry,o.remoteName);case 14:if("module"!==n.type){c.next=18;break}return s=n,c.next=18,rV(s.remoteEntry);case 18:case"end":return c.stop()}},a)})),Wk.apply(this,arguments)}function rV(a){return Xk.apply(this,arguments)}function Xk(){return Xk=Lt((0,He.Z)().mark(function a(n){return(0,He.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!by[n]){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return e.next=4,import(n).then(function(o){O3(o,n),by[n]=o});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},a)})),Xk.apply(this,arguments)}function F3(a,n){return Qk.apply(this,arguments)}function Qk(){return Qk=Lt((0,He.Z)().mark(function a(n,t){return(0,He.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",new Promise(function(s,u){if(by[t])s();else{var c=document.createElement("script");c.src=n,c.onerror=u,c.onload=function(){var l=window[t];O3(l,t),by[t]=l,s()},document.body.appendChild(c)}}));case 1:case"end":return o.stop()}},a)})),Qk.apply(this,arguments)}function rf(a,n){return Jk.apply(this,arguments)}function Jk(){return Jk=Lt((0,He.Z)().mark(function a(n,t){var e,o,s,u,c,l;return(0,He.Z)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if((u="string"==typeof n?{type:"manifest",remoteName:n,exposedModule:t}:n).type||(c=Object.keys(Bc).length>0,u.type=c?"manifest":"script"),"manifest"!==u.type){C.next=10;break}if(l=Bc[u.remoteName]){C.next=6;break}throw new Error("Manifest does not contain "+u.remoteName);case 6:u={type:l.type,exposedModule:u.exposedModule,remoteEntry:l.remoteEntry,remoteName:"script"===l.type?u.remoteName:void 0},s=l.remoteEntry,C.next=11;break;case 10:s=u.remoteEntry;case 11:if("script"===u.type?(e={type:"script",remoteEntry:u.remoteEntry,remoteName:u.remoteName},o=u.remoteName):"module"===u.type&&(e={type:"module",remoteEntry:u.remoteEntry},o=u.remoteEntry),!s){C.next=15;break}return C.next=15,Kk(e);case 15:return C.next=17,nV(o,u.exposedModule);case 17:return C.abrupt("return",C.sent);case 18:case"end":return C.stop()}},a)})),Jk.apply(this,arguments)}var TE=S(52090),IE=S(44039),N3=S(43516),ss=S(21669);function aV(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"a",4),r.\u0275\u0275listener("click",function(){var u=r.\u0275\u0275restoreView(t).$implicit,c=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(c.onEntitySelected(u.value))}),r.\u0275\u0275elementStart(1,"span",5),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd()()}if(2&a){var e=n.$implicit;r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(e.value.title)}}function sV(a,n){}function uV(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"classifieds-ui-dynamic-content-viewer",1),r.\u0275\u0275listener("docRendered",function(){r.\u0275\u0275restoreView(t);var s=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(s.onDocRendered())}),r.\u0275\u0275pipe(1,"async"),r.\u0275\u0275elementEnd()}if(2&a){var e=r.\u0275\u0275nextContext();r.\u0275\u0275property("content",r.\u0275\u0275pipeBind1(1,1,e.content$))}}function cV(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"classifieds-ui-dynamic-content-viewer",1),r.\u0275\u0275listener("docRendered",function(){r.\u0275\u0275restoreView(t);var s=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(s.onDocRendered())}),r.\u0275\u0275pipe(1,"async"),r.\u0275\u0275elementEnd()}if(2&a){var e=r.\u0275\u0275nextContext();r.\u0275\u0275property("content",r.\u0275\u0275pipeBind1(1,1,e.content$))}}function lV(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"a",4),r.\u0275\u0275listener("click",function(){var u=r.\u0275\u0275restoreView(t).$implicit,c=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(c.onStyleSelected(u.value))}),r.\u0275\u0275elementStart(1,"span",5),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd()()}if(2&a){var e=n.$implicit;r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(e.value.title)}}function dV(a,n){}var fV=["contentEditor"];function pV(a,n){1&a&&r.\u0275\u0275elementContainer(0)}function hV(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",19),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(t);var o=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(o.onOverrideClick())}),r.\u0275\u0275text(1,"Override"),r.\u0275\u0275elementEnd()}}function mV(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",19),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(t);var o=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(o.onRemoveOverrideClick())}),r.\u0275\u0275text(1,"Remove Override"),r.\u0275\u0275elementEnd()}}function gV(a,n){}var OE=function(n){return{settings:n}},vV=function(n){return{visible:n}};function _V(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",9)(1,"div",10)(2,"div",11)(3,"button",12)(4,"mat-icon"),r.\u0275\u0275text(5,"more_vert"),r.\u0275\u0275elementEnd()()(),r.\u0275\u0275elementStart(6,"mat-expansion-panel",13),r.\u0275\u0275listener("afterCollapse",function(){r.\u0275\u0275restoreView(t);var c=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(c.onAfterCollapse())})("afterExpand",function(){r.\u0275\u0275restoreView(t);var c=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(c.onAfterExpand())}),r.\u0275\u0275elementStart(7,"mat-expansion-panel-header")(8,"mat-panel-title"),r.\u0275\u0275text(9),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(10,"div",14)(11,"ul"),r.\u0275\u0275template(12,pV,1,0,"ng-container",15),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(13,"div",16),r.\u0275\u0275template(14,hV,2,0,"button",17),r.\u0275\u0275template(15,mV,2,0,"button",17),r.\u0275\u0275elementContainerStart(16),r.\u0275\u0275template(17,gV,0,0,"ng-template",18),r.\u0275\u0275elementContainerEnd(),r.\u0275\u0275elementEnd()()()()}if(2&a){var e=r.\u0275\u0275nextContext(),o=r.\u0275\u0275reference(6),s=r.\u0275\u0275reference(2);r.\u0275\u0275advance(3),r.\u0275\u0275property("matMenuTriggerFor",o),r.\u0275\u0275advance(6),r.\u0275\u0275textInterpolate2("",e.contentPlugin.title," : ",e.name,""),r.\u0275\u0275advance(1),r.\u0275\u0275property("hidden",e.preview),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngTemplateOutlet",s)("ngTemplateOutletContext",r.\u0275\u0275pureFunction1(9,OE,e.settings)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction1(11,vV,e.preview)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.displayOverride&&!e.hasOverride),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.displayOverride&&e.hasOverride)}}function yV(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"span"),r.\u0275\u0275text(1),r.\u0275\u0275pipe(2,"attribute"),r.\u0275\u0275elementEnd()),2&a){var t=r.\u0275\u0275nextContext().$implicit,e=r.\u0275\u0275nextContext().settings;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(r.\u0275\u0275pipeBind2(2,1,e,t.name))}}function xV(a,n){1&a&&r.\u0275\u0275elementContainer(0)}function bV(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"ul"),r.\u0275\u0275template(1,xV,1,0,"ng-container",15),r.\u0275\u0275elementEnd()),2&a){var t=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275nextContext(2);var e=r.\u0275\u0275reference(2);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngTemplateOutlet",e)("ngTemplateOutletContext",r.\u0275\u0275pureFunction1(2,OE,t.attributes))}}function CV(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"li"),r.\u0275\u0275text(1),r.\u0275\u0275template(2,yV,3,4,"span",21),r.\u0275\u0275template(3,bV,2,4,"ul",21),r.\u0275\u0275elementEnd()),2&a){var t=n.$implicit,e=r.\u0275\u0275nextContext().settings;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",t.displayName,": "),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!t.attributes||0==t.attributes.length),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.attributes&&t.attributes.length>0)}}function wV(a,n){1&a&&r.\u0275\u0275template(0,CV,4,3,"li",20),2&a&&r.\u0275\u0275property("ngForOf",n.settings)}function SV(a,n){}function EV(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",22)(1,"classifieds-ui-content-editor",23,24),r.\u0275\u0275listener("nestedUpdate",function(s){r.\u0275\u0275restoreView(t);var u=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(u.onNestedUpdate(s))})("delete",function(){r.\u0275\u0275restoreView(t);var s=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(s.onDeleteClick())})("rules",function(){r.\u0275\u0275restoreView(t);var s=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(s.onRulesClick())})("props",function(){r.\u0275\u0275restoreView(t);var s=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(s.onPropsClick())}),r.\u0275\u0275template(3,SV,0,0,"ng-template",null,25,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementEnd()()}if(2&a){var e=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("panelPage",e.panelPage)("savable",!1)("nested",!0)("locked",e.locked)("contexts",e.contexts)("rootContext",e.rootContext)("ancestory",e.paneAncestoryWithSelf)}}function PV(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",26),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(t);var s=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(s.onPreviewClick())}),r.\u0275\u0275text(1,"Preview"),r.\u0275\u0275elementEnd()}if(2&a){var e=r.\u0275\u0275nextContext();r.\u0275\u0275property("disabled",e.locked)}}function kV(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",27),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(t);var o=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(o.onDisablePreviewClick())}),r.\u0275\u0275text(1,"Disable Preview"),r.\u0275\u0275elementEnd()}}var AV=["extraActionsArea"],RV=["contextsMenuTpl"],DV=["editablePaneTpl"],TV=["panes"];function IV(a,n){}var Z3=function(n){return{nested:n}};function OV(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"form",7),r.\u0275\u0275listener("ngSubmit",function(){r.\u0275\u0275restoreView(t);var s=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(s.submit())}),r.\u0275\u0275elementContainerStart(1),r.\u0275\u0275template(2,IV,0,0,"ng-template",8),r.\u0275\u0275elementContainerEnd(),r.\u0275\u0275elementEnd()}if(2&a){var e=r.\u0275\u0275nextContext();r.\u0275\u0275property("formGroup",e.contentForm)("ngClass",r.\u0275\u0275pureFunction1(2,Z3,e.nested))}}function FV(a,n){}function MV(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"div",9),r.\u0275\u0275elementContainerStart(1),r.\u0275\u0275template(2,FV,0,0,"ng-template",8),r.\u0275\u0275elementContainerEnd(),r.\u0275\u0275elementEnd()),2&a){var t=r.\u0275\u0275nextContext();r.\u0275\u0275property("formGroup",t.contentForm)("ngClass",r.\u0275\u0275pureFunction1(2,Z3,t.nested))}}function BV(a,n){1&a&&r.\u0275\u0275element(0,"div",12)}function NV(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"classifieds-ui-editable-pane",10),r.\u0275\u0275listener("delete",function(){var c=r.\u0275\u0275restoreView(t),l=c.i,m=c.j,C=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(C.onDeletePane(l,m))})("rules",function(){var c=r.\u0275\u0275restoreView(t),l=c.i,m=c.j,C=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(C.onRulesPane(l,m))})("nestedUpdate",function(c){var l=r.\u0275\u0275restoreView(t),m=l.i,C=l.j,T=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(T.onNestedUpdate(c,m,C))})("rendererOverride",function(){var c=r.\u0275\u0275restoreView(t),l=c.i,m=c.j,C=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(C.onOverrideRenderer(l,m))})("removeRendererOverride",function(){var c=r.\u0275\u0275restoreView(t),l=c.i,m=c.j,C=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(C.onRemoveOverrideRenderer(l,m))})("edit",function(){var c=r.\u0275\u0275restoreView(t),l=c.i,m=c.j,C=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(C.onPaneEdit(l,m))})("props",function(){var c=r.\u0275\u0275restoreView(t),l=c.i,m=c.j,C=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(C.editPaneProps(l,m))})("delete",function(){var c=r.\u0275\u0275restoreView(t),l=c.i,m=c.j,C=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(C.onPaneDelete(l,m))}),r.\u0275\u0275template(1,BV,1,0,"div",11),r.\u0275\u0275elementEnd()}if(2&a){var e=n.i,o=n.j,s=r.\u0275\u0275nextContext();r.\u0275\u0275property("panelIndex",e)("paneIndex",o)("name",s.panelPaneName(e,o))("label",s.panelPaneLabel(e,o))("locked",s.panelPaneLocked(e,o))("contexts",s.contexts)("pluginName",s.panelPanePlugin(e,o))("settings",s.panelPaneSettings(e,o))("ancestory",s.ancestory)}}function ZV(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"button",13),r.\u0275\u0275text(1,"( x )"),r.\u0275\u0275elementEnd()),2&a){r.\u0275\u0275nextContext();var t=r.\u0275\u0275reference(8);r.\u0275\u0275property("matMenuTriggerFor",t)}}function LV(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",5),r.\u0275\u0275listener("click",function(){var u=r.\u0275\u0275restoreView(t).$implicit,c=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(c.onEditContext(u.name))}),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()}if(2&a){var e=n.$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(e.name)}}function jV(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"a",1),r.\u0275\u0275listener("click",function(){var u=r.\u0275\u0275restoreView(t).$implicit,c=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(c.onItemSelect(u.value))}),r.\u0275\u0275elementStart(1,"span",2),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd()()}if(2&a){var e=n.$implicit;r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(e.value.name)}}function $V(a,n){1&a&&r.\u0275\u0275elementContainer(0)}function UV(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"span"),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&a){var t=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1("",t.displayName,": ")}}function zV(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"span"),r.\u0275\u0275text(1),r.\u0275\u0275pipe(2,"attribute"),r.\u0275\u0275elementEnd()),2&a){var t=r.\u0275\u0275nextContext().$implicit,e=r.\u0275\u0275nextContext().settings;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(r.\u0275\u0275pipeBind2(2,1,e,t.name))}}function GV(a,n){1&a&&r.\u0275\u0275elementContainer(0)}function VV(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"div"),r.\u0275\u0275template(1,GV,1,0,"ng-container",4),r.\u0275\u0275elementEnd()),2&a){var t=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275nextContext(2);var e=r.\u0275\u0275reference(3);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngTemplateOutlet",e)("ngTemplateOutletContext",r.\u0275\u0275pureFunction1(2,OE,t.attributes))}}function HV(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"div"),r.\u0275\u0275template(1,UV,2,1,"span",2),r.\u0275\u0275template(2,zV,3,4,"span",2),r.\u0275\u0275template(3,VV,2,4,"div",2),r.\u0275\u0275elementEnd()),2&a){var t=n.$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",0==t.attributes.length),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",0==t.attributes.length),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",t.attributes.length>0)}}function qV(a,n){1&a&&r.\u0275\u0275template(0,HV,4,3,"div",6),2&a&&r.\u0275\u0275property("ngForOf",n.settings)}function KV(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"div"),r.\u0275\u0275template(1,$V,1,0,"ng-container",4),r.\u0275\u0275template(2,qV,1,1,"ng-template",null,5,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementEnd()),2&a){var t=r.\u0275\u0275reference(3),e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngTemplateOutlet",t)("ngTemplateOutletContext",r.\u0275\u0275pureFunction1(2,OE,e.attributeValues))}}function WV(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"div",7),r.\u0275\u0275element(1,"classifieds-ui-attributes-builder",8),r.\u0275\u0275elementEnd()),2&a){var t=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("formGroup",t.controlContainer.control),r.\u0275\u0275advance(1),r.\u0275\u0275property("attributes",t.attributes)("attributeValues",t.attributeValues)}}function XV(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"div"),r.\u0275\u0275template(1,KV,4,4,"div",2),r.\u0275\u0275template(2,WV,2,3,"div",3),r.\u0275\u0275elementEnd()),2&a){var t=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","page"==t.displayType),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","form"==t.displayType)}}function QV(a,n){if(1&a&&r.\u0275\u0275element(0,"classifieds-ui-snippet-pane-renderer",9),2&a){var t=r.\u0275\u0275nextContext();r.\u0275\u0275property("settings",t.rendererSettings)("tokens",t.tokens)}}function JV(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"ngx-dropzone-image-preview",2),r.\u0275\u0275listener("removed",function(s){r.\u0275\u0275restoreView(t);var u=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(u.onRemoveMedia(s))}),r.\u0275\u0275elementStart(1,"ngx-dropzone-label"),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd()()}if(2&a){var e=r.\u0275\u0275nextContext();r.\u0275\u0275property("removable",!0)("file",e.media),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate2("",e.media.name," (",e.media.type,")")}}var YV=["img"];function eH(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"mat-option",26),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&a){var t=n.$implicit;r.\u0275\u0275property("value",t),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(t)}}function tH(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"div")(1,"mat-form-field",23)(2,"mat-label"),r.\u0275\u0275text(3,"Pane"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"mat-select",24),r.\u0275\u0275template(5,eH,2,2,"mat-option",25),r.\u0275\u0275elementEnd()()()),2&a){var t=n.index,e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275property("formGroupName",t),r.\u0275\u0275advance(4),r.\u0275\u0275property("ngForOf",e.panes)}}function nH(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",20)(1,"button",21),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(t);var s=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(s.addPane())}),r.\u0275\u0275text(2,"Add Pane"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"div"),r.\u0275\u0275template(4,tH,6,2,"div",22),r.\u0275\u0275elementEnd()()}if(2&a){var e=r.\u0275\u0275nextContext();r.\u0275\u0275advance(4),r.\u0275\u0275property("ngForOf",e.bindings.controls)}}function rH(a,n){1&a&&(r.\u0275\u0275elementStart(0,"div",27)(1,"mat-form-field"),r.\u0275\u0275element(2,"input",28),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"mat-form-field"),r.\u0275\u0275element(4,"input",29),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(5,"mat-form-field"),r.\u0275\u0275element(6,"input",30),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(7,"div")(8,"mat-checkbox",31),r.\u0275\u0275text(9,"Multiple"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(10,"mat-form-field"),r.\u0275\u0275element(11,"input",32),r.\u0275\u0275elementEnd()())}function iH(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"mat-option",7),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&a){var t=n.$implicit;r.\u0275\u0275property("value",t.value),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(t.label)}}function oH(a,n){if(1&a&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"mat-form-field")(2,"mat-label"),r.\u0275\u0275text(3),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"mat-select",5),r.\u0275\u0275template(5,iH,2,2,"mat-option",6),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementContainerEnd()),2&a){var t=r.\u0275\u0275nextContext();r.\u0275\u0275advance(3),r.\u0275\u0275textInterpolate(t.label),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngForOf",t.options)}}function aH(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"mat-radio-button",7),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&a){var t=n.$implicit;r.\u0275\u0275property("value",t.value),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(t.label)}}function sH(a,n){if(1&a&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"div")(2,"label"),r.\u0275\u0275text(3),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"mat-radio-group",5),r.\u0275\u0275template(5,aH,2,2,"mat-radio-button",6),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementContainerEnd()),2&a){var t=r.\u0275\u0275nextContext();r.\u0275\u0275advance(3),r.\u0275\u0275textInterpolate(t.label),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngForOf",t.options)}}function uH(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"div")(1,"div",9)(2,"mat-checkbox",10),r.\u0275\u0275text(3),r.\u0275\u0275elementEnd()()()),2&a){var t=n.$implicit,e=n.index;r.\u0275\u0275advance(1),r.\u0275\u0275property("formGroupName",e),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(t.label)}}function cH(a,n){if(1&a&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"div")(2,"div",1),r.\u0275\u0275template(3,uH,4,2,"div",8),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementContainerEnd()),2&a){var t=r.\u0275\u0275nextContext();r.\u0275\u0275advance(3),r.\u0275\u0275property("ngForOf",t.options)}}function lH(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"mat-option",7),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&a){var t=n.$implicit;r.\u0275\u0275property("value",t),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(t.label)}}function dH(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"mat-form-field"),r.\u0275\u0275element(2,"input",11),r.\u0275\u0275elementStart(3,"mat-autocomplete",12,13),r.\u0275\u0275listener("optionSelected",function(u){r.\u0275\u0275restoreView(t);var c=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(c.onOptionSelected(u))}),r.\u0275\u0275template(5,lH,2,2,"mat-option",6),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementContainerEnd()}if(2&a){var e=r.\u0275\u0275reference(4),o=r.\u0275\u0275nextContext();r.\u0275\u0275advance(2),r.\u0275\u0275property("placeholder",o.label)("matAutocomplete",e),r.\u0275\u0275advance(1),r.\u0275\u0275property("displayWith",o.displayAuto),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngForOf",o.options)}}function fH(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"mat-option",8),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&a){var t=n.$implicit;r.\u0275\u0275property("value",t.name),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(t.name)}}function pH(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",5),r.\u0275\u0275element(1,"druid-panels-panelpage-linkedlist",6),r.\u0275\u0275elementStart(2,"button",3),r.\u0275\u0275listener("click",function(){var c=r.\u0275\u0275restoreView(t).index,l=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(l.onRemoveMapping(c))}),r.\u0275\u0275text(3,"Remove"),r.\u0275\u0275elementEnd()()}if(2&a){var e=n.index,o=r.\u0275\u0275nextContext();r.\u0275\u0275property("formGroupName",e),r.\u0275\u0275advance(1),r.\u0275\u0275property("panes",o.panes)}}function hH(a,n){if(1&a&&r.\u0275\u0275element(0,"classifieds-ui-render-pane",4),2&a){var t=r.\u0275\u0275nextContext().index,e=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("pluginName",e.panes[2*t].contentPlugin)("settings",e.panes[2*t].settings)("contexts",e.panes[2*t].contexts)}}function mH(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"mat-tab"),r.\u0275\u0275template(1,hH,1,3,"ng-template",3),r.\u0275\u0275element(2,"classifieds-ui-render-pane",4),r.\u0275\u0275elementEnd()),2&a){var t=n.index,e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(2),r.\u0275\u0275property("pluginName",e.panes[2*t+1].contentPlugin)("settings",e.panes[2*t+1].settings)("contexts",e.panes[2*t+1].contexts)}}function gH(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"mat-tab-group",1),r.\u0275\u0275template(1,mH,3,3,"mat-tab",2),r.\u0275\u0275elementEnd()),2&a){var t=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("for",t.panes.length/2)}}function vH(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"mat-tab",6),r.\u0275\u0275element(1,"classifieds-ui-render-pane",4),r.\u0275\u0275elementEnd()),2&a){var t=n.$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275property("pluginName",t.contentPlugin)("settings",t.settings)("contexts",t.contexts)}}function _H(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"mat-tab-group",1),r.\u0275\u0275template(1,vH,2,3,"mat-tab",5),r.\u0275\u0275elementEnd()),2&a){var t=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",t.panes)}}function yH(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"div",2),r.\u0275\u0275element(1,"classifieds-ui-render-pane",3),r.\u0275\u0275elementEnd()),2&a){var t=n.$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275property("pluginName",t.contentPlugin)("settings",t.settings)("contexts",t.contexts)("resolvedContext",t.resolvedContext)}}function xH(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"th",7),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&a){var t=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(t)}}function bH(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"td",8),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&a){var t=n.$implicit,e=r.\u0275\u0275nextContext().$implicit,o=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(o.rowData(e,t))}}function CH(a,n){1&a&&(r.\u0275\u0275elementContainerStart(0,4),r.\u0275\u0275template(1,xH,2,1,"th",5),r.\u0275\u0275template(2,bH,2,1,"td",6),r.\u0275\u0275elementContainerEnd()),2&a&&r.\u0275\u0275property("matColumnDef",n.$implicit)}function wH(a,n){1&a&&r.\u0275\u0275element(0,"tr",9)}function SH(a,n){1&a&&r.\u0275\u0275element(0,"tr",10)}var uA,EH={GridLayout:{entityName:"GridLayout"},PanelPageForm:{crud:{panelpageform_serialize:{plugins:{idb_keyval:{params:{prefix:"panelpageform__"}}}}}}},FE=function(){var a=(0,_.Z)(function n(t){(0,p.Z)(this,n),this.viewContainerRef=t});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(r.ViewContainerRef))},a.\u0275dir=r.\u0275\u0275defineDirective({type:a,selectors:[["","classifiedsUiContentSelectionHost",""]]}),a}(),PH=function(){var a=function(){function n(t,e,o,s,u,c){(0,p.Z)(this,n),this.data=t,this.bottomSheetRef=e,this.dialog=o,this.componentFactoryResolver=s,this.fb=u,this.contentPluginManager=c,this.selectedIndex=0}return(0,_.Z)(n,[{key:"ngOnInit",value:function(){this.contentPlugins=this.contentPluginManager.getPlugins()}},{key:"onEntitySelected",value:function(e){var o=this;this.plugin=e,void 0!==this.plugin.selectionComponent?(this.selectedIndex=1,this.renderSelectionComponent()):void 0!==this.plugin.editorComponent?(this.bottomSheetRef.dismiss(),e.handler?this.plugin.handler.editorOptions([]).subscribe(function(u){o.dialog.open(o.plugin.editorComponent,(0,b.Z)({data:{panelFormGroup:o.data.panelForm,panelIndex:o.data.panelIndex,pane:void 0,paneIndex:void 0,contexts:o.data.contexts,contentAdded:o.data.contentAdded,plugin:e}},u.fullscreen?{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%"}:{}))}):this.dialog.open(this.plugin.editorComponent,{data:{panelFormGroup:this.data.panelForm,panelIndex:this.data.panelIndex,pane:void 0,paneIndex:void 0,contexts:this.data.contexts,contentAdded:this.data.contentAdded}})):this.data.panelForm.get("panes").push(this.fb.group({contentPlugin:this.fb.control(this.plugin.id),name:this.fb.control(""),label:this.fb.control(""),settings:this.fb.array([])}))}},{key:"renderSelectionComponent",value:function(){var e=this.componentFactoryResolver.resolveComponentFactory(this.plugin.selectionComponent),o=this.selectionHost.viewContainerRef;o.clear();var s=o.createComponent(e);s.instance.panelFormGroup=this.data.panelForm,s.instance.contexts=this.data.contexts}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Dc.MAT_BOTTOM_SHEET_DATA),r.\u0275\u0275directiveInject(Dc.MatBottomSheetRef),r.\u0275\u0275directiveInject(Jt.MatLegacyDialog),r.\u0275\u0275directiveInject(r.ComponentFactoryResolver),r.\u0275\u0275directiveInject(v.QS),r.\u0275\u0275directiveInject(fn.ContentPluginManager))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-content-selector"]],viewQuery:function(t,e){var o;1&t&&r.\u0275\u0275viewQuery(FE,7),2&t&&r.\u0275\u0275queryRefresh(o=r.\u0275\u0275loadQuery())&&(e.selectionHost=o.first)},decls:10,vars:6,consts:[[1,"content-selector-wrapper"],[3,"selectedIndex"],["mat-list-item","","mat-list-item","",3,"click",4,"ngFor","ngForOf"],["classifiedsUiContentSelectionHost",""],["mat-list-item","","mat-list-item","",3,"click"],["mat-line",""]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"div",0)(1,"mat-tab-group",1)(2,"mat-tab")(3,"mat-nav-list"),r.\u0275\u0275template(4,aV,3,1,"a",2),r.\u0275\u0275pipe(5,"keyvalue"),r.\u0275\u0275pipe(6,"async"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(7,"mat-tab"),r.\u0275\u0275elementContainerStart(8),r.\u0275\u0275template(9,sV,0,0,"ng-template",3),r.\u0275\u0275elementContainerEnd(),r.\u0275\u0275elementEnd()()()),2&t&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("selectedIndex",e.selectedIndex),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngForOf",r.\u0275\u0275pipeBind1(5,2,r.\u0275\u0275pipeBind1(6,4,e.contentPlugins))))},dependencies:[E.NgForOf,vE.MatLine,Eu.MatLegacyNavList,Eu.MatLegacyListItem,is.MatLegacyTabGroup,is.MatLegacyTab,FE,E.AsyncPipe,E.KeyValuePipe],styles:[".content-selector-wrapper[_ngcontent-%COMP%]     .mat-tab-header{display:none}"]}),a}(),Nc=function(){var a=function(){function n(t,e){(0,p.Z)(this,n),this.attributeSerializer=t,this.tokenizrService=e,this.types=["text/markdown","text/html"]}return(0,_.Z)(n,[{key:"handleFile",value:function(e){var o=this;return new W.y(function(s){var u=new FileReader;u.onload=function(){s.next(o.buildSettings(new Ec({contentType:e.type,content:"".concat(u.result)}))),s.complete()},u.readAsText(e)})}},{key:"handlesType",value:function(e){return void 0!==this.types.find(function(o){return o===e})}},{key:"implementsRendererOverride",value:function(){return!1}},{key:"hasRendererOverride",value:function(e){return(0,je.of)(!1)}},{key:"isDynamic",value:function(e){return!1}},{key:"isData",value:function(e){return!1}},{key:"getBindings",value:function(e,o,s){var u=this;return"context"===o?this.toObject(e).pipe((0,Ce.U)(function(c){return u.tokenizrService.discoverTokens(c.content).map(function(m){return new fn.ContentBinding({id:m,type:"context"})})})):(0,je.of)([])}},{key:"fetchDynamicData",value:function(e,o){return(0,je.of)(new pr)}},{key:"buildDynamicItems",value:function(e,o){return(0,je.of)([])}},{key:"toObject",value:function(e){return(0,je.of)(new Ec(this.attributeSerializer.deserializeAsObject(e)))}},{key:"buildSettings",value:function(e){return this.attributeSerializer.serialize(e,"root").attributes}},{key:"stateDefinition",value:function(e){return(0,je.of)({})}},{key:"editorOptions",value:function(e){return(0,je.of)(new fn.ContentPluginEditorOptions({fullscreen:!0}))}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Bt.AttributeSerializerService),r.\u0275\u0275inject(Pr))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),L3=function(){var a=function(){function n(t,e,o,s){var u=this;(0,p.Z)(this,n),this.hostEl=t,this.handler=e,this.tokenizerService=o,this.markdownService=s,this.contexts=[],this.afterContentInit$=new se.x,this.content="",this.content$=new z.X(""),this.settings$=new z.X([]),this.snippet$=new z.X(void 0),this.resolvedContext$=new z.X(void 0),this.docRendered$=new se.x,this.contentSub=(0,Sr.a)([this.afterContentInit$,this.content$,this.snippet$,this.docRendered$]).subscribe(function(c){var T=(0,g.Z)(c,3)[2];T&&T.jsScript&&""!==T.jsScript&&setTimeout(function(){return u.appendScript(T.jsScript)})}),this.renderContentSub=(0,Sr.a)([this.settings$,this.resolvedContext$]).pipe((0,st.w)(function(c){var l=(0,g.Z)(c,2);return u.handler.toObject(l[0])}),(0,st.w)(function(c){return u.resolveContexts().pipe((0,Ce.U)(function(l){return[c,l]}))})).subscribe(function(c){var l=(0,g.Z)(c,2),m=l[0],C=l[1];void 0!==C&&(u.tokens=C),u.contentType=m.contentType,u.snippet$.next(m);var T=u.replaceTokens(m.content),B=m.contentType&&-1!==m.contentType.indexOf("markdown")?u.markdownService.parse(T):T;u.content$.next(B)})}return(0,_.Z)(n,[{key:"settings",set:function(e){this.settings$.next(e)}},{key:"resolvedContext",set:function(e){this.resolvedContext$.next(e)}},{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(){console.log("pane changed")}},{key:"ngAfterContentInit",value:function(){this.afterContentInit$.next(),this.afterContentInit$.complete()}},{key:"replaceTokens",value:function(e){return void 0!==this.tokens&&this.tokens.forEach(function(o,s){e=e.split("[".concat(s,"]")).join("".concat(o))}),e}},{key:"resolveContexts",value:function(){var e=this;return new W.y(function(o){var s=new Map;if(e.resolvedContext$.value)for(var u in e.resolvedContext$.value)s=new Map([].concat((0,y.Z)(s),(0,y.Z)(e.tokenizerService.generateGenericTokens(e.resolvedContext$.value[u],"_root"===u?"":u))));o.next(s),o.complete()})}},{key:"appendScript",value:function(e){var o=document.createElement("script");o.type="text/javascript",o.appendChild(document.createTextNode(e)),this.hostEl.nativeElement.appendChild(o),console.log("add script")}},{key:"onDocRendered",value:function(){this.docRendered$.next(void 0)}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(r.ElementRef),r.\u0275\u0275directiveInject(Nc),r.\u0275\u0275directiveInject(Pr),r.\u0275\u0275directiveInject(pE))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-snippet-pane-renderer"]],inputs:{settings:"settings",contexts:"contexts",tokens:"tokens",resolvedContext:"resolvedContext"},features:[r.\u0275\u0275NgOnChangesFeature],decls:2,vars:2,consts:[[3,"content","docRendered",4,"ngIf"],[3,"content","docRendered"]],template:function(t,e){1&t&&(r.\u0275\u0275template(0,uV,2,3,"classifieds-ui-dynamic-content-viewer",0),r.\u0275\u0275template(1,cV,2,3,"classifieds-ui-dynamic-content-viewer",0)),2&t&&(r.\u0275\u0275property("ngIf","text/markdown"==e.contentType),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","text/html"==e.contentType))},dependencies:[E.NgIf,Nn.DynamicContentViewer,E.AsyncPipe]}),a}(),Zc=function(){var a=function(){function n(t){(0,p.Z)(this,n),this.snippetHandler=t}return(0,_.Z)(n,[{key:"handleFile",value:function(e){return(0,je.of)([])}},{key:"handlesType",value:function(e){return!1}},{key:"implementsRendererOverride",value:function(){return!0}},{key:"hasRendererOverride",value:function(e){return this.rendererSnippet(e).pipe((0,Ce.U)(function(o){return void 0!==o}))}},{key:"isDynamic",value:function(e){return!1}},{key:"isData",value:function(e){return!1}},{key:"fetchDynamicData",value:function(e,o){return(0,je.of)(new pr)}},{key:"buildDynamicItems",value:function(e,o){return(0,je.of)([])}},{key:"getBindings",value:function(e,o,s){return(0,je.of)([])}},{key:"valueSettings",value:function(e){var o=[];return e.forEach(function(s){"value"===s.name&&o.push(s)}),o}},{key:"rendererSnippet",value:function(e){var s,o=this;return e.forEach(function(u){"_renderer"===u.name&&(s=o.snippetHandler.toObject(u.attributes))}),void 0!==s?s:(0,je.of)(void 0)}},{key:"rendererOverrideSettings",value:function(e){return[new Bt.AttributeValue({name:"_renderer",type:Bt.AttributeTypes.Complex,displayName:"Renderer Override",value:void 0,computedValue:void 0,intValue:0,attributes:this.snippetHandler.buildSettings(e)})]}},{key:"widgetSettings",value:function(e){return[new Bt.AttributeValue({name:"widget",type:e.schema.type,displayName:"Widget",value:e.name,computedValue:e.name,intValue:0,attributes:[]})]}},{key:"stateDefinition",value:function(e){return(0,je.of)({})}},{key:"editorOptions",value:function(e){return(0,je.of)(new fn.ContentPluginEditorOptions)}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Nc))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),kH=function(){var a=function(){function n(t,e,o,s,u){(0,p.Z)(this,n),this.data=t,this.dialogRef=e,this.tokenizerService=o,this.handler=s,this.fb=u}return(0,_.Z)(n,[{key:"ngOnInit",value:function(){this.tokens=this.tokenizerService.generateTokens(this.data.pane.settings)}},{key:"submitted",value:function(e){this.replaceRenderer(e),this.dialogRef.close()}},{key:"replaceRenderer",value:function(e){var o,s=this.handler.rendererOverrideSettings(e)[0],u=this.convertToGroup(s),c=this.data.panelFormGroup.get("panes").at(this.data.paneIndex).get("settings");c.controls.forEach(function(l,m){"_renderer"===l.get("name").value&&(o=m)}),void 0!==o?(c.insert(o,u),c.removeAt(o+1)):c.push(u)}},{key:"convertToGroup",value:function(e){var o=this,s=this.fb.group({name:new v.p4(e.name,v.kI.required),type:new v.p4(e.type,v.kI.required),displayName:new v.p4(e.displayName,v.kI.required),value:new v.p4(e.value,v.kI.required),computedValue:new v.p4(e.value,v.kI.required),attributes:new v.vC([])});return e.attributes&&e.attributes.length>0&&e.attributes.forEach(function(u){s.get("attributes").push(o.convertToGroup(u))}),s}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Jt.MAT_LEGACY_DIALOG_DATA),r.\u0275\u0275directiveInject(Jt.MatLegacyDialogRef),r.\u0275\u0275directiveInject(Pr),r.\u0275\u0275directiveInject(Zc),r.\u0275\u0275directiveInject(v.QS))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-rendering-editor"]],decls:2,vars:1,consts:[[3,"tokens","submitted"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"classifieds-ui-snippet-form",0),r.\u0275\u0275listener("submitted",function(s){return e.submitted(s)}),r.\u0275\u0275element(1,"classifieds-ui-snippet-form"),r.\u0275\u0275elementEnd()),2&t&&r.\u0275\u0275property("tokens",e.tokens)},dependencies:[hE]}),a}(),AH=function(){var a=function(){function n(t,e,o,s,u,c){(0,p.Z)(this,n),this.data=t,this.spm=e,this.bottomSheetRef=o,this.dialog=s,this.componentFactoryResolver=u,this.fb=c,this.selectedIndex=0}return(0,_.Z)(n,[{key:"ngOnInit",value:function(){this.stylePlugins=this.spm.getPlugins()}},{key:"onStyleSelected",value:function(e){this.plugin=e,void 0!==this.plugin.editorComponent?(this.bottomSheetRef.dismiss(),this.data.panelForm.get("stylePlugin").setValue(this.plugin.name),this.data.panelForm.get("styleTitle").setValue(this.plugin.title),this.data.panelForm.get("settings").clear(),this.dialog.open(this.plugin.editorComponent,{data:{panelFormGroup:this.data.panelForm,panelIndex:this.data.panelIndex,contexts:this.data.contexts}})):(this.data.panelForm.get("stylePlugin").setValue(this.plugin.name),this.data.panelForm.get("styleTitle").setValue(this.plugin.title),this.data.panelForm.get("settings").clear(),this.bottomSheetRef.dismiss())}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Dc.MAT_BOTTOM_SHEET_DATA),r.\u0275\u0275directiveInject(Xd),r.\u0275\u0275directiveInject(Dc.MatBottomSheetRef),r.\u0275\u0275directiveInject(Jt.MatLegacyDialog),r.\u0275\u0275directiveInject(r.ComponentFactoryResolver),r.\u0275\u0275directiveInject(v.QS))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-style-selector"]],viewQuery:function(t,e){var o;1&t&&r.\u0275\u0275viewQuery(FE,7),2&t&&r.\u0275\u0275queryRefresh(o=r.\u0275\u0275loadQuery())&&(e.selectionHost=o.first)},decls:10,vars:6,consts:[[1,"style-selector-wrapper"],[3,"selectedIndex"],["mat-list-item","","mat-list-item","",3,"click",4,"ngFor","ngForOf"],["classifiedsUiContentSelectionHost",""],["mat-list-item","","mat-list-item","",3,"click"],["mat-line",""]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"div",0)(1,"mat-tab-group",1)(2,"mat-tab")(3,"mat-nav-list"),r.\u0275\u0275template(4,lV,3,1,"a",2),r.\u0275\u0275pipe(5,"keyvalue"),r.\u0275\u0275pipe(6,"async"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(7,"mat-tab"),r.\u0275\u0275elementContainerStart(8),r.\u0275\u0275template(9,dV,0,0,"ng-template",3),r.\u0275\u0275elementContainerEnd(),r.\u0275\u0275elementEnd()()()),2&t&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("selectedIndex",e.selectedIndex),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngForOf",r.\u0275\u0275pipeBind1(5,2,r.\u0275\u0275pipeBind1(6,4,e.stylePlugins))))},dependencies:[E.NgForOf,vE.MatLine,Eu.MatLegacyNavList,Eu.MatLegacyListItem,is.MatLegacyTabGroup,is.MatLegacyTab,FE,E.AsyncPipe,E.KeyValuePipe],styles:[".style-selector-wrapper[_ngcontent-%COMP%]     .mat-tab-header{display:none}"]}),a}(),RH=function(){var a=function(){function n(t,e,o,s,u){(0,p.Z)(this,n),this.data=t,this.dialogRef=e,this.fb=o,this.inlineContextResolver=s,this.rulesParser=u,this.rulesForm=this.fb.group({rules:this.fb.control("")}),this.config={fields:{}}}return(0,_.Z)(n,[{key:"ngOnInit",value:function(){var e=this;this.inlineContextResolver.resolveMerged(this.data.contexts).subscribe(function(o){var s={};for(var u in o)e.rulesParser.buildFields(o[u],u).forEach(function(c,l){s[l]=c});e.config=(0,b.Z)((0,b.Z)({},e.config),{},{fields:s}),void 0!==e.data.rule&&e.rulesForm.get("rules").setValue(e.data.rule)})}},{key:"submit",value:function(){console.log("the rules"),console.log(this.rulesForm.get("rules").value),this.dialogRef.close(this.rulesForm.get("rules").value)}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Jt.MAT_LEGACY_DIALOG_DATA),r.\u0275\u0275directiveInject(Jt.MatLegacyDialogRef),r.\u0275\u0275directiveInject(v.QS),r.\u0275\u0275directiveInject(Gd),r.\u0275\u0275directiveInject(EO))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-rules-dialog"]],decls:6,vars:3,consts:[[1,"rest-form",3,"formGroup","ngSubmit"],["formControlName","rules",3,"config"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"form",0),r.\u0275\u0275listener("ngSubmit",function(){return e.submit()}),r.\u0275\u0275elementStart(1,"mat-dialog-content"),r.\u0275\u0275element(2,"query-builder",1),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"mat-dialog-actions")(4,"button",2),r.\u0275\u0275text(5,"Save"),r.\u0275\u0275elementEnd()()()),2&t&&(r.\u0275\u0275property("formGroup",e.rulesForm),r.\u0275\u0275advance(2),r.\u0275\u0275property("config",e.config),r.\u0275\u0275advance(2),r.\u0275\u0275property("disabled",!e.rulesForm.valid))},dependencies:[v._Y,v.JJ,v.JL,v.sg,v.u,pi.MatLegacyButton,Jt.MatLegacyDialogClose,Jt.MatLegacyDialogContent,Jt.MatLegacyDialogActions,Nk]}),a}(),DH=function(){var a=function(){function n(t,e,o){(0,p.Z)(this,n),this.data=t,this.dialogRef=e,this.fb=o,this.propertiesForm=this.fb.group({name:this.fb.control(this.data.props.name),title:this.fb.control(this.data.props.title),path:this.fb.control(this.data.props.path),cssFile:this.fb.control(this.data.props.cssFile),readUserIds:this.fb.array([this.fb.group({userId:this.fb.control(this.data.props.readUserIds&&this.data.props.readUserIds.length>0?this.data.props.readUserIds[0]:"")})])})}return(0,_.Z)(n,[{key:"ngOnInit",value:function(){}},{key:"submit",value:function(){this.dialogRef.close(new cy((0,b.Z)((0,b.Z)({},this.propertiesForm.value),{},{readUserIds:this.propertiesForm.value.readUserIds.map(function(e){return e.userId})})))}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Jt.MAT_LEGACY_DIALOG_DATA),r.\u0275\u0275directiveInject(Jt.MatLegacyDialogRef),r.\u0275\u0275directiveInject(v.QS))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-properties-dialog"]],decls:18,vars:2,consts:[[1,"properties-form",3,"formGroup","ngSubmit"],[1,"content-inner"],["fxLayout","column"],["matInput","","formControlName","name","placeholder","Name"],["matInput","","formControlName","title","placeholder","Title"],["matInput","","formControlName","path","placeholder","Path"],["matInput","","formControlName","cssFile","placeholder","Css File"],["formArrayName","readUserIds"],["formGroupName","0"],["matInput","","formControlName","userId","placeholder","Read User Id"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"form",0),r.\u0275\u0275listener("ngSubmit",function(){return e.submit()}),r.\u0275\u0275elementStart(1,"mat-dialog-content")(2,"div",1)(3,"div",2)(4,"mat-form-field"),r.\u0275\u0275element(5,"input",3),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(6,"mat-form-field"),r.\u0275\u0275element(7,"input",4),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(8,"mat-form-field"),r.\u0275\u0275element(9,"input",5),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(10,"mat-form-field"),r.\u0275\u0275element(11,"input",6),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(12,"mat-form-field",7)(13,"div",8),r.\u0275\u0275element(14,"input",9),r.\u0275\u0275elementEnd()()()()(),r.\u0275\u0275elementStart(15,"mat-dialog-actions")(16,"button",10),r.\u0275\u0275text(17,"Save"),r.\u0275\u0275elementEnd()()()),2&t&&(r.\u0275\u0275property("formGroup",e.propertiesForm),r.\u0275\u0275advance(16),r.\u0275\u0275property("disabled",!e.propertiesForm.valid))},dependencies:[v._Y,v.Fj,v.JJ,v.JL,v.sg,v.u,v.x0,v.CE,pi.MatLegacyButton,Jt.MatLegacyDialogClose,Jt.MatLegacyDialogContent,Jt.MatLegacyDialogActions,En.MatLegacyFormField,Hr.MatLegacyInput,Wt]}),a}(),j3=function(){var a=function(){function n(t,e,o){(0,p.Z)(this,n),this.data=t,this.dialogRef=e,this.fb=o,this.contextForm=this.fb.group({context:this.fb.control("")}),this.context=t.context}return(0,_.Z)(n,[{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){var e=this;this.data.context&&setTimeout(function(){e.contextFormComp.contextForm.setValue({name:e.data.context.name,plugin:e.data.context.plugin}),"rest"===e.data.context.plugin?setTimeout(function(){e.contextFormComp.componentRef.instance.restSourceFormComp.restSource={url:e.data.context.rest.url,params:e.data.context.rest.params}}):"datasource"===e.data.context.plugin&&setTimeout(function(){e.contextFormComp.componentRef.instance.datasourceFormComp.datasource=e.data.context.datasource})})}},{key:"submit",value:function(){""!==this.contextForm.get("context").value.name?this.dialogRef.close(new co(this.contextForm.get("context").value)):this.dialogRef.close()}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Jt.MAT_LEGACY_DIALOG_DATA),r.\u0275\u0275directiveInject(Jt.MatLegacyDialogRef),r.\u0275\u0275directiveInject(v.QS))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-context-dialog"]],viewQuery:function(t,e){var o;1&t&&r.\u0275\u0275viewQuery(lO,5),2&t&&r.\u0275\u0275queryRefresh(o=r.\u0275\u0275loadQuery())&&(e.contextFormComp=o.first)},decls:6,vars:3,consts:[[1,"context-form",3,"formGroup","ngSubmit"],["formControlName","context",3,"context"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"form",0),r.\u0275\u0275listener("ngSubmit",function(){return e.submit()}),r.\u0275\u0275elementStart(1,"mat-dialog-content"),r.\u0275\u0275element(2,"classifieds-ui-context-form",1),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"mat-dialog-actions")(4,"button",2),r.\u0275\u0275text(5,"Save"),r.\u0275\u0275elementEnd()()()),2&t&&(r.\u0275\u0275property("formGroup",e.contextForm),r.\u0275\u0275advance(2),r.\u0275\u0275property("context",e.context),r.\u0275\u0275advance(2),r.\u0275\u0275property("disabled",!e.contextForm.valid))},dependencies:[v._Y,v.JJ,v.JL,v.sg,v.u,pi.MatLegacyButton,Jt.MatLegacyDialogClose,Jt.MatLegacyDialogContent,Jt.MatLegacyDialogActions,lO]}),a}(),TH=function(){var a=function(){function n(t,e,o){(0,p.Z)(this,n),this.data=t,this.dialogRef=e,this.fb=o,this.propsForm=this.fb.group({name:this.fb.control(this.data.props.name),label:this.fb.control(this.data.props.label)})}return(0,_.Z)(n,[{key:"ngOnInit",value:function(){}},{key:"submit",value:function(){this.dialogRef.close(new JO(this.propsForm.value))}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Jt.MAT_LEGACY_DIALOG_DATA),r.\u0275\u0275directiveInject(Jt.MatLegacyDialogRef),r.\u0275\u0275directiveInject(v.QS))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-panel-props-dialog"]],decls:11,vars:2,consts:[[1,"props-form",3,"formGroup","ngSubmit"],[1,"content-inner"],["fxLayout","column"],["matInput","","formControlName","name","placeholder","Name"],["matInput","","formControlName","label","placeholder","Label"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"form",0),r.\u0275\u0275listener("ngSubmit",function(){return e.submit()}),r.\u0275\u0275elementStart(1,"mat-dialog-content")(2,"div",1)(3,"div",2)(4,"mat-form-field"),r.\u0275\u0275element(5,"input",3),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(6,"mat-form-field"),r.\u0275\u0275element(7,"input",4),r.\u0275\u0275elementEnd()()()(),r.\u0275\u0275elementStart(8,"mat-dialog-actions")(9,"button",5),r.\u0275\u0275text(10,"Save"),r.\u0275\u0275elementEnd()()()),2&t&&(r.\u0275\u0275property("formGroup",e.propsForm),r.\u0275\u0275advance(9),r.\u0275\u0275property("disabled",!e.propsForm.valid))},dependencies:[v._Y,v.Fj,v.JJ,v.JL,v.sg,v.u,pi.MatLegacyButton,Jt.MatLegacyDialogClose,Jt.MatLegacyDialogContent,Jt.MatLegacyDialogActions,En.MatLegacyFormField,Hr.MatLegacyInput,Wt]}),a}(),IH=function(){var a=function(){function n(t,e,o){(0,p.Z)(this,n),this.data=t,this.dialogRef=e,this.fb=o,this.propsForm=this.fb.group({name:this.fb.control(this.data.props.name),label:this.fb.control(this.data.props.label)})}return(0,_.Z)(n,[{key:"ngOnInit",value:function(){}},{key:"submit",value:function(){this.dialogRef.close(new YO(this.propsForm.value))}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Jt.MAT_LEGACY_DIALOG_DATA),r.\u0275\u0275directiveInject(Jt.MatLegacyDialogRef),r.\u0275\u0275directiveInject(v.QS))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-pane-props-dialog"]],decls:11,vars:2,consts:[[1,"props-form",3,"formGroup","ngSubmit"],[1,"content-inner"],["fxLayout","column"],["matInput","","formControlName","name","placeholder","Name"],["matInput","","formControlName","label","placeholder","Label"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"form",0),r.\u0275\u0275listener("ngSubmit",function(){return e.submit()}),r.\u0275\u0275elementStart(1,"mat-dialog-content")(2,"div",1)(3,"div",2)(4,"mat-form-field"),r.\u0275\u0275element(5,"input",3),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(6,"mat-form-field"),r.\u0275\u0275element(7,"input",4),r.\u0275\u0275elementEnd()()()(),r.\u0275\u0275elementStart(8,"mat-dialog-actions")(9,"button",5),r.\u0275\u0275text(10,"Save"),r.\u0275\u0275elementEnd()()()),2&t&&(r.\u0275\u0275property("formGroup",e.propsForm),r.\u0275\u0275advance(9),r.\u0275\u0275property("disabled",!e.propsForm.valid))},dependencies:[v._Y,v.Fj,v.JJ,v.JL,v.sg,v.u,pi.MatLegacyButton,Jt.MatLegacyDialogClose,Jt.MatLegacyDialogContent,Jt.MatLegacyDialogActions,En.MatLegacyFormField,Hr.MatLegacyInput,Wt]}),a}(),$3=function(){var a=(0,_.Z)(function n(t){(0,p.Z)(this,n),this.viewContainerRef=t});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(r.ViewContainerRef))},a.\u0275dir=r.\u0275\u0275defineDirective({type:a,selectors:[["","classifiedsUiLayoutEditorHost",""]]}),a}(),U3=function(){var a=(0,_.Z)(function n(t){(0,p.Z)(this,n),this.viewContainerRef=t});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(r.ViewContainerRef))},a.\u0275dir=r.\u0275\u0275defineDirective({type:a,selectors:[["","classifiedsUiPaneContentHost",""]]}),a}(),rA=function(){var a=function(){function n(t,e){(0,p.Z)(this,n),this.entityServices=t,this.attributeSerializer=e}return(0,_.Z)(n,[{key:"entityCollectionService",get:function(){return this.entityServices.getEntityCollectionService("PanelPageState")}},{key:"resolve",value:function(e,o){var T,F,s=this,u=function(T){return T.entities},m="$."+o.selectionPath.map(function(C,T){return"".concat((T+1)%2==0?"panes":(0===T?"":"nestedPage.")+"panels","[").concat(C,"]")}).join(".");return this.entityCollectionService.collection$.pipe((0,Zt.Ys)((F=(T={id:o.id,path:m}).path,(0,Zt.P1)(function(T){var B=T.id;return(0,Zt.P1)(u,function(F){return F[B]?F[B]:void 0})}({id:T.id}),function(U){return(0,Ms.JSONPath)({path:F,json:U})}))),(0,Ce.U)(function(C){return C&&Array.isArray(C)&&0!==C.length?C[0]:s.defaultPaneState(o.value?o.value:{})}),(0,Ce.U)(function(C){return s.attributeSerializer.deserialize(C.state)}),(0,Ce.U)(function(C){return C?C.root?C.root:C:{}}),(0,ee.b)(function(C){console.log("resolved panestate[id=".concat(o.id,"]").concat(m)),console.log(C)}))}},{key:"defaultPaneState",value:function(e){return new Yo({state:this.attributeSerializer.serialize(e,"root")})}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Dr),r.\u0275\u0275inject(Bt.AttributeSerializerService))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),z3=function(){var a=function(){function n(t,e,o){var s=this;(0,p.Z)(this,n),this.componentFactoryResolver=t,this.panelHandler=e,this.cpm=o,this.settings=[],this.locked=!1,this.contexts=[],this.edit=new r.EventEmitter,this.props=new r.EventEmitter,this.delete=new r.EventEmitter,this.rules=new r.EventEmitter,this.rendererOverride=new r.EventEmitter,this.removeRendererOverride=new r.EventEmitter,this.nestedUpdate=new r.EventEmitter,this.heightChange=new r.EventEmitter,this.displayOverride=!1,this.hasOverride=!1,this.preview=!1,this.schedulePluginChange=new se.x,this.pluginChangeSub=this.schedulePluginChange.pipe((0,st.w)(function(u){return s.cpm.getPlugin(s.pluginName).pipe((0,st.w)(function(c){return c.handler.hasRendererOverride(s.settings).pipe((0,Ce.U)(function(l){return[u,c,l]}))}))})).subscribe(function(u){var c=(0,g.Z)(u,3),l=c[0],m=c[1],C=c[2];s.contentPlugin=m,s.displayOverride=m.handler.implementsRendererOverride(),s.hasOverride=!!C,l&&"panel"===s.pluginName&&s.panelHandler.toObject(s.settings).subscribe(function(T){s.panelPage=T})}),this.ancestory$=new se.x,this.panelIndex$=new se.x,this.paneIndex$=new se.x,this.paneAncestoryWithSelf=[],this.paneAncestoryWithSelfSub=(0,Sr.a)([this.ancestory$,this.panelIndex$,this.paneIndex$]).pipe((0,Ce.U)(function(u){var c=(0,g.Z)(u,3),m=c[1],C=c[2];return[].concat((0,y.Z)(c[0]),[m,C])})).subscribe(function(u){s.paneAncestoryWithSelf=u})}return(0,_.Z)(n,[{key:"panelIndex",set:function(e){this.panelIndex$.next(e)}},{key:"paneIndex",set:function(e){this.paneIndex$.next(e)}},{key:"ancestory",set:function(e){this.ancestory$.next(e)}},{key:"ngOnInit",value:function(){this.schedulePluginChange.next(!0),console.log("here 1")}},{key:"ngOnChanges",value:function(e){this.schedulePluginChange.next(!1),console.log("here 2"),console.log(e)}},{key:"onEditClick",value:function(){this.edit.emit()}},{key:"onPropsClick",value:function(){this.props.emit()}},{key:"onRulesClick",value:function(){this.rules.emit()}},{key:"onDeleteClick",value:function(){this.delete.emit()}},{key:"onPreviewClick",value:function(){var e=this;this.preview=!0,void 0!==this.contentPaneHost&&this.renderPaneContent(),setTimeout(function(){return e.heightChange.emit()})}},{key:"onOverrideClick",value:function(){this.rendererOverride.emit()}},{key:"onRemoveOverrideClick",value:function(){this.removeRendererOverride.emit()}},{key:"onNestedUpdate",value:function(e){this.nestedUpdate.emit(e)}},{key:"onDisablePreviewClick",value:function(){var e=this;this.preview=!1,void 0!==this.contentPaneHost&&this.contentPaneHost.viewContainerRef.clear(),setTimeout(function(){return e.heightChange.emit()})}},{key:"onAfterCollapse",value:function(){this.heightChange.emit()}},{key:"onAfterExpand",value:function(){this.heightChange.emit()}},{key:"renderPaneContent",value:function(){var e=this.componentFactoryResolver.resolveComponentFactory(this.contentPlugin.renderComponent),o=this.contentPaneHost.viewContainerRef;o.clear(),o.createComponent(e).instance.settings=this.settings}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(r.ComponentFactoryResolver),r.\u0275\u0275directiveInject(yo),r.\u0275\u0275directiveInject(fn.ContentPluginManager))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-editable-pane"]],viewQuery:function(t,e){var o;1&t&&(r.\u0275\u0275viewQuery(U3,5),r.\u0275\u0275viewQuery(fV,5)),2&t&&(r.\u0275\u0275queryRefresh(o=r.\u0275\u0275loadQuery())&&(e.contentPaneHost=o.first),r.\u0275\u0275queryRefresh(o=r.\u0275\u0275loadQuery())&&(e.contentEditor=o.first))},inputs:{pluginName:"pluginName",settings:"settings",name:"name",label:"label",panelIndex:"panelIndex",paneIndex:"paneIndex",locked:"locked",rootContext:"rootContext",contexts:"contexts",ancestory:"ancestory"},outputs:{edit:"edit",props:"props",delete:"delete",rules:"rules",rendererOverride:"rendererOverride",removeRendererOverride:"removeRendererOverride",nestedUpdate:"nestedUpdate",heightChange:"heightChange"},features:[r.\u0275\u0275NgOnChangesFeature],decls:17,vars:6,consts:[["class","editable-pane-wrapper",4,"ngIf","ngIfElse"],["settingsTmpl",""],["nestedPanelTpl",""],["paneMenu","matMenu"],["type","button","mat-menu-item","",3,"disabled","click"],["type","button","mat-menu-item","",3,"click"],["mat-menu-item","","type","button",3,"disabled","click",4,"ngIf"],["mat-menu-item","","type","button",3,"click",4,"ngIf"],["type","button","mat-menu-item","",1,"delete",3,"click"],[1,"editable-pane-wrapper"],["fxLayout","row",1,"inner-pane-wrapper"],[1,"pane-menu-trigger-wrapper"],["mat-button","","type","button",3,"matMenuTriggerFor"],["fxFlex","",3,"afterCollapse","afterExpand"],[3,"hidden"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"preview-area",3,"ngClass"],["class","override","type","button",3,"click",4,"ngIf"],["classifiedsUiPaneContentHost",""],["type","button",1,"override",3,"click"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"nested-panel-wrapper"],[3,"panelPage","savable","nested","locked","contexts","rootContext","ancestory","nestedUpdate","delete","rules","props"],["contentEditor",""],["extraActionsArea",""],["mat-menu-item","","type","button",3,"disabled","click"],["mat-menu-item","","type","button",3,"click"]],template:function(t,e){if(1&t&&(r.\u0275\u0275template(0,_V,18,13,"div",0),r.\u0275\u0275template(1,wV,1,1,"ng-template",null,1,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275template(3,EV,5,7,"ng-template",null,2,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementStart(5,"mat-menu",null,3)(7,"button",4),r.\u0275\u0275listener("click",function(){return e.onEditClick()}),r.\u0275\u0275text(8,"Edit"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(9,"button",4),r.\u0275\u0275listener("click",function(){return e.onPropsClick()}),r.\u0275\u0275text(10,"Props"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(11,"button",5),r.\u0275\u0275listener("click",function(){return e.onRulesClick()}),r.\u0275\u0275text(12,"Rules"),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(13,PV,2,1,"button",6),r.\u0275\u0275template(14,kV,2,0,"button",7),r.\u0275\u0275elementStart(15,"button",8),r.\u0275\u0275listener("click",function(){return e.onDeleteClick()}),r.\u0275\u0275text(16,"Delete"),r.\u0275\u0275elementEnd()()),2&t){var o=r.\u0275\u0275reference(4);r.\u0275\u0275property("ngIf","panel"!=e.pluginName||e.locked)("ngIfElse",o),r.\u0275\u0275advance(7),r.\u0275\u0275property("disabled",e.locked),r.\u0275\u0275advance(2),r.\u0275\u0275property("disabled",e.locked&&0!==e.settings.length),r.\u0275\u0275advance(4),r.\u0275\u0275property("ngIf",!e.preview),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.preview)}},dependencies:function(){return[E.NgClass,E.NgForOf,E.NgIf,E.NgTemplateOutlet,pi.MatLegacyButton,Gk.MatExpansionPanel,Gk.MatExpansionPanelHeader,Gk.MatExpansionPanelTitle,gy.MatIcon,xo.MatLegacyMenu,xo.MatLegacyMenuItem,xo.MatLegacyMenuTrigger,Wt,In,Ia,iA,U3,Bt.AttributePipe]},styles:[".editable-pane-wrapper[_ngcontent-%COMP%]{margin-bottom:.25em;border-radius:4px;padding-left:.25em;box-shadow:0 3px 1px -2px #0003,0 2px 2px #00000024,0 1px 5px #0000001f}.nested-panel-wrapper[_ngcontent-%COMP%]{margin-bottom:.25em}.inner-pane-wrapper[_ngcontent-%COMP%]{padding:0}.pane-header[_ngcontent-%COMP%]{background-color:#ccc;padding:0}.mat-menu-trigger[_ngcontent-%COMP%]{min-width:0;padding:0;margin:0}button.delete[_ngcontent-%COMP%]{float:right}.preview-area[_ngcontent-%COMP%]{display:none;position:relative}.preview-area.visible[_ngcontent-%COMP%]{display:block;height:300px;overflow-y:scroll;border:1px solid black;padding:.5em}.panel-name[_ngcontent-%COMP%]{float:right;padding-right:.5em}.pane-menu-trigger-wrapper[_ngcontent-%COMP%]{display:flex}.mat-expansion-panel[_ngcontent-%COMP%]{box-shadow:none}.mat-expansion-panel-header[_ngcontent-%COMP%]{padding:0 1em 0 .25em}"]}),a}(),iA=function(){var a=function(){function n(t,e,o,s,u,c,l,m,C,T,B,F,U,ae){var ue=this;(0,p.Z)(this,n),this.siteName=t,this.cpm=e,this.spm=o,this.lpm=s,this.cxtm=u,this.fb=c,this.bs=l,this.dialog=m,this.panelHandler=C,this.tokenizerService=T,this.componentFactoryResolver=B,this.pageBuilderFacade=F,this.paneStateContextResolver=U,this.panelsContextService=ae,this.submitted=new r.EventEmitter,this.nestedUpdate=new r.EventEmitter,this.delete=new r.EventEmitter,this.rules=new r.EventEmitter,this.props=new r.EventEmitter,this.savable=!0,this.nested=!1,this.locked=!1,this.pageBuilder=!1,this.contexts=[],this.contentAdded=new se.x,this.contentAdddedSub=this.contentAdded.subscribe(function(me){var Se=(0,g.Z)(me,2);ue.resolvePaneContexts(Se[0],Se[1])}),this.dashboard=[],this.pageProperties=new cy,this.persistence=new Hd,this.interactions=new Rc,this.layoutSetting=new br,this.rowSettings=[],this.ancestory$=new z.X([]),this.onTouched=function(){},this.contentForm=this.fb.group({name:this.fb.control(""),title:this.fb.control(""),layoutType:this.fb.control("split",v.kI.required),displayType:this.fb.control("page",v.kI.required),panels:this.fb.array([])}),this.options={gridType:Hn.Fit,displayGrid:Au.Always,pushItems:!0,draggable:{enabled:!0},resizable:{enabled:!0},mobileBreakpoint:0,itemChangeCallback:function(Se,we){},itemInitCallback:function(Se,we){if(ue.nested&&0!==Se.y){var qe=ue.gridLayout.grid.findIndex(function(at){return at.x===Se.x&&at.y===Se.y&&at.cols===Se.cols&&at.rows===Se.rows});0===ue.panelPanes(qe).length&&ue.gridLayout.setItemContentHeight(qe,200)}}},this.ancestorySub=this.ancestory$.pipe((0,Q.h)(function(){return!!ue.layoutEditorRef})).subscribe(function(me){ue.layoutEditorRef.instance.ancestory=me})}return(0,_.Z)(n,[{key:"ancestory",get:function(){return this.ancestory$.value},set:function(e){this.ancestory$.next(e)}},{key:"panels",get:function(){return this.contentForm.get("panels")}},{key:"layoutType",get:function(){return this.contentForm.get("layoutType")}},{key:"displayType",get:function(){return this.contentForm.get("displayType")}},{key:"columnSettings",get:function(){for(var e=this.panels.length,o=[],s=0;s<e;s++)o=[].concat((0,y.Z)(o),[new br(this.panels.at(s).get("columnSetting").value)]);return o}},{key:"ngOnInit",value:function(){var e=this;this.contentForm.valueChanges.pipe((0,Q.h)(function(){return e.nested}),(0,kr.b)(500)).subscribe(function(){e.nestedUpdate.emit(e.packageFormData())}),this.contentForm.get("layoutType").valueChanges.pipe((0,Q.h)(function(o){return"gridless"===o}),(0,Rr.g)(1)).subscribe(function(o){0===e.panels.length&&e.panels.push(e.fb.group({name:new v.p4(""),label:new v.p4(""),stylePlugin:new v.p4(""),styleTitle:new v.p4(""),settings:new v.vC([]),panes:e.fb.array([]),columnSetting:e.fb.group({settings:e.fb.array([])})}))}),this.contentForm.valueChanges.pipe((0,Q.h)(function(){return!e.nested}),(0,kr.b)(500)).subscribe(function(){var o=e.packageFormData();e.pageBuilderFacade.setPage(o)})}},{key:"ngAfterViewInit",value:function(){var e=this;this.layoutType.valueChanges.pipe((0,Q.h)(function(){return!!e.layoutEditorHost})).subscribe(function(o){e.renderEditorLayout(o)}),this.layoutType.value&&this.renderEditorLayout(this.layoutType.value)}},{key:"ngAfterContentInit",value:function(){var e=this;setTimeout(function(){e.panelPage||e.contentForm.get("layoutType").setValue("split")},1e3)}},{key:"ngOnChanges",value:function(e){var o=this;e.panelPage&&e.panelPage.previousValue!==e.panelPage.currentValue&&(this.panels.clear(),this.panelPageId=e.panelPage.currentValue.panelPageId,this.dashboard=e.panelPage.currentValue.gridItems.map(function(s){return Object.assign({},s)}),this.layoutType.setValue(e.panelPage.currentValue.layoutType),this.layoutSetting=new br(e.panelPage.currentValue.layoutSetting),this.rowSettings=e.panelPage.currentValue.rowSettings?e.panelPage.currentValue.rowSettings.map(function(s){return new br(s)}):[],this.persistence=e.panelPage.currentValue.persistence?new Hd(e.panelPage.currentValue.persistence):new Hd,this.interactions=e.panelPage.currentValue.interactions?new Rc(e.panelPage.currentValue.interactions):new Rc,this.nested?(this.pageProperties=new cy({name:e.panelPage.currentValue.name,title:e.panelPage.currentValue.title,path:"",readUserIds:[],cssFile:""}),this.contentForm.get("name").setValue(e.panelPage.currentValue.name),this.contentForm.get("title").setValue(e.panelPage.currentValue.title)):(this.pageProperties=new cy({name:e.panelPage.currentValue.name,title:e.panelPage.currentValue.title,path:e.panelPage.currentValue.path,readUserIds:e.panelPage.currentValue.entityPermissions.readUserIds,cssFile:e.panelPage.currentValue.cssFile}),this.contexts=e.panelPage.currentValue.contexts),e.panelPage.currentValue.panels.forEach(function(s,u){var c;o.panels.push(o.fb.group({name:new v.p4(s.name),label:new v.p4(s.label),stylePlugin:new v.p4(s.stylePlugin),styleTitle:new v.p4(""),settings:o.fb.array(void 0!==s.settings?s.settings.map(function(c){return o.convertToGroup(c)}):[]),panes:o.fb.array([]),columnSetting:o.fb.group({settings:o.fb.array(s.columnSetting?s.columnSetting.settings.map(function(c){return o.convertToGroup(c)}):[])})})),s.stylePlugin&&""!==s.stylePlugin&&o.spm.getPlugin(s.stylePlugin).subscribe(function(c){o.panels.at(u).get("styleTitle").setValue(c.title)}),o.nested&&o.panelPanes(o.panels.length-1).valueChanges.pipe((0,kr.b)(5),(0,Rr.g)(1)).subscribe((c=o.panels.length-1,function(){if(void 0!==o.gridLayout){var l=o.paneContainers.find(function(m,C){return C===c});o.gridLayout.setItemContentHeight(c,l.nativeElement.offsetHeight)}})),s.panes.forEach(function(c,l){o.panels.at(u).get("panes").push(o.fb.group({contentPlugin:c.contentPlugin,name:new v.p4(c.name),label:new v.p4(c.label),locked:new v.p4(c.locked),linkedPageId:new v.p4(c.linkedPageId),rule:new v.p4(c.rule&&null!==c.rule?(0,b.Z)((0,b.Z)({},c.rule),{},{rules:c.rule.rules&&Array.isArray(c.rule.rules)?c.rule.rules:[]}):{condition:"",rules:[]}),settings:new v.vC(c.settings.map(function(m){return o.convertToGroup(m)}))})),setTimeout(function(){return o.resolvePaneContexts(u,l)})})}),this.layoutEditorRef&&(this.layoutEditorRef.instance.layoutSetting=this.layoutSetting,this.layoutEditorRef.instance.rowSettings=this.rowSettings,this.layoutEditorRef.instance.columnSettings=this.columnSettings))}},{key:"addContent",value:function(e){var o=this;console.log(this.panels.at(e)),this.pageBuilderFacade.getPage$.pipe((0,st.w)(function(s){return o.panelsContextService.allActivePageContexts({panelPage:s})}),(0,kn.q)(1)).subscribe(function(s){o.bs.open(PH,{data:{panelForm:o.panels.at(e),panelIndex:e,contexts:[].concat((0,y.Z)(o.rootContext?[o.rootContext]:[]),(0,y.Z)(o.contexts),(0,y.Z)(s))}})})}},{key:"editPanelProps",value:function(e){var o=this.panels.at(e).get("name"),s=this.panels.at(e).get("label");this.dialog.open(TH,{data:{props:new JO({name:o.value,label:s.value})}}).afterClosed().subscribe(function(u){u&&(o.setValue(u.name),s.setValue(u.label))})}},{key:"editPaneProps",value:function(e,o){var s=this.panelPane(e,o).get("name"),u=this.panelPane(e,o).get("label");this.dialog.open(IH,{data:{props:new YO({name:s.value,label:u.value})}}).afterClosed().subscribe(function(c){c&&(s.setValue(c.name),u.setValue(c.label))})}},{key:"applyStyle",value:function(e){this.bs.open(AH,{data:{panelForm:this.panels.controls[e],panelIndex:e,contexts:this.contexts}})}},{key:"removeStyle",value:function(e){this.panels.controls[e].get("stylePlugin").setValue(""),this.panels.controls[e].get("styleTitle").setValue("")}},{key:"onItemAdded",value:function(){var e=this;console.log("item added"),this.panels.push(this.fb.group({name:new v.p4(""),label:new v.p4(""),stylePlugin:new v.p4(""),styleTitle:new v.p4(""),settings:new v.vC([]),panes:this.fb.array([]),columnSetting:this.fb.group({settings:this.fb.array([])})})),this.nested&&void 0!==this.gridLayout&&setTimeout(function(){e.paneContainers.forEach(function(o,s){e.gridLayout.setItemContentHeight(s,o.nativeElement.offsetHeight)})}),this.panelPanes(this.panels.length-1).valueChanges.pipe((0,Q.h)(function(){return e.nested&&void 0!==e.gridLayout}),(0,kr.b)(5),(0,Rr.g)(1)).subscribe(function(o){return function(){var s=e.paneContainers.find(function(u,c){return c===o});e.gridLayout.setItemContentHeight(o,s.nativeElement.offsetHeight)}}(this.panels.length-1)),this.layoutEditorRef&&(this.layoutEditorRef.instance.columnSettings=this.columnSettings)}},{key:"onItemRemoved",value:function(e){var o=this;this.panels.removeAt(e),this.nested&&void 0!==this.gridLayout&&setTimeout(function(){o.paneContainers.forEach(function(s,u){o.gridLayout.setItemContentHeight(u,s.nativeElement.offsetHeight)})}),this.layoutEditorRef&&(this.layoutEditorRef.instance.columnSettings=this.columnSettings)}},{key:"onDrop",value:function(e){console.log(e);var o=+e.container.data,s=+e.previousContainer.data;if(o===s){for(var u=e.currentIndex>e.previousIndex?1:-1,c=e.previousIndex,l=e.currentIndex,m=this.panelPanes(o).at(c),C=c;C*u<l*u;C+=u){var T=this.panelPanes(o).at(C+u);this.panelPanes(o).setControl(C,T)}this.panelPanes(o).setControl(l,m)}else{var B=this.panelPanes(s).at(e.previousIndex);this.panelPanes(s).removeAt(e.previousIndex),this.panelPanes(o).insert(e.currentIndex,B)}}},{key:"onOverrideRenderer",value:function(e,o){var s=new Wr(this.panelPane(e,o).value);this.dialog.open(kH,{data:{panelFormGroup:this.panels.at(e),paneIndex:o,pane:s}})}},{key:"onRemoveOverrideRenderer",value:function(e,o){var u,s=this.panelPane(e,o).get("settings");s.controls.forEach(function(c,l){"_renderer"===c.get("name").value&&(u=l)}),void 0!==u&&s.removeAt(u)}},{key:"onNestedUpdate",value:function(e,o,s){var u=this,c=this.panelHandler.buildSettings(e),l=this.panelPane(o,s).get("settings");l.clear(),c.forEach(function(m){return l.push(u.convertToGroup(m))})}},{key:"onPaneHeightChange",value:function(e){if(this.nested&&this.gridLayout){var o=this.paneContainers.find(function(s,u){return u===e});this.gridLayout.setItemContentHeight(e,o.nativeElement.offsetHeight)}}},{key:"onDeleteClick",value:function(){this.delete.emit()}},{key:"onRulesClick",value:function(){this.rules.emit()}},{key:"onPropertiesClick",value:function(){var e=this;this.props.emit(),this.dialog.open(DH,{data:{props:this.pageProperties}}).afterClosed().subscribe(function(o){o&&(e.pageProperties=new cy((0,b.Z)({},o)),e.contentForm.get("name").setValue(o.name),e.contentForm.get("title").setValue(o.title))})}},{key:"onRulesPane",value:function(e,o){var s=this,u=new Wr(this.panelPane(e,o).value),c=""!==this.panelPane(e,o).get("rule").value?this.panelPane(e,o).get("rule").value:void 0,l=this.editablePanes.filter(function(T,B){return T.name===u.name}),C=(0,g.Z)(l,1)[0];this.pageBuilderFacade.getPage$.pipe((0,ee.b)(function(){s.pageBuilderFacade.setSelectionPath([].concat((0,y.Z)(s.ancestory),[e,o]))}),(0,st.w)(function(T){return s.panelsContextService.allActivePageContexts({panelPage:T})}),(0,st.w)(function(T){return s.dialog.open(RH,{data:{rule:c,contexts:[].concat((0,y.Z)(C.rootContext?[C.rootContext]:s.rootContext?[s.rootContext]:[]),(0,y.Z)(s.contexts),(0,y.Z)(T))}}).afterClosed()}),(0,kn.q)(1)).subscribe(function(T){s.panelPane(e,o).get("rule").setValue(T||c||void 0)})}},{key:"onDeletePane",value:function(e,o){console.log("delete nested pane: ".concat(e," | ").concat(o))}},{key:"onAddContextClick",value:function(){var e=this,o=this.packageFormData();this.pageBuilderFacade.setPage(o),this.dialog.open(j3,{data:{}}).afterClosed().subscribe(function(s){s&&(e.contexts=[].concat((0,y.Z)(e.contexts),[s]))})}},{key:"onEditContext",value:function(e){var o=this,s=this.contexts.find(function(c){return c.name===e});if(console.log(s),s){var u=this.packageFormData();this.pageBuilderFacade.setPage(u),this.dialog.open(j3,{data:{context:s}}).afterClosed().subscribe(function(c){c&&(o.contexts=o.contexts.map(function(l){return l.name===e?new co(c):l}))})}}},{key:"onLayoutSettingChange",value:function(e){this.layoutSetting=new br(e),this.nested&&this.nestedUpdate.emit(this.packageFormData()),this.layoutEditorRef&&(this.layoutEditorRef.instance.layoutSetting=this.layoutSetting)}},{key:"onRowSettingsChange",value:function(e){this.rowSettings=e.map(function(o){return new br(o)}),this.nested&&this.nestedUpdate.emit(this.packageFormData()),this.layoutEditorRef&&(this.layoutEditorRef.instance.rowSettings=this.rowSettings)}},{key:"onColumnSettingsChange",value:function(e){for(var o=this.panels.length,s=0;s<o;s++){this.panels.at(s).get("columnSetting").get("settings").clear();for(var u=0;u<e[s].settings.length;u++)this.panels.at(s).get("columnSetting").get("settings").push(this.convertToGroup(e[s].settings[u]))}this.nested&&this.nestedUpdate.emit(this.packageFormData()),this.layoutEditorRef&&(this.layoutEditorRef.instance.columnSettings=this.columnSettings)}},{key:"submit",value:function(){this.submitted.emit(this.packageFormData())}},{key:"packageFormData",value:function(){var o=new ii({id:this.panelPageId,title:this.pageProperties.title,name:this.pageProperties.name,site:this.siteName,path:this.pageProperties.path,cssFile:this.pageProperties.cssFile,displayType:this.displayType.value,layoutType:this.layoutType.value,gridItems:this.layoutEditorRef.instance.gridItems,contexts:this.contexts,panels:this.panels.value,layoutSetting:new br(this.layoutSetting),rowSettings:this.rowSettings.map(function(s){return new br(s)}),persistence:this.persistence,interactions:this.interactions,entityPermissions:{readUserIds:this.pageProperties.readUserIds,writeUserIds:[],deleteUserIds:[]}});return console.log(o),o}},{key:"syncNestedPanelPages",value:function(){var e=this;console.log("sync nested"),this.editablePanes.forEach(function(o){if(void 0!==o.contentEditor){var s=e.panelHandler.buildSettings(o.contentEditor.packageFormData()),u=e.panelPane(o.panelIndex,o.paneIndex).get("settings");u.clear(),s.forEach(function(c){return u.push(e.convertToGroup(c))})}})}},{key:"resolvePaneContexts",value:function(e,o){var s=this,u=new Wr(this.panelPane(e,o).value),c=this.panelPanes(e).controls;this.cpm.getPlugin(u.contentPlugin).pipe((0,Q.h)(function(l){return void 0!==l.handler&&l.handler.isDynamic(u.settings)}),(0,st.w)(function(l){return l.handler.fetchDynamicData(u.settings,new Map([["tag",fr()],["contexts",(0,y.Z)(s.contexts)]])).pipe((0,Ce.U)(function(m){return new co({name:"_root",adaptor:"data",data:0!==m.length?m.results[0]:{}})}),(0,st.w)(function(m){return l.handler.getBindings(u.settings,"pane").pipe((0,Ce.U)(function(C){return[m,C.map(function(T){return c.findIndex(function(B){return new Wr(B.value).name===T.id})})]}))}))})).subscribe(function(l){var m=(0,g.Z)(l,2),C=m[0],T=m[1];s.editablePanes.forEach(function(B,F){T.findIndex(function(U){return U===F})>-1&&(B.rootContext=C)})})}},{key:"onPersistenceClick",value:function(){var e=this;this.dialog.open(A$,{data:{persistence:this.persistence,contexts:this.contexts}}).afterClosed().subscribe(function(o){console.log("persistence closed",o),e.persistence=o||e.persistence})}},{key:"onInteractionsClick",value:function(){var e=this;this.dialog.open(F$,(0,b.Z)({data:{interactions:this.interactions,contexts:this.contexts}},{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%"})).afterClosed().subscribe(function(o){console.log("interactions closed",o),e.interactions=o||e.interactions})}},{key:"panelPanes",value:function(e){return this.panels.at(e).get("panes")}},{key:"panelPane",value:function(e,o){return this.panelPanes(e).at(o)}},{key:"panelPanePlugin",value:function(e,o){return this.panelPane(e,o).get("contentPlugin").value}},{key:"panelPaneSettings",value:function(e,o){return this.panelPane(e,o).get("settings").value}},{key:"panelPaneName",value:function(e,o){return this.panelPane(e,o).get("name").value}},{key:"panelPaneLabel",value:function(e,o){return this.panelPane(e,o).get("label").value}},{key:"panelPaneLocked",value:function(e,o){if(this.locked)return this.locked;var s=this.panelPane(e,o).get("locked");return null!==s&&s.value}},{key:"panelPaneIsNested",value:function(e,o){return"panel"===this.panelPanePlugin(e,o)}},{key:"panelPanePanelPage",value:function(e,o){var s;return this.panelHandler.toObject(this.panelPaneSettings(e,o)).subscribe(function(u){s=u}),s}},{key:"hasPanelStyle",value:function(e){return void 0!==this.panels.at(e).get("stylePlugin").value&&""!==this.panels.at(e).get("stylePlugin").value}},{key:"panelStyleTitle",value:function(e){return this.panels.at(e).get("styleTitle").value}},{key:"onPaneEdit",value:function(e,o){var s=this,u=new Wr(this.panelPane(e,o).value),c=this.panelPanePlugin(e,o),l=this.editablePanes.filter(function(T,B){return T.name===u.name}),C=(0,g.Z)(l,1)[0];this.cpm.getPlugin(c).pipe((0,Q.h)(function(T){return void 0!==T.editorComponent}),(0,st.w)(function(T){return s.pageBuilderFacade.getPage$.pipe((0,st.w)(function(B){return s.panelsContextService.allActivePageContexts({panelPage:B}).pipe((0,Ce.U)(function(F){return[T,F]}),(0,kn.q)(1))}),(0,kn.q)(1))}),(0,st.w)(function(T){var B=(0,g.Z)(T,2),F=B[0],U=B[1];return F.handler?F.handler.editorOptions(u.settings).pipe((0,Ce.U)(function(ae){return[F,U,ae]})):(0,je.of)([F,U,new fn.ContentPluginEditorOptions])})).subscribe(function(T){var B=(0,g.Z)(T,3),U=B[1],ae=B[2];s.dialog.open(B[0].editorComponent,(0,b.Z)({data:{panelFormGroup:s.panels.at(e),panelIndex:e,paneIndex:o,contexts:[].concat((0,y.Z)(C.rootContext?[C.rootContext]:s.rootContext?[s.rootContext]:[]),(0,y.Z)(s.contexts),(0,y.Z)(U)),contentAdded:s.contentAdded,pane:u}},ae.fullscreen?{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%"}:{})).afterClosed().subscribe(function(){s.resolvePaneContexts(e,o)})})}},{key:"onPaneDelete",value:function(e,o){this.panelPanes(e).removeAt(o)}},{key:"onFileChange",value:function(e,o){var s=this,u=e.addedFiles[0];this.cpm.getPlugins().pipe((0,Ce.U)(function(c){return Array.from(c.values()).filter(function(l){return void 0!==l.handler}).find(function(l){return l.handler.handlesType(u.type)})}),(0,Q.h)(function(c){return void 0!==c})).subscribe(function(c){c.handler.handleFile(u).subscribe(function(l){s.panelPanes(o).push(s.fb.group({contentPlugin:c.id,name:new v.p4(""),label:new v.p4(""),settings:s.fb.array(l.map(function(m){return s.fb.group({name:new v.p4(m.name,v.kI.required),type:new v.p4(m.type,v.kI.required),displayName:new v.p4(m.displayName,v.kI.required),value:new v.p4(m.value,v.kI.required),computedValue:new v.p4(m.value,v.kI.required)})}))}))})})}},{key:"writeValue",value:function(e){e&&this.contentForm.setValue(e,{emitEvent:!1})}},{key:"registerOnChange",value:function(e){this.contentForm.valueChanges.subscribe(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){e?this.contentForm.disable():this.contentForm.enable()}},{key:"validate",value:function(e){return this.contentForm.valid?null:{invalidForm:{valid:!1,message:"content is invalid"}}}},{key:"convertToGroup",value:function(e){var o=this,s=this.fb.group({name:new v.p4(e.name,v.kI.required),type:new v.p4(e.type,v.kI.required),displayName:new v.p4(e.displayName,v.kI.required),value:new v.p4(e.value,v.kI.required),computedValue:new v.p4(e.value,v.kI.required),attributes:new v.vC([])});return e.attributes&&e.attributes.length>0&&e.attributes.forEach(function(u){s.get("attributes").push(o.convertToGroup(u))}),s}},{key:"renderEditorLayout",value:function(e){var o=this;console.log("render editor layout ".concat(e)),this.lpm.getPlugin(e).subscribe(function(s){var u=o.componentFactoryResolver.resolveComponentFactory(s.editor),c=o.layoutEditorHost.viewContainerRef;c.clear(),o.layoutEditorRef=c.createComponent(u),o.layoutEditorRef.instance.savable=o.savable,o.layoutEditorRef.instance.nested=o.nested,o.layoutEditorRef.instance.ancestory=o.ancestory,o.layoutEditorRef.instance.editor=o,o.layoutEditorRef.instance.extraActionsAreaTmpl=o.extraActionsAreaTmpl,o.layoutEditorRef.instance.contextsMenuTpl=o.contextsMenuTpl,o.layoutEditorRef.instance.editablePaneTpl=o.editablePaneTpl,o.layoutEditorRef.instance.dashboard=o.dashboard,o.layoutEditorRef.instance.layoutSetting=o.layoutSetting,o.layoutEditorRef.instance.rowSettings=o.rowSettings,o.layoutEditorRef.instance.columnSettings=o.columnSettings})}},{key:"updateEditorLayoutVars",value:function(){this.layoutEditorRef.instance.savable=this.savable,this.layoutEditorRef.instance.nested=this.nested,this.layoutEditorRef.instance.ancestory=this.ancestory,this.layoutEditorRef.instance.editor=this,this.layoutEditorRef.instance.extraActionsAreaTmpl=this.extraActionsAreaTmpl,this.layoutEditorRef.instance.contextsMenuTpl=this.contextsMenuTpl,this.layoutEditorRef.instance.editablePaneTpl=this.editablePaneTpl,this.layoutEditorRef.instance.dashboard=this.dashboard,this.layoutEditorRef.instance.layoutSetting=this.layoutSetting,this.layoutEditorRef.instance.rowSettings=this.rowSettings,this.layoutEditorRef.instance.columnSettings=this.columnSettings}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Nn.SITE_NAME),r.\u0275\u0275directiveInject(fn.ContentPluginManager),r.\u0275\u0275directiveInject(Xd),r.\u0275\u0275directiveInject(kE),r.\u0275\u0275directiveInject(Su),r.\u0275\u0275directiveInject(v.QS),r.\u0275\u0275directiveInject(Dc.MatBottomSheet),r.\u0275\u0275directiveInject(Jt.MatLegacyDialog),r.\u0275\u0275directiveInject(yo),r.\u0275\u0275directiveInject(Pr),r.\u0275\u0275directiveInject(r.ComponentFactoryResolver),r.\u0275\u0275directiveInject(ea),r.\u0275\u0275directiveInject(rA),r.\u0275\u0275directiveInject(WO))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-content-editor"]],contentQueries:function(t,e,o){var s;1&t&&r.\u0275\u0275contentQuery(o,AV,5),2&t&&r.\u0275\u0275queryRefresh(s=r.\u0275\u0275loadQuery())&&(e.extraActionsAreaTmpl=s.first)},viewQuery:function(t,e){var o;1&t&&(r.\u0275\u0275viewQuery(x3,5),r.\u0275\u0275viewQuery(C3,5),r.\u0275\u0275viewQuery($3,5),r.\u0275\u0275viewQuery(RV,7),r.\u0275\u0275viewQuery(DV,7),r.\u0275\u0275viewQuery(TV,5),r.\u0275\u0275viewQuery(z3,5)),2&t&&(r.\u0275\u0275queryRefresh(o=r.\u0275\u0275loadQuery())&&(e.gridLayout=o.first),r.\u0275\u0275queryRefresh(o=r.\u0275\u0275loadQuery())&&(e.splitLayout=o.first),r.\u0275\u0275queryRefresh(o=r.\u0275\u0275loadQuery())&&(e.layoutEditorHost=o.first),r.\u0275\u0275queryRefresh(o=r.\u0275\u0275loadQuery())&&(e.contextsMenuTpl=o.first),r.\u0275\u0275queryRefresh(o=r.\u0275\u0275loadQuery())&&(e.editablePaneTpl=o.first),r.\u0275\u0275queryRefresh(o=r.\u0275\u0275loadQuery())&&(e.paneContainers=o),r.\u0275\u0275queryRefresh(o=r.\u0275\u0275loadQuery())&&(e.editablePanes=o))},inputs:{panelPage:"panelPage",savable:"savable",nested:"nested",locked:"locked",pageBuilder:"pageBuilder",contexts:"contexts",rootContext:"rootContext",ancestory:"ancestory"},outputs:{submitted:"submitted",nestedUpdate:"nestedUpdate",delete:"delete",rules:"rules",props:"props"},features:[r.\u0275\u0275ProvidersFeature([{provide:v.JU,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0},{provide:v.Cf,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0}]),r.\u0275\u0275NgOnChangesFeature],decls:12,vars:3,consts:[["class","content-editor-wrapper",3,"formGroup","ngClass","ngSubmit",4,"ngIf","ngIfElse"],["nestedTpl",""],["editablePaneTpl",""],["contextsMenuTpl",""],["contextMenu","matMenu"],["type","button","mat-menu-item","",3,"click"],["type","button","mat-menu-item","",3,"click",4,"ngFor","ngForOf"],[1,"content-editor-wrapper",3,"formGroup","ngClass","ngSubmit"],["classifiedsUiLayoutEditorHost",""],[1,"content-editor-wrapper",3,"formGroup","ngClass"],[1,"editable-pane",3,"panelIndex","paneIndex","name","label","locked","contexts","pluginName","settings","ancestory","delete","rules","nestedUpdate","rendererOverride","removeRendererOverride","edit","props"],["class","custom-placeholder",4,"cdkDragPlaceholder"],[1,"custom-placeholder"],["type","button","mat-menu-item","",1,"context-button",3,"matMenuTriggerFor"]],template:function(t,e){if(1&t&&(r.\u0275\u0275template(0,OV,3,4,"form",0),r.\u0275\u0275template(1,MV,3,4,"ng-template",null,1,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275template(3,NV,2,9,"ng-template",null,2,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275template(5,ZV,2,1,"ng-template",null,3,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementStart(7,"mat-menu",null,4)(9,"button",5),r.\u0275\u0275listener("click",function(){return e.onAddContextClick()}),r.\u0275\u0275text(10,"define variable"),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(11,LV,2,1,"button",6),r.\u0275\u0275elementEnd()),2&t){var o=r.\u0275\u0275reference(2);r.\u0275\u0275property("ngIf",!e.nested&&!e.pageBuilder)("ngIfElse",o),r.\u0275\u0275advance(11),r.\u0275\u0275property("ngForOf",e.contexts)}},dependencies:[E.NgClass,E.NgForOf,E.NgIf,v._Y,v.JL,v.sg,Fc.CdkDragPlaceholder,xo.MatLegacyMenu,xo.MatLegacyMenuItem,xo.MatLegacyMenuTrigger,Ia,$3,z3],styles:[".content-editor-wrapper[_ngcontent-%COMP%]{height:100%}.panel-inner[_ngcontent-%COMP%]{padding:1em}.content-editor-wrapper[_ngcontent-%COMP%]     ngx-dropzone{height:100%;display:block;padding:0;border:none}.content-editor-wrapper.nested[_ngcontent-%COMP%]     .grid-item-header{border-bottom:1px solid white}.layout-type[_ngcontent-%COMP%], .display-type[_ngcontent-%COMP%]{float:right}.layout-type[_ngcontent-%COMP%]     .mat-form-field-wrapper, .display-type[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding-bottom:1.5em}.layout-type[_ngcontent-%COMP%]     .mat-form-field-label-wrapper, .display-type[_ngcontent-%COMP%]     .mat-form-field-label-wrapper{display:none}.layout-type[_ngcontent-%COMP%]     .mat-form-field-infix, .display-type[_ngcontent-%COMP%]     .mat-form-field-infix{border-top:none;padding:0;margin:0}.layout-type[_ngcontent-%COMP%]     .mat-form-field, .display-type[_ngcontent-%COMP%]     .mat-form-field{width:85px}.layout-type[_ngcontent-%COMP%]     .mat-select-value, .display-type[_ngcontent-%COMP%]     .mat-select-value{text-align:right}.layout-type[_ngcontent-%COMP%]     .mat-form-field-underline, .display-type[_ngcontent-%COMP%]     .mat-form-field-underline{display:none}classifieds-ui-gridless-layout[_ngcontent-%COMP%]     .main-controls{background-color:#ccc}classifieds-ui-gridless-layout[_ngcontent-%COMP%]     .layout-inner{background-color:#ccc;padding:.75em}classifieds-ui-gridless-layout[_ngcontent-%COMP%]     .editable-pane-wrapper{border:none;margin-bottom:0}classifieds-ui-gridless-layout[_ngcontent-%COMP%]     .pane-header{background-color:#fff}classifieds-ui-gridless-layout[_ngcontent-%COMP%]     .nested-panel-wrapper{padding:.75em;margin-bottom:0}.custom-placeholder[_ngcontent-%COMP%]{background:#ccc;border:dotted 3px #999;transition:transform .25s cubic-bezier(0,0,.2,1)}.context-button[_ngcontent-%COMP%]{font-style:italic;font-family:serif;font-weight:bolder;font-size:medium}"]}),a}(),OH=function(){var a=function(){function n(t,e,o){(0,p.Z)(this,n),this.data=t,this.fb=e,this.handler=o}return(0,_.Z)(n,[{key:"ngOnInit",value:function(){var e=this;void 0!==this.data.pane&&this.handler.toObject(this.data.pane.settings).subscribe(function(o){e.snippet=o})}},{key:"onSubmit",value:function(e){if(void 0===this.data.paneIndex)this.data.panelFormGroup.get("panes").push(this.fb.group({contentPlugin:"snippet",name:new v.p4(""),label:new v.p4(""),rule:new v.p4(""),settings:new v.vC(this.buildSettings(e))}));else{var o=this.data.panelFormGroup.get("panes").at(this.data.paneIndex);o.get("settings").clear(),this.buildSettings(e).forEach(function(s){o.get("settings").push(s)})}}},{key:"buildSettings",value:function(e){return[this.fb.group({name:new v.p4("contentType",v.kI.required),type:new v.p4(Bt.AttributeTypes.Text,v.kI.required),displayName:new v.p4("Content Type",v.kI.required),value:new v.p4(e.contentType,v.kI.required),computedValue:new v.p4(e.contentType,v.kI.required)}),this.fb.group({name:new v.p4("content",v.kI.required),type:new v.p4(Bt.AttributeTypes.Text,v.kI.required),displayName:new v.p4("Content",v.kI.required),value:new v.p4(e.content,v.kI.required),computedValue:new v.p4(e.content,v.kI.required)}),this.fb.group({name:new v.p4("jsScript",v.kI.required),type:new v.p4(Bt.AttributeTypes.Text,v.kI.required),displayName:new v.p4("jsScript",v.kI.required),value:new v.p4(e.jsScript),computedValue:new v.p4(e.jsScript)})]}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Jt.MAT_LEGACY_DIALOG_DATA),r.\u0275\u0275directiveInject(v.QS),r.\u0275\u0275directiveInject(Nc))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-snippet-editor2"]],decls:1,vars:1,consts:[[3,"snippet","submitted"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"classifieds-ui-snippet-form",0),r.\u0275\u0275listener("submitted",function(s){return e.onSubmit(s)}),r.\u0275\u0275elementEnd()),2&t&&r.\u0275\u0275property("snippet",e.snippet)},dependencies:[hE]}),a}(),ME=function(){var a=function(){function n(t,e,o,s,u,c,l){var m=this;(0,p.Z)(this,n),this.route=t,this.pageBuilderFacade=e,this.routerStore=o,this.asyncApiCallHelperSvc=s,this.crudDataHelperService=u,this.entityDefinitionService=c,this.paramMapSub=this.route.paramMap.pipe((0,ee.b)(function(){return console.log("param map panelPageId")}),(0,Ce.U)(function(C){return C.get("panelPageId")}),(0,Q.h)(function(C){return void 0!==C}),(0,st.w)(function(){return m.route.data}),(0,ko.M)(this.routerStore.pipe((0,Zt.Ys)(ty(function(C){return C.router}).selectCurrentRoute),(0,Ce.U)(function(C){return C.params}),(0,kn.q)(1))),(0,ee.b)(function(C){var T=(0,g.Z)(C,2),B=T[0],F=T[1];console.log("route page"),m.pageBuilderFacade.setPageInfo(new uy({id:B.panelPageListItem.id,realPath:"/pages/panelpage/"+B.panelPageListItem.id,path:B.panelPageListItem.path,args:F})),m.panelPageId=B.panelPageListItem.id})).subscribe(),this.panelPageService=l.getEntityCollectionService("PanelPage")}return(0,_.Z)(n,[{key:"ngOnInit",value:function(){var e=this,s=ty(function(u){return u.router}).selectCurrentRoute;this.route.paramMap.pipe((0,ee.b)(function(){return console.log("param map page builder facade info")}),(0,ko.M)(this.pageBuilderFacade.getPageInfo$),(0,Q.h)(function(u){var c=(0,g.Z)(u,2),l=c[0],m=c[1];return void 0!==m&&void 0!==l.get("panelPageId")&&l.get("panelPageId")===m.id}),(0,st.w)(function(u){var m=(0,g.Z)(u,2)[1];return e.routerStore.pipe((0,Zt.Ys)(s),(0,Ce.U)(function(C){return[m,C.params]}),(0,kn.q)(1))})).subscribe(function(u){var c=(0,g.Z)(u,2),m=c[1];e.pageBuilderFacade.setPageInfo(new uy((0,b.Z)((0,b.Z)({},c[0]),{},{args:m})))})}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(nr.ActivatedRoute),r.\u0275\u0275directiveInject(ea),r.\u0275\u0275directiveInject(Zt.yh),r.\u0275\u0275directiveInject(Nn.AsyncApiCallHelperService),r.\u0275\u0275directiveInject(iy),r.\u0275\u0275directiveInject(Qi),r.\u0275\u0275directiveInject(Dr))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-panel-page-router"]],decls:1,vars:1,consts:[[3,"id"]],template:function(t,e){1&t&&r.\u0275\u0275element(0,"classifieds-ui-panel-page",0),2&t&&r.\u0275\u0275property("id",e.panelPageId)},dependencies:[Ls]}),a}(),FH=function(){var a=function(){function n(t){(0,p.Z)(this,n),this.panelPageService=t.getEntityCollectionService("PanelPage"),this.panelPageListItemService=t.getEntityCollectionService("PanelPageListItem")}return(0,_.Z)(n,[{key:"ngOnInit",value:function(){console.log("here")}},{key:"onSubmit",value:function(e){console.log("create panel page",e),e.id=fr(),this.panelPageService.add(e).subscribe(function(){console.log("panel page created")})}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Dr))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-create-panel-page"]],decls:1,vars:0,consts:[[3,"submitted"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"classifieds-ui-content-editor",0),r.\u0275\u0275listener("submitted",function(s){return e.onSubmit(s)}),r.\u0275\u0275elementEnd())},dependencies:[iA]}),a}(),BE=function(){var a=function(){function n(t,e,o,s,u){(0,p.Z)(this,n),this.route=t,this.pageBuilderFacade=e,this.routerStore=o,this.moduleLoader=s,this.panelPageService=u.getEntityCollectionService("PanelPage"),this.panelPageListItemService=u.getEntityCollectionService("PanelPageListItem")}return(0,_.Z)(n,[{key:"ngOnInit",value:function(){var e=this;this.route.paramMap.pipe((0,Ce.U)(function(o){return o.get("panelPageId")}),(0,Q.h)(function(o){return void 0!==o}),(0,xu.x)(),(0,st.w)(function(o){return e.panelPageService.getByKey(o)}),(0,st.w)(function(o){return o?(0,Un.D)(o.contexts.filter(function(s){return"module"===s.plugin}).map(function(s){return e.moduleLoader.loadModule(function(){return rf({type:"module",remoteEntry:s.data.remoteEntry,exposedModule:s.data.exposedModule}).then(function(u){return u[s.data.moduleName]})})})).pipe((0,Rr.g)(1),(0,Ce.U)(function(){return o}),(0,hi.d)(o)):(0,je.of)(o)}),(0,st.w)(function(o){return e.routerStore.pipe((0,Zt.Ys)(ty(function(s){return s.router}).selectCurrentRoute),(0,Ce.U)(function(s){return[o,s.params]}),(0,kn.q)(1))}),(0,ee.b)(function(o){var s=(0,g.Z)(o,2),u=s[0],c=s[1];return e.pageBuilderFacade.setPageInfo(new uy({id:u.id,realPath:"/pages/panelpage/".concat(u.id),path:u.path,args:c}))})).subscribe(function(o){var u=(0,g.Z)(o,1)[0];console.log(u),e.panelPage=u})}},{key:"onSubmit",value:function(e){console.log("submitted"),this.panelPageService.update(new ii((0,b.Z)((0,b.Z)({},e),{},{id:this.panelPage.id}))).subscribe(function(){alert("panel page updated")})}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(nr.ActivatedRoute),r.\u0275\u0275directiveInject(ea),r.\u0275\u0275directiveInject(Zt.yh),r.\u0275\u0275directiveInject(Nn.ModuleLoaderService),r.\u0275\u0275directiveInject(Dr))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-edit-panel-page"]],decls:1,vars:1,consts:[[3,"panelPage","submitted"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"classifieds-ui-content-editor",0),r.\u0275\u0275listener("submitted",function(s){return e.onSubmit(s)}),r.\u0275\u0275elementEnd()),2&t&&r.\u0275\u0275property("panelPage",e.panelPage)},dependencies:[iA]}),a}(),MH=function(){var a=function(){function n(t,e,o,s,u,c){(0,p.Z)(this,n),this.bottomSheetRef=t,this.handler=e,this.fb=o,this.dialog=s,this.cpm=u,this.wpm=c}return(0,_.Z)(n,[{key:"ngOnInit",value:function(){this.attributeWidgets=this.wpm.getPlugins()}},{key:"onItemSelect",value:function(e){var o=this;console.log(e),this.panelFormGroup.get("panes").push(this.fb.group({contentPlugin:"attribute",name:new v.p4(""),label:new v.p4(""),rule:new v.p4(""),settings:this.fb.array(this.handler.widgetSettings(e).map(function(l){return o.fb.group({name:new v.p4(l.name,v.kI.required),type:new v.p4(l.type,v.kI.required),displayName:new v.p4(l.displayName,v.kI.required),value:new v.p4(l.value,v.kI.required),computedValue:new v.p4(l.computedValue,v.kI.required)})}))}));var s=this.panelFormGroup.get("panes"),u=s.length-1,c=new Wr(s.at(u).value);this.cpm.getPlugin("attribute").subscribe(function(l){o.dialog.open(l.editorComponent,{data:{panelFormGroup:o.panelFormGroup,pane:c,paneIndex:u}})}),this.bottomSheetRef.dismiss()}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Dc.MatBottomSheetRef),r.\u0275\u0275directiveInject(Zc),r.\u0275\u0275directiveInject(v.QS),r.\u0275\u0275directiveInject(Jt.MatLegacyDialog),r.\u0275\u0275directiveInject(fn.ContentPluginManager),r.\u0275\u0275directiveInject(Bt.WidgetPluginManager))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-attribute-selector"]],inputs:{panelFormGroup:"panelFormGroup"},decls:4,vars:5,consts:[["mat-list-item","","mat-list-item","",3,"click",4,"ngFor","ngForOf"],["mat-list-item","","mat-list-item","",3,"click"],["mat-line",""]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"mat-nav-list"),r.\u0275\u0275template(1,jV,3,1,"a",0),r.\u0275\u0275pipe(2,"keyvalue"),r.\u0275\u0275pipe(3,"async"),r.\u0275\u0275elementEnd()),2&t&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",r.\u0275\u0275pipeBind1(2,1,r.\u0275\u0275pipeBind1(3,3,e.attributeWidgets))))},dependencies:[E.NgForOf,vE.MatLine,Eu.MatLegacyNavList,Eu.MatLegacyListItem,E.AsyncPipe,E.KeyValuePipe]}),a}(),BH=function(){var a=function(){function n(t,e,o,s,u){(0,p.Z)(this,n),this.data=t,this.dialogRef=o,this.fb=s,this.handler=u,this.attributes=[],this.attributeValues=[],this.attributesFormGroup=this.fb.group({name:new v.p4(""),label:new v.p4(""),attributes:new v.p4("")});var c=this.data.pane.settings.find(function(l){return"widget"===l.name});this.widget=e.find(function(l){return l.name===c.value})}return(0,_.Z)(n,[{key:"name",get:function(){return this.attributesFormGroup.get("name")}},{key:"label",get:function(){return this.attributesFormGroup.get("label")}},{key:"ngOnInit",value:function(){var e=this.data.pane.settings.find(function(u){return"value"===u.name});this.attributes=[new Bt.Attribute((0,b.Z)((0,b.Z)({},this.widget.schema),{},{widget:this.widget.name,label:"Value",name:"value"}))];var o=this.data.panelFormGroup.get("panes").at(this.data.paneIndex).get("name").value,s=this.data.panelFormGroup.get("panes").at(this.data.paneIndex).get("label").value;this.attributesFormGroup.get("name").setValue(o),this.attributesFormGroup.get("label").setValue(s),void 0!==e?(this.attributeValues=this.handler.valueSettings(this.data.pane.settings),console.log(this.attributeValues)):this.attributeValues=[new Bt.AttributeValue({name:"value",type:this.widget.schema.type,displayName:"Value",value:"",computedValue:"",intValue:0,attributes:[]})]}},{key:"submit",value:function(){var e=this,o=this.name.value,s=this.label.value;this.data.panelFormGroup.get("panes").at(this.data.paneIndex).get("name").setValue(o),this.data.panelFormGroup.get("panes").at(this.data.paneIndex).get("label").setValue(s);var u=new Wr({name:o,label:s,contentPlugin:"attribute",settings:""===this.attributesFormGroup.get("attributes").value?[]:this.attributesFormGroup.get("attributes").value});0!==u.settings.length?this.handler.rendererSnippet(this.data.pane.settings).subscribe(function(c){var l=void 0!==c?e.handler.rendererOverrideSettings(c):[],m=e.data.panelFormGroup.get("panes").at(e.data.paneIndex).get("settings");m.clear(),[].concat((0,y.Z)(e.handler.widgetSettings(e.widget)),(0,y.Z)(u.settings),(0,y.Z)(l)).forEach(function(C){return m.push(e.convertToGroup(C))}),e.dialogRef.close()}):this.dialogRef.close()}},{key:"convertToGroup",value:function(e){var o=this,s=this.fb.group({name:new v.p4(e.name,v.kI.required),type:new v.p4(e.type,v.kI.required),displayName:new v.p4(e.displayName,v.kI.required),value:new v.p4(e.value,v.kI.required),computedValue:new v.p4(e.value,v.kI.required),attributes:new v.vC([])});return e.attributes&&e.attributes.length>0&&e.attributes.forEach(function(u){s.get("attributes").push(o.convertToGroup(u))}),s}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Jt.MAT_LEGACY_DIALOG_DATA),r.\u0275\u0275directiveInject(Bt.ATTRIBUTE_WIDGET),r.\u0275\u0275directiveInject(Jt.MatLegacyDialogRef),r.\u0275\u0275directiveInject(v.QS),r.\u0275\u0275directiveInject(Zc))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-attribute-editor"]],decls:10,vars:3,consts:[[3,"formGroup","ngSubmit"],["fxLayout","column"],["matInput","","placeholder","Name","formControlName","name"],["matInput","","placeholder","Label","formControlName","label"],["formControlName","attributes",3,"attributes","attributeValues"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close",""]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"form",0),r.\u0275\u0275listener("ngSubmit",function(){return e.submit()}),r.\u0275\u0275elementStart(1,"mat-dialog-content",1)(2,"mat-form-field"),r.\u0275\u0275element(3,"input",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"mat-form-field"),r.\u0275\u0275element(5,"input",3),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(6,"classifieds-ui-attributes-builder",4),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(7,"mat-dialog-actions")(8,"button",5),r.\u0275\u0275text(9,"Save"),r.\u0275\u0275elementEnd()()()),2&t&&(r.\u0275\u0275property("formGroup",e.attributesFormGroup),r.\u0275\u0275advance(6),r.\u0275\u0275property("attributes",e.attributes)("attributeValues",e.attributeValues))},dependencies:[v._Y,v.Fj,v.JJ,v.JL,v.sg,v.u,pi.MatLegacyButton,Jt.MatLegacyDialogClose,Jt.MatLegacyDialogContent,Jt.MatLegacyDialogActions,En.MatLegacyFormField,Hr.MatLegacyInput,Wt,Bt.AttributesBuilderComponent]}),a}(),NH=function(){var a=function(){function n(t,e,o,s,u){(0,p.Z)(this,n),this.widgets=t,this.handler=e,this.tokenizerService=o,this.fb=s,this.controlContainer=u,this.settings=[],this.appearance="legacy",this.attributes=[]}return(0,_.Z)(n,[{key:"ngOnInit",value:function(){var e=this;this.attributes=[new Bt.Attribute((0,b.Z)((0,b.Z)({},this.widgets.find(function(o){return o.name===e.settings.find(function(s){return"widget"===s.name}).value}).schema),{},{name:"value",label:"Value"}))],this.attributeValues=this.handler.valueSettings(this.settings),this.tokens=this.tokenizerService.generateTokens(this.attributeValues),this.handler.rendererSnippet(this.settings).subscribe(function(o){e.rendererOverride=o,void 0!==o&&(e.rendererSettings=e.handler.rendererOverrideSettings(o)[0].attributes)})}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Bt.ATTRIBUTE_WIDGET),r.\u0275\u0275directiveInject(Zc),r.\u0275\u0275directiveInject(Pr),r.\u0275\u0275directiveInject(v.QS),r.\u0275\u0275directiveInject(v.gN,8))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-attribute-pane-renderer"]],inputs:{settings:"settings",appearance:"appearance",name:"name",label:"label",displayType:"displayType"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["overrideTpl",""],[4,"ngIf"],[3,"formGroup",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["settingsTmpl",""],[4,"ngFor","ngForOf"],[3,"formGroup"],["formControlName","settings",3,"attributes","attributeValues"],[3,"settings","tokens"]],template:function(t,e){if(1&t&&(r.\u0275\u0275template(0,XV,3,2,"div",0),r.\u0275\u0275template(1,QV,1,2,"ng-template",null,1,r.\u0275\u0275templateRefExtractor)),2&t){var o=r.\u0275\u0275reference(2);r.\u0275\u0275property("ngIf",!e.rendererOverride)("ngIfElse",o)}},dependencies:[E.NgForOf,E.NgIf,E.NgTemplateOutlet,v.JJ,v.JL,v.sg,v.u,Bt.AttributesBuilderComponent,L3,Bt.AttributePipe],styles:[".override[_ngcontent-%COMP%]{position:absolute;top:.5em;right:.5em}"]}),a}(),af=function(){var a=function(){function n(t,e){(0,p.Z)(this,n),this.filesService=t,this.attributeSerializer=e,this.types=["image/png","image/jpg","image/jpeg","image/gif"]}return(0,_.Z)(n,[{key:"handleFile",value:function(e){var o=this;return this.filesService.bulkUpload({files:[e]}).pipe((0,Ce.U)(function(s){return o.buildSettings(s[0])}))}},{key:"handlesType",value:function(e){return void 0!==this.types.find(function(o){return o===e})}},{key:"implementsRendererOverride",value:function(){return!1}},{key:"hasRendererOverride",value:function(e){return(0,je.of)(!1)}},{key:"isDynamic",value:function(e){return!1}},{key:"isData",value:function(e){return!1}},{key:"buildDynamicItems",value:function(e,o){return(0,je.of)([])}},{key:"fetchDynamicData",value:function(e,o){return(0,je.of)(new pr)}},{key:"getBindings",value:function(e,o,s){return(0,je.of)([])}},{key:"toObject",value:function(e){return(0,je.of)(this.attributeSerializer.deserializeAsObject(e))}},{key:"buildSettings",value:function(e){return e.fileName="placeholdername",this.attributeSerializer.serialize(e,"root").attributes}},{key:"stateDefinition",value:function(e){return(0,je.of)({mediaLoading:"y",mediaLoaded:"n",loadError:"n",loadDuration:"y"})}},{key:"editorOptions",value:function(e){return(0,je.of)(new fn.ContentPluginEditorOptions)}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(iE),r.\u0275\u0275inject(Bt.AttributeSerializerService))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),ZH=function(){var a=function(){function n(t,e,o,s,u){(0,p.Z)(this,n),this.data=t,this.dialogRef=e,this.fb=o,this.filesService=s,this.handler=u,this.mediaTypes=".png,.jpg,.jpeg,.gif,.svg"}return(0,_.Z)(n,[{key:"ngOnInit",value:function(){var e=this;void 0!==this.data.pane&&this.handler.toObject(this.data.pane.settings).pipe((0,st.w)(function(o){return e.filesService.convertToFiles([o])})).subscribe(function(o){e.media=o[0]})}},{key:"onSelectMedia",value:function(e){var o=this;this.media=e.addedFiles[0],this.handler.handleFile(this.media).subscribe(function(s){void 0===o.data.paneIndex&&o.data.panelFormGroup.get("panes").push(o.fb.group({contentPlugin:"media",name:new v.p4(""),label:new v.p4(""),rule:new v.p4(""),settings:new v.vC(s.map(function(u){return o.fb.group({name:new v.p4(u.name,v.kI.required),type:new v.p4(u.type,v.kI.required),displayName:new v.p4(u.displayName,v.kI.required),value:new v.p4(u.value,v.kI.required),computedValue:new v.p4(u.value,v.kI.required)})}))})),o.dialogRef.close()})}},{key:"onRemoveMedia",value:function(e){this.media=void 0}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Jt.MAT_LEGACY_DIALOG_DATA),r.\u0275\u0275directiveInject(Jt.MatLegacyDialogRef),r.\u0275\u0275directiveInject(v.QS),r.\u0275\u0275directiveInject(iE),r.\u0275\u0275directiveInject(af))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-media-editor"]],decls:4,vars:3,consts:[[3,"multiple","accept","change"],[3,"removable","file","removed",4,"ngIf"],[3,"removable","file","removed"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"ngx-dropzone",0),r.\u0275\u0275listener("change",function(s){return e.onSelectMedia(s)}),r.\u0275\u0275elementStart(1,"ngx-dropzone-label"),r.\u0275\u0275text(2,"Drag and Drop Media Here"),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(3,JV,3,4,"ngx-dropzone-image-preview",1),r.\u0275\u0275elementEnd()),2&t&&(r.\u0275\u0275property("multiple",!1)("accept",e.mediaTypes),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngIf",e.media))},dependencies:[E.NgIf,SE,t3,r3]}),a}(),LH=function(){var a=function(){function n(t,e,o,s){(0,p.Z)(this,n),this.mediaSettings=t,this.handler=e,this.attributeSerializer=o,this.settings=[],this.ancestory=[],this.state={},this.stateChange=new r.EventEmitter,this.panelPageStateService=s.getEntityCollectionService("PanelPageState")}return(0,_.Z)(n,[{key:"ngOnInit",value:function(){var e=this;console.log("media ancestory is"),console.log(this.ancestory),console.log("my state is:"),console.log(this.state),this.mediaBaseUrl=this.mediaSettings.imageUrl,this.handler.toObject(this.settings).subscribe(function(o){e.mediaFile=o})}},{key:"ngAfterViewInit",value:function(){var e=this;this.image.nativeElement.onload=function(){console.log("image loaded"),e.stateChange.emit({mediaLoading:"n"})}}},{key:"ngOnChanges",value:function(){var e=this;this.mediaBaseUrl=this.mediaSettings.imageUrl,this.handler.toObject(this.settings).subscribe(function(o){e.mediaFile=o})}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(rE),r.\u0275\u0275directiveInject(af),r.\u0275\u0275directiveInject(Bt.AttributeSerializerService),r.\u0275\u0275directiveInject(Dr))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-media-pane-renderer"]],viewQuery:function(t,e){var o;1&t&&r.\u0275\u0275viewQuery(YV,7),2&t&&r.\u0275\u0275queryRefresh(o=r.\u0275\u0275loadQuery())&&(e.image=o.first)},inputs:{settings:"settings",ancestory:"ancestory",state:"state"},outputs:{stateChange:"stateChange"},features:[r.\u0275\u0275NgOnChangesFeature],decls:2,vars:2,consts:[[3,"src"],["img",""]],template:function(t,e){1&t&&r.\u0275\u0275element(0,"img",0,1),2&t&&r.\u0275\u0275propertyInterpolate2("src","",e.mediaBaseUrl,"/",e.mediaFile.path,"",r.\u0275\u0275sanitizeUrl)},styles:["img[_ngcontent-%COMP%]{max-width:100%}"]}),a}(),Cy=function(){var a=function(){function n(t,e,o,s,u,c,l,m,C){(0,p.Z)(this,n),this.siteName=t,this.snippetHandler=e,this.pageBuilderFacade=o,this.store=s,this.tokenizerService=u,this.panelHandler=c,this.urlGeneratorService=l,this.attributeSerializer=m,this.rulesResolver=C}return(0,_.Z)(n,[{key:"handleFile",value:function(e){return(0,je.of)([])}},{key:"handlesType",value:function(e){return!1}},{key:"implementsRendererOverride",value:function(){return!0}},{key:"hasRendererOverride",value:function(e){return(0,je.of)(!1)}},{key:"isDynamic",value:function(e){return["snippet","pane"].indexOf(this.getRenderType(e))>-1}},{key:"isData",value:function(e){return!1}},{key:"fetchDynamicData",value:function(e,o){var s=this,u=new se.x;return this.toObject(e).pipe((0,st.w)(function(c){return s.urlGeneratorService.getUrl(c.url,c.params,o).pipe((0,Ce.U)(function(l){return[c,l]}))})).subscribe(function(c){var l=(0,g.Z)(c,2),m=l[0],C=l[1];s.pageBuilderFacade.loadRestData("".concat(o.get("tag")),new Os((0,b.Z)((0,b.Z)({},m),{},{url:C}))),s.store.pipe((0,Zt.Ys)(wE("".concat(o.get("tag")))),(0,Q.h)(function(T){return void 0!==T})).subscribe(function(T){u.next(T),u.complete()})}),u}},{key:"buildDynamicItems",value:function(e,o){var s=this,u=new se.x;return console.log("build dynamic items rest"),this.toObject(e).pipe((0,st.w)(function(c){return s.urlGeneratorService.getUrl(c.url,c.params,o).pipe((0,Ce.U)(function(l){return[c,l]}))})).subscribe(function(c){var l=(0,g.Z)(c,2),m=l[0],C=l[1];console.log("Load in rest data"),s.pageBuilderFacade.loadRestData("".concat(o.get("tag")),new Os((0,b.Z)((0,b.Z)({},m),{},{url:C}))),s.store.pipe((0,Zt.Ys)(wE("".concat(o.get("tag")))),(0,Q.h)(function(T){return void 0!==T}),(0,st.w)(function(T){return s.getBindings(e,"pane").pipe((0,Ce.U)(function(B){return[T,B]}))}),(0,st.w)(function(T){var B=(0,g.Z)(T,2),F=B[0],U=B[1];return Or(function(){return 0!==F.results.length&&U.length>0},new W.y(function(ae){(0,Un.D)(F.results.map(function(ue){return(0,wk.D)(U).pipe((0,Ce.U)(function(me){return o.get("panes").find(function(Se){return Se.name===me.id})}),(0,st.w)(function(me){return Or(function(){return me.rule&&null!==me.rule&&""!==me.rule.condition},s.rulesResolver.evaluate(me.rule,[].concat((0,y.Z)(o.get("contexts")),(0,y.Z)(void 0!==me.contexts?me.contexts:[]),[new co({name:"_root",adaptor:"data",data:ue})])).pipe((0,Ce.U)(function(Se){return[me,Se]})),(0,je.of)(!1).pipe((0,Ce.U)(function(Se){return[me,Se]})))}),(0,Q.h)(function(me){return(0,g.Z)(me,2)[1]}),(0,Ce.U)(function(me){return(0,g.Z)(me,2)[0].name}),(0,hi.d)(U[0].id),(0,kn.q)(1))})).pipe((0,Ce.U)(function(ue){return[F,ue]})).subscribe(function(ue){ae.next(ue),ae.complete()})}),new W.y(function(ae){ae.next([F]),ae.complete()}))}),(0,Ce.U)(function(T){var B=(0,g.Z)(T,2),U=B[1];return B[0].results.map("pane"===m.renderer.type?function(ae,ue){var me=o.get("panes").find(function(we){return we.name===U[ue]}),Se=fr();return new Wr((0,b.Z)((0,b.Z)({},me),{},{rule:void 0,label:Se,contexts:[].concat((0,y.Z)(o.get("contexts")),[new co({name:"_root",adaptor:"data",data:ae})])}))}:function(ae){return new Wr({contentPlugin:"snippet",name:fr(),label:void 0,contexts:[].concat((0,y.Z)(o.get("contexts")),[new co({name:"_root",adaptor:"data",data:ae})]),settings:s.snippetHandler.buildSettings((0,b.Z)((0,b.Z)({},m.renderer.data),{},{content:m.renderer.data.content}))})})}),(0,Ce.U)(function(T){return new Bs({stylePlugin:void 0,settings:[],panes:T,columnSetting:new br})}),(0,Ce.U)(function(T){return s.panelHandler.buildSettings(new ii({id:void 0,layoutType:"grid",displayType:"page",site:s.siteName,gridItems:[],layoutSetting:new br,rowSettings:[],panels:[T]}))})).subscribe(function(T){u.next(T.find(function(B){return"panels"===B.name}).attributes[0].attributes.find(function(B){return"panes"===B.name}).attributes),u.complete()})}),u}},{key:"buildSelectOptionItems",value:function(e,o){var s=this;return this.toObject(e).pipe((0,st.w)(function(u){return s.urlGeneratorService.getUrl(u.url,u.params,o).pipe((0,Ce.U)(function(c){return[u,c]}))}),(0,Ce.U)(function(u){var c=(0,g.Z)(u,2),m=c[1];return new Os((0,b.Z)((0,b.Z)({},c[0]),{},{url:m}))})).subscribe(function(u){s.pageBuilderFacade.loadRestData("".concat(o.get("tag")),u)}),this.store.pipe((0,Zt.Ys)(wE("".concat(o.get("tag")))),(0,Q.h)(function(u){return void 0!==u}),(0,Ce.U)(function(u){return[u,u.results.map(function(c){return s.tokenizerService.generateGenericTokens(c)})]}),(0,Ce.U)(function(u){var c=(0,g.Z)(u,2);return[c[0],c[1],new oO(JSON.parse(o.get("snippet").content))]}),(0,Ce.U)(function(u){var c=(0,g.Z)(u,3),l=c[0],C=c[2];return c[1].map(function(T,B){return new iO({dataItem:l.results[B],value:s.attributeSerializer.serialize("[.]"===C.value?l.results[B]:s.tokenizerService.replaceTokens(C.value,T),"value"),label:s.tokenizerService.replaceTokens(C.label,T)})})}))}},{key:"getBindings",value:function(e,o,s){return"context"===o?this.toObject(e).pipe((0,Ce.U)(function(u){return u.params.reduce(function(c,l){return[].concat((0,y.Z)(c),(0,y.Z)("form"===l.mapping.type?[new fn.ContentBinding({id:"form__".concat(l.mapping.value.split(".",2)[0].trim()),type:"context"})]:[]))},[])})):this.toObject(e).pipe((0,st.w)(function(u){return Or(function(){return u.renderer.type===o},(0,je.of)(u.renderer.bindings),(0,je.of)([]))}))}},{key:"toObject",value:function(e){return(0,je.of)(this.attributeSerializer.deserializeAsObject(e))}},{key:"buildSettings",value:function(e){return this.attributeSerializer.serialize(e,"root").attributes}},{key:"getRenderType",value:function(e){var o=[e.find(function(s){return"renderer"===s.name})].map(function(s){return s.attributes.find(function(u){return"type"===u.name})});return o.length>0?o[0].value:void 0}},{key:"stateDefinition",value:function(e){return(0,je.of)({autocomplete:{input:""}})}},{key:"editorOptions",value:function(e){return(0,je.of)(new fn.ContentPluginEditorOptions)}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Nn.SITE_NAME),r.\u0275\u0275inject(Nc),r.\u0275\u0275inject(ea),r.\u0275\u0275inject(Zt.yh),r.\u0275\u0275inject(Pr),r.\u0275\u0275inject(yo),r.\u0275\u0275inject(ny),r.\u0275\u0275inject(Bt.AttributeSerializerService),r.\u0275\u0275inject(Ck))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),jH=function(){var a=function(){function n(t,e){(0,p.Z)(this,n),this.fb=t,this.tokenizerService=e,this.panes=[],this.submitted=new r.EventEmitter,this.contexts=[],this.forms=[],this.snippetValidation=!0,this.restForm=this.fb.group({source:this.fb.control(""),renderer:this.fb.group({type:"snippet",query:this.fb.control(""),trackBy:this.fb.control(""),data:this.fb.control(""),bindings:this.fb.array([]),select:this.fb.group({value:this.fb.control(""),label:this.fb.control(""),id:this.fb.control(""),multiple:this.fb.control(""),limit:this.fb.control("")})})})}return(0,_.Z)(n,[{key:"rest",set:function(e){var o=this;void 0!==e&&(this._rest=e,this.restForm.setValue({renderer:(0,b.Z)((0,b.Z)({trackBy:"",query:""},e.renderer),{},{data:e.renderer.data?(0,b.Z)((0,b.Z)({},e.renderer.data),{},{jsScript:e.renderer.data.jsScript?e.renderer.data.jsScript:""}):{content:"",contentType:"",jsScript:""},select:["pane","snippet"].findIndex(function(u){return u===e.renderer.type})>-1?{value:"",label:"",id:"",multiple:"",limit:""}:JSON.parse(e.renderer.data.content),bindings:[]}),source:{url:"",params:[],method:"",body:""}}),"pane"===e.renderer.type&&(this.bindings.clear(),e.renderer.bindings.forEach(function(u){"pane"===u.type&&o.bindings.push(o.fb.group({id:o.fb.control(u.id,v.kI.required),type:o.fb.control(u.type,v.kI.required)}))})),"pane"===e.renderer.type?this.restForm.get("renderer").get("data").disable():this.restForm.get("renderer").get("data").enable(),setTimeout(function(){o.restSource={url:e.url,params:e.params,method:e.method?e.method:"",body:e.body?(0,b.Z)((0,b.Z)({},e.body),{},{jsScript:""}):""},o.sourceForm.refreshData$.next(void 0)}))}},{key:"rendererType",get:function(){return this.restForm.get("renderer").get("type")}},{key:"isSelectable",get:function(){return this.restForm.get("renderer").get("type").value&&"snippet"!==this.restForm.get("renderer").get("type").value&&"pane"!==this.restForm.get("renderer").get("type").value}},{key:"bindings",get:function(){return this.restForm.get("renderer").get("bindings")}},{key:"valid",get:function(){return this.restForm.valid}},{key:"ngOnInit",value:function(){var e=this;console.log(this.contexts),this.restForm.get("renderer").get("type").valueChanges.subscribe(function(o){"pane"===e.rendererType.value?e.restForm.get("renderer").get("data").disable():e.restForm.get("renderer").get("data").enable(),e.restForm.get("renderer").get("data").setValue({contentType:"",content:"",jsScript:""})}),this.restForm.get("renderer").get("select").valueChanges.subscribe(function(o){e.restForm.get("renderer").get("data").setValue({contentType:"application/json",content:JSON.stringify({value:o.value,label:o.label,id:o.id,multiple:o.multiple,limit:o.limit}),jsScript:""})})}},{key:"ngAfterViewInit",value:function(){}},{key:"onDataChange",value:function(e){this.tokens=this.tokenizerService.generateGenericTokens(e[0])}},{key:"addPane",value:function(){this.bindings.push(this.fb.group({type:this.fb.control("pane",v.kI.required),id:this.fb.control("",v.kI.required)}))}},{key:"submit",value:function(){var e=new Os((0,b.Z)((0,b.Z)({},this.restForm.value),{},{url:this.restForm.value.source.url,params:this.restForm.value.source.params,method:this.restForm.value.source.method,body:this.restForm.value.source.body}));this.submitted.emit(e)}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(v.QS),r.\u0275\u0275directiveInject(Pr))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-rest-form"]],viewQuery:function(t,e){var o;1&t&&r.\u0275\u0275viewQuery(vy,7),2&t&&r.\u0275\u0275queryRefresh(o=r.\u0275\u0275loadQuery())&&(e.sourceForm=o.first)},inputs:{panes:"panes",contexts:"contexts",rest:"rest"},outputs:{submitted:"submitted"},decls:34,vars:9,consts:[[1,"rest-form",3,"formGroup","ngSubmit"],["direction","vertical",1,"content-inner"],["as-split-area","","size","50"],["formControlName","source",3,"contexts","restSource","dataChange"],["size","50","formGroupName","renderer"],["matInput","","formControlName","query","placeholder","Query"],["matInput","","formControlName","trackBy","placeholder","Track By"],["required","","formControlName","type"],["label","Output"],["value","snippet"],["value","pane"],["label","Input"],["value","select"],["value","radiogroup"],["value","checkboxgroup"],["value","autocomplete"],["formControlName","data","splitDirection","horizontal","rows","10","cols","40",3,"hidden","rootForm","tokens"],["formArrayName","bindings",4,"ngIf"],["formGroupName","select",4,"ngIf"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"],["formArrayName","bindings"],["type","button",3,"click"],[4,"ngFor","ngForOf"],[3,"formGroupName"],["required","","formControlName","id"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["formGroupName","select"],["matInput","","formControlName","id","placeholder","Id"],["matInput","","formControlName","value","placeholder","Value"],["matInput","","formControlName","label","placeholder","Label"],["formControlName","multiple"],["matInput","","formControlName","limit","placeholder","Limit"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"form",0),r.\u0275\u0275listener("ngSubmit",function(){return e.submit()}),r.\u0275\u0275elementStart(1,"mat-dialog-content")(2,"as-split",1)(3,"div",2)(4,"classifieds-ui-rest-source-form",3),r.\u0275\u0275listener("dataChange",function(s){return e.onDataChange(s)}),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(5,"as-split-area",4)(6,"mat-form-field"),r.\u0275\u0275element(7,"input",5),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(8,"mat-form-field"),r.\u0275\u0275element(9,"input",6),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(10,"mat-form-field")(11,"mat-label"),r.\u0275\u0275text(12,"Type"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(13,"mat-select",7)(14,"mat-optgroup",8)(15,"mat-option",9),r.\u0275\u0275text(16,"Snippet"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(17,"mat-option",10),r.\u0275\u0275text(18,"Pane"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(19,"mat-optgroup",11)(20,"mat-option",12),r.\u0275\u0275text(21,"Select"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(22,"mat-option",13),r.\u0275\u0275text(23,"Radio Group"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(24,"mat-option",14),r.\u0275\u0275text(25,"Checkbox Group"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(26,"mat-option",15),r.\u0275\u0275text(27,"Autocomplete"),r.\u0275\u0275elementEnd()()()(),r.\u0275\u0275element(28,"classifieds-ui-snippet-form",16),r.\u0275\u0275template(29,nH,5,1,"div",17),r.\u0275\u0275template(30,rH,12,0,"div",18),r.\u0275\u0275elementEnd()()(),r.\u0275\u0275elementStart(31,"mat-dialog-actions")(32,"button",19),r.\u0275\u0275text(33,"Save"),r.\u0275\u0275elementEnd()()()),2&t&&(r.\u0275\u0275property("formGroup",e.restForm),r.\u0275\u0275advance(4),r.\u0275\u0275property("contexts",e.contexts)("restSource",e.restSource),r.\u0275\u0275advance(24),r.\u0275\u0275property("hidden","snippet"!=e.rendererType.value)("rootForm",!1)("tokens",e.tokens),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","pane"==e.rendererType.value),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.isSelectable),r.\u0275\u0275advance(2),r.\u0275\u0275property("disabled",!e.valid))},dependencies:[E.NgForOf,E.NgIf,v._Y,v.Fj,v.JJ,v.JL,v.Q7,v.sg,v.u,v.x0,v.CE,bi.MatLegacyOption,bi.MatLegacyOptgroup,pi.MatLegacyButton,Y_.MatLegacyCheckbox,Jt.MatLegacyDialogClose,Jt.MatLegacyDialogContent,Jt.MatLegacyDialogActions,En.MatLegacyFormField,En.MatLegacyLabel,Hr.MatLegacyInput,Fi.MatLegacySelect,W_,X_,vy,hE],styles:[".rest-form[_ngcontent-%COMP%]     .content-inner{height:auto}"]}),a}(),$H=function(){var a=function(){function n(t,e,o,s){(0,p.Z)(this,n),this.data=t,this.dialogRef=e,this.fb=o,this.handler=s,this.panes=[],this.contexts=[],this.contexts=this.data.contexts}return(0,_.Z)(n,[{key:"ngOnInit",value:function(){var e=this;this.panes=this.data.panelFormGroup.get("panes").controls.reduce(function(o,s){return s.get("name").value?[].concat((0,y.Z)(o),[s.get("name").value]):(0,y.Z)(o)},[]),void 0!==this.data.pane&&this.handler.toObject(this.data.pane.settings).subscribe(function(o){e.rest=o})}},{key:"submitted",value:function(e){var o=this,s=this.data.panelFormGroup.get("panes");if(void 0===this.data.paneIndex)s.push(this.fb.group({contentPlugin:"rest",name:new v.p4(""),label:new v.p4(""),rule:new v.p4(""),settings:this.fb.array(this.handler.buildSettings(e).map(function(c){return o.convertToGroup(c)}))})),this.data.contentAdded.next([this.data.panelIndex,s.length-1]);else{var u=s.at(this.data.paneIndex);u.get("settings").clear(),this.handler.buildSettings(e).forEach(function(c){u.get("settings").push(o.convertToGroup(c))})}this.dialogRef.close()}},{key:"convertToGroup",value:function(e){var o=this,s=this.fb.group({name:new v.p4(e.name,v.kI.required),type:new v.p4(e.type,v.kI.required),displayName:new v.p4(e.displayName,v.kI.required),value:new v.p4(e.value,v.kI.required),computedValue:new v.p4(e.value,v.kI.required),attributes:new v.vC([])});return e.attributes&&e.attributes.length>0&&e.attributes.forEach(function(u){s.get("attributes").push(o.convertToGroup(u))}),s}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Jt.MAT_LEGACY_DIALOG_DATA),r.\u0275\u0275directiveInject(Jt.MatLegacyDialogRef),r.\u0275\u0275directiveInject(v.QS),r.\u0275\u0275directiveInject(Cy))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-rest-editor"]],decls:1,vars:3,consts:[[3,"panes","rest","contexts","submitted"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"classifieds-ui-rest-form",0),r.\u0275\u0275listener("submitted",function(s){return e.submitted(s)}),r.\u0275\u0275elementEnd()),2&t&&r.\u0275\u0275property("panes",e.panes)("rest",e.rest)("contexts",e.contexts)},dependencies:[jH]}),a}(),UH=function(){var a=function(){function n(t,e,o){var s=this;(0,p.Z)(this,n),this.fb=t,this.attributeSerializer=e,this.tokenizerService=o,this.searchChange=new r.EventEmitter,this.selectionForm=this.fb.group({attributes:this.fb.array([])}),this.onTouched=function(){},this.displayAuto=function(u){return o.replaceTokens(s.selectMapping.label,s.tokenizerService.generateGenericTokens(u.dataItem))}}return(0,_.Z)(n,[{key:"values",set:function(e){this.options=e,this.buildOptions()}},{key:"attributesArray",get:function(){return this.selectionForm.get("attributes")}},{key:"ngOnInit",value:function(){var e=this;this.attributesArray.push(this.fb.group({name:new v.p4("value",v.kI.required),type:new v.p4(Bt.AttributeTypes.Array,v.kI.required),displayName:new v.p4("Value",v.kI.required),value:new v.p4(""),attributes:["checkboxgroup"].findIndex(function(o){return o===e.renderType})>-1?this.fb.array([]):new v.p4("")})),"autocomplete"===this.renderType&&(this.attributesArray.at(0).addControl("_proxy",this.fb.control("")),this.attributesArray.at(0).get("_proxy").valueChanges.pipe((0,xu.x)(),(0,kr.b)(500)).subscribe(function(o){e.searchChange.emit(o)}))}},{key:"onOptionSelected",value:function(e){this.attributesArray.at(0).get("attributes").setValue(e.option.value.value),this.attributesArray.at(0).get("attributes").updateValueAndValidity()}},{key:"writeValue",value:function(e){e&&this.attributesArray.setValue(e,{emitEvent:!1})}},{key:"registerOnChange",value:function(e){this.attributesArray.valueChanges.subscribe(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){e?this.attributesArray.disable():this.attributesArray.enable()}},{key:"validate",value:function(e){return this.selectionForm.valid?null:{invalidForm:{valid:!1,message:"selection is invalid"}}}},{key:"buildOptions",value:function(){var e=this;if("checkboxgroup"===this.renderType&&void 0!==this.options){var o=this.attributesArray.controls[0].get("attributes");o.clear(),this.options.forEach(function(s){var u=e.attributeSerializer.convertToGroup(s.value);u.addControl("_store",new v.p4(!1)),o.push(u)})}}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(v.QS),r.\u0275\u0275directiveInject(Bt.AttributeSerializerService),r.\u0275\u0275directiveInject(Pr))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-selection"]],inputs:{name:"name",label:"label",values:"values",renderType:"renderType",selectMapping:"selectMapping"},outputs:{searchChange:"searchChange"},features:[r.\u0275\u0275ProvidersFeature([{provide:v.JU,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0},{provide:v.Cf,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0}])],decls:9,vars:6,consts:[[3,"formGroup"],["formArrayName","attributes"],["formGroupName","0"],[3,"ngSwitch"],[4,"ngSwitchCase"],["formControlName","attributes"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[4,"ngFor","ngForOf"],[3,"formGroupName"],["formControlName","_store"],["matInput","","formControlName","_proxy",3,"placeholder","matAutocomplete"],[3,"displayWith","optionSelected"],["autocomplete","matAutocomplete"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"div"),r.\u0275\u0275elementContainerStart(4,3),r.\u0275\u0275template(5,oH,6,2,"ng-container",4),r.\u0275\u0275template(6,sH,6,2,"ng-container",4),r.\u0275\u0275template(7,cH,4,1,"ng-container",4),r.\u0275\u0275template(8,dH,6,4,"ng-container",4),r.\u0275\u0275elementContainerEnd(),r.\u0275\u0275elementEnd()()()()),2&t&&(r.\u0275\u0275property("formGroup",e.selectionForm),r.\u0275\u0275advance(4),r.\u0275\u0275property("ngSwitch",e.renderType),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngSwitchCase","select"),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngSwitchCase","radiogroup"),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngSwitchCase","checkboxgroup"),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngSwitchCase","autocomplete"))},dependencies:[E.NgForOf,E.NgSwitch,E.NgSwitchCase,v.Fj,v.JJ,v.JL,v.sg,v.u,v.x0,v.CE,TE.MatLegacyAutocomplete,TE.MatLegacyAutocompleteTrigger,bi.MatLegacyOption,Y_.MatLegacyCheckbox,En.MatLegacyFormField,En.MatLegacyLabel,Hr.MatLegacyInput,IE.MatLegacyRadioGroup,IE.MatLegacyRadioButton,Fi.MatLegacySelect]}),a}(),zH=function(){var a=function(){function n(t,e){(0,p.Z)(this,n),this.restHandler=t,this.controlContainer=e,this.settings=[],this.contexts=[],this.state={},this.stateChange=new r.EventEmitter,this.tag=fr(),this.searchChange$=new se.x}return(0,_.Z)(n,[{key:"renderType",get:function(){return this.restHandler.getRenderType(this.settings)}},{key:"ngOnInit",value:function(){var e=this;this.restHandler.toObject(this.settings).pipe((0,ee.b)(function(o){e.snippet=o.renderer.data,e.selectMapping=new oO(JSON.parse(e.snippet.content))}),(0,Q.h)(function(){return"autocomplete"!==e.renderType}),(0,st.w)(function(o){return e.restHandler.buildSelectOptionItems(e.settings,new Map([["tag",e.tag],["snippet",o.renderer.data],["contexts",e.contexts]]))})).subscribe(function(o){e.options=o}),this.searchChange$.pipe((0,ee.b)(function(o){e.stateChange.emit({autocomplete:{input:o}})}),(0,st.w)(function(o){return e.restHandler.buildSelectOptionItems(e.settings,new Map([["tag",fr()],["snippet",e.snippet],["contexts",e.contexts]]))})).subscribe(function(o){e.options=o})}},{key:"onSearchChange",value:function(e){this.searchChange$.next(e)}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Cy),r.\u0275\u0275directiveInject(v.gN))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-rest-pane-renderer"]],inputs:{settings:"settings",name:"name",label:"label",displayType:"displayType",contexts:"contexts",state:"state"},outputs:{stateChange:"stateChange"},decls:2,vars:6,consts:[[3,"formGroup"],["formControlName","settings",3,"name","label","renderType","values","selectMapping","searchChange"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"div",0)(1,"classifieds-ui-selection",1),r.\u0275\u0275listener("searchChange",function(s){return e.onSearchChange(s)}),r.\u0275\u0275elementEnd()()),2&t&&(r.\u0275\u0275property("formGroup",e.controlContainer.control),r.\u0275\u0275advance(1),r.\u0275\u0275property("name",e.name)("label",e.label)("renderType",e.renderType)("values",e.options)("selectMapping",e.selectMapping))},dependencies:[v.JJ,v.JL,v.sg,v.u,UH]}),a}(),NE=function(){var a=function(){function n(t,e,o,s,u,c){(0,p.Z)(this,n),this.siteName=t,this.tokenizerService=e,this.panelHandler=o,this.mediaHandler=s,this.attributeSerializer=u,this.inlineContextResolver=c}return(0,_.Z)(n,[{key:"handleFile",value:function(e){return(0,je.of)()}},{key:"handlesType",value:function(e){return!1}},{key:"implementsRendererOverride",value:function(){return!1}},{key:"hasRendererOverride",value:function(e){return(0,je.of)(!1)}},{key:"isDynamic",value:function(e){return!0}},{key:"isData",value:function(e){return!1}},{key:"fetchDynamicData",value:function(e,o){return(0,je.of)(new pr)}},{key:"buildDynamicItems",value:function(e,o){var s=this;return this.toObject(e).pipe((0,Ce.U)(function(u){return[u,o.get("contexts").find(function(c){return c.name===u.context})]}),(0,st.w)(function(u){var c=(0,g.Z)(u,2),l=c[0],m=c[1];return s.extractDataArray(m,l.query).pipe((0,Ce.U)(function(C){return[l,m,C]}))}),(0,st.w)(function(u){var c=(0,g.Z)(u,3);return s.transformDataArray(c[2],c[0].plugin)}),(0,Ce.U)(function(u){return new Bs({stylePlugin:void 0,settings:[],panes:u,columnSetting:new br})}),(0,Ce.U)(function(u){return s.panelHandler.buildSettings(new ii({id:void 0,layoutType:"grid",displayType:"page",site:s.siteName,gridItems:[],layoutSetting:new br,rowSettings:[],panels:[u]}))}),(0,Ce.U)(function(u){return u.find(function(c){return"panels"===c.name}).attributes[0].attributes.find(function(c){return"panes"===c.name}).attributes}))}},{key:"getBindings",value:function(e,o,s){return"context"===o?this.toObject(e).pipe((0,Ce.U)(function(u){return[new fn.ContentBinding({id:u.context,type:"context"})]})):(0,je.of)([])}},{key:"toObject",value:function(e){return(0,je.of)(this.attributeSerializer.deserializeAsObject(e))}},{key:"buildSettings",value:function(e){return this.attributeSerializer.serialize(e,"root").attributes}},{key:"extractDataArray",value:function(e,o){return this.inlineContextResolver.resolve(e).pipe((0,Ce.U)(function(s){var u=o.split("."),c=u.length;if(void 0===e)return(0,je.of)([]);for(var l=Array.isArray(s)?s[0]:s,m=0;m<c;m++)""!==u[m]&&(l=l[u[m]]);return l}))}},{key:"transformDataArray",value:function(e,o){var s=this;return"media"===o?(0,je.of)(e.map(function(u){return new nk(u)}).map(function(u){return new Wr({contentPlugin:"media",name:void 0,label:void 0,settings:s.mediaHandler.buildSettings(u)})})):(0,je.of)()}},{key:"stateDefinition",value:function(e){return(0,je.of)({})}},{key:"editorOptions",value:function(e){return(0,je.of)(new fn.ContentPluginEditorOptions)}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Nn.SITE_NAME),r.\u0275\u0275inject(Pr),r.\u0275\u0275inject(yo),r.\u0275\u0275inject(af),r.\u0275\u0275inject(Bt.AttributeSerializerService),r.\u0275\u0275inject(Gd))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),GH=(0,_.Z)(function a(n){(0,p.Z)(this,a),n&&(this.context=n.context,this.query=n.query,this.plugin=n.plugin)}),VH=function(){var a=function(){function n(t){(0,p.Z)(this,n),this.fb=t,this.contexts=[],this.submitted=new r.EventEmitter,this.sliceForm=this.fb.group({context:this.fb.control("",v.kI.required),query:this.fb.control("",v.kI.required),plugin:this.fb.control("",v.kI.required)})}return(0,_.Z)(n,[{key:"ngOnInit",value:function(){}},{key:"submit",value:function(){var e=new GH(this.sliceForm.value);this.submitted.emit(e)}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(v.QS))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-slice-form"]],inputs:{contexts:"contexts"},outputs:{submitted:"submitted"},decls:20,vars:3,consts:[[1,"slice-form",3,"formGroup","ngSubmit"],["required","","formControlName","context"],["value","_root"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Query","formControlName","query","required",""],["required","","formControlName","plugin"],["value","media"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"],[3,"value"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"form",0),r.\u0275\u0275listener("ngSubmit",function(){return e.submit()}),r.\u0275\u0275elementStart(1,"mat-dialog-content")(2,"mat-form-field")(3,"mat-label"),r.\u0275\u0275text(4,"Type"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(5,"mat-select",1)(6,"mat-option",2),r.\u0275\u0275text(7,"_root"),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(8,fH,2,2,"mat-option",3),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(9,"mat-form-field"),r.\u0275\u0275element(10,"input",4),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(11,"mat-form-field")(12,"mat-label"),r.\u0275\u0275text(13,"Plugin"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(14,"mat-select",5)(15,"mat-option",6),r.\u0275\u0275text(16,"Media"),r.\u0275\u0275elementEnd()()()(),r.\u0275\u0275elementStart(17,"mat-dialog-actions")(18,"button",7),r.\u0275\u0275text(19,"Save"),r.\u0275\u0275elementEnd()()()),2&t&&(r.\u0275\u0275property("formGroup",e.sliceForm),r.\u0275\u0275advance(8),r.\u0275\u0275property("ngForOf",e.contexts),r.\u0275\u0275advance(10),r.\u0275\u0275property("disabled",!e.sliceForm.valid))},dependencies:[E.NgForOf,v._Y,v.Fj,v.JJ,v.JL,v.Q7,v.sg,v.u,bi.MatLegacyOption,pi.MatLegacyButton,Jt.MatLegacyDialogClose,Jt.MatLegacyDialogContent,Jt.MatLegacyDialogActions,En.MatLegacyFormField,En.MatLegacyLabel,Hr.MatLegacyInput,Fi.MatLegacySelect]}),a}(),HH=function(){var a=function(){function n(t,e,o,s){(0,p.Z)(this,n),this.data=t,this.dialogRef=e,this.fb=o,this.handler=s,this.contexts=[],this.contexts=this.data.contexts}return(0,_.Z)(n,[{key:"ngOnInit",value:function(){}},{key:"submitted",value:function(e){var o=this;this.data.panelFormGroup.get("panes").push(this.fb.group({contentPlugin:"slice",name:new v.p4(""),label:new v.p4(""),rule:new v.p4(""),settings:this.fb.array(this.handler.buildSettings(e).map(function(s){return o.convertToGroup(s)}))})),this.dialogRef.close()}},{key:"convertToGroup",value:function(e){var o=this,s=this.fb.group({name:new v.p4(e.name,v.kI.required),type:new v.p4(e.type,v.kI.required),displayName:new v.p4(e.displayName,v.kI.required),value:new v.p4(e.value,v.kI.required),computedValue:new v.p4(e.value,v.kI.required),attributes:new v.vC([])});return e.attributes&&e.attributes.length>0&&e.attributes.forEach(function(u){s.get("attributes").push(o.convertToGroup(u))}),s}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Jt.MAT_LEGACY_DIALOG_DATA),r.\u0275\u0275directiveInject(Jt.MatLegacyDialogRef),r.\u0275\u0275directiveInject(v.QS),r.\u0275\u0275directiveInject(NE))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-slice-editor"]],decls:1,vars:1,consts:[[3,"contexts","submitted"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"classifieds-ui-slice-form",0),r.\u0275\u0275listener("submitted",function(s){return e.submitted(s)}),r.\u0275\u0275elementEnd()),2&t&&r.\u0275\u0275property("contexts",e.contexts)},dependencies:[VH]}),a}(),qH=function(){var a=function(){function n(t,e){(0,p.Z)(this,n),this.fb=t,this.controlContainer=e}return(0,_.Z)(n,[{key:"ngOnInit",value:function(){this.controlContainer.control.addControl("adaptor",this.fb.control("rest",v.kI.required)),this.controlContainer.control.addControl("rest",this.fb.control(""))}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(v.QS),r.\u0275\u0275directiveInject(v.gN))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-context-editor"]],viewQuery:function(t,e){var o;1&t&&r.\u0275\u0275viewQuery(vy,7),2&t&&r.\u0275\u0275queryRefresh(o=r.\u0275\u0275loadQuery())&&(e.restSourceFormComp=o.first)},decls:2,vars:1,consts:[[3,"formGroup"],["formControlName","rest"]],template:function(t,e){1&t&&(r.\u0275\u0275elementContainerStart(0,0),r.\u0275\u0275element(1,"classifieds-ui-rest-source-form",1),r.\u0275\u0275elementContainerEnd()),2&t&&r.\u0275\u0275property("formGroup",e.controlContainer.control)},dependencies:[v.JJ,v.JL,v.sg,v.u,vy]}),a}(),KH=function(){var a=function(){function n(t,e,o,s){(0,p.Z)(this,n),this.data=t,this.dialogRef=e,this.fb=o,this.attributeSerializer=s,this.contexts=[],this.panes=[],this.formGroup=this.fb.group({labels:this.fb.array([this.buildLabelGroup()])}),this.contexts=this.data.contexts}return(0,_.Z)(n,[{key:"labels",get:function(){return this.formGroup.get("labels")}},{key:"ngOnInit",value:function(){this.panes=new Bs(this.data.panelFormGroup.value).panes}},{key:"submit",value:function(){var e=this;this.data.panelFormGroup.get("settings").clear(),this.attributeSerializer.serialize(this.formGroup.value,"root").attributes.forEach(function(o){console.log("label mappings"),console.log(e.attributeSerializer.convertToGroup(o)),e.data.panelFormGroup.get("settings").push(e.attributeSerializer.convertToGroup(o))})}},{key:"onRemoveMapping",value:function(e){this.labels.removeAt(e)}},{key:"onAddMapping",value:function(){this.labels.push(this.buildLabelGroup())}},{key:"buildLabelGroup",value:function(){return this.fb.group({mapping:this.fb.control("")})}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Jt.MAT_LEGACY_DIALOG_DATA),r.\u0275\u0275directiveInject(Jt.MatLegacyDialogRef),r.\u0275\u0275directiveInject(v.QS),r.\u0275\u0275directiveInject(Bt.AttributeSerializerService))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["druid-tabs-panel-editor"]],decls:7,vars:3,consts:[[3,"formGroup","ngSubmit"],["formArrayName","labels"],[3,"formGroupName",4,"ngFor","ngForOf"],["type","button","mat-raised-button","","color","primary",3,"click"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"],[3,"formGroupName"],["formControlName","mapping",3,"panes"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"form",0),r.\u0275\u0275listener("ngSubmit",function(){return e.submit()}),r.\u0275\u0275elementStart(1,"div",1),r.\u0275\u0275template(2,pH,4,2,"div",2),r.\u0275\u0275elementStart(3,"button",3),r.\u0275\u0275listener("click",function(){return e.onAddMapping()}),r.\u0275\u0275text(4,"Add"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(5,"button",4),r.\u0275\u0275text(6,"Save"),r.\u0275\u0275elementEnd()()),2&t&&(r.\u0275\u0275property("formGroup",e.formGroup),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngForOf",e.labels.controls),r.\u0275\u0275advance(3),r.\u0275\u0275property("disabled",!e.formGroup.valid))},dependencies:[E.NgForOf,v._Y,v.JJ,v.JL,v.sg,v.u,v.x0,v.CE,pi.MatLegacyButton,Jt.MatLegacyDialogClose,g7],encapsulation:2}),a}(),WH=function(){var a=function(){function n(t){(0,p.Z)(this,n),this.attributeSerializer=t,this.settings=[],this.panes=[],this.originMappings=[],this.labelMappingsEnabled=!1}return(0,_.Z)(n,[{key:"ngOnInit",value:function(){console.log("tabs panels contexts"),console.log(this.panes);var e=this.attributeSerializer.deserialize(new Bt.AttributeValue({name:"",displayName:"",computedValue:"",type:Bt.AttributeTypes.Complex,value:"",intValue:0,attributes:this.settings}));this.labelMappingsEnabled=!!(e&&void 0!==e.labels&&Array.isArray(e.labels)&&e.labels.length>0)}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Bt.AttributeSerializerService))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-tabs-panel-renderer"]],inputs:{settings:"settings",panes:"panes",originPanes:"originPanes",originMappings:"originMappings"},decls:2,vars:2,consts:[["mat-align-tabs","start",4,"ngIf"],["mat-align-tabs","start"],[4,"for"],["mat-tab-label",""],[3,"pluginName","settings","contexts"],["label","The Label",4,"ngFor","ngForOf"],["label","The Label"]],template:function(t,e){1&t&&(r.\u0275\u0275template(0,gH,2,1,"mat-tab-group",0),r.\u0275\u0275template(1,_H,2,1,"mat-tab-group",0)),2&t&&(r.\u0275\u0275property("ngIf",e.labelMappingsEnabled),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!e.labelMappingsEnabled))},dependencies:[E.NgForOf,E.NgIf,is.MatLegacyTabGroup,is.MatLegacyTabLabel,is.MatLegacyTab,Nn.ForDirective,xy]}),a}(),G3=function(){var a=function(){function n(t,e){var o=this;(0,p.Z)(this,n),this.fb=t,this.controlContainer=e,this.panelPages=[],this.panelPage$=new z.X(new ii),this.context$=new z.X(void 0),this.formGroup=this.fb.group({state:this.fb.control("",[v.kI.required])}),this.stateCtrl=this.fb.control(""),this.stateCtrlSub=this.stateCtrl.valueChanges.pipe((0,kr.b)(250),(0,xu.x)(),(0,Q.h)(function(s){try{return JSON.parse(s),!0}catch{return!1}}),(0,Ce.U)(function(s){return JSON.parse(s)})).subscribe(function(s){console.log("write state"),console.log(s),o.formGroup.get("state").setValue(s)}),this.onTouched=function(){}}return(0,_.Z)(n,[{key:"panelPage",set:function(e){this.panelPage$.next(e)}},{key:"context",set:function(e){this.context$.next(e)}},{key:"ngOnInit",value:function(){var e=this;this.panelPage$.subscribe(function(o){e.panelPages=[o]}),this.context$.subscribe(function(o){e.stateCtrl.setValue(o?JSON.stringify(o.data.state):"")})}},{key:"writeValue",value:function(e){e&&this.formGroup.setValue(e,{emitEvent:!1})}},{key:"registerOnChange",value:function(e){this.formGroup.valueChanges.subscribe(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){e?this.formGroup.disable():this.formGroup.enable()}},{key:"validate",value:function(e){return this.formGroup.valid?null:{invalidForm:{valid:!1,message:"source is invalid"}}}},{key:"flattenSelector",value:function(e){var o=[];return null!=e.panel&&o.push(e.panel),null!=e.pane&&o.push(e.pane),null!=e.nested&&"object"==typeof e.nested&&this.flattenSelector(e.nested).forEach(function(s){return o.push(s)}),o}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(v.QS),r.\u0275\u0275directiveInject(v.gN))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-page-state-form"]],inputs:{panelPage:"panelPage",context:"context"},features:[r.\u0275\u0275ProvidersFeature([{provide:v.JU,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0},{provide:v.Cf,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0}])],decls:3,vars:2,consts:[[3,"formGroup"],["cols","40","rows","20","required","",3,"formControl"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"div",0),r.\u0275\u0275text(1," <"),r.\u0275\u0275element(2,"textarea",1),r.\u0275\u0275elementEnd()),2&t&&(r.\u0275\u0275property("formGroup",e.formGroup),r.\u0275\u0275advance(2),r.\u0275\u0275property("formControl",e.stateCtrl))},dependencies:[v.Fj,v.JJ,v.JL,v.Q7,v.oH,v.sg]}),a}(),XH=function(){var a=function(){function n(t,e,o){(0,p.Z)(this,n),this.fb=t,this.pageBuilderFacade=e,this.controlContainer=o}return(0,_.Z)(n,[{key:"ngOnInit",value:function(){var e=this;this.controlContainer.control.addControl("adaptor",this.fb.control("data",v.kI.required)),this.controlContainer.control.addControl("data",this.fb.control("")),this.pageBuilderFacade.getPage$.pipe((0,kn.q)(1)).subscribe(function(o){e.panelPage=o})}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(v.QS),r.\u0275\u0275directiveInject(ea),r.\u0275\u0275directiveInject(v.gN))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-page-state-editor"]],viewQuery:function(t,e){var o;1&t&&r.\u0275\u0275viewQuery(G3,7),2&t&&r.\u0275\u0275queryRefresh(o=r.\u0275\u0275loadQuery())&&(e.restSourceFormComp=o.first)},inputs:{context:"context"},decls:2,vars:3,consts:[[3,"formGroup"],["formControlName","data",3,"panelPage","context"]],template:function(t,e){1&t&&(r.\u0275\u0275elementContainerStart(0,0),r.\u0275\u0275element(1,"classifieds-ui-page-state-form",1),r.\u0275\u0275elementContainerEnd()),2&t&&(r.\u0275\u0275property("formGroup",e.controlContainer.control),r.\u0275\u0275advance(1),r.\u0275\u0275property("panelPage",e.panelPage)("context",e.context))},dependencies:[v.JJ,v.JL,v.sg,v.u,G3]}),a}(),QH=function(){var a=function(){function n(t,e){var o=this;(0,p.Z)(this,n),this.fb=t,this.attributeSerializer=e,this.settings$=new z.X(void 0),this.formGroup=this.fb.group({name:this.fb.control("",[v.kI.required]),field:this.fb.control("",[v.kI.required])}),this.settingsSub=this.settings$.pipe((0,Ce.U)(function(s){return s?new Ik(o.attributeSerializer.deserializeAsObject(s)):void 0})).subscribe(function(s){s?(o.formGroup.get("name").setValue(s.name),o.formGroup.get("field").setValue(s.field)):(o.formGroup.get("name").setValue(""),o.formGroup.get("field").setValue(""))}),this.onTouched=function(){}}return(0,_.Z)(n,[{key:"settings",set:function(e){this.settings$.next(e)}},{key:"ngOnInit",value:function(){}},{key:"writeValue",value:function(e){e&&this.formGroup.setValue(e,{emitEvent:!1})}},{key:"registerOnChange",value:function(e){this.formGroup.valueChanges.subscribe(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){e?this.formGroup.disable():this.formGroup.enable()}},{key:"validate",value:function(e){return this.formGroup.valid?null:{invalidForm:{valid:!1,message:"content is invalid"}}}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(v.QS),r.\u0275\u0275directiveInject(Bt.AttributeSerializerService))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-form-datasource-form"]],inputs:{settings:"settings"},features:[r.\u0275\u0275ProvidersFeature([{provide:v.JU,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0},{provide:v.Cf,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0}])],decls:11,vars:1,consts:[[3,"formGroup"],["matInput","","formControlName","name","required",""],["matInput","","formControlName","field","required",""]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"div",0)(1,"div")(2,"mat-form-field")(3,"mat-label"),r.\u0275\u0275text(4,"Name"),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(5,"input",1),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(6,"div")(7,"mat-form-field")(8,"mat-label"),r.\u0275\u0275text(9,"Field"),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(10,"input",2),r.\u0275\u0275elementEnd()()()),2&t&&r.\u0275\u0275property("formGroup",e.formGroup)},dependencies:[v.Fj,v.JJ,v.JL,v.Q7,v.sg,v.u,En.MatLegacyFormField,En.MatLegacyLabel,Hr.MatLegacyInput]}),a}(),JH=function(){var a=(0,_.Z)(function n(t){(0,p.Z)(this,n),this.controlContainer=t,this.settings=[]});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(v.gN))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-form-datasource"]],inputs:{settings:"settings"},decls:2,vars:2,consts:[[3,"formGroup"],["formControlName","settings",3,"settings"]],template:function(t,e){1&t&&(r.\u0275\u0275elementContainerStart(0,0),r.\u0275\u0275element(1,"classifieds-ui-form-datasource-form",1),r.\u0275\u0275elementContainerEnd()),2&t&&(r.\u0275\u0275property("formGroup",e.controlContainer.control),r.\u0275\u0275advance(1),r.\u0275\u0275property("settings",e.settings))},dependencies:[v.JJ,v.JL,v.sg,v.u,QH],encapsulation:2}),a}(),YH=function(n){return new fn.ContentPlugin({id:"snippet",title:"Snippet",selectionComponent:void 0,editorComponent:OH,renderComponent:L3,handler:n})},eq=function(n){return new fn.ContentPlugin({id:"attribute",title:"Attribute",selectionComponent:MH,editorComponent:BH,renderComponent:NH,handler:n})},tq=function(n){return new fn.ContentPlugin({id:"media",title:"Media",selectionComponent:void 0,editorComponent:ZH,renderComponent:LH,handler:n})},nq=function(n){return new fn.ContentPlugin({id:"rest",title:"REST",selectionComponent:void 0,editorComponent:$H,renderComponent:zH,handler:n})},rq=function(n){return new fn.ContentPlugin({id:"slice",title:"Slice",selectionComponent:void 0,editorComponent:HH,renderComponent:void 0,handler:n})},iq=function(n){return new Fs({id:"page",name:"page",title:"Page",global:!0,group:"pages",baseObject:{path:""},resolver:n})},oq=function(n){var t={dataset:new pr};return new Fs({id:"rest",name:"rest",title:"Rest",baseObject:t,resolver:n,editorComponent:qH})},aq=function(n){var t={dataset:new pr};return new Fs({id:"form",name:"form",title:"Form",baseObject:t,resolver:n})},sq=function(n){var t=new Yo({state:new Bt.AttributeValue});return new Fs({id:"panestate",name:"panestate",title:"Pane State",internal:!0,baseObject:t,resolver:n})},uq=function(n){var t=new Yo({state:new Bt.AttributeValue});return new Fs({id:"pagestate",name:"pagestate",title:"Page State",internal:!0,baseObject:t,resolver:n,editorComponent:XH})},cq=function(n){return new bE({id:"tabs",name:"tabs",title:"Tabs",handler:n,editorComponent:KH,renderComponent:WH})},oA=function(n){return function(t){if(0===("/"+t.map(function(o){return o.path}).join("/")).indexOf(n.path)){var e=n.path.substr(1).split("/").length;return{consumed:t,posParams:t.reduce(function(o,s,u){return 0===u?(0,b.Z)((0,b.Z)({},o),{},{panelPageId:new nr.UrlSegment(n.id,{})}):u>e-1?(0,b.Z)((0,b.Z)({},o),{},(0,d.Z)({},"arg".concat(u-e),new nr.UrlSegment(s.path,{}))):(0,b.Z)({},o)},{})}}return null}},aA=function(n){return function(t){return 0===("/"+t.map(function(o){return o.path}).join("/")).indexOf(n.path)&&t.map(function(o){return o.path}).join("/").indexOf("/manage")>-1?(n.path.substr(1).split("/"),{consumed:t,posParams:t.reduce(function(o,s,u){return 0===u?(0,b.Z)((0,b.Z)({},o),{},{panelPageId:new nr.UrlSegment(n.id,{})}):(0,b.Z)({},o)},{})}):null}},mq=function(){var a=function(){function n(t,e,o,s){(0,p.Z)(this,n),this.tokenizerService=t,this.panelResolverService=e,this.styleResolverService=o,this.paneDatasource=s,this.settings=[],this.panes=[],this.originMappings=[],this.resolvedContext={}}return(0,_.Z)(n,[{key:"ngOnInit",value:function(){var e=this;this.paneDatasource.pageChange$.pipe((0,yy.T)(1),(0,st.w)(function(o){return e.panelResolverService.resolvePanes({panes:e.originPanes.map(function(s){return new Wr((0,b.Z)((0,b.Z)({},s),{},{metadata:new Map([].concat((0,y.Z)(s.metadata?s.metadata:[]),[["page",o],["limit",e.paneDatasource.pageSize]]))}))}),contexts:e.contexts,resolvedContext:e.resolvedContext})}),(0,st.w)(function(o){return e.styleResolverService.alterResolvedPanes({panel:e.panel,resolvedPanes:o.resolvedPanes,originMappings:o.originMappings})})).subscribe(function(o){var s=o.resolvedPanes;e.originMappings=o.originMappings,e.paneDatasource.panes=s}),this.paneDatasource.panes=this.panes,this.trackByTpl="[._root.id]"}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Pr),r.\u0275\u0275directiveInject(Tk),r.\u0275\u0275directiveInject(XO),r.\u0275\u0275directiveInject(CE))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-virtual-list-panel-renderer"]],inputs:{settings:"settings",panes:"panes",originPanes:"originPanes",originMappings:"originMappings",contexts:"contexts",resolvedContext:"resolvedContext",panel:"panel"},features:[r.\u0275\u0275ProvidersFeature([CE])],decls:2,vars:2,consts:[[1,"panes-viewport",3,"itemSize"],["class","pane-item",4,"cdkVirtualFor","cdkVirtualForOf"],[1,"pane-item"],[3,"pluginName","settings","contexts","resolvedContext"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"cdk-virtual-scroll-viewport",0),r.\u0275\u0275template(1,yH,2,4,"div",1),r.\u0275\u0275elementEnd()),2&t&&(r.\u0275\u0275property("itemSize",75),r.\u0275\u0275advance(1),r.\u0275\u0275property("cdkVirtualForOf",e.paneDatasource))},dependencies:[tf.CdkFixedSizeVirtualScroll,tf.CdkVirtualForOf,tf.CdkVirtualScrollViewport,xy],styles:["[_nghost-%COMP%]{position:relative}.panes-viewport[_ngcontent-%COMP%]{height:100%;width:100%}"]}),a}(),gq=function(){var a=function(){function n(t){(0,p.Z)(this,n),this.router=t}return(0,_.Z)(n,[{key:"ngOnInit",value:function(){}},{key:"onClick",value:function(){this.router.navigateByUrl(this.href)}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(nr.Router))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-page-router-link"]],inputs:{href:"href",text:"text"},decls:2,vars:1,consts:[[3,"click"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"a",0),r.\u0275\u0275listener("click",function(){return e.onClick()}),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&t&&(r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(e.text))},styles:["[_nghost-%COMP%]:hover{cursor:pointer}"]}),a}(),V3=new r.InjectionToken("PagesSettings"),vq=(0,_.Z)(function a(n){(0,p.Z)(this,a),this.disableRouting=!1,n&&(this.disableRouting=n.disableRouting)}),_q=function(){var a=function(){function n(t,e,o,s){(0,p.Z)(this,n),this.siteName=t,this.pagesSettings=e,this.router=o,this.routesLoaded=!1,this.panelPageListItemsService=s.getEntityCollectionService("PanelPageListItem")}return(0,_.Z)(n,[{key:"canActivate",value:function(e,o){var s=this;return new Promise(this.pagesSettings.disableRouting?function(u){return u(!0)}:function(u){var c=o.url;-1!==c.indexOf("?")&&(c=o.url.substr(0,c.indexOf("?")));var l="path="+c.substr(1).split("/").reduce(function(m,C,T){return[].concat((0,y.Z)(m),[0===T?"/".concat(C):"".concat(m[T-1],"/").concat(C)])},[]).map(function(m){return s.encodePathComponent(m)}).join("&path=")+"&site=".concat(encodeURIComponent('{"term":{"site.keyword":{"value":"'.concat(s.siteName,'"}}}')));setTimeout(function(){}),(0,Un.D)([Or(function(){return!s.routesLoaded},s.panelPageListItemsService.getWithQuery("site=".concat(encodeURIComponent('{"term":{"site.keyword":{"value":"'.concat(s.siteName,'"}}}')),'&path={"wildcard":{"path.keyword":{"value":"*"}}}')).pipe((0,ee.b)(function(){return console.log("loaded page list items")}),(0,Ce.U)(function(m){return m.filter(function(C){return void 0!==C.path&&""!==C.path})}),(0,Ce.U)(function(m){return m.map(function(C){return new ii(C)}).sort(function(C,T){return C.path.split("/").length===T.path.split("/").length?C.path.split("/")[C.path.split("/").length-1]>T.path.split("/")[T.path.split("/").length-1]?-1:1:C.path.split("/").length>T.path.split("/").length?-1:1})}),(0,ee.b)(function(m){return m.sort(function(C,T){return C.path.length>T.path.length?1:-1})}),(0,ee.b)(function(m){var C=s.router.config;m.forEach(function(T){C.unshift({matcher:aA(T),component:BE}),C.unshift({matcher:oA(T),component:ME,data:{panelPageListItem:T}}),console.log("panels matcher: ".concat(T.path))}),s.routesLoaded=!0}),(0,Ce.U)(function(){return[]})),(0,je.of)([])),s.panelPageListItemsService.getWithQuery(l).pipe((0,ti.K)(function(m){return(0,je.of)([])}),(0,ee.b)(function(){return console.log("loaded specific matched")}),(0,Ce.U)(function(m){return m.reduce(function(C,T){return void 0===C||C.path.split("/").length<T.path.split("/").length?T:C},void 0)}),(0,Ce.U)(function(m){var C=o.url.substr(1).split("/").slice(m.path.split("/").length-1).join("/");return[m,C]}))]).pipe((0,Ce.U)(function(m){var C=(0,g.Z)(m,2),B=(0,g.Z)(C[1],2);return[B[0],B[1]]})).subscribe(function(m){var C=(0,g.Z)(m,2),T=C[0],B=C[1],F="".concat(T.path).concat(""===B?"":"/".concat(B),"?").concat(Mo.stringify(e.queryParams)),U=s.router.parseUrl(F);console.log("panels garud navigate: ".concat(T.path).concat(""===B?"":"/".concat(B),"?").concat(Mo.stringify(e.queryParams))),u(U)})})}},{key:"encodePathComponent",value:function(e){return'{"term":{"path.keyword":{"value":"'.concat(e,'"}}}')}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Nn.SITE_NAME),r.\u0275\u0275inject(V3),r.\u0275\u0275inject(nr.Router),r.\u0275\u0275inject(Dr))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),H3=function(){var a=function(){function n(t){(0,p.Z)(this,n),this.pageBuilderFacade=t}return(0,_.Z)(n,[{key:"resolve",value:function(e,o){return this.pageBuilderFacade.getPageInfo$}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(ea))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),q3=function(){var a=function(){function n(t,e,o,s){(0,p.Z)(this,n),this.pageBuilderFacade=t,this.store=e,this.urlGeneratorService=o,this.routerStore=s}return(0,_.Z)(n,[{key:"resolve",value:function(e,o){var s=this,u=new Os(o);return(u.params&&Array.isArray(u.params)&&u.params.length>0?this.changePipeline(u.params):(0,je.of)([])).pipe((0,st.w)(function(){return u.params&&Array.isArray(u.params)&&u.params.length>0?s.rebuildParams(u.params):(0,je.of)([])}),(0,Ce.U)(function(c){return[c,new Map([["tag",fr()]])]}),(0,st.w)(function(c){var l=(0,g.Z)(c,2),C=l[1];return s.urlGeneratorService.getUrl(u.url,l[0],C).pipe((0,Ce.U)(function(T){return[T,C]}))}),(0,st.w)(function(c){var l=(0,g.Z)(c,2),m=l[0],C=l[1];return s.pageBuilderFacade.loadRestData("".concat(C.get("tag")),new Os((0,b.Z)((0,b.Z)({},u),{},{url:m}))),s.store.pipe((0,Zt.Ys)(wE("".concat(C.get("tag")))),(0,Q.h)(function(T){return void 0!==T}),(0,Ce.U)(function(T){return T.results}),(0,kn.q)(1))}))}},{key:"changePipeline",value:function(e){var o=this,s=e.reduce(function(u,c){switch(c.mapping.type){case"route":return[].concat((0,y.Z)(u),[o.routeArgChange(c.mapping.value)]);case"querystring":return[].concat((0,y.Z)(u),[o.queryStringChange(c.mapping.value)]);case"form":return[].concat((0,y.Z)(u),[o.formChange(c.mapping.value)]);default:return(0,y.Z)(u)}},[]);return J.T.apply(void 0,(0,y.Z)(s))}},{key:"routeArgChange",value:function(e){return this.pageBuilderFacade.getPageInfo$.pipe((0,Ce.U)(function(){}))}},{key:"queryStringChange",value:function(e){return new se.x}},{key:"formChange",value:function(e){var o=e.split(".",2),s=(0,g.Z)(o,2);return this.pageBuilderFacade.getForm$(s[0]).pipe((0,ee.b)(function(){return console.log("form change")}),(0,Ce.U)(function(){}))}},{key:"rebuildParams",value:function(e){var o=this;return this.pageBuilderFacade.getPageInfo$.pipe((0,Ce.U)(function(s){return s?e:o.testParams(e)}))}},{key:"testParams",value:function(e){for(var o=[],s=e.length,u=0;u<s;u++)o.push(new Mi("route"===e[u].mapping.type?(0,b.Z)((0,b.Z)({},e[u]),{},{mapping:{type:"static",value:e[u].mapping.testValue,context:void 0,testValue:void 0}}):e[u]));return o}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(ea),r.\u0275\u0275inject(Zt.yh),r.\u0275\u0275inject(ny),r.\u0275\u0275inject(Zt.yh))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),K3=function(){var a=function(){function n(t){(0,p.Z)(this,n),this.pageBuilderFacade=t}return(0,_.Z)(n,[{key:"resolve",value:function(e,o){return this.pageBuilderFacade.getForm$(o)}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(ea))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),yq=function(){var a=function(n){(0,G.Z)(e,n);var t=(0,H.Z)(e);function e(o,s){var u;return(0,p.Z)(this,e),(u=t.call(this)).tokenizerService=o,u.paneDatasource=s,u.trackByMapping=function(c,l){return u.tokenizerService.replaceTokens(u.trackByTpl,u.tokenizerService.generateGenericTokens(l.contexts[0].data))},u}return(0,_.Z)(e,[{key:"displayedColumns",get:function(){var s=this.panes.findIndex(function(u){return u.contexts.findIndex(function(c){return"_root"===c.name})>-1});return s>-1?Object.keys(this.panes[s].contexts.find(function(u){return"_root"===u.name}).data):[]}},{key:"ngOnInit",value:function(){console.log(this.panes),this.paneDatasource.panes=this.panes}},{key:"rowData",value:function(s,u){return console.log("name: ".concat(s)),"".concat(u.contexts.find(function(c){return"_root"===c.name}).data[s])}}]),e}(k7);return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Pr),r.\u0275\u0275directiveInject(CE))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["lib-table-panel-renderer"]],features:[r.\u0275\u0275ProvidersFeature([CE]),r.\u0275\u0275InheritDefinitionFeature],decls:4,vars:4,consts:[["mat-table","","matSort","",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"table",0),r.\u0275\u0275template(1,CH,3,1,"ng-container",1),r.\u0275\u0275template(2,wH,1,0,"tr",2),r.\u0275\u0275template(3,SH,1,0,"tr",3),r.\u0275\u0275elementEnd()),2&t&&(r.\u0275\u0275property("dataSource",e.paneDatasource),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",e.displayedColumns),r.\u0275\u0275advance(1),r.\u0275\u0275property("matHeaderRowDef",e.displayedColumns),r.\u0275\u0275advance(1),r.\u0275\u0275property("matRowDefColumns",e.displayedColumns))},dependencies:[E.NgForOf,N3.MatSort,N3.MatSortHeader,ss.MatLegacyTable,ss.MatLegacyHeaderCellDef,ss.MatLegacyHeaderRowDef,ss.MatLegacyColumnDef,ss.MatLegacyCellDef,ss.MatLegacyRowDef,ss.MatLegacyHeaderCell,ss.MatLegacyCell,ss.MatLegacyHeaderRow,ss.MatLegacyRow]}),a}(),xq=function(){var a=function(){function n(t){(0,p.Z)(this,n),this.attributeSerializer=t}return(0,_.Z)(n,[{key:"handleFile",value:function(e){return(0,je.of)()}},{key:"handlesType",value:function(e){return!1}},{key:"implementsRendererOverride",value:function(){return!1}},{key:"hasRendererOverride",value:function(e){return(0,je.of)(!1)}},{key:"isDynamic",value:function(e){return!1}},{key:"isData",value:function(e){return!1}},{key:"buildDynamicItems",value:function(e,o){return(0,je.of)([])}},{key:"fetchDynamicData",value:function(e,o){return(0,je.of)(new pr)}},{key:"getBindings",value:function(e,o){return(0,je.of)([])}},{key:"toObject",value:function(e){return(0,je.of)(this.attributeSerializer.deserializeAsObject(e))}},{key:"buildSettings",value:function(e){return this.attributeSerializer.serialize(e,"root").attributes}},{key:"fromPanes",value:function(e){var o=this;return e.map(function(s){return new Wr(o.attributeSerializer.deserialize(s))})}},{key:"wrapPanel",value:function(e){return new Bs({stylePlugin:void 0,settings:[],panes:e,columnSetting:new br})}},{key:"stateDefinition",value:function(e){return(0,je.of)({})}},{key:"editorOptions",value:function(e){return(0,je.of)(new fn.ContentPluginEditorOptions)}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Bt.AttributeSerializerService))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),sA=function(){var a=function(){function n(t,e,o,s){(0,p.Z)(this,n),this.panelHandler=t,this.attributeSerializer=e,this.panelsLoaderService=o,this.panelsSelectorService=s}return(0,_.Z)(n,[{key:"alterResolvedPanes",value:function(e){var o=this,u=e.resolvedPanes,c=e.originMappings,l=this.attributeSerializer.deserialize(new Bt.AttributeValue({name:"",displayName:"",computedValue:"",type:Bt.AttributeTypes.Complex,value:"",intValue:0,attributes:e.settings})),m=l&&void 0!==l.labels&&Array.isArray(l.labels)?l.labels.map(function(T){return new VO(T.mapping)}):[],C=[];return 0===m.length?(0,je.of)({resolvedPanes:u,originMappings:c}):(C=u.length!==m.length?u.map(function(T,B){return new VO((0,b.Z)((0,b.Z)({},B<m.length?m[B]:m[m.length-1]),{},{pane:B}))}).map(function(T){return o.flattenSelector(T)}):m.map(function(T){return o.flattenSelector(T)}),(0,Un.D)(u.map(function(T,B){return o.panelsLoaderService.reducePanes([],T,0)[0]})).pipe((0,Ce.U)(function(T){return T.reduce(function(B,F){var ue=(0,g.Z)(F,2)[1];return[].concat((0,y.Z)(B),[ue])},[])}),(0,Ce.U)(function(T){for(var B=C.map(function(we){return o.selectWithTarget(we)}),F=C.map(function(we){return o.selectWithoutTarget(we)}),U=B.map(function(we,qe){return o.panelsSelectorService.rebuildPage(T[C[qe][0]],we.slice(1))}),ae=F.map(function(we,qe){return o.panelsSelectorService.rebuildPage(T[C[qe][0]],we.slice(1))}),ue=[],me=u.length,Se=0;Se<me;Se++)ue.push(new Wr((0,b.Z)((0,b.Z)({},u[Se]),{},{settings:o.panelHandler.buildSettings(U[Se])}))),ue.push(new Wr((0,b.Z)((0,b.Z)({},u[Se]),{},{settings:o.panelHandler.buildSettings(ae[Se])})));return{resolvedPanes:ue,originMappings:c}})))}},{key:"stateDefinition",value:function(e){return(0,je.of)({})}},{key:"flattenSelector",value:function(e){var o=[];return null!=e.panel&&o.push(e.panel),null!=e.pane&&o.push(e.pane),null!=e.nested&&"object"==typeof e.nested&&this.flattenSelector(e.nested).forEach(function(s){return o.push(s)}),o}},{key:"selectWithTarget",value:function(e){return e.map(function(o){return o+1})}},{key:"selectWithoutTarget",value:function(e){return e.map(function(o,s){return s===e.length-1?-1*(o+1):0})}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(xq),r.\u0275\u0275inject(Bt.AttributeSerializerService),r.\u0275\u0275inject(KO),r.\u0275\u0275inject(A7))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),W3=function(){var a=function(){function n(t,e,o,s){(0,p.Z)(this,n),this.entityServices=t,this.pageBuilderFacade=e,this.panelStateConverterService=o,this.attributeSerializer=s,this.resolverCache$=new Map}return(0,_.Z)(n,[{key:"emptyPaneState",get:function(){return new Yo({state:this.attributeSerializer.serialize({displayAssociatedPane:""},"root")})}},{key:"entities$",get:function(){return this.entityServices.getEntityCollectionService("PanelPageState").entities$.pipe((0,ee.b)(function(e){console.log("entities in store"),console.log(e)}))}},{key:"panelPage$",get:function(){return(0,Sr.a)([this.pageBuilderFacade.getPageInfo$,this.entityServices.getEntityCollectionService("PanelPage").entities$]).pipe((0,Ce.U)(function(e){var o=(0,g.Z)(e,2),s=o[0],u=o[1];return s&&void 0!==s.id&&""!==s.id&&null!==s.id&&-1!==u.findIndex(function(c){return c.id===s.id})?u.find(function(c){return c.id===s.id}):void 0}))}},{key:"fakePageInfo",get:function(){return new uy({id:"948d6e7b-12ab-11ec-8ecd-661fdd19e6df",path:"",realPath:"",args:new Map})}},{key:"resolve",value:function(e,o){var s=o&&o.selectionMethod&&0!==o.selectionMethod.length&&o.id&&null!==o.id&&""!==o.id?"ps[id=".concat(o.id,"]").concat(o.selectionMethod.map(function(c){return"".concat(c)}).join("")):void 0;if(s&&this.resolverCache$.has(s))return this.resolverCache$.get(s);var u=this.resolve$(e,o);return s&&this.resolverCache$.set(s,u),u}},{key:"resolve$",value:function(e,o){var s=this;return(0,Sr.a)([this.panelPage$,this.entities$]).pipe((0,Ce.U)(function(u){var c=(0,g.Z)(u,2),l=c[0],m=c[1];return[l,l&&-1!==m.findIndex(function(C){return C.id===l.id})?m.find(function(C){return C.id===l.id}):new as]}),(0,st.w)(function(u){var c=(0,g.Z)(u,2),l=c[0],m=c[1];return s.pageBuilderFacade.getSelectionPath$.pipe((0,Ce.U)(function(C){return o&&o.selectionPath?o.selectionPath:C}),(0,ee.b)(function(C){return C.join(",")}),(0,Ce.U)(function(C){return C.map(function(T,B){return"".concat((B+1)%2==0?"panes":(0===B?"":"nestedPage.")+"panels","[").concat(T,"]")})}),(0,Ce.U)(function(C){return 0===C.length?void 0:"$."+C.join(".")}),(0,Ce.U)(function(C){return[l,m,C]}))}),(0,ee.b)(function(u){var c=(0,g.Z)(u,3),l=c[0],C=c[2];console.log("page state context resolver"),console.log(l),console.log("query: "+C)}),(0,st.w)(function(u){var c=(0,g.Z)(u,3),l=c[0],m=c[1],C=c[2];return Or(function(){return!!l&&!m},s.panelStateConverterService.convertPageToState(l).pipe((0,Ce.U)(function(T){return new as((0,b.Z)((0,b.Z)({},T),{},{panels:T.panels.map(function(B){return new Ic((0,b.Z)((0,b.Z)({},B),{},{panes:B.panes.map(function(F){return new Yo((0,b.Z)((0,b.Z)({},F),{},{state:s.attributeSerializer.serialize({displayAssociatedPane:"y"},"root")}))})}))})}))}),(0,Ce.U)(function(T){return[T,C]})),(0,je.of)([m,C]))}),(0,ee.b)(function(u){var l=(0,g.Z)(u,2)[0];console.log("rebuilt state from realtime page"),console.log(l)}),(0,Ce.U)(function(u){var c=(0,g.Z)(u,2),m=c[1];return m?(0,Ms.JSONPath)({path:m,json:c[0]}):s.emptyPaneState}),(0,Ce.U)(function(u){return u&&Array.isArray(u)&&0!==u.length?u[0]:s.emptyPaneState}),(0,ee.b)(function(u){console.log("json path match"),console.log(u)}),(0,Ce.U)(function(u){return s.attributeSerializer.deserializeAsObject(u.state)}),(0,ee.b)(function(u){console.log("final state"),console.log(u)}))}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Dr),r.\u0275\u0275inject(ea),r.\u0275\u0275inject(R7),r.\u0275\u0275inject(Bt.AttributeSerializerService))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),bq=[{path:"pages",children:[{path:"create-panel-page",component:FH},{path:"panelpage/:panelPageId/manage",component:BE}]}],Cq=function(){var a=(0,_.Z)(function n(t,e,o,s,u,c,l,m,C,T,B,F,U,ae,ue,me,Se,we,qe,at,dt,Ot,ft,jt,Ut,tn,Vt,zt,qt){(0,p.Z)(this,n),c.registerMetadataMap(EH),[iq(ae),oq(ue),aq(me),sq(Se),uq(we)].forEach(function(Er){s.register(Er)}),t.forEach(function(Er){return o.register(Er)}),e.forEach(function(Er){return u.register(Er)}),l.register(function(n,t,e){return new Rs({id:"form",title:"Form",usedContexts:function(s){var u=s.param;return(0,je.of)(["form__".concat(u.mapping.value.substr(0,u.mapping.value.indexOf(".")))])},evalParam:function(s){var u=s.param,l=u.mapping.value.substr(0,u.mapping.value.indexOf(".")),m=u.mapping.value.substr(u.mapping.value.indexOf(".")+1);return console.log("form: ".concat(l," || ").concat(m)),e.getForm$(l).pipe((0,kn.q)(1),(0,Ce.U)(function(C){return C||new ku}),(0,Ce.U)(function(C){return t.serializeForm(C)}),(0,Ce.U)(function(C){return n.generateGenericTokens(C)}),(0,ee.b)(function(C){return console.log(C)}),(0,Ce.U)(function(C){return C.has(".".concat(m))?n.replaceTokens("[.".concat(m,"]"),C):""}),(0,ee.b)(function(C){console.log("form value"),console.log(C)}))}})}(B,F,U)),m.register(function(n){return new y$({id:"form",title:"Form",resolve:function(){return n.getFormNames$.pipe((0,st.w)(function(e){return 0===e.length?(0,je.of)([]):(0,Sr.a)(e.map(function(o){return n.getForm$(o).pipe((0,Ce.U)(function(s){return[o,s]}))}))}),(0,Ce.U)(function(e){return e.reduce(function(o,s){var u=(0,g.Z)(s,2),c=u[0],l=u[1];return(0,b.Z)((0,b.Z)({},o),{},(0,d.Z)({},"form__".concat(c),l))},{})}))},resolveSingle:function(){return n.getFormNames$.pipe((0,st.w)(function(e){return J.T.apply(void 0,(0,y.Z)(e.map(function(o){return n.getForm$(o).pipe((0,Ce.U)(function(s){return["form__".concat(o),s]}))})))}))}})}(U)),qe.register(function(n){return new ry({id:"pages_form",title:"Pages Form",build:function(){Ac.prototype.serializePageForm=function(e){return new Promise(function(o){o(n.serializeForm(e))})}}})}(F)),qe.getPlugin("pages_form").subscribe(function(Er){return Er.build()}),ft.register(function(n,t){return new Kd({id:"panelpageform_serialize",title:"Panelpageform Serialize",create:function(o){return(0,je.of)({success:!1,entity:t.serializeForm(new ku(o.object))})},read:function(o){return Jo(o),(0,je.of)({success:!1})},update:function(o){return Jo(o),(0,je.of)({success:!1})},delete:function(o){return Jo(o),(0,je.of)({success:!1})}})}(0,F)),Vt.register(function(n,t,e){return new rs({id:"form",title:"Form",editor:JH,fetch:function(s){var u=s.settings;return(0,je.of)(new pr).pipe((0,Ce.U)(function(){return new Ik(n.deserializeAsObject(u))}),(0,st.w)(function(c){return t.getForm$(c.name).pipe((0,Ce.U)(function(l){return[c,l||new ku]}),(0,hi.d)([c,new ku]),(0,kn.q)(1))}),(0,Ce.U)(function(c){var l=(0,g.Z)(c,2);return[l[0],e.serializeForm(l[1])]}),(0,Ce.U)(function(c){var l=(0,g.Z)(c,2),C=l[1];return new pr({results:(0,Ms.JSONPath)({path:"$.".concat(l[0].field,".*"),json:C})})}))},getBindings:function(s){var u=s.settings;return(0,je.of)([]).pipe((0,Ce.U)(function(){return new Ik(n.deserializeAsObject(u))}),(0,Ce.U)(function(l){return[new fn.ContentBinding({id:"form__".concat(l.name),type:"context"})]}))}})}(zt,U,F))});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(fn.CONTENT_PLUGIN),r.\u0275\u0275inject(xE),r.\u0275\u0275inject(fn.ContentPluginManager),r.\u0275\u0275inject(Su),r.\u0275\u0275inject(Xd),r.\u0275\u0275inject(Qi),r.\u0275\u0275inject(Cu),r.\u0275\u0275inject(dO),r.\u0275\u0275inject(Rn.PluginConfigurationManager),r.\u0275\u0275inject(_$),r.\u0275\u0275inject(Pr),r.\u0275\u0275inject(e3),r.\u0275\u0275inject(ea),r.\u0275\u0275inject(H3),r.\u0275\u0275inject(q3),r.\u0275\u0275inject(K3),r.\u0275\u0275inject(rA),r.\u0275\u0275inject(W3),r.\u0275\u0275inject(zd),r.\u0275\u0275inject(O.HttpClient),r.\u0275\u0275inject(uu),r.\u0275\u0275inject($a),r.\u0275\u0275inject(Pu),r.\u0275\u0275inject(Qi),r.\u0275\u0275inject(oc),r.\u0275\u0275inject(Ts),r.\u0275\u0275inject(da),r.\u0275\u0275inject(Bt.AttributeSerializerService),r.\u0275\u0275inject(iy))},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({providers:[_q,H3,q3,K3,rA,W3,{provide:Nn.EMBEDDABLE_COMPONENT,useValue:gq,multi:!0},{provide:Nn.EMBEDDABLE_COMPONENT,useValue:jI,multi:!0},{provide:Nn.EMBEDDABLE_COMPONENT,useValue:ME,multi:!0},{provide:Nc,useClass:Nc},{provide:Zc,useClass:Zc},{provide:af,useClass:af},{provide:Cy,useClass:Cy},{provide:NE,useClass:NE},{provide:sA,useClass:sA},{provide:fn.CONTENT_PLUGIN,useFactory:YH,multi:!0,deps:[Nc]},{provide:fn.CONTENT_PLUGIN,useFactory:eq,multi:!0,deps:[Zc]},{provide:fn.CONTENT_PLUGIN,useFactory:tq,multi:!0,deps:[af]},{provide:fn.CONTENT_PLUGIN,useFactory:nq,multi:!0,deps:[Cy]},{provide:fn.CONTENT_PLUGIN,useFactory:rq,multi:!0,deps:[NE]},{provide:xE,useValue:new bE({id:"virtuallist",name:"virtuallist",title:"Virtual List",editorComponent:void 0,renderComponent:mq}),multi:!0},{provide:xE,useFactory:cq,multi:!0,deps:[sA]},{provide:xE,useValue:new bE({id:"table",name:"table",title:"Table",editorComponent:void 0,renderComponent:yq}),multi:!0}],imports:[E.CommonModule,v.u5,v.UX,Oi.MaterialModule,si,sE,nr.RouterModule.forChild(bq),gs,ik.forChild(),EE,g3,Nn.UtilsModule,H_,Vd,Bt.AttributesModule,vI,E3,aU,Dk,kG,ok,wu,sO,kc,Vk]}),a}(),wq=function(a){(0,G.Z)(t,a);var n=(0,H.Z)(t);function t(){return(0,p.Z)(this,t),n.apply(this,arguments)}return(0,_.Z)(t)}(fO),Sq=function(){function a(n,t,e){(0,p.Z)(this,a),this.siteName=n,this.es=t,this.router=e,this.routesLoaded=!1}return(0,_.Z)(a,[{key:"panelPageListItemsService",get:function(){return this.es.getEntityCollectionService("PanelPageListItem")}},{key:"isLoaded",value:function(){return this.routesLoaded}},{key:"load",value:function(){var t=this;return this.panelPageListItemsService.getWithQuery("site=".concat(encodeURIComponent('{"term":{"site.keyword":{"value":"'.concat(this.siteName,'"}}}')),"&path=").concat(encodeURIComponent('{"wildcard":{"path.keyword":{"value":"*"}}}'))).pipe((0,Ce.U)(function(e){return e.filter(function(o){return void 0!==o.path&&""!==o.path})}),(0,Ce.U)(function(e){return e.map(function(o){return new ii(o)}).sort(function(o,s){return o.path.split("/").length===s.path.split("/").length?o.path.split("/")[o.path.split("/").length-1]>s.path.split("/")[s.path.split("/").length-1]?-1:1:o.path.split("/").length>s.path.split("/").length?-1:1})}),(0,ee.b)(function(e){return e.sort(function(o,s){return o.path.length>s.path.length?1:-1})}),(0,ee.b)(function(e){e.forEach(function(o){t.router.config.unshift({matcher:oA(o),component:ME,data:{panelPageListItem:o}}),t.router.config.unshift({matcher:aA(o),component:BE,data:{panelPageListItem:o}})}),t.routesLoaded=!0}),(0,ee.b)(function(){return console.log("panels routes loaded")}),(0,Ce.U)(function(){return!0}))}}]),a}(),Eq=function(){function a(n,t,e){(0,p.Z)(this,a),this.siteName=n,this.es=t,this.router=e}return(0,_.Z)(a,[{key:"panelPageListItemsService",get:function(){return this.es.getEntityCollectionService("PanelPageListItem")}},{key:"match",value:function(t){var e=this,o=t.url;-1!==o.indexOf("?")&&(o=t.url.substr(0,o.indexOf("?")));var s="path="+o.substr(1).split("/").reduce(function(u,c,l){return[].concat((0,y.Z)(u),[0===l?"/".concat(c):"".concat(u[l-1],"/").concat(c)])},[]).map(function(u){return e.encodePathComponent(u)}).join("&path=")+"&site=".concat(encodeURIComponent('{"term":{"site.keyword":{"value":"'.concat(this.siteName,'"}}}')));return this.panelPageListItemsService.getWithQuery(s).pipe((0,ti.K)(function(u){return(0,je.of)([])}),(0,Ce.U)(function(u){return u.reduce(function(c,l){return void 0===c||c.path.split("/").length<l.path.split("/").length?l:c},void 0)}),(0,Ce.U)(function(u){return!!u||t.url.indexOf("pages")>-1}))}},{key:"encodePathComponent",value:function(t){return'{"term":{"path.keyword":{"value":"'.concat(t,'"}}}')}}]),a}(),Pq=function(){function a(n,t,e){(0,p.Z)(this,a),this.siteName=n,this.es=t,this.router=e}return(0,_.Z)(a,[{key:"panelPageListItemsService",get:function(){return this.es.getEntityCollectionService("PanelPageListItem")}},{key:"redirect",value:function(t,e){var o=this;if(e.url.indexOf("pages")>-1)console.log("redirect: ".concat(e.url)),this.router.navigateByUrl(e.url);else{var s=e.url;-1!==s.indexOf("?")&&(s=e.url.substr(0,s.indexOf("?")));var u="path="+s.substr(1).split("/").reduce(function(c,l,m){return[].concat((0,y.Z)(c),[0===m?"/".concat(l):"".concat(c[m-1],"/").concat(l)])},[]).map(function(c){return o.encodePathComponent(c)}).join("&path=")+"&site=".concat(encodeURIComponent('{"term":{"site.keyword":{"value":"'.concat(this.siteName,'"}}}')));this.panelPageListItemsService.getWithQuery(u).pipe((0,Ce.U)(function(c){return c.reduce(function(l,m){return void 0===l||l.path.split("/").length<m.path.split("/").length?m:l},void 0)}),(0,Ce.U)(function(c){var l=e.url.substr(1).split("/").slice(c.path.split("/").length-1).join("/");return[c,l]})).subscribe(function(c){(0,g.Z)(c,2),o.router.navigate(["reload"])})}}},{key:"encodePathComponent",value:function(t){return'{"term":{"path.keyword":{"value":"'.concat(t,'"}}}')}}]),a}(),Aq=function(){var a=(0,_.Z)(function n(t,e,o,s){(0,p.Z)(this,n),t.register(function(n,t,e){var o=new Sq(n,t,e),s=new Eq(n,t,e),u=new Pq(n,t,e);return new wq({id:"panels",title:"Panels",loadingStrategy:o,matchingStrategy:s,redirectHandler:u})}(o,s,e))});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(pO),r.\u0275\u0275inject(nr.Router),r.\u0275\u0275inject(Nn.SITE_NAME),r.\u0275\u0275inject(Dr))},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({imports:[E.CommonModule]}),a}(),X3=function(){var a=function(){function n(t,e){var o=this;(0,p.Z)(this,n),this.fb=t,this.controlContainer=e,this.context$=new z.X(void 0),this.formGroup=this.fb.group({value:this.fb.control("",[v.kI.required])}),this.stateCtrl=this.fb.control(""),this.stateCtrlSub=this.stateCtrl.valueChanges.pipe((0,kr.b)(250),(0,xu.x)(),(0,Q.h)(function(s){try{return JSON.parse(s),!0}catch{return!1}}),(0,Ce.U)(function(s){return JSON.parse(s)})).subscribe(function(s){console.log("write state"),console.log(s),o.formGroup.get("value").setValue(s)}),this.onTouched=function(){}}return(0,_.Z)(n,[{key:"context",set:function(e){this.context$.next(e)}},{key:"ngOnInit",value:function(){var e=this;this.context$.subscribe(function(o){e.stateCtrl.setValue(o?JSON.stringify(o.data.value):"")})}},{key:"writeValue",value:function(e){e&&this.formGroup.setValue(e,{emitEvent:!1})}},{key:"registerOnChange",value:function(e){this.formGroup.valueChanges.subscribe(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){e?this.formGroup.disable():this.formGroup.enable()}},{key:"validate",value:function(e){return this.formGroup.valid?null:{invalidForm:{valid:!1,message:"source is invalid"}}}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(v.QS),r.\u0275\u0275directiveInject(v.gN))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-context-state-form"]],inputs:{context:"context"},features:[r.\u0275\u0275ProvidersFeature([{provide:v.JU,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0},{provide:v.Cf,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0}])],decls:2,vars:2,consts:[[3,"formGroup"],["cols","40","rows","20","required","",3,"formControl"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"div",0),r.\u0275\u0275element(1,"textarea",1),r.\u0275\u0275elementEnd()),2&t&&(r.\u0275\u0275property("formGroup",e.formGroup),r.\u0275\u0275advance(1),r.\u0275\u0275property("formControl",e.stateCtrl))},dependencies:[v.Fj,v.JJ,v.JL,v.Q7,v.oH,v.sg]}),a}(),Rq=function(){var a=function(){function n(t,e){(0,p.Z)(this,n),this.fb=t,this.controlContainer=e}return(0,_.Z)(n,[{key:"ngOnInit",value:function(){this.controlContainer.control.addControl("adaptor",this.fb.control("data",v.kI.required)),this.controlContainer.control.addControl("data",this.fb.control(""))}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(v.QS),r.\u0275\u0275directiveInject(v.gN))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-context-state-editor"]],viewQuery:function(t,e){var o;1&t&&r.\u0275\u0275viewQuery(X3,7),2&t&&r.\u0275\u0275queryRefresh(o=r.\u0275\u0275loadQuery())&&(e.contextStateFormComp=o.first)},inputs:{context:"context"},decls:2,vars:2,consts:[[3,"formGroup"],["formControlName","data",3,"context"]],template:function(t,e){1&t&&(r.\u0275\u0275elementContainerStart(0,0),r.\u0275\u0275element(1,"classifieds-ui-context-state-form",1),r.\u0275\u0275elementContainerEnd()),2&t&&(r.\u0275\u0275property("formGroup",e.controlContainer.control),r.\u0275\u0275advance(1),r.\u0275\u0275property("context",e.context))},dependencies:[v.JJ,v.JL,v.sg,v.u,X3]}),a}(),Q3=function(){var a=function(){function n(t,e){(0,p.Z)(this,n),this.attributeSerializer=t,this.es=e}return(0,_.Z)(n,[{key:"entityCollectionService",get:function(){return this.es.getEntityCollectionService("GlobalState")}},{key:"resolve",value:function(e,o,s){var u=this;console.log("hookup globalstate"),console.log(o);var T,m=s&&s.has("name")&&s.get("name")&&null!==s.get("name")&&""!==s.get("name")?s.get("name"):void 0;return m?this.entityCollectionService.collection$.pipe((0,Zt.Ys)((T=m,(0,Zt.P1)(function(T){return T.entities},function(B){return B[T]?B[T]:void 0}))),(0,Ce.U)(function(C){return C?u.attributeSerializer.deserialize(C.value):o.value?o.value:{}}),(0,Ce.U)(function(C){return C.root?C.root:C}),(0,ee.b)(function(C){console.log("resolve globalstate"),console.log(C)})):(0,je.of)(o.value?o.value:{}).pipe((0,ee.b)(function(C){console.log("resolve default globalstate"),console.log(C)}))}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Bt.AttributeSerializerService),r.\u0275\u0275inject(Dr))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),Dq=(0,_.Z)(function a(n){(0,p.Z)(this,a),n&&(this.id=n.id,this.value=new Bt.AttributeValue(n.value))}),Oq={GlobalState:{entityName:"GlobalState"}},Fq=function(){var a=(0,_.Z)(function n(t,e,o,s,u,c,l){(0,p.Z)(this,n),t.registerMetadataMap(Oq),e.registerService("GlobalState",new Nn.NoopDataService("GlobalState")),o.register(function(n){var t=new Bt.AttributeValue;return new Fs({id:"state",name:"state",title:"State",baseObject:t,resolver:n,editorComponent:Rq})}(l)),c.register(function(n,t){return new ry({id:"state",title:"State",build:function(){Ac.prototype.writeState=function(o){return new Promise(function(s){n.getEntityCollectionService("GlobalState").upsert(new Dq({id:o.id,value:t.serialize(o.value,"root")})).pipe((0,ee.b)(function(c){return s(c)})).subscribe()})}}})}(s,u))});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Qi),r.\u0275\u0275inject(oc),r.\u0275\u0275inject(Su),r.\u0275\u0275inject(Dr),r.\u0275\u0275inject(Bt.AttributeSerializerService),r.\u0275\u0275inject(zd),r.\u0275\u0275inject(Q3))},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({providers:[Q3],imports:[E.CommonModule,v.u5,v.UX]}),a}(),Mq=S(14382);function No(a){return new Promise(function(n,t){a.oncomplete=a.onsuccess=function(){return n(a.result)},a.onabort=a.onerror=function(){return t(a.error)}})}function ka(){return uA||(uA=function Nq(a,n){var t=indexedDB.open(a);t.onupgradeneeded=function(){return t.result.createObjectStore(n)};var e=No(t);return function(o,s){return e.then(function(u){return s(u.transaction(n,o).objectStore(n))})}}("keyval-store","keyval")),uA}function J3(a,n){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:ka())("readwrite",function(e){return e.put(n,a),No(e.transaction)})}var $q=function(n){return new Kd({id:"idb_keyval",title:"Idb Keyval",create:function(e){var o=e.object,s=e.identity,u=e.params,c=e.parentObject;return(0,je.of)({success:!1}).pipe((0,st.w)(function(){return s({object:o,parentObject:c}).pipe((0,Ce.U)(function(l){return{identity:l.identity}}))}),(0,st.w)(function(l){var m=l.identity;return u&&0!==Object.keys(u).length?(0,Un.D)(Object.keys(u).map(function(C){return n.paramValue(u[C],new Map).pipe((0,Ce.U)(function(T){return(0,d.Z)({},C,T)}))})).pipe((0,Ce.U)(function(C){return C.reduce(function(T,B){return(0,b.Z)((0,b.Z)({},T),B)},{})}),(0,Ce.U)(function(C){return{identity:m,options:C}})):(0,je.of)({identity:m,options:{}})}),(0,Ce.U)(function(l){return{name:l.options.prefix+l.identity}}),(0,st.w)(function(l){var m=l.name;return new W.y(function(C){J3(m,o).then(function(T){console.log("idb write suceeded"),console.log(T),C.next({success:!0}),C.complete()}).catch(function(T){console.log("idb write failed"),console.log(T),C.next({success:!1}),C.complete()})})}))},read:function(e){return Jo(e),(0,je.of)({success:!1})},update:function(e){var o=e.object,s=e.identity,u=e.params,c=e.parentObject;return(0,je.of)({success:!1}).pipe((0,st.w)(function(){return s({object:o,parentObject:c}).pipe((0,Ce.U)(function(l){return{identity:l.identity}}))}),(0,st.w)(function(l){var m=l.identity;return u&&0!==Object.keys(u).length?(0,Un.D)(Object.keys(u).map(function(C){return n.paramValue(u[C],new Map).pipe((0,Ce.U)(function(T){return(0,d.Z)({},C,T)}))})).pipe((0,Ce.U)(function(C){return C.reduce(function(T,B){return(0,b.Z)((0,b.Z)({},T),B)},{})}),(0,Ce.U)(function(C){return{identity:m,options:C}})):(0,je.of)({identity:m,options:{}})}),(0,Ce.U)(function(l){return{name:l.options.prefix+l.identity}}),(0,st.w)(function(l){var m=l.name;return new W.y(function(C){J3(m,o).then(function(T){console.log("idb write suceeded"),console.log(T),C.next({success:!0}),C.complete()}).catch(function(T){console.log("idb write failed"),console.log(T),C.next({success:!1}),C.complete()})})}))},delete:function(e){return Jo(e),(0,je.of)({success:!1})},query:function(e){var o=e.params,s=e.rule,u=e.identity;return n.paramValues(new Map(Object.keys(o).map(function(c){return[c,o[c]]}))).pipe((0,st.w)(function(c){return new W.y(function(l){(function jq(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ka())("readonly",function(n){if(n.getAllKeys)return No(n.getAllKeys());var t=[];return function cA(a,n){return a.openCursor().onsuccess=function(){this.result&&(n(this.result),this.result.continue())},No(a.transaction)}(n,function(e){return t.push(e.key)}).then(function(){return t})})})().then(function(m){return m.filter(function(C){return 0==="".concat(C).indexOf(c.get("prefix"))})}).then(function(m){return function Lq(a){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:ka())("readonly",function(t){return Promise.all(a.map(function(e){return No(t.get(e))}))})}(m)}).then(function(m){l.next({entities:m,success:!0}),l.complete()})})}),(0,st.w)(function(c){return s?new W.y(function(l){var m=new qd.Engine;m.addOperator("startsWith",function(C,T){return"string"==typeof T&&"string"==typeof C&&0===T.indexOf(C)}),m.addOperator("term||wildcard",function(C,T){var B=JSON.parse(decodeURIComponent(T)),F=(0,Ms.JSONPath)({path:"$.term.*.value.@string()",json:B,flatten:!0});return void 0!==B.wildcard||B.term&&0!==F.lengh&&F[0]===C}),m.addRule(s),m.addFact("identity",function(C,T){return new W.y(function(B){T.factValue("entity").then(function(F){return u({object:F}).pipe((0,Ce.U)(function(U){return U.identity})).toPromise()}).then(function(F){B.next(F),B.complete()})}).toPromise()},{cache:!1}),je.of.apply(void 0,(0,y.Z)(c.entities)).pipe((0,Li.b)(function(C){return new W.y(function(T){m.removeFact("entity"),m.addFact("entity",C,{cache:!1}),m.run().then(function(B){T.next([C,B.events.findIndex(function(F){return"visible"===F.type})>-1]),T.complete()})})}),(0,Q.h)(function(C){return(0,g.Z)(C,2)[1]}),(0,Ce.U)(function(C){return(0,g.Z)(C,1)[0]}),function Bq(a,n){return(0,vs.e)((0,Mq.U)(a,n,arguments.length>=2,!1,!0))}(function(C,T){return[].concat((0,y.Z)(C),[T])},[]),(0,hi.d)([])).subscribe(function(C){l.next((0,b.Z)((0,b.Z)({},c),{},{entities:C})),l.complete()})}):(0,je.of)(c)}))}})},zq=function(){var a=(0,_.Z)(function n(t,e){(0,p.Z)(this,n),t.register($q(e))});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Pu),r.\u0275\u0275inject(Ts))},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({imports:[oy]}),a}(),Gq=function(){var a=function(){function n(t,e,o,s){(0,p.Z)(this,n),this.authFacade=e,this.router=o,this.title="vertigo",this.menuClicked=new r.EventEmitter,(0,E.isPlatformBrowser)(t)&&(bridge=s)}return(0,_.Z)(n,[{key:"ngOnInit",value:function(){var e=this;this.authFacade.getUser$.subscribe(function(o){e.isAuthenticated=!!o})}},{key:"login",value:function(){this.authFacade.login()}},{key:"menuClick",value:function(){this.menuClicked.emit()}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(r.PLATFORM_ID),r.\u0275\u0275directiveInject(li),r.\u0275\u0275directiveInject(nr.Router),r.\u0275\u0275directiveInject(Ac))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["app-root"]],outputs:{menuClicked:"menuClicked"},decls:3,vars:0,consts:[["fxLayout","column","fxFill",""],[1,"outlet-wrapper"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"div",0)(1,"div",1),r.\u0275\u0275element(2,"router-outlet"),r.\u0275\u0275elementEnd()())},dependencies:[Wt,Ma,nr.RouterOutlet],styles:[".outlet-wrapper[_ngcontent-%COMP%]{height:100%}"]}),a}(),Vq=S(10203),Aa_production=!1,Aa_site="vertigoapp",Aa_apiGatewaySettings={endpointUrl:"https://us-east-1.climateaware-dev.eco/rollthecloudinc/vertigoapp-objects/shapeshifter"},Aa_mediaSettings={endpointUrl:"https://us-east-1.climateaware-dev.eco/vertigoapp/media",cloudinaryUrl:"https://api.cloudinary.com/v1_1/dj4vvkgzw",uploadPreset:"i0hm4opm",imageUrl:"https://us-east-1.climateaware-dev.eco/vertigoapp",bucket:"classifieds-ui-dev",prefix:"media/"},Aa_cognitoSettings={identityPoolId:"us-east-1:6f5cdc41-35b0-41ca-9f6b-7eca11320942",region:"us-east-1",userPoolId:"us-east-1_z8PhK3D8V"},Aa_panelsSettings={openSearchDomain:"search-classifieds-ui-dev-eldczuhq3vesgpjnr3vie6cagq",s3Bucket:"classifieds-ui-dev",objectsRootUrl:"https://rollthecloudinc.github.io/vertigoapp-objects"},Aa_alienaliasSettings={openSearchDomain:"search-classifieds-ui-dev-eldczuhq3vesgpjnr3vie6cagq"},Aa_rumSettings={appId:"",guestRoleArn:"",identityPoolId:"",region:""},Aa_clientSettings={authority:"https://sso.climateaware-dev.eco",client_id:"3lkidn79q4jq8nahkecsguleij",redirect_uri:"https://dev.climatewarrior.eco/auth-callback",silent_redirect_uri:"https://dev.climatewarrior.eco/silent-refresh.html",response_type:"code",scope:"openid profile aws.cognito.signin.user.admin ads_api/ads_api taxonomy_api/taxonomy_api chat/chat media_api/media_api profiles_api/profiles_api",filterProtocolClaims:!0,loadUserInfo:!0,automaticSilentRenew:!0,stateStore:void 0,userStore:void 0,metadata:{issuer:"https://cognito-idp.us-east-1.amazonaws.com/us-east-1_z8PhK3D8V",authorization_endpoint:"https://sso.climateaware-dev.eco/oauth2/authorize",userinfo_endpoint:"https://sso.climateaware-dev.eco/oauth2/userInfo",end_session_endpoint:"https://sso.climateaware-dev.eco/logout",token_endpoint:"https://sso.climateaware-dev.eco/oauth2/token",jwks_uri:"https://sso.climateaware-dev.eco/us-east-1_z8PhK3D8V"},signingKeys:[{alg:"RS256",e:"AQAB",kid:"LFfHKQ51C81E+ByYd/wucwrvfiEnYJQtJvb4GHbalFQ=",kty:"RSA",n:"gijyjUXIzkAPofeaM7JCAsuLHLc_GP3of-NT8ARjSTTMif-wqJeNww4MJkvRYzfL6mL_owVZgD37O4Dd81jBLY6iEyi6hxHYTUuXR7mYkQ2008Fp3m45wztUKWeeNgzsvuR01STkkwmuf7afkQXJUlHts8eT47Dqc4mrKA3vcHYG4vJXmvtjQT-IirkA-yU36TXyd1TPOetdwlmFOcSYfL4CW7ZZfVg1dCvT1T50mO1AaQDMcA8S3fVfROGW36hjiB8r9q5zQrrfBLTMPSVpn85LscVLbYUxJL9yLygiD4UTCXw7Y1hiE2tDL2nmy6PHumylNf8yj5I7N56Kz4cwtQ",use:"sig"},{alg:"RS256",e:"AQAB",kid:"UNTk4hVhUrq0k8uAGvDYs/w0g/iW+b9PweObMbM6S/w=",kty:"RSA",n:"g7Z-JKiovH7ZnwK1o8hsiLf4GfxA9w11RsQK3yQWG3xR__qKbkvxKxhn3Xt5QsUSo8nhiwWtsjUTyVxRO7WJlCjSHGztvYhoYIlwSL8Mqtf3Plg6CrJoDhq7CZDe_TNeQczfBI8k1w5U6n4h5G-e4Fa41nH-qXrDh2L7onTFKSzZDJRCELmh64ur5RmU6kuhwrejwS4YXuz4gKQRcTuDu9AXH7A7cNO5EF_sVRy8hkFtKCPO-mgwJ5S_e5_Y5gleJRpMZnzWmBv_-GpwO5V9XzxBr5s1O9HqyBMXR1pKU_YykeP7PvukEDpyr8UXu-2drzq-oHzXHDInNHjYPLx3BQ",use:"sig"}]},qq={router:function F8(a,n){var t=n;switch(t.type){case ak:case uk:case sk:return{state:t.payload.routerState,navigationId:t.payload.event.id};default:return a}}},Kq=[],Y3=(0,_.Z)(function a(n){(0,p.Z)(this,a),n&&(this.query=n.query)}),Wq=function(){var a=function(){function n(t,e){var o=this;(0,p.Z)(this,n),this.fb=t,this.attributeSerializer=e,this.settings$=new z.X(void 0),this.formGroup=this.fb.group({query:this.fb.control("",[v.kI.required])}),this.settingsSub=this.settings$.pipe((0,Ce.U)(function(s){return s?new Y3(o.attributeSerializer.deserializeAsObject(s)):void 0})).subscribe(function(s){s?o.formGroup.get("query").setValue(s.query):o.formGroup.get("query").setValue("")}),this.onTouched=function(){}}return(0,_.Z)(n,[{key:"settings",set:function(e){this.settings$.next(e)}},{key:"ngOnInit",value:function(){}},{key:"writeValue",value:function(e){e&&this.formGroup.setValue(e,{emitEvent:!1})}},{key:"registerOnChange",value:function(e){this.formGroup.valueChanges.subscribe(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){e?this.formGroup.disable():this.formGroup.enable()}},{key:"validate",value:function(e){return this.formGroup.valid?null:{invalidForm:{valid:!1,message:"content is invalid"}}}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(v.QS),r.\u0275\u0275directiveInject(Bt.AttributeSerializerService))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-select-source-form"]],inputs:{settings:"settings"},features:[r.\u0275\u0275ProvidersFeature([{provide:v.JU,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0},{provide:v.Cf,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0}])],decls:5,vars:1,consts:[[3,"formGroup"],["matInput","","formControlName","query","required",""]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"div",0)(1,"mat-form-field")(2,"mat-label"),r.\u0275\u0275text(3,"Query"),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(4,"input",1),r.\u0275\u0275elementEnd()()),2&t&&r.\u0275\u0275property("formGroup",e.formGroup)},dependencies:[v.Fj,v.JJ,v.JL,v.Q7,v.sg,v.u,En.MatLegacyFormField,En.MatLegacyLabel,Hr.MatLegacyInput]}),a}(),Xq=function(){var a=(0,_.Z)(function n(t){(0,p.Z)(this,n),this.controlContainer=t,this.settings=[]});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(v.gN))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-transform-select"]],inputs:{settings:"settings"},decls:2,vars:2,consts:[[3,"formGroup"],["formControlName","settings",3,"settings"]],template:function(t,e){1&t&&(r.\u0275\u0275elementContainerStart(0,0),r.\u0275\u0275element(1,"classifieds-ui-select-source-form",1),r.\u0275\u0275elementContainerEnd()),2&t&&(r.\u0275\u0275property("formGroup",e.controlContainer.control),r.\u0275\u0275advance(1),r.\u0275\u0275property("settings",e.settings))},dependencies:[v.JJ,v.JL,v.sg,v.u,Wq],encapsulation:2}),a}(),Qq=function(){var a=function(){function n(){(0,p.Z)(this,n)}return(0,_.Z)(n,[{key:"ngOnInit",value:function(){}}]),n}();return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-transform-merge"]],decls:2,vars:0,template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"p"),r.\u0275\u0275text(1,"transform merge"),r.\u0275\u0275elementEnd())}}),a}(),Jq=function(n){return new rs({id:"select",title:"Select",editor:Xq,fetch:function(e){var o=e.settings,s=e.dataset;return Or(function(){return!!s},(0,je.of)(s).pipe((0,Ce.U)(function(){return new Y3(n.deserializeAsObject(o))}),(0,Ce.U)(function(u){return new pr({results:(0,Ms.JSONPath)({path:u.query,json:s.results})})})),(0,je.of)(new pr))}})},eK=function(){var a=(0,_.Z)(function n(t,e){(0,p.Z)(this,n),[Jq(e),new rs({id:"merge",title:"Merge",editor:Qq,fetch:function(t){return(0,je.of)(new pr)}})].forEach(function(o){return t.register(o)})});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(da),r.\u0275\u0275inject(Bt.AttributeSerializerService))},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({imports:[E.CommonModule,v.u5,v.UX,Oi.MaterialModule,kc]}),a}(),tK=function(){var a=function(){function n(t,e){var o=this;(0,p.Z)(this,n),this.fb=t,this.attributeSerializer=e,this.contexts=[],this.settings$=new z.X(void 0),this.paramValues$=new z.X([]),this.formGroup=this.fb.group({entityName:this.fb.control(""),queryString:this.fb.control(""),params:this.fb.control([])}),this.settingsSub=this.settings$.pipe((0,Ce.U)(function(s){return s?o.attributeSerializer.deserializeAsObject(s):void 0})).subscribe(function(s){s?(o.formGroup.get("entityName").setValue(s.entityName),o.formGroup.get("queryString").setValue(s.queryString)):(o.formGroup.get("entityName").setValue(""),o.formGroup.get("queryString").setValue(""))}),this.queryStringChangeSub=this.formGroup.get("queryString").valueChanges.pipe((0,kr.b)(500)).subscribe(function(s){var u=Mo.parse("?"+s);o.paramsParsed=u}),this.onTouched=function(){}}return(0,_.Z)(n,[{key:"settings",set:function(e){this.settings$.next(e)}},{key:"ngOnInit",value:function(){}},{key:"writeValue",value:function(e){e&&this.formGroup.setValue(e,{emitEvent:!1})}},{key:"registerOnChange",value:function(e){this.formGroup.valueChanges.subscribe(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){e?this.formGroup.disable():this.formGroup.enable()}},{key:"validate",value:function(e){return this.formGroup.valid?null:this.formGroup.errors}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(v.QS),r.\u0275\u0275directiveInject(Bt.AttributeSerializerService))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-entity-datasource-form"]],inputs:{contexts:"contexts",settings:"settings"},features:[r.\u0275\u0275ProvidersFeature([{provide:v.JU,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0},{provide:v.Cf,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0}])],decls:8,vars:4,consts:[[3,"formGroup"],["matInput","","placeholder","Name","formControlName","entityName","required",""],["matInput","","placeholder","Query String","formControlName","queryString"],["formControlName","params",3,"params","paramValues","contexts"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"div",0)(1,"div")(2,"mat-form-field"),r.\u0275\u0275element(3,"input",1),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(4,"div")(5,"mat-form-field"),r.\u0275\u0275element(6,"input",2),r.\u0275\u0275elementEnd()(),r.\u0275\u0275element(7,"classifieds-ui-params-form",3),r.\u0275\u0275elementEnd()),2&t&&(r.\u0275\u0275property("formGroup",e.formGroup),r.\u0275\u0275advance(7),r.\u0275\u0275property("params",e.paramsParsed)("paramValues",e.paramValues$.value)("contexts",e.contexts))},dependencies:[v.Fj,v.JJ,v.JL,v.Q7,v.sg,v.u,En.MatLegacyFormField,Hr.MatLegacyInput,ey]}),a}(),eF=function(){var a=(0,_.Z)(function n(t){(0,p.Z)(this,n),this.controlContainer=t,this.settings=[],this.contexts=[]});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(v.gN))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-entity-datasource"]],inputs:{settings:"settings",contexts:"contexts"},decls:2,vars:3,consts:[[3,"formGroup"],["formControlName","settings",3,"settings","contexts"]],template:function(t,e){1&t&&(r.\u0275\u0275elementContainerStart(0,0),r.\u0275\u0275element(1,"classifieds-ui-entity-datasource-form",1),r.\u0275\u0275elementContainerEnd()),2&t&&(r.\u0275\u0275property("formGroup",e.controlContainer.control),r.\u0275\u0275advance(1),r.\u0275\u0275property("settings",e.settings)("contexts",e.contexts))},dependencies:[v.JJ,v.JL,v.sg,v.u,tK],encapsulation:2}),a}(),tF=(0,_.Z)(function a(n){(0,p.Z)(this,a),this.params=[],n&&(this.entityName=n.entityName,this.queryString=n.queryString?n.queryString:"",n.params&&Array.isArray(n.params)&&(this.params=n.params.map(function(t){return new Mi(t)})))}),iK=function(){var a=(0,_.Z)(function n(t,e,o,s,u,c){(0,p.Z)(this,n),t.register(function(n,t,e,o){return new rs({id:"entity",title:"Entity",editor:eF,fetch:function(u){var c=u.settings,l=u.metadata;return(0,je.of)(new pr).pipe((0,Ce.U)(function(){return t.deserializeAsObject(c)}),(0,Ce.U)(function(m){return new tF(m)}),(0,st.w)(function(m){return e.getUrl("?"+m.queryString,m.params,l).pipe((0,Ce.U)(function(C){return{e:m,queryString:C}}))}),(0,Ce.U)(function(m){return{e:m.e,queryString:m.queryString.substr(1)}}),(0,st.w)(function(m){var C=m.e,T=m.queryString;return T&&""!==T?o.getEntityCollectionService(C.entityName).getWithQuery(T):o.getEntityCollectionService(C.entityName).getAll()}),(0,Ce.U)(function(m){return new pr({results:m})}))},editorOptions:function(){return(0,je.of)(new mE({fullscreen:!0}))},getBindings:function(u){var c=u.settings;return(0,je.of)([]).pipe((0,Ce.U)(function(){return t.deserializeAsObject(c)}),(0,Ce.U)(function(m){return new tF(m)}),(0,st.w)(function(m){return n.extractContexts(m.params)}),(0,Ce.U)(function(m){return m.map(function(C){return new fn.ContentBinding({id:C,type:"context"})})}))}})}(o,s,u,c)),e.register(new gO({id:"entity",title:"Entity",editor:eF,send:function(t){return(0,je.of)(new yk({}))}}))});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(da),r.\u0275\u0275inject(gE),r.\u0275\u0275inject(_k),r.\u0275\u0275inject(Bt.AttributeSerializerService),r.\u0275\u0275inject(ny),r.\u0275\u0275inject(Dr))},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({imports:[E.CommonModule,v.UX,v.u5,Oi.MaterialModule,Vd,wu]}),a}(),oK=function(){var a=function(){function n(t){(0,p.Z)(this,n),this.fb=t,this.contexts=[],this.settings$=new z.X(void 0),this.datasource$=new z.X(void 0),this.formGroup=this.fb.group({}),this.onTouched=function(){}}return(0,_.Z)(n,[{key:"settings",set:function(e){this.settings$.next(e)}},{key:"ngOnInit",value:function(){}},{key:"writeValue",value:function(e){e&&this.formGroup.setValue(e,{emitEvent:!1})}},{key:"registerOnChange",value:function(e){this.formGroup.valueChanges.subscribe(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){e?this.formGroup.disable():this.formGroup.enable()}},{key:"validate",value:function(e){return this.formGroup.valid?null:this.formGroup.errors}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(v.QS))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-loop-datasource-form"]],inputs:{contexts:"contexts",settings:"settings"},features:[r.\u0275\u0275ProvidersFeature([{provide:v.JU,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0},{provide:v.Cf,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0}])],decls:1,vars:1,consts:[[3,"formGroup"]],template:function(t,e){1&t&&r.\u0275\u0275element(0,"div",0),2&t&&r.\u0275\u0275property("formGroup",e.formGroup)},dependencies:[v.JL,v.sg]}),a}(),aK=function(){var a=(0,_.Z)(function n(t){(0,p.Z)(this,n),this.controlContainer=t,this.settings=[],this.contexts=[]});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(v.gN))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-loop-datasource"]],inputs:{settings:"settings",contexts:"contexts"},decls:2,vars:3,consts:[[3,"formGroup"],["formControlName","settings",3,"settings","contexts"]],template:function(t,e){1&t&&(r.\u0275\u0275elementContainerStart(0,0),r.\u0275\u0275element(1,"classifieds-ui-loop-datasource-form",1),r.\u0275\u0275elementContainerEnd()),2&t&&(r.\u0275\u0275property("formGroup",e.controlContainer.control),r.\u0275\u0275advance(1),r.\u0275\u0275property("settings",e.settings)("contexts",e.contexts))},dependencies:[v.JJ,v.JL,v.sg,v.u,oK],encapsulation:2}),a}(),sK=(0,_.Z)(function a(n){(0,p.Z)(this,a)}),uK=function(n,t){return new rs({id:"loop",title:"loop",editor:aK,fetch:function(o){var s=o.settings,u=o.dataset,c=o.datasource,l=o.metadata,m=o.datasources;return(0,je.of)(new pr).pipe((0,Ce.U)(function(){return n.deserializeAsObject(s)}),(0,Ce.U)(function(C){return C?new sK(C):void 0}),(0,st.w)(function(C){return(0,Un.D)(u?u.results.map(function(T){return t.evalDatasource({datasource:new Pc({plugin:"data",renderer:c.renderer,settings:n.serialize({data:JSON.stringify(u.results)},"root").attributes}),datasources:m,metadata:new Map([].concat((0,y.Z)(l?Array.from(l).filter(function(B){return"contexts"!==(0,g.Z)(B,1)[0]}):[]),[["contexts",[].concat((0,y.Z)(l.has("contexts")&&Array.isArray(l.get("contexts"))?l.get("contexts").filter(function(B){return"_root"!==B.name}):[]),[new co({name:"_root",adaptor:"data",data:T})])]]))}).pipe((0,kn.q)(1))}):[]).pipe((0,Ce.U)(function(T){return new pr({results:T.reduce(function(B,F){return[].concat((0,y.Z)(B),(0,y.Z)(F.results))},[])})}),(0,hi.d)(new pr({results:[]})))}))}})},cK=function(){var a=(0,_.Z)(function n(t,e,o){(0,p.Z)(this,n),[uK(e,o)].forEach(function(s){return t.register(s)})});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(da),r.\u0275\u0275inject(Bt.AttributeSerializerService),r.\u0275\u0275inject(aO))},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({imports:[E.CommonModule,v.UX,Oi.MaterialModule,Vd,kc]}),a}();function lK(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"mat-option",6),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&a){var t=n.$implicit;r.\u0275\u0275property("value",t.value.id),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(t.value.title)}}function dK(a,n){}function fK(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div"),r.\u0275\u0275element(1,"druid-ordain-validation-validator",4),r.\u0275\u0275elementStart(2,"button",3),r.\u0275\u0275listener("click",function(){var c=r.\u0275\u0275restoreView(t).index,l=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(l.deleteValidator$.next(c))}),r.\u0275\u0275text(3,"Delete"),r.\u0275\u0275elementEnd()()}if(2&a){var e=n.index,o=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("formControlName",e)("validation",o.validation$.value.validators[e])}}var js=function(a){(0,G.Z)(t,a);var n=(0,H.Z)(t);function t(e){var o;return(0,p.Z)(this,t),o=n.call(this,e),e&&(o.editor=e.editor,o.errorMessage=e.errorMessage,o.builder=e.builder),o}return(0,_.Z)(t)}(Rn.Plugin),pK=(0,_.Z)(function a(n){(0,p.Z)(this,a),n&&(this.name=n.name,this.validator=n.validator,this.overrideErrorMessage=n.overrideErrorMessage,n.paramSettings&&"string"!=typeof n.paramSettings&&(this.paramSettings=new hK(n.paramSettings)))}),hK=(0,_.Z)(function a(n){(0,p.Z)(this,a),this.params=[],n&&(this.paramsString=n.paramsString,n.params&&Array.isArray(n.params)&&(this.params=n.params.map(function(t){return new Mi(t)})))}),wy=(0,_.Z)(function a(n){(0,p.Z)(this,a),n&&Array.isArray(n.validators)&&(this.validators=n.validators.map(function(t){return new pK(t)}))}),nF=function(){var a=(0,_.Z)(function n(t){(0,p.Z)(this,n),this.viewContainerRef=t});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(r.ViewContainerRef))},a.\u0275dir=r.\u0275\u0275defineDirective({type:a,selectors:[["","druidValidationRendererHost",""]]}),a}(),mK=function(){var a=function(){function n(t){var e=this;(0,p.Z)(this,n),this.fb=t,this.contexts=[],this.settings$=new z.X(void 0),this.afterViewInit$=new se.x,this.paramValues$=new z.X([]),this.formGroup=this.fb.group({paramsString:this.fb.control(""),params:this.fb.control([])}),this.paramsStringChangeSub=this.formGroup.get("paramsString").valueChanges.pipe((0,kr.b)(500)).subscribe(function(o){var s=Mo.parse("?"+o);e.paramsParsed=s}),this.settingsSub=this.settings$.pipe((0,ee.b)(function(o){o&&e.formGroup.get("paramsString").setValue(o.paramsString?o.paramsString:"")})).subscribe(),this.settingsParamsSub=(0,Sr.a)([this.settings$,this.formGroup.get("paramsString").valueChanges]).pipe((0,Q.h)(function(o){return void 0!==(0,g.Z)(o,1)[0]}),(0,Rr.g)(1),(0,ee.b)(function(o){var s=(0,g.Z)(o,1);return e.paramValues$.next(s[0].params)})).subscribe(),this.onTouched=function(){}}return(0,_.Z)(n,[{key:"settings",set:function(e){this.settings$.next(e)}},{key:"writeValue",value:function(e){e&&this.formGroup.setValue(e,{emitEvent:!1})}},{key:"registerOnChange",value:function(e){this.formGroup.valueChanges.subscribe(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){e?this.formGroup.disable():this.formGroup.enable()}},{key:"validate",value:function(e){return this.formGroup.valid?null:this.formGroup.errors}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(v.QS))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["druid-ordain-validation-params-editor-form"]],inputs:{contexts:"contexts",settings:"settings"},features:[r.\u0275\u0275ProvidersFeature([{provide:v.JU,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0},{provide:v.Cf,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0}])],decls:6,vars:4,consts:[[3,"formGroup"],[1,"params-container"],["matInput","","placeholder","Params","formControlName","paramsString"],["formControlName","params",3,"params","paramValues","contexts"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div")(3,"mat-form-field"),r.\u0275\u0275element(4,"input",2),r.\u0275\u0275elementEnd()(),r.\u0275\u0275element(5,"classifieds-ui-params-form",3),r.\u0275\u0275elementEnd()()),2&t&&(r.\u0275\u0275property("formGroup",e.formGroup),r.\u0275\u0275advance(5),r.\u0275\u0275property("params",e.paramsParsed)("paramValues",e.paramValues$.value)("contexts",e.contexts))},dependencies:[v.Fj,v.JJ,v.JL,v.sg,v.u,En.MatLegacyFormField,Hr.MatLegacyInput,ey]}),a}(),$s=function(){var a=(0,_.Z)(function n(t){(0,p.Z)(this,n),this.controlContainer=t,this.settings=[],this.contexts=[]});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(v.gN))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["druid-ordain-validation-params-editor"]],inputs:{settings:"settings",contexts:"contexts"},decls:2,vars:3,consts:[[3,"formGroup"],["formControlName","paramSettings",3,"settings","contexts"]],template:function(t,e){1&t&&(r.\u0275\u0275elementContainerStart(0,0),r.\u0275\u0275element(1,"druid-ordain-validation-params-editor-form",1),r.\u0275\u0275elementContainerEnd()),2&t&&(r.\u0275\u0275property("formGroup",e.controlContainer.control),r.\u0275\u0275advance(1),r.\u0275\u0275property("settings",e.settings)("contexts",e.contexts))},dependencies:[v.JJ,v.JL,v.sg,v.u,mK],encapsulation:2}),a}(),gK=function(){function a(n,t){(0,p.Z)(this,a),this.pluginManager=n,this.formsValidationUtils=t}return(0,_.Z)(a,[{key:"loadPlugins",value:function(t){var e=this;return(0,je.of)(!1).pipe((0,ee.b)(function(){return e.pluginManager.register(e.makeRequired())}),(0,ee.b)(function(){return e.pluginManager.register(e.makeRequiredTrue())}),(0,ee.b)(function(){e.pluginManager.register(e.makeMin()),e.pluginManager.register(e.makeMax()),e.pluginManager.register(e.makeMinLength()),e.pluginManager.register(e.makeMaxLength())}),(0,Ce.U)(function(){return e.pluginManager.register(e.makeEmail())}),(0,Ce.U)(function(){return e.pluginManager.register(e.makePattern())}),(0,Ce.U)(function(){return e.pluginManager.register(e.nullValidator())}),(0,Ce.U)(function(){return!0}))}},{key:"makeRequired",value:function(){var t=this;return new js({id:"required",title:"Required",errorMessage:"Field is required",editor:$s,builder:function(o){var s=o.serialized;return(0,je.of)(function(u){return(0,je.of)(v.kI.required(t.formsValidationUtils.rebuildControl({c:u,serialized:s})))})}})}},{key:"makeRequiredTrue",value:function(){var t=this;return new js({id:"required_true",title:"Required True",errorMessage:"Field is required",editor:$s,builder:function(o){var s=o.serialized;return(0,je.of)(function(u){return(0,je.of)(v.kI.requiredTrue(t.formsValidationUtils.rebuildControl({c:u,serialized:s})))})}})}},{key:"makeEmail",value:function(){var t=this;return new js({id:"email",title:"Email",errorMessage:"Invalid email",editor:$s,builder:function(o){var s=o.serialized;return(0,je.of)(function(u){return(0,je.of)(v.kI.email(t.formsValidationUtils.rebuildControl({c:u,serialized:s})))})}})}},{key:"nullValidator",value:function(){var t=this;return new js({id:"null",title:"Null",errorMessage:"nota",editor:$s,builder:function(o){var s=o.serialized;return(0,je.of)(function(u){return(0,je.of)(v.kI.nullValidator(t.formsValidationUtils.rebuildControl({c:u,serialized:s})))})}})}},{key:"makeMin",value:function(){var t=this;return new js({id:"min",title:"Min",errorMessage:"Field min [.min]",editor:$s,builder:function(o){var s=o.v,u=o.serialized;return(0,je.of)(function(c){return t.formsValidationUtils.resolveParams({v:s}).pipe((0,Ce.U)(function(l){return v.kI.min(+l.min)(t.formsValidationUtils.rebuildControl({c,serialized:u}))}))})}})}},{key:"makeMax",value:function(){var t=this;return new js({id:"max",title:"Max",errorMessage:"Field max [.max]",editor:$s,builder:function(o){var s=o.v,u=o.serialized;return(0,je.of)(function(c){return t.formsValidationUtils.resolveParams({v:s}).pipe((0,Ce.U)(function(l){return v.kI.max(+l.max)(t.formsValidationUtils.rebuildControl({c,serialized:u}))}))})}})}},{key:"makeMinLength",value:function(){var t=this;return new js({id:"min_length",title:"Min Length",errorMessage:"minimum of [.min] characters",editor:$s,builder:function(o){var s=o.v,u=o.serialized;return(0,je.of)(function(c){return t.formsValidationUtils.resolveParams({v:s}).pipe((0,Ce.U)(function(l){return v.kI.minLength(+l.minLength)(t.formsValidationUtils.rebuildControl({c,serialized:u}))}))})}})}},{key:"makeMaxLength",value:function(){var t=this;return new js({id:"max_length",title:"Max Length",errorMessage:"Maximum of [.max] characters",editor:$s,builder:function(o){var s=o.v,u=o.serialized;return(0,je.of)(function(c){return t.formsValidationUtils.resolveParams({v:s}).pipe((0,Ce.U)(function(l){return v.kI.maxLength(+l.maxLength)(t.formsValidationUtils.rebuildControl({c,serialized:u}))}))})}})}},{key:"makePattern",value:function(){var t=this;return new js({id:"pattern",title:"Pattern",errorMessage:"Must match pattern",editor:$s,builder:function(o){var s=o.v,u=o.serialized;return(0,je.of)(function(c){return t.formsValidationUtils.resolveParams({v:s}).pipe((0,Ce.U)(function(l){return v.kI.pattern(new RegExp(l.pattern))(t.formsValidationUtils.rebuildControl({c,serialized:u}))}))})}})}}]),a}(),vK=function(){var a=function(){function n(t,e){(0,p.Z)(this,n),this.paramEvaluatorService=t,this.attributesSerializerService=e}return(0,_.Z)(n,[{key:"resolveParams",value:function(e){var o=this,s=e.v;return(0,je.of)({}).pipe((0,Ce.U)(function(){return{paramNames:s.paramSettings.paramsString?s.paramSettings.paramsString.split("&").filter(function(u){return-1!==u.indexOf("=:")}).map(function(u){return u.split("=",2)[1].substr(1)}):[]}}),(0,st.w)(function(u){var c=u.paramNames;return o.paramEvaluatorService.paramValues(s.paramSettings.params.reduce(function(l,m,C){return new Map([].concat((0,y.Z)(l),[[c[C],m]]))},new Map)).pipe((0,Ce.U)(function(l){return Array.from(l).reduce(function(m,C){var T=(0,g.Z)(C,2),B=T[0],F=T[1];return(0,b.Z)((0,b.Z)({},m),{},(0,d.Z)({},B,F))},{})}))}))}},{key:"rebuildControl",value:function(e){var o=e.c;return e.serialized?new v.p4(this.attributesSerializerService.deserializeAsObject(o.value).value):o}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Ts),r.\u0275\u0275inject(Bt.AttributeSerializerService))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),Zo=function(){var a=function(n){(0,G.Z)(e,n);var t=(0,H.Z)(e);function e(o,s,u){var c;return(0,p.Z)(this,e),(c=t.call(this,s,u)).addDiscovery(new gK((0,gt.Z)(c),o)),c}return(0,_.Z)(e,[{key:"pluginDef",value:function(){return(0,je.of)(new Rn.PluginDef({name:"validation"}))}},{key:"discovery",value:function(){(0,Et.Z)((0,Ee.Z)(e.prototype),"discovery",this).call(this)}}]),e}(Rn.BasePluginManager);return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(vK),r.\u0275\u0275inject(Rn.PluginConfigurationManager),r.\u0275\u0275inject(Nn.ModuleLoaderService))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),_K=function(){var a=function(){function n(t,e,o){var s=this;(0,p.Z)(this,n),this.fb=t,this.vpm=e,this.componentFactoryResolver=o,this.contexts=[],this.settings$=new z.X(void 0),this.formGroup=this.fb.group({name:this.fb.control("",[v.kI.required]),validator:this.fb.control("",[v.kI.required]),overrideErrorMessage:this.fb.control(""),paramSettings:this.fb.control("")}),this.validationPlugins$=this.vpm.getPlugins(),this.componentRef$=new z.X(void 0),this.afterViewInit$=new se.x,this.onInit$=new se.x,this.validation$=new z.X(void 0),this.validatorChangeSub=this.formGroup.get("validator").valueChanges.pipe((0,ee.b)(function(u){console.log("validator change",u)})).subscribe(),this.validatorSub=(0,Sr.a)([this.formGroup.get("validator").valueChanges,this.afterViewInit$]).pipe((0,Ce.U)(function(u){return(0,g.Z)(u,1)[0]}),(0,st.w)(function(u){return u&&""!==u?s.vpm.getPlugin(u):(0,je.of)(void 0)}),(0,ee.b)(function(u){u&&s.renderValidation(u)})).subscribe(),this.validationSub=this.validation$.pipe((0,ee.b)(function(u){u?(s.formGroup.get("name").setValue(u.name),s.formGroup.get("validator").setValue(u.validator),s.formGroup.get("overrideErrorMessage").setValue(u.overrideErrorMessage),setTimeout(function(){return s.formGroup.get("paramSettings").setValue(u.paramSettings)})):(s.formGroup.get("name").setValue(""),s.formGroup.get("overrideErrorMessage").setValue(""),s.formGroup.get("validator").setValue(""))})).subscribe(),this.contextForwardingSub=this.componentRef$.pipe((0,Q.h)(function(u){return!!u})).subscribe(function(u){u.instance.contexts=s.contexts,u.instance.settings=s.validation$.value?s.validation$.value.paramSettings:void 0}),this.onTouched=function(){}}return(0,_.Z)(n,[{key:"validation",set:function(e){this.validation$.next(e)}},{key:"ngOnInit",value:function(){this.onInit$.next(void 0),this.onInit$.complete()}},{key:"ngAfterViewInit",value:function(){this.afterViewInit$.next(void 0),this.afterViewInit$.complete()}},{key:"writeValue",value:function(e){e&&this.formGroup.setValue((0,b.Z)((0,b.Z)({},e),{},{settings:e.settings?e.settings:""}),{emitEvent:!1})}},{key:"registerOnChange",value:function(e){this.formGroup.valueChanges.subscribe(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){e?this.formGroup.disable():this.formGroup.enable()}},{key:"validate",value:function(e){return this.formGroup.valid?null:{invalidForm:{valid:!1,message:"content is invalid"}}}},{key:"renderValidation",value:function(e){var o=this.componentFactoryResolver.resolveComponentFactory(e.editor),s=this.validationHost.viewContainerRef;s.clear(),this.componentRef$.next(s.createComponent(o))}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(v.QS),r.\u0275\u0275directiveInject(Zo),r.\u0275\u0275directiveInject(r.ComponentFactoryResolver))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["druid-ordain-validation-validator"]],viewQuery:function(t,e){var o;1&t&&r.\u0275\u0275viewQuery(nF,7),2&t&&r.\u0275\u0275queryRefresh(o=r.\u0275\u0275loadQuery())&&(e.validationHost=o.first)},inputs:{contexts:"contexts",validation:"validation"},features:[r.\u0275\u0275ProvidersFeature([{provide:v.JU,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0},{provide:v.Cf,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0}])],decls:19,vars:6,consts:[[3,"formGroup"],["matInput","","type","text","formControlName","name"],["required","","formControlName","validator"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","text","formControlName","overrideErrorMessage"],["druidValidationRendererHost",""],[3,"value"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"div",0)(1,"div")(2,"mat-form-field")(3,"mat-label"),r.\u0275\u0275text(4,"Name"),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(5,"input",1),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(6,"mat-form-field")(7,"mat-label"),r.\u0275\u0275text(8,"Validator"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(9,"mat-select",2),r.\u0275\u0275template(10,lK,2,2,"mat-option",3),r.\u0275\u0275pipe(11,"keyvalue"),r.\u0275\u0275pipe(12,"async"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(13,"mat-form-field")(14,"mat-label"),r.\u0275\u0275text(15,"Error Message"),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(16,"input",4),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementContainerStart(17),r.\u0275\u0275template(18,dK,0,0,"ng-template",5),r.\u0275\u0275elementContainerEnd(),r.\u0275\u0275elementEnd()),2&t&&(r.\u0275\u0275property("formGroup",e.formGroup),r.\u0275\u0275advance(10),r.\u0275\u0275property("ngForOf",r.\u0275\u0275pipeBind1(11,2,r.\u0275\u0275pipeBind1(12,4,e.validationPlugins$))))},dependencies:[E.NgForOf,v.Fj,v.JJ,v.JL,v.Q7,v.sg,v.u,bi.MatLegacyOption,En.MatLegacyFormField,En.MatLegacyLabel,Hr.MatLegacyInput,Fi.MatLegacySelect,nF,E.AsyncPipe,E.KeyValuePipe]}),a}(),yK=function(){var a=function(){function n(t){var e=this;(0,p.Z)(this,n),this.fb=t,this.formGroup=this.fb.group({validators:this.fb.array([])}),this.addValidator$=new se.x,this.deleteValidator$=new se.x,this.afterViewInit$=new se.x,this.validation$=new z.X(new wy({validators:[]})),this.addValidatorSub=this.addValidator$.pipe((0,ee.b)(function(){e.validators.push(e.fb.control(""))})).subscribe(),this.deleteValidatorSub=this.deleteValidator$.pipe((0,ee.b)(function(o){e.validation$.value.validators.splice(o,1),e.validators.removeAt(o)})).subscribe(),this.validationSub=(0,Sr.a)([this.validation$,this.afterViewInit$]).pipe((0,Ce.U)(function(o){return(0,g.Z)(o,1)[0]}),(0,Q.h)(function(o){return 0!==o.validators.length}),(0,ee.b)(function(o){e.validators.clear(),o.validators.forEach(function(s,u){e.validators.push(e.fb.control(""))})})).subscribe(),this.onTouched=function(){}}return(0,_.Z)(n,[{key:"validation",set:function(e){this.validation$.next(e)}},{key:"validators",get:function(){return this.formGroup.get("validators")}},{key:"ngAfterViewInit",value:function(){this.afterViewInit$.next(void 0),this.afterViewInit$.complete()}},{key:"writeValue",value:function(e){e&&this.formGroup.setValue(e,{emitEvent:!1})}},{key:"registerOnChange",value:function(e){this.formGroup.valueChanges.subscribe(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){e?this.formGroup.disable():this.formGroup.enable()}},{key:"validate",value:function(e){return this.formGroup.valid?null:{invalidForm:{valid:!1,message:"content is invalid"}}}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(v.QS))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["druid-ordain-validation-editor"]],inputs:{validation:"validation"},features:[r.\u0275\u0275ProvidersFeature([{provide:v.JU,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0},{provide:v.Cf,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0}])],decls:5,vars:2,consts:[[3,"formGroup"],["formArrayName","validators"],[4,"ngFor","ngForOf"],["type","button",3,"click"],[3,"formControlName","validation"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"div",0)(1,"div",1),r.\u0275\u0275template(2,fK,4,2,"div",2),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(3,"button",3),r.\u0275\u0275listener("click",function(){return e.addValidator$.next(void 0)}),r.\u0275\u0275text(4,"Add Validator"),r.\u0275\u0275elementEnd()),2&t&&(r.\u0275\u0275property("formGroup",e.formGroup),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngForOf",e.validators.controls))},dependencies:[E.NgForOf,v.JJ,v.JL,v.sg,v.u,v.CE,_K]}),a}(),xK=function(){var a=function(){function n(t,e){var o=this;(0,p.Z)(this,n),this.vpm=t,this.tokenizerService=e,this.validators$=new z.X([]),this.errors$=new z.X(null),this.message$=new z.X("Field is invalid"),this.resolvedContext$=new z.X(void 0),this.messageSub=(0,Sr.a)([this.validators$,this.errors$,this.resolvedContext$]).pipe((0,Q.h)(function(s){var l=(0,g.Z)(s,2)[1];return null!==l&&0!==Object.keys(l).length}),(0,Ce.U)(function(s){var u=(0,g.Z)(s,2),c=u[0],l=u[1],m=Object.keys(l),T=(0,g.Z)(m,1)[0],B=c.find(function(F){return F.validator===T});return{k:T,v:B,e:l[T]}}),(0,st.w)(function(s){var u=s.k,c=s.v,l=s.e;return o.vpm.getPlugin(c.validator).pipe((0,Ce.U)(function(m){return{k:u,v:c,p:m,e:l}}))}),(0,st.w)(function(s){var u=s.k,c=s.v,l=s.p;return o.resolveContexts({errors:s.e}).pipe((0,Ce.U)(function(C){return{k:u,v:c,p:l,t:C}}))}),(0,ee.b)(function(s){var l=s.v,m=o.replaceTokens({message:l.overrideErrorMessage&&""!==l.overrideErrorMessage?l.overrideErrorMessage:s.p.errorMessage,tokens:s.t});o.message$.next(m)})).subscribe()}return(0,_.Z)(n,[{key:"validators",set:function(e){this.validators$.next(e)}},{key:"errors",set:function(e){this.errors$.next(e)}},{key:"resolvedContext",set:function(e){this.resolvedContext$.next(e)}},{key:"replaceTokens",value:function(e){var o=e.message,s=e.tokens;return void 0!==s&&s.forEach(function(u,c){o=o.split("[".concat(c,"]")).join("".concat(u))}),o}},{key:"resolveContexts",value:function(e){var o=this,s=e.errors;return new W.y(function(u){var c=new Map(o.tokenizerService.generateGenericTokens(s,""));if(o.resolvedContext$.value)for(var l in o.resolvedContext$.value)c=new Map([].concat((0,y.Z)(c),(0,y.Z)(o.tokenizerService.generateGenericTokens(o.resolvedContext$.value[l],"_root"===l?"":l))));u.next(c),u.complete()})}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Zo),r.\u0275\u0275directiveInject(Pr))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["druid-ordain-default-validation-error"]],inputs:{validators:"validators",errors:"errors",resolvedContext:"resolvedContext"},decls:1,vars:1,template:function(t,e){1&t&&r.\u0275\u0275text(0),2&t&&r.\u0275\u0275textInterpolate(e.message$.value)}}),a}(),rF=function(){var a=(0,_.Z)(function n(){(0,p.Z)(this,n)});return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({imports:[E.CommonModule,v.u5,v.UX,Oi.MaterialModule,wu]}),a}(),bK=S(92081),CK=S(4856),lA=S(40810);function wK(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"mat-error"),r.\u0275\u0275element(1,"druid-ordain-default-validation-error",2),r.\u0275\u0275elementEnd()),2&a){var t=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("validators",null==t.formSettings$.value||null==t.formSettings$.value.validation?null:t.formSettings$.value.validation.validators)("errors",t.formControl.errors)("resolvedContext",t.resolvedContext$.value)}}function SK(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"mat-option",2),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&a){var t=n.$implicit;r.\u0275\u0275property("value",t.value),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(t.label)}}function EK(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div"),r.\u0275\u0275element(1,"classifieds-ui-render-pane",4),r.\u0275\u0275elementStart(2,"button",3),r.\u0275\u0275listener("click",function(){var l=r.\u0275\u0275restoreView(t).index,m=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(m.remove$.next(l))}),r.\u0275\u0275text(3,"Remove"),r.\u0275\u0275elementEnd()()}if(2&a){var e=n.$implicit,o=n.index,s=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("formControlName",o)("pluginName",e.contentPlugin)("settings",e.settings)("name",e.name)("label",e.label)("contexts",e.contexts)("panes",s.panes)("resolvedContext",e.resolvedContext)("indexPosition",o)("ancestory",s.ancestory)}}function PK(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"mat-option",9),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&a){var t=n.$implicit;r.\u0275\u0275property("value",t),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(t)}}function kK(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"mat-radio-button",2),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&a){var t=n.$implicit;r.\u0275\u0275property("value",t.value),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(t.label)}}function AK(a,n){if(1&a&&(r.\u0275\u0275elementStart(0,"mat-option",4),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&a){var t=n.$implicit;r.\u0275\u0275property("value",t),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(t.label)}}function RK(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"ngx-dropzone-image-preview",4),r.\u0275\u0275listener("removed",function(){r.\u0275\u0275restoreView(t);var s=r.\u0275\u0275nextContext().$implicit,u=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(u.onRemove(s))}),r.\u0275\u0275elementStart(1,"ngx-dropzone-label"),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd()()}if(2&a){var e=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275property("file",e)("removable",!0),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate2("",e.name," (",e.type,")")}}function DK(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"ngx-dropzone-video-preview",4),r.\u0275\u0275listener("removed",function(){r.\u0275\u0275restoreView(t);var s=r.\u0275\u0275nextContext().$implicit,u=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(u.onRemove(s))}),r.\u0275\u0275elementStart(1,"ngx-dropzone-label"),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd()()}if(2&a){var e=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275property("file",e)("removable",!0),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate2("",e.name," (",e.type,")")}}function TK(a,n){if(1&a){var t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"ngx-dropzone-preview",5),r.\u0275\u0275listener("removed",function(){r.\u0275\u0275restoreView(t);var s=r.\u0275\u0275nextContext().$implicit,u=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(u.onRemove(s))}),r.\u0275\u0275elementStart(1,"ngx-dropzone-label"),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd()()}if(2&a){var e=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275property("removable",!0),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate2("",e.name," (",e.type,")")}}function IK(a,n){if(1&a&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,RK,3,4,"ngx-dropzone-image-preview",2),r.\u0275\u0275template(2,DK,3,4,"ngx-dropzone-video-preview",2),r.\u0275\u0275template(3,TK,3,3,"ngx-dropzone-preview",3),r.\u0275\u0275elementContainerEnd()),2&a){var t=n.$implicit,e=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.isType(t,"image")),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.isType(t,"video")),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!e.isType(t,"image")&&!e.isType(t,"video"))}}var dA=(0,_.Z)(function a(n){(0,p.Z)(this,a),n&&(this.value=n.value?n.value:"",n.datasourceBinding&&"object"==typeof n.datasourceBinding&&(this.datasourceBinding=new fn.ContentBinding(n.datasourceBinding)),n.datasourceOptions&&"object"==typeof n.datasourceOptions&&(this.datasourceOptions=new tO(n.datasourceOptions)),n.validation&&(this.validation=new wy(n.validation)))}),OK=(0,_.Z)(function a(n){(0,p.Z)(this,a),n&&(this.valuesMapping=n.valuesMapping)}),pa=function(){var a=function(){function n(t,e,o,s){(0,p.Z)(this,n),this.tokenizerService=t,this.datasourceContentHandler=e,this.panelResolver=o,this.attributeSerializer=s}return(0,_.Z)(n,[{key:"resolveElementOptions",value:function(e,o){var s=this;return(0,je.of)(e).pipe((0,st.w)(function(u){if(u.datasourceBinding&&u.datasourceBinding.id&&""!==u.datasourceBinding.id){var c=o.has("panes")?o.get("panes").find(function(l){return l.name===u.datasourceBinding.id}):void 0;return s.panelResolver.dataPanes(o.get("panes")).pipe((0,st.w)(function(l){return c?s.datasourceContentHandler.fetchDynamicData(c.settings,new Map([].concat((0,y.Z)(o),[["dataPanes",l]]))):(0,je.of)([])}),(0,Ce.U)(function(l){return[u,l.results]}))}return(0,je.of)([u,[]])}),(0,Ce.U)(function(u){var c=(0,g.Z)(u,2),l=c[0],m=c[1];return[l,l.datasourceOptions&&""!==l.datasourceOptions.query?(0,Ms.JSONPath)({path:l.datasourceOptions.query,json:m}):m]}),(0,st.w)(function(u){var c=(0,g.Z)(u,2);return s.mapDataOptions(c[0],c[1])}))}},{key:"mapDataOptions",value:function(e,o){var s=this;return(0,je.of)([e,o]).pipe((0,Ce.U)(function(u){var c=(0,g.Z)(u,2),m=c[1];return[c[0],m,m?m.map(function(C){return s.tokenizerService.generateGenericTokens(C)}):[]]}),(0,Ce.U)(function(u){var c=(0,g.Z)(u,3),l=c[0];return c[2].map(function(T){return s.mapDataItem(l,T)})}))}},{key:"mapDataItem",value:function(e,o){return new iO({value:this.tokenizerService.replaceTokens("".concat(e.datasourceOptions.valueMapping),o),label:this.tokenizerService.replaceTokens("".concat(e.datasourceOptions.labelMapping),o),dataItem:void 0})}},{key:"hasDataOptions",value:function(e){return e.datasourceBinding&&e.datasourceBinding.id&&""!==e.datasourceBinding.id}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Pr),r.\u0275\u0275inject(kk),r.\u0275\u0275inject(Tk),r.\u0275\u0275inject(Bt.AttributeSerializerService))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),ha=function(){var a=function(){function n(t){var e=this;(0,p.Z)(this,n),this.tokenizerService=t,this.cachedResolvedContexts=[],this.scheduleResolution$=new se.x,this.scheduleResolutionSub=this.scheduleResolution$.pipe((0,ee.b)(function(o){var s=o.resolvedContext,u=o.index,c=new Map;if(s)for(var l in s)s[l]instanceof ku||(c=new Map([].concat((0,y.Z)(c),(0,y.Z)(e.tokenizerService.generateGenericTokens(s[l],"_root"===l?"":l)))));e.cachedResolvedContexts[u].resolution$.next(c)})).subscribe()}return(0,_.Z)(n,[{key:"resolveContexts",value:function(e){var o=e.resolvedContext,s=this.cachedResolvedContexts.findIndex(function(u){return 0===(0,xk.getDiff)(u.rContext,o).length});return-1===s?(console.log("resolved context no cache",o),s=this.cachedResolvedContexts.length,this.cachedResolvedContexts.push({rContext:o,resolution$:new pk.t}),this.scheduleResolution$.next({resolvedContext:o,index:s})):console.log("resolved context cache hit",o),this.cachedResolvedContexts[s].resolution$.pipe((0,kn.q)(1))}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Pr))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),Ra=function(){var a=function(){function n(t,e,o,s,u,c){var l=this;(0,p.Z)(this,n),this.attributeSerializer=t,this.optionsResolver=e,this.tokenizerService=o,this.formsContextHelper=s,this.vpm=u,this.controlContainer=c,this.formControl=new v.p4(""),this.formControlValueChangesSub=this.formControl.valueChanges.pipe((0,ee.b)(function(m){return console.log("serialized form value",l.attributeSerializer.serialize(m,"value"))}),(0,ee.b)(function(m){return l.controlContainer.control.get("settings").setValue([l.attributeSerializer.serialize(m,"value")])})).subscribe(),this.formSettings$=new z.X(void 0),this.settings$=new z.X([]),this.options$=new z.X([]),this.init$=new se.x,this.afterViewInit$=new se.x,this.panes$=new z.X([]),this.originPanes$=new z.X([]),this.contexts$=new z.X([]),this.resolvedContext$=new z.X(void 0),this.value$=new se.x,this.settingsSub=this.settings$.pipe((0,Ce.U)(function(m){return m?l.settingsToObject(l.attributeSerializer.deserializeAsObject(m)):void 0}),(0,ee.b)(function(m){return l.formSettings$.next(m)})).subscribe(),this.loadOptionsSub=(0,Sr.a)([this.formSettings$,this.panes$,this.originPanes$,this.contexts$,this.init$]).pipe((0,Ce.U)(function(m){var C=(0,g.Z)(m,4),B=C[1],F=C[2],U=C[3];return{settings:C[0],metadata:new Map([["panes",[].concat((0,y.Z)(B&&Array.isArray(B)?B:[]),(0,y.Z)(F&&Array.isArray(F)?F:[]))],["contexts",U]])}}),(0,st.w)(function(m){return l.optionsResolver.resolveElementOptions(m.settings,m.metadata)}),(0,ee.b)(function(m){return l.options$.next(m)})).subscribe(),this.renderContentSub=(0,Sr.a)([this.formSettings$,this.resolvedContext$,this.afterViewInit$]).pipe((0,Ce.U)(function(m){var C=(0,g.Z)(m,2);return{settings:C[0],resolvedContext:C[1]}}),(0,st.w)(function(m){var C=m.settings;return l.formsContextHelper.resolveContexts({resolvedContext:m.resolvedContext}).pipe((0,Ce.U)(function(B){return{settings:C,tokens:B}}))}),(0,st.w)(function(m){var C=m.settings,T=m.tokens;return(0,Un.D)(C.validation&&C.validation.validators?C.validation.validators.map(function(B){return l.vpm.getPlugin(B.validator).pipe((0,st.w)(function(F){return F.builder({v:B,serialized:!1}).pipe((0,Ce.U)(function(U){return{v:B,vf:U}}))}))}):[]).pipe((0,Ce.U)(function(B){return{settings:C,tokens:T,validators:B}}),(0,hi.d)({settings:C,tokens:T,validators:[]}))}),(0,st.w)(function(m){var C=m.settings,T=m.tokens,B=m.validators;return(0,Un.D)(C.validation&&C.validation.validators?C.validation.validators.map(function(F){return l.vpm.getPlugin(F.validator).pipe((0,st.w)(function(U){return U.builder({v:F,serialized:!0}).pipe((0,Ce.U)(function(ae){return{v:F,vf:ae}}))}))}):[]).pipe((0,Ce.U)(function(F){return{settings:C,tokens:T,validators:B,validatorsSerialized:F}}),(0,hi.d)({settings:C,tokens:T,validators:B,validatorsSerialized:[]}))}),(0,ee.b)(function(m){var C=m.settings,T=m.tokens,F=m.validatorsSerialized;if(l.formControl.setAsyncValidators(m.validators.map(function(Ot){return Ot.vf})),l.controlContainer.control.get("settings").setAsyncValidators(F.map(function(Ot){return Ot.vf})),l.formControl.updateValueAndValidity(),l.controlContainer.control.updateValueAndValidity(),void 0!==T&&(l.tokens=T),C.value&&null!==C.value&&""!==C.value){(-1!==C.value.indexOf(".$i.")||-1!==C.value.indexOf(".$j.")||-1!==C.value.indexOf(".$k."))&&console.log(C.value,l.ancestory);var U=C.value.split("$i"),ae=U.map(function(Ot,ft){return l.ancestory[1*ft+(3+(0===ft?0:3))]}),ue=U.reduce(function(Ot,ft,jt){return[].concat((0,y.Z)(Ot),[0===jt?"":jt-1<ae.length?"".concat(ae[jt-1]):"",ft])},[]).join("");console.log("path",ue);var me=l.replaceTokens(ue);l.formControl.setValue(me);var Se=l.tokenizerService.discoverTokens(me,!0);if(0!==Se.length)if(Se[0].trim().lastIndexOf(".id")===Se[0].trim().length-3){var we=fr();l.formControl.setValue(we),l.value$.next(we)}else{var qe=Array.from(T).filter(function(Ot){return 0===(0,g.Z)(Ot,1)[0].indexOf(ue.substr(1,ue.length-2))});if(0!==qe.length){var at=qe.reduce(function(Ot,ft){var jt=(0,g.Z)(ft,2),Ut=jt[0],tn=jt[1];return(0,b.Z)((0,b.Z)({},Ot),{},(0,d.Z)({},Ut.substr(Ut.lastIndexOf(".")+1),tn))},{});l.formControl.setValue(at),l.value$.next(at)}else{var dt=l.tokenizerService.replaceTokens(C.value,new Map(Array.from(Se).map(function(Ot){return[Ot,""]})));l.formControl.setValue(dt),l.value$.next(dt)}}else l.value$.next(me)}else l.formControl.setValue("")}),(0,kn.q)(1)).subscribe()}return(0,_.Z)(n,[{key:"settings",set:function(e){this.settings$.next(e)}},{key:"panes",set:function(e){this.panes$.next(e)}},{key:"originPanes",set:function(e){this.originPanes$.next(e)}},{key:"contexts",set:function(e){this.contexts$.next(e)}},{key:"resolvedContext",set:function(e){this.resolvedContext$.next(e)}},{key:"ngOnInit",value:function(){this.init$.next(void 0)}},{key:"ngAfterViewInit",value:function(){this.afterViewInit$.next(void 0)}},{key:"settingsToObject",value:function(e){return new dA(e)}},{key:"replaceTokens",value:function(e){return void 0!==this.tokens&&this.tokens.forEach(function(o,s){e=e.split("[".concat(s,"]")).join("".concat(o))}),e}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Bt.AttributeSerializerService),r.\u0275\u0275directiveInject(pa),r.\u0275\u0275directiveInject(Pr),r.\u0275\u0275directiveInject(ha),r.\u0275\u0275directiveInject(Zo),r.\u0275\u0275directiveInject(v.gN))},a.\u0275dir=r.\u0275\u0275defineDirective({type:a,selectors:[["","druid-forms-form-element-base",""]],inputs:{tokens:"tokens",settings:"settings",panes:"panes",originPanes:"originPanes",contexts:"contexts",resolvedContext:"resolvedContext",ancestory:"ancestory"}}),a}(),FK=function(){var a=function(n){(0,G.Z)(e,n);var t=(0,H.Z)(e);function e(o,s,u,c,l,m){return(0,p.Z)(this,e),t.call(this,o,s,u,c,l,m)}return(0,_.Z)(e)}(Ra);return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Bt.AttributeSerializerService),r.\u0275\u0275directiveInject(pa),r.\u0275\u0275directiveInject(Pr),r.\u0275\u0275directiveInject(ha),r.\u0275\u0275directiveInject(Zo),r.\u0275\u0275directiveInject(v.gN))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["druid-forms-form-input"]],features:[r.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[["matInput","",3,"formControl"],[4,"ngIf"],[3,"validators","errors","resolvedContext"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"mat-form-field"),r.\u0275\u0275element(1,"input",0),r.\u0275\u0275template(2,wK,2,3,"mat-error",1),r.\u0275\u0275elementEnd()),2&t&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("formControl",e.formControl),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.formControl.invalid))},dependencies:[E.NgIf,v.Fj,v.JJ,v.oH,En.MatLegacyError,En.MatLegacyFormField,Hr.MatLegacyInput,xK]}),a}(),MK=function(){var a=function(n){(0,G.Z)(e,n);var t=(0,H.Z)(e);function e(o,s,u,c,l,m){return(0,p.Z)(this,e),t.call(this,o,s,u,c,l,m)}return(0,_.Z)(e)}(Ra);return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Bt.AttributeSerializerService),r.\u0275\u0275directiveInject(pa),r.\u0275\u0275directiveInject(Pr),r.\u0275\u0275directiveInject(ha),r.\u0275\u0275directiveInject(Zo),r.\u0275\u0275directiveInject(v.gN))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["druid-forms-form-select"]],features:[r.\u0275\u0275InheritDefinitionFeature],decls:4,vars:4,consts:[[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"mat-form-field")(1,"mat-select",0),r.\u0275\u0275template(2,SK,2,2,"mat-option",1),r.\u0275\u0275pipe(3,"async"),r.\u0275\u0275elementEnd()()),2&t&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("formControl",e.formControl),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",r.\u0275\u0275pipeBind1(3,2,e.options$)))},dependencies:[E.NgForOf,v.JJ,v.oH,bi.MatLegacyOption,En.MatLegacyFormField,Fi.MatLegacySelect,E.AsyncPipe]}),a}(),BK=function(){var a=function(){function n(t,e,o){var s=this;(0,p.Z)(this,n),this.attributeSerializer=t,this.fb=e,this.controlContainer=o,this.panes=[],this.originMappings=[],this.ancestory=[],this.add$=new se.x,this.remove$=new se.x,this.panes$=new z.X([]),this.settings$=new se.x,this.resolvedContext$=new se.x,this.panel$=new se.x,this.afterViewInit$=new se.x,this.addSub=this.add$.pipe((0,Ce.U)(function(){return new Wr(s.panes[0])}),(0,ee.b)(function(){return s.panesFormArray.push(s.fb.control(""))}),(0,ee.b)(function(u){return s.panes.push(u)})).subscribe(),this.removeSub=this.remove$.pipe((0,ee.b)(function(u){return s.panesFormArray.removeAt(u)}),(0,ee.b)(function(u){return s.panes.splice(u,1)})).subscribe(),this.populateDefaultValues=(0,Sr.a)([this.settings$.pipe((0,Ce.U)(function(u){return u?new OK(s.attributeSerializer.deserializeAsObject(u)):void 0})),this.resolvedContext$,this.panel$,this.afterViewInit$]).pipe((0,Ce.U)(function(u){var c=(0,g.Z)(u,3);return{s:c[0],rc:c[1],p:c[2]}}),(0,ee.b)(function(u){return console.log(u.s.valuesMapping,s.ancestory)}),(0,Ce.U)(function(u){var c=u.s,l=u.rc,m=u.p;if(l&&c&&c.valuesMapping&&""!==c.valuesMapping.trim()){var C=c.valuesMapping.split("[$i]"),T=C.map(function(U,ae){return s.ancestory[1*ae+3]}),B=C.reduce(function(U,ae,ue){return[].concat((0,y.Z)(U),[0===ue?"":ue-1<T.length?"[".concat(T[ue-1],"]"):"",ae])},[]).join("");return console.log("path",B),{items:(0,Ms.JSONPath)({path:"$.".concat(B,".*"),json:l}),s:c,p:m}}return{items:[],p:m}}),(0,ee.b)(function(u){for(var l=u.items.length-s.panesFormArray.length,m=0;m<l;m++)s.add$.next(void 0)})).subscribe()}return(0,_.Z)(n,[{key:"settings",set:function(e){this.settings$.next(e)}},{key:"resolvedContext",set:function(e){this.resolvedContext$.next(e)}},{key:"panel",set:function(e){this.panel$.next(e)}},{key:"panesFormArray",get:function(){return this.controlContainer.control.get("panes")}},{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){this.afterViewInit$.next(void 0)}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Bt.AttributeSerializerService),r.\u0275\u0275directiveInject(v.QS),r.\u0275\u0275directiveInject(v.gN))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-form-section"]],inputs:{panes:"panes",originPanes:"originPanes",originMappings:"originMappings",ancestory:"ancestory",settings:"settings",resolvedContext:"resolvedContext",panel:"panel"},decls:5,vars:2,consts:[[3,"formGroup"],["formArrayName","panes"],[4,"ngFor","ngForOf"],["type","button",3,"click"],[3,"formControlName","pluginName","settings","name","label","contexts","panes","resolvedContext","indexPosition","ancestory"]],template:function(t,e){1&t&&(r.\u0275\u0275elementContainerStart(0,0)(1,1),r.\u0275\u0275template(2,EK,4,10,"div",2),r.\u0275\u0275elementContainerEnd()(),r.\u0275\u0275elementStart(3,"button",3),r.\u0275\u0275listener("click",function(){return e.add$.next(void 0)}),r.\u0275\u0275text(4,"Add Item"),r.\u0275\u0275elementEnd()),2&t&&(r.\u0275\u0275property("formGroup",e.controlContainer.control),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngForOf",e.panes))},dependencies:[E.NgForOf,v.JJ,v.JL,v.sg,v.u,v.CE,xy]}),a}(),NK=function(){var a=function(n){(0,G.Z)(e,n);var t=(0,H.Z)(e);function e(o,s,u,c,l,m){var C;return(0,p.Z)(this,e),(C=t.call(this,o,s,u,c,l,m)).cols=20,C.rows=20,C}return(0,_.Z)(e)}(Ra);return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Bt.AttributeSerializerService),r.\u0275\u0275directiveInject(pa),r.\u0275\u0275directiveInject(Pr),r.\u0275\u0275directiveInject(ha),r.\u0275\u0275directiveInject(Zo),r.\u0275\u0275directiveInject(v.gN))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["druid-forms-form-textarea"]],features:[r.\u0275\u0275InheritDefinitionFeature],decls:1,vars:3,consts:[[3,"formControl","cols","rows"]],template:function(t,e){1&t&&r.\u0275\u0275element(0,"textarea",0),2&t&&r.\u0275\u0275property("formControl",e.formControl)("cols",e.cols)("rows",e.rows)},dependencies:[v.Fj,v.JJ,v.oH]}),a}(),ZK=function(){var a=function(){function n(t){(0,p.Z)(this,n),this.attributeSerializer=t}return(0,_.Z)(n,[{key:"handleFile",value:function(e){return(0,je.of)([])}},{key:"handlesType",value:function(e){return!1}},{key:"implementsRendererOverride",value:function(){return!1}},{key:"hasRendererOverride",value:function(e){return(0,je.of)(!1)}},{key:"isDynamic",value:function(e){return!1}},{key:"isData",value:function(e){return!1}},{key:"getBindings",value:function(e,o,s){return"pane"===o?this.toObject(e).pipe((0,st.w)(function(u){return Or(function(){return u.datasourceBinding&&u.datasourceBinding.id&&null!==u.datasourceBinding.id},(0,je.of)([u.datasourceBinding]),(0,je.of)([]))})):(0,je.of)([])}},{key:"fetchDynamicData",value:function(e,o){return(0,je.of)(new pr)}},{key:"buildDynamicItems",value:function(e,o){return(0,je.of)([])}},{key:"toObject",value:function(e){return(0,je.of)(new dA(this.attributeSerializer.deserializeAsObject(e)))}},{key:"buildSettings",value:function(e){return this.attributeSerializer.serialize(e,"root").attributes}},{key:"stateDefinition",value:function(e){return(0,je.of)({autocomplete:{input:""},value:void 0})}},{key:"editorOptions",value:function(e){return(0,je.of)(new fn.ContentPluginEditorOptions)}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Bt.AttributeSerializerService))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),iF=function(){var a=function(n){(0,G.Z)(e,n);var t=(0,H.Z)(e);function e(){return(0,p.Z)(this,e),t.apply(this,arguments)}return(0,_.Z)(e)}(ZK);return a.\u0275fac=function(){var n;return function(e){return(n||(n=r.\u0275\u0275getInheritedFactory(a)))(e||a)}}(),a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),Da=function(){var a=function(){function n(t,e,o,s,u){(0,p.Z)(this,n),this.data=t,this.dialogRef=e,this.fb=o,this.handler=s,this.attributeSerializer=u,this.datasourceOptions=dk,this.validation=new wy({validators:[]}),this.bindableOptions=[],this.formGroup=this.fb.group({value:this.fb.control(""),datasourceOptions:this.fb.control(""),validation:this.fb.control(""),datasourceBinding:this.fb.group({id:this.fb.control(""),type:this.fb.control("pane")})}),this.paneIndex=t.paneIndex,this.pane=t.pane}return(0,_.Z)(n,[{key:"paneGroup",get:function(){return this.data.panelFormGroup.get("panes").at(this.paneIndex)}},{key:"ngOnInit",value:function(){var e=this;this.data.pane?this.handler.toObject(this.data.pane.settings).subscribe(function(o){e.formGroup.get("value").setValue(o.value),e.datasourceOptions=o.datasourceOptions?o.datasourceOptions:dk,e.validation=new wy(o.validation?o.validation:{validators:[]}),e.formGroup.get("datasourceBinding").get("id").setValue(o.datasourceBinding&&o.datasourceBinding.id&&null!==o.datasourceBinding.id?o.datasourceBinding.id:"")}):(this.data.panelFormGroup.get("panes").push(this.fb.group({contentPlugin:this.data.plugin.id,name:new v.p4(""),label:new v.p4(""),rule:new v.p4(""),settings:this.fb.array([])})),this.paneIndex=this.data.panelFormGroup.get("panes").length-1,this.pane=new Wr(this.data.panelFormGroup.get("panes").at(this.paneIndex).value)),this.bindableOptions=this.data.panelFormGroup.get("panes").controls.reduce(function(o,s){return s.get("name").value?[].concat((0,y.Z)(o),[s.get("name").value]):(0,y.Z)(o)},[])}},{key:"submit",value:function(){var e=this;console.log(this.formGroup.value);var o=new dA(this.formGroup.value);console.log(o),this.paneGroup.get("settings").clear(),this.handler.buildSettings(o).map(function(u){return e.attributeSerializer.convertToGroup(u)}).forEach(function(u){return e.paneGroup.get("settings").push(u)}),this.dialogRef.close()}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Jt.MAT_LEGACY_DIALOG_DATA),r.\u0275\u0275directiveInject(Jt.MatLegacyDialogRef),r.\u0275\u0275directiveInject(v.QS),r.\u0275\u0275directiveInject(iF),r.\u0275\u0275directiveInject(Bt.AttributeSerializerService))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["druid-forms-form-element-editor"]],inputs:{bindableOptions:"bindableOptions"},decls:17,vars:4,consts:[[3,"formGroup","ngSubmit"],["fxLayout","column"],["matInput","","formControlName","value"],["formGroupName","datasourceBinding"],["required","","formControlName","id"],[3,"value",4,"ngFor","ngForOf"],["formControlName","datasourceOptions",3,"datasourceOptions"],["formControlName","validation",3,"validation"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close",""],[3,"value"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"form",0),r.\u0275\u0275listener("ngSubmit",function(){return e.submit()}),r.\u0275\u0275elementStart(1,"mat-dialog-content",1)(2,"div")(3,"mat-form-field")(4,"mat-label"),r.\u0275\u0275text(5,"Value"),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(6,"input",2),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(7,"mat-form-field",3)(8,"mat-label"),r.\u0275\u0275text(9,"Datasource"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(10,"mat-select",4),r.\u0275\u0275template(11,PK,2,2,"mat-option",5),r.\u0275\u0275elementEnd()(),r.\u0275\u0275element(12,"classifieds-ui-datasource-options",6)(13,"druid-ordain-validation-editor",7),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(14,"mat-dialog-actions")(15,"button",8),r.\u0275\u0275text(16,"Save"),r.\u0275\u0275elementEnd()()()),2&t&&(r.\u0275\u0275property("formGroup",e.formGroup),r.\u0275\u0275advance(11),r.\u0275\u0275property("ngForOf",e.bindableOptions),r.\u0275\u0275advance(1),r.\u0275\u0275property("datasourceOptions",e.datasourceOptions),r.\u0275\u0275advance(1),r.\u0275\u0275property("validation",e.validation))},dependencies:[E.NgForOf,v._Y,v.Fj,v.JJ,v.JL,v.Q7,v.sg,v.u,v.x0,bi.MatLegacyOption,pi.MatLegacyButton,Jt.MatLegacyDialogClose,Jt.MatLegacyDialogContent,Jt.MatLegacyDialogActions,En.MatLegacyFormField,En.MatLegacyLabel,Hr.MatLegacyInput,Fi.MatLegacySelect,X8,yK]}),a}(),LK=function(){var a=function(n){(0,G.Z)(e,n);var t=(0,H.Z)(e);function e(o,s,u,c,l,m){return(0,p.Z)(this,e),t.call(this,o,s,u,c,l,m)}return(0,_.Z)(e)}(Ra);return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Bt.AttributeSerializerService),r.\u0275\u0275directiveInject(pa),r.\u0275\u0275directiveInject(Pr),r.\u0275\u0275directiveInject(ha),r.\u0275\u0275directiveInject(Zo),r.\u0275\u0275directiveInject(v.gN))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["druid-forms-form-radiogroup"]],features:[r.\u0275\u0275InheritDefinitionFeature],decls:3,vars:4,consts:[[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"mat-radio-group",0),r.\u0275\u0275template(1,kK,2,2,"mat-radio-button",1),r.\u0275\u0275pipe(2,"async"),r.\u0275\u0275elementEnd()),2&t&&(r.\u0275\u0275property("formControl",e.formControl),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",r.\u0275\u0275pipeBind1(2,2,e.options$)))},dependencies:[E.NgForOf,v.JJ,v.oH,IE.MatLegacyRadioGroup,IE.MatLegacyRadioButton,E.AsyncPipe]}),a}(),jK=function(){var a=function(n){(0,G.Z)(e,n);var t=(0,H.Z)(e);function e(o,s,u,c,l,m){return(0,p.Z)(this,e),t.call(this,o,s,u,c,l,m)}return(0,_.Z)(e)}(Ra);return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Bt.AttributeSerializerService),r.\u0275\u0275directiveInject(pa),r.\u0275\u0275directiveInject(Pr),r.\u0275\u0275directiveInject(ha),r.\u0275\u0275directiveInject(Zo),r.\u0275\u0275directiveInject(v.gN))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["druid-forms-form-slider"]],features:[r.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[3,"formControl"]],template:function(t,e){1&t&&r.\u0275\u0275element(0,"mat-slider",0),2&t&&r.\u0275\u0275property("formControl",e.formControl)},dependencies:[v.JJ,v.oH,bK.MatLegacySlider]}),a}(),$K=function(){var a=function(n){(0,G.Z)(e,n);var t=(0,H.Z)(e);function e(o,s,u,c,l,m){return(0,p.Z)(this,e),t.call(this,o,s,u,c,l,m)}return(0,_.Z)(e)}(Ra);return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Bt.AttributeSerializerService),r.\u0275\u0275directiveInject(pa),r.\u0275\u0275directiveInject(Pr),r.\u0275\u0275directiveInject(ha),r.\u0275\u0275directiveInject(Zo),r.\u0275\u0275directiveInject(v.gN))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["druid-forms-form-toggle"]],features:[r.\u0275\u0275InheritDefinitionFeature],decls:2,vars:1,consts:[[3,"formControl"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"mat-slide-toggle",0),r.\u0275\u0275text(1,"Toggle Label"),r.\u0275\u0275elementEnd()),2&t&&r.\u0275\u0275property("formControl",e.formControl)},dependencies:[v.JJ,v.oH,CK.MatLegacySlideToggle]}),a}(),UK=function(){var a=function(n){(0,G.Z)(e,n);var t=(0,H.Z)(e);function e(o,s,u,c,l,m){return(0,p.Z)(this,e),t.call(this,o,s,u,c,l,m)}return(0,_.Z)(e)}(Ra);return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Bt.AttributeSerializerService),r.\u0275\u0275directiveInject(pa),r.\u0275\u0275directiveInject(Pr),r.\u0275\u0275directiveInject(ha),r.\u0275\u0275directiveInject(Zo),r.\u0275\u0275directiveInject(v.gN))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["druid-forms-form-checkbox"]],features:[r.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[3,"formControl"]],template:function(t,e){1&t&&r.\u0275\u0275element(0,"mat-checkbox",0),2&t&&r.\u0275\u0275property("formControl",e.formControl)},dependencies:[v.JJ,v.oH,Y_.MatLegacyCheckbox]}),a}(),zK=function(){var a=function(n){(0,G.Z)(e,n);var t=(0,H.Z)(e);function e(o,s,u,c,l,m){return(0,p.Z)(this,e),t.call(this,o,s,u,c,l,m)}return(0,_.Z)(e)}(Ra);return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Bt.AttributeSerializerService),r.\u0275\u0275directiveInject(pa),r.\u0275\u0275directiveInject(Pr),r.\u0275\u0275directiveInject(ha),r.\u0275\u0275directiveInject(Zo),r.\u0275\u0275directiveInject(v.gN))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["druid-forms-form-datepicker"]],features:[r.\u0275\u0275InheritDefinitionFeature],decls:7,vars:3,consts:[["appearance","fill"],["matInput","",3,"matDatepicker","formControl"],["matSuffix","",3,"for"],["picker",""]],template:function(t,e){if(1&t&&(r.\u0275\u0275elementStart(0,"mat-form-field",0)(1,"mat-label"),r.\u0275\u0275text(2,"Choose a date"),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(3,"input",1)(4,"mat-datepicker-toggle",2)(5,"mat-datepicker",null,3),r.\u0275\u0275elementEnd()),2&t){var o=r.\u0275\u0275reference(6);r.\u0275\u0275advance(3),r.\u0275\u0275property("matDatepicker",o)("formControl",e.formControl),r.\u0275\u0275advance(1),r.\u0275\u0275property("for",o)}},dependencies:[v.Fj,v.JJ,v.oH,lA.MatDatepicker,lA.MatDatepickerInput,lA.MatDatepickerToggle,En.MatLegacyFormField,En.MatLegacyLabel,En.MatLegacySuffix,Hr.MatLegacyInput]}),a}(),GK=function(){var a=function(n){(0,G.Z)(e,n);var t=(0,H.Z)(e);function e(o,s,u,c,l,m){var C;return(0,p.Z)(this,e),(C=t.call(this,o,s,u,c,l,m)).proxyControl=new v.p4(""),C.optionSelected$=new se.x,C.proxyControlValueChangesSub=C.proxyControl.valueChanges.pipe((0,kr.b)(1e3),(0,xu.x)(),(0,ko.M)((0,Sr.a)([C.formSettings$,C.panes$,C.originPanes$,C.contexts$]).pipe((0,Ce.U)(function(T){var B=(0,g.Z)(T,4);return{settings:B[0],panes:B[1],originPanes:B[2],contexts:B[3]}}))),(0,Ce.U)(function(T){var B=(0,g.Z)(T,2),F=B[0],U=B[1],ue=U.panes,me=U.originPanes,Se=U.contexts;return{term:F,settings:U.settings,metadata:new Map([["panes",[].concat((0,y.Z)(ue&&Array.isArray(ue)?ue:[]),(0,y.Z)(me&&Array.isArray(me)?me:[]))],["contexts",Se],["inputparams",new Map([["term",new Mi({flags:[],mapping:new GI({value:F,testValue:F,type:"static",context:void 0})})]])]])}}),(0,st.w)(function(T){return C.optionsResolver.resolveElementOptions(T.settings,T.metadata)}),(0,ee.b)(function(T){return C.options$.next(T)})).subscribe(),C.optionSelectedSub=C.optionSelected$.pipe((0,ee.b)(function(T){return C.formControl.setValue(T.option&&T.option.value?T.option.value.value:"")})).subscribe(),C.displayAuto=function(T){return T.label},C}return(0,_.Z)(e)}(Ra);return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Bt.AttributeSerializerService),r.\u0275\u0275directiveInject(pa),r.\u0275\u0275directiveInject(Pr),r.\u0275\u0275directiveInject(ha),r.\u0275\u0275directiveInject(Zo),r.\u0275\u0275directiveInject(v.gN))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["druid-forms-form-autocomplete"]],features:[r.\u0275\u0275InheritDefinitionFeature],decls:8,vars:6,consts:[["matInput","",3,"matAutocomplete","formControl"],[3,"displayWith","optionSelected"],["autocomplete","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){if(1&t&&(r.\u0275\u0275elementStart(0,"mat-form-field")(1,"mat-label"),r.\u0275\u0275text(2,"Autocomplete"),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(3,"input",0),r.\u0275\u0275elementStart(4,"mat-autocomplete",1,2),r.\u0275\u0275listener("optionSelected",function(u){return e.optionSelected$.next(u)}),r.\u0275\u0275template(6,AK,2,2,"mat-option",3),r.\u0275\u0275pipe(7,"async"),r.\u0275\u0275elementEnd()()),2&t){var o=r.\u0275\u0275reference(5);r.\u0275\u0275advance(3),r.\u0275\u0275property("matAutocomplete",o)("formControl",e.proxyControl),r.\u0275\u0275advance(1),r.\u0275\u0275property("displayWith",e.displayAuto),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngForOf",r.\u0275\u0275pipeBind1(7,4,e.options$))}},dependencies:[E.NgForOf,v.Fj,v.JJ,v.oH,TE.MatLegacyAutocomplete,TE.MatLegacyAutocompleteTrigger,bi.MatLegacyOption,En.MatLegacyFormField,En.MatLegacyLabel,Hr.MatLegacyInput,E.AsyncPipe]}),a}(),VK=function(){var a=function(n){(0,G.Z)(e,n);var t=(0,H.Z)(e);function e(o,s,u,c,l,m,C){var T;return(0,p.Z)(this,e),(T=t.call(this,o,s,c,l,m,C)).files=[],T.select$=new se.x,T.selectSub=T.select$.pipe((0,ee.b)(function(B){return console.log(B)}),(0,Za.z)(function(B){return T.filesService.bulkUpload({files:[B.addedFiles[0]]}).pipe((0,Ce.U)(function(F){return{mfs:F,e:B}}))}),(0,ee.b)(function(B){return T.formControl.setValue(B.mfs[0])}),(0,ee.b)(function(B){var F;return(F=T.files).push.apply(F,(0,y.Z)(B.e.addedFiles))})).subscribe(),T.valueSub=T.value$.pipe((0,Q.h)(function(B){return"object"==typeof B}),(0,Ce.U)(function(B){return new nk(B)}),(0,ee.b)(function(B){console.log("populate value",B)}),(0,st.w)(function(B){return T.filesService.convertToFiles([B])}),(0,ee.b)(function(B){console.log("populate as file",B),T.files=B})).subscribe(),T.filesService=u,T}return(0,_.Z)(e,[{key:"onSelect",value:function(s){this.select$.next(s)}},{key:"onRemove",value:function(s){console.log(s),this.formControl.setValue(""),this.files.splice(this.files.indexOf(s),1)}},{key:"isType",value:function(s,u){switch(u){case"image":return this.filesService.isImage({file:s});case"video":return this.filesService.isVideo({file:s});default:return!1}}}]),e}(Ra);return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Bt.AttributeSerializerService),r.\u0275\u0275directiveInject(pa),r.\u0275\u0275directiveInject(iE),r.\u0275\u0275directiveInject(Pr),r.\u0275\u0275directiveInject(ha),r.\u0275\u0275directiveInject(Zo),r.\u0275\u0275directiveInject(v.gN))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["druid-forms-form-media"]],features:[r.\u0275\u0275InheritDefinitionFeature],decls:4,vars:1,consts:[[3,"change"],[4,"ngFor","ngForOf"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"file","removable","removed",4,"ngIf"],[3,"removable","removed",4,"ngIf"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"file","removable","removed"],[3,"removable","removed"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"ngx-dropzone",0),r.\u0275\u0275listener("change",function(s){return e.onSelect(s)}),r.\u0275\u0275elementStart(1,"ngx-dropzone-label"),r.\u0275\u0275text(2,"Drop it, baby!"),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(3,IK,4,3,"ng-container",1),r.\u0275\u0275elementEnd()),2&t&&(r.\u0275\u0275advance(3),r.\u0275\u0275property("ngForOf",e.files))},dependencies:[E.NgForOf,E.NgIf,SE,t3,Yd,r3,W7]}),a}(),HK=function(){var a=function(n){(0,G.Z)(e,n);var t=(0,H.Z)(e);function e(o,s,u,c,l,m){return(0,p.Z)(this,e),t.call(this,o,s,u,c,l,m)}return(0,_.Z)(e)}(Ra);return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Bt.AttributeSerializerService),r.\u0275\u0275directiveInject(pa),r.\u0275\u0275directiveInject(Pr),r.\u0275\u0275directiveInject(ha),r.\u0275\u0275directiveInject(Zo),r.\u0275\u0275directiveInject(v.gN))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["druid-forms-form-hidden"]],features:[r.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(t,e){},encapsulation:2}),a}(),qK=function(){var a=function(){function n(t,e,o,s){(0,p.Z)(this,n),this.data=t,this.dialogRef=e,this.fb=o,this.attributeSerializer=s,this.contexts=[],this.formGroup=this.fb.group({valuesMapping:this.fb.control("")})}return(0,_.Z)(n,[{key:"ngOnInit",value:function(){}},{key:"submit",value:function(){var e=this;this.data.panelFormGroup.get("settings").clear(),this.attributeSerializer.serialize(this.formGroup.value,"root").attributes.forEach(function(o){console.log("formly repeating editor form"),console.log(e.attributeSerializer.convertToGroup(o)),e.data.panelFormGroup.get("settings").push(e.attributeSerializer.convertToGroup(o))})}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Jt.MAT_LEGACY_DIALOG_DATA),r.\u0275\u0275directiveInject(Jt.MatLegacyDialogRef),r.\u0275\u0275directiveInject(v.QS),r.\u0275\u0275directiveInject(Bt.AttributeSerializerService))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-form-section-editor"]],decls:8,vars:2,consts:[[3,"formGroup","ngSubmit"],["matInput","","formControlName","valuesMapping"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"form",0),r.\u0275\u0275listener("ngSubmit",function(){return e.submit()}),r.\u0275\u0275elementStart(1,"div")(2,"mat-form-field")(3,"mat-label"),r.\u0275\u0275text(4,"Values Mapping"),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(5,"input",1),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(6,"button",2),r.\u0275\u0275text(7,"Save"),r.\u0275\u0275elementEnd()()),2&t&&(r.\u0275\u0275property("formGroup",e.formGroup),r.\u0275\u0275advance(6),r.\u0275\u0275property("disabled",!e.formGroup.valid))},dependencies:[v._Y,v.Fj,v.JJ,v.JL,v.sg,v.u,pi.MatLegacyButton,Jt.MatLegacyDialogClose,En.MatLegacyFormField,En.MatLegacyLabel,Hr.MatLegacyInput]}),a}(),KK=function(n){return new fn.ContentPlugin({id:"form_input",title:"Form Input",selectionComponent:void 0,editorComponent:Da,renderComponent:FK,handler:n.handler})},WK=function(n){return new fn.ContentPlugin({id:"form_select",title:"Form Select",selectionComponent:void 0,editorComponent:Da,renderComponent:MK,handler:n.handler})},XK=function(n){return new fn.ContentPlugin({id:"form_radiogroup",title:"Form Radiogroup",selectionComponent:void 0,editorComponent:Da,renderComponent:LK,handler:n.handler})},QK=function(n){return new fn.ContentPlugin({id:"form_textarea",title:"Form Textarea",selectionComponent:void 0,editorComponent:Da,renderComponent:NK,handler:n.handler})},JK=function(n){return new fn.ContentPlugin({id:"form_slider",title:"Form Slider",selectionComponent:void 0,editorComponent:Da,renderComponent:jK,handler:n.handler})},YK=function(n){return new fn.ContentPlugin({id:"form_toggle",title:"Form Toggle",selectionComponent:void 0,editorComponent:Da,renderComponent:$K,handler:n.handler})},eW=function(n){return new fn.ContentPlugin({id:"form_checkbox",title:"Form Checkbox",selectionComponent:void 0,editorComponent:Da,renderComponent:UK,handler:n.handler})},tW=function(n){return new fn.ContentPlugin({id:"form_datepicker",title:"Form Datepicker",selectionComponent:void 0,editorComponent:Da,renderComponent:zK,handler:n.handler})},nW=function(n){return new fn.ContentPlugin({id:"form_autocomplete",title:"Form Autocomplete",selectionComponent:void 0,editorComponent:Da,renderComponent:GK,handler:n.handler})},rW=function(n){return new fn.ContentPlugin({id:"form_media",title:"Form Media",selectionComponent:void 0,editorComponent:Da,renderComponent:VK,handler:n.handler})},iW=function(n){return new fn.ContentPlugin({id:"form_hidden",title:"Form Hidden",selectionComponent:void 0,editorComponent:Da,renderComponent:HK,handler:n.handler})},aW=function(){var a=(0,_.Z)(function n(t,e,o){(0,p.Z)(this,n),[KK({handler:o}),WK({handler:o}),QK({handler:o}),XK({handler:o}),JK({handler:o}),YK({handler:o}),eW({handler:o}),tW({handler:o}),nW({handler:o}),rW({handler:o}),iW({handler:o})].forEach(function(s){return t.register(s)}),[new bE({id:"form_section",name:"form_section",title:"Form Section",editorComponent:qK,renderComponent:BK})].forEach(function(s){return e.register(s)})});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(fn.ContentPluginManager),r.\u0275\u0275inject(Xd),r.\u0275\u0275inject(iF))},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({imports:[E.CommonModule,v.u5,v.UX,Oi.MaterialModule,Vk,kc,EE,rF]}),a}();function sW(a){var e,n={},t=(0,te.Z)(a.keys());try{for(t.s();!(e=t.n()).done;){var o=e.value,s=a.getAll(o);null!==s&&(n[o]=s)}}catch(u){t.e(u)}finally{t.f()}return n}var oF=function(){var a=function(){function n(t,e){var o=this;(0,p.Z)(this,n),this.transferState=e,this.isCacheActive=!0,t.isStable.pipe((0,wI.P)(function(s){return s}),(0,hi.d)(!1)).subscribe(function(){o.isCacheActive=!1})}return(0,_.Z)(n,[{key:"makeCacheKey",value:function(e,o,s,u){var c=s.keys().sort().map(function(m){return"".concat(m,"=").concat(s.getAll(m))}).join("&");return(0,r.makeStateKey)(("GET"===e?"G.":"H.")+u+"."+o+"?"+c)}},{key:"intercept",value:function(e,o){var s=this;if(!this.isCacheActive||"GET"!==e.method&&"HEAD"!==e.method)return o.handle(e);var u=this.makeCacheKey(e.method,e.url,e.params,e.responseType);if(this.transferState.hasKey(u)){var c=this.transferState.get(u,null),l=c?.body;switch(c?.responseType){case"arraybuffer":l=(new TextEncoder).encode(c.body).buffer;break;case"blob":l=new Blob([c.body])}return(0,je.of)(new O.HttpResponse({body:l,headers:new O.HttpHeaders(c?.headers),status:c?.status,statusText:c?.statusText,url:c?.url}))}return o.handle(e).pipe((0,ee.b)(function(C){C instanceof O.HttpResponse&&s.transferState.set(u,{body:C.body,headers:sW(C.headers),status:C.status,statusText:C.statusText,url:C.url||"",responseType:e.responseType})}))}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(r.ApplicationRef),r.\u0275\u0275inject(r.TransferState))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),uW=function(){var a=(0,_.Z)(function n(){(0,p.Z)(this,n)});return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({providers:[r.ApplicationRef,r.TransferState,oF,{provide:O.HTTP_INTERCEPTORS,useExisting:oF,multi:!0}]}),a}(),cW=new r.InjectionToken("AlienaliasSettings"),dW=(0,_.Z)(function a(n){(0,p.Z)(this,a),n&&(this.openSearchDomain=n.openSearchDomain)}),aF=S(37628),mW=["mfeReactComponent"],gW=function(){var a=function(){function n(){(0,p.Z)(this,n)}return(0,_.Z)(n,[{key:"ngOnChanges",value:function(e){this.render()}},{key:"ngAfterViewInit",value:function(){this.render()}},{key:"ngOnDestroy",value:function(){aF.unmountComponentAtNode(this.containerRef.nativeElement)}},{key:"render",value:function(){var e=this.component();aF.render(e,this.containerRef.nativeElement)}}]),n}();return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["druid-mfe-react"]],viewQuery:function(t,e){var o;1&t&&r.\u0275\u0275viewQuery(mW,5),2&t&&r.\u0275\u0275queryRefresh(o=r.\u0275\u0275loadQuery())&&(e.containerRef=o.first)},inputs:{component:"component"},features:[r.\u0275\u0275NgOnChangesFeature],decls:2,vars:0,consts:[["mfeReactComponent",""]],template:function(t,e){1&t&&r.\u0275\u0275element(0,"span",null,0)},encapsulation:2}),a}(),vW=["appContainer"],fA=(0,_.Z)(function a(n){(0,p.Z)(this,a),n&&(this.type=n.type&&""!==n.type?n.type:"module",this.remoteEntry=n.remoteEntry,this.componentName=n.componentName,this.exposedModule=n.exposedModule,this.remoteName=n.remoteName&&""!==n.remoteName?n.remoteName:void 0)}),sF=function(){var a=function(){function n(t){(0,p.Z)(this,n),this.attributeSerializer=t}return(0,_.Z)(n,[{key:"handleFile",value:function(e){return(0,je.of)([])}},{key:"handlesType",value:function(e){return!1}},{key:"implementsRendererOverride",value:function(){return!1}},{key:"hasRendererOverride",value:function(e){return(0,je.of)(!1)}},{key:"isDynamic",value:function(e){return!1}},{key:"isData",value:function(e){return!1}},{key:"getBindings",value:function(e,o,s){return(0,je.of)([])}},{key:"fetchDynamicData",value:function(e,o){return(0,je.of)(new pr)}},{key:"buildDynamicItems",value:function(e,o){return(0,je.of)([])}},{key:"toObject",value:function(e){return(0,je.of)(new fA(this.attributeSerializer.deserializeAsObject(e)))}},{key:"buildSettings",value:function(e){return this.attributeSerializer.serialize(e,"root").attributes}},{key:"stateDefinition",value:function(e){return(0,je.of)({autocomplete:{input:""},value:void 0})}},{key:"editorOptions",value:function(e){return(0,je.of)(new fn.ContentPluginEditorOptions)}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Bt.AttributeSerializerService))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),_W=function(){var a=function(){function n(t,e,o,s,u){(0,p.Z)(this,n),this.data=t,this.dialogRef=e,this.fb=o,this.handler=s,this.attributeSerializer=u,this.bindableOptions=[],this.formGroup=this.fb.group({type:this.fb.control("module",[v.kI.required]),remoteEntry:this.fb.control("",[v.kI.required]),exposedModule:this.fb.control("",[v.kI.required]),componentName:this.fb.control("",[v.kI.required]),remoteName:this.fb.control("")}),this.paneIndex=t.paneIndex,this.pane=t.pane}return(0,_.Z)(n,[{key:"paneGroup",get:function(){return this.data.panelFormGroup.get("panes").at(this.paneIndex)}},{key:"ngOnInit",value:function(){var e=this;this.data.pane?this.handler.toObject(this.data.pane.settings).subscribe(function(o){e.formGroup.get("type").setValue(o.type&&""!==o.type?o.type:"module"),e.formGroup.get("remoteEntry").setValue(o.remoteEntry),e.formGroup.get("exposedModule").setValue(o.exposedModule),e.formGroup.get("componentName").setValue(o.componentName),e.formGroup.get("remoteName").setValue(o.remoteName)}):(this.data.panelFormGroup.get("panes").push(this.fb.group({contentPlugin:this.data.plugin.id,name:new v.p4(""),label:new v.p4(""),rule:new v.p4(""),settings:this.fb.array([])})),this.paneIndex=this.data.panelFormGroup.get("panes").length-1,this.pane=new Wr(this.data.panelFormGroup.get("panes").at(this.paneIndex).value)),this.bindableOptions=this.data.panelFormGroup.get("panes").controls.reduce(function(o,s){return s.get("name").value?[].concat((0,y.Z)(o),[s.get("name").value]):(0,y.Z)(o)},[])}},{key:"submit",value:function(){var e=this;console.log(this.formGroup.value);var o=new fA(this.formGroup.value);console.log(o),this.paneGroup.get("settings").clear(),this.handler.buildSettings(o).map(function(u){return e.attributeSerializer.convertToGroup(u)}).forEach(function(u){return e.paneGroup.get("settings").push(u)}),this.dialogRef.close()}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Jt.MAT_LEGACY_DIALOG_DATA),r.\u0275\u0275directiveInject(Jt.MatLegacyDialogRef),r.\u0275\u0275directiveInject(v.QS),r.\u0275\u0275directiveInject(sF),r.\u0275\u0275directiveInject(Bt.AttributeSerializerService))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["druid-outsider-outside-app-editor"]],inputs:{bindableOptions:"bindableOptions"},decls:32,vars:1,consts:[[3,"formGroup","ngSubmit"],["formControlName","type","required",""],["value","module"],["value","script"],["matInput","","formControlName","remoteEntry","required",""],["matInput","","formControlName","exposedModule","required",""],["matInput","","formControlName","componentName","required",""],["matInput","","formControlName","remoteName"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close",""]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"form",0),r.\u0275\u0275listener("ngSubmit",function(){return e.submit()}),r.\u0275\u0275elementStart(1,"div")(2,"mat-form-field")(3,"mat-label"),r.\u0275\u0275text(4,"Remote Entry"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(5,"mat-select",1)(6,"mat-option",2),r.\u0275\u0275text(7,"Module"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(8,"mat-option",3),r.\u0275\u0275text(9,"Script"),r.\u0275\u0275elementEnd()()()(),r.\u0275\u0275elementStart(10,"div")(11,"mat-form-field")(12,"mat-label"),r.\u0275\u0275text(13,"Remote Entry"),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(14,"input",4),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(15,"div")(16,"mat-form-field")(17,"mat-label"),r.\u0275\u0275text(18,"Exposed Module"),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(19,"input",5),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(20,"div")(21,"mat-form-field")(22,"mat-label"),r.\u0275\u0275text(23,"Component Name"),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(24,"input",6),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(25,"div")(26,"mat-form-field")(27,"mat-label"),r.\u0275\u0275text(28,"Remote Name"),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(29,"input",7),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(30,"button",8),r.\u0275\u0275text(31,"Save"),r.\u0275\u0275elementEnd()()),2&t&&r.\u0275\u0275property("formGroup",e.formGroup)},dependencies:[bi.MatLegacyOption,pi.MatLegacyButton,Jt.MatLegacyDialogClose,En.MatLegacyFormField,En.MatLegacyLabel,Hr.MatLegacyInput,Fi.MatLegacySelect,v._Y,v.Fj,v.JJ,v.JL,v.Q7,v.sg,v.u]}),a}(),yW=function(){var a=function(){function n(t){var e=this;(0,p.Z)(this,n),this.attributeSerializer=t,this.objectSettings$=new z.X(void 0),this.contexts$=new z.X([]),this.settings$=new z.X([]),this.settingsSub=this.settings$.pipe((0,Ce.U)(function(o){return o?new fA(e.attributeSerializer.deserializeAsObject(o)):void 0}),(0,ee.b)(function(o){return e.objectSettings$.next(o)})).subscribe(),this.renderAppSub=this.objectSettings$.pipe((0,yy.T)(1),(0,st.w)(function(o){return new W.y(function(s){rf(o.type&&"script"!==o.type?{type:"module",remoteEntry:o.remoteEntry,exposedModule:o.exposedModule}:{type:"script",remoteEntry:o.remoteEntry,exposedModule:o.exposedModule,remoteName:o.remoteName}).then(function(u){s.next(u[o.componentName&&""!==o.componentName?o.componentName:"default"]),s.complete()})}).pipe((0,Ce.U)(function(s){return{s:o,c:s}}))}),(0,ee.b)(function(o){var s=o.s,u=o.c;e.viewContainer.clear(),s.type&&"script"!==s.type?e.viewContainer.createComponent(u):e.viewContainer.createComponent(gW).instance.component=u})).subscribe()}return(0,_.Z)(n,[{key:"settings",set:function(e){this.settings$.next(e)}},{key:"contexts",set:function(e){this.contexts$.next(e)}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(Bt.AttributeSerializerService))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["druid-outsider-outside-app-renderer"]],viewQuery:function(t,e){var o;1&t&&r.\u0275\u0275viewQuery(vW,7,r.ViewContainerRef),2&t&&r.\u0275\u0275queryRefresh(o=r.\u0275\u0275loadQuery())&&(e.viewContainer=o.first)},inputs:{settings:"settings",contexts:"contexts"},decls:2,vars:0,consts:[["appContainer",""]],template:function(t,e){1&t&&r.\u0275\u0275elementContainer(0,null,0)}}),a}(),bW=function(){var a=(0,_.Z)(function n(t,e){(0,p.Z)(this,n),t.register(function(n){return new fn.ContentPlugin({id:"outside_app",title:"Outside App",selectionComponent:void 0,editorComponent:_W,renderComponent:yW,handler:n.handler})}({handler:e}))});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(fn.ContentPluginManager),r.\u0275\u0275inject(sF))},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({imports:[E.CommonModule,Oi.MaterialModule,v.UX]}),a}(),uF=function(){var a=function(){function n(t,e){(0,p.Z)(this,n),this.fb=t,this.controlContainer=e,this.context$=new z.X(void 0),this.formGroup=this.fb.group({remoteEntry:this.fb.control("",[v.kI.required]),exposedModule:this.fb.control("",[v.kI.required]),moduleName:this.fb.control("",[v.kI.required])}),this.onTouched=function(){}}return(0,_.Z)(n,[{key:"context",set:function(e){this.context$.next(e)}},{key:"ngOnInit",value:function(){var e=this;this.context$.subscribe(function(o){e.formGroup.setValue(o?{remoteEntry:o.data.remoteEntry,exposedModule:o.data.exposedModule,moduleName:o.data.moduleName}:{remoteEntry:"",exposedModule:"",moduleName:""})})}},{key:"writeValue",value:function(e){e&&this.formGroup.setValue(e,{emitEvent:!1})}},{key:"registerOnChange",value:function(e){this.formGroup.valueChanges.subscribe(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){e?this.formGroup.disable():this.formGroup.enable()}},{key:"validate",value:function(e){return this.formGroup.valid?null:{invalidForm:{valid:!1,message:"source is invalid"}}}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(v.QS),r.\u0275\u0275directiveInject(v.gN))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-context-module-form"]],inputs:{context:"context"},features:[r.\u0275\u0275ProvidersFeature([{provide:v.JU,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0},{provide:v.Cf,useExisting:(0,r.forwardRef)(function(){return a}),multi:!0}])],decls:16,vars:1,consts:[[3,"formGroup"],["matInput","","formControlName","remoteEntry","required",""],["matInput","","formControlName","exposedModule","required",""],["matInput","","formControlName","moduleName","required",""]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"div",0)(1,"div")(2,"mat-form-field")(3,"mat-label"),r.\u0275\u0275text(4,"Remote Entry"),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(5,"input",1),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(6,"div")(7,"mat-form-field")(8,"mat-label"),r.\u0275\u0275text(9,"Exposed Module"),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(10,"input",2),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(11,"div")(12,"mat-form-field")(13,"mat-label"),r.\u0275\u0275text(14,"Module Name"),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(15,"input",3),r.\u0275\u0275elementEnd()()()),2&t&&r.\u0275\u0275property("formGroup",e.formGroup)},dependencies:[v.Fj,v.JJ,v.JL,v.Q7,v.sg,v.u,En.MatLegacyFormField,En.MatLegacyLabel,Hr.MatLegacyInput]}),a}(),CW=function(){var a=function(){function n(t,e){(0,p.Z)(this,n),this.fb=t,this.controlContainer=e}return(0,_.Z)(n,[{key:"ngOnInit",value:function(){this.controlContainer.control.addControl("adaptor",this.fb.control("data",v.kI.required)),this.controlContainer.control.addControl("data",this.fb.control(""))}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(v.QS),r.\u0275\u0275directiveInject(v.gN))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["classifieds-ui-context-module-editor"]],viewQuery:function(t,e){var o;1&t&&r.\u0275\u0275viewQuery(uF,7),2&t&&r.\u0275\u0275queryRefresh(o=r.\u0275\u0275loadQuery())&&(e.contextModuleFormComp=o.first)},inputs:{context:"context"},decls:2,vars:2,consts:[[3,"formGroup"],["formControlName","data",3,"context"]],template:function(t,e){1&t&&(r.\u0275\u0275elementContainerStart(0,0),r.\u0275\u0275element(1,"classifieds-ui-context-module-form",1),r.\u0275\u0275elementContainerEnd()),2&t&&(r.\u0275\u0275property("formGroup",e.controlContainer.control),r.\u0275\u0275advance(1),r.\u0275\u0275property("context",e.context))},dependencies:[v.JJ,v.JL,v.sg,v.u,uF]}),a}(),wW=function(){var a=(0,_.Z)(function n(t,e,o){var s=this;(0,p.Z)(this,n),this.actions$=t,this.moduleLoaderService=e,this.es=o,this.setPage$=_i(function(){return s.actions$.pipe(Ho(Rk),(0,ee.b)(function(u){var c=u.page;console.log("tractor beam capture page",c),c.contexts&&Array.isArray(c.contexts)&&c.contexts.forEach(function(l){if("module"===l.plugin)return s.moduleLoaderService.loadModule(function(){return rf({type:"module",remoteEntry:l.data.remoteEntry,exposedModule:l.data.exposedModule}).then(function(m){return m[l.data.moduleName]})}).subscribe()})}))},{dispatch:!1}),this.setPageInfo$=_i(function(){return s.actions$.pipe(Ho(Ak),(0,ee.b)(function(u){console.log("tractor beam info",u.info)}),(0,st.w)(function(u){var c=u.info;return s.es.getEntityCollectionService("PanelPage").getByKey(c.id)}),(0,ee.b)(function(u){u.contexts&&Array.isArray(u.contexts)&&u.contexts.forEach(function(c){if("module"===c.plugin)return s.moduleLoaderService.loadModule(function(){return rf({type:"module",remoteEntry:c.data.remoteEntry,exposedModule:c.data.exposedModule}).then(function(l){return l[c.data.moduleName]})}).subscribe()})}))},{dispatch:!1})});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(na),r.\u0275\u0275inject(Nn.ModuleLoaderService),r.\u0275\u0275inject(Dr))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),cF=function(){var a=function(){function n(t){(0,p.Z)(this,n),this.moduleLoaderService=t}return(0,_.Z)(n,[{key:"resolve",value:function(e,o,s){return console.log("module resolver context",e,o,s),this.moduleLoaderService.loadModule(function(){return rf({type:"module",remoteEntry:o.remoteEntry,exposedModule:o.exposedModule}).then(function(u){return u[o.moduleName]})})}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Nn.ModuleLoaderService))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),EW=function(){var a=function(){function n(t,e,o){(0,p.Z)(this,n),this.moduleLoader=t,this.pageBuilderFacade=e,this.es=o}return(0,_.Z)(n,[{key:"loadPlugins",value:function(){var e=this;return this.pageBuilderFacade.getPageInfo$.pipe((0,ee.b)(function(){return console.log("started loading external modules")}),(0,st.w)(function(o){return(o&&o.id?e.es.getEntityCollectionService("PanelPage").getByKey(o.id):(0,je.of)(void 0)).pipe((0,hi.d)(void 0))}),(0,st.w)(function(o){return o?(0,Un.D)(o.contexts.filter(function(s){return"module"===s.plugin}).map(function(s){return e.moduleLoader.loadModule(function(){return rf({type:"module",remoteEntry:s.data.remoteEntry,exposedModule:s.data.exposedModule}).then(function(u){return u[s.data.moduleName]})})})).pipe((0,Rr.g)(1),(0,hi.d)([])):(0,je.of)([])}),(0,ee.b)(function(){return console.log("completed loading external modules")}),(0,Ce.U)(function(){return!0}),(0,kn.q)(1))}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Nn.ModuleLoaderService),r.\u0275\u0275inject(ea),r.\u0275\u0275inject(Dr))},a.\u0275prov=r.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),PW=function(){var a=(0,_.Z)(function n(t,e,o,s){(0,p.Z)(this,n),e.addDiscovery(s),t.register(function(n){return new Fs({id:"module",name:"module",title:"Module",baseObject:{},resolver:n.moduleResolver,editorComponent:CW})}({moduleResolver:o}))});return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275inject(Su),r.\u0275\u0275inject(fn.ContentPluginManager),r.\u0275\u0275inject(cF),r.\u0275\u0275inject(EW))},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({providers:[cF],imports:[E.CommonModule,v.u5,v.UX,Vd,Oi.MaterialModule,au.forFeature([wW])]}),a}(),kW=(0,_.Z)(function a(n){(0,p.Z)(this,a),n&&(this.appId=n.appId,this.guestRoleArn=n.guestRoleArn,this.region=n.region,this.identityPoolId=n.identityPoolId)}),AW=new r.InjectionToken("RumSettings"),lF=[["71548bd5-9d2a-41df-83b1-67e022463dab","/"]],RW=[{contexts:[],cssFile:"",derivativeId:"",displayType:"page",entityPermissions:{deleteUserIds:["e36b42fe-b09c-4514-a519-e178bb52957e"],readUserIds:["*"],writeUserIds:["e36b42fe-b09c-4514-a519-e178bb52957e"]},gridItems:[],id:"71548bd5-9d2a-41df-83b1-67e022463dab",layoutSetting:{settings:[]},layoutType:"gridless",name:"index",panels:[{columnSetting:{settings:[]},label:"",name:"",panes:[{contentPlugin:"snippet",label:"welcome",linkedPageId:"",locked:!1,name:"welcome",rule:{condition:"",field:"",operator:"",rules:[],value:""},settings:[{attributes:[],computedValue:"text/html",displayName:"Content Type",floatValue:0,intValue:0,name:"contentType",type:1,value:"text/html"},{attributes:[],computedValue:"Vertigo Welcomes You!",displayName:"Content",floatValue:0,intValue:0,name:"content",type:1,value:"Vertigo Welcomes You!"},{attributes:[],computedValue:"",displayName:"jsScript",floatValue:0,intValue:0,name:"jsScript",type:1,value:""}]},{contentPlugin:"snippet",label:"installapp",linkedPageId:"",locked:!1,name:"installapp",rule:{condition:"",field:"",operator:"",rules:[],value:""},settings:[{attributes:[],computedValue:"text/html",displayName:"Content Type",floatValue:0,intValue:0,name:"contentType",type:1,value:"text/html"},{attributes:[],computedValue:'<a href="https://github.com/login/oauth/authorize?client_id=Iv1.c72ed0518c7be356&redirect_uri=https://us-east-1.climateaware-dev.eco/github/signup&state=56fgdettdss">Install App</a>',displayName:"Content",floatValue:0,intValue:0,name:"content",type:1,value:'<a href="https://github.com/login/oauth/authorize?client_id=Iv1.c72ed0518c7be356&redirect_uri=https://us-east-1.climateaware-dev.eco/github/signup&state=56fgdettdss">Install App</a>'},{attributes:[],computedValue:"",displayName:"jsScript",floatValue:0,intValue:0,name:"jsScript",type:1,value:""}]}],settings:[],stylePlugin:""}],path:"/index",persistence:{dataduct:{plugin:"",settings:[]}},rowSettings:[{settings:[]}],site:"vertigoapp",title:"index",userId:"e36b42fe-b09c-4514-a519-e178bb52957e"},{contexts:[],cssFile:"",derivativeId:"",displayType:"page",entityPermissions:{deleteUserIds:["e36b42fe-b09c-4514-a519-e178bb52957e"],readUserIds:["*"],writeUserIds:["e36b42fe-b09c-4514-a519-e178bb52957e"]},gridItems:[{cols:100,rows:1,weight:0,x:0,y:0}],id:"bd29f806-3b4b-4b79-9dac-7a5ae221f432",layoutSetting:{settings:[]},layoutType:"split",name:"hello_world",panels:[{columnSetting:{settings:[]},label:"",name:"",panes:[{contentPlugin:"snippet",label:"",linkedPageId:"",locked:!1,name:"",rule:{condition:"",field:"",operator:"",rules:null,value:""},settings:[{attributes:[],computedValue:"text/html",displayName:"Content Type",floatValue:0,intValue:0,name:"contentType",type:1,value:"text/html"},{attributes:[],computedValue:"Hello World",displayName:"Content",floatValue:0,intValue:0,name:"content",type:1,value:"Hello World"},{attributes:[],computedValue:"",displayName:"jsScript",floatValue:0,intValue:0,name:"jsScript",type:1,value:""}]}],settings:[],stylePlugin:""}],path:"/hello-world",persistence:{dataduct:{plugin:"",settings:[]}},rowSettings:[{settings:[]}],site:"spearhead",title:"Hello World",userId:"e36b42fe-b09c-4514-a519-e178bb52957e"}],DW=function(){var a=function(){function n(t,e,o,s){(0,p.Z)(this,n),this.authFacade=t,this.router=e,this.route=o,this.platformId=s}return(0,_.Z)(n,[{key:"ngOnInit",value:(t=Lt((0,He.Z)().mark(function o(){var s;return(0,He.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:this.authFacade.completeAuthentication(),localStorage.getItem("github.access_token")&&localStorage.getItem("github.refresh_token")&&(s={accessToken:localStorage.getItem("github.access_token"),refreshToken:localStorage.getItem("github.refresh_token")},console.log("link oauth",s)),this.router.navigate(["/pages/create-panel-page"],{queryParams:{cacheBuster:fr()}});case 3:case"end":return c.stop()}},o,this)})),function e(){return t.apply(this,arguments)})}]),n;var t}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(li),r.\u0275\u0275directiveInject(nr.Router),r.\u0275\u0275directiveInject(nr.ActivatedRoute),r.\u0275\u0275directiveInject(r.PLATFORM_ID))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["vertigoapp-auth-callback"]],decls:0,vars:0,template:function(t,e){},encapsulation:2}),a}(),TW=function(){var a=function(){function n(t,e,o){(0,p.Z)(this,n),this.http=t,this.defaultDataServiceConfig=e,this.authFacade=o}return(0,_.Z)(n,[{key:"ngOnInit",value:function(){var e=this,o=new URLSearchParams(window.location.search),c={client_id:"",client_secret:"",code:o.get("code"),state:o.get("state")},l=this.defaultDataServiceConfig.root.indexOf("/vertigoapp"),m=this.defaultDataServiceConfig.root.substring(0,l);console.log("api post",m),this.http.post("".concat(m,"/github/login/oauth/access_token"),c,{responseType:"text"}).pipe((0,ti.K)(function(C){return console.log("github error",C),(0,je.of)({})}),(0,ee.b)(function(C){console.log("github response",C);var T=new URLSearchParams(C);T.get("access_token"),T.get("refresh_token"),localStorage.setItem("github.access_token",T.get("access_token")),localStorage.setItem("github.refresh_token",T.get("refresh_token"))}),(0,ee.b)(function(){return e.authFacade.login()})).subscribe()}}]),n}();return a.\u0275fac=function(t){return new(t||a)(r.\u0275\u0275directiveInject(O.HttpClient),r.\u0275\u0275directiveInject($a),r.\u0275\u0275directiveInject(li))},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["vertigoapp-github-callback"]],decls:1,vars:0,template:function(t,e){1&t&&r.\u0275\u0275text(0,"Github Callback")},encapsulation:2}),a}(),IW=[{path:"github-callback",component:TW},{path:"auth-callback",component:DW}],OW=function(){var a=(0,_.Z)(function n(){(0,p.Z)(this,n)});return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=r.\u0275\u0275defineInjector({imports:[nr.RouterModule.forChild(IW)]}),a}(),FW=[{path:"auth-callback",component:R2}].concat((0,y.Z)(lF.map(function(a){var n=(0,g.Z)(a,2),t=n[0],e=n[1];return{matcher:aA(new ii({id:t,layoutType:"",displayType:"",gridItems:[],panels:[],layoutSetting:void 0,rowSettings:[],path:e})),component:BE,data:{panelPageListItem:new ii({id:t,layoutType:"",displayType:"",gridItems:[],panels:[],layoutSetting:void 0,rowSettings:[],path:e})}}})),(0,y.Z)(lF.map(function(a){var n=(0,g.Z)(a,2),t=n[0],e=n[1];return{matcher:oA(new ii({id:t,layoutType:"",displayType:"",gridItems:[],panels:[],layoutSetting:void 0,rowSettings:[],path:e})),component:ME,data:{panelPageListItem:new ii({id:t,layoutType:"",displayType:"",gridItems:[],panels:[],layoutSetting:void 0,rowSettings:[],path:e})}}})),[{path:"**",component:x$,canActivate:[hO]}]),MW={root:Aa_apiGatewaySettings.endpointUrl,timeout:2e4};function BW(){var a=new Sc;return a.link=function(n,t,e){return"page"===e?'<classifieds-ui-panel-page id="'.concat(n,'"></classifieds-ui-panel-page>'):'<classifieds-ui-page-router-link href="'.concat(n,'" text="').concat(e,'"></classifieds-ui-page-router-link>')},{renderer:a}}var NW=function(){var n,t,e,a=(0,_.Z)(function n(){(0,p.Z)(this,n)});return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.\u0275\u0275defineNgModule({type:a,bootstrap:[Gq]}),a.\u0275inj=r.\u0275\u0275defineInjector({providers:[(0,Z.provideClientHydration)(),hO,{provide:Nn.SITE_NAME,useValue:Aa_site},{provide:sp,useValue:new To(Aa_clientSettings)},{provide:rE,useValue:new Aj(Aa_mediaSettings)},{provide:GO,useValue:new h7(Aa_panelsSettings)},{provide:cW,useValue:new dW(Aa_alienaliasSettings)},{provide:V3,useValue:new vq({disableRouting:!1})},{provide:Dl,useValue:new hc(Aa_cognitoSettings)},{provide:AW,useValue:new kW(Aa_rumSettings)},{provide:O.HTTP_INTERCEPTORS,useClass:Ss,multi:!0},{provide:O.HTTP_INTERCEPTORS,useClass:D2,multi:!0},{provide:$a,useValue:MW},{provide:r.APP_INITIALIZER,useFactory:(n={key:function(t){return"panelpage__"+t.data.id},data:RW.map(function(n){return new ii(n)})},t=n.data,e=n.key,function(o){return function(){return new W.y(function(s){(0,E.isPlatformBrowser)(o)?function Zq(a){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:ka())("readwrite",function(t){return a.forEach(function(e){return t.put(e[1],e[0])}),No(t.transaction)})}(t.map(function(c){return[e({data:c}),c]})).then(function(){console.log("data loaded into idb"),s.next(),s.complete()}).catch(function(){console.log("data load into idb failure"),s.next(),s.complete()}):(s.next(),s.complete())})}}),multi:!0,deps:[r.PLATFORM_ID]}],imports:[Z.BrowserModule.withServerTransition({appId:"serverApp"}),E.CommonModule,O.HttpClientModule,O.HttpClientJsonpModule,v.u5,v.UX,$.BrowserAnimationsModule,si,gs,uW,ik.forRoot({sanitize:r.SecurityContext.NONE,markedOptions:{provide:ZI,useFactory:BW}}),nr.RouterModule.forRoot(FW,{initialNavigation:"enabledBlocking"}),Aa_production?[]:Vq.FT.instrument({maxAge:25,logOnly:Aa_production}),Z8.forRoot({serializer:ck}),Zt.Aw.forRoot(qq,{metaReducers:Kq,runtimeChecks:{strictActionImmutability:!0,strictStateImmutability:!0}}),au.forRoot([]),sO,Fq,Nn.UtilsModule,H_,fn.ContentModule,Vd,ua.forRoot(),B0.forRoot(),vI,vo.forRoot({}),C$,Dk,Vk,Aq,eK,lp,zq,iK,cK,aW,bW,PW,R$,TG,EE,Cq,rF,wu,N$,OW]}),a}();console.log("bootstrap"),Aa_production&&(0,r.enableProdMode)(),Z.platformBrowser().bootstrapModule(NW).catch(function(a){return console.log(a)})},26954:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.AwsCrc32c=void 0;var M=S(92361),q=S(31500),Z=S(25423),r=function(){function _(){this.crc32c=new Z.Crc32c}return _.prototype.update=function(p){(0,q.isEmptyData)(p)||this.crc32c.update((0,q.convertToBuffer)(p))},_.prototype.digest=function(){return M.__awaiter(this,void 0,void 0,function(){return M.__generator(this,function(p){return[2,(0,q.numToUint8)(this.crc32c.digest())]})})},_.prototype.reset=function(){this.crc32c=new Z.Crc32c},_}();N.AwsCrc32c=r},25423:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.AwsCrc32c=N.Crc32c=N.crc32c=void 0;var M=S(92361),q=S(31500);N.crc32c=function Z(y){return(new r).update(y).digest()};var r=function(){function y(){this.checksum=4294967295}return y.prototype.update=function(E){var O,$;try{for(var v=M.__values(E),b=v.next();!b.done;b=v.next())this.checksum=this.checksum>>>8^p[255&(this.checksum^b.value)]}catch(G){O={error:G}}finally{try{b&&!b.done&&($=v.return)&&$.call(v)}finally{if(O)throw O.error}}return this},y.prototype.digest=function(){return(4294967295^this.checksum)>>>0},y}();N.Crc32c=r;var p=(0,q.uint32ArrayFrom)([0,4067132163,3778769143,324072436,3348797215,904991772,648144872,3570033899,2329499855,2024987596,1809983544,2575936315,1296289744,3207089363,2893594407,1578318884,274646895,3795141740,4049975192,51262619,3619967088,632279923,922689671,3298075524,2592579488,1760304291,2075979607,2312596564,1562183871,2943781820,3156637768,1313733451,549293790,3537243613,3246849577,871202090,3878099393,357341890,102525238,4101499445,2858735121,1477399826,1264559846,3107202533,1845379342,2677391885,2361733625,2125378298,820201905,3263744690,3520608582,598981189,4151959214,85089709,373468761,3827903834,3124367742,1213305469,1526817161,2842354314,2107672161,2412447074,2627466902,1861252501,1098587580,3004210879,2688576843,1378610760,2262928035,1955203488,1742404180,2511436119,3416409459,969524848,714683780,3639785095,205050476,4266873199,3976438427,526918040,1361435347,2739821008,2954799652,1114974503,2529119692,1691668175,2005155131,2247081528,3690758684,697762079,986182379,3366744552,476452099,3993867776,4250756596,255256311,1640403810,2477592673,2164122517,1922457750,2791048317,1412925310,1197962378,3037525897,3944729517,427051182,170179418,4165941337,746937522,3740196785,3451792453,1070968646,1905808397,2213795598,2426610938,1657317369,3053634322,1147748369,1463399397,2773627110,4215344322,153784257,444234805,3893493558,1021025245,3467647198,3722505002,797665321,2197175160,1889384571,1674398607,2443626636,1164749927,3070701412,2757221520,1446797203,137323447,4198817972,3910406976,461344835,3484808360,1037989803,781091935,3705997148,2460548119,1623424788,1939049696,2180517859,1429367560,2807687179,3020495871,1180866812,410100952,3927582683,4182430767,186734380,3756733383,763408580,1053836080,3434856499,2722870694,1344288421,1131464017,2971354706,1708204729,2545590714,2229949006,1988219213,680717673,3673779818,3383336350,1002577565,4010310262,493091189,238226049,4233660802,2987750089,1082061258,1395524158,2705686845,1972364758,2279892693,2494862625,1725896226,952904198,3399985413,3656866545,731699698,4283874585,222117402,510512622,3959836397,3280807620,837199303,582374963,3504198960,68661723,4135334616,3844915500,390545967,1230274059,3141532936,2825850620,1510247935,2395924756,2091215383,1878366691,2644384480,3553878443,565732008,854102364,3229815391,340358836,3861050807,4117890627,119113024,1493875044,2875275879,3090270611,1247431312,2660249211,1828433272,2141937292,2378227087,3811616794,291187481,34330861,4032846830,615137029,3603020806,3314634738,939183345,1776939221,2609017814,2295496738,2058945313,2926798794,1545135305,1330124605,3173225534,4084100981,17165430,307568514,3762199681,888469610,3332340585,3587147933,665062302,2042050490,2346497209,2559330125,1793573966,3190661285,1279665062,1595330642,2910671697]),g=S(26954);Object.defineProperty(N,"AwsCrc32c",{enumerable:!0,get:function(){return g.AwsCrc32c}})},76502:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.convertToBuffer=void 0;var M=S(82093),q=typeof Buffer<"u"&&Buffer.from?function(r){return Buffer.from(r,"utf8")}:M.fromUtf8;N.convertToBuffer=function Z(r){return r instanceof Uint8Array?r:"string"==typeof r?q(r):ArrayBuffer.isView(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(r)}},31500:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.uint32ArrayFrom=N.numToUint8=N.isEmptyData=N.convertToBuffer=void 0;var M=S(76502);Object.defineProperty(N,"convertToBuffer",{enumerable:!0,get:function(){return M.convertToBuffer}});var q=S(63814);Object.defineProperty(N,"isEmptyData",{enumerable:!0,get:function(){return q.isEmptyData}});var Z=S(10566);Object.defineProperty(N,"numToUint8",{enumerable:!0,get:function(){return Z.numToUint8}});var r=S(2700);Object.defineProperty(N,"uint32ArrayFrom",{enumerable:!0,get:function(){return r.uint32ArrayFrom}})},63814:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.isEmptyData=void 0,N.isEmptyData=function S(M){return"string"==typeof M?0===M.length:0===M.byteLength}},10566:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.numToUint8=void 0,N.numToUint8=function S(M){return new Uint8Array([(4278190080&M)>>24,(16711680&M)>>16,(65280&M)>>8,255&M])}},2700:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.uint32ArrayFrom=void 0,N.uint32ArrayFrom=function S(M){if(!Uint32Array.from){for(var q=new Uint32Array(M.length),Z=0;Z<M.length;)q[Z]=M[Z],Z+=1;return q}return Uint32Array.from(M)}},23141:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.EMPTY_DATA_SHA_1=N.SHA_1_HMAC_ALGO=N.SHA_1_HASH=void 0,N.SHA_1_HASH={name:"SHA-1"},N.SHA_1_HMAC_ALGO={name:"HMAC",hash:N.SHA_1_HASH},N.EMPTY_DATA_SHA_1=new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9])},71883:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.Sha1=void 0;var M=S(21283),q=S(32766),Z=S(7506),r=S(90776),_=S(45468),p=S(68538),g=function(){function y(E){if((0,Z.supportsWebCrypto)((0,_.locateWindow)()))this.hash=new q.Sha1(E);else{if(!(0,r.isMsWindow)((0,_.locateWindow)()))throw new Error("SHA1 not supported");this.hash=new M.Sha1(E)}}return y.prototype.update=function(E,O){this.hash.update((0,p.convertToBuffer)(E))},y.prototype.digest=function(){return this.hash.digest()},y.prototype.reset=function(){this.hash.reset()},y}();N.Sha1=g},21283:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.Sha1=void 0;var M=S(33626),q=S(23141),Z=S(82093),r=S(45468),_=function(){function y(E){this.secret=E,this.reset()}return y.prototype.update=function(E){var O=this;(0,M.isEmptyData)(E)||(this.operation=this.operation.then(function($){return $.onerror=function(){O.operation=Promise.reject(new Error("Error encountered updating hash"))},$.process(g(E)),$}),this.operation.catch(function(){}))},y.prototype.digest=function(){return this.operation.then(function(E){return new Promise(function(O,$){E.onerror=function(){$(new Error("Error encountered finalizing hash"))},E.oncomplete=function(){E.result&&O(new Uint8Array(E.result)),$(new Error("Error encountered finalizing hash"))},E.finish()})})},y.prototype.reset=function(){this.secret?(this.operation=function p(y){return new Promise(function(E,O){var $=(0,r.locateWindow)().msCrypto.subtle.importKey("raw",g(y),q.SHA_1_HMAC_ALGO,!1,["sign"]);$.oncomplete=function(){$.result&&E($.result),O(new Error("ImportKey completed without importing key."))},$.onerror=function(){O(new Error("ImportKey failed to import key."))}})}(this.secret).then(function(E){return(0,r.locateWindow)().msCrypto.subtle.sign(q.SHA_1_HMAC_ALGO,E)}),this.operation.catch(function(){})):this.operation=Promise.resolve((0,r.locateWindow)().msCrypto.subtle.digest("SHA-1"))},y}();function g(y){return"string"==typeof y?(0,Z.fromUtf8)(y):ArrayBuffer.isView(y)?new Uint8Array(y.buffer,y.byteOffset,y.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(y)}N.Sha1=_},6982:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.WebCryptoSha1=N.Ie11Sha1=void 0,S(30070).__exportStar(S(71883),N);var q=S(21283);Object.defineProperty(N,"Ie11Sha1",{enumerable:!0,get:function(){return q.Sha1}});var Z=S(32766);Object.defineProperty(N,"WebCryptoSha1",{enumerable:!0,get:function(){return Z.Sha1}})},33626:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.isEmptyData=void 0,N.isEmptyData=function S(M){return"string"==typeof M?0===M.length:0===M.byteLength}},32766:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.Sha1=void 0;var M=S(82093),q=S(33626),Z=S(23141),r=S(45468),_=function(){function g(y){this.toHash=new Uint8Array(0),void 0!==y&&(this.key=new Promise(function(E,O){(0,r.locateWindow)().crypto.subtle.importKey("raw",p(y),Z.SHA_1_HMAC_ALGO,!1,["sign"]).then(E,O)}),this.key.catch(function(){}))}return g.prototype.update=function(y){if(!(0,q.isEmptyData)(y)){var E=p(y),O=new Uint8Array(this.toHash.byteLength+E.byteLength);O.set(this.toHash,0),O.set(E,this.toHash.byteLength),this.toHash=O}},g.prototype.digest=function(){var y=this;return this.key?this.key.then(function(E){return(0,r.locateWindow)().crypto.subtle.sign(Z.SHA_1_HMAC_ALGO,E,y.toHash).then(function(O){return new Uint8Array(O)})}):(0,q.isEmptyData)(this.toHash)?Promise.resolve(Z.EMPTY_DATA_SHA_1):Promise.resolve().then(function(){return(0,r.locateWindow)().crypto.subtle.digest(Z.SHA_1_HASH,y.toHash)}).then(function(E){return Promise.resolve(new Uint8Array(E))})},g.prototype.reset=function(){this.toHash=new Uint8Array(0)},g}();function p(g){return"string"==typeof g?(0,M.fromUtf8)(g):ArrayBuffer.isView(g)?new Uint8Array(g.buffer,g.byteOffset,g.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(g)}N.Sha1=_},19189:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0})},12624:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0})},98732:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0})},68424:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0})},27705:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.isMsWindow=void 0;var S=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];N.isMsWindow=function q(Z){if(function M(Z){return"MSInputMethodContext"in Z&&"msCrypto"in Z}(Z)&&void 0!==Z.msCrypto.subtle){var r=Z.msCrypto,_=r.getRandomValues,p=r.subtle;return S.map(function(g){return p[g]}).concat(_).every(function(g){return"function"==typeof g})}return!1}},90776:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0});var M=S(30070);M.__exportStar(S(19189),N),M.__exportStar(S(12624),N),M.__exportStar(S(98732),N),M.__exportStar(S(68424),N),M.__exportStar(S(27705),N)},7506:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0}),S(30070).__exportStar(S(72398),N)},72398:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.supportsZeroByteGCM=N.supportsSubtleCrypto=N.supportsSecureRandom=N.supportsWebCrypto=void 0;var M=S(30070),q=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function r(g){return"object"==typeof g&&"object"==typeof g.crypto&&"function"==typeof g.crypto.getRandomValues}function _(g){return g&&q.every(function(y){return"function"==typeof g[y]})}N.supportsWebCrypto=function Z(g){return!(!r(g)||"object"!=typeof g.crypto.subtle)&&_(g.crypto.subtle)},N.supportsSecureRandom=r,N.supportsSubtleCrypto=_,N.supportsZeroByteGCM=function p(g){return M.__awaiter(this,void 0,void 0,function(){var y;return M.__generator(this,function($){switch($.label){case 0:if(!_(g))return[2,!1];$.label=1;case 1:return $.trys.push([1,4,,5]),[4,g.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return y=$.sent(),[4,g.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},y,new Uint8Array(0))];case 3:return[2,16===$.sent().byteLength];case 4:return $.sent(),[2,!1];case 5:return[2]}})})}},55620:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.convertToBuffer=void 0;var M=S(82093),q=typeof Buffer<"u"&&Buffer.from?function(r){return Buffer.from(r,"utf8")}:M.fromUtf8;N.convertToBuffer=function Z(r){return r instanceof Uint8Array?r:"string"==typeof r?q(r):ArrayBuffer.isView(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(r)}},68538:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.uint32ArrayFrom=N.numToUint8=N.isEmptyData=N.convertToBuffer=void 0;var M=S(55620);Object.defineProperty(N,"convertToBuffer",{enumerable:!0,get:function(){return M.convertToBuffer}});var q=S(63015);Object.defineProperty(N,"isEmptyData",{enumerable:!0,get:function(){return q.isEmptyData}});var Z=S(11487);Object.defineProperty(N,"numToUint8",{enumerable:!0,get:function(){return Z.numToUint8}});var r=S(47523);Object.defineProperty(N,"uint32ArrayFrom",{enumerable:!0,get:function(){return r.uint32ArrayFrom}})},63015:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.isEmptyData=void 0,N.isEmptyData=function S(M){return"string"==typeof M?0===M.length:0===M.byteLength}},11487:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.numToUint8=void 0,N.numToUint8=function S(M){return new Uint8Array([(4278190080&M)>>24,(16711680&M)>>16,(65280&M)>>8,255&M])}},47523:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.uint32ArrayFrom=void 0,N.uint32ArrayFrom=function S(M){if(!Uint32Array.from){for(var q=new Uint32Array(M.length),Z=0;Z<M.length;)q[Z]=M[Z],Z+=1;return q}return Uint32Array.from(M)}},25337:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.RawSha256=void 0;var M=S(99271),q=function(){function Z(){this.state=Int32Array.from(M.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return Z.prototype.update=function(r){if(this.finished)throw new Error("Attempted to update an already finished hash.");var _=0,p=r.byteLength;if(this.bytesHashed+=p,8*this.bytesHashed>M.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;p>0;)this.buffer[this.bufferLength++]=r[_++],p--,this.bufferLength===M.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},Z.prototype.digest=function(){if(!this.finished){var r=8*this.bytesHashed,_=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),p=this.bufferLength;if(_.setUint8(this.bufferLength++,128),p%M.BLOCK_SIZE>=M.BLOCK_SIZE-8){for(var g=this.bufferLength;g<M.BLOCK_SIZE;g++)_.setUint8(g,0);this.hashBuffer(),this.bufferLength=0}for(g=this.bufferLength;g<M.BLOCK_SIZE-8;g++)_.setUint8(g,0);_.setUint32(M.BLOCK_SIZE-8,Math.floor(r/4294967296),!0),_.setUint32(M.BLOCK_SIZE-4,r),this.hashBuffer(),this.finished=!0}var y=new Uint8Array(M.DIGEST_LENGTH);for(g=0;g<8;g++)y[4*g]=this.state[g]>>>24&255,y[4*g+1]=this.state[g]>>>16&255,y[4*g+2]=this.state[g]>>>8&255,y[4*g+3]=this.state[g]>>>0&255;return y},Z.prototype.hashBuffer=function(){for(var _=this.buffer,p=this.state,g=p[0],y=p[1],E=p[2],O=p[3],$=p[4],v=p[5],b=p[6],V=p[7],G=0;G<M.BLOCK_SIZE;G++){if(G<16)this.temp[G]=(255&_[4*G])<<24|(255&_[4*G+1])<<16|(255&_[4*G+2])<<8|255&_[4*G+3];else{var H=this.temp[G-2];this.temp[G]=(((H>>>17|H<<15)^(H>>>19|H<<13)^H>>>10)+this.temp[G-7]|0)+((((H=this.temp[G-15])>>>7|H<<25)^(H>>>18|H<<14)^H>>>3)+this.temp[G-16]|0)}var W=((($>>>6|$<<26)^($>>>11|$<<21)^($>>>25|$<<7))+($&v^~$&b)|0)+(V+(M.KEY[G]+this.temp[G]|0)|0)|0,J=((g>>>2|g<<30)^(g>>>13|g<<19)^(g>>>22|g<<10))+(g&y^g&E^y&E)|0;V=b,b=v,v=$,$=O+W|0,O=E,E=y,y=g,g=W+J|0}p[0]+=g,p[1]+=y,p[2]+=E,p[3]+=O,p[4]+=$,p[5]+=v,p[6]+=b,p[7]+=V},Z}();N.RawSha256=q},99271:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.MAX_HASHABLE_LENGTH=N.INIT=N.KEY=N.DIGEST_LENGTH=N.BLOCK_SIZE=void 0,N.BLOCK_SIZE=64,N.DIGEST_LENGTH=32,N.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),N.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],N.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},89984:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0}),(0,S(99055).__exportStar)(S(37803),N)},37803:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.Sha256=void 0;var M=S(99055),q=S(99271),Z=S(25337),r=S(35272),_=function(){function g(y){if(this.hash=new Z.RawSha256,y){this.outer=new Z.RawSha256;var E=function p(g){var y=(0,r.convertToBuffer)(g);if(y.byteLength>q.BLOCK_SIZE){var E=new Z.RawSha256;E.update(y),y=E.digest()}var O=new Uint8Array(q.BLOCK_SIZE);return O.set(y),O}(y),O=new Uint8Array(q.BLOCK_SIZE);O.set(E);for(var $=0;$<q.BLOCK_SIZE;$++)E[$]^=54,O[$]^=92;for(this.hash.update(E),this.outer.update(O),$=0;$<E.byteLength;$++)E[$]=0}}return g.prototype.update=function(y){if(!(0,r.isEmptyData)(y)&&!this.error)try{this.hash.update((0,r.convertToBuffer)(y))}catch(E){this.error=E}},g.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},g.prototype.digest=function(){return(0,M.__awaiter)(this,void 0,void 0,function(){return(0,M.__generator)(this,function(y){return[2,this.digestSync()]})})},g}();N.Sha256=_},5448:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.convertToBuffer=void 0;var M=S(82093),q=typeof Buffer<"u"&&Buffer.from?function(r){return Buffer.from(r,"utf8")}:M.fromUtf8;N.convertToBuffer=function Z(r){return r instanceof Uint8Array?r:"string"==typeof r?q(r):ArrayBuffer.isView(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(r)}},35272:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.uint32ArrayFrom=N.numToUint8=N.isEmptyData=N.convertToBuffer=void 0;var M=S(5448);Object.defineProperty(N,"convertToBuffer",{enumerable:!0,get:function(){return M.convertToBuffer}});var q=S(40482);Object.defineProperty(N,"isEmptyData",{enumerable:!0,get:function(){return q.isEmptyData}});var Z=S(36203);Object.defineProperty(N,"numToUint8",{enumerable:!0,get:function(){return Z.numToUint8}});var r=S(65824);Object.defineProperty(N,"uint32ArrayFrom",{enumerable:!0,get:function(){return r.uint32ArrayFrom}})},40482:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.isEmptyData=void 0,N.isEmptyData=function S(M){return"string"==typeof M?0===M.length:0===M.byteLength}},36203:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.numToUint8=void 0,N.numToUint8=function S(M){return new Uint8Array([(4278190080&M)>>24,(16711680&M)>>16,(65280&M)>>8,255&M])}},65824:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.uint32ArrayFrom=void 0,N.uint32ArrayFrom=function S(M){if(!Array.from){for(var q=new Uint32Array(M.length);0<M.length;)q[0]=M[0];return q}return Uint32Array.from(M)}},24447:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0})},75694:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0})},73502:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0})},59710:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0})},53707:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.isMsWindow=void 0;var S=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];N.isMsWindow=function q(Z){if(function M(Z){return"MSInputMethodContext"in Z&&"msCrypto"in Z}(Z)&&void 0!==Z.msCrypto.subtle){var r=Z.msCrypto,_=r.getRandomValues,p=r.subtle;return S.map(function(g){return p[g]}).concat(_).every(function(g){return"function"==typeof g})}return!1}},59826:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0});var M=S(37994);M.__exportStar(S(24447),N),M.__exportStar(S(75694),N),M.__exportStar(S(73502),N),M.__exportStar(S(59710),N),M.__exportStar(S(53707),N)},84812:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.EMPTY_DATA_SHA_256=N.SHA_256_HMAC_ALGO=N.SHA_256_HASH=void 0,N.SHA_256_HASH={name:"SHA-256"},N.SHA_256_HMAC_ALGO={name:"HMAC",hash:N.SHA_256_HASH},N.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])},73911:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.Sha256=void 0;var M=S(15912),q=S(80532),Z=S(47408),r=S(98284),_=S(59826),p=S(45468),g=S(62862),y=function(){function E(O){this.hash=(0,r.supportsWebCrypto)((0,p.locateWindow)())?new q.Sha256(O):(0,_.isMsWindow)((0,p.locateWindow)())?new M.Sha256(O):new Z.Sha256(O)}return E.prototype.update=function(O,$){this.hash.update((0,g.convertToBuffer)(O))},E.prototype.digest=function(){return this.hash.digest()},E.prototype.reset=function(){this.hash.reset()},E}();N.Sha256=y},15912:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.Sha256=void 0;var M=S(37283),q=S(84812),Z=S(82093),r=S(45468),_=function(){function y(E){this.secret=E,this.reset()}return y.prototype.update=function(E){var O=this;(0,M.isEmptyData)(E)||(this.operation=this.operation.then(function($){return $.onerror=function(){O.operation=Promise.reject(new Error("Error encountered updating hash"))},$.process(g(E)),$}),this.operation.catch(function(){}))},y.prototype.digest=function(){return this.operation.then(function(E){return new Promise(function(O,$){E.onerror=function(){$(new Error("Error encountered finalizing hash"))},E.oncomplete=function(){E.result&&O(new Uint8Array(E.result)),$(new Error("Error encountered finalizing hash"))},E.finish()})})},y.prototype.reset=function(){this.secret?(this.operation=function p(y){return new Promise(function(E,O){var $=(0,r.locateWindow)().msCrypto.subtle.importKey("raw",g(y),q.SHA_256_HMAC_ALGO,!1,["sign"]);$.oncomplete=function(){$.result&&E($.result),O(new Error("ImportKey completed without importing key."))},$.onerror=function(){O(new Error("ImportKey failed to import key."))}})}(this.secret).then(function(E){return(0,r.locateWindow)().msCrypto.subtle.sign(q.SHA_256_HMAC_ALGO,E)}),this.operation.catch(function(){})):this.operation=Promise.resolve((0,r.locateWindow)().msCrypto.subtle.digest("SHA-256"))},y}();function g(y){return"string"==typeof y?(0,Z.fromUtf8)(y):ArrayBuffer.isView(y)?new Uint8Array(y.buffer,y.byteOffset,y.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(y)}N.Sha256=_},46513:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.WebCryptoSha256=N.Ie11Sha256=void 0,S(68952).__exportStar(S(73911),N);var q=S(15912);Object.defineProperty(N,"Ie11Sha256",{enumerable:!0,get:function(){return q.Sha256}});var Z=S(80532);Object.defineProperty(N,"WebCryptoSha256",{enumerable:!0,get:function(){return Z.Sha256}})},37283:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.isEmptyData=void 0,N.isEmptyData=function S(M){return"string"==typeof M?0===M.length:0===M.byteLength}},80532:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.Sha256=void 0;var M=S(62862),q=S(84812),Z=S(45468),r=function(){function _(p){this.toHash=new Uint8Array(0),this.secret=p,this.reset()}return _.prototype.update=function(p){if(!(0,M.isEmptyData)(p)){var g=(0,M.convertToBuffer)(p),y=new Uint8Array(this.toHash.byteLength+g.byteLength);y.set(this.toHash,0),y.set(g,this.toHash.byteLength),this.toHash=y}},_.prototype.digest=function(){var p=this;return this.key?this.key.then(function(g){return(0,Z.locateWindow)().crypto.subtle.sign(q.SHA_256_HMAC_ALGO,g,p.toHash).then(function(y){return new Uint8Array(y)})}):(0,M.isEmptyData)(this.toHash)?Promise.resolve(q.EMPTY_DATA_SHA_256):Promise.resolve().then(function(){return(0,Z.locateWindow)().crypto.subtle.digest(q.SHA_256_HASH,p.toHash)}).then(function(g){return Promise.resolve(new Uint8Array(g))})},_.prototype.reset=function(){var p=this;this.toHash=new Uint8Array(0),this.secret&&void 0!==this.secret&&(this.key=new Promise(function(g,y){(0,Z.locateWindow)().crypto.subtle.importKey("raw",(0,M.convertToBuffer)(p.secret),q.SHA_256_HMAC_ALGO,!1,["sign"]).then(g,y)}),this.key.catch(function(){}))},_}();N.Sha256=r},69700:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.RawSha256=void 0;var M=S(29359),q=function(){function Z(){this.state=Int32Array.from(M.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return Z.prototype.update=function(r){if(this.finished)throw new Error("Attempted to update an already finished hash.");var _=0,p=r.byteLength;if(this.bytesHashed+=p,8*this.bytesHashed>M.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;p>0;)this.buffer[this.bufferLength++]=r[_++],p--,this.bufferLength===M.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},Z.prototype.digest=function(){if(!this.finished){var r=8*this.bytesHashed,_=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),p=this.bufferLength;if(_.setUint8(this.bufferLength++,128),p%M.BLOCK_SIZE>=M.BLOCK_SIZE-8){for(var g=this.bufferLength;g<M.BLOCK_SIZE;g++)_.setUint8(g,0);this.hashBuffer(),this.bufferLength=0}for(g=this.bufferLength;g<M.BLOCK_SIZE-8;g++)_.setUint8(g,0);_.setUint32(M.BLOCK_SIZE-8,Math.floor(r/4294967296),!0),_.setUint32(M.BLOCK_SIZE-4,r),this.hashBuffer(),this.finished=!0}var y=new Uint8Array(M.DIGEST_LENGTH);for(g=0;g<8;g++)y[4*g]=this.state[g]>>>24&255,y[4*g+1]=this.state[g]>>>16&255,y[4*g+2]=this.state[g]>>>8&255,y[4*g+3]=this.state[g]>>>0&255;return y},Z.prototype.hashBuffer=function(){for(var _=this.buffer,p=this.state,g=p[0],y=p[1],E=p[2],O=p[3],$=p[4],v=p[5],b=p[6],V=p[7],G=0;G<M.BLOCK_SIZE;G++){if(G<16)this.temp[G]=(255&_[4*G])<<24|(255&_[4*G+1])<<16|(255&_[4*G+2])<<8|255&_[4*G+3];else{var H=this.temp[G-2];this.temp[G]=(((H>>>17|H<<15)^(H>>>19|H<<13)^H>>>10)+this.temp[G-7]|0)+((((H=this.temp[G-15])>>>7|H<<25)^(H>>>18|H<<14)^H>>>3)+this.temp[G-16]|0)}var W=((($>>>6|$<<26)^($>>>11|$<<21)^($>>>25|$<<7))+($&v^~$&b)|0)+(V+(M.KEY[G]+this.temp[G]|0)|0)|0,J=((g>>>2|g<<30)^(g>>>13|g<<19)^(g>>>22|g<<10))+(g&y^g&E^y&E)|0;V=b,b=v,v=$,$=O+W|0,O=E,E=y,y=g,g=W+J|0}p[0]+=g,p[1]+=y,p[2]+=E,p[3]+=O,p[4]+=$,p[5]+=v,p[6]+=b,p[7]+=V},Z}();N.RawSha256=q},29359:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.MAX_HASHABLE_LENGTH=N.INIT=N.KEY=N.DIGEST_LENGTH=N.BLOCK_SIZE=void 0,N.BLOCK_SIZE=64,N.DIGEST_LENGTH=32,N.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),N.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],N.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},47408:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0}),S(1707).__exportStar(S(4319),N)},4319:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.Sha256=void 0;var M=S(1707),q=S(29359),Z=S(69700),r=S(62862),_=function(){function g(y){this.secret=y,this.hash=new Z.RawSha256,this.reset()}return g.prototype.update=function(y){if(!(0,r.isEmptyData)(y)&&!this.error)try{this.hash.update((0,r.convertToBuffer)(y))}catch(E){this.error=E}},g.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},g.prototype.digest=function(){return M.__awaiter(this,void 0,void 0,function(){return M.__generator(this,function(y){return[2,this.digestSync()]})})},g.prototype.reset=function(){if(this.hash=new Z.RawSha256,this.secret){this.outer=new Z.RawSha256;var y=function p(g){var y=(0,r.convertToBuffer)(g);if(y.byteLength>q.BLOCK_SIZE){var E=new Z.RawSha256;E.update(y),y=E.digest()}var O=new Uint8Array(q.BLOCK_SIZE);return O.set(y),O}(this.secret),E=new Uint8Array(q.BLOCK_SIZE);E.set(y);for(var O=0;O<q.BLOCK_SIZE;O++)y[O]^=54,E[O]^=92;for(this.hash.update(y),this.outer.update(E),O=0;O<y.byteLength;O++)y[O]=0}},g}();N.Sha256=_},98284:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0}),S(59106).__exportStar(S(67906),N)},67906:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.supportsZeroByteGCM=N.supportsSubtleCrypto=N.supportsSecureRandom=N.supportsWebCrypto=void 0;var M=S(59106),q=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function r(g){return"object"==typeof g&&"object"==typeof g.crypto&&"function"==typeof g.crypto.getRandomValues}function _(g){return g&&q.every(function(y){return"function"==typeof g[y]})}N.supportsWebCrypto=function Z(g){return!(!r(g)||"object"!=typeof g.crypto.subtle)&&_(g.crypto.subtle)},N.supportsSecureRandom=r,N.supportsSubtleCrypto=_,N.supportsZeroByteGCM=function p(g){return M.__awaiter(this,void 0,void 0,function(){var y;return M.__generator(this,function($){switch($.label){case 0:if(!_(g))return[2,!1];$.label=1;case 1:return $.trys.push([1,4,,5]),[4,g.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return y=$.sent(),[4,g.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},y,new Uint8Array(0))];case 3:return[2,16===$.sent().byteLength];case 4:return $.sent(),[2,!1];case 5:return[2]}})})}},83376:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.convertToBuffer=void 0;var M=S(82093),q=typeof Buffer<"u"&&Buffer.from?function(r){return Buffer.from(r,"utf8")}:M.fromUtf8;N.convertToBuffer=function Z(r){return r instanceof Uint8Array?r:"string"==typeof r?q(r):ArrayBuffer.isView(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(r)}},62862:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.uint32ArrayFrom=N.numToUint8=N.isEmptyData=N.convertToBuffer=void 0;var M=S(83376);Object.defineProperty(N,"convertToBuffer",{enumerable:!0,get:function(){return M.convertToBuffer}});var q=S(48075);Object.defineProperty(N,"isEmptyData",{enumerable:!0,get:function(){return q.isEmptyData}});var Z=S(92127);Object.defineProperty(N,"numToUint8",{enumerable:!0,get:function(){return Z.numToUint8}});var r=S(92768);Object.defineProperty(N,"uint32ArrayFrom",{enumerable:!0,get:function(){return r.uint32ArrayFrom}})},48075:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.isEmptyData=void 0,N.isEmptyData=function S(M){return"string"==typeof M?0===M.length:0===M.byteLength}},92127:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.numToUint8=void 0,N.numToUint8=function S(M){return new Uint8Array([(4278190080&M)>>24,(16711680&M)>>16,(65280&M)>>8,255&M])}},92768:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.uint32ArrayFrom=void 0,N.uint32ArrayFrom=function S(M){if(!Uint32Array.from){for(var q=new Uint32Array(M.length),Z=0;Z<M.length;)q[Z]=M[Z],Z+=1;return q}return Uint32Array.from(M)}},11674:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0})},98645:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0})},82667:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0})},81693:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0})},49484:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.isMsWindow=void 0;var S=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];N.isMsWindow=function q(Z){if(function M(Z){return"MSInputMethodContext"in Z&&"msCrypto"in Z}(Z)&&void 0!==Z.msCrypto.subtle){var r=Z.msCrypto,_=r.getRandomValues,p=r.subtle;return S.map(function(g){return p[g]}).concat(_).every(function(g){return"function"==typeof g})}return!1}},76868:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0});var M=S(55298);M.__exportStar(S(11674),N),M.__exportStar(S(98645),N),M.__exportStar(S(82667),N),M.__exportStar(S(81693),N),M.__exportStar(S(49484),N)},21432:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.EMPTY_DATA_SHA_256=N.SHA_256_HMAC_ALGO=N.SHA_256_HASH=void 0,N.SHA_256_HASH={name:"SHA-256"},N.SHA_256_HMAC_ALGO={name:"HMAC",hash:N.SHA_256_HASH},N.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])},61602:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.Sha256=void 0;var M=S(51673),q=S(65717),Z=S(69985),r=S(39696),_=S(76868),p=S(45468),g=S(29248),y=function(){function E(O){this.hash=(0,r.supportsWebCrypto)((0,p.locateWindow)())?new q.Sha256(O):(0,_.isMsWindow)((0,p.locateWindow)())?new M.Sha256(O):new Z.Sha256(O)}return E.prototype.update=function(O,$){this.hash.update((0,g.convertToBuffer)(O))},E.prototype.digest=function(){return this.hash.digest()},E.prototype.reset=function(){this.hash.reset()},E}();N.Sha256=y},51673:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.Sha256=void 0;var M=S(67778),q=S(21432),Z=S(82093),r=S(45468),_=function(){function y(E){this.secret=E,this.reset()}return y.prototype.update=function(E){var O=this;(0,M.isEmptyData)(E)||(this.operation=this.operation.then(function($){return $.onerror=function(){O.operation=Promise.reject(new Error("Error encountered updating hash"))},$.process(g(E)),$}),this.operation.catch(function(){}))},y.prototype.digest=function(){return this.operation.then(function(E){return new Promise(function(O,$){E.onerror=function(){$(new Error("Error encountered finalizing hash"))},E.oncomplete=function(){E.result&&O(new Uint8Array(E.result)),$(new Error("Error encountered finalizing hash"))},E.finish()})})},y.prototype.reset=function(){this.secret?(this.operation=function p(y){return new Promise(function(E,O){var $=(0,r.locateWindow)().msCrypto.subtle.importKey("raw",g(y),q.SHA_256_HMAC_ALGO,!1,["sign"]);$.oncomplete=function(){$.result&&E($.result),O(new Error("ImportKey completed without importing key."))},$.onerror=function(){O(new Error("ImportKey failed to import key."))}})}(this.secret).then(function(E){return(0,r.locateWindow)().msCrypto.subtle.sign(q.SHA_256_HMAC_ALGO,E)}),this.operation.catch(function(){})):this.operation=Promise.resolve((0,r.locateWindow)().msCrypto.subtle.digest("SHA-256"))},y}();function g(y){return"string"==typeof y?(0,Z.fromUtf8)(y):ArrayBuffer.isView(y)?new Uint8Array(y.buffer,y.byteOffset,y.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(y)}N.Sha256=_},44907:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.WebCryptoSha256=N.Ie11Sha256=void 0,S(59904).__exportStar(S(61602),N);var q=S(51673);Object.defineProperty(N,"Ie11Sha256",{enumerable:!0,get:function(){return q.Sha256}});var Z=S(65717);Object.defineProperty(N,"WebCryptoSha256",{enumerable:!0,get:function(){return Z.Sha256}})},67778:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.isEmptyData=void 0,N.isEmptyData=function S(M){return"string"==typeof M?0===M.length:0===M.byteLength}},65717:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.Sha256=void 0;var M=S(29248),q=S(21432),Z=S(45468),r=function(){function _(p){this.toHash=new Uint8Array(0),this.secret=p,this.reset()}return _.prototype.update=function(p){if(!(0,M.isEmptyData)(p)){var g=(0,M.convertToBuffer)(p),y=new Uint8Array(this.toHash.byteLength+g.byteLength);y.set(this.toHash,0),y.set(g,this.toHash.byteLength),this.toHash=y}},_.prototype.digest=function(){var p=this;return this.key?this.key.then(function(g){return(0,Z.locateWindow)().crypto.subtle.sign(q.SHA_256_HMAC_ALGO,g,p.toHash).then(function(y){return new Uint8Array(y)})}):(0,M.isEmptyData)(this.toHash)?Promise.resolve(q.EMPTY_DATA_SHA_256):Promise.resolve().then(function(){return(0,Z.locateWindow)().crypto.subtle.digest(q.SHA_256_HASH,p.toHash)}).then(function(g){return Promise.resolve(new Uint8Array(g))})},_.prototype.reset=function(){var p=this;this.toHash=new Uint8Array(0),this.secret&&void 0!==this.secret&&(this.key=new Promise(function(g,y){(0,Z.locateWindow)().crypto.subtle.importKey("raw",(0,M.convertToBuffer)(p.secret),q.SHA_256_HMAC_ALGO,!1,["sign"]).then(g,y)}),this.key.catch(function(){}))},_}();N.Sha256=r},26643:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.RawSha256=void 0;var M=S(39210),q=function(){function Z(){this.state=Int32Array.from(M.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return Z.prototype.update=function(r){if(this.finished)throw new Error("Attempted to update an already finished hash.");var _=0,p=r.byteLength;if(this.bytesHashed+=p,8*this.bytesHashed>M.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;p>0;)this.buffer[this.bufferLength++]=r[_++],p--,this.bufferLength===M.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},Z.prototype.digest=function(){if(!this.finished){var r=8*this.bytesHashed,_=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),p=this.bufferLength;if(_.setUint8(this.bufferLength++,128),p%M.BLOCK_SIZE>=M.BLOCK_SIZE-8){for(var g=this.bufferLength;g<M.BLOCK_SIZE;g++)_.setUint8(g,0);this.hashBuffer(),this.bufferLength=0}for(g=this.bufferLength;g<M.BLOCK_SIZE-8;g++)_.setUint8(g,0);_.setUint32(M.BLOCK_SIZE-8,Math.floor(r/4294967296),!0),_.setUint32(M.BLOCK_SIZE-4,r),this.hashBuffer(),this.finished=!0}var y=new Uint8Array(M.DIGEST_LENGTH);for(g=0;g<8;g++)y[4*g]=this.state[g]>>>24&255,y[4*g+1]=this.state[g]>>>16&255,y[4*g+2]=this.state[g]>>>8&255,y[4*g+3]=this.state[g]>>>0&255;return y},Z.prototype.hashBuffer=function(){for(var _=this.buffer,p=this.state,g=p[0],y=p[1],E=p[2],O=p[3],$=p[4],v=p[5],b=p[6],V=p[7],G=0;G<M.BLOCK_SIZE;G++){if(G<16)this.temp[G]=(255&_[4*G])<<24|(255&_[4*G+1])<<16|(255&_[4*G+2])<<8|255&_[4*G+3];else{var H=this.temp[G-2];this.temp[G]=(((H>>>17|H<<15)^(H>>>19|H<<13)^H>>>10)+this.temp[G-7]|0)+((((H=this.temp[G-15])>>>7|H<<25)^(H>>>18|H<<14)^H>>>3)+this.temp[G-16]|0)}var W=((($>>>6|$<<26)^($>>>11|$<<21)^($>>>25|$<<7))+($&v^~$&b)|0)+(V+(M.KEY[G]+this.temp[G]|0)|0)|0,J=((g>>>2|g<<30)^(g>>>13|g<<19)^(g>>>22|g<<10))+(g&y^g&E^y&E)|0;V=b,b=v,v=$,$=O+W|0,O=E,E=y,y=g,g=W+J|0}p[0]+=g,p[1]+=y,p[2]+=E,p[3]+=O,p[4]+=$,p[5]+=v,p[6]+=b,p[7]+=V},Z}();N.RawSha256=q},39210:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.MAX_HASHABLE_LENGTH=N.INIT=N.KEY=N.DIGEST_LENGTH=N.BLOCK_SIZE=void 0,N.BLOCK_SIZE=64,N.DIGEST_LENGTH=32,N.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),N.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],N.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},69985:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0}),S(97716).__exportStar(S(80769),N)},80769:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.Sha256=void 0;var M=S(97716),q=S(39210),Z=S(26643),r=S(29248),_=function(){function g(y){this.secret=y,this.hash=new Z.RawSha256,this.reset()}return g.prototype.update=function(y){if(!(0,r.isEmptyData)(y)&&!this.error)try{this.hash.update((0,r.convertToBuffer)(y))}catch(E){this.error=E}},g.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},g.prototype.digest=function(){return M.__awaiter(this,void 0,void 0,function(){return M.__generator(this,function(y){return[2,this.digestSync()]})})},g.prototype.reset=function(){if(this.hash=new Z.RawSha256,this.secret){this.outer=new Z.RawSha256;var y=function p(g){var y=(0,r.convertToBuffer)(g);if(y.byteLength>q.BLOCK_SIZE){var E=new Z.RawSha256;E.update(y),y=E.digest()}var O=new Uint8Array(q.BLOCK_SIZE);return O.set(y),O}(this.secret),E=new Uint8Array(q.BLOCK_SIZE);E.set(y);for(var O=0;O<q.BLOCK_SIZE;O++)y[O]^=54,E[O]^=92;for(this.hash.update(y),this.outer.update(E),O=0;O<y.byteLength;O++)y[O]=0}},g}();N.Sha256=_},39696:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0}),S(76187).__exportStar(S(68022),N)},68022:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.supportsZeroByteGCM=N.supportsSubtleCrypto=N.supportsSecureRandom=N.supportsWebCrypto=void 0;var M=S(76187),q=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function r(g){return"object"==typeof g&&"object"==typeof g.crypto&&"function"==typeof g.crypto.getRandomValues}function _(g){return g&&q.every(function(y){return"function"==typeof g[y]})}N.supportsWebCrypto=function Z(g){return!(!r(g)||"object"!=typeof g.crypto.subtle)&&_(g.crypto.subtle)},N.supportsSecureRandom=r,N.supportsSubtleCrypto=_,N.supportsZeroByteGCM=function p(g){return M.__awaiter(this,void 0,void 0,function(){var y;return M.__generator(this,function($){switch($.label){case 0:if(!_(g))return[2,!1];$.label=1;case 1:return $.trys.push([1,4,,5]),[4,g.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return y=$.sent(),[4,g.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},y,new Uint8Array(0))];case 3:return[2,16===$.sent().byteLength];case 4:return $.sent(),[2,!1];case 5:return[2]}})})}},77388:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.convertToBuffer=void 0;var M=S(82093),q=typeof Buffer<"u"&&Buffer.from?function(r){return Buffer.from(r,"utf8")}:M.fromUtf8;N.convertToBuffer=function Z(r){return r instanceof Uint8Array?r:"string"==typeof r?q(r):ArrayBuffer.isView(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(r)}},29248:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.uint32ArrayFrom=N.numToUint8=N.isEmptyData=N.convertToBuffer=void 0;var M=S(77388);Object.defineProperty(N,"convertToBuffer",{enumerable:!0,get:function(){return M.convertToBuffer}});var q=S(72885);Object.defineProperty(N,"isEmptyData",{enumerable:!0,get:function(){return q.isEmptyData}});var Z=S(11817);Object.defineProperty(N,"numToUint8",{enumerable:!0,get:function(){return Z.numToUint8}});var r=S(87476);Object.defineProperty(N,"uint32ArrayFrom",{enumerable:!0,get:function(){return r.uint32ArrayFrom}})},72885:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.isEmptyData=void 0,N.isEmptyData=function S(M){return"string"==typeof M?0===M.length:0===M.byteLength}},11817:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.numToUint8=void 0,N.numToUint8=function S(M){return new Uint8Array([(4278190080&M)>>24,(16711680&M)>>16,(65280&M)>>8,255&M])}},87476:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.uint32ArrayFrom=void 0,N.uint32ArrayFrom=function S(M){if(!Uint32Array.from){for(var q=new Uint32Array(M.length),Z=0;Z<M.length;)q[Z]=M[Z],Z+=1;return q}return Uint32Array.from(M)}},53226:(pe,N,S)=>{var M=S(34572),q=S(11121),Z=S(12);pe.exports={XMLParser:q,XMLValidator:M,XMLBuilder:Z}},89628:(pe,N)=>{var S=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",q="["+S+"]["+S+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",Z=new RegExp("^"+q+"$");N.isExist=function(p){return typeof p<"u"},N.isEmptyObject=function(p){return 0===Object.keys(p).length},N.merge=function(p,g,y){if(g)for(var E=Object.keys(g),O=E.length,$=0;$<O;$++)p[E[$]]="strict"===y?[g[E[$]]]:g[E[$]]},N.getValue=function(p){return N.isExist(p)?p:""},N.isName=function(g){var y=Z.exec(g);return!(null===y||typeof y>"u")},N.getAllMatches=function(g,y){for(var E=[],O=y.exec(g);O;){var $=[];$.startIndex=y.lastIndex-O[0].length;for(var v=O.length,b=0;b<v;b++)$.push(O[b]);E.push($),O=y.exec(g)}return E},N.nameRegexp=q},34572:(pe,N,S)=>{var M=S(89628),q={allowBooleanAttributes:!1,unpairedTags:[]};function Z(z){return" "===z||"\t"===z||"\n"===z||"\r"===z}function r(z,W){for(var J=W;W<z.length;W++)if("?"==z[W]||" "==z[W]){var se=z.substr(J,W-J);if(W>5&&"xml"===se)return b("InvalidXml","XML declaration allowed only at the start of the document.",H(z,W));if("?"==z[W]&&">"==z[W+1]){W++;break}continue}return W}function _(z,W){if(z.length>W+5&&"-"===z[W+1]&&"-"===z[W+2]){for(W+=3;W<z.length;W++)if("-"===z[W]&&"-"===z[W+1]&&">"===z[W+2]){W+=2;break}}else if(z.length>W+8&&"D"===z[W+1]&&"O"===z[W+2]&&"C"===z[W+3]&&"T"===z[W+4]&&"Y"===z[W+5]&&"P"===z[W+6]&&"E"===z[W+7]){var J=1;for(W+=8;W<z.length;W++)if("<"===z[W])J++;else if(">"===z[W]&&0==--J)break}else if(z.length>W+9&&"["===z[W+1]&&"C"===z[W+2]&&"D"===z[W+3]&&"A"===z[W+4]&&"T"===z[W+5]&&"A"===z[W+6]&&"["===z[W+7])for(W+=8;W<z.length;W++)if("]"===z[W]&&"]"===z[W+1]&&">"===z[W+2]){W+=2;break}return W}N.validate=function(z,W){W=Object.assign({},q,W);var J=[],se=!1,ve=!1;"\ufeff"===z[0]&&(z=z.substr(1));for(var xe=0;xe<z.length;xe++)if("<"===z[xe]&&"?"===z[xe+1]){if((xe=r(z,xe+=2)).err)return xe}else{if("<"!==z[xe]){if(Z(z[xe]))continue;return b("InvalidChar","char '"+z[xe]+"' is not expected.",H(z,xe))}var ge=xe;if("!"===z[++xe]){xe=_(z,xe);continue}var x=!1;"/"===z[xe]&&(x=!0,xe++);for(var D="";xe<z.length&&">"!==z[xe]&&" "!==z[xe]&&"\t"!==z[xe]&&"\n"!==z[xe]&&"\r"!==z[xe];xe++)D+=z[xe];if("/"===(D=D.trim())[D.length-1]&&(D=D.substring(0,D.length-1),xe--),!G(D))return b("InvalidTag",0===D.trim().length?"Invalid space after '<'.":"Tag '"+D+"' is an invalid name.",H(z,xe));var I=y(z,xe);if(!1===I)return b("InvalidAttr","Attributes for '"+D+"' have open quote.",H(z,xe));var j=I.value;if(xe=I.index,"/"===j[j.length-1]){var R=xe-j.length,Q=O(j=j.substring(0,j.length-1),W);if(!0!==Q)return b(Q.err.code,Q.err.msg,H(z,R+Q.err.line));se=!0}else if(x){if(!I.tagClosed)return b("InvalidTag","Closing tag '"+D+"' doesn't have proper closing.",H(z,xe));if(j.trim().length>0)return b("InvalidTag","Closing tag '"+D+"' can't have attributes or invalid starting.",H(z,ge));var ee=J.pop();if(D!==ee.tagName){var Re=H(z,ee.tagStartPos);return b("InvalidTag","Expected closing tag '"+ee.tagName+"' (opened in line "+Re.line+", col "+Re.col+") instead of closing tag '"+D+"'.",H(z,ge))}0==J.length&&(ve=!0)}else{var ne=O(j,W);if(!0!==ne)return b(ne.err.code,ne.err.msg,H(z,xe-j.length+ne.err.line));if(!0===ve)return b("InvalidXml","Multiple possible root nodes found.",H(z,xe));-1!==W.unpairedTags.indexOf(D)||J.push({tagName:D,tagStartPos:ge}),se=!0}for(xe++;xe<z.length;xe++)if("<"===z[xe]){if("!"===z[xe+1]){xe=_(z,++xe);continue}if("?"!==z[xe+1])break;if((xe=r(z,++xe)).err)return xe}else if("&"===z[xe]){var Fe=v(z,xe);if(-1==Fe)return b("InvalidChar","char '&' is not expected.",H(z,xe));xe=Fe}else if(!0===ve&&!Z(z[xe]))return b("InvalidXml","Extra text at the end",H(z,xe));"<"===z[xe]&&xe--}return se?1==J.length?b("InvalidTag","Unclosed tag '"+J[0].tagName+"'.",H(z,J[0].tagStartPos)):!(J.length>0)||b("InvalidXml","Invalid '"+JSON.stringify(J.map(function(rt){return rt.tagName}),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):b("InvalidXml","Start tag expected.",1)};var p='"',g="'";function y(z,W){for(var J="",se="",ve=!1;W<z.length;W++){if(z[W]===p||z[W]===g)""===se?se=z[W]:se!==z[W]||(se="");else if(">"===z[W]&&""===se){ve=!0;break}J+=z[W]}return""===se&&{value:J,index:W,tagClosed:ve}}var E=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function O(z,W){for(var J=M.getAllMatches(z,E),se={},ve=0;ve<J.length;ve++){if(0===J[ve][1].length)return b("InvalidAttr","Attribute '"+J[ve][2]+"' has no space in starting.",te(J[ve]));if(void 0!==J[ve][3]&&void 0===J[ve][4])return b("InvalidAttr","Attribute '"+J[ve][2]+"' is without value.",te(J[ve]));if(void 0===J[ve][3]&&!W.allowBooleanAttributes)return b("InvalidAttr","boolean attribute '"+J[ve][2]+"' is not allowed.",te(J[ve]));var xe=J[ve][2];if(!V(xe))return b("InvalidAttr","Attribute '"+xe+"' is an invalid name.",te(J[ve]));if(se.hasOwnProperty(xe))return b("InvalidAttr","Attribute '"+xe+"' is repeated.",te(J[ve]));se[xe]=1}return!0}function v(z,W){if(";"===z[++W])return-1;if("#"===z[W])return function $(z,W){var J=/\d/;for("x"===z[W]&&(W++,J=/[\da-fA-F]/);W<z.length;W++){if(";"===z[W])return W;if(!z[W].match(J))break}return-1}(z,++W);for(var J=0;W<z.length;W++,J++)if(!(z[W].match(/\w/)&&J<20)){if(";"===z[W])break;return-1}return W}function b(z,W,J){return{err:{code:z,msg:W,line:J.line||J,col:J.col}}}function V(z){return M.isName(z)}function G(z){return M.isName(z)}function H(z,W){var J=z.substring(0,W).split(/\r?\n/);return{line:J.length,col:J[J.length-1].length+1}}function te(z){return z.startIndex+z[1].length}},12:(pe,N,S)=>{var M=S(9482).default,q=S(98549),Z={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(O,$){return $},attributeValueProcessor:function(O,$){return $},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function r(E){this.options=Object.assign({},Z,E),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=y),this.processTextOrObjNode=_,this.options.format?(this.indentate=g,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}function _(E,O,$){var v=this.j2x(E,$+1);return void 0!==E[this.options.textNodeName]&&1===Object.keys(E).length?this.buildTextValNode(E[this.options.textNodeName],O,v.attrStr,$):this.buildObjectNode(v.val,O,v.attrStr,$)}function g(E){return this.options.indentBy.repeat(E)}function y(E){return!!E.startsWith(this.options.attributeNamePrefix)&&E.substr(this.attrPrefixLen)}r.prototype.build=function(E){return this.options.preserveOrder?q(E,this.options):(Array.isArray(E)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(E=M({},this.options.arrayNodeName,E)),this.j2x(E,0).val)},r.prototype.j2x=function(E,O){var $="",v="";for(var b in E)if(!(typeof E[b]>"u"))if(null===E[b])v+="?"===b[0]?this.indentate(O)+"<"+b+"?"+this.tagEndChar:this.indentate(O)+"<"+b+"/"+this.tagEndChar;else if(E[b]instanceof Date)v+=this.buildTextValNode(E[b],b,"",O);else if("object"!=typeof E[b]){var V=this.isAttribute(b);if(V)$+=this.buildAttrPairStr(V,""+E[b]);else if(b===this.options.textNodeName){var G=this.options.tagValueProcessor(b,""+E[b]);v+=this.replaceEntitiesValue(G)}else v+=this.buildTextValNode(E[b],b,"",O)}else if(Array.isArray(E[b])){for(var H=E[b].length,te="",z=0;z<H;z++){var W=E[b][z];typeof W>"u"||(null===W?v+="?"===b[0]?this.indentate(O)+"<"+b+"?"+this.tagEndChar:this.indentate(O)+"<"+b+"/"+this.tagEndChar:te+="object"==typeof W?this.options.oneListGroup?this.j2x(W,O+1).val:this.processTextOrObjNode(W,b,O):this.buildTextValNode(W,b,"",O))}this.options.oneListGroup&&(te=this.buildObjectNode(te,b,"",O)),v+=te}else if(this.options.attributesGroupName&&b===this.options.attributesGroupName)for(var J=Object.keys(E[b]),se=J.length,ve=0;ve<se;ve++)$+=this.buildAttrPairStr(J[ve],""+E[b][J[ve]]);else v+=this.processTextOrObjNode(E[b],b,O);return{attrStr:$,val:v}},r.prototype.buildAttrPairStr=function(E,O){return O=this.options.attributeValueProcessor(E,""+O),O=this.replaceEntitiesValue(O),this.options.suppressBooleanAttributes&&"true"===O?" "+E:" "+E+'="'+O+'"'},r.prototype.buildObjectNode=function(E,O,$,v){if(""===E)return"?"===O[0]?this.indentate(v)+"<"+O+$+"?"+this.tagEndChar:this.indentate(v)+"<"+O+$+this.closeTag(O)+this.tagEndChar;var b="</"+O+this.tagEndChar,V="";return"?"===O[0]&&(V="?",b=""),$&&-1===E.indexOf("<")?this.indentate(v)+"<"+O+$+V+">"+E+b:!1!==this.options.commentPropName&&O===this.options.commentPropName&&0===V.length?this.indentate(v)+"\x3c!--".concat(E,"--\x3e")+this.newLine:this.indentate(v)+"<"+O+$+V+this.tagEndChar+E+this.indentate(v)+b},r.prototype.closeTag=function(E){var O="";return-1!==this.options.unpairedTags.indexOf(E)?this.options.suppressUnpairedNode||(O="/"):O=this.options.suppressEmptyNode?"/":"></".concat(E),O},r.prototype.buildTextValNode=function(E,O,$,v){if(!1!==this.options.cdataPropName&&O===this.options.cdataPropName)return this.indentate(v)+"<![CDATA[".concat(E,"]]>")+this.newLine;if(!1!==this.options.commentPropName&&O===this.options.commentPropName)return this.indentate(v)+"\x3c!--".concat(E,"--\x3e")+this.newLine;if("?"===O[0])return this.indentate(v)+"<"+O+$+"?"+this.tagEndChar;var b=this.options.tagValueProcessor(O,E);return""===(b=this.replaceEntitiesValue(b))?this.indentate(v)+"<"+O+$+this.closeTag(O)+this.tagEndChar:this.indentate(v)+"<"+O+$+">"+b+"</"+O+this.tagEndChar},r.prototype.replaceEntitiesValue=function(E){if(E&&E.length>0&&this.options.processEntities)for(var O=0;O<this.options.entities.length;O++){var $=this.options.entities[O];E=E.replace($.regex,$.val)}return E},pe.exports=r},98549:pe=>{function M(p,g,y,E){for(var O="",$=!1,v=0;v<p.length;v++){var G,b=p[v],V=q(b);if(G=0===y.length?V:"".concat(y,".").concat(V),V!==g.textNodeName)if(V!==g.cdataPropName)if(V!==g.commentPropName)if("?"!==V[0]){var J=E;""!==J&&(J+=g.indentBy);var se=Z(b[":@"],g),ve=E+"<".concat(V).concat(se),xe=M(b[V],g,G,J);-1!==g.unpairedTags.indexOf(V)?O+=g.suppressUnpairedNode?ve+">":ve+"/>":xe&&0!==xe.length||!g.suppressEmptyNode?xe&&xe.endsWith(">")?O+=ve+">".concat(xe).concat(E,"</").concat(V,">"):(O+=ve+">",xe&&""!==E&&(xe.includes("/>")||xe.includes("</"))?O+=E+g.indentBy+xe+E:O+=xe,O+="</".concat(V,">")):O+=ve+"/>",$=!0}else{var te=Z(b[":@"],g),W=b[V][0][g.textNodeName];W=0!==W.length?" "+W:"",O+=("?xml"===V?"":E)+"<".concat(V).concat(W).concat(te,"?>"),$=!0}else O+=E+"\x3c!--".concat(b[V][0][g.textNodeName],"--\x3e"),$=!0;else $&&(O+=E),O+="<![CDATA[".concat(b[V][0][g.textNodeName],"]]>"),$=!1;else{var H=b[V];r(G,g)||(H=_(H=g.tagValueProcessor(V,H),g)),$&&(O+=E),O+=H,$=!1}}return O}function q(p){for(var g=Object.keys(p),y=0;y<g.length;y++){var E=g[y];if(":@"!==E)return E}}function Z(p,g){var y="";if(p&&!g.ignoreAttributes)for(var E in p){var O=g.attributeValueProcessor(E,p[E]);y+=!0===(O=_(O,g))&&g.suppressBooleanAttributes?" ".concat(E.substr(g.attributeNamePrefix.length)):" ".concat(E.substr(g.attributeNamePrefix.length),'="').concat(O,'"')}return y}function r(p,g){var y=(p=p.substr(0,p.length-g.textNodeName.length-1)).substr(p.lastIndexOf(".")+1);for(var E in g.stopNodes)if(g.stopNodes[E]===p||g.stopNodes[E]==="*."+y)return!0;return!1}function _(p,g){if(p&&p.length>0&&g.processEntities)for(var y=0;y<g.entities.length;y++){var E=g.entities[y];p=p.replace(E.regex,E.val)}return p}pe.exports=function S(p,g){var y="";return g.format&&g.indentBy.length>0&&(y="\n"),M(p,g,"",y)}},6781:(pe,N,S)=>{var M=S(3667).default;function Z($,v){for(var b="";v<$.length&&"'"!==$[v]&&'"'!==$[v];v++)b+=$[v];if(-1!==(b=b.trim()).indexOf(" "))throw new Error("External entites are not supported");for(var V=$[v++],G="";v<$.length&&$[v]!==V;v++)G+=$[v];return[b,G,v]}function r($,v){return"!"===$[v+1]&&"-"===$[v+2]&&"-"===$[v+3]}function _($,v){return"!"===$[v+1]&&"E"===$[v+2]&&"N"===$[v+3]&&"T"===$[v+4]&&"I"===$[v+5]&&"T"===$[v+6]&&"Y"===$[v+7]}function p($,v){return"!"===$[v+1]&&"E"===$[v+2]&&"L"===$[v+3]&&"E"===$[v+4]&&"M"===$[v+5]&&"E"===$[v+6]&&"N"===$[v+7]&&"T"===$[v+8]}function g($,v){return"!"===$[v+1]&&"A"===$[v+2]&&"T"===$[v+3]&&"T"===$[v+4]&&"L"===$[v+5]&&"I"===$[v+6]&&"S"===$[v+7]&&"T"===$[v+8]}function y($,v){return"!"===$[v+1]&&"N"===$[v+2]&&"O"===$[v+3]&&"T"===$[v+4]&&"A"===$[v+5]&&"T"===$[v+6]&&"I"===$[v+7]&&"O"===$[v+8]&&"N"===$[v+9]}var E="!?\\/[]$%{}^&*()<>|+";function O($){for(var v=0;v<19;v++){var b=E[v];if(-1!==$.indexOf(b))throw new Error("Invalid character ".concat(b," in entity name"))}return $}pe.exports=function q($,v){var b={};if("O"!==$[v+3]||"C"!==$[v+4]||"T"!==$[v+5]||"Y"!==$[v+6]||"P"!==$[v+7]||"E"!==$[v+8])throw new Error("Invalid Tag instead of DOCTYPE");v+=9;for(var V=1,G=!1,H=!1;v<$.length;v++)if("<"!==$[v]||H)if(">"===$[v]){if(H?"-"===$[v-1]&&"-"===$[v-2]&&(H=!1,V--):V--,0===V)break}else"["===$[v]&&(G=!0);else{if(G&&_($,v)){var z=Z($,(v+=7)+1),W=M(z,3);entityName=W[0],val=W[1],v=W[2],-1===val.indexOf("&")&&(b[O(entityName)]={regx:RegExp("&".concat(entityName,";"),"g"),val})}else if(G&&p($,v))v+=8;else if(G&&g($,v))v+=8;else if(G&&y($,v))v+=9;else{if(!r)throw new Error("Invalid DOCTYPE");H=!0}V++}if(0!==V)throw new Error("Unclosed DOCTYPE");return{entities:b,i:v}}},84570:(pe,N)=>{var S={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(Z,r){return r},attributeValueProcessor:function(Z,r){return r},stopNodes:[],alwaysCreateTextNode:!1,isArray:function(){return!1},commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(Z,r,_){return Z}};N.buildOptions=function(Z){return Object.assign({},S,Z)},N.defaultOptions=S},8705:(pe,N,S)=>{var M=S(9482).default,q=S(16996).default,Z=S(45664).default,r=S(89628),_=S(4300),p=S(6781),g=S(48372),E=("<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,r.nameRegexp),q(function x(D){Z(this,x),this.options=D,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xa2"},pound:{regex:/&(pound|#163);/g,val:"\xa3"},yen:{regex:/&(yen|#165);/g,val:"\xa5"},euro:{regex:/&(euro|#8364);/g,val:"\u20ac"},copyright:{regex:/&(copy|#169);/g,val:"\xa9"},reg:{regex:/&(reg|#174);/g,val:"\xae"},inr:{regex:/&(inr|#8377);/g,val:"\u20b9"}},this.addExternalEntities=O,this.parseXml=G,this.parseTextData=$,this.resolveNameSpace=v,this.buildAttributesMap=V,this.isItStopNode=W,this.replaceEntitiesValue=te,this.readStopNodeData=xe,this.saveTextToParentTag=z,this.addChild=H}));function O(x){for(var D=Object.keys(x),P=0;P<D.length;P++){var I=D[P];this.lastEntities[I]={regex:new RegExp("&"+I+";","g"),val:x[I]}}}function $(x,D,P,I,j,R,Q){if(void 0!==x&&(this.options.trimValues&&!I&&(x=x.trim()),x.length>0)){Q||(x=this.replaceEntitiesValue(x));var ee=this.options.tagValueProcessor(D,x,P,j,R);return null==ee?x:typeof ee!=typeof x||ee!==x?ee:this.options.trimValues||x.trim()===x?ge(x,this.options.parseTagValue,this.options.numberParseOptions):x}}function v(x){if(this.options.removeNSPrefix){var D=x.split(":"),P="/"===x.charAt(0)?"/":"";if("xmlns"===D[0])return"";2===D.length&&(x=P+D[1])}return x}var b=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])([\\s\\S]*?)\\3)?","gm");function V(x,D,P){if(!this.options.ignoreAttributes&&"string"==typeof x){for(var I=r.getAllMatches(x,b),j=I.length,R={},Q=0;Q<j;Q++){var ee=this.resolveNameSpace(I[Q][1]),Re=I[Q][4],ne=this.options.attributeNamePrefix+ee;if(ee.length)if(this.options.transformAttributeName&&(ne=this.options.transformAttributeName(ne)),"__proto__"===ne&&(ne="#__proto__"),void 0!==Re){this.options.trimValues&&(Re=Re.trim()),Re=this.replaceEntitiesValue(Re);var Fe=this.options.attributeValueProcessor(ee,Re,D);R[ne]=null==Fe?Re:typeof Fe!=typeof Re||Fe!==Re?Fe:ge(Re,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(R[ne]=!0)}if(!Object.keys(R).length)return;if(this.options.attributesGroupName){var rt={};return rt[this.options.attributesGroupName]=R,rt}return R}}var G=function(D){D=D.replace(/\r\n?/g,"\n");for(var P=new _("!xml"),I=P,j="",R="",Q=0;Q<D.length;Q++)if("<"===D[Q])if("/"===D[Q+1]){var Re=se(D,">",Q,"Closing Tag is not closed."),ne=D.substring(Q+2,Re).trim();if(this.options.removeNSPrefix){var Fe=ne.indexOf(":");-1!==Fe&&(ne=ne.substr(Fe+1))}this.options.transformTagName&&(ne=this.options.transformTagName(ne)),I&&(j=this.saveTextToParentTag(j,I,R));var rt=R.substring(R.lastIndexOf(".")+1);if(ne&&-1!==this.options.unpairedTags.indexOf(ne))throw new Error("Unpaired tag can not be used as closing tag: </".concat(ne,">"));var Te=0;rt&&-1!==this.options.unpairedTags.indexOf(rt)?(Te=R.lastIndexOf(".",R.lastIndexOf(".")-1),this.tagsNodeStack.pop()):Te=R.lastIndexOf("."),R=R.substring(0,Te),I=this.tagsNodeStack.pop(),j="",Q=Re}else if("?"===D[Q+1]){var tt=ve(D,Q,!1,"?>");if(!tt)throw new Error("Pi Tag is not closed.");if(j=this.saveTextToParentTag(j,I,R),!(this.options.ignoreDeclaration&&"?xml"===tt.tagName||this.options.ignorePiTags)){var Qe=new _(tt.tagName);Qe.add(this.options.textNodeName,""),tt.tagName!==tt.tagExp&&tt.attrExpPresent&&(Qe[":@"]=this.buildAttributesMap(tt.tagExp,R,tt.tagName)),this.addChild(I,Qe,R)}Q=tt.closeIndex+1}else if("!--"===D.substr(Q+1,3)){var vt=se(D,"--\x3e",Q+4,"Comment is not closed.");if(this.options.commentPropName){var et=D.substring(Q+4,vt-2);j=this.saveTextToParentTag(j,I,R),I.add(this.options.commentPropName,[M({},this.options.textNodeName,et)])}Q=vt}else if("!D"===D.substr(Q+1,2)){var $e=p(D,Q);this.docTypeEntities=$e.entities,Q=$e.i}else if("!["===D.substr(Q+1,2)){var it=se(D,"]]>",Q,"CDATA is not closed.")-2,de=D.substring(Q+9,it);if(j=this.saveTextToParentTag(j,I,R),this.options.cdataPropName)I.add(this.options.cdataPropName,[M({},this.options.textNodeName,de)]);else{var Y=this.parseTextData(de,I.tagname,R,!0,!1,!0);null==Y&&(Y=""),I.add(this.options.textNodeName,Y)}Q=it+2}else{var oe=ve(D,Q,this.options.removeNSPrefix),ke=oe.tagName,Be=oe.tagExp,fe=oe.attrExpPresent,ye=oe.closeIndex;if(this.options.transformTagName&&(ke=this.options.transformTagName(ke)),I&&j&&"!xml"!==I.tagname&&(j=this.saveTextToParentTag(j,I,R,!1)),I&&-1!==this.options.unpairedTags.indexOf(I.tagname)&&(I=this.tagsNodeStack.pop(),R=R.substring(0,R.lastIndexOf("."))),ke!==P.tagname&&(R+=R?"."+ke:ke),this.isItStopNode(this.options.stopNodes,R,ke)){var be="";if(Be.length>0&&Be.lastIndexOf("/")===Be.length-1)Q=oe.closeIndex;else if(-1!==this.options.unpairedTags.indexOf(ke))Q=oe.closeIndex;else{var le=this.readStopNodeData(D,ke,ye+1);if(!le)throw new Error("Unexpected end of ".concat(ke));Q=le.i,be=le.tagContent}var ce=new _(ke);ke!==Be&&fe&&(ce[":@"]=this.buildAttributesMap(Be,R,ke)),be&&(be=this.parseTextData(be,ke,R,!0,fe,!0,!0)),R=R.substr(0,R.lastIndexOf(".")),ce.add(this.options.textNodeName,be),this.addChild(I,ce,R)}else{if(Be.length>0&&Be.lastIndexOf("/")===Be.length-1){Be="/"===ke[ke.length-1]?ke=ke.substr(0,ke.length-1):Be.substr(0,Be.length-1),this.options.transformTagName&&(ke=this.options.transformTagName(ke));var Ie=new _(ke);ke!==Be&&fe&&(Ie[":@"]=this.buildAttributesMap(Be,R,ke)),this.addChild(I,Ie,R),R=R.substr(0,R.lastIndexOf("."))}else{var ot=new _(ke);this.tagsNodeStack.push(I),ke!==Be&&fe&&(ot[":@"]=this.buildAttributesMap(Be,R,ke)),this.addChild(I,ot,R),I=ot}j="",Q=ye}}else j+=D[Q];return P.child};function H(x,D,P){var I=this.options.updateTag(D.tagname,P,D[":@"]);!1===I||("string"==typeof I&&(D.tagname=I),x.addChild(D))}var te=function(D){if(this.options.processEntities){for(var P in this.docTypeEntities){var I=this.docTypeEntities[P];D=D.replace(I.regx,I.val)}for(var j in this.lastEntities){var R=this.lastEntities[j];D=D.replace(R.regex,R.val)}if(this.options.htmlEntities)for(var Q in this.htmlEntities){var ee=this.htmlEntities[Q];D=D.replace(ee.regex,ee.val)}D=D.replace(this.ampEntity.regex,this.ampEntity.val)}return D};function z(x,D,P,I){return x&&(void 0===I&&(I=0===Object.keys(D.child).length),void 0!==(x=this.parseTextData(x,D.tagname,P,!1,!!D[":@"]&&0!==Object.keys(D[":@"]).length,I))&&""!==x&&D.add(this.options.textNodeName,x),x=""),x}function W(x,D,P){var I="*."+P;for(var j in x){var R=x[j];if(I===R||D===R)return!0}return!1}function se(x,D,P,I){var j=x.indexOf(D,P);if(-1===j)throw new Error(I);return j+D.length-1}function ve(x,D,P){var j=function J(x,D){for(var I,P=arguments.length>2&&void 0!==arguments[2]?arguments[2]:">",j="",R=D;R<x.length;R++){var Q=x[R];if(I)Q===I&&(I="");else if('"'===Q||"'"===Q)I=Q;else if(Q===P[0]){if(!P[1])return{data:j,index:R};if(x[R+1]===P[1])return{data:j,index:R}}else"\t"===Q&&(Q=" ");j+=Q}}(x,D+1,arguments.length>3&&void 0!==arguments[3]?arguments[3]:">");if(j){var R=j.data,Q=j.index,ee=R.search(/\s/),Re=R,ne=!0;if(-1!==ee&&(Re=R.substr(0,ee).replace(/\s\s*$/,""),R=R.substr(ee+1)),P){var Fe=Re.indexOf(":");-1!==Fe&&(ne=(Re=Re.substr(Fe+1))!==j.data.substr(Fe+1))}return{tagName:Re,tagExp:R,closeIndex:Q,attrExpPresent:ne}}}function xe(x,D,P){for(var I=P,j=1;P<x.length;P++)if("<"===x[P])if("/"===x[P+1]){var R=se(x,">",P,"".concat(D," is not closed"));if(x.substring(P+2,R).trim()===D&&0==--j)return{tagContent:x.substring(I,P),i:R};P=R}else if("?"===x[P+1])P=se(x,"?>",P+1,"StopNode is not closed.");else if("!--"===x.substr(P+1,3))P=se(x,"--\x3e",P+3,"StopNode is not closed.");else if("!["===x.substr(P+1,2))P=se(x,"]]>",P,"StopNode is not closed.")-2;else{var Fe=ve(x,P,">");Fe&&((Fe&&Fe.tagName)===D&&"/"!==Fe.tagExp[Fe.tagExp.length-1]&&j++,P=Fe.closeIndex)}}function ge(x,D,P){if(D&&"string"==typeof x){var I=x.trim();return"true"===I||"false"!==I&&g(x,P)}return r.isExist(x)?x:""}pe.exports=E},11121:(pe,N,S)=>{var M=S(45664).default,q=S(16996).default,r=S(84570).buildOptions,_=S(8705),g=S(32609).prettify,y=S(34572);pe.exports=function(){"use strict";function O($){M(this,O),this.externalEntities={},this.options=r($)}return q(O,[{key:"parse",value:function(v,b){if("string"!=typeof v){if(!v.toString)throw new Error("XML data is accepted in String or Bytes[] form.");v=v.toString()}if(b){!0===b&&(b={});var V=y.validate(v,b);if(!0!==V)throw Error("".concat(V.err.msg,":").concat(V.err.line,":").concat(V.err.col))}var G=new _(this.options);G.addExternalEntities(this.externalEntities);var H=G.parseXml(v);return this.options.preserveOrder||void 0===H?H:g(H,this.options)}},{key:"addEntity",value:function(v,b){if(-1!==b.indexOf("&"))throw new Error("Entity value can't have '&'");if(-1!==v.indexOf("&")||-1!==v.indexOf(";"))throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if("&"===b)throw new Error("An entity with value '&' is not permitted");this.externalEntities[v]=b}}]),O}()},32609:(pe,N)=>{function M(_,p,g){for(var y,E={},O=0;O<_.length;O++){var b,$=_[O],v=q($);if(b=void 0===g?v:g+"."+v,v===p.textNodeName)void 0===y?y=$[v]:y+=""+$[v];else{if(void 0===v)continue;if($[v]){var V=M($[v],p,b),G=r(V,p);$[":@"]?Z(V,$[":@"],b,p):1!==Object.keys(V).length||void 0===V[p.textNodeName]||p.alwaysCreateTextNode?0===Object.keys(V).length&&(p.alwaysCreateTextNode?V[p.textNodeName]="":V=""):V=V[p.textNodeName],void 0!==E[v]&&E.hasOwnProperty(v)?(Array.isArray(E[v])||(E[v]=[E[v]]),E[v].push(V)):E[v]=p.isArray(v,b,G)?[V]:V}}}return"string"==typeof y?y.length>0&&(E[p.textNodeName]=y):void 0!==y&&(E[p.textNodeName]=y),E}function q(_){for(var p=Object.keys(_),g=0;g<p.length;g++){var y=p[g];if(":@"!==y)return y}}function Z(_,p,g,y){if(p)for(var E=Object.keys(p),O=E.length,$=0;$<O;$++){var v=E[$];_[v]=y.isArray(v,g+"."+v,!0,!0)?[p[v]]:p[v]}}function r(_,p){var g=p.textNodeName,y=Object.keys(_).length;return!(0!==y&&(1!==y||!_[g]&&"boolean"!=typeof _[g]&&0!==_[g]))}N.prettify=function S(_,p){return M(_,p)}},4300:(pe,N,S)=>{var M=S(9482).default,q=S(45664).default,Z=S(16996).default;pe.exports=function(){function _(p){q(this,_),this.tagname=p,this.child=[],this[":@"]={}}return Z(_,[{key:"add",value:function(g,y){"__proto__"===g&&(g="#__proto__"),this.child.push(M({},g,y))}},{key:"addChild",value:function(g){var y;"__proto__"===g.tagname&&(g.tagname="#__proto__"),g[":@"]&&Object.keys(g[":@"]).length>0?this.child.push((M(y={},g.tagname,g.child),M(y,":@",g[":@"]),y)):this.child.push(M({},g.tagname,g.child))}}]),_}()},97035:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.AwsCrc32=void 0;var M=S(48798),q=S(84594),Z=S(98407),r=function(){function _(){this.crc32=new Z.Crc32}return _.prototype.update=function(p){(0,q.isEmptyData)(p)||this.crc32.update((0,q.convertToBuffer)(p))},_.prototype.digest=function(){return M.__awaiter(this,void 0,void 0,function(){return M.__generator(this,function(p){return[2,(0,q.numToUint8)(this.crc32.digest())]})})},_.prototype.reset=function(){this.crc32=new Z.Crc32},_}();N.AwsCrc32=r},98407:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.AwsCrc32=N.Crc32=N.crc32=void 0;var M=S(48798),q=S(84594);N.crc32=function Z(y){return(new r).update(y).digest()};var r=function(){function y(){this.checksum=4294967295}return y.prototype.update=function(E){var O,$;try{for(var v=M.__values(E),b=v.next();!b.done;b=v.next())this.checksum=this.checksum>>>8^p[255&(this.checksum^b.value)]}catch(G){O={error:G}}finally{try{b&&!b.done&&($=v.return)&&$.call(v)}finally{if(O)throw O.error}}return this},y.prototype.digest=function(){return(4294967295^this.checksum)>>>0},y}();N.Crc32=r;var p=(0,q.uint32ArrayFrom)([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]),g=S(97035);Object.defineProperty(N,"AwsCrc32",{enumerable:!0,get:function(){return g.AwsCrc32}})},65552:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.convertToBuffer=void 0;var M=S(82093),q=typeof Buffer<"u"&&Buffer.from?function(r){return Buffer.from(r,"utf8")}:M.fromUtf8;N.convertToBuffer=function Z(r){return r instanceof Uint8Array?r:"string"==typeof r?q(r):ArrayBuffer.isView(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(r)}},84594:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.uint32ArrayFrom=N.numToUint8=N.isEmptyData=N.convertToBuffer=void 0;var M=S(65552);Object.defineProperty(N,"convertToBuffer",{enumerable:!0,get:function(){return M.convertToBuffer}});var q=S(34231);Object.defineProperty(N,"isEmptyData",{enumerable:!0,get:function(){return q.isEmptyData}});var Z=S(44735);Object.defineProperty(N,"numToUint8",{enumerable:!0,get:function(){return Z.numToUint8}});var r=S(43957);Object.defineProperty(N,"uint32ArrayFrom",{enumerable:!0,get:function(){return r.uint32ArrayFrom}})},34231:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.isEmptyData=void 0,N.isEmptyData=function S(M){return"string"==typeof M?0===M.length:0===M.byteLength}},44735:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.numToUint8=void 0,N.numToUint8=function S(M){return new Uint8Array([(4278190080&M)>>24,(16711680&M)>>16,(65280&M)>>8,255&M])}},43957:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.uint32ArrayFrom=void 0,N.uint32ArrayFrom=function S(M){if(!Uint32Array.from){for(var q=new Uint32Array(M.length),Z=0;Z<M.length;)q[Z]=M[Z],Z+=1;return q}return Uint32Array.from(M)}},67086:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.AwsCrc32=void 0;var M=S(62220),q=S(92670),Z=S(42562),r=function(){function _(){this.crc32=new Z.Crc32}return _.prototype.update=function(p){(0,q.isEmptyData)(p)||this.crc32.update((0,q.convertToBuffer)(p))},_.prototype.digest=function(){return M.__awaiter(this,void 0,void 0,function(){return M.__generator(this,function(p){return[2,(0,q.numToUint8)(this.crc32.digest())]})})},_.prototype.reset=function(){this.crc32=new Z.Crc32},_}();N.AwsCrc32=r},42562:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.AwsCrc32=N.Crc32=N.crc32=void 0;var M=S(62220),q=S(92670);N.crc32=function Z(y){return(new r).update(y).digest()};var r=function(){function y(){this.checksum=4294967295}return y.prototype.update=function(E){var O,$;try{for(var v=M.__values(E),b=v.next();!b.done;b=v.next())this.checksum=this.checksum>>>8^p[255&(this.checksum^b.value)]}catch(G){O={error:G}}finally{try{b&&!b.done&&($=v.return)&&$.call(v)}finally{if(O)throw O.error}}return this},y.prototype.digest=function(){return(4294967295^this.checksum)>>>0},y}();N.Crc32=r;var p=(0,q.uint32ArrayFrom)([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]),g=S(67086);Object.defineProperty(N,"AwsCrc32",{enumerable:!0,get:function(){return g.AwsCrc32}})},66137:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.convertToBuffer=void 0;var M=S(82093),q=typeof Buffer<"u"&&Buffer.from?function(r){return Buffer.from(r,"utf8")}:M.fromUtf8;N.convertToBuffer=function Z(r){return r instanceof Uint8Array?r:"string"==typeof r?q(r):ArrayBuffer.isView(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(r)}},92670:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.uint32ArrayFrom=N.numToUint8=N.isEmptyData=N.convertToBuffer=void 0;var M=S(66137);Object.defineProperty(N,"convertToBuffer",{enumerable:!0,get:function(){return M.convertToBuffer}});var q=S(45411);Object.defineProperty(N,"isEmptyData",{enumerable:!0,get:function(){return q.isEmptyData}});var Z=S(27186);Object.defineProperty(N,"numToUint8",{enumerable:!0,get:function(){return Z.numToUint8}});var r=S(43823);Object.defineProperty(N,"uint32ArrayFrom",{enumerable:!0,get:function(){return r.uint32ArrayFrom}})},45411:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.isEmptyData=void 0,N.isEmptyData=function S(M){return"string"==typeof M?0===M.length:0===M.byteLength}},27186:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.numToUint8=void 0,N.numToUint8=function S(M){return new Uint8Array([(4278190080&M)>>24,(16711680&M)>>16,(65280&M)>>8,255&M])}},43823:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.uint32ArrayFrom=void 0,N.uint32ArrayFrom=function S(M){if(!Uint32Array.from){for(var q=new Uint32Array(M.length),Z=0;Z<M.length;)q[Z]=M[Z],Z+=1;return q}return Uint32Array.from(M)}},45468:(pe,N,S)=>{S.r(N),S.d(N,{locateWindow:()=>q});var M={};function q(){return typeof window<"u"?window:typeof self<"u"?self:M}},82093:(pe,N,S)=>{S.r(N),S.d(N,{fromUtf8:()=>_,toUtf8:()=>p});var _=function(y){return"function"==typeof TextEncoder?function Z(g){return(new TextEncoder).encode(g)}(y):function(y){for(var E=[],O=0,$=y.length;O<$;O++){var v=y.charCodeAt(O);if(v<128)E.push(v);else if(v<2048)E.push(v>>6|192,63&v|128);else if(O+1<y.length&&55296==(64512&v)&&56320==(64512&y.charCodeAt(O+1))){var b=65536+((1023&v)<<10)+(1023&y.charCodeAt(++O));E.push(b>>18|240,b>>12&63|128,b>>6&63|128,63&b|128)}else E.push(v>>12|224,v>>6&63|128,63&v|128)}return Uint8Array.from(E)}(y)},p=function(y){return"function"==typeof TextDecoder?function r(g){return new TextDecoder("utf-8").decode(g)}(y):function(y){for(var E="",O=0,$=y.length;O<$;O++){var v=y[O];if(v<128)E+=String.fromCharCode(v);else if(192<=v&&v<224){var b=y[++O];E+=String.fromCharCode((31&v)<<6|63&b)}else if(240<=v&&v<365){var G="%"+[v,y[++O],y[++O],y[++O]].map(function(H){return H.toString(16)}).join("%");E+=decodeURIComponent(G)}else E+=String.fromCharCode((15&v)<<12|(63&y[++O])<<6|63&y[++O])}return E}(y)}},82173:(pe,N)=>{N.byteLength=function g(b){var V=p(b),H=V[1];return 3*(V[0]+H)/4-H},N.toByteArray=function E(b){var V,se,G=p(b),H=G[0],te=G[1],z=new q(function y(b,V,G){return 3*(V+G)/4-G}(0,H,te)),W=0,J=te>0?H-4:H;for(se=0;se<J;se+=4)V=M[b.charCodeAt(se)]<<18|M[b.charCodeAt(se+1)]<<12|M[b.charCodeAt(se+2)]<<6|M[b.charCodeAt(se+3)],z[W++]=V>>16&255,z[W++]=V>>8&255,z[W++]=255&V;return 2===te&&(V=M[b.charCodeAt(se)]<<2|M[b.charCodeAt(se+1)]>>4,z[W++]=255&V),1===te&&(V=M[b.charCodeAt(se)]<<10|M[b.charCodeAt(se+1)]<<4|M[b.charCodeAt(se+2)]>>2,z[W++]=V>>8&255,z[W++]=255&V),z},N.fromByteArray=function v(b){for(var V,G=b.length,H=G%3,te=[],z=16383,W=0,J=G-H;W<J;W+=z)te.push($(b,W,W+z>J?J:W+z));return 1===H?te.push(S[(V=b[G-1])>>2]+S[V<<4&63]+"=="):2===H&&te.push(S[(V=(b[G-2]<<8)+b[G-1])>>10]+S[V>>4&63]+S[V<<2&63]+"="),te.join("")};for(var S=[],M=[],q=typeof Uint8Array<"u"?Uint8Array:Array,Z="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0;r<64;++r)S[r]=Z[r],M[Z.charCodeAt(r)]=r;function p(b){var V=b.length;if(V%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var G=b.indexOf("=");return-1===G&&(G=V),[G,G===V?0:4-G%4]}function O(b){return S[b>>18&63]+S[b>>12&63]+S[b>>6&63]+S[63&b]}function $(b,V,G){for(var te=[],z=V;z<G;z+=3)te.push(O((b[z]<<16&16711680)+(b[z+1]<<8&65280)+(255&b[z+2])));return te.join("")}M["-".charCodeAt(0)]=62,M["_".charCodeAt(0)]=63},93962:function(pe){pe.exports=function(N){var S={};function M(q){if(S[q])return S[q].exports;var Z=S[q]={i:q,l:!1,exports:{}};return N[q].call(Z.exports,Z,Z.exports,M),Z.l=!0,Z.exports}return M.m=N,M.c=S,M.d=function(q,Z,r){M.o(q,Z)||Object.defineProperty(q,Z,{enumerable:!0,get:r})},M.r=function(q){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(q,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(q,"__esModule",{value:!0})},M.t=function(q,Z){if(1&Z&&(q=M(q)),8&Z||4&Z&&"object"==typeof q&&q&&q.__esModule)return q;var r=Object.create(null);if(M.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:q}),2&Z&&"string"!=typeof q)for(var _ in q)M.d(r,_,function(p){return q[p]}.bind(null,_));return r},M.n=function(q){var Z=q&&q.__esModule?function(){return q.default}:function(){return q};return M.d(Z,"a",Z),Z},M.o=function(q,Z){return Object.prototype.hasOwnProperty.call(q,Z)},M.p="",M(M.s=90)}({17:function(S,M,q){"use strict";M.__esModule=!0,M.default=void 0;var Z=q(18),r=function(){function _(){}return _.getFirstMatch=function(p,g){var y=g.match(p);return y&&y.length>0&&y[1]||""},_.getSecondMatch=function(p,g){var y=g.match(p);return y&&y.length>1&&y[2]||""},_.matchAndReturnConst=function(p,g,y){if(p.test(g))return y},_.getWindowsVersionName=function(p){switch(p){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},_.getMacOSVersionName=function(p){var g=p.split(".").splice(0,2).map(function(y){return parseInt(y,10)||0});if(g.push(0),10===g[0])switch(g[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},_.getAndroidVersionName=function(p){var g=p.split(".").splice(0,2).map(function(y){return parseInt(y,10)||0});if(g.push(0),!(1===g[0]&&g[1]<5))return 1===g[0]&&g[1]<6?"Cupcake":1===g[0]&&g[1]>=6?"Donut":2===g[0]&&g[1]<2?"Eclair":2===g[0]&&2===g[1]?"Froyo":2===g[0]&&g[1]>2?"Gingerbread":3===g[0]?"Honeycomb":4===g[0]&&g[1]<1?"Ice Cream Sandwich":4===g[0]&&g[1]<4?"Jelly Bean":4===g[0]&&g[1]>=4?"KitKat":5===g[0]?"Lollipop":6===g[0]?"Marshmallow":7===g[0]?"Nougat":8===g[0]?"Oreo":9===g[0]?"Pie":void 0},_.getVersionPrecision=function(p){return p.split(".").length},_.compareVersions=function(p,g,y){void 0===y&&(y=!1);var E=_.getVersionPrecision(p),O=_.getVersionPrecision(g),$=Math.max(E,O),v=0,b=_.map([p,g],function(V){var G=$-_.getVersionPrecision(V),H=V+new Array(G+1).join(".0");return _.map(H.split("."),function(te){return new Array(20-te.length).join("0")+te}).reverse()});for(y&&(v=$-Math.min(E,O)),$-=1;$>=v;){if(b[0][$]>b[1][$])return 1;if(b[0][$]===b[1][$]){if($===v)return 0;$-=1}else if(b[0][$]<b[1][$])return-1}},_.map=function(p,g){var y,E=[];if(Array.prototype.map)return Array.prototype.map.call(p,g);for(y=0;y<p.length;y+=1)E.push(g(p[y]));return E},_.find=function(p,g){var y,E;if(Array.prototype.find)return Array.prototype.find.call(p,g);for(y=0,E=p.length;y<E;y+=1){var O=p[y];if(g(O,y))return O}},_.assign=function(p){for(var g,y,E=p,O=arguments.length,$=new Array(O>1?O-1:0),v=1;v<O;v++)$[v-1]=arguments[v];if(Object.assign)return Object.assign.apply(Object,[p].concat($));var b=function(){var G=$[g];"object"==typeof G&&null!==G&&Object.keys(G).forEach(function(H){E[H]=G[H]})};for(g=0,y=$.length;g<y;g+=1)b();return p},_.getBrowserAlias=function(p){return Z.BROWSER_ALIASES_MAP[p]},_.getBrowserTypeByAlias=function(p){return Z.BROWSER_MAP[p]||""},_}();M.default=r,S.exports=M.default},18:function(S,M,q){"use strict";M.__esModule=!0,M.ENGINE_MAP=M.OS_MAP=M.PLATFORMS_MAP=M.BROWSER_MAP=M.BROWSER_ALIASES_MAP=void 0,M.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},M.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},M.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},M.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},M.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(S,M,q){"use strict";M.__esModule=!0,M.default=void 0;var Z,r=(Z=q(91))&&Z.__esModule?Z:{default:Z},_=q(18);function p(y,E){for(var O=0;O<E.length;O++){var $=E[O];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(y,$.key,$)}}var g=function(){function y(){}var E,$;return y.getParser=function(v,b){if(void 0===b&&(b=!1),"string"!=typeof v)throw new Error("UserAgent should be a string");return new r.default(v,b)},y.parse=function(v){return new r.default(v).getResult()},E=y,$=[{key:"BROWSER_MAP",get:function(){return _.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return _.ENGINE_MAP}},{key:"OS_MAP",get:function(){return _.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return _.PLATFORMS_MAP}}],null&&p(E.prototype,null),$&&p(E,$),y}();M.default=g,S.exports=M.default},91:function(S,M,q){"use strict";M.__esModule=!0,M.default=void 0;var Z=y(q(92)),r=y(q(93)),_=y(q(94)),p=y(q(95)),g=y(q(17));function y(O){return O&&O.__esModule?O:{default:O}}var E=function(){function O(v,b){if(void 0===b&&(b=!1),null==v||""===v)throw new Error("UserAgent parameter can't be empty");this._ua=v,this.parsedResult={},!0!==b&&this.parse()}var $=O.prototype;return $.getUA=function(){return this._ua},$.test=function(v){return v.test(this._ua)},$.parseBrowser=function(){var v=this;this.parsedResult.browser={};var b=g.default.find(Z.default,function(V){if("function"==typeof V.test)return V.test(v);if(V.test instanceof Array)return V.test.some(function(G){return v.test(G)});throw new Error("Browser's test function is not valid")});return b&&(this.parsedResult.browser=b.describe(this.getUA())),this.parsedResult.browser},$.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},$.getBrowserName=function(v){return v?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},$.getBrowserVersion=function(){return this.getBrowser().version},$.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},$.parseOS=function(){var v=this;this.parsedResult.os={};var b=g.default.find(r.default,function(V){if("function"==typeof V.test)return V.test(v);if(V.test instanceof Array)return V.test.some(function(G){return v.test(G)});throw new Error("Browser's test function is not valid")});return b&&(this.parsedResult.os=b.describe(this.getUA())),this.parsedResult.os},$.getOSName=function(v){var b=this.getOS().name;return v?String(b).toLowerCase()||"":b||""},$.getOSVersion=function(){return this.getOS().version},$.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},$.getPlatformType=function(v){void 0===v&&(v=!1);var b=this.getPlatform().type;return v?String(b).toLowerCase()||"":b||""},$.parsePlatform=function(){var v=this;this.parsedResult.platform={};var b=g.default.find(_.default,function(V){if("function"==typeof V.test)return V.test(v);if(V.test instanceof Array)return V.test.some(function(G){return v.test(G)});throw new Error("Browser's test function is not valid")});return b&&(this.parsedResult.platform=b.describe(this.getUA())),this.parsedResult.platform},$.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},$.getEngineName=function(v){return v?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},$.parseEngine=function(){var v=this;this.parsedResult.engine={};var b=g.default.find(p.default,function(V){if("function"==typeof V.test)return V.test(v);if(V.test instanceof Array)return V.test.some(function(G){return v.test(G)});throw new Error("Browser's test function is not valid")});return b&&(this.parsedResult.engine=b.describe(this.getUA())),this.parsedResult.engine},$.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},$.getResult=function(){return g.default.assign({},this.parsedResult)},$.satisfies=function(v){var b=this,V={},G=0,H={},te=0;if(Object.keys(v).forEach(function(x){var D=v[x];"string"==typeof D?(H[x]=D,te+=1):"object"==typeof D&&(V[x]=D,G+=1)}),G>0){var z=Object.keys(V),W=g.default.find(z,function(x){return b.isOS(x)});if(W){var J=this.satisfies(V[W]);if(void 0!==J)return J}var se=g.default.find(z,function(x){return b.isPlatform(x)});if(se){var ve=this.satisfies(V[se]);if(void 0!==ve)return ve}}if(te>0){var xe=Object.keys(H),ge=g.default.find(xe,function(x){return b.isBrowser(x,!0)});if(void 0!==ge)return this.compareVersion(H[ge])}},$.isBrowser=function(v,b){void 0===b&&(b=!1);var V=this.getBrowserName().toLowerCase(),G=v.toLowerCase(),H=g.default.getBrowserTypeByAlias(G);return b&&H&&(G=H.toLowerCase()),G===V},$.compareVersion=function(v){var b=[0],V=v,G=!1,H=this.getBrowserVersion();if("string"==typeof H)return">"===v[0]||"<"===v[0]?(V=v.substr(1),"="===v[1]?(G=!0,V=v.substr(2)):b=[],b.push(">"===v[0]?1:-1)):"="===v[0]?V=v.substr(1):"~"===v[0]&&(G=!0,V=v.substr(1)),b.indexOf(g.default.compareVersions(H,V,G))>-1},$.isOS=function(v){return this.getOSName(!0)===String(v).toLowerCase()},$.isPlatform=function(v){return this.getPlatformType(!0)===String(v).toLowerCase()},$.isEngine=function(v){return this.getEngineName(!0)===String(v).toLowerCase()},$.is=function(v,b){return void 0===b&&(b=!1),this.isBrowser(v,b)||this.isOS(v)||this.isPlatform(v)},$.some=function(v){var b=this;return void 0===v&&(v=[]),v.some(function(V){return b.is(V)})},O}();M.default=E,S.exports=M.default},92:function(S,M,q){"use strict";M.__esModule=!0,M.default=void 0;var Z,r=(Z=q(17))&&Z.__esModule?Z:{default:Z},_=/version\/(\d+(\.?_?\d+)+)/i;M.default=[{test:[/googlebot/i],describe:function(y){var E={name:"Googlebot"},O=r.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,y)||r.default.getFirstMatch(_,y);return O&&(E.version=O),E}},{test:[/opera/i],describe:function(y){var E={name:"Opera"},O=r.default.getFirstMatch(_,y)||r.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,y);return O&&(E.version=O),E}},{test:[/opr\/|opios/i],describe:function(y){var E={name:"Opera"},O=r.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,y)||r.default.getFirstMatch(_,y);return O&&(E.version=O),E}},{test:[/SamsungBrowser/i],describe:function(y){var E={name:"Samsung Internet for Android"},O=r.default.getFirstMatch(_,y)||r.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,y);return O&&(E.version=O),E}},{test:[/Whale/i],describe:function(y){var E={name:"NAVER Whale Browser"},O=r.default.getFirstMatch(_,y)||r.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,y);return O&&(E.version=O),E}},{test:[/MZBrowser/i],describe:function(y){var E={name:"MZ Browser"},O=r.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,y)||r.default.getFirstMatch(_,y);return O&&(E.version=O),E}},{test:[/focus/i],describe:function(y){var E={name:"Focus"},O=r.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,y)||r.default.getFirstMatch(_,y);return O&&(E.version=O),E}},{test:[/swing/i],describe:function(y){var E={name:"Swing"},O=r.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,y)||r.default.getFirstMatch(_,y);return O&&(E.version=O),E}},{test:[/coast/i],describe:function(y){var E={name:"Opera Coast"},O=r.default.getFirstMatch(_,y)||r.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,y);return O&&(E.version=O),E}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(y){var E={name:"Opera Touch"},O=r.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,y)||r.default.getFirstMatch(_,y);return O&&(E.version=O),E}},{test:[/yabrowser/i],describe:function(y){var E={name:"Yandex Browser"},O=r.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,y)||r.default.getFirstMatch(_,y);return O&&(E.version=O),E}},{test:[/ucbrowser/i],describe:function(y){var E={name:"UC Browser"},O=r.default.getFirstMatch(_,y)||r.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,y);return O&&(E.version=O),E}},{test:[/Maxthon|mxios/i],describe:function(y){var E={name:"Maxthon"},O=r.default.getFirstMatch(_,y)||r.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,y);return O&&(E.version=O),E}},{test:[/epiphany/i],describe:function(y){var E={name:"Epiphany"},O=r.default.getFirstMatch(_,y)||r.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,y);return O&&(E.version=O),E}},{test:[/puffin/i],describe:function(y){var E={name:"Puffin"},O=r.default.getFirstMatch(_,y)||r.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,y);return O&&(E.version=O),E}},{test:[/sleipnir/i],describe:function(y){var E={name:"Sleipnir"},O=r.default.getFirstMatch(_,y)||r.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,y);return O&&(E.version=O),E}},{test:[/k-meleon/i],describe:function(y){var E={name:"K-Meleon"},O=r.default.getFirstMatch(_,y)||r.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,y);return O&&(E.version=O),E}},{test:[/micromessenger/i],describe:function(y){var E={name:"WeChat"},O=r.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,y)||r.default.getFirstMatch(_,y);return O&&(E.version=O),E}},{test:[/qqbrowser/i],describe:function(y){var E={name:/qqbrowserlite/i.test(y)?"QQ Browser Lite":"QQ Browser"},O=r.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,y)||r.default.getFirstMatch(_,y);return O&&(E.version=O),E}},{test:[/msie|trident/i],describe:function(y){var E={name:"Internet Explorer"},O=r.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,y);return O&&(E.version=O),E}},{test:[/\sedg\//i],describe:function(y){var E={name:"Microsoft Edge"},O=r.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,y);return O&&(E.version=O),E}},{test:[/edg([ea]|ios)/i],describe:function(y){var E={name:"Microsoft Edge"},O=r.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,y);return O&&(E.version=O),E}},{test:[/vivaldi/i],describe:function(y){var E={name:"Vivaldi"},O=r.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,y);return O&&(E.version=O),E}},{test:[/seamonkey/i],describe:function(y){var E={name:"SeaMonkey"},O=r.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,y);return O&&(E.version=O),E}},{test:[/sailfish/i],describe:function(y){var E={name:"Sailfish"},O=r.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,y);return O&&(E.version=O),E}},{test:[/silk/i],describe:function(y){var E={name:"Amazon Silk"},O=r.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,y);return O&&(E.version=O),E}},{test:[/phantom/i],describe:function(y){var E={name:"PhantomJS"},O=r.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,y);return O&&(E.version=O),E}},{test:[/slimerjs/i],describe:function(y){var E={name:"SlimerJS"},O=r.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,y);return O&&(E.version=O),E}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(y){var E={name:"BlackBerry"},O=r.default.getFirstMatch(_,y)||r.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,y);return O&&(E.version=O),E}},{test:[/(web|hpw)[o0]s/i],describe:function(y){var E={name:"WebOS Browser"},O=r.default.getFirstMatch(_,y)||r.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,y);return O&&(E.version=O),E}},{test:[/bada/i],describe:function(y){var E={name:"Bada"},O=r.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,y);return O&&(E.version=O),E}},{test:[/tizen/i],describe:function(y){var E={name:"Tizen"},O=r.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,y)||r.default.getFirstMatch(_,y);return O&&(E.version=O),E}},{test:[/qupzilla/i],describe:function(y){var E={name:"QupZilla"},O=r.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,y)||r.default.getFirstMatch(_,y);return O&&(E.version=O),E}},{test:[/firefox|iceweasel|fxios/i],describe:function(y){var E={name:"Firefox"},O=r.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,y);return O&&(E.version=O),E}},{test:[/electron/i],describe:function(y){var E={name:"Electron"},O=r.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,y);return O&&(E.version=O),E}},{test:[/MiuiBrowser/i],describe:function(y){var E={name:"Miui"},O=r.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,y);return O&&(E.version=O),E}},{test:[/chromium/i],describe:function(y){var E={name:"Chromium"},O=r.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,y)||r.default.getFirstMatch(_,y);return O&&(E.version=O),E}},{test:[/chrome|crios|crmo/i],describe:function(y){var E={name:"Chrome"},O=r.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,y);return O&&(E.version=O),E}},{test:[/GSA/i],describe:function(y){var E={name:"Google Search"},O=r.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,y);return O&&(E.version=O),E}},{test:function(y){var E=!y.test(/like android/i),O=y.test(/android/i);return E&&O},describe:function(y){var E={name:"Android Browser"},O=r.default.getFirstMatch(_,y);return O&&(E.version=O),E}},{test:[/playstation 4/i],describe:function(y){var E={name:"PlayStation 4"},O=r.default.getFirstMatch(_,y);return O&&(E.version=O),E}},{test:[/safari|applewebkit/i],describe:function(y){var E={name:"Safari"},O=r.default.getFirstMatch(_,y);return O&&(E.version=O),E}},{test:[/.*/i],describe:function(y){var E=-1!==y.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:r.default.getFirstMatch(E,y),version:r.default.getSecondMatch(E,y)}}}],S.exports=M.default},93:function(S,M,q){"use strict";M.__esModule=!0,M.default=void 0;var Z,r=(Z=q(17))&&Z.__esModule?Z:{default:Z},_=q(18);M.default=[{test:[/Roku\/DVP/],describe:function(y){var E=r.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,y);return{name:_.OS_MAP.Roku,version:E}}},{test:[/windows phone/i],describe:function(y){var E=r.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,y);return{name:_.OS_MAP.WindowsPhone,version:E}}},{test:[/windows /i],describe:function(y){var E=r.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,y),O=r.default.getWindowsVersionName(E);return{name:_.OS_MAP.Windows,version:E,versionName:O}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(y){var E={name:_.OS_MAP.iOS},O=r.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,y);return O&&(E.version=O),E}},{test:[/macintosh/i],describe:function(y){var E=r.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,y).replace(/[_\s]/g,"."),O=r.default.getMacOSVersionName(E),$={name:_.OS_MAP.MacOS,version:E};return O&&($.versionName=O),$}},{test:[/(ipod|iphone|ipad)/i],describe:function(y){var E=r.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,y).replace(/[_\s]/g,".");return{name:_.OS_MAP.iOS,version:E}}},{test:function(y){var E=!y.test(/like android/i),O=y.test(/android/i);return E&&O},describe:function(y){var E=r.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,y),O=r.default.getAndroidVersionName(E),$={name:_.OS_MAP.Android,version:E};return O&&($.versionName=O),$}},{test:[/(web|hpw)[o0]s/i],describe:function(y){var E=r.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,y),O={name:_.OS_MAP.WebOS};return E&&E.length&&(O.version=E),O}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(y){var E=r.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,y)||r.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,y)||r.default.getFirstMatch(/\bbb(\d+)/i,y);return{name:_.OS_MAP.BlackBerry,version:E}}},{test:[/bada/i],describe:function(y){var E=r.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,y);return{name:_.OS_MAP.Bada,version:E}}},{test:[/tizen/i],describe:function(y){var E=r.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,y);return{name:_.OS_MAP.Tizen,version:E}}},{test:[/linux/i],describe:function(){return{name:_.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:_.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(y){var E=r.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,y);return{name:_.OS_MAP.PlayStation4,version:E}}}],S.exports=M.default},94:function(S,M,q){"use strict";M.__esModule=!0,M.default=void 0;var Z,r=(Z=q(17))&&Z.__esModule?Z:{default:Z},_=q(18);M.default=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(y){var E=r.default.getFirstMatch(/(can-l01)/i,y)&&"Nova",O={type:_.PLATFORMS_MAP.mobile,vendor:"Huawei"};return E&&(O.model=E),O}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:_.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:_.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:_.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:_.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:_.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:_.PLATFORMS_MAP.tablet}}},{test:function(y){var E=y.test(/ipod|iphone/i),O=y.test(/like (ipod|iphone)/i);return E&&!O},describe:function(y){var E=r.default.getFirstMatch(/(ipod|iphone)/i,y);return{type:_.PLATFORMS_MAP.mobile,vendor:"Apple",model:E}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:_.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:_.PLATFORMS_MAP.mobile}}},{test:function(y){return"blackberry"===y.getBrowserName(!0)},describe:function(){return{type:_.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(y){return"bada"===y.getBrowserName(!0)},describe:function(){return{type:_.PLATFORMS_MAP.mobile}}},{test:function(y){return"windows phone"===y.getBrowserName()},describe:function(){return{type:_.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(y){var E=Number(String(y.getOSVersion()).split(".")[0]);return"android"===y.getOSName(!0)&&E>=3},describe:function(){return{type:_.PLATFORMS_MAP.tablet}}},{test:function(y){return"android"===y.getOSName(!0)},describe:function(){return{type:_.PLATFORMS_MAP.mobile}}},{test:function(y){return"macos"===y.getOSName(!0)},describe:function(){return{type:_.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(y){return"windows"===y.getOSName(!0)},describe:function(){return{type:_.PLATFORMS_MAP.desktop}}},{test:function(y){return"linux"===y.getOSName(!0)},describe:function(){return{type:_.PLATFORMS_MAP.desktop}}},{test:function(y){return"playstation 4"===y.getOSName(!0)},describe:function(){return{type:_.PLATFORMS_MAP.tv}}},{test:function(y){return"roku"===y.getOSName(!0)},describe:function(){return{type:_.PLATFORMS_MAP.tv}}}],S.exports=M.default},95:function(S,M,q){"use strict";M.__esModule=!0,M.default=void 0;var Z,r=(Z=q(17))&&Z.__esModule?Z:{default:Z},_=q(18);M.default=[{test:function(y){return"microsoft edge"===y.getBrowserName(!0)},describe:function(y){if(/\sedg\//i.test(y))return{name:_.ENGINE_MAP.Blink};var E=r.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,y);return{name:_.ENGINE_MAP.EdgeHTML,version:E}}},{test:[/trident/i],describe:function(y){var E={name:_.ENGINE_MAP.Trident},O=r.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,y);return O&&(E.version=O),E}},{test:function(y){return y.test(/presto/i)},describe:function(y){var E={name:_.ENGINE_MAP.Presto},O=r.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,y);return O&&(E.version=O),E}},{test:function(y){var E=y.test(/gecko/i),O=y.test(/like gecko/i);return E&&!O},describe:function(y){var E={name:_.ENGINE_MAP.Gecko},O=r.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,y);return O&&(E.version=O),E}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:_.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(y){var E={name:_.ENGINE_MAP.WebKit},O=r.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,y);return O&&(E.version=O),E}}],S.exports=M.default}})},75979:pe=>{pe.exports=function M(q){return"[object String]"=={}.toString.call(q)?q.replace(N,".$1").replace(S,""):""};var N=/\[([^\[\]]+)\]/g,S=/^[.]*|[.]*$/g},13195:(pe,N,S)=>{var M=S(82173),q=S(54920),Z="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;N.Buffer=g,N.SlowBuffer=function te(be){return+be!=be&&(be=0),g.alloc(+be)},N.INSPECT_MAX_BYTES=50;var r=2147483647;function p(be){if(be>r)throw new RangeError('The value "'+be+'" is invalid for option "size"');var le=new Uint8Array(be);return Object.setPrototypeOf(le,g.prototype),le}function g(be,le,ce){if("number"==typeof be){if("string"==typeof le)throw new TypeError('The "string" argument must be of type string. Received type number');return $(be)}return y(be,le,ce)}function y(be,le,ce){if("string"==typeof be)return function v(be,le){if(("string"!=typeof le||""===le)&&(le="utf8"),!g.isEncoding(le))throw new TypeError("Unknown encoding: "+le);var ce=0|z(be,le),Ie=p(ce),ot=Ie.write(be,le);return ot!==ce&&(Ie=Ie.slice(0,ot)),Ie}(be,le);if(ArrayBuffer.isView(be))return b(be);if(null==be)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof be);if(fe(be,ArrayBuffer)||be&&fe(be.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(fe(be,SharedArrayBuffer)||be&&fe(be.buffer,SharedArrayBuffer)))return function V(be,le,ce){if(le<0||be.byteLength<le)throw new RangeError('"offset" is outside of buffer bounds');if(be.byteLength<le+(ce||0))throw new RangeError('"length" is outside of buffer bounds');var Ie;return Ie=void 0===le&&void 0===ce?new Uint8Array(be):void 0===ce?new Uint8Array(be,le):new Uint8Array(be,le,ce),Object.setPrototypeOf(Ie,g.prototype),Ie}(be,le,ce);if("number"==typeof be)throw new TypeError('The "value" argument must not be of type number. Received type number');var Ie=be.valueOf&&be.valueOf();if(null!=Ie&&Ie!==be)return g.from(Ie,le,ce);var ot=function G(be){if(g.isBuffer(be)){var le=0|H(be.length),ce=p(le);return 0===ce.length||be.copy(ce,0,0,le),ce}return void 0!==be.length?"number"!=typeof be.length||ye(be.length)?p(0):b(be):"Buffer"===be.type&&Array.isArray(be.data)?b(be.data):void 0}(be);if(ot)return ot;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof be[Symbol.toPrimitive])return g.from(be[Symbol.toPrimitive]("string"),le,ce);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof be)}function E(be){if("number"!=typeof be)throw new TypeError('"size" argument must be of type number');if(be<0)throw new RangeError('The value "'+be+'" is invalid for option "size"')}function $(be){return E(be),p(be<0?0:0|H(be))}function b(be){for(var le=be.length<0?0:0|H(be.length),ce=p(le),Ie=0;Ie<le;Ie+=1)ce[Ie]=255&be[Ie];return ce}function H(be){if(be>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return 0|be}function z(be,le){if(g.isBuffer(be))return be.length;if(ArrayBuffer.isView(be)||fe(be,ArrayBuffer))return be.byteLength;if("string"!=typeof be)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof be);var ce=be.length,Ie=arguments.length>2&&!0===arguments[2];if(!Ie&&0===ce)return 0;for(var ot=!1;;)switch(le){case"ascii":case"latin1":case"binary":return ce;case"utf8":case"utf-8":return de(be).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*ce;case"hex":return ce>>>1;case"base64":return ke(be).length;default:if(ot)return Ie?-1:de(be).length;le=(""+le).toLowerCase(),ot=!0}}function W(be,le,ce){var Ie=!1;if((void 0===le||le<0)&&(le=0),le>this.length||((void 0===ce||ce>this.length)&&(ce=this.length),ce<=0)||(ce>>>=0)<=(le>>>=0))return"";for(be||(be="utf8");;)switch(be){case"hex":return Fe(this,le,ce);case"utf8":case"utf-8":return R(this,le,ce);case"ascii":return Re(this,le,ce);case"latin1":case"binary":return ne(this,le,ce);case"base64":return j(this,le,ce);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return rt(this,le,ce);default:if(Ie)throw new TypeError("Unknown encoding: "+be);be=(be+"").toLowerCase(),Ie=!0}}function J(be,le,ce){var Ie=be[le];be[le]=be[ce],be[ce]=Ie}function se(be,le,ce,Ie,ot){if(0===be.length)return-1;if("string"==typeof ce?(Ie=ce,ce=0):ce>2147483647?ce=2147483647:ce<-2147483648&&(ce=-2147483648),ye(ce=+ce)&&(ce=ot?0:be.length-1),ce<0&&(ce=be.length+ce),ce>=be.length){if(ot)return-1;ce=be.length-1}else if(ce<0){if(!ot)return-1;ce=0}if("string"==typeof le&&(le=g.from(le,Ie)),g.isBuffer(le))return 0===le.length?-1:ve(be,le,ce,Ie,ot);if("number"==typeof le)return le&=255,"function"==typeof Uint8Array.prototype.indexOf?ot?Uint8Array.prototype.indexOf.call(be,le,ce):Uint8Array.prototype.lastIndexOf.call(be,le,ce):ve(be,[le],ce,Ie,ot);throw new TypeError("val must be string, number or Buffer")}function ve(be,le,ce,Ie,ot){var Xt,Tt=1,Nt=be.length,Gt=le.length;if(void 0!==Ie&&("ucs2"===(Ie=String(Ie).toLowerCase())||"ucs-2"===Ie||"utf16le"===Ie||"utf-16le"===Ie)){if(be.length<2||le.length<2)return-1;Tt=2,Nt/=2,Gt/=2,ce/=2}function un(Zr,ar){return 1===Tt?Zr[ar]:Zr.readUInt16BE(ar*Tt)}if(ot){var Kn=-1;for(Xt=ce;Xt<Nt;Xt++)if(un(be,Xt)===un(le,-1===Kn?0:Xt-Kn)){if(-1===Kn&&(Kn=Xt),Xt-Kn+1===Gt)return Kn*Tt}else-1!==Kn&&(Xt-=Xt-Kn),Kn=-1}else for(ce+Gt>Nt&&(ce=Nt-Gt),Xt=ce;Xt>=0;Xt--){for(var zn=!0,De=0;De<Gt;De++)if(un(be,Xt+De)!==un(le,De)){zn=!1;break}if(zn)return Xt}return-1}function xe(be,le,ce,Ie){ce=Number(ce)||0;var ot=be.length-ce;Ie?(Ie=Number(Ie))>ot&&(Ie=ot):Ie=ot;var Tt=le.length;Ie>Tt/2&&(Ie=Tt/2);for(var Nt=0;Nt<Ie;++Nt){var Gt=parseInt(le.substr(2*Nt,2),16);if(ye(Gt))return Nt;be[ce+Nt]=Gt}return Nt}function ge(be,le,ce,Ie){return Be(de(le,be.length-ce),be,ce,Ie)}function x(be,le,ce,Ie){return Be(function Y(be){for(var le=[],ce=0;ce<be.length;++ce)le.push(255&be.charCodeAt(ce));return le}(le),be,ce,Ie)}function D(be,le,ce,Ie){return x(be,le,ce,Ie)}function P(be,le,ce,Ie){return Be(ke(le),be,ce,Ie)}function I(be,le,ce,Ie){return Be(function oe(be,le){for(var ce,Ie,Tt=[],Nt=0;Nt<be.length&&!((le-=2)<0);++Nt)Ie=(ce=be.charCodeAt(Nt))>>8,Tt.push(ce%256),Tt.push(Ie);return Tt}(le,be.length-ce),be,ce,Ie)}function j(be,le,ce){return M.fromByteArray(0===le&&ce===be.length?be:be.slice(le,ce))}function R(be,le,ce){ce=Math.min(be.length,ce);for(var Ie=[],ot=le;ot<ce;){var un,Xt,Kn,zn,Tt=be[ot],Nt=null,Gt=Tt>239?4:Tt>223?3:Tt>191?2:1;if(ot+Gt<=ce)switch(Gt){case 1:Tt<128&&(Nt=Tt);break;case 2:128==(192&(un=be[ot+1]))&&(zn=(31&Tt)<<6|63&un)>127&&(Nt=zn);break;case 3:Xt=be[ot+2],128==(192&(un=be[ot+1]))&&128==(192&Xt)&&(zn=(15&Tt)<<12|(63&un)<<6|63&Xt)>2047&&(zn<55296||zn>57343)&&(Nt=zn);break;case 4:Xt=be[ot+2],Kn=be[ot+3],128==(192&(un=be[ot+1]))&&128==(192&Xt)&&128==(192&Kn)&&(zn=(15&Tt)<<18|(63&un)<<12|(63&Xt)<<6|63&Kn)>65535&&zn<1114112&&(Nt=zn)}null===Nt?(Nt=65533,Gt=1):Nt>65535&&(Ie.push((Nt-=65536)>>>10&1023|55296),Nt=56320|1023&Nt),Ie.push(Nt),ot+=Gt}return function ee(be){var le=be.length;if(le<=Q)return String.fromCharCode.apply(String,be);for(var ce="",Ie=0;Ie<le;)ce+=String.fromCharCode.apply(String,be.slice(Ie,Ie+=Q));return ce}(Ie)}N.kMaxLength=r,!(g.TYPED_ARRAY_SUPPORT=function _(){try{var be=new Uint8Array(1),le={foo:function(){return 42}};return Object.setPrototypeOf(le,Uint8Array.prototype),Object.setPrototypeOf(be,le),42===be.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(g.prototype,"parent",{enumerable:!0,get:function(){if(g.isBuffer(this))return this.buffer}}),Object.defineProperty(g.prototype,"offset",{enumerable:!0,get:function(){if(g.isBuffer(this))return this.byteOffset}}),g.poolSize=8192,g.from=function(be,le,ce){return y(be,le,ce)},Object.setPrototypeOf(g.prototype,Uint8Array.prototype),Object.setPrototypeOf(g,Uint8Array),g.alloc=function(be,le,ce){return function O(be,le,ce){return E(be),be<=0?p(be):void 0!==le?"string"==typeof ce?p(be).fill(le,ce):p(be).fill(le):p(be)}(be,le,ce)},g.allocUnsafe=function(be){return $(be)},g.allocUnsafeSlow=function(be){return $(be)},g.isBuffer=function(le){return null!=le&&!0===le._isBuffer&&le!==g.prototype},g.compare=function(le,ce){if(fe(le,Uint8Array)&&(le=g.from(le,le.offset,le.byteLength)),fe(ce,Uint8Array)&&(ce=g.from(ce,ce.offset,ce.byteLength)),!g.isBuffer(le)||!g.isBuffer(ce))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(le===ce)return 0;for(var Ie=le.length,ot=ce.length,Tt=0,Nt=Math.min(Ie,ot);Tt<Nt;++Tt)if(le[Tt]!==ce[Tt]){Ie=le[Tt],ot=ce[Tt];break}return Ie<ot?-1:ot<Ie?1:0},g.isEncoding=function(le){switch(String(le).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},g.concat=function(le,ce){if(!Array.isArray(le))throw new TypeError('"list" argument must be an Array of Buffers');if(0===le.length)return g.alloc(0);var Ie;if(void 0===ce)for(ce=0,Ie=0;Ie<le.length;++Ie)ce+=le[Ie].length;var ot=g.allocUnsafe(ce),Tt=0;for(Ie=0;Ie<le.length;++Ie){var Nt=le[Ie];if(fe(Nt,Uint8Array)&&(Nt=g.from(Nt)),!g.isBuffer(Nt))throw new TypeError('"list" argument must be an Array of Buffers');Nt.copy(ot,Tt),Tt+=Nt.length}return ot},g.byteLength=z,g.prototype._isBuffer=!0,g.prototype.swap16=function(){var le=this.length;if(le%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var ce=0;ce<le;ce+=2)J(this,ce,ce+1);return this},g.prototype.swap32=function(){var le=this.length;if(le%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var ce=0;ce<le;ce+=4)J(this,ce,ce+3),J(this,ce+1,ce+2);return this},g.prototype.swap64=function(){var le=this.length;if(le%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var ce=0;ce<le;ce+=8)J(this,ce,ce+7),J(this,ce+1,ce+6),J(this,ce+2,ce+5),J(this,ce+3,ce+4);return this},g.prototype.toLocaleString=g.prototype.toString=function(){var le=this.length;return 0===le?"":0===arguments.length?R(this,0,le):W.apply(this,arguments)},g.prototype.equals=function(le){if(!g.isBuffer(le))throw new TypeError("Argument must be a Buffer");return this===le||0===g.compare(this,le)},g.prototype.inspect=function(){var le="",ce=N.INSPECT_MAX_BYTES;return le=this.toString("hex",0,ce).replace(/(.{2})/g,"$1 ").trim(),this.length>ce&&(le+=" ... "),"<Buffer "+le+">"},Z&&(g.prototype[Z]=g.prototype.inspect),g.prototype.compare=function(le,ce,Ie,ot,Tt){if(fe(le,Uint8Array)&&(le=g.from(le,le.offset,le.byteLength)),!g.isBuffer(le))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof le);if(void 0===ce&&(ce=0),void 0===Ie&&(Ie=le?le.length:0),void 0===ot&&(ot=0),void 0===Tt&&(Tt=this.length),ce<0||Ie>le.length||ot<0||Tt>this.length)throw new RangeError("out of range index");if(ot>=Tt&&ce>=Ie)return 0;if(ot>=Tt)return-1;if(ce>=Ie)return 1;if(this===le)return 0;for(var Nt=(Tt>>>=0)-(ot>>>=0),Gt=(Ie>>>=0)-(ce>>>=0),un=Math.min(Nt,Gt),Xt=this.slice(ot,Tt),Kn=le.slice(ce,Ie),zn=0;zn<un;++zn)if(Xt[zn]!==Kn[zn]){Nt=Xt[zn],Gt=Kn[zn];break}return Nt<Gt?-1:Gt<Nt?1:0},g.prototype.includes=function(le,ce,Ie){return-1!==this.indexOf(le,ce,Ie)},g.prototype.indexOf=function(le,ce,Ie){return se(this,le,ce,Ie,!0)},g.prototype.lastIndexOf=function(le,ce,Ie){return se(this,le,ce,Ie,!1)},g.prototype.write=function(le,ce,Ie,ot){if(void 0===ce)ot="utf8",Ie=this.length,ce=0;else if(void 0===Ie&&"string"==typeof ce)ot=ce,Ie=this.length,ce=0;else{if(!isFinite(ce))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");ce>>>=0,isFinite(Ie)?(Ie>>>=0,void 0===ot&&(ot="utf8")):(ot=Ie,Ie=void 0)}var Tt=this.length-ce;if((void 0===Ie||Ie>Tt)&&(Ie=Tt),le.length>0&&(Ie<0||ce<0)||ce>this.length)throw new RangeError("Attempt to write outside buffer bounds");ot||(ot="utf8");for(var Nt=!1;;)switch(ot){case"hex":return xe(this,le,ce,Ie);case"utf8":case"utf-8":return ge(this,le,ce,Ie);case"ascii":return x(this,le,ce,Ie);case"latin1":case"binary":return D(this,le,ce,Ie);case"base64":return P(this,le,ce,Ie);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,le,ce,Ie);default:if(Nt)throw new TypeError("Unknown encoding: "+ot);ot=(""+ot).toLowerCase(),Nt=!0}},g.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Q=4096;function Re(be,le,ce){var Ie="";ce=Math.min(be.length,ce);for(var ot=le;ot<ce;++ot)Ie+=String.fromCharCode(127&be[ot]);return Ie}function ne(be,le,ce){var Ie="";ce=Math.min(be.length,ce);for(var ot=le;ot<ce;++ot)Ie+=String.fromCharCode(be[ot]);return Ie}function Fe(be,le,ce){var Ie=be.length;(!le||le<0)&&(le=0),(!ce||ce<0||ce>Ie)&&(ce=Ie);for(var ot="",Tt=le;Tt<ce;++Tt)ot+=ut[be[Tt]];return ot}function rt(be,le,ce){for(var Ie=be.slice(le,ce),ot="",Tt=0;Tt<Ie.length;Tt+=2)ot+=String.fromCharCode(Ie[Tt]+256*Ie[Tt+1]);return ot}function Te(be,le,ce){if(be%1!=0||be<0)throw new RangeError("offset is not uint");if(be+le>ce)throw new RangeError("Trying to access beyond buffer length")}function tt(be,le,ce,Ie,ot,Tt){if(!g.isBuffer(be))throw new TypeError('"buffer" argument must be a Buffer instance');if(le>ot||le<Tt)throw new RangeError('"value" argument is out of bounds');if(ce+Ie>be.length)throw new RangeError("Index out of range")}function Qe(be,le,ce,Ie,ot,Tt){if(ce+Ie>be.length)throw new RangeError("Index out of range");if(ce<0)throw new RangeError("Index out of range")}function vt(be,le,ce,Ie,ot){return le=+le,ce>>>=0,ot||Qe(be,0,ce,4),q.write(be,le,ce,Ie,23,4),ce+4}function et(be,le,ce,Ie,ot){return le=+le,ce>>>=0,ot||Qe(be,0,ce,8),q.write(be,le,ce,Ie,52,8),ce+8}g.prototype.slice=function(le,ce){var Ie=this.length;(le=~~le)<0?(le+=Ie)<0&&(le=0):le>Ie&&(le=Ie),(ce=void 0===ce?Ie:~~ce)<0?(ce+=Ie)<0&&(ce=0):ce>Ie&&(ce=Ie),ce<le&&(ce=le);var ot=this.subarray(le,ce);return Object.setPrototypeOf(ot,g.prototype),ot},g.prototype.readUIntLE=function(le,ce,Ie){le>>>=0,ce>>>=0,Ie||Te(le,ce,this.length);for(var ot=this[le],Tt=1,Nt=0;++Nt<ce&&(Tt*=256);)ot+=this[le+Nt]*Tt;return ot},g.prototype.readUIntBE=function(le,ce,Ie){le>>>=0,ce>>>=0,Ie||Te(le,ce,this.length);for(var ot=this[le+--ce],Tt=1;ce>0&&(Tt*=256);)ot+=this[le+--ce]*Tt;return ot},g.prototype.readUInt8=function(le,ce){return le>>>=0,ce||Te(le,1,this.length),this[le]},g.prototype.readUInt16LE=function(le,ce){return le>>>=0,ce||Te(le,2,this.length),this[le]|this[le+1]<<8},g.prototype.readUInt16BE=function(le,ce){return le>>>=0,ce||Te(le,2,this.length),this[le]<<8|this[le+1]},g.prototype.readUInt32LE=function(le,ce){return le>>>=0,ce||Te(le,4,this.length),(this[le]|this[le+1]<<8|this[le+2]<<16)+16777216*this[le+3]},g.prototype.readUInt32BE=function(le,ce){return le>>>=0,ce||Te(le,4,this.length),16777216*this[le]+(this[le+1]<<16|this[le+2]<<8|this[le+3])},g.prototype.readIntLE=function(le,ce,Ie){le>>>=0,ce>>>=0,Ie||Te(le,ce,this.length);for(var ot=this[le],Tt=1,Nt=0;++Nt<ce&&(Tt*=256);)ot+=this[le+Nt]*Tt;return ot>=(Tt*=128)&&(ot-=Math.pow(2,8*ce)),ot},g.prototype.readIntBE=function(le,ce,Ie){le>>>=0,ce>>>=0,Ie||Te(le,ce,this.length);for(var ot=ce,Tt=1,Nt=this[le+--ot];ot>0&&(Tt*=256);)Nt+=this[le+--ot]*Tt;return Nt>=(Tt*=128)&&(Nt-=Math.pow(2,8*ce)),Nt},g.prototype.readInt8=function(le,ce){return le>>>=0,ce||Te(le,1,this.length),128&this[le]?-1*(255-this[le]+1):this[le]},g.prototype.readInt16LE=function(le,ce){le>>>=0,ce||Te(le,2,this.length);var Ie=this[le]|this[le+1]<<8;return 32768&Ie?4294901760|Ie:Ie},g.prototype.readInt16BE=function(le,ce){le>>>=0,ce||Te(le,2,this.length);var Ie=this[le+1]|this[le]<<8;return 32768&Ie?4294901760|Ie:Ie},g.prototype.readInt32LE=function(le,ce){return le>>>=0,ce||Te(le,4,this.length),this[le]|this[le+1]<<8|this[le+2]<<16|this[le+3]<<24},g.prototype.readInt32BE=function(le,ce){return le>>>=0,ce||Te(le,4,this.length),this[le]<<24|this[le+1]<<16|this[le+2]<<8|this[le+3]},g.prototype.readFloatLE=function(le,ce){return le>>>=0,ce||Te(le,4,this.length),q.read(this,le,!0,23,4)},g.prototype.readFloatBE=function(le,ce){return le>>>=0,ce||Te(le,4,this.length),q.read(this,le,!1,23,4)},g.prototype.readDoubleLE=function(le,ce){return le>>>=0,ce||Te(le,8,this.length),q.read(this,le,!0,52,8)},g.prototype.readDoubleBE=function(le,ce){return le>>>=0,ce||Te(le,8,this.length),q.read(this,le,!1,52,8)},g.prototype.writeUIntLE=function(le,ce,Ie,ot){le=+le,ce>>>=0,Ie>>>=0,ot||tt(this,le,ce,Ie,Math.pow(2,8*Ie)-1,0);var Nt=1,Gt=0;for(this[ce]=255&le;++Gt<Ie&&(Nt*=256);)this[ce+Gt]=le/Nt&255;return ce+Ie},g.prototype.writeUIntBE=function(le,ce,Ie,ot){le=+le,ce>>>=0,Ie>>>=0,ot||tt(this,le,ce,Ie,Math.pow(2,8*Ie)-1,0);var Nt=Ie-1,Gt=1;for(this[ce+Nt]=255&le;--Nt>=0&&(Gt*=256);)this[ce+Nt]=le/Gt&255;return ce+Ie},g.prototype.writeUInt8=function(le,ce,Ie){return le=+le,ce>>>=0,Ie||tt(this,le,ce,1,255,0),this[ce]=255&le,ce+1},g.prototype.writeUInt16LE=function(le,ce,Ie){return le=+le,ce>>>=0,Ie||tt(this,le,ce,2,65535,0),this[ce]=255&le,this[ce+1]=le>>>8,ce+2},g.prototype.writeUInt16BE=function(le,ce,Ie){return le=+le,ce>>>=0,Ie||tt(this,le,ce,2,65535,0),this[ce]=le>>>8,this[ce+1]=255&le,ce+2},g.prototype.writeUInt32LE=function(le,ce,Ie){return le=+le,ce>>>=0,Ie||tt(this,le,ce,4,4294967295,0),this[ce+3]=le>>>24,this[ce+2]=le>>>16,this[ce+1]=le>>>8,this[ce]=255&le,ce+4},g.prototype.writeUInt32BE=function(le,ce,Ie){return le=+le,ce>>>=0,Ie||tt(this,le,ce,4,4294967295,0),this[ce]=le>>>24,this[ce+1]=le>>>16,this[ce+2]=le>>>8,this[ce+3]=255&le,ce+4},g.prototype.writeIntLE=function(le,ce,Ie,ot){if(le=+le,ce>>>=0,!ot){var Tt=Math.pow(2,8*Ie-1);tt(this,le,ce,Ie,Tt-1,-Tt)}var Nt=0,Gt=1,un=0;for(this[ce]=255&le;++Nt<Ie&&(Gt*=256);)le<0&&0===un&&0!==this[ce+Nt-1]&&(un=1),this[ce+Nt]=(le/Gt>>0)-un&255;return ce+Ie},g.prototype.writeIntBE=function(le,ce,Ie,ot){if(le=+le,ce>>>=0,!ot){var Tt=Math.pow(2,8*Ie-1);tt(this,le,ce,Ie,Tt-1,-Tt)}var Nt=Ie-1,Gt=1,un=0;for(this[ce+Nt]=255&le;--Nt>=0&&(Gt*=256);)le<0&&0===un&&0!==this[ce+Nt+1]&&(un=1),this[ce+Nt]=(le/Gt>>0)-un&255;return ce+Ie},g.prototype.writeInt8=function(le,ce,Ie){return le=+le,ce>>>=0,Ie||tt(this,le,ce,1,127,-128),le<0&&(le=255+le+1),this[ce]=255&le,ce+1},g.prototype.writeInt16LE=function(le,ce,Ie){return le=+le,ce>>>=0,Ie||tt(this,le,ce,2,32767,-32768),this[ce]=255&le,this[ce+1]=le>>>8,ce+2},g.prototype.writeInt16BE=function(le,ce,Ie){return le=+le,ce>>>=0,Ie||tt(this,le,ce,2,32767,-32768),this[ce]=le>>>8,this[ce+1]=255&le,ce+2},g.prototype.writeInt32LE=function(le,ce,Ie){return le=+le,ce>>>=0,Ie||tt(this,le,ce,4,2147483647,-2147483648),this[ce]=255&le,this[ce+1]=le>>>8,this[ce+2]=le>>>16,this[ce+3]=le>>>24,ce+4},g.prototype.writeInt32BE=function(le,ce,Ie){return le=+le,ce>>>=0,Ie||tt(this,le,ce,4,2147483647,-2147483648),le<0&&(le=4294967295+le+1),this[ce]=le>>>24,this[ce+1]=le>>>16,this[ce+2]=le>>>8,this[ce+3]=255&le,ce+4},g.prototype.writeFloatLE=function(le,ce,Ie){return vt(this,le,ce,!0,Ie)},g.prototype.writeFloatBE=function(le,ce,Ie){return vt(this,le,ce,!1,Ie)},g.prototype.writeDoubleLE=function(le,ce,Ie){return et(this,le,ce,!0,Ie)},g.prototype.writeDoubleBE=function(le,ce,Ie){return et(this,le,ce,!1,Ie)},g.prototype.copy=function(le,ce,Ie,ot){if(!g.isBuffer(le))throw new TypeError("argument should be a Buffer");if(Ie||(Ie=0),!ot&&0!==ot&&(ot=this.length),ce>=le.length&&(ce=le.length),ce||(ce=0),ot>0&&ot<Ie&&(ot=Ie),ot===Ie||0===le.length||0===this.length)return 0;if(ce<0)throw new RangeError("targetStart out of bounds");if(Ie<0||Ie>=this.length)throw new RangeError("Index out of range");if(ot<0)throw new RangeError("sourceEnd out of bounds");ot>this.length&&(ot=this.length),le.length-ce<ot-Ie&&(ot=le.length-ce+Ie);var Tt=ot-Ie;if(this===le&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(ce,Ie,ot);else if(this===le&&Ie<ce&&ce<ot)for(var Nt=Tt-1;Nt>=0;--Nt)le[Nt+ce]=this[Nt+Ie];else Uint8Array.prototype.set.call(le,this.subarray(Ie,ot),ce);return Tt},g.prototype.fill=function(le,ce,Ie,ot){if("string"==typeof le){if("string"==typeof ce?(ot=ce,ce=0,Ie=this.length):"string"==typeof Ie&&(ot=Ie,Ie=this.length),void 0!==ot&&"string"!=typeof ot)throw new TypeError("encoding must be a string");if("string"==typeof ot&&!g.isEncoding(ot))throw new TypeError("Unknown encoding: "+ot);if(1===le.length){var Tt=le.charCodeAt(0);("utf8"===ot&&Tt<128||"latin1"===ot)&&(le=Tt)}}else"number"==typeof le?le&=255:"boolean"==typeof le&&(le=Number(le));if(ce<0||this.length<ce||this.length<Ie)throw new RangeError("Out of range index");if(Ie<=ce)return this;var Nt;if(ce>>>=0,Ie=void 0===Ie?this.length:Ie>>>0,le||(le=0),"number"==typeof le)for(Nt=ce;Nt<Ie;++Nt)this[Nt]=le;else{var Gt=g.isBuffer(le)?le:g.from(le,ot),un=Gt.length;if(0===un)throw new TypeError('The value "'+le+'" is invalid for argument "value"');for(Nt=0;Nt<Ie-ce;++Nt)this[Nt+ce]=Gt[Nt%un]}return this};var $e=/[^+/0-9A-Za-z-_]/g;function de(be,le){le=le||1/0;for(var ce,Ie=be.length,ot=null,Tt=[],Nt=0;Nt<Ie;++Nt){if((ce=be.charCodeAt(Nt))>55295&&ce<57344){if(!ot){if(ce>56319){(le-=3)>-1&&Tt.push(239,191,189);continue}if(Nt+1===Ie){(le-=3)>-1&&Tt.push(239,191,189);continue}ot=ce;continue}if(ce<56320){(le-=3)>-1&&Tt.push(239,191,189),ot=ce;continue}ce=65536+(ot-55296<<10|ce-56320)}else ot&&(le-=3)>-1&&Tt.push(239,191,189);if(ot=null,ce<128){if((le-=1)<0)break;Tt.push(ce)}else if(ce<2048){if((le-=2)<0)break;Tt.push(ce>>6|192,63&ce|128)}else if(ce<65536){if((le-=3)<0)break;Tt.push(ce>>12|224,ce>>6&63|128,63&ce|128)}else{if(!(ce<1114112))throw new Error("Invalid code point");if((le-=4)<0)break;Tt.push(ce>>18|240,ce>>12&63|128,ce>>6&63|128,63&ce|128)}}return Tt}function ke(be){return M.toByteArray(function it(be){if((be=(be=be.split("=")[0]).trim().replace($e,"")).length<2)return"";for(;be.length%4!=0;)be+="=";return be}(be))}function Be(be,le,ce,Ie){for(var ot=0;ot<Ie&&!(ot+ce>=le.length||ot>=be.length);++ot)le[ot+ce]=be[ot];return ot}function fe(be,le){return be instanceof le||null!=be&&null!=be.constructor&&null!=be.constructor.name&&be.constructor.name===le.name}function ye(be){return be!=be}var ut=function(){for(var be="0123456789abcdef",le=new Array(256),ce=0;ce<16;++ce)for(var Ie=16*ce,ot=0;ot<16;++ot)le[Ie+ot]=be[ce]+be[ot];return le}()},4263:(pe,N,S)=>{var M=S(79903),q=S(3855),Z=q(M("String.prototype.indexOf"));pe.exports=function(_,p){var g=M(_,!!p);return"function"==typeof g&&Z(_,".prototype.")>-1?q(g):g}},3855:(pe,N,S)=>{var M=S(20224),q=S(79903),Z=q("%Function.prototype.apply%"),r=q("%Function.prototype.call%"),_=q("%Reflect.apply%",!0)||M.call(r,Z),p=q("%Object.getOwnPropertyDescriptor%",!0),g=q("%Object.defineProperty%",!0),y=q("%Math.max%");if(g)try{g({},"a",{value:1})}catch{g=null}pe.exports=function($){var v=_(M,r,arguments);return p&&g&&p(v,"length").configurable&&g(v,"length",{value:1+y(0,$.length-(arguments.length-1))}),v};var E=function(){return _(M,Z,arguments)};g?g(pe.exports,"apply",{value:E}):pe.exports.apply=E},75482:pe=>{var N=function(){"use strict";function S(O,$){return null!=$&&O instanceof $}var M,q,Z;try{M=Map}catch{M=function(){}}try{q=Set}catch{q=function(){}}try{Z=Promise}catch{Z=function(){}}function r(O,$,v,b,V){"object"==typeof $&&(v=$.depth,b=$.prototype,V=$.includeNonEnumerable,$=$.circular);var G=[],H=[],te=typeof Buffer<"u";return typeof $>"u"&&($=!0),typeof v>"u"&&(v=1/0),function z(W,J){if(null===W)return null;if(0===J)return W;var se,ve;if("object"!=typeof W)return W;if(S(W,M))se=new M;else if(S(W,q))se=new q;else if(S(W,Z))se=new Z(function(Q,ee){W.then(function(Re){Q(z(Re,J-1))},function(Re){ee(z(Re,J-1))})});else if(r.__isArray(W))se=[];else if(r.__isRegExp(W))se=new RegExp(W.source,E(W)),W.lastIndex&&(se.lastIndex=W.lastIndex);else if(r.__isDate(W))se=new Date(W.getTime());else{if(te&&Buffer.isBuffer(W))return se=Buffer.allocUnsafe?Buffer.allocUnsafe(W.length):new Buffer(W.length),W.copy(se),se;S(W,Error)?se=Object.create(W):typeof b>"u"?(ve=Object.getPrototypeOf(W),se=Object.create(ve)):(se=Object.create(b),ve=b)}if($){var xe=G.indexOf(W);if(-1!=xe)return H[xe];G.push(W),H.push(se)}for(var ge in S(W,M)&&W.forEach(function(Q,ee){var Re=z(ee,J-1),ne=z(Q,J-1);se.set(Re,ne)}),S(W,q)&&W.forEach(function(Q){var ee=z(Q,J-1);se.add(ee)}),W){var x;ve&&(x=Object.getOwnPropertyDescriptor(ve,ge)),(!x||null!=x.set)&&(se[ge]=z(W[ge],J-1))}if(Object.getOwnPropertySymbols){var D=Object.getOwnPropertySymbols(W);for(ge=0;ge<D.length;ge++){var P=D[ge];(I=Object.getOwnPropertyDescriptor(W,P))&&!I.enumerable&&!V||(se[P]=z(W[P],J-1),I.enumerable||Object.defineProperty(se,P,{enumerable:!1}))}}if(V){var j=Object.getOwnPropertyNames(W);for(ge=0;ge<j.length;ge++){var I,R=j[ge];(I=Object.getOwnPropertyDescriptor(W,R))&&I.enumerable||(se[R]=z(W[R],J-1),Object.defineProperty(se,R,{enumerable:!1}))}}return se}(O,v)}function _(O){return Object.prototype.toString.call(O)}function E(O){var $="";return O.global&&($+="g"),O.ignoreCase&&($+="i"),O.multiline&&($+="m"),$}return r.clonePrototype=function($){if(null===$)return null;var v=function(){};return v.prototype=$,new v},r.__objToStr=_,r.__isDate=function p(O){return"object"==typeof O&&"[object Date]"===_(O)},r.__isArray=function g(O){return"object"==typeof O&&"[object Array]"===_(O)},r.__isRegExp=function y(O){return"object"==typeof O&&"[object RegExp]"===_(O)},r.__getRegExpFlags=E,r}();pe.exports&&(pe.exports=N)},61562:function(pe,N){var S,q;void 0!==(q="function"==typeof(S=function(){return new function(){var r=this;r.init=function(){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")},String.prototype.repeat=function(z){return new Array(1+z).join(this)}},r.init();var y=/\/\*[\s\S]*?\*\//g,E=/([^\:]+):([^\;]*);/,O=/(\/\*[\s\S]*?\*\/)|([^\s\;\{\}][^\;\{\}]*(?=\{))|(\})|([^\;\{\}]+\;(?!\s*\*\/))/gim,G=function(W){return typeof W>"u"||0==W.length||null==W};r.toJSON=function(z,W){var J={children:{},attributes:{}},se=null,ve=0;for(typeof W>"u"&&(W={ordered:!1,comments:!1,stripComments:!1,split:!1}),W.stripComments&&(W.comments=!1,z=z.replace(y,""));null!=(se=O.exec(z));)if(!G(se[1])&&W.comments){var xe=se[1].trim();J[ve++]=xe}else if(G(se[2])){if(!G(se[3]))return J;if(!G(se[4])){var R=se[4].trim(),Q=E.exec(R);if(Q){var ge=Q[1].trim(),ee=Q[2].trim();if(W.ordered)(D={}).name=ge,D.value=ee,D.type="attr",J[ve++]=D;else if(ge in J.attributes){var Re=J.attributes[ge];Re instanceof Array||(J.attributes[ge]=[Re]),J.attributes[ge].push(ee)}else J.attributes[ge]=ee}else J[ve++]=R}}else{ge=se[2].trim();var x=r.toJSON(z,W);if(W.ordered){var D;(D={}).name=ge,D.value=x,D.type="rule",J[ve++]=D}else{if(W.split)var P=ge.split(",");else P=[ge];for(i in P){var I=P[i].trim();if(I in J.children)for(var j in x.attributes)J.children[I].attributes[j]=x.attributes[j];else J.children[I]=x}}}return J},r.toCSS=function(z,W,J){var se="";if(typeof W>"u"&&(W=0),typeof J>"u"&&(J=!1),z.attributes)for(i in z.attributes){var ve=z.attributes[i];if(ve instanceof Array)for(var xe=0;xe<ve.length;xe++)se+=H(i,ve[xe],W);else se+=H(i,ve,W)}if(z.children){var ge=!0;for(i in z.children)J&&!ge?se+="\n":ge=!1,se+=te(i,z.children[i],W)}return se};var H=function(W,J,se){return"\t".repeat(se)+W+": "+J+";\n"},te=function(W,J,se){var ve="\t".repeat(se)+W+" {\n";return(ve+=r.toCSS(J,se+1))+("\t".repeat(se)+"}\n")}}})?S.apply(N,[]):S)&&(pe.exports=q)},56929:function(pe,N){!function(S){"use strict";var M="function"==typeof Symbol?Symbol("curriable placeholder"):60881;function Z(p,g){var y="number"==typeof g?g:p.length,E=function q(p,g){return function y(E){return function(){var H,O=E.length,$=arguments,v=$.length,b=[],V=0,G=g;if(O)for(var te=-1;++te<O;)b[te]=H=E[te]===M&&V<v?$[V++]:E[te],H!==M&&--G;if(V<v)for(;V<v;)b[b.length]=H=$[V],H!==M&&V<g&&--G,++V;return G>0?y(b):p.apply(this,b)}}([])}(p,y);return E.arity=y,E.fn=p,E}function r(p){return p===M}function _(p){return p.fn}Z.__=M,Z.isPlaceholder=r,Z.uncurry=_,S.__=M,S.curry=Z,S.default=Z,S.isPlaceholder=r,S.uncurry=_,Object.defineProperty(S,"__esModule",{value:!0})}(N)},13974:(pe,N,S)=>{var M=Function.prototype.bind||S(59683);pe.exports=function q(Z,r){var _=function p(){return 0===arguments.length?p:arguments.length>1?Z.apply(r,arguments):M.call(Z,r,arguments[0])};return _.uncurry=function(){return Z},_}},42375:function(pe){pe.exports=function(){"use strict";var N="__proto__",S=function(b,V){return V},M=function(b,V){return V.map(function(G){return $(G)})},q=function(b,V){if(V&&V.hasOwnProperty("__proto__")){var G={};for(var H in V)H!==N&&(G[H]=V[H]);return G}return Object.assign({},V)},E={$push:function(b,V){return b.concat(V)},$append:function(b,V){return b.concat(V)},$prepend:function(b,V){return V.concat(b)},$replace:function(b,V){var G;return b=M(0,b),Object.keys(V).forEach(function(H){if((G=Number.parseInt(H))<0||Number.isNaN(G))throw Error("Invalid index for $replace: ".concat(H));b[G]=$.clone(V[H])}),b},$merge:function(b,V){var G;return b=b.slice(),Object.keys(V).forEach(function(H){if((G=Number.parseInt(H))<0||Number.isNaN(G))throw Error("Invalid index for $merge: ".concat(H));b[G]=$(b[G],V[H])}),b},$insert:function(b,V){var G;return b=M(0,b),Object.keys(V).forEach(function(H){if(G=Number.parseInt(H),Number.isNaN(G))throw Error("Invalid index for $insert: ".concat(H));b.splice(G,0,V[H])}),b},$set:M},O={oo:function(b,V){return b=q(0,b),Object.keys(V).forEach(function(G){G!==N&&(b[G]=$(b[G],V[G]))}),b},oa:q,ob:S,aa:function(b,V){return b=M(0,b),V.forEach(function(G,H){return b[H]=$(b[H],G)}),b},ao:function(b,V){return b=M(0,b),Object.keys(V).forEach(function(G){G!==N&&(b=G in E?E[G](b,V[G]):V)}),b},ab:S,bb:S,bo:q,ba:M};function $(v,b){if(void 0===b){if(null==v)return v;b=Array.isArray(v)?[]:"object"==typeof v?{}:v}else if(null===b)return null;var V=Array.isArray(v)?"a":"object"==typeof v?"o":"b",G=Array.isArray(b)?"a":"object"==typeof b?"o":"b";return O[V+G](v,b)}return $.clone=function(v){return $(v)},$.multi=function(v){for(var b=arguments.length,V=new Array(b>1?b-1:0),G=1;G<b;G++)V[G-1]=arguments[G];if(!V)return $(v);for(var H=0;H<V.length;H++)v=$(v,V[H]);return v},$}()},96607:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.default=N.nthElement=N.parentElements=void 0;var S=function(g){for(var y=[];g;){var E=g.nodeName.toLowerCase(),O=g.id?"#".concat(g.id):"",$="";g.className&&"string"==typeof g.className&&($=".".concat(g.className.replace(/\s+/g,".").replace(/[:*+?^${}()|[\]\\]/gi,"\\$&"))),y.unshift({element:g,selector:E+O+$}),g=g.parentNode!==document&&g.parentNode}return y};N.parentElements=S;var M=function(g){for(var y=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],E=g,O=1;null!==E.previousElementSibling;)(!y||E.previousElementSibling.nodeName===g.nodeName)&&O++,E=E.previousElementSibling;return O};N.nthElement=M;N.default=function(g){if(!(g instanceof HTMLElement))throw new Error("element must be of type `HTMLElement`.");return function(g){var y=[];return g.forEach(function(E){(function(g,y){var E=""===y?g:"".concat(y," > ").concat(g);return document.querySelectorAll(E).length>1})(E.selector,y.join(" > "))&&(E.selector+=":nth-of-type(".concat(M(E.element),")")),y.push(E.selector)}),y.join(" > ")}(S(g))}},21934:pe=>{var N=Object.prototype.toString;function Z(r){return r.replace(/\uffff/g,".")}pe.exports=function S(r){for(var _=-1,p=function q(r){for(var _=-1,p=r.length,g=[];++_<p;)r[_]&&g.push(r[_]);return g}(function M(r){return("[object String]"===N.call(r)?r:"").replace(/\\\./g,"\uffff")}(r).split(".")),g=p.length,y=[];++_<g;)y.push(Z(p[_]));return y}},83358:pe=>{var M,N="object"==typeof Reflect?Reflect:null,S=N&&"function"==typeof N.apply?N.apply:function(J,se,ve){return Function.prototype.apply.call(J,se,ve)};M=N&&"function"==typeof N.ownKeys?N.ownKeys:Object.getOwnPropertySymbols?function(J){return Object.getOwnPropertyNames(J).concat(Object.getOwnPropertySymbols(J))}:function(J){return Object.getOwnPropertyNames(J)};var Z=Number.isNaN||function(J){return J!=J};function r(){r.init.call(this)}pe.exports=r,pe.exports.once=function H(W,J){return new Promise(function(se,ve){function xe(x){W.removeListener(J,ge),ve(x)}function ge(){"function"==typeof W.removeListener&&W.removeListener("error",xe),se([].slice.call(arguments))}z(W,J,ge,{once:!0}),"error"!==J&&function te(W,J,se){"function"==typeof W.on&&z(W,"error",J,se)}(W,xe,{once:!0})})},r.EventEmitter=r,r.prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;var _=10;function p(W){if("function"!=typeof W)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof W)}function g(W){return void 0===W._maxListeners?r.defaultMaxListeners:W._maxListeners}function y(W,J,se,ve){var xe,ge,x;if(p(se),void 0===(ge=W._events)?(ge=W._events=Object.create(null),W._eventsCount=0):(void 0!==ge.newListener&&(W.emit("newListener",J,se.listener?se.listener:se),ge=W._events),x=ge[J]),void 0===x)x=ge[J]=se,++W._eventsCount;else if("function"==typeof x?x=ge[J]=ve?[se,x]:[x,se]:ve?x.unshift(se):x.push(se),(xe=g(W))>0&&x.length>xe&&!x.warned){x.warned=!0;var D=new Error("Possible EventEmitter memory leak detected. "+x.length+" "+String(J)+" listeners added. Use emitter.setMaxListeners() to increase limit");D.name="MaxListenersExceededWarning",D.emitter=W,D.type=J,D.count=x.length,function q(W){console&&console.warn&&console.warn(W)}(D)}return W}function E(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function O(W,J,se){var ve={fired:!1,wrapFn:void 0,target:W,type:J,listener:se},xe=E.bind(ve);return xe.listener=se,ve.wrapFn=xe,xe}function $(W,J,se){var ve=W._events;if(void 0===ve)return[];var xe=ve[J];return void 0===xe?[]:"function"==typeof xe?se?[xe.listener||xe]:[xe]:se?function G(W){for(var J=new Array(W.length),se=0;se<J.length;++se)J[se]=W[se].listener||W[se];return J}(xe):b(xe,xe.length)}function v(W){var J=this._events;if(void 0!==J){var se=J[W];if("function"==typeof se)return 1;if(void 0!==se)return se.length}return 0}function b(W,J){for(var se=new Array(J),ve=0;ve<J;++ve)se[ve]=W[ve];return se}function z(W,J,se,ve){if("function"==typeof W.on)ve.once?W.once(J,se):W.on(J,se);else{if("function"!=typeof W.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof W);W.addEventListener(J,function xe(ge){ve.once&&W.removeEventListener(J,xe),se(ge)})}}Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return _},set:function(J){if("number"!=typeof J||J<0||Z(J))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+J+".");_=J}}),r.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(J){if("number"!=typeof J||J<0||Z(J))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+J+".");return this._maxListeners=J,this},r.prototype.getMaxListeners=function(){return g(this)},r.prototype.emit=function(J){for(var se=[],ve=1;ve<arguments.length;ve++)se.push(arguments[ve]);var xe="error"===J,ge=this._events;if(void 0!==ge)xe=xe&&void 0===ge.error;else if(!xe)return!1;if(xe){var x;if(se.length>0&&(x=se[0]),x instanceof Error)throw x;var D=new Error("Unhandled error."+(x?" ("+x.message+")":""));throw D.context=x,D}var P=ge[J];if(void 0===P)return!1;if("function"==typeof P)S(P,this,se);else{var I=P.length,j=b(P,I);for(ve=0;ve<I;++ve)S(j[ve],this,se)}return!0},r.prototype.on=r.prototype.addListener=function(J,se){return y(this,J,se,!1)},r.prototype.prependListener=function(J,se){return y(this,J,se,!0)},r.prototype.once=function(J,se){return p(se),this.on(J,O(this,J,se)),this},r.prototype.prependOnceListener=function(J,se){return p(se),this.prependListener(J,O(this,J,se)),this},r.prototype.off=r.prototype.removeListener=function(J,se){var ve,xe,ge,x,D;if(p(se),void 0===(xe=this._events))return this;if(void 0===(ve=xe[J]))return this;if(ve===se||ve.listener===se)0==--this._eventsCount?this._events=Object.create(null):(delete xe[J],xe.removeListener&&this.emit("removeListener",J,ve.listener||se));else if("function"!=typeof ve){for(ge=-1,x=ve.length-1;x>=0;x--)if(ve[x]===se||ve[x].listener===se){D=ve[x].listener,ge=x;break}if(ge<0)return this;0===ge?ve.shift():function V(W,J){for(;J+1<W.length;J++)W[J]=W[J+1];W.pop()}(ve,ge),1===ve.length&&(xe[J]=ve[0]),void 0!==xe.removeListener&&this.emit("removeListener",J,D||se)}return this},r.prototype.removeAllListeners=function(J){var se,ve,xe;if(void 0===(ve=this._events))return this;if(void 0===ve.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==ve[J]&&(0==--this._eventsCount?this._events=Object.create(null):delete ve[J]),this;if(0===arguments.length){var x,ge=Object.keys(ve);for(xe=0;xe<ge.length;++xe)"removeListener"!==(x=ge[xe])&&this.removeAllListeners(x);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(se=ve[J]))this.removeListener(J,se);else if(void 0!==se)for(xe=se.length-1;xe>=0;xe--)this.removeListener(J,se[xe]);return this},r.prototype.listeners=function(J){return $(this,J,!0)},r.prototype.rawListeners=function(J){return $(this,J,!1)},r.listenerCount=function(W,J){return"function"==typeof W.listenerCount?W.listenerCount(J):v.call(W,J)},r.prototype.listenerCount=v,r.prototype.eventNames=function(){return this._eventsCount>0?M(this._events):[]}},59683:pe=>{pe.exports=function(N){var M,S=this;if(arguments.length<2)M=function(){if(this instanceof M){var _=S.apply(this,arguments);return Object(_)===_?_:this}return S.apply(N,arguments)};else{for(var q=new Array(arguments.length-1),Z=1;Z<arguments.length;Z++)q[Z-1]=arguments[Z];M=function(){var g,_=q.length,p=new Array(_+arguments.length);for(g=0;g<_;g++)p[g]=q[g];for(g=0;g<arguments.length;g++)p[_+g]=arguments[g];if(this instanceof M){var y=S.apply(this,p);return Object(y)===y?y:this}return S.apply(N,p)}}return M.prototype=S.prototype,M}},2199:pe=>{var S=Array.prototype.slice,M=Object.prototype.toString;pe.exports=function(r){var _=this;if("function"!=typeof _||"[object Function]"!==M.call(_))throw new TypeError("Function.prototype.bind called on incompatible "+_);for(var g,p=S.call(arguments,1),E=Math.max(0,_.length-p.length),O=[],$=0;$<E;$++)O.push("$"+$);if(g=Function("binder","return function ("+O.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof g){var V=_.apply(this,p.concat(S.call(arguments)));return Object(V)===V?V:this}return _.apply(r,p.concat(S.call(arguments)))}),_.prototype){var v=function(){};v.prototype=_.prototype,g.prototype=new v,v.prototype=null}return g}},20224:(pe,N,S)=>{var M=S(2199);pe.exports=Function.prototype.bind||M},79903:(pe,N,S)=>{var M,q=SyntaxError,Z=Function,r=TypeError,_=function(R){try{return Z('"use strict"; return ('+R+").constructor;")()}catch{}},p=Object.getOwnPropertyDescriptor;if(p)try{p({},"")}catch{p=null}var g=function(){throw new r},y=p?function(){try{return g}catch{try{return p(arguments,"callee").get}catch{return g}}}():g,E=S(90524)(),O=S(2600)(),$=Object.getPrototypeOf||(O?function(j){return j.__proto__}:null),v={},b=typeof Uint8Array>"u"||!$?M:$(Uint8Array),V={"%AggregateError%":typeof AggregateError>"u"?M:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?M:ArrayBuffer,"%ArrayIteratorPrototype%":E&&$?$([][Symbol.iterator]()):M,"%AsyncFromSyncIteratorPrototype%":M,"%AsyncFunction%":v,"%AsyncGenerator%":v,"%AsyncGeneratorFunction%":v,"%AsyncIteratorPrototype%":v,"%Atomics%":typeof Atomics>"u"?M:Atomics,"%BigInt%":typeof BigInt>"u"?M:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?M:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?M:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?M:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?M:Float32Array,"%Float64Array%":typeof Float64Array>"u"?M:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?M:FinalizationRegistry,"%Function%":Z,"%GeneratorFunction%":v,"%Int8Array%":typeof Int8Array>"u"?M:Int8Array,"%Int16Array%":typeof Int16Array>"u"?M:Int16Array,"%Int32Array%":typeof Int32Array>"u"?M:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":E&&$?$($([][Symbol.iterator]())):M,"%JSON%":"object"==typeof JSON?JSON:M,"%Map%":typeof Map>"u"?M:Map,"%MapIteratorPrototype%":typeof Map>"u"||!E||!$?M:$((new Map)[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?M:Promise,"%Proxy%":typeof Proxy>"u"?M:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?M:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?M:Set,"%SetIteratorPrototype%":typeof Set>"u"||!E||!$?M:$((new Set)[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?M:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":E&&$?$(""[Symbol.iterator]()):M,"%Symbol%":E?Symbol:M,"%SyntaxError%":q,"%ThrowTypeError%":y,"%TypedArray%":b,"%TypeError%":r,"%Uint8Array%":typeof Uint8Array>"u"?M:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?M:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?M:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?M:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?M:WeakMap,"%WeakRef%":typeof WeakRef>"u"?M:WeakRef,"%WeakSet%":typeof WeakSet>"u"?M:WeakSet};if($)try{null.error}catch(j){var G=$($(j));V["%Error.prototype%"]=G}var H=function j(R){var Q;if("%AsyncFunction%"===R)Q=_("async function () {}");else if("%GeneratorFunction%"===R)Q=_("function* () {}");else if("%AsyncGeneratorFunction%"===R)Q=_("async function* () {}");else if("%AsyncGenerator%"===R){var ee=j("%AsyncGeneratorFunction%");ee&&(Q=ee.prototype)}else if("%AsyncIteratorPrototype%"===R){var Re=j("%AsyncGenerator%");Re&&$&&(Q=$(Re.prototype))}return V[R]=Q,Q},te={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},z=S(20224),W=S(84031),J=z.call(Function.call,Array.prototype.concat),se=z.call(Function.apply,Array.prototype.splice),ve=z.call(Function.call,String.prototype.replace),xe=z.call(Function.call,String.prototype.slice),ge=z.call(Function.call,RegExp.prototype.exec),x=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,D=/\\(\\)?/g,I=function(R,Q){var Re,ee=R;if(W(te,ee)&&(ee="%"+(Re=te[ee])[0]+"%"),W(V,ee)){var ne=V[ee];if(ne===v&&(ne=H(ee)),typeof ne>"u"&&!Q)throw new r("intrinsic "+R+" exists, but is not available. Please file an issue!");return{alias:Re,name:ee,value:ne}}throw new q("intrinsic "+R+" does not exist!")};pe.exports=function(R,Q){if("string"!=typeof R||0===R.length)throw new r("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof Q)throw new r('"allowMissing" argument must be a boolean');if(null===ge(/^%?[^%]*%?$/,R))throw new q("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var ee=function(R){var Q=xe(R,0,1),ee=xe(R,-1);if("%"===Q&&"%"!==ee)throw new q("invalid intrinsic syntax, expected closing `%`");if("%"===ee&&"%"!==Q)throw new q("invalid intrinsic syntax, expected opening `%`");var Re=[];return ve(R,x,function(ne,Fe,rt,Te){Re[Re.length]=rt?ve(Te,D,"$1"):Fe||ne}),Re}(R),Re=ee.length>0?ee[0]:"",ne=I("%"+Re+"%",Q),Fe=ne.name,rt=ne.value,Te=!1,tt=ne.alias;tt&&(Re=tt[0],se(ee,J([0,1],tt)));for(var Qe=1,vt=!0;Qe<ee.length;Qe+=1){var et=ee[Qe],$e=xe(et,0,1),it=xe(et,-1);if(('"'===$e||"'"===$e||"`"===$e||'"'===it||"'"===it||"`"===it)&&$e!==it)throw new q("property names with quotes must have matching quotes");if(("constructor"===et||!vt)&&(Te=!0),W(V,Fe="%"+(Re+="."+et)+"%"))rt=V[Fe];else if(null!=rt){if(!(et in rt)){if(!Q)throw new r("base intrinsic for "+R+" exists, but the property is not available.");return}if(p&&Qe+1>=ee.length){var de=p(rt,et);rt=(vt=!!de)&&"get"in de&&!("originalValue"in de.get)?de.get:rt[et]}else vt=W(rt,et),rt=rt[et];vt&&!Te&&(V[Fe]=rt)}}return rt}},2600:pe=>{var N={foo:{}},S=Object;pe.exports=function(){return{__proto__:N}.foo===N.foo&&!({__proto__:null}instanceof S)}},90524:(pe,N,S)=>{var M=typeof Symbol<"u"&&Symbol,q=S(86858);pe.exports=function(){return"function"==typeof M&&"function"==typeof Symbol&&"symbol"==typeof M("foo")&&"symbol"==typeof Symbol("bar")&&q()}},86858:pe=>{pe.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var S={},M=Symbol("test"),q=Object(M);if("string"==typeof M||"[object Symbol]"!==Object.prototype.toString.call(M)||"[object Symbol]"!==Object.prototype.toString.call(q))return!1;for(M in S[M]=42,S)return!1;if("function"==typeof Object.keys&&0!==Object.keys(S).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(S).length)return!1;var r=Object.getOwnPropertySymbols(S);if(1!==r.length||r[0]!==M||!Object.prototype.propertyIsEnumerable.call(S,M))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var _=Object.getOwnPropertyDescriptor(S,M);if(42!==_.value||!0!==_.enumerable)return!1}return!0}},84031:(pe,N,S)=>{var M=S(20224);pe.exports=M.call(Function.call,Object.prototype.hasOwnProperty)},98288:(pe,N,S)=>{S.r(N),S.d(N,{default:()=>vt,hash:()=>Qe});var q,Z,r,_,M=S(56929),p=typeof Buffer<"u"&&"function"==typeof Buffer.from,g="function"==typeof Uint16Array,y=/\[object (HTML(.*)Element)\]/,E=/\[object (SVG(.*)Element)\]/,$=["Arguments","Array","ArrayBuffer","Boolean","DataView","Date","DocumentFragment","Error","Event","Float32Array","Float64Array","Function","Generator","GeneratorFunction","HTMLElement","Int8Array","Int16Array","Int32Array","Map","Null","Number","Object","Promise","RegExp","Set","String","Symbol","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","Undefined","WeakMap","WeakSet","Window"].reduce(function(et,$e){return et["[object "+$e+"]"]=$e,et},{}),v=Object.keys($).reduce(function(et,$e){return et[$[$e].toUpperCase()]=$e,et},{}),b={"[object Map]":!0,"[object Set]":!0},V={boolean:!0,function:!0,number:!0,string:!0,undefined:!0},G=((q={})[v.ARGUMENTS]=!0,q[v.ARRAY]=!0,q),H=((Z={})[v.REGEXP]=!0,Z[v.SYMBOL]=!0,Z),te=((r={})[v.FLOAT32ARRAY]=!0,r[v.FLOAT64ARRAY]=!0,r[v.INT8ARRAY]=!0,r[v.INT16ARRAY]=!0,r[v.INT32ARRAY]=!0,r[v.UINT8ARRAY]=!0,r[v.UINT8CLAMPEDARRAY]=!0,r[v.UINT16ARRAY]=!0,r[v.UINT32ARRAY]=!0,r),z=((_={})[v.GENERATOR]=!0,_[v.PROMISE]=!0,_[v.WEAKMAP]=!0,_[v.WEAKSET]=!0,_),W=/^\s*function\s*([^(]*)/i,J=Object.prototype.toString,se=Object.keys;function x(et,$e){return et>$e}function D(et,$e){return et[0]>$e[0]}function P(et,$e){for(var it,de,Y=0;Y<et.length;++Y){for(de=et[Y],it=Y-1;~it&&$e(et[it],de);--it)et[it+1]=et[it];et[it+1]=de}return et}var Re=p?function Q(et){return Buffer.from(et).toString("utf8")}:g?function R(et){return String.fromCharCode.apply(null,new Uint16Array(et))}:function ee(){return""};function Fe(et,$e){for(var it=0;it<et.length;++it)if(et[it]===$e)return it+1;return 0}function rt(et,$e,it,de){if(void 0===de){var Y=typeof et;if("string"===Y||V[Y])return Y+"|"+et;if(null===et)return"null|"+et}var oe=de||J.call(et);return G[oe]?et:oe===v.OBJECT?function j(et){for(var de,$e=P(se(et),x),it={},Y=0;Y<$e.length;++Y)it[de=$e[Y]]=et[de];return it}(et):H[oe]?$[oe]+"|"+et.toString():b[oe]?function I(et,$e,it){var de="function"==typeof et.get,Y=[];de?(et.forEach(function(ye,ut){Y.push([tt(ut,$e,it),tt(ye,$e,it)])}),P(Y,D)):(et.forEach(function(ye){Y.push(tt(ye,$e,it))}),P(Y,x));for(var fe,oe=function ve(et){return et.name||(et.toString().match(W)||[])[1]||"anonymous"}(et.constructor)+"|[",ke=0,Be=Y.length;ke<Be;++ke)fe=Y[ke],oe+=(ke?",":"")+(de?"["+fe[0]+","+fe[1]+"]":fe);return oe+"]"}(et,$e,it):oe===v.DATE?$[oe]+"|"+et.getTime():oe===v.ERROR?$[oe]+"|"+et.stack:oe===v.EVENT?function ge(et){return{bubbles:et.bubbles,cancelBubble:et.cancelBubble,cancelable:et.cancelable,composed:et.composed,currentTarget:et.currentTarget,defaultPrevented:et.defaultPrevented,eventPhase:et.eventPhase,isTrusted:et.isTrusted,returnValue:et.returnValue,target:et.target,type:et.type}}(et):z[oe]?$[oe]+"|NOT_ENUMERABLE":y.test(oe)||E.test(oe)?oe.slice(8,-1)+"|"+et.outerHTML:oe===v.DOCUMENTFRAGMENT?$[oe]+"|"+function ne(et){for(var $e=et.children,it="",de=0;de<$e.length;++de)it+=$e[de].outerHTML;return it}(et):te[oe]?$[oe]+"|"+et.join(","):oe===v.ARRAYBUFFER?$[oe]+"|"+Re(et):oe===v.DATAVIEW?$[oe]+"|"+Re(et.buffer):et}function tt(et,$e,it){if(!et||"object"!=typeof et)return rt(et,$e,it);var de=J.call(et);return de===v.DATE||de===v.REGEXP?rt(et,$e,it,de):JSON.stringify(et,function Te(et,$e){return void 0===et&&(et=[]),void 0===$e&&($e=[]),function(it,de){if("object"==typeof de)if(et.length){var Y=Fe(et,this);0===Y?et.push(this):(et.splice(Y),$e.splice(Y)),$e.push(it);var oe=Fe(et,de);if(0!==oe)return"[~"+($e.slice(0,oe).join(".")||".")+"]";et.push(de)}else et[0]=de,$e[0]=it;return it&&this[it]instanceof Date?rt(this[it],et,$e,v.DATE):rt(de,et,$e)}}($e,it))}function Qe(et){return function xe(et){for(var Y,$e=et.length,it=5381,de=52711;$e--;)it=33*it^(Y=et.charCodeAt($e)),de=33*de^Y;return 4096*(it>>>0)+(de>>>0)}(tt(et))}(Qe.is=(0,M.curry)(function(et,$e){return Qe(et)===Qe($e)})).all=(0,M.curry)(function(et){for(var $e=Qe.is(et),it=1;it<arguments.length;++it)if(!$e(arguments[it]))return!1;return!0},2),Qe.is.any=(0,M.curry)(function(et){for(var $e=Qe.is(et),it=1;it<arguments.length;it++)if($e(arguments[it]))return!0;return!1},2),Qe.is.not=(0,M.curry)(function(et,$e){return Qe(et)!==Qe($e)});const vt=Qe},54920:(pe,N)=>{N.read=function(S,M,q,Z,r){var _,p,g=8*r-Z-1,y=(1<<g)-1,E=y>>1,O=-7,$=q?r-1:0,v=q?-1:1,b=S[M+$];for($+=v,_=b&(1<<-O)-1,b>>=-O,O+=g;O>0;_=256*_+S[M+$],$+=v,O-=8);for(p=_&(1<<-O)-1,_>>=-O,O+=Z;O>0;p=256*p+S[M+$],$+=v,O-=8);if(0===_)_=1-E;else{if(_===y)return p?NaN:1/0*(b?-1:1);p+=Math.pow(2,Z),_-=E}return(b?-1:1)*p*Math.pow(2,_-Z)},N.write=function(S,M,q,Z,r,_){var p,g,y,E=8*_-r-1,O=(1<<E)-1,$=O>>1,v=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,b=Z?0:_-1,V=Z?1:-1,G=M<0||0===M&&1/M<0?1:0;for(M=Math.abs(M),isNaN(M)||M===1/0?(g=isNaN(M)?1:0,p=O):(p=Math.floor(Math.log(M)/Math.LN2),M*(y=Math.pow(2,-p))<1&&(p--,y*=2),(M+=p+$>=1?v/y:v*Math.pow(2,1-$))*y>=2&&(p++,y/=2),p+$>=O?(g=0,p=O):p+$>=1?(g=(M*y-1)*Math.pow(2,r),p+=$):(g=M*Math.pow(2,$-1)*Math.pow(2,r),p=0));r>=8;S[q+b]=255&g,b+=V,g/=256,r-=8);for(p=p<<r|g,E+=r;E>0;S[q+b]=255&p,b+=V,p/=256,E-=8);S[q+b-V]|=128*G}},55035:pe=>{pe.exports="function"==typeof Object.create?function(S,M){M&&(S.super_=M,S.prototype=Object.create(M.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}))}:function(S,M){if(M){S.super_=M;var q=function(){};q.prototype=M.prototype,S.prototype=new q,S.prototype.constructor=S}}},7478:(pe,N,S)=>{var M,q,Z;void 0!==(q="function"==typeof(M=Z=function(){function Z(){for(var p=0,g={};p<arguments.length;p++){var y=arguments[p];for(var E in y)g[E]=y[E]}return g}function r(p){return p.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function _(p){function g(){}function y(O,$,v){if(!(typeof document>"u")){"number"==typeof(v=Z({path:"/"},g.defaults,v)).expires&&(v.expires=new Date(1*new Date+864e5*v.expires)),v.expires=v.expires?v.expires.toUTCString():"";try{var b=JSON.stringify($);/^[\{\[]/.test(b)&&($=b)}catch{}$=p.write?p.write($,O):encodeURIComponent(String($)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),O=encodeURIComponent(String(O)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var V="";for(var G in v)v[G]&&(V+="; "+G,!0!==v[G]&&(V+="="+v[G].split(";")[0]));return document.cookie=O+"="+$+V}}function E(O,$){if(!(typeof document>"u")){for(var v={},b=document.cookie?document.cookie.split("; "):[],V=0;V<b.length;V++){var G=b[V].split("="),H=G.slice(1).join("=");!$&&'"'===H.charAt(0)&&(H=H.slice(1,-1));try{var te=r(G[0]);if(H=(p.read||p)(H,te)||r(H),$)try{H=JSON.parse(H)}catch{}if(v[te]=H,O===te)break}catch{}}return O?v[O]:v}}return g.set=y,g.get=function(O){return E(O,!1)},g.getJSON=function(O){return E(O,!0)},g.remove=function(O,$){y(O,"",Z($,{expires:-1}))},g.defaults={},g.withConverter=_,g}(function(){})})?M.call(N,S,N,pe):M)&&(pe.exports=q),pe.exports=Z()},53909:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0});var M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(V){return typeof V}:function(V){return V&&"function"==typeof Symbol&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},q=function(){function V(G,H){for(var te=0;te<H.length;te++){var z=H[te];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(G,z.key,z)}}return function(G,H,te){return H&&V(G.prototype,H),te&&V(G,te),G}}(),r=$(S(11035)),_=S(69492),g=$(S(27416)),y=S(64567),O=$(S(57726));function $(V){return V&&V.__esModule?V:{default:V}}var b=function(){function V(G){var H=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},te=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(var z in function v(V,G){if(!(V instanceof G))throw new TypeError("Cannot call a class as a function")}(this,V),this.factMap=new Map(G),this.factResultsCache=new Map,this.allowUndefinedFacts=!!te.allowUndefinedFacts,H){var W;W=H[z]instanceof r.default?H[z]:new r.default(z,H[z]),this._addConstantFact(W),(0,g.default)("almanac::constructor initialized runtime fact:"+W.id+" with "+W.value+"<"+M(W.value)+">")}}return q(V,[{key:"_getFact",value:function(H){return this.factMap.get(H)}},{key:"_addConstantFact",value:function(H){this.factMap.set(H.id,H),this._setFactValue(H,{},H.value)}},{key:"_setFactValue",value:function(H,te,z){var W=H.getCacheKey(te),J=Promise.resolve(z);return W&&this.factResultsCache.set(W,J),J}},{key:"addRuntimeFact",value:function(H,te){(0,g.default)("almanac::addRuntimeFact id:"+H);var z=new r.default(H,te);return this._addConstantFact(z)}},{key:"factValue",value:function(H){var te=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},z=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",W=void 0,J=this._getFact(H);if(void 0===J)return this.allowUndefinedFacts?Promise.resolve(void 0):Promise.reject(new _.UndefinedFactError("Undefined fact: "+H));if(J.isConstant())W=Promise.resolve(J.calculate(te,this));else{var se=J.getCacheKey(te),ve=se&&this.factResultsCache.get(se);ve?(W=Promise.resolve(ve),(0,g.default)("almanac::factValue cache hit for fact:"+H)):((0,g.default)("almanac::factValue cache miss for fact:"+H+"; calculating"),W=this._setFactValue(J,te,J.calculate(te,this)))}if(z){if("string"==typeof z&&z.startsWith("$"))return(0,g.default)("condition::evaluate extracting object property "+z),W.then(function(ge){if((0,O.default)(ge)){var x=(0,y.JSONPath)({path:z,json:ge,wrap:!1});return(0,g.default)("condition::evaluate extracting object property "+z+", received: "+x),x}return(0,g.default)("condition::evaluate could not compute object path("+z+") of non-object: "+ge+" <"+(typeof ge>"u"?"undefined":M(ge))+">; continuing with "+ge),ge});var xe=void 0;try{xe=S(87559)}catch{throw console.error('Oops! Looks like you\'re trying to use the deprecated syntax for the ".path" property.'),console.error('Please convert your "path" properties to JsonPath syntax (ensure your path starts with "$")'),console.error('Alternatively, if you wish to continue using old syntax (provided by selectn), you may "npm install selectn" as a direct dependency.'),console.error("See https://github.com/CacheControl/json-rules-engine/blob/master/CHANGELOG.md#500--2019-10-27 for more information."),new Error('json-rules-engine: Unmet peer dependency "selectn" required for use of deprecated ".path" syntax. please "npm install selectn" or convert to json-path syntax')}return W.then(function(ge){if((0,O.default)(ge)){var x=xe(z)(ge);return(0,g.default)("condition::evaluate extracting object property "+z+", received: "+x),x}return(0,g.default)("condition::evaluate could not compute object path("+z+") of non-object: "+ge+" <"+(typeof ge>"u"?"undefined":M(ge))+">; continuing with "+ge),ge})}return W}}]),V}();N.default=b},67396:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0});var M=function(){function E(O,$){for(var v=0;v<$.length;v++){var b=$[v];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(O,b.key,b)}}return function(O,$,v){return $&&E(O.prototype,$),v&&E(O,v),O}}(),Z=p(S(27416)),_=p(S(57726));function p(E){return E&&E.__esModule?E:{default:E}}var y=function(){function E(O){if(function g(E,O){if(!(E instanceof O))throw new TypeError("Cannot call a class as a function")}(this,E),!O)throw new Error("Condition: constructor options required");var $=E.booleanOperator(O);if(Object.assign(this,O),$){var v=O[$];if(!Array.isArray(v))throw new Error('"'+$+'" must be an array');this.operator=$,this.priority=parseInt(O.priority,10)||1,this[$]=v.map(function(b){return new E(b)})}else{if(!Object.prototype.hasOwnProperty.call(O,"fact"))throw new Error('Condition: constructor "fact" property required');if(!Object.prototype.hasOwnProperty.call(O,"operator"))throw new Error('Condition: constructor "operator" property required');if(!Object.prototype.hasOwnProperty.call(O,"value"))throw new Error('Condition: constructor "value" property required');Object.prototype.hasOwnProperty.call(O,"priority")&&(O.priority=parseInt(O.priority,10))}}return M(E,[{key:"toJSON",value:function(){var $=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],v={};this.priority&&(v.priority=this.priority);var b=E.booleanOperator(this);return b?v[b]=this[b].map(function(V){return V.toJSON($)}):(v.operator=this.operator,v.value=this.value,v.fact=this.fact,void 0!==this.factResult&&(v.factResult=this.factResult),void 0!==this.result&&(v.result=this.result),this.params&&(v.params=this.params),this.path&&(v.path=this.path)),$?JSON.stringify(v):v}},{key:"_getValue",value:function($){var v=this.value;return(0,_.default)(v)&&Object.prototype.hasOwnProperty.call(v,"fact")?$.factValue(v.fact,v.params,v.path):Promise.resolve(v)}},{key:"evaluate",value:function($,v){var b=this;if(!$)return Promise.reject(new Error("almanac required"));if(!v)return Promise.reject(new Error("operatorMap required"));if(this.isBooleanOperator())return Promise.reject(new Error("Cannot evaluate() a boolean condition"));var V=v.get(this.operator);return V?this._getValue($).then(function(G){return $.factValue(b.fact,b.params,b.path).then(function(H){var te=V.evaluate(H,G);return(0,Z.default)("condition::evaluate <"+H+" "+b.operator+" "+G+"?> ("+te+")"),{result:te,leftHandSideValue:H,rightHandSideValue:G,operator:b.operator}})}):Promise.reject(new Error("Unknown operator: "+this.operator))}},{key:"booleanOperator",value:function(){return E.booleanOperator(this)}},{key:"isBooleanOperator",value:function(){return void 0!==E.booleanOperator(this)}}],[{key:"booleanOperator",value:function($){return Object.prototype.hasOwnProperty.call($,"any")?"any":Object.prototype.hasOwnProperty.call($,"all")?"all":void 0}}]),E}();N.default=y},27416:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.default=function S(M){try{(typeof process<"u"&&process.env&&process.env.DEBUG&&process.env.DEBUG.match(/json-rules-engine/)||typeof window<"u"&&window.localStorage&&window.localStorage.debug&&window.localStorage.debug.match(/json-rules-engine/))&&console.log(M)}catch{}}},4934:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0});var q=function Z(p){return p&&p.__esModule?p:{default:p}}(S(88640)),r=[];function _(p){return"NaN"!==Number.parseFloat(p).toString()}r.push(new q.default("equal",function(p,g){return p===g})),r.push(new q.default("notEqual",function(p,g){return p!==g})),r.push(new q.default("in",function(p,g){return g.indexOf(p)>-1})),r.push(new q.default("notIn",function(p,g){return-1===g.indexOf(p)})),r.push(new q.default("contains",function(p,g){return p.indexOf(g)>-1},Array.isArray)),r.push(new q.default("doesNotContain",function(p,g){return-1===p.indexOf(g)},Array.isArray)),r.push(new q.default("lessThan",function(p,g){return p<g},_)),r.push(new q.default("lessThanInclusive",function(p,g){return p<=g},_)),r.push(new q.default("greaterThan",function(p,g){return p>g},_)),r.push(new q.default("greaterThanInclusive",function(p,g){return p>=g},_)),N.default=r},24307:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.SuccessEventFact=function(){var q=[];return function(){var Z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Z.event&&q.push(Z.event),q}}},47386:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.FINISHED=N.RUNNING=N.READY=void 0;var M=function(){function ge(x,D){for(var P=0;P<D.length;P++){var I=D[P];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(x,I.key,I)}}return function(x,D,P){return D&&ge(x.prototype,D),P&&ge(x,P),x}}(),Z=H(S(11035)),_=H(S(8847)),g=H(S(88640)),E=H(S(53909)),O=S(83358),$=S(24307),b=H(S(4934)),G=H(S(27416));function H(ge){return ge&&ge.__esModule?ge:{default:ge}}var J=N.READY="READY",se=N.RUNNING="RUNNING",ve=N.FINISHED="FINISHED",xe=function(ge){function x(){var D=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],P=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function te(ge,x){if(!(ge instanceof x))throw new TypeError("Cannot call a class as a function")}(this,x);var I=function z(ge,x){if(!ge)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!x||"object"!=typeof x&&"function"!=typeof x?ge:x}(this,(x.__proto__||Object.getPrototypeOf(x)).call(this));return I.rules=[],I.allowUndefinedFacts=P.allowUndefinedFacts||!1,I.operators=new Map,I.facts=new Map,I.status=J,D.map(function(j){return I.addRule(j)}),b.default.map(function(j){return I.addOperator(j)}),I}return function W(ge,x){if("function"!=typeof x&&null!==x)throw new TypeError("Super expression must either be null or a function, not "+typeof x);ge.prototype=Object.create(x&&x.prototype,{constructor:{value:ge,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(ge,x):ge.__proto__=x)}(x,ge),M(x,[{key:"addRule",value:function(P){if(!P)throw new Error("Engine: addRule() requires options");if(!Object.prototype.hasOwnProperty.call(P,"conditions"))throw new Error('Engine: addRule() argument requires "conditions" property');if(!Object.prototype.hasOwnProperty.call(P,"event"))throw new Error('Engine: addRule() argument requires "event" property');var I=void 0;return(I=P instanceof _.default?P:new _.default(P)).setEngine(this),this.rules.push(I),this.prioritizedRules=null,this}},{key:"removeRule",value:function(P){if(!(P instanceof _.default))throw new Error("Engine: removeRule() rule must be a instance of Rule");var I=this.rules.indexOf(P);return-1!==I&&(this.prioritizedRules=null,!!this.rules.splice(I,1).length)}},{key:"addOperator",value:function(P,I){var j;j=P instanceof g.default?P:new g.default(P,I),(0,G.default)("engine::addOperator name:"+j.name),this.operators.set(j.name,j)}},{key:"removeOperator",value:function(P){return this.operators.delete(P instanceof g.default?P.name:P)}},{key:"addFact",value:function(P,I,j){var R=P,Q=void 0;return P instanceof Z.default?(R=P.id,Q=P):Q=new Z.default(P,I,j),(0,G.default)("engine::addFact id:"+R),this.facts.set(R,Q),this}},{key:"removeFact",value:function(P){return this.facts.delete(P instanceof Z.default?P.id:P)}},{key:"prioritizeRules",value:function(){if(!this.prioritizedRules){var P=this.rules.reduce(function(I,j){var R=j.priority;return I[R]||(I[R]=[]),I[R].push(j),I},{});this.prioritizedRules=Object.keys(P).sort(function(I,j){return Number(I)>Number(j)?-1:1}).map(function(I){return P[I]})}return this.prioritizedRules}},{key:"stop",value:function(){return this.status=ve,this}},{key:"getFact",value:function(P){return this.facts.get(P)}},{key:"evaluateRules",value:function(P,I){var j=this;return Promise.all(P.map(function(R){if(j.status===se)return R.evaluate(I).then(function(Q){(0,G.default)("engine::run ruleResult:"+Q.result),Q.result?(j.emit("success",R.event,I,Q),j.emit(R.event.type,R.event.params,I,Q),I.factValue("success-events",{event:R.event})):j.emit("failure",R.event,I,Q)});(0,G.default)("engine::run status:"+j.status+"; skipping remaining rules")}))}},{key:"run",value:function(){var P=this,I=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,G.default)("engine::run started"),(0,G.default)("engine::run runtimeFacts:",I),I["success-events"]=new Z.default("success-events",(0,$.SuccessEventFact)(),{cache:!1}),this.status=se;var j=new E.default(this.facts,I,{allowUndefinedFacts:this.allowUndefinedFacts}),R=this.prioritizeRules(),Q=Promise.resolve();return new Promise(function(ee,Re){R.map(function(ne){return Q=Q.then(function(){return P.evaluateRules(ne,j)}).catch(Re)}),Q.then(function(){return P.status=ve,(0,G.default)("engine::run completed"),j.factValue("success-events")}).then(function(ne){ee({events:ne,almanac:j})}).catch(Re)})}}]),x}(O.EventEmitter);N.default=xe},69492:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.UndefinedFactError=function(r){function _(){var p;!function S(r,_){if(!(r instanceof _))throw new TypeError("Cannot call a class as a function")}(this,_);for(var g=arguments.length,y=Array(g),E=0;E<g;E++)y[E]=arguments[E];var O=function M(r,_){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!_||"object"!=typeof _&&"function"!=typeof _?r:_}(this,(p=_.__proto__||Object.getPrototypeOf(_)).call.apply(p,[this].concat(y)));return O.code="UNDEFINED_FACT",O}return function q(r,_){if("function"!=typeof _&&null!==_)throw new TypeError("Super expression must either be null or a function, not "+typeof _);r.prototype=Object.create(_&&_.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(r,_):r.__proto__=_)}(_,Error),_}()},11035:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0});var M=function(){function g(y,E){for(var O=0;O<E.length;O++){var $=E[O];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(y,$.key,$)}}return function(y,E,O){return E&&g(y.prototype,E),O&&g(y,O),y}}(),Z=function r(g){return g&&g.__esModule?g:{default:g}}(S(98288)),p=function(){function g(y,E,O){(function _(g,y){if(!(g instanceof y))throw new TypeError("Cannot call a class as a function")})(this,g),this.id=y;var $={cache:!0};if(typeof O>"u"&&(O=$),"function"!=typeof E?(this.value=E,this.type=this.constructor.CONSTANT):(this.calculationMethod=E,this.type=this.constructor.DYNAMIC),!this.id)throw new Error("factId required");return this.priority=parseInt(O.priority||1,10),this.options=Object.assign({},$,O),this.cacheKeyMethod=this.defaultCacheKeys,this}return M(g,[{key:"isConstant",value:function(){return this.type===this.constructor.CONSTANT}},{key:"isDynamic",value:function(){return this.type===this.constructor.DYNAMIC}},{key:"calculate",value:function(E,O){return Object.prototype.hasOwnProperty.call(this,"value")?this.value:this.calculationMethod(E,O)}},{key:"defaultCacheKeys",value:function(E,O){return{params:O,id:E}}},{key:"getCacheKey",value:function(E){if(!0===this.options.cache){var O=this.cacheKeyMethod(this.id,E);return g.hashFromObject(O)}}}],[{key:"hashFromObject",value:function(E){return(0,Z.default)(E)}}]),g}();p.CONSTANT="CONSTANT",p.DYNAMIC="DYNAMIC",N.default=p},78:(pe,N,S)=>{pe.exports=S(71412)},71412:(pe,N,S)=>{N.Engine=N.Rule=void 0;var Z=O(S(47386)),g=(O(S(11035)),O(S(8847)));O(S(88640));function O($){return $&&$.__esModule?$:{default:$}}N.Rule=g.default,N.Engine=Z.default},88640:(pe,N)=>{Object.defineProperty(N,"__esModule",{value:!0});var S=function(){function Z(r,_){for(var p=0;p<_.length;p++){var g=_[p];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(r,g.key,g)}}return function(r,_,p){return _&&Z(r.prototype,_),p&&Z(r,p),r}}(),q=function(){function Z(r,_,p){if(function M(Z,r){if(!(Z instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Z),this.name=String(r),!r)throw new Error("Missing operator name");if("function"!=typeof _)throw new Error("Missing operator callback");this.cb=_,this.factValueValidator=p,this.factValueValidator||(this.factValueValidator=function(){return!0})}return S(Z,[{key:"evaluate",value:function(_,p){return this.factValueValidator(_)&&this.cb(_,p)}}]),Z}();N.default=q},52747:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0});var M=function(){function g(y,E){for(var O=0;O<E.length;O++){var $=E[O];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(y,$.key,$)}}return function(y,E,O){return E&&g(y.prototype,E),O&&g(y,O),y}}(),Z=function r(g){return g&&g.__esModule?g:{default:g}}(S(75482)),p=function(){function g(y,E,O,$){(function _(g,y){if(!(g instanceof y))throw new TypeError("Cannot call a class as a function")})(this,g),this.conditions=(0,Z.default)(y),this.event=(0,Z.default)(E),this.priority=(0,Z.default)(O),this.name=(0,Z.default)($),this.result=null}return M(g,[{key:"setResult",value:function(E){this.result=E}},{key:"toJSON",value:function(){var E=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],O={conditions:this.conditions.toJSON(!1),event:this.event,priority:this.priority,name:this.name,result:this.result};return E?JSON.stringify(O):O}}]),g}();N.default=p},8847:(pe,N,S)=>{Object.defineProperty(N,"__esModule",{value:!0});var M=function(){function V(G,H){for(var te=0;te<H.length;te++){var z=H[te];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(G,z.key,z)}}return function(G,H,te){return H&&V(G.prototype,H),te&&V(G,te),G}}(),Z=E(S(67396)),_=E(S(52747)),p=S(83358),y=E(S(27416));function E(V){return V&&V.__esModule?V:{default:V}}var b=function(V){function G(H){!function O(V,G){if(!(V instanceof G))throw new TypeError("Cannot call a class as a function")}(this,G);var te=function $(V,G){if(!V)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!G||"object"!=typeof G&&"function"!=typeof G?V:G}(this,(G.__proto__||Object.getPrototypeOf(G)).call(this));return"string"==typeof H&&(H=JSON.parse(H)),H&&H.conditions&&te.setConditions(H.conditions),H&&H.onSuccess&&te.on("success",H.onSuccess),H&&H.onFailure&&te.on("failure",H.onFailure),H&&(H.name||0===H.name)&&te.setName(H.name),te.setPriority(H&&H.priority||1),te.setEvent(H&&H.event||{type:"unknown"}),te}return function v(V,G){if("function"!=typeof G&&null!==G)throw new TypeError("Super expression must either be null or a function, not "+typeof G);V.prototype=Object.create(G&&G.prototype,{constructor:{value:V,enumerable:!1,writable:!0,configurable:!0}}),G&&(Object.setPrototypeOf?Object.setPrototypeOf(V,G):V.__proto__=G)}(G,V),M(G,[{key:"setPriority",value:function(te){if((te=parseInt(te,10))<=0)throw new Error("Priority must be greater than zero");return this.priority=te,this}},{key:"setName",value:function(te){if(!te&&0!==te)throw new Error('Rule "name" must be defined');return this.name=te,this}},{key:"setConditions",value:function(te){if(!Object.prototype.hasOwnProperty.call(te,"all")&&!Object.prototype.hasOwnProperty.call(te,"any"))throw new Error('"conditions" root must contain a single instance of "all" or "any"');return this.conditions=new Z.default(te),this}},{key:"setEvent",value:function(te){if(!te)throw new Error("Rule: setEvent() requires event object");if(!Object.prototype.hasOwnProperty.call(te,"type"))throw new Error('Rule: setEvent() requires event object with "type" property');return this.event={type:te.type},te.params&&(this.event.params=te.params),this}},{key:"setEngine",value:function(te){return this.engine=te,this}},{key:"toJSON",value:function(){var te=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],z={conditions:this.conditions.toJSON(!1),priority:this.priority,event:this.event,name:this.name};return te?JSON.stringify(z):z}},{key:"prioritizeConditions",value:function(te){var z=this,W=te.reduce(function(J,se){var ve=se.priority;if(!ve){var xe=z.engine.getFact(se.fact);ve=xe&&xe.priority||1}return J[ve]||(J[ve]=[]),J[ve].push(se),J},{});return Object.keys(W).sort(function(J,se){return Number(J)>Number(se)?-1:1}).map(function(J){return W[J]})}},{key:"evaluate",value:function(te){var z=this,W=new _.default(this.conditions,this.event,this.priority,this.name),ve=function(P,I){if(0===P.length)return Promise.resolve(!0);var j=Array.prototype.some;"all"===I&&(j=Array.prototype.every);for(var R=z.prioritizeConditions(P),Q=Promise.resolve(),ee=function(Fe){var rt=R[Fe],Te=!1;Q=Q.then(function(tt){return"any"===I&&!0===tt||Te?((0,y.default)("prioritizeAndRun::detected truthy result; skipping remaining conditions"),Te=!0,!0):"all"===I&&!1===tt||Te?((0,y.default)("prioritizeAndRun::detected falsey result; skipping remaining conditions"),Te=!0,!1):function(P,I){return Array.isArray(P)||(P=[P]),Promise.all(P.map(function(j){return function(P){if(P.isBooleanOperator()){var I=P[P.operator];return("all"===P.operator?ge(I):xe(I)).then(function(R){var Q=!0===R;return P.result=Q,Q})}return P.evaluate(te,z.engine.operators).then(function(R){var Q=R.result;return P.factResult=R.leftHandSideValue,P.result=Q,Q})}(j)})).then(function(j){return(0,y.default)("rule::evaluateConditions results",j),I.call(j,function(R){return!0===R})})}(rt,j)})},Re=0;Re<R.length;Re++)ee(Re);return Q},xe=function(P){return ve(P,"any")},ge=function(P){return ve(P,"all")},x=function(P){return W.setResult(P),z.emit(P?"success":"failure",W.event,te,W),W};return W.conditions.any?xe(W.conditions.any).then(function(D){return x(D)}):ge(W.conditions.all).then(function(D){return x(D)})}}]),G}(p.EventEmitter);N.default=b},64567:(pe,N,S)=>{function M(I){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(R){return typeof R}:function(R){return R&&"function"==typeof Symbol&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R})(I)}function r(I){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(R){return R.__proto__||Object.getPrototypeOf(R)})(I)}function _(I,j){return(_=Object.setPrototypeOf||function(Q,ee){return Q.__proto__=ee,Q})(I,j)}function p(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function g(I,j,R){return(g=p()?Reflect.construct:function(ee,Re,ne){var Fe=[null];Fe.push.apply(Fe,Re);var Te=new(Function.bind.apply(ee,Fe));return ne&&_(Te,ne.prototype),Te}).apply(null,arguments)}function E(I){var j="function"==typeof Map?new Map:void 0;return E=function(Q){if(null===Q||!function y(I){return-1!==Function.toString.call(I).indexOf("[native code]")}(Q))return Q;if("function"!=typeof Q)throw new TypeError("Super expression must either be null or a function");if(typeof j<"u"){if(j.has(Q))return j.get(Q);j.set(Q,ee)}function ee(){return g(Q,arguments,r(this).constructor)}return ee.prototype=Object.create(Q.prototype,{constructor:{value:ee,enumerable:!1,writable:!0,configurable:!0}}),_(ee,Q)},E(I)}function b(I){return function V(I){if(Array.isArray(I))return te(I)}(I)||function G(I){if(typeof Symbol<"u"&&Symbol.iterator in Object(I))return Array.from(I)}(I)||H(I)||function z(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(I,j){if(I){if("string"==typeof I)return te(I,j);var R=Object.prototype.toString.call(I).slice(8,-1);if("Object"===R&&I.constructor&&(R=I.constructor.name),"Map"===R||"Set"===R)return Array.from(R);if("Arguments"===R||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(R))return te(I,j)}}function te(I,j){(null==j||j>I.length)&&(j=I.length);for(var R=0,Q=new Array(j);R<j;R++)Q[R]=I[R];return Q}S.r(N),S.d(N,{JSONPath:()=>P});var se=Object.prototype.hasOwnProperty,xe=(P.nodeVMSupported=function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}())?S(56989):{runInNewContext:function(j,R){var Q=Object.keys(R),ee=[];!function(j,R,Q){for(var ee=j.length,Re=0;Re<ee;Re++)Q(j[Re])&&R.push(j.splice(Re--,1)[0])}(Q,ee,function(Te){return"function"==typeof R[Te]});var Re=Q.map(function(Te,tt){return R[Te]});!(j=ee.reduce(function(Te,tt){var Qe=R[tt].toString();return/function/.test(Qe)||(Qe="function "+Qe),"var "+tt+"="+Qe+";"+Te},"")+j).match(/(["'])use strict\1/)&&!Q.includes("arguments")&&(j="var arguments = undefined;"+j);var Fe=(j=j.replace(/;[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*$/,"")).lastIndexOf(";"),rt=Fe>-1?j.slice(0,Fe+1)+" return "+j.slice(Fe+1):" return "+j;return g(Function,b(Q).concat([rt])).apply(void 0,b(Re))}};function ge(I,j){return(I=I.slice()).push(j),I}function x(I,j){return(j=j.slice()).unshift(I),j}var D=function(I){!function Z(I,j){if("function"!=typeof j&&null!==j)throw new TypeError("Super expression must either be null or a function");I.prototype=Object.create(j&&j.prototype,{constructor:{value:I,writable:!0,configurable:!0}}),j&&_(I,j)}(R,I);var j=function v(I){return function(){var R,j=r(I);if(p()){var Q=r(this).constructor;R=Reflect.construct(j,arguments,Q)}else R=j.apply(this,arguments);return function $(I,j){return!j||"object"!=typeof j&&"function"!=typeof j?function O(I){if(void 0===I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I}(I):j}(this,R)}}(R);function R(Q){var ee;return function q(I,j){if(!(I instanceof j))throw new TypeError("Cannot call a class as a function")}(this,R),(ee=j.call(this,'JSONPath should not be called with "new" (it prevents return of (unwrapped) scalar values)')).avoidNew=!0,ee.value=Q,ee.name="NewError",ee}return R}(E(Error));function P(I,j,R,Q,ee){if(!(this instanceof P))try{return new P(I,j,R,Q,ee)}catch(rt){if(!rt.avoidNew)throw rt;return rt.value}"string"==typeof I&&(ee=Q,Q=R,R=j,j=I,I=null);var Re=I&&"object"===M(I);if(this.json=(I=I||{}).json||R,this.path=I.path||j,this.resultType=I.resultType||"value",this.flatten=I.flatten||!1,this.wrap=!se.call(I,"wrap")||I.wrap,this.sandbox=I.sandbox||{},this.preventEval=I.preventEval||!1,this.parent=I.parent||null,this.parentProperty=I.parentProperty||null,this.callback=I.callback||Q||null,this.otherTypeCallback=I.otherTypeCallback||ee||function(){throw new TypeError("You must supply an otherTypeCallback callback option with the @other() operator.")},!1!==I.autostart){var ne={path:Re?I.path:j};Re?"json"in I&&(ne.json=I.json):ne.json=R;var Fe=this.evaluate(ne);if(!Fe||"object"!==M(Fe))throw new D(Fe);return Fe}}P.prototype.evaluate=function(I,j,R,Q){var ee=this,Re=this.parent,ne=this.parentProperty,Fe=this.flatten,rt=this.wrap;if(this.currResultType=this.resultType,this.currPreventEval=this.preventEval,this.currSandbox=this.sandbox,R=R||this.callback,this.currOtherTypeCallback=Q||this.otherTypeCallback,j=j||this.json,(I=I||this.path)&&"object"===M(I)&&!Array.isArray(I)){if(!I.path&&""!==I.path)throw new TypeError('You must supply a "path" property when providing an object argument to JSONPath.evaluate().');if(!se.call(I,"json"))throw new TypeError('You must supply a "json" property when providing an object argument to JSONPath.evaluate().');j=I.json,Fe=se.call(I,"flatten")?I.flatten:Fe,this.currResultType=se.call(I,"resultType")?I.resultType:this.currResultType,this.currSandbox=se.call(I,"sandbox")?I.sandbox:this.currSandbox,rt=se.call(I,"wrap")?I.wrap:rt,this.currPreventEval=se.call(I,"preventEval")?I.preventEval:this.currPreventEval,R=se.call(I,"callback")?I.callback:R,this.currOtherTypeCallback=se.call(I,"otherTypeCallback")?I.otherTypeCallback:this.currOtherTypeCallback,Re=se.call(I,"parent")?I.parent:Re,ne=se.call(I,"parentProperty")?I.parentProperty:ne,I=I.path}if(Re=Re||null,ne=ne||null,Array.isArray(I)&&(I=P.toPathString(I)),(I||""===I)&&j){this._obj=j;var tt=P.toPathArray(I);"$"===tt[0]&&tt.length>1&&tt.shift(),this._hasParentSelector=null;var Qe=this._trace(tt,j,["$"],Re,ne,R).filter(function(vt){return vt&&!vt.isParentSelector});return Qe.length?rt||1!==Qe.length||Qe[0].hasArrExpr?Qe.reduce(function(vt,et){var $e=ee._getPreferredOutput(et);return Fe&&Array.isArray($e)?vt=vt.concat($e):vt.push($e),vt},[]):this._getPreferredOutput(Qe[0]):rt?[]:void 0}},P.prototype._getPreferredOutput=function(I){var j=this.currResultType;switch(j){default:throw new TypeError("Unknown result type");case"all":var R=Array.isArray(I.path)?I.path:P.toPathArray(I.path);return I.pointer=P.toPointer(R),I.path="string"==typeof I.path?I.path:P.toPathString(I.path),I;case"value":case"parent":case"parentProperty":return I[j];case"path":return P.toPathString(I[j]);case"pointer":return P.toPointer(I.path)}},P.prototype._handleCallback=function(I,j,R){if(j){var Q=this._getPreferredOutput(I);I.path="string"==typeof I.path?I.path:P.toPathString(I.path),j(Q,R,I)}},P.prototype._trace=function(I,j,R,Q,ee,Re,ne,Fe){var rt,Te=this;if(!I.length)return this._handleCallback(rt={path:R,value:j,parent:Q,parentProperty:ee,hasArrExpr:ne},Re,"value"),rt;var tt=I[0],Qe=I.slice(1),vt=[];function et(ce){Array.isArray(ce)?ce.forEach(function(Ie){vt.push(Ie)}):vt.push(ce)}if(("string"!=typeof tt||Fe)&&j&&se.call(j,tt))et(this._trace(Qe,j[tt],ge(R,tt),j,tt,Re,ne));else if("*"===tt)this._walk(tt,Qe,j,R,Q,ee,Re,function(ce,Ie,ot,Tt,Nt,Gt,un,Xt){et(Te._trace(x(ce,ot),Tt,Nt,Gt,un,Xt,!0,!0))});else if(".."===tt)et(this._trace(Qe,j,R,Q,ee,Re,ne)),this._walk(tt,Qe,j,R,Q,ee,Re,function(ce,Ie,ot,Tt,Nt,Gt,un,Xt){"object"===M(Tt[ce])&&et(Te._trace(x(Ie,ot),Tt[ce],ge(Nt,ce),Tt,ce,Xt,!0))});else{if("^"===tt)return this._hasParentSelector=!0,{path:R.slice(0,-1),expr:Qe,isParentSelector:!0};if("~"===tt)return rt={path:ge(R,tt),value:ee,parent:Q,parentProperty:null},this._handleCallback(rt,Re,"property"),rt;if("$"===tt)et(this._trace(Qe,j,R,null,null,Re,ne));else if(/^(\x2D?[0-9]*):(\x2D?[0-9]*):?([0-9]*)$/.test(tt))et(this._slice(tt,Qe,j,R,Q,ee,Re));else if(0===tt.indexOf("?(")){if(this.currPreventEval)throw new Error("Eval [?(expr)] prevented in JSONPath expression.");this._walk(tt,Qe,j,R,Q,ee,Re,function(ce,Ie,ot,Tt,Nt,Gt,un,Xt){Te._eval(Ie.replace(/^\?\(((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?)\)$/,"$1"),Tt[ce],ce,Nt,Gt,un)&&et(Te._trace(x(ce,ot),Tt,Nt,Gt,un,Xt,!0))})}else if("("===tt[0]){if(this.currPreventEval)throw new Error("Eval [(expr)] prevented in JSONPath expression.");et(this._trace(x(this._eval(tt,j,R[R.length-1],R.slice(0,-1),Q,ee),Qe),j,R,Q,ee,Re,ne))}else if("@"===tt[0]){var $e=!1,it=tt.slice(1,-2);switch(it){default:throw new TypeError("Unknown value type "+it);case"scalar":(!j||!["object","function"].includes(M(j)))&&($e=!0);break;case"boolean":case"string":case"undefined":case"function":M(j)===it&&($e=!0);break;case"integer":Number.isFinite(j)&&!(j%1)&&($e=!0);break;case"number":Number.isFinite(j)&&($e=!0);break;case"nonFinite":"number"==typeof j&&!Number.isFinite(j)&&($e=!0);break;case"object":j&&M(j)===it&&($e=!0);break;case"array":Array.isArray(j)&&($e=!0);break;case"other":$e=this.currOtherTypeCallback(j,R,Q,ee);break;case"null":null===j&&($e=!0)}if($e)return this._handleCallback(rt={path:R,value:j,parent:Q,parentProperty:ee},Re,"value"),rt}else if("`"===tt[0]&&j&&se.call(j,tt.slice(1))){var de=tt.slice(1);et(this._trace(Qe,j[de],ge(R,de),j,de,Re,ne,!0))}else if(tt.includes(",")){var ke,oe=function W(I){if(typeof Symbol>"u"||null==I[Symbol.iterator]){if(Array.isArray(I)||(I=H(I))){var j=0,R=function(){};return{s:R,n:function(){return j>=I.length?{done:!0}:{done:!1,value:I[j++]}},e:function(rt){throw rt},f:R}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Q,ne,ee=!0,Re=!1;return{s:function(){Q=I[Symbol.iterator]()},n:function(){var rt=Q.next();return ee=rt.done,rt},e:function(rt){Re=!0,ne=rt},f:function(){try{!ee&&null!=Q.return&&Q.return()}finally{if(Re)throw ne}}}}(tt.split(","));try{for(oe.s();!(ke=oe.n()).done;)et(this._trace(x(ke.value,Qe),j,R,Q,ee,Re,!0))}catch(ce){oe.e(ce)}finally{oe.f()}}else!Fe&&j&&se.call(j,tt)&&et(this._trace(Qe,j[tt],ge(R,tt),j,tt,Re,ne,!0))}if(this._hasParentSelector)for(var fe=0;fe<vt.length;fe++){var ye=vt[fe];if(ye&&ye.isParentSelector){var ut=Te._trace(ye.expr,j,ye.path,Q,ee,Re,ne);if(Array.isArray(ut)){vt[fe]=ut[0];for(var be=ut.length,le=1;le<be;le++)fe++,vt.splice(fe,0,ut[le])}else vt[fe]=ut}}return vt},P.prototype._walk=function(I,j,R,Q,ee,Re,ne,Fe){if(Array.isArray(R))for(var rt=R.length,Te=0;Te<rt;Te++)Fe(Te,I,j,R,Q,ee,Re,ne);else R&&"object"===M(R)&&Object.keys(R).forEach(function(tt){Fe(tt,I,j,R,Q,ee,Re,ne)})},P.prototype._slice=function(I,j,R,Q,ee,Re,ne){if(Array.isArray(R)){var Fe=R.length,rt=I.split(":"),Te=rt[2]&&Number.parseInt(rt[2])||1,tt=rt[0]&&Number.parseInt(rt[0])||0,Qe=rt[1]&&Number.parseInt(rt[1])||Fe;tt=tt<0?Math.max(0,tt+Fe):Math.min(Fe,tt),Qe=Qe<0?Math.max(0,Qe+Fe):Math.min(Fe,Qe);for(var vt=[],et=tt;et<Qe;et+=Te)this._trace(x(et,j),R,Q,ee,Re,ne,!0).forEach(function(it){vt.push(it)});return vt}},P.prototype._eval=function(I,j,R,Q,ee,Re){if(!this._obj||!j)return!1;I.includes("@parentProperty")&&(this.currSandbox._$_parentProperty=Re,I=I.replace(/@parentProperty/g,"_$_parentProperty")),I.includes("@parent")&&(this.currSandbox._$_parent=ee,I=I.replace(/@parent/g,"_$_parent")),I.includes("@property")&&(this.currSandbox._$_property=R,I=I.replace(/@property/g,"_$_property")),I.includes("@path")&&(this.currSandbox._$_path=P.toPathString(Q.concat([R])),I=I.replace(/@path/g,"_$_path")),I.includes("@root")&&(this.currSandbox._$_root=this.json,I=I.replace(/@root/g,"_$_root")),I.match(/@([\t-\r \)\.\[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])/)&&(this.currSandbox._$_v=j,I=I.replace(/@([\t-\r \)\.\[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])/g,"_$_v$1"));try{return xe.runInNewContext(I,this.currSandbox)}catch(ne){throw console.log(ne),new Error("jsonPath: "+ne.message+": "+I)}},P.cache={},P.toPathString=function(I){for(var j=I,R=j.length,Q="$",ee=1;ee<R;ee++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(j[ee])||(Q+=/^[\*0-9]+$/.test(j[ee])?"["+j[ee]+"]":"['"+j[ee]+"']");return Q},P.toPointer=function(I){for(var j=I,R=j.length,Q="",ee=1;ee<R;ee++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(j[ee])||(Q+="/"+j[ee].toString().replace(/~/g,"~0").replace(/\//g,"~1"));return Q},P.toPathArray=function(I){var j=P.cache;if(j[I])return j[I].concat();var R=[],ee=I.replace(/@(?:null|boolean|number|string|integer|undefined|nonFinite|scalar|array|object|function|other)\(\)/g,";$&;").replace(/['\[](\??\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\))['\]]/g,function(Re,ne){return"[#"+(R.push(ne)-1)+"]"}).replace(/\['((?:[\0-&\(-\\\^-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)'\]/g,function(Re,ne){return"['"+ne.replace(/\./g,"%@%").replace(/~/g,"%%@@%%")+"']"}).replace(/~/g,";~;").replace(/'?\.'?(?!(?:[\0-Z\\-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*\])|\['?/g,";").replace(/%@%/g,".").replace(/%%@@%%/g,"~").replace(/(?:;)?(\^+)(?:;)?/g,function(Re,ne){return";"+ne.split("").join(";")+";"}).replace(/;;;|;;/g,";..;").replace(/;$|'?\]|'$/g,"").split(";").map(function(Re){var ne=Re.match(/#([0-9]+)/);return ne&&ne[1]?R[ne[1]]:Re});return j[I]=ee,j[I]}},57726:pe=>{pe.exports=function N(S){return!!S&&"object"==typeof S}},80464:(pe,N)=>{function M(g){return g.replace(/[-[\]/{}()*+?.\\^$]/g,"\\$&")}function q(g,y){var O=(void 0===y?{}:y).decimalMark,$=void 0===O?".":O;if("number"==typeof g)return g.toString();if("string"!=typeof g)return"NaN";var v=M($),b=g.trim(),V=b.match(/^\(.*\)$|^-/),G=new RegExp("[^\\d"+v+"]|"+v+"(?=.*"+v+")|^\\D*"+v+"\\D*$","g");return""===(b=b.replace(G,"").replace($,"."))?b="NaN":V&&(b="-"+b),b}N.He=void 0,N.He=function Z(g,y){var O=(void 0===y?{}:y).decimalMark,v=q(g,{decimalMark:void 0===O?".":O});return"NaN"===v?NaN:Number(v)}},71856:pe=>{var N=Object.getOwnPropertySymbols,S=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;pe.exports=function Z(){try{if(!Object.assign)return!1;var r=new String("abc");if(r[5]="de","5"===Object.getOwnPropertyNames(r)[0])return!1;for(var _={},p=0;p<10;p++)_["_"+String.fromCharCode(p)]=p;if("0123456789"!==Object.getOwnPropertyNames(_).map(function(E){return _[E]}).join(""))return!1;var y={};return"abcdefghijklmnopqrst".split("").forEach(function(E){y[E]=E}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},y)).join("")}catch{return!1}}()?Object.assign:function(r,_){for(var p,y,g=function q(r){if(null==r)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}(r),E=1;E<arguments.length;E++){for(var O in p=Object(arguments[E]))S.call(p,O)&&(g[O]=p[O]);if(N){y=N(p);for(var $=0;$<y.length;$++)M.call(p,y[$])&&(g[y[$]]=p[y[$]])}}return g}},28597:(pe,N,S)=>{var M="function"==typeof Map&&Map.prototype,q=Object.getOwnPropertyDescriptor&&M?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Z=M&&q&&"function"==typeof q.get?q.get:null,r=M&&Map.prototype.forEach,_="function"==typeof Set&&Set.prototype,p=Object.getOwnPropertyDescriptor&&_?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,g=_&&p&&"function"==typeof p.get?p.get:null,y=_&&Set.prototype.forEach,O="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,v="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,V="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,G=Boolean.prototype.valueOf,H=Object.prototype.toString,te=Function.prototype.toString,z=String.prototype.match,W=String.prototype.slice,J=String.prototype.replace,se=String.prototype.toUpperCase,ve=String.prototype.toLowerCase,xe=RegExp.prototype.test,ge=Array.prototype.concat,x=Array.prototype.join,D=Array.prototype.slice,P=Math.floor,I="function"==typeof BigInt?BigInt.prototype.valueOf:null,j=Object.getOwnPropertySymbols,R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,Q="function"==typeof Symbol&&"object"==typeof Symbol.iterator,ee="function"==typeof Symbol&&Symbol.toStringTag&&(Symbol,1)?Symbol.toStringTag:null,Re=Object.prototype.propertyIsEnumerable,ne=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(yt){return yt.__proto__}:null);function Fe(yt,Pt){if(yt===1/0||yt===-1/0||yt!=yt||yt&&yt>-1e3&&yt<1e3||xe.call(/e/,Pt))return Pt;var Pn=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof yt){var Gn=yt<0?-P(-yt):P(yt);if(Gn!==yt){var Cn=String(Gn),ln=W.call(Pt,Cn.length+1);return J.call(Cn,Pn,"$&_")+"."+J.call(J.call(ln,/([0-9]{3})/g,"$&_"),/_$/,"")}}return J.call(Pt,Pn,"$&_")}var rt=S(24654),Te=rt.custom,tt=Be(Te)?Te:null;function Qe(yt,Pt,Pn){var Gn="double"===(Pn.quoteStyle||Pt)?'"':"'";return Gn+yt+Gn}function vt(yt){return J.call(String(yt),/"/g,"&quot;")}function et(yt){return!("[object Array]"!==be(yt)||ee&&"object"==typeof yt&&ee in yt)}function it(yt){return!("[object RegExp]"!==be(yt)||ee&&"object"==typeof yt&&ee in yt)}function Be(yt){if(Q)return yt&&"object"==typeof yt&&yt instanceof Symbol;if("symbol"==typeof yt)return!0;if(!yt||"object"!=typeof yt||!R)return!1;try{return R.call(yt),!0}catch{}return!1}pe.exports=function yt(Pt,Pn,Gn,Cn){var ln=Pn||{};if(ut(ln,"quoteStyle")&&"single"!==ln.quoteStyle&&"double"!==ln.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(ut(ln,"maxStringLength")&&("number"==typeof ln.maxStringLength?ln.maxStringLength<0&&ln.maxStringLength!==1/0:null!==ln.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var Fr=!ut(ln,"customInspect")||ln.customInspect;if("boolean"!=typeof Fr&&"symbol"!==Fr)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(ut(ln,"indent")&&null!==ln.indent&&"\t"!==ln.indent&&!(parseInt(ln.indent,10)===ln.indent&&ln.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(ut(ln,"numericSeparator")&&"boolean"!=typeof ln.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var lr=ln.numericSeparator;if(typeof Pt>"u")return"undefined";if(null===Pt)return"null";if("boolean"==typeof Pt)return Pt?"true":"false";if("string"==typeof Pt)return Xt(Pt,ln);if("number"==typeof Pt){if(0===Pt)return 1/0/Pt>0?"0":"-0";var wn=String(Pt);return lr?Fe(Pt,wn):wn}if("bigint"==typeof Pt){var Ar=String(Pt)+"n";return lr?Fe(Pt,Ar):Ar}var Qn=typeof ln.depth>"u"?5:ln.depth;if(typeof Gn>"u"&&(Gn=0),Gn>=Qn&&Qn>0&&"object"==typeof Pt)return et(Pt)?"[Array]":"[Object]";var Ni=function Qt(yt,Pt){var Pn;if("\t"===yt.indent)Pn="\t";else{if(!("number"==typeof yt.indent&&yt.indent>0))return null;Pn=x.call(Array(yt.indent+1)," ")}return{base:Pn,prev:x.call(Array(Pt+1),Pn)}}(ln,Gn);if(typeof Cn>"u")Cn=[];else if(ce(Cn,Pt)>=0)return"[Circular]";function Xr(fi,fo,mr){if(fo&&(Cn=D.call(Cn)).push(fo),mr){var Eo={depth:ln.depth};return ut(ln,"quoteStyle")&&(Eo.quoteStyle=ln.quoteStyle),yt(fi,Eo,Gn+1,Cn)}return yt(fi,ln,Gn+1,Cn)}if("function"==typeof Pt&&!it(Pt)){var jr=function le(yt){if(yt.name)return yt.name;var Pt=z.call(te.call(yt),/^function\s*([\w$]+)/);return Pt?Pt[1]:null}(Pt),di=Ai(Pt,Xr);return"[Function"+(jr?": "+jr:" (anonymous)")+"]"+(di.length>0?" { "+x.call(di,", ")+" }":"")}if(Be(Pt)){var Lo=Q?J.call(String(Pt),/^(Symbol\(.*\))_[^)]*$/,"$1"):R.call(Pt);return"object"!=typeof Pt||Q?Lo:zn(Lo)}if(function un(yt){return!(!yt||"object"!=typeof yt)&&(typeof HTMLElement<"u"&&yt instanceof HTMLElement||"string"==typeof yt.nodeName&&"function"==typeof yt.getAttribute)}(Pt)){for(var Gi="<"+ve.call(String(Pt.nodeName)),jo=Pt.attributes||[],Vi=0;Vi<jo.length;Vi++)Gi+=" "+jo[Vi].name+"="+Qe(vt(jo[Vi].value),"double",ln);return Gi+=">",Pt.childNodes&&Pt.childNodes.length&&(Gi+="..."),Gi+"</"+ve.call(String(Pt.nodeName))+">"}if(et(Pt)){if(0===Pt.length)return"[]";var Ri=Ai(Pt,Xr);return Ni&&!function ar(yt){for(var Pt=0;Pt<yt.length;Pt++)if(ce(yt[Pt],"\n")>=0)return!1;return!0}(Ri)?"["+Co(Ri,Ni)+"]":"[ "+x.call(Ri,", ")+" ]"}if(function de(yt){return!("[object Error]"!==be(yt)||ee&&"object"==typeof yt&&ee in yt)}(Pt)){var Hi=Ai(Pt,Xr);return"cause"in Error.prototype||!("cause"in Pt)||Re.call(Pt,"cause")?0===Hi.length?"["+String(Pt)+"]":"{ ["+String(Pt)+"] "+x.call(Hi,", ")+" }":"{ ["+String(Pt)+"] "+x.call(ge.call("[cause]: "+Xr(Pt.cause),Hi),", ")+" }"}if("object"==typeof Pt&&Fr){if(tt&&"function"==typeof Pt[tt]&&rt)return rt(Pt,{depth:Qn-Gn});if("symbol"!==Fr&&"function"==typeof Pt.inspect)return Pt.inspect()}if(function Ie(yt){if(!Z||!yt||"object"!=typeof yt)return!1;try{Z.call(yt);try{g.call(yt)}catch{return!0}return yt instanceof Map}catch{}return!1}(Pt)){var wo=[];return r&&r.call(Pt,function(fi,fo){wo.push(Xr(fo,Pt,!0)+" => "+Xr(fi,Pt))}),Zr("Map",Z.call(Pt),wo,Ni)}if(function Nt(yt){if(!g||!yt||"object"!=typeof yt)return!1;try{g.call(yt);try{Z.call(yt)}catch{return!0}return yt instanceof Set}catch{}return!1}(Pt)){var Di=[];return y&&y.call(Pt,function(fi){Di.push(Xr(fi,Pt))}),Zr("Set",g.call(Pt),Di,Ni)}if(function ot(yt){if(!O||!yt||"object"!=typeof yt)return!1;try{O.call(yt,O);try{v.call(yt,v)}catch{return!0}return yt instanceof WeakMap}catch{}return!1}(Pt))return De("WeakMap");if(function Gt(yt){if(!v||!yt||"object"!=typeof yt)return!1;try{v.call(yt,v);try{O.call(yt,O)}catch{return!0}return yt instanceof WeakSet}catch{}return!1}(Pt))return De("WeakSet");if(function Tt(yt){if(!V||!yt||"object"!=typeof yt)return!1;try{return V.call(yt),!0}catch{}return!1}(Pt))return De("WeakRef");if(function oe(yt){return!("[object Number]"!==be(yt)||ee&&"object"==typeof yt&&ee in yt)}(Pt))return zn(Xr(Number(Pt)));if(function fe(yt){if(!yt||"object"!=typeof yt||!I)return!1;try{return I.call(yt),!0}catch{}return!1}(Pt))return zn(Xr(I.call(Pt)));if(function ke(yt){return!("[object Boolean]"!==be(yt)||ee&&"object"==typeof yt&&ee in yt)}(Pt))return zn(G.call(Pt));if(function Y(yt){return!("[object String]"!==be(yt)||ee&&"object"==typeof yt&&ee in yt)}(Pt))return zn(Xr(String(Pt)));if(!function $e(yt){return!("[object Date]"!==be(yt)||ee&&"object"==typeof yt&&ee in yt)}(Pt)&&!it(Pt)){var Ti=Ai(Pt,Xr),gi=ne?ne(Pt)===Object.prototype:Pt instanceof Object||Pt.constructor===Object,Qr=Pt instanceof Object?"":"null prototype",hr=!gi&&ee&&Object(Pt)===Pt&&ee in Pt?W.call(be(Pt),8,-1):Qr?"Object":"",So=(gi||"function"!=typeof Pt.constructor?"":Pt.constructor.name?Pt.constructor.name+" ":"")+(hr||Qr?"["+x.call(ge.call([],hr||[],Qr||[]),": ")+"] ":"");return 0===Ti.length?So+"{}":Ni?So+"{"+Co(Ti,Ni)+"}":So+"{ "+x.call(Ti,", ")+" }"}return String(Pt)};var ye=Object.prototype.hasOwnProperty||function(yt){return yt in this};function ut(yt,Pt){return ye.call(yt,Pt)}function be(yt){return H.call(yt)}function ce(yt,Pt){if(yt.indexOf)return yt.indexOf(Pt);for(var Pn=0,Gn=yt.length;Pn<Gn;Pn++)if(yt[Pn]===Pt)return Pn;return-1}function Xt(yt,Pt){if(yt.length>Pt.maxStringLength){var Pn=yt.length-Pt.maxStringLength,Gn="... "+Pn+" more character"+(Pn>1?"s":"");return Xt(W.call(yt,0,Pt.maxStringLength),Pt)+Gn}return Qe(J.call(J.call(yt,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Kn),"single",Pt)}function Kn(yt){var Pt=yt.charCodeAt(0),Pn={8:"b",9:"t",10:"n",12:"f",13:"r"}[Pt];return Pn?"\\"+Pn:"\\x"+(Pt<16?"0":"")+se.call(Pt.toString(16))}function zn(yt){return"Object("+yt+")"}function De(yt){return yt+" { ? }"}function Zr(yt,Pt,Pn,Gn){return yt+" ("+Pt+") {"+(Gn?Co(Pn,Gn):x.call(Pn,", "))+"}"}function Co(yt,Pt){if(0===yt.length)return"";var Pn="\n"+Pt.prev+Pt.base;return Pn+x.call(yt,","+Pn)+"\n"+Pt.prev}function Ai(yt,Pt){var Pn=et(yt),Gn=[];if(Pn){Gn.length=yt.length;for(var Cn=0;Cn<yt.length;Cn++)Gn[Cn]=ut(yt,Cn)?Pt(yt[Cn],yt):""}var Fr,ln="function"==typeof j?j(yt):[];if(Q){Fr={};for(var lr=0;lr<ln.length;lr++)Fr["$"+ln[lr]]=ln[lr]}for(var wn in yt)ut(yt,wn)&&(Pn&&String(Number(wn))===wn&&wn<yt.length||Q&&Fr["$"+wn]instanceof Symbol||(xe.call(/[^\w$]/,wn)?Gn.push(Pt(wn,yt)+": "+Pt(yt[wn],yt)):Gn.push(wn+": "+Pt(yt[wn],yt))));if("function"==typeof j)for(var Ar=0;Ar<ln.length;Ar++)Re.call(yt,ln[Ar])&&Gn.push("["+Pt(ln[Ar])+"]: "+Pt(yt[ln[Ar]],yt));return Gn}},72578:function(pe){pe.exports=function(N){var S={};function M(q){if(S[q])return S[q].exports;var Z=S[q]={i:q,l:!1,exports:{}};return N[q].call(Z.exports,Z,Z.exports,M),Z.l=!0,Z.exports}return M.m=N,M.c=S,M.d=function(q,Z,r){M.o(q,Z)||Object.defineProperty(q,Z,{enumerable:!0,get:r})},M.r=function(q){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(q,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(q,"__esModule",{value:!0})},M.t=function(q,Z){if(1&Z&&(q=M(q)),8&Z||4&Z&&"object"==typeof q&&q&&q.__esModule)return q;var r=Object.create(null);if(M.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:q}),2&Z&&"string"!=typeof q)for(var _ in q)M.d(r,_,function(p){return q[p]}.bind(null,_));return r},M.n=function(q){var Z=q&&q.__esModule?function(){return q.default}:function(){return q};return M.d(Z,"a",Z),Z},M.o=function(q,Z){return Object.prototype.hasOwnProperty.call(q,Z)},M.p="",M(M.s=22)}([function(N,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var q=function(){function p(g,y){for(var E=0;E<y.length;E++){var O=y[E];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(g,O.key,O)}}return function(g,y,E){return y&&p(g.prototype,y),E&&p(g,E),g}}(),Z={debug:function(){},info:function(){},warn:function(){},error:function(){}},r=void 0,_=void 0;(S.Log=function(){function p(){!function(y,E){if(!(y instanceof E))throw new TypeError("Cannot call a class as a function")}(this,p)}return p.reset=function(){_=3,r=Z},p.debug=function(){if(_>=4){for(var y=arguments.length,E=Array(y),O=0;O<y;O++)E[O]=arguments[O];r.debug.apply(r,Array.from(E))}},p.info=function(){if(_>=3){for(var y=arguments.length,E=Array(y),O=0;O<y;O++)E[O]=arguments[O];r.info.apply(r,Array.from(E))}},p.warn=function(){if(_>=2){for(var y=arguments.length,E=Array(y),O=0;O<y;O++)E[O]=arguments[O];r.warn.apply(r,Array.from(E))}},p.error=function(){if(_>=1){for(var y=arguments.length,E=Array(y),O=0;O<y;O++)E[O]=arguments[O];r.error.apply(r,Array.from(E))}},q(p,null,[{key:"NONE",get:function(){return 0}},{key:"ERROR",get:function(){return 1}},{key:"WARN",get:function(){return 2}},{key:"INFO",get:function(){return 3}},{key:"DEBUG",get:function(){return 4}},{key:"level",get:function(){return _},set:function(y){if(!(0<=y&&y<=4))throw new Error("Invalid log level");_=y}},{key:"logger",get:function(){return r},set:function(y){if(!y.debug&&y.info&&(y.debug=y.info),!(y.debug&&y.info&&y.warn&&y.error))throw new Error("Invalid logger");r=y}}]),p}()).reset()},function(N,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var q=function(){function p(g,y){for(var E=0;E<y.length;E++){var O=y[E];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(g,O.key,O)}}return function(g,y,E){return y&&p(g.prototype,y),E&&p(g,E),g}}(),Z={setInterval:function(p){function g(y,E){return p.apply(this,arguments)}return g.toString=function(){return p.toString()},g}(function(p,g){return setInterval(p,g)}),clearInterval:function(p){function g(y){return p.apply(this,arguments)}return g.toString=function(){return p.toString()},g}(function(p){return clearInterval(p)})},r=!1,_=null;S.Global=function(){function p(){!function(y,E){if(!(y instanceof E))throw new TypeError("Cannot call a class as a function")}(this,p)}return p._testing=function(){r=!0},p.setXMLHttpRequest=function(y){_=y},q(p,null,[{key:"location",get:function(){if(!r)return location}},{key:"localStorage",get:function(){if(!r&&typeof window<"u")return localStorage}},{key:"sessionStorage",get:function(){if(!r&&typeof window<"u")return sessionStorage}},{key:"XMLHttpRequest",get:function(){if(!r&&typeof window<"u")return _||XMLHttpRequest}},{key:"timer",get:function(){if(!r)return Z}}]),p}()},function(N,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.MetadataService=void 0;var q=function(){function g(y,E){for(var O=0;O<E.length;O++){var $=E[O];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(y,$.key,$)}}return function(y,E,O){return E&&g(y.prototype,E),O&&g(y,O),y}}(),Z=M(0),r=M(7);var p=".well-known/openid-configuration";S.MetadataService=function(){function g(y){var E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.JsonService;if(function _(g,y){if(!(g instanceof y))throw new TypeError("Cannot call a class as a function")}(this,g),!y)throw Z.Log.error("MetadataService: No settings passed to MetadataService"),new Error("settings");this._settings=y,this._jsonService=new E(["application/jwk-set+json"])}return g.prototype.resetSigningKeys=function(){this._settings=this._settings||{},this._settings.signingKeys=void 0},g.prototype.getMetadata=function(){var E=this;return this._settings.metadata?(Z.Log.debug("MetadataService.getMetadata: Returning metadata from settings"),Promise.resolve(this._settings.metadata)):this.metadataUrl?(Z.Log.debug("MetadataService.getMetadata: getting metadata from",this.metadataUrl),this._jsonService.getJson(this.metadataUrl).then(function(O){return Z.Log.debug("MetadataService.getMetadata: json received"),E._settings.metadata=Object.assign({},E._settings.metadataSeed||{},O),E._settings.metadata})):(Z.Log.error("MetadataService.getMetadata: No authority or metadataUrl configured on settings"),Promise.reject(new Error("No authority or metadataUrl configured on settings")))},g.prototype.getIssuer=function(){return this._getMetadataProperty("issuer")},g.prototype.getAuthorizationEndpoint=function(){return this._getMetadataProperty("authorization_endpoint")},g.prototype.getUserInfoEndpoint=function(){return this._getMetadataProperty("userinfo_endpoint")},g.prototype.getTokenEndpoint=function(){return this._getMetadataProperty("token_endpoint",!(arguments.length>0&&void 0!==arguments[0])||arguments[0])},g.prototype.getCheckSessionIframe=function(){return this._getMetadataProperty("check_session_iframe",!0)},g.prototype.getEndSessionEndpoint=function(){return this._getMetadataProperty("end_session_endpoint",!0)},g.prototype.getRevocationEndpoint=function(){return this._getMetadataProperty("revocation_endpoint",!0)},g.prototype.getKeysEndpoint=function(){return this._getMetadataProperty("jwks_uri",!0)},g.prototype._getMetadataProperty=function(E){var O=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Z.Log.debug("MetadataService.getMetadataProperty for: "+E),this.getMetadata().then(function($){if(Z.Log.debug("MetadataService.getMetadataProperty: metadata recieved"),void 0===$[E]){if(!0===O)return void Z.Log.warn("MetadataService.getMetadataProperty: Metadata does not contain optional property "+E);throw Z.Log.error("MetadataService.getMetadataProperty: Metadata does not contain property "+E),new Error("Metadata does not contain property "+E)}return $[E]})},g.prototype.getSigningKeys=function(){var E=this;return this._settings.signingKeys?(Z.Log.debug("MetadataService.getSigningKeys: Returning signingKeys from settings"),Promise.resolve(this._settings.signingKeys)):this._getMetadataProperty("jwks_uri").then(function(O){return Z.Log.debug("MetadataService.getSigningKeys: jwks_uri received",O),E._jsonService.getJson(O).then(function($){if(Z.Log.debug("MetadataService.getSigningKeys: key set received",$),!$.keys)throw Z.Log.error("MetadataService.getSigningKeys: Missing keys on keyset"),new Error("Missing keys on keyset");return E._settings.signingKeys=$.keys,E._settings.signingKeys})})},q(g,[{key:"metadataUrl",get:function(){return this._metadataUrl||(this._settings.metadataUrl?this._metadataUrl=this._settings.metadataUrl:(this._metadataUrl=this._settings.authority,this._metadataUrl&&this._metadataUrl.indexOf(p)<0&&("/"!==this._metadataUrl[this._metadataUrl.length-1]&&(this._metadataUrl+="/"),this._metadataUrl+=p))),this._metadataUrl}}]),g}()},function(N,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.UrlUtility=void 0;var q=M(0),Z=M(1);S.UrlUtility=function(){function r(){!function(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}(this,r)}return r.addQueryParam=function(p,g,y){return p.indexOf("?")<0&&(p+="?"),"?"!==p[p.length-1]&&(p+="&"),p+=encodeURIComponent(g),(p+="=")+encodeURIComponent(y)},r.parseUrlFragment=function(p){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#";"string"!=typeof p&&(p=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:Z.Global).location.href);var E=p.lastIndexOf(g);E>=0&&(p=p.substr(E+1)),"?"===g&&(E=p.indexOf("#"))>=0&&(p=p.substr(0,E));for(var O,$={},v=/([^&=]+)=([^&]*)/g,b=0;O=v.exec(p);)if($[decodeURIComponent(O[1])]=decodeURIComponent(O[2].replace(/\+/g," ")),b++>50)return q.Log.error("UrlUtility.parseUrlFragment: response exceeded expected number of parameters",p),{error:"Response exceeded expected number of parameters"};for(var V in $)return $;return{}},r}()},function(N,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.JoseUtil=void 0;var _,q=M(26),Z=(_=M(33))&&_.__esModule?_:{default:_};S.JoseUtil=(0,Z.default)({jws:q.jws,KeyUtil:q.KeyUtil,X509:q.X509,crypto:q.crypto,hextob64u:q.hextob64u,b64tohex:q.b64tohex,AllowedSigningAlgs:q.AllowedSigningAlgs})},function(N,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.OidcClientSettings=void 0;var q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(V){return typeof V}:function(V){return V&&"function"==typeof Symbol&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},Z=function(){function V(G,H){for(var te=0;te<H.length;te++){var z=H[te];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(G,z.key,z)}}return function(G,H,te){return H&&V(G.prototype,H),te&&V(G,te),G}}(),r=M(0),_=M(23),p=M(6),g=M(24),y=M(2);var O=".well-known/openid-configuration";S.OidcClientSettings=function(){function V(){var G=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},H=G.authority,te=G.metadataUrl,z=G.metadata,W=G.signingKeys,J=G.metadataSeed,se=G.client_id,ve=G.client_secret,xe=G.response_type,ge=void 0===xe?"id_token":xe,x=G.scope,D=void 0===x?"openid":x,P=G.redirect_uri,I=G.post_logout_redirect_uri,j=G.client_authentication,R=void 0===j?"client_secret_post":j,Q=G.prompt,ee=G.display,Re=G.max_age,ne=G.ui_locales,Fe=G.acr_values,rt=G.resource,Te=G.response_mode,tt=G.filterProtocolClaims,Qe=void 0===tt||tt,vt=G.loadUserInfo,et=void 0===vt||vt,$e=G.staleStateAge,it=void 0===$e?900:$e,de=G.clockSkew,Y=void 0===de?300:de,oe=G.clockService,ke=void 0===oe?new _.ClockService:oe,Be=G.userInfoJwtIssuer,fe=void 0===Be?"OP":Be,ye=G.mergeClaims,ut=void 0!==ye&&ye,be=G.stateStore,le=void 0===be?new p.WebStorageStateStore:be,ce=G.ResponseValidatorCtor,Ie=void 0===ce?g.ResponseValidator:ce,ot=G.MetadataServiceCtor,Tt=void 0===ot?y.MetadataService:ot,Nt=G.extraQueryParams,Gt=void 0===Nt?{}:Nt,un=G.extraTokenParams,Xt=void 0===un?{}:un;(function E(V,G){if(!(V instanceof G))throw new TypeError("Cannot call a class as a function")})(this,V),this._authority=H,this._metadataUrl=te,this._metadata=z,this._metadataSeed=J,this._signingKeys=W,this._client_id=se,this._client_secret=ve,this._response_type=ge,this._scope=D,this._redirect_uri=P,this._post_logout_redirect_uri=I,this._client_authentication=R,this._prompt=Q,this._display=ee,this._max_age=Re,this._ui_locales=ne,this._acr_values=Fe,this._resource=rt,this._response_mode=Te,this._filterProtocolClaims=!!Qe,this._loadUserInfo=!!et,this._staleStateAge=it,this._clockSkew=Y,this._clockService=ke,this._userInfoJwtIssuer=fe,this._mergeClaims=!!ut,this._stateStore=le,this._validator=new Ie(this),this._metadataService=new Tt(this),this._extraQueryParams="object"===(void 0===Gt?"undefined":q(Gt))?Gt:{},this._extraTokenParams="object"===(void 0===Xt?"undefined":q(Xt))?Xt:{}}return V.prototype.getEpochTime=function(){return this._clockService.getEpochTime()},Z(V,[{key:"client_id",get:function(){return this._client_id},set:function(H){if(this._client_id)throw r.Log.error("OidcClientSettings.set_client_id: client_id has already been assigned."),new Error("client_id has already been assigned.");this._client_id=H}},{key:"client_secret",get:function(){return this._client_secret}},{key:"response_type",get:function(){return this._response_type}},{key:"scope",get:function(){return this._scope}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"post_logout_redirect_uri",get:function(){return this._post_logout_redirect_uri}},{key:"client_authentication",get:function(){return this._client_authentication}},{key:"prompt",get:function(){return this._prompt}},{key:"display",get:function(){return this._display}},{key:"max_age",get:function(){return this._max_age}},{key:"ui_locales",get:function(){return this._ui_locales}},{key:"acr_values",get:function(){return this._acr_values}},{key:"resource",get:function(){return this._resource}},{key:"response_mode",get:function(){return this._response_mode}},{key:"authority",get:function(){return this._authority},set:function(H){if(this._authority)throw r.Log.error("OidcClientSettings.set_authority: authority has already been assigned."),new Error("authority has already been assigned.");this._authority=H}},{key:"metadataUrl",get:function(){return this._metadataUrl||(this._metadataUrl=this.authority,this._metadataUrl&&this._metadataUrl.indexOf(O)<0&&("/"!==this._metadataUrl[this._metadataUrl.length-1]&&(this._metadataUrl+="/"),this._metadataUrl+=O)),this._metadataUrl}},{key:"metadata",get:function(){return this._metadata},set:function(H){this._metadata=H}},{key:"metadataSeed",get:function(){return this._metadataSeed},set:function(H){this._metadataSeed=H}},{key:"signingKeys",get:function(){return this._signingKeys},set:function(H){this._signingKeys=H}},{key:"filterProtocolClaims",get:function(){return this._filterProtocolClaims}},{key:"loadUserInfo",get:function(){return this._loadUserInfo}},{key:"staleStateAge",get:function(){return this._staleStateAge}},{key:"clockSkew",get:function(){return this._clockSkew}},{key:"userInfoJwtIssuer",get:function(){return this._userInfoJwtIssuer}},{key:"mergeClaims",get:function(){return this._mergeClaims}},{key:"stateStore",get:function(){return this._stateStore}},{key:"validator",get:function(){return this._validator}},{key:"metadataService",get:function(){return this._metadataService}},{key:"extraQueryParams",get:function(){return this._extraQueryParams},set:function(H){this._extraQueryParams="object"===(void 0===H?"undefined":q(H))?H:{}}},{key:"extraTokenParams",get:function(){return this._extraTokenParams},set:function(H){this._extraTokenParams="object"===(void 0===H?"undefined":q(H))?H:{}}}]),V}()},function(N,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.WebStorageStateStore=void 0;var q=M(0),Z=M(1);S.WebStorageStateStore=function(){function _(){var p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},g=p.prefix,y=void 0===g?"oidc.":g,E=p.store,O=void 0===E?Z.Global.localStorage:E;(function r(_,p){if(!(_ instanceof p))throw new TypeError("Cannot call a class as a function")})(this,_),this._store=O,this._prefix=y}return _.prototype.set=function(g,y){return q.Log.debug("WebStorageStateStore.set",g),this._store.setItem(g=this._prefix+g,y),Promise.resolve()},_.prototype.get=function(g){q.Log.debug("WebStorageStateStore.get",g);var y=this._store.getItem(g=this._prefix+g);return Promise.resolve(y)},_.prototype.remove=function(g){q.Log.debug("WebStorageStateStore.remove",g);var y=this._store.getItem(g=this._prefix+g);return this._store.removeItem(g),Promise.resolve(y)},_.prototype.getAllKeys=function(){q.Log.debug("WebStorageStateStore.getAllKeys");for(var g=[],y=0;y<this._store.length;y++){var E=this._store.key(y);0===E.indexOf(this._prefix)&&g.push(E.substr(this._prefix.length))}return Promise.resolve(g)},_}()},function(N,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.JsonService=void 0;var q=M(0),Z=M(1);S.JsonService=function(){function _(){var p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Z.Global.XMLHttpRequest,y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(function r(_,p){if(!(_ instanceof p))throw new TypeError("Cannot call a class as a function")})(this,_),this._contentTypes=p&&Array.isArray(p)?p.slice():[],this._contentTypes.push("application/json"),y&&this._contentTypes.push("application/jwt"),this._XMLHttpRequest=g,this._jwtHandler=y}return _.prototype.getJson=function(g,y){var E=this;if(!g)throw q.Log.error("JsonService.getJson: No url passed"),new Error("url");return q.Log.debug("JsonService.getJson, url: ",g),new Promise(function(O,$){var v=new E._XMLHttpRequest;v.open("GET",g);var b=E._contentTypes,V=E._jwtHandler;v.onload=function(){if(q.Log.debug("JsonService.getJson: HTTP response received, status",v.status),200===v.status){var G=v.getResponseHeader("Content-Type");if(G){var H=b.find(function(te){if(G.startsWith(te))return!0});if("application/jwt"==H)return void V(v).then(O,$);if(H)try{return void O(JSON.parse(v.responseText))}catch(te){return q.Log.error("JsonService.getJson: Error parsing JSON response",te.message),void $(te)}}$(Error("Invalid response Content-Type: "+G+", from URL: "+g))}else $(Error(v.statusText+" ("+v.status+")"))},v.onerror=function(){q.Log.error("JsonService.getJson: network error"),$(Error("Network Error"))},y&&(q.Log.debug("JsonService.getJson: token passed, setting Authorization header"),v.setRequestHeader("Authorization","Bearer "+y)),v.send()})},_.prototype.postForm=function(g,y,E){var O=this;if(!g)throw q.Log.error("JsonService.postForm: No url passed"),new Error("url");return q.Log.debug("JsonService.postForm, url: ",g),new Promise(function($,v){var b=new O._XMLHttpRequest;b.open("POST",g);var V=O._contentTypes;b.onload=function(){if(q.Log.debug("JsonService.postForm: HTTP response received, status",b.status),200!==b.status){if(400===b.status&&(W=b.getResponseHeader("Content-Type"))&&V.find(function(J){if(W.startsWith(J))return!0}))try{var z=JSON.parse(b.responseText);if(z&&z.error)return q.Log.error("JsonService.postForm: Error from server: ",z.error),void v(new Error(z.error))}catch(J){return q.Log.error("JsonService.postForm: Error parsing JSON response",J.message),void v(J)}v(Error(b.statusText+" ("+b.status+")"))}else{var W;if((W=b.getResponseHeader("Content-Type"))&&V.find(function(J){if(W.startsWith(J))return!0}))try{return void $(JSON.parse(b.responseText))}catch(J){return q.Log.error("JsonService.postForm: Error parsing JSON response",J.message),void v(J)}v(Error("Invalid response Content-Type: "+W+", from URL: "+g))}},b.onerror=function(){q.Log.error("JsonService.postForm: network error"),v(Error("Network Error"))};var G="";for(var H in y){var te=y[H];te&&(G.length>0&&(G+="&"),G+=encodeURIComponent(H),G+="=",G+=encodeURIComponent(te))}b.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),void 0!==E&&b.setRequestHeader("Authorization","Basic "+btoa(E)),b.send(G)})},_}()},function(N,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.SigninRequest=void 0;var q=M(0),Z=M(3),r=M(13);S.SigninRequest=function(){function _(p){var g=p.url,y=p.client_id,E=p.redirect_uri,O=p.response_type,$=p.scope,v=p.authority,b=p.data,V=p.prompt,G=p.display,H=p.max_age,te=p.ui_locales,z=p.id_token_hint,W=p.login_hint,J=p.acr_values,se=p.resource,ve=p.response_mode,xe=p.request,ge=p.request_uri,x=p.extraQueryParams,D=p.request_type,P=p.client_secret,I=p.extraTokenParams,j=p.skipUserInfo;if(function(rt,Te){if(!(rt instanceof Te))throw new TypeError("Cannot call a class as a function")}(this,_),!g)throw q.Log.error("SigninRequest.ctor: No url passed"),new Error("url");if(!y)throw q.Log.error("SigninRequest.ctor: No client_id passed"),new Error("client_id");if(!E)throw q.Log.error("SigninRequest.ctor: No redirect_uri passed"),new Error("redirect_uri");if(!O)throw q.Log.error("SigninRequest.ctor: No response_type passed"),new Error("response_type");if(!$)throw q.Log.error("SigninRequest.ctor: No scope passed"),new Error("scope");if(!v)throw q.Log.error("SigninRequest.ctor: No authority passed"),new Error("authority");var R=_.isOidc(O),Q=_.isCode(O);ve||(ve=_.isCode(O)?"query":null),this.state=new r.SigninState({nonce:R,data:b,client_id:y,authority:v,redirect_uri:E,code_verifier:Q,request_type:D,response_mode:ve,client_secret:P,scope:$,extraTokenParams:I,skipUserInfo:j}),g=Z.UrlUtility.addQueryParam(g,"client_id",y),g=Z.UrlUtility.addQueryParam(g,"redirect_uri",E),g=Z.UrlUtility.addQueryParam(g,"response_type",O),g=Z.UrlUtility.addQueryParam(g,"scope",$),g=Z.UrlUtility.addQueryParam(g,"state",this.state.id),R&&(g=Z.UrlUtility.addQueryParam(g,"nonce",this.state.nonce)),Q&&(g=Z.UrlUtility.addQueryParam(g,"code_challenge",this.state.code_challenge),g=Z.UrlUtility.addQueryParam(g,"code_challenge_method","S256"));var ee={prompt:V,display:G,max_age:H,ui_locales:te,id_token_hint:z,login_hint:W,acr_values:J,resource:se,request:xe,request_uri:ge,response_mode:ve};for(var Re in ee)ee[Re]&&(g=Z.UrlUtility.addQueryParam(g,Re,ee[Re]));for(var ne in x)g=Z.UrlUtility.addQueryParam(g,ne,x[ne]);this.url=g}return _.isOidc=function(g){return!!g.split(/\s+/g).filter(function(y){return"id_token"===y})[0]},_.isOAuth=function(g){return!!g.split(/\s+/g).filter(function(y){return"token"===y})[0]},_.isCode=function(g){return!!g.split(/\s+/g).filter(function(y){return"code"===y})[0]},_}()},function(N,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.State=void 0;var g,q=function(){function p(g,y){for(var E=0;E<y.length;E++){var O=y[E];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(g,O.key,O)}}return function(g,y,E){return y&&p(g.prototype,y),E&&p(g,E),g}}(),Z=M(0),r=(g=M(14))&&g.__esModule?g:{default:g};S.State=function(){function p(){var g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},y=g.id,E=g.data,O=g.created,$=g.request_type;(function _(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")})(this,p),this._id=y||(0,r.default)(),this._data=E,this._created="number"==typeof O&&O>0?O:parseInt(Date.now()/1e3),this._request_type=$}return p.prototype.toStorageString=function(){return Z.Log.debug("State.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type})},p.fromStorageString=function(y){return Z.Log.debug("State.fromStorageString"),new p(JSON.parse(y))},p.clearStaleState=function(y,E){var O=Date.now()/1e3-E;return y.getAllKeys().then(function($){Z.Log.debug("State.clearStaleState: got keys",$);for(var v=[],b=function(te){var z=$[te];G=y.get(z).then(function(W){var J=!1;if(W)try{var se=p.fromStorageString(W);Z.Log.debug("State.clearStaleState: got item from key: ",z,se.created),se.created<=O&&(J=!0)}catch(ve){Z.Log.error("State.clearStaleState: Error parsing state for key",z,ve.message),J=!0}else Z.Log.debug("State.clearStaleState: no item in storage for key: ",z),J=!0;if(J)return Z.Log.debug("State.clearStaleState: removed item for key: ",z),y.remove(z)}),v.push(G)},V=0;V<$.length;V++){var G;b(V)}return Z.Log.debug("State.clearStaleState: waiting on promise count:",v.length),Promise.all(v)})},q(p,[{key:"id",get:function(){return this._id}},{key:"data",get:function(){return this._data}},{key:"created",get:function(){return this._created}},{key:"request_type",get:function(){return this._request_type}}]),p}()},function(N,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.OidcClient=void 0;var q=function(){function b(V,G){for(var H=0;H<G.length;H++){var te=G[H];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(V,te.key,te)}}return function(V,G,H){return G&&b(V.prototype,G),H&&b(V,H),V}}(),Z=M(0),r=M(5),_=M(12),p=M(8),g=M(34),y=M(35),E=M(36),O=M(13),$=M(9);S.OidcClient=function(){function b(){var V=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(function v(b,V){if(!(b instanceof V))throw new TypeError("Cannot call a class as a function")})(this,b),this._settings=V instanceof r.OidcClientSettings?V:new r.OidcClientSettings(V)}return b.prototype.createSigninRequest=function(){var G=this,H=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},te=H.response_type,z=H.scope,W=H.redirect_uri,J=H.data,se=H.state,ve=H.prompt,xe=H.display,ge=H.max_age,x=H.ui_locales,D=H.id_token_hint,P=H.login_hint,I=H.acr_values,j=H.resource,R=H.request,Q=H.request_uri,ee=H.response_mode,Re=H.extraQueryParams,ne=H.extraTokenParams,Fe=H.request_type,rt=H.skipUserInfo,Te=arguments[1];Z.Log.debug("OidcClient.createSigninRequest");var tt=this._settings.client_id;z=z||this._settings.scope,W=W||this._settings.redirect_uri,ve=ve||this._settings.prompt,xe=xe||this._settings.display,ge=ge||this._settings.max_age,x=x||this._settings.ui_locales,I=I||this._settings.acr_values,j=j||this._settings.resource,ee=ee||this._settings.response_mode,Re=Re||this._settings.extraQueryParams,ne=ne||this._settings.extraTokenParams;var Qe=this._settings.authority;return p.SigninRequest.isCode(te=te||this._settings.response_type)&&"code"!==te?Promise.reject(new Error("OpenID Connect hybrid flow is not supported")):this._metadataService.getAuthorizationEndpoint().then(function(vt){Z.Log.debug("OidcClient.createSigninRequest: Received authorization endpoint",vt);var et=new p.SigninRequest({url:vt,client_id:tt,redirect_uri:W,response_type:te,scope:z,data:J||se,authority:Qe,prompt:ve,display:xe,max_age:ge,ui_locales:x,id_token_hint:D,login_hint:P,acr_values:I,resource:j,request:R,request_uri:Q,extraQueryParams:Re,extraTokenParams:ne,request_type:Fe,response_mode:ee,client_secret:G._settings.client_secret,skipUserInfo:rt}),$e=et.state;return(Te=Te||G._stateStore).set($e.id,$e.toStorageString()).then(function(){return et})})},b.prototype.readSigninResponseState=function(G,H){var te=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Z.Log.debug("OidcClient.readSigninResponseState");var z="query"===this._settings.response_mode||!this._settings.response_mode&&p.SigninRequest.isCode(this._settings.response_type),J=new g.SigninResponse(G,z?"?":"#");return J.state?(H=H||this._stateStore,(te?H.remove.bind(H):H.get.bind(H))(J.state).then(function(ve){if(!ve)throw Z.Log.error("OidcClient.readSigninResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:O.SigninState.fromStorageString(ve),response:J}})):(Z.Log.error("OidcClient.readSigninResponseState: No state in response"),Promise.reject(new Error("No state in response")))},b.prototype.processSigninResponse=function(G,H){var te=this;return Z.Log.debug("OidcClient.processSigninResponse"),this.readSigninResponseState(G,H,!0).then(function(z){var W=z.state,J=z.response;return Z.Log.debug("OidcClient.processSigninResponse: Received state from storage; validating response"),te._validator.validateSigninResponse(W,J)})},b.prototype.createSignoutRequest=function(){var G=this,H=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},te=H.id_token_hint,z=H.data,W=H.state,J=H.post_logout_redirect_uri,se=H.extraQueryParams,ve=H.request_type,xe=arguments[1];return Z.Log.debug("OidcClient.createSignoutRequest"),J=J||this._settings.post_logout_redirect_uri,se=se||this._settings.extraQueryParams,this._metadataService.getEndSessionEndpoint().then(function(ge){if(!ge)throw Z.Log.error("OidcClient.createSignoutRequest: No end session endpoint url returned"),new Error("no end session endpoint");Z.Log.debug("OidcClient.createSignoutRequest: Received end session endpoint",ge);var x=new y.SignoutRequest({url:ge,id_token_hint:te,post_logout_redirect_uri:J,data:z||W,extraQueryParams:se,request_type:ve}),D=x.state;return D&&(Z.Log.debug("OidcClient.createSignoutRequest: Signout request has state to persist"),(xe=xe||G._stateStore).set(D.id,D.toStorageString())),x})},b.prototype.readSignoutResponseState=function(G,H){var te=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Z.Log.debug("OidcClient.readSignoutResponseState");var z=new E.SignoutResponse(G);if(!z.state)return Z.Log.debug("OidcClient.readSignoutResponseState: No state in response"),z.error?(Z.Log.warn("OidcClient.readSignoutResponseState: Response was error: ",z.error),Promise.reject(new _.ErrorResponse(z))):Promise.resolve({state:void 0,response:z});var W=z.state;return H=H||this._stateStore,(te?H.remove.bind(H):H.get.bind(H))(W).then(function(se){if(!se)throw Z.Log.error("OidcClient.readSignoutResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:$.State.fromStorageString(se),response:z}})},b.prototype.processSignoutResponse=function(G,H){var te=this;return Z.Log.debug("OidcClient.processSignoutResponse"),this.readSignoutResponseState(G,H,!0).then(function(z){var W=z.state,J=z.response;return W?(Z.Log.debug("OidcClient.processSignoutResponse: Received state from storage; validating response"),te._validator.validateSignoutResponse(W,J)):(Z.Log.debug("OidcClient.processSignoutResponse: No state from storage; skipping validating response"),J)})},b.prototype.clearStaleState=function(G){return Z.Log.debug("OidcClient.clearStaleState"),$.State.clearStaleState(G=G||this._stateStore,this.settings.staleStateAge)},q(b,[{key:"_stateStore",get:function(){return this.settings.stateStore}},{key:"_validator",get:function(){return this.settings.validator}},{key:"_metadataService",get:function(){return this.settings.metadataService}},{key:"settings",get:function(){return this._settings}},{key:"metadataService",get:function(){return this._metadataService}}]),b}()},function(N,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.TokenClient=void 0;var q=M(7),Z=M(2),r=M(0);S.TokenClient=function(){function p(g){var y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:q.JsonService,E=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Z.MetadataService;if(function _(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}(this,p),!g)throw r.Log.error("TokenClient.ctor: No settings passed"),new Error("settings");this._settings=g,this._jsonService=new y,this._metadataService=new E(this._settings)}return p.prototype.exchangeCode=function(){var y=this,E=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(E=Object.assign({},E)).grant_type=E.grant_type||"authorization_code",E.client_id=E.client_id||this._settings.client_id,E.client_secret=E.client_secret||this._settings.client_secret,E.redirect_uri=E.redirect_uri||this._settings.redirect_uri;var O=void 0,$=E._client_authentication||this._settings._client_authentication;return delete E._client_authentication,E.code?E.redirect_uri?E.code_verifier?E.client_id?E.client_secret||"client_secret_basic"!=$?("client_secret_basic"==$&&(O=E.client_id+":"+E.client_secret,delete E.client_id,delete E.client_secret),this._metadataService.getTokenEndpoint(!1).then(function(v){return r.Log.debug("TokenClient.exchangeCode: Received token endpoint"),y._jsonService.postForm(v,E,O).then(function(b){return r.Log.debug("TokenClient.exchangeCode: response received"),b})})):(r.Log.error("TokenClient.exchangeCode: No client_secret passed"),Promise.reject(new Error("A client_secret is required"))):(r.Log.error("TokenClient.exchangeCode: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(r.Log.error("TokenClient.exchangeCode: No code_verifier passed"),Promise.reject(new Error("A code_verifier is required"))):(r.Log.error("TokenClient.exchangeCode: No redirect_uri passed"),Promise.reject(new Error("A redirect_uri is required"))):(r.Log.error("TokenClient.exchangeCode: No code passed"),Promise.reject(new Error("A code is required")))},p.prototype.exchangeRefreshToken=function(){var y=this,E=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(E=Object.assign({},E)).grant_type=E.grant_type||"refresh_token",E.client_id=E.client_id||this._settings.client_id,E.client_secret=E.client_secret||this._settings.client_secret;var O=void 0,$=E._client_authentication||this._settings._client_authentication;return delete E._client_authentication,E.refresh_token?E.client_id?("client_secret_basic"==$&&(O=E.client_id+":"+E.client_secret,delete E.client_id,delete E.client_secret),this._metadataService.getTokenEndpoint(!1).then(function(v){return r.Log.debug("TokenClient.exchangeRefreshToken: Received token endpoint"),y._jsonService.postForm(v,E,O).then(function(b){return r.Log.debug("TokenClient.exchangeRefreshToken: response received"),b})})):(r.Log.error("TokenClient.exchangeRefreshToken: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(r.Log.error("TokenClient.exchangeRefreshToken: No refresh_token passed"),Promise.reject(new Error("A refresh_token is required")))},p}()},function(N,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.ErrorResponse=void 0;var q=M(0);S.ErrorResponse=function(_){function p(){var g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},y=g.error,E=g.error_description,O=g.error_uri,$=g.state,v=g.session_state;if(function Z(_,p){if(!(_ instanceof p))throw new TypeError("Cannot call a class as a function")}(this,p),!y)throw q.Log.error("No error passed to ErrorResponse"),new Error("error");var b=function r(_,p){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!p||"object"!=typeof p&&"function"!=typeof p?_:p}(this,_.call(this,E||y));return b.name="ErrorResponse",b.error=y,b.error_description=E,b.error_uri=O,b.state=$,b.session_state=v,b}return function(y,E){if("function"!=typeof E&&null!==E)throw new TypeError("Super expression must either be null or a function, not "+typeof E);y.prototype=Object.create(E&&E.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(y,E):y.__proto__=E)}(p,_),p}(Error)},function(N,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.SigninState=void 0;var O,q=function(){function E(O,$){for(var v=0;v<$.length;v++){var b=$[v];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(O,b.key,b)}}return function(O,$,v){return $&&E(O.prototype,$),v&&E(O,v),O}}(),Z=M(0),r=M(9),_=M(4),p=(O=M(14))&&O.__esModule?O:{default:O};S.SigninState=function(E){function O(){var $=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},v=$.nonce,b=$.authority,V=$.client_id,G=$.redirect_uri,H=$.code_verifier,te=$.response_mode,z=$.client_secret,W=$.scope,J=$.extraTokenParams,se=$.skipUserInfo;!function g(E,O){if(!(E instanceof O))throw new TypeError("Cannot call a class as a function")}(this,O);var ve=function y(E,O){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!O||"object"!=typeof O&&"function"!=typeof O?E:O}(this,E.call(this,arguments[0]));if(!0===v?ve._nonce=(0,p.default)():v&&(ve._nonce=v),!0===H?ve._code_verifier=(0,p.default)()+(0,p.default)()+(0,p.default)():H&&(ve._code_verifier=H),ve.code_verifier){var xe=_.JoseUtil.hashString(ve.code_verifier,"SHA256");ve._code_challenge=_.JoseUtil.hexToBase64Url(xe)}return ve._redirect_uri=G,ve._authority=b,ve._client_id=V,ve._response_mode=te,ve._client_secret=z,ve._scope=W,ve._extraTokenParams=J,ve._skipUserInfo=se,ve}return function(v,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(v,b):v.__proto__=b)}(O,E),O.prototype.toStorageString=function(){return Z.Log.debug("SigninState.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,nonce:this.nonce,code_verifier:this.code_verifier,redirect_uri:this.redirect_uri,authority:this.authority,client_id:this.client_id,response_mode:this.response_mode,client_secret:this.client_secret,scope:this.scope,extraTokenParams:this.extraTokenParams,skipUserInfo:this.skipUserInfo})},O.fromStorageString=function(v){return Z.Log.debug("SigninState.fromStorageString"),new O(JSON.parse(v))},q(O,[{key:"nonce",get:function(){return this._nonce}},{key:"authority",get:function(){return this._authority}},{key:"client_id",get:function(){return this._client_id}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"code_verifier",get:function(){return this._code_verifier}},{key:"code_challenge",get:function(){return this._code_challenge}},{key:"response_mode",get:function(){return this._response_mode}},{key:"client_secret",get:function(){return this._client_secret}},{key:"scope",get:function(){return this._scope}},{key:"extraTokenParams",get:function(){return this._extraTokenParams}},{key:"skipUserInfo",get:function(){return this._skipUserInfo}}]),O}(r.State)},function(N,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.default=function(){return("undefined"!=q&&null!==q&&void 0!==q.getRandomValues?Z:r)().replace(/-/g,"")};var q=typeof window<"u"?window.crypto||window.msCrypto:null;function Z(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(_){return(_^q.getRandomValues(new Uint8Array(1))[0]&15>>_/4).toString(16)})}function r(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(_){return(_^16*Math.random()>>_/4).toString(16)})}N.exports=S.default},function(N,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.User=void 0;var q=function(){function r(_,p){for(var g=0;g<p.length;g++){var y=p[g];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(_,y.key,y)}}return function(_,p,g){return p&&r(_.prototype,p),g&&r(_,g),_}}(),Z=M(0);S.User=function(){function r(_){var p=_.id_token,g=_.session_state,y=_.access_token,E=_.refresh_token,O=_.token_type,$=_.scope,v=_.profile,b=_.expires_at,V=_.state;(function(H,te){if(!(H instanceof te))throw new TypeError("Cannot call a class as a function")})(this,r),this.id_token=p,this.session_state=g,this.access_token=y,this.refresh_token=E,this.token_type=O,this.scope=$,this.profile=v,this.expires_at=b,this.state=V}return r.prototype.toStorageString=function(){return Z.Log.debug("User.toStorageString"),JSON.stringify({id_token:this.id_token,session_state:this.session_state,access_token:this.access_token,refresh_token:this.refresh_token,token_type:this.token_type,scope:this.scope,profile:this.profile,expires_at:this.expires_at})},r.fromStorageString=function(p){return Z.Log.debug("User.fromStorageString"),new r(JSON.parse(p))},q(r,[{key:"expires_in",get:function(){if(this.expires_at){var p=parseInt(Date.now()/1e3);return this.expires_at-p}},set:function(p){var g=parseInt(p);if("number"==typeof g&&g>0){var y=parseInt(Date.now()/1e3);this.expires_at=y+g}}},{key:"expired",get:function(){var p=this.expires_in;if(void 0!==p)return p<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}}]),r}()},function(N,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.AccessTokenEvents=void 0;var q=M(0),Z=M(46);S.AccessTokenEvents=function(){function _(){var p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},g=p.accessTokenExpiringNotificationTime,y=void 0===g?60:g,E=p.accessTokenExpiringTimer,O=void 0===E?new Z.Timer("Access token expiring"):E,$=p.accessTokenExpiredTimer,v=void 0===$?new Z.Timer("Access token expired"):$;(function r(_,p){if(!(_ instanceof p))throw new TypeError("Cannot call a class as a function")})(this,_),this._accessTokenExpiringNotificationTime=y,this._accessTokenExpiring=O,this._accessTokenExpired=v}return _.prototype.load=function(g){if(g.access_token&&void 0!==g.expires_in){var y=g.expires_in;if(q.Log.debug("AccessTokenEvents.load: access token present, remaining duration:",y),y>0){var E=y-this._accessTokenExpiringNotificationTime;E<=0&&(E=1),q.Log.debug("AccessTokenEvents.load: registering expiring timer in:",E),this._accessTokenExpiring.init(E)}else q.Log.debug("AccessTokenEvents.load: canceling existing expiring timer becase we're past expiration."),this._accessTokenExpiring.cancel();var O=y+1;q.Log.debug("AccessTokenEvents.load: registering expired timer in:",O),this._accessTokenExpired.init(O)}else this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},_.prototype.unload=function(){q.Log.debug("AccessTokenEvents.unload: canceling existing access token timers"),this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},_.prototype.addAccessTokenExpiring=function(g){this._accessTokenExpiring.addHandler(g)},_.prototype.removeAccessTokenExpiring=function(g){this._accessTokenExpiring.removeHandler(g)},_.prototype.addAccessTokenExpired=function(g){this._accessTokenExpired.addHandler(g)},_.prototype.removeAccessTokenExpired=function(g){this._accessTokenExpired.removeHandler(g)},_}()},function(N,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.Event=void 0;var q=M(0);S.Event=function(){function Z(r){(function(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")})(this,Z),this._name=r,this._callbacks=[]}return Z.prototype.addHandler=function(_){this._callbacks.push(_)},Z.prototype.removeHandler=function(_){var p=this._callbacks.findIndex(function(g){return g===_});p>=0&&this._callbacks.splice(p,1)},Z.prototype.raise=function(){q.Log.debug("Event: Raising event: "+this._name);for(var _=0;_<this._callbacks.length;_++){var p;(p=this._callbacks)[_].apply(p,arguments)}},Z}()},function(N,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.SessionMonitor=void 0;var q=function(){function g(y,E){for(var O=0;O<E.length;O++){var $=E[O];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(y,$.key,$)}}return function(y,E,O){return E&&g(y.prototype,E),O&&g(y,O),y}}(),Z=M(0),r=M(19),_=M(1);S.SessionMonitor=function(){function g(y){var E=this,O=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.CheckSessionIFrame,$=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_.Global.timer;if(function p(g,y){if(!(g instanceof y))throw new TypeError("Cannot call a class as a function")}(this,g),!y)throw Z.Log.error("SessionMonitor.ctor: No user manager passed to SessionMonitor"),new Error("userManager");this._userManager=y,this._CheckSessionIFrameCtor=O,this._timer=$,this._userManager.events.addUserLoaded(this._start.bind(this)),this._userManager.events.addUserUnloaded(this._stop.bind(this)),Promise.resolve(this._userManager.getUser().then(function(v){v?E._start(v):E._settings.monitorAnonymousSession&&E._userManager.querySessionStatus().then(function(b){var V={session_state:b.session_state};b.sub&&b.sid&&(V.profile={sub:b.sub,sid:b.sid}),E._start(V)}).catch(function(b){Z.Log.error("SessionMonitor ctor: error from querySessionStatus:",b.message)})}).catch(function(v){Z.Log.error("SessionMonitor ctor: error from getUser:",v.message)}))}return g.prototype._start=function(E){var O=this,$=E.session_state;$&&(E.profile?(this._sub=E.profile.sub,this._sid=E.profile.sid,Z.Log.debug("SessionMonitor._start: session_state:",$,", sub:",this._sub)):(this._sub=void 0,this._sid=void 0,Z.Log.debug("SessionMonitor._start: session_state:",$,", anonymous user")),this._checkSessionIFrame?this._checkSessionIFrame.start($):this._metadataService.getCheckSessionIframe().then(function(v){if(v){Z.Log.debug("SessionMonitor._start: Initializing check session iframe");var b=O._client_id,V=O._checkSessionInterval,G=O._stopCheckSessionOnError;O._checkSessionIFrame=new O._CheckSessionIFrameCtor(O._callback.bind(O),b,v,V,G),O._checkSessionIFrame.load().then(function(){O._checkSessionIFrame.start($)})}else Z.Log.warn("SessionMonitor._start: No check session iframe found in the metadata")}).catch(function(v){Z.Log.error("SessionMonitor._start: Error from getCheckSessionIframe:",v.message)}))},g.prototype._stop=function(){var E=this;if(this._sub=void 0,this._sid=void 0,this._checkSessionIFrame&&(Z.Log.debug("SessionMonitor._stop"),this._checkSessionIFrame.stop()),this._settings.monitorAnonymousSession)var O=this._timer.setInterval(function(){E._timer.clearInterval(O),E._userManager.querySessionStatus().then(function($){var v={session_state:$.session_state};$.sub&&$.sid&&(v.profile={sub:$.sub,sid:$.sid}),E._start(v)}).catch(function($){Z.Log.error("SessionMonitor: error from querySessionStatus:",$.message)})},1e3)},g.prototype._callback=function(){var E=this;this._userManager.querySessionStatus().then(function(O){var $=!0;O?O.sub===E._sub?($=!1,E._checkSessionIFrame.start(O.session_state),O.sid===E._sid?Z.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, restarting check session iframe; session_state:",O.session_state):(Z.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, session state has changed, restarting check session iframe; session_state:",O.session_state),E._userManager.events._raiseUserSessionChanged())):Z.Log.debug("SessionMonitor._callback: Different subject signed into OP:",O.sub):Z.Log.debug("SessionMonitor._callback: Subject no longer signed into OP"),$&&(E._sub?(Z.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed out event"),E._userManager.events._raiseUserSignedOut()):(Z.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed in event"),E._userManager.events._raiseUserSignedIn()))}).catch(function(O){E._sub&&(Z.Log.debug("SessionMonitor._callback: Error calling queryCurrentSigninSession; raising signed out event",O.message),E._userManager.events._raiseUserSignedOut())})},q(g,[{key:"_settings",get:function(){return this._userManager.settings}},{key:"_metadataService",get:function(){return this._userManager.metadataService}},{key:"_client_id",get:function(){return this._settings.client_id}},{key:"_checkSessionInterval",get:function(){return this._settings.checkSessionInterval}},{key:"_stopCheckSessionOnError",get:function(){return this._settings.stopCheckSessionOnError}}]),g}()},function(N,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.CheckSessionIFrame=void 0;var q=M(0);S.CheckSessionIFrame=function(){function r(_,p,g,y){var E=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];(function Z(r,_){if(!(r instanceof _))throw new TypeError("Cannot call a class as a function")})(this,r),this._callback=_,this._client_id=p,this._url=g,this._interval=y||2e3,this._stopOnError=E;var O=g.indexOf("/",g.indexOf("//")+2);this._frame_origin=g.substr(0,O),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.style.display="none",this._frame.width=0,this._frame.height=0,this._frame.src=g}return r.prototype.load=function(){var p=this;return new Promise(function(g){p._frame.onload=function(){g()},window.document.body.appendChild(p._frame),p._boundMessageEvent=p._message.bind(p),window.addEventListener("message",p._boundMessageEvent,!1)})},r.prototype._message=function(p){p.origin===this._frame_origin&&p.source===this._frame.contentWindow&&("error"===p.data?(q.Log.error("CheckSessionIFrame: error message from check session op iframe"),this._stopOnError&&this.stop()):"changed"===p.data?(q.Log.debug("CheckSessionIFrame: changed message from check session op iframe"),this.stop(),this._callback()):q.Log.debug("CheckSessionIFrame: "+p.data+" message from check session op iframe"))},r.prototype.start=function(p){var g=this;if(this._session_state!==p){q.Log.debug("CheckSessionIFrame.start"),this.stop(),this._session_state=p;var y=function(){g._frame.contentWindow.postMessage(g._client_id+" "+g._session_state,g._frame_origin)};y(),this._timer=window.setInterval(y,this._interval)}},r.prototype.stop=function(){this._session_state=null,this._timer&&(q.Log.debug("CheckSessionIFrame.stop"),window.clearInterval(this._timer),this._timer=null)},r}()},function(N,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.TokenRevocationClient=void 0;var q=M(0),Z=M(2),r=M(1);S.TokenRevocationClient=function(){function y(E){var O=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.Global.XMLHttpRequest,$=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Z.MetadataService;if(function _(y,E){if(!(y instanceof E))throw new TypeError("Cannot call a class as a function")}(this,y),!E)throw q.Log.error("TokenRevocationClient.ctor: No settings provided"),new Error("No settings provided.");this._settings=E,this._XMLHttpRequestCtor=O,this._metadataService=new $(this._settings)}return y.prototype.revoke=function(O,$){var v=this,b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"access_token";if(!O)throw q.Log.error("TokenRevocationClient.revoke: No token provided"),new Error("No token provided.");if("access_token"!==b&&"refresh_token"!=b)throw q.Log.error("TokenRevocationClient.revoke: Invalid token type"),new Error("Invalid token type.");return this._metadataService.getRevocationEndpoint().then(function(V){if(V)return q.Log.debug("TokenRevocationClient.revoke: Revoking "+b),v._revoke(V,v._settings.client_id,v._settings.client_secret,O,b);if($)throw q.Log.error("TokenRevocationClient.revoke: Revocation not supported"),new Error("Revocation not supported")})},y.prototype._revoke=function(O,$,v,b,V){var G=this;return new Promise(function(H,te){var z=new G._XMLHttpRequestCtor;z.open("POST",O),z.onload=function(){q.Log.debug("TokenRevocationClient.revoke: HTTP response received, status",z.status),200===z.status?H():te(Error(z.statusText+" ("+z.status+")"))},z.onerror=function(){q.Log.debug("TokenRevocationClient.revoke: Network Error."),te("Network Error")};var W="client_id="+encodeURIComponent($);v&&(W+="&client_secret="+encodeURIComponent(v)),W+="&token_type_hint="+encodeURIComponent(V),W+="&token="+encodeURIComponent(b),z.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),z.send(W)})},y}()},function(N,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.CordovaPopupWindow=void 0;var q=function(){function r(_,p){for(var g=0;g<p.length;g++){var y=p[g];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(_,y.key,y)}}return function(_,p,g){return p&&r(_.prototype,p),g&&r(_,g),_}}(),Z=M(0);S.CordovaPopupWindow=function(){function r(_){var p=this;(function(y,E){if(!(y instanceof E))throw new TypeError("Cannot call a class as a function")})(this,r),this._promise=new Promise(function(g,y){p._resolve=g,p._reject=y}),this.features=_.popupWindowFeatures||"location=no,toolbar=no,zoom=no",this.target=_.popupWindowTarget||"_blank",this.redirect_uri=_.startUrl,Z.Log.debug("CordovaPopupWindow.ctor: redirect_uri: "+this.redirect_uri)}return r.prototype._isInAppBrowserInstalled=function(p){return["cordova-plugin-inappbrowser","cordova-plugin-inappbrowser.inappbrowser","org.apache.cordova.inappbrowser"].some(function(g){return p.hasOwnProperty(g)})},r.prototype.navigate=function(p){if(p&&p.url){if(!window.cordova)return this._error("cordova is undefined");var g=window.cordova.require("cordova/plugin_list").metadata;if(!1===this._isInAppBrowserInstalled(g))return this._error("InAppBrowser plugin not found");this._popup=cordova.InAppBrowser.open(p.url,this.target,this.features),this._popup?(Z.Log.debug("CordovaPopupWindow.navigate: popup successfully created"),this._exitCallbackEvent=this._exitCallback.bind(this),this._loadStartCallbackEvent=this._loadStartCallback.bind(this),this._popup.addEventListener("exit",this._exitCallbackEvent,!1),this._popup.addEventListener("loadstart",this._loadStartCallbackEvent,!1)):this._error("Error opening popup window")}else this._error("No url provided");return this.promise},r.prototype._loadStartCallback=function(p){0===p.url.indexOf(this.redirect_uri)&&this._success({url:p.url})},r.prototype._exitCallback=function(p){this._error(p)},r.prototype._success=function(p){this._cleanup(),Z.Log.debug("CordovaPopupWindow: Successful response from cordova popup window"),this._resolve(p)},r.prototype._error=function(p){this._cleanup(),Z.Log.error(p),this._reject(new Error(p))},r.prototype.close=function(){this._cleanup()},r.prototype._cleanup=function(){this._popup&&(Z.Log.debug("CordovaPopupWindow: cleaning up popup"),this._popup.removeEventListener("exit",this._exitCallbackEvent,!1),this._popup.removeEventListener("loadstart",this._loadStartCallbackEvent,!1),this._popup.close()),this._popup=null},q(r,[{key:"promise",get:function(){return this._promise}}]),r}()},function(N,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var q=M(0),Z=M(10),r=M(5),_=M(6),p=M(37),g=M(38),y=M(16),E=M(2),O=M(48),$=M(49),v=M(19),b=M(20),V=M(18),G=M(1),H=M(15),te=M(50);S.default={Version:te.Version,Log:q.Log,OidcClient:Z.OidcClient,OidcClientSettings:r.OidcClientSettings,WebStorageStateStore:_.WebStorageStateStore,InMemoryWebStorage:p.InMemoryWebStorage,UserManager:g.UserManager,AccessTokenEvents:y.AccessTokenEvents,MetadataService:E.MetadataService,CordovaPopupNavigator:O.CordovaPopupNavigator,CordovaIFrameNavigator:$.CordovaIFrameNavigator,CheckSessionIFrame:v.CheckSessionIFrame,TokenRevocationClient:b.TokenRevocationClient,SessionMonitor:V.SessionMonitor,Global:G.Global,User:H.User},N.exports=S.default},function(N,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.ClockService=function(){function q(){!function(r,_){if(!(r instanceof _))throw new TypeError("Cannot call a class as a function")}(this,q)}return q.prototype.getEpochTime=function(){return Promise.resolve(Date.now()/1e3|0)},q}()},function(N,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.ResponseValidator=void 0;var q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function($){return typeof $}:function($){return $&&"function"==typeof Symbol&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},Z=M(0),r=M(2),_=M(25),p=M(11),g=M(12),y=M(4);var O=["nonce","at_hash","iat","nbf","exp","aud","iss","c_hash"];S.ResponseValidator=function(){function $(v){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.MetadataService,V=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_.UserInfoService,G=arguments.length>3&&void 0!==arguments[3]?arguments[3]:y.JoseUtil,H=arguments.length>4&&void 0!==arguments[4]?arguments[4]:p.TokenClient;if(function E($,v){if(!($ instanceof v))throw new TypeError("Cannot call a class as a function")}(this,$),!v)throw Z.Log.error("ResponseValidator.ctor: No settings passed to ResponseValidator"),new Error("settings");this._settings=v,this._metadataService=new b(this._settings),this._userInfoService=new V(this._settings),this._joseUtil=G,this._tokenClient=new H(this._settings)}return $.prototype.validateSigninResponse=function(b,V){var G=this;return Z.Log.debug("ResponseValidator.validateSigninResponse"),this._processSigninParams(b,V).then(function(H){return Z.Log.debug("ResponseValidator.validateSigninResponse: state processed"),G._validateTokens(b,H).then(function(te){return Z.Log.debug("ResponseValidator.validateSigninResponse: tokens validated"),G._processClaims(b,te).then(function(z){return Z.Log.debug("ResponseValidator.validateSigninResponse: claims processed"),z})})})},$.prototype.validateSignoutResponse=function(b,V){return b.id!==V.state?(Z.Log.error("ResponseValidator.validateSignoutResponse: State does not match"),Promise.reject(new Error("State does not match"))):(Z.Log.debug("ResponseValidator.validateSignoutResponse: state validated"),V.state=b.data,V.error?(Z.Log.warn("ResponseValidator.validateSignoutResponse: Response was error",V.error),Promise.reject(new g.ErrorResponse(V))):Promise.resolve(V))},$.prototype._processSigninParams=function(b,V){if(b.id!==V.state)return Z.Log.error("ResponseValidator._processSigninParams: State does not match"),Promise.reject(new Error("State does not match"));if(!b.client_id)return Z.Log.error("ResponseValidator._processSigninParams: No client_id on state"),Promise.reject(new Error("No client_id on state"));if(!b.authority)return Z.Log.error("ResponseValidator._processSigninParams: No authority on state"),Promise.reject(new Error("No authority on state"));if(this._settings.authority){if(this._settings.authority&&this._settings.authority!==b.authority)return Z.Log.error("ResponseValidator._processSigninParams: authority mismatch on settings vs. signin state"),Promise.reject(new Error("authority mismatch on settings vs. signin state"))}else this._settings.authority=b.authority;if(this._settings.client_id){if(this._settings.client_id&&this._settings.client_id!==b.client_id)return Z.Log.error("ResponseValidator._processSigninParams: client_id mismatch on settings vs. signin state"),Promise.reject(new Error("client_id mismatch on settings vs. signin state"))}else this._settings.client_id=b.client_id;return Z.Log.debug("ResponseValidator._processSigninParams: state validated"),V.state=b.data,V.error?(Z.Log.warn("ResponseValidator._processSigninParams: Response was error",V.error),Promise.reject(new g.ErrorResponse(V))):b.nonce&&!V.id_token?(Z.Log.error("ResponseValidator._processSigninParams: Expecting id_token in response"),Promise.reject(new Error("No id_token in response"))):!b.nonce&&V.id_token?(Z.Log.error("ResponseValidator._processSigninParams: Not expecting id_token in response"),Promise.reject(new Error("Unexpected id_token in response"))):b.code_verifier&&!V.code?(Z.Log.error("ResponseValidator._processSigninParams: Expecting code in response"),Promise.reject(new Error("No code in response"))):!b.code_verifier&&V.code?(Z.Log.error("ResponseValidator._processSigninParams: Not expecting code in response"),Promise.reject(new Error("Unexpected code in response"))):(V.scope||(V.scope=b.scope),Promise.resolve(V))},$.prototype._processClaims=function(b,V){var G=this;if(V.isOpenIdConnect){if(Z.Log.debug("ResponseValidator._processClaims: response is OIDC, processing claims"),V.profile=this._filterProtocolClaims(V.profile),!0!==b.skipUserInfo&&this._settings.loadUserInfo&&V.access_token)return Z.Log.debug("ResponseValidator._processClaims: loading user info"),this._userInfoService.getClaims(V.access_token).then(function(H){return Z.Log.debug("ResponseValidator._processClaims: user info claims received from user info endpoint"),H.sub!==V.profile.sub?(Z.Log.error("ResponseValidator._processClaims: sub from user info endpoint does not match sub in id_token"),Promise.reject(new Error("sub from user info endpoint does not match sub in id_token"))):(V.profile=G._mergeClaims(V.profile,H),Z.Log.debug("ResponseValidator._processClaims: user info claims received, updated profile:",V.profile),V)});Z.Log.debug("ResponseValidator._processClaims: not loading user info")}else Z.Log.debug("ResponseValidator._processClaims: response is not OIDC, not processing claims");return Promise.resolve(V)},$.prototype._mergeClaims=function(b,V){var G=Object.assign({},b);for(var H in V){var te=V[H];Array.isArray(te)||(te=[te]);for(var z=0;z<te.length;z++){var W=te[z];G[H]?Array.isArray(G[H])?G[H].indexOf(W)<0&&G[H].push(W):G[H]!==W&&(G[H]="object"===(void 0===W?"undefined":q(W))&&this._settings.mergeClaims?this._mergeClaims(G[H],W):[G[H],W]):G[H]=W}}return G},$.prototype._filterProtocolClaims=function(b){Z.Log.debug("ResponseValidator._filterProtocolClaims, incoming claims:",b);var V=Object.assign({},b);return this._settings._filterProtocolClaims?(O.forEach(function(G){delete V[G]}),Z.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims filtered",V)):Z.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims not filtered"),V},$.prototype._validateTokens=function(b,V){return V.code?(Z.Log.debug("ResponseValidator._validateTokens: Validating code"),this._processCode(b,V)):V.id_token?V.access_token?(Z.Log.debug("ResponseValidator._validateTokens: Validating id_token and access_token"),this._validateIdTokenAndAccessToken(b,V)):(Z.Log.debug("ResponseValidator._validateTokens: Validating id_token"),this._validateIdToken(b,V)):(Z.Log.debug("ResponseValidator._validateTokens: No code to process or id_token to validate"),Promise.resolve(V))},$.prototype._processCode=function(b,V){var G=this,H={client_id:b.client_id,client_secret:b.client_secret,code:V.code,redirect_uri:b.redirect_uri,code_verifier:b.code_verifier};return b.extraTokenParams&&"object"===q(b.extraTokenParams)&&Object.assign(H,b.extraTokenParams),this._tokenClient.exchangeCode(H).then(function(te){for(var z in te)V[z]=te[z];return V.id_token?(Z.Log.debug("ResponseValidator._processCode: token response successful, processing id_token"),G._validateIdTokenAttributes(b,V)):(Z.Log.debug("ResponseValidator._processCode: token response successful, returning response"),V)})},$.prototype._validateIdTokenAttributes=function(b,V){var G=this;return this._metadataService.getIssuer().then(function(H){var te=b.client_id,z=G._settings.clockSkew;return Z.Log.debug("ResponseValidator._validateIdTokenAttributes: Validaing JWT attributes; using clock skew (in seconds) of: ",z),G._settings.getEpochTime().then(function(W){return G._joseUtil.validateJwtAttributes(V.id_token,H,te,z,W).then(function(J){return b.nonce&&b.nonce!==J.nonce?(Z.Log.error("ResponseValidator._validateIdTokenAttributes: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"))):J.sub?(V.profile=J,V):(Z.Log.error("ResponseValidator._validateIdTokenAttributes: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))})})})},$.prototype._validateIdTokenAndAccessToken=function(b,V){var G=this;return this._validateIdToken(b,V).then(function(H){return G._validateAccessToken(H)})},$.prototype._getSigningKeyForJwt=function(b){var V=this;return this._metadataService.getSigningKeys().then(function(G){var H=b.header.kid;if(!G)return Z.Log.error("ResponseValidator._validateIdToken: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));Z.Log.debug("ResponseValidator._validateIdToken: Received signing keys");var te=void 0;if(H)te=G.filter(function(z){return z.kid===H})[0];else{if((G=V._filterByAlg(G,b.header.alg)).length>1)return Z.Log.error("ResponseValidator._validateIdToken: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));te=G[0]}return Promise.resolve(te)})},$.prototype._getSigningKeyForJwtWithSingleRetry=function(b){var V=this;return this._getSigningKeyForJwt(b).then(function(G){return G?Promise.resolve(G):(V._metadataService.resetSigningKeys(),V._getSigningKeyForJwt(b))})},$.prototype._validateIdToken=function(b,V){var G=this;if(!b.nonce)return Z.Log.error("ResponseValidator._validateIdToken: No nonce on state"),Promise.reject(new Error("No nonce on state"));var H=this._joseUtil.parseJwt(V.id_token);return H&&H.header&&H.payload?b.nonce!==H.payload.nonce?(Z.Log.error("ResponseValidator._validateIdToken: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"))):this._metadataService.getIssuer().then(function(te){return Z.Log.debug("ResponseValidator._validateIdToken: Received issuer"),G._getSigningKeyForJwtWithSingleRetry(H).then(function(z){if(!z)return Z.Log.error("ResponseValidator._validateIdToken: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var W=b.client_id,J=G._settings.clockSkew;return Z.Log.debug("ResponseValidator._validateIdToken: Validaing JWT; using clock skew (in seconds) of: ",J),G._joseUtil.validateJwt(V.id_token,z,te,W,J).then(function(){return Z.Log.debug("ResponseValidator._validateIdToken: JWT validation successful"),H.payload.sub?(V.profile=H.payload,V):(Z.Log.error("ResponseValidator._validateIdToken: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))})})}):(Z.Log.error("ResponseValidator._validateIdToken: Failed to parse id_token",H),Promise.reject(new Error("Failed to parse id_token")))},$.prototype._filterByAlg=function(b,V){var G=null;if(V.startsWith("RS"))G="RSA";else if(V.startsWith("PS"))G="PS";else{if(!V.startsWith("ES"))return Z.Log.debug("ResponseValidator._filterByAlg: alg not supported: ",V),[];G="EC"}return Z.Log.debug("ResponseValidator._filterByAlg: Looking for keys that match kty: ",G),b=b.filter(function(H){return H.kty===G}),Z.Log.debug("ResponseValidator._filterByAlg: Number of keys that match kty: ",G,b.length),b},$.prototype._validateAccessToken=function(b){if(!b.profile)return Z.Log.error("ResponseValidator._validateAccessToken: No profile loaded from id_token"),Promise.reject(new Error("No profile loaded from id_token"));if(!b.profile.at_hash)return Z.Log.error("ResponseValidator._validateAccessToken: No at_hash in id_token"),Promise.reject(new Error("No at_hash in id_token"));if(!b.id_token)return Z.Log.error("ResponseValidator._validateAccessToken: No id_token"),Promise.reject(new Error("No id_token"));var V=this._joseUtil.parseJwt(b.id_token);if(!V||!V.header)return Z.Log.error("ResponseValidator._validateAccessToken: Failed to parse id_token",V),Promise.reject(new Error("Failed to parse id_token"));var G=V.header.alg;if(!G||5!==G.length)return Z.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",G),Promise.reject(new Error("Unsupported alg: "+G));var H=G.substr(2,3);if(!H)return Z.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",G,H),Promise.reject(new Error("Unsupported alg: "+G));if(256!==(H=parseInt(H))&&384!==H&&512!==H)return Z.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",G,H),Promise.reject(new Error("Unsupported alg: "+G));var te="sha"+H,z=this._joseUtil.hashString(b.access_token,te);if(!z)return Z.Log.error("ResponseValidator._validateAccessToken: access_token hash failed:",te),Promise.reject(new Error("Failed to validate at_hash"));var W=z.substr(0,z.length/2),J=this._joseUtil.hexToBase64Url(W);return J!==b.profile.at_hash?(Z.Log.error("ResponseValidator._validateAccessToken: Failed to validate at_hash",J,b.profile.at_hash),Promise.reject(new Error("Failed to validate at_hash"))):(Z.Log.debug("ResponseValidator._validateAccessToken: success"),Promise.resolve(b))},$}()},function(N,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.UserInfoService=void 0;var q=M(7),Z=M(2),r=M(0),_=M(4);S.UserInfoService=function(){function g(y){var E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:q.JsonService,O=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Z.MetadataService,$=arguments.length>3&&void 0!==arguments[3]?arguments[3]:_.JoseUtil;if(function p(g,y){if(!(g instanceof y))throw new TypeError("Cannot call a class as a function")}(this,g),!y)throw r.Log.error("UserInfoService.ctor: No settings passed"),new Error("settings");this._settings=y,this._jsonService=new E(void 0,void 0,this._getClaimsFromJwt.bind(this)),this._metadataService=new O(this._settings),this._joseUtil=$}return g.prototype.getClaims=function(E){var O=this;return E?this._metadataService.getUserInfoEndpoint().then(function($){return r.Log.debug("UserInfoService.getClaims: received userinfo url",$),O._jsonService.getJson($,E).then(function(v){return r.Log.debug("UserInfoService.getClaims: claims received",v),v})}):(r.Log.error("UserInfoService.getClaims: No token passed"),Promise.reject(new Error("A token is required")))},g.prototype._getClaimsFromJwt=function(E){var O=this;try{var $=this._joseUtil.parseJwt(E.responseText);if(!$||!$.header||!$.payload)return r.Log.error("UserInfoService._getClaimsFromJwt: Failed to parse JWT",$),Promise.reject(new Error("Failed to parse id_token"));var v=$.header.kid,b=void 0;switch(this._settings.userInfoJwtIssuer){case"OP":b=this._metadataService.getIssuer();break;case"ANY":b=Promise.resolve($.payload.iss);break;default:b=Promise.resolve(this._settings.userInfoJwtIssuer)}return b.then(function(V){return r.Log.debug("UserInfoService._getClaimsFromJwt: Received issuer:"+V),O._metadataService.getSigningKeys().then(function(G){if(!G)return r.Log.error("UserInfoService._getClaimsFromJwt: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));r.Log.debug("UserInfoService._getClaimsFromJwt: Received signing keys");var H=void 0;if(v)H=G.filter(function(W){return W.kid===v})[0];else{if((G=O._filterByAlg(G,$.header.alg)).length>1)return r.Log.error("UserInfoService._getClaimsFromJwt: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));H=G[0]}if(!H)return r.Log.error("UserInfoService._getClaimsFromJwt: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var te=O._settings.client_id,z=O._settings.clockSkew;return r.Log.debug("UserInfoService._getClaimsFromJwt: Validaing JWT; using clock skew (in seconds) of: ",z),O._joseUtil.validateJwt(E.responseText,H,V,te,z,void 0,!0).then(function(){return r.Log.debug("UserInfoService._getClaimsFromJwt: JWT validation successful"),$.payload})})})}catch(V){return r.Log.error("UserInfoService._getClaimsFromJwt: Error parsing JWT response",V.message),void reject(V)}},g.prototype._filterByAlg=function(E,O){var $=null;if(O.startsWith("RS"))$="RSA";else if(O.startsWith("PS"))$="PS";else{if(!O.startsWith("ES"))return r.Log.debug("UserInfoService._filterByAlg: alg not supported: ",O),[];$="EC"}return r.Log.debug("UserInfoService._filterByAlg: Looking for keys that match kty: ",$),E=E.filter(function(v){return v.kty===$}),r.Log.debug("UserInfoService._filterByAlg: Number of keys that match kty: ",$,E.length),E},g}()},function(N,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.AllowedSigningAlgs=S.b64tohex=S.hextob64u=S.crypto=S.X509=S.KeyUtil=S.jws=void 0;var q=M(27);S.jws=q.jws,S.KeyUtil=q.KEYUTIL,S.X509=q.X509,S.crypto=q.crypto,S.hextob64u=q.hextob64u,S.b64tohex=q.b64tohex,S.AllowedSigningAlgs=["RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"]},function(N,S,M){"use strict";(function(q){Object.defineProperty(S,"__esModule",{value:!0});var Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(A){return typeof A}:function(A){return A&&"function"==typeof Symbol&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},r={userAgent:!1},_={};if(void 0===p)var p={};p.lang={extend:function(k,L,X){if(!L||!k)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var ie=function(){};if(ie.prototype=L.prototype,k.prototype=new ie,k.prototype.constructor=k,k.superclass=L.prototype,L.prototype.constructor==Object.prototype.constructor&&(L.prototype.constructor=L),X){var he;for(he in X)k.prototype[he]=X[he];var Pe=function(){},Ne=["toString","valueOf"];try{/MSIE/.test(r.userAgent)&&(Pe=function(Ze,Ue){for(he=0;he<Ne.length;he+=1){var Ve=Ne[he],We=Ue[Ve];"function"==typeof We&&We!=Object.prototype[Ve]&&(Ze[Ve]=We)}})}catch{}Pe(k.prototype,X)}}};var g,y,E,O,$,v,b,V,G,H,te,k,L,X,ie,z=z||(g=Math,E=(y={}).lib={},O=E.Base=function(){function A(){}return{extend:function(L){A.prototype=this;var X=new A;return L&&X.mixIn(L),X.hasOwnProperty("init")||(X.init=function(){X.$super.init.apply(this,arguments)}),X.init.prototype=X,X.$super=this,X},create:function(){var L=this.extend();return L.init.apply(L,arguments),L},init:function(){},mixIn:function(L){for(var X in L)L.hasOwnProperty(X)&&(this[X]=L[X]);L.hasOwnProperty("toString")&&(this.toString=L.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),$=E.WordArray=O.extend({init:function(k,L){k=this.words=k||[],this.sigBytes=L??4*k.length},toString:function(k){return(k||b).stringify(this)},concat:function(k){var L=this.words,X=k.words,ie=this.sigBytes,he=k.sigBytes;if(this.clamp(),ie%4)for(var Pe=0;Pe<he;Pe++)L[ie+Pe>>>2]|=(X[Pe>>>2]>>>24-Pe%4*8&255)<<24-(ie+Pe)%4*8;else for(Pe=0;Pe<he;Pe+=4)L[ie+Pe>>>2]=X[Pe>>>2];return this.sigBytes+=he,this},clamp:function(){var k=this.words,L=this.sigBytes;k[L>>>2]&=4294967295<<32-L%4*8,k.length=g.ceil(L/4)},clone:function(){var k=O.clone.call(this);return k.words=this.words.slice(0),k},random:function(k){for(var L=[],X=0;X<k;X+=4)L.push(4294967296*g.random()|0);return new $.init(L,k)}}),v=y.enc={},b=v.Hex={stringify:function(k){for(var L=k.words,X=k.sigBytes,ie=[],he=0;he<X;he++){var Pe=L[he>>>2]>>>24-he%4*8&255;ie.push((Pe>>>4).toString(16)),ie.push((15&Pe).toString(16))}return ie.join("")},parse:function(k){for(var L=k.length,X=[],ie=0;ie<L;ie+=2)X[ie>>>3]|=parseInt(k.substr(ie,2),16)<<24-ie%8*4;return new $.init(X,L/2)}},V=v.Latin1={stringify:function(k){for(var L=k.words,X=k.sigBytes,ie=[],he=0;he<X;he++)ie.push(String.fromCharCode(L[he>>>2]>>>24-he%4*8&255));return ie.join("")},parse:function(k){for(var L=k.length,X=[],ie=0;ie<L;ie++)X[ie>>>2]|=(255&k.charCodeAt(ie))<<24-ie%4*8;return new $.init(X,L)}},G=v.Utf8={stringify:function(k){try{return decodeURIComponent(escape(V.stringify(k)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(k){return V.parse(unescape(encodeURIComponent(k)))}},H=E.BufferedBlockAlgorithm=O.extend({reset:function(){this._data=new $.init,this._nDataBytes=0},_append:function(k){"string"==typeof k&&(k=G.parse(k)),this._data.concat(k),this._nDataBytes+=k.sigBytes},_process:function(k){var L=this._data,X=L.words,ie=L.sigBytes,he=this.blockSize,Pe=ie/(4*he),Ne=(Pe=k?g.ceil(Pe):g.max((0|Pe)-this._minBufferSize,0))*he,Me=g.min(4*Ne,ie);if(Ne){for(var Ze=0;Ze<Ne;Ze+=he)this._doProcessBlock(X,Ze);var Ue=X.splice(0,Ne);L.sigBytes-=Me}return new $.init(Ue,Me)},clone:function(){var k=O.clone.call(this);return k._data=this._data.clone(),k},_minBufferSize:0}),E.Hasher=H.extend({cfg:O.extend(),init:function(k){this.cfg=this.cfg.extend(k),this.reset()},reset:function(){H.reset.call(this),this._doReset()},update:function(k){return this._append(k),this._process(),this},finalize:function(k){return k&&this._append(k),this._doFinalize()},blockSize:16,_createHelper:function(k){return function(L,X){return new k.init(X).finalize(L)}},_createHmacHelper:function(k){return function(L,X){return new te.HMAC.init(k,X).finalize(L)}}}),te=y.algo={},y);L=(k=z).lib,X=L.Base,ie=L.WordArray,(k=k.x64={}).Word=X.extend({init:function(Pe,Ne){this.high=Pe,this.low=Ne}}),k.WordArray=X.extend({init:function(Pe,Ne){Pe=this.words=Pe||[],this.sigBytes=Ne??8*Pe.length},toX32:function(){for(var Pe=this.words,Ne=Pe.length,Me=[],Ze=0;Ze<Ne;Ze++){var Ue=Pe[Ze];Me.push(Ue.high),Me.push(Ue.low)}return ie.create(Me,this.sigBytes)},clone:function(){for(var Pe=X.clone.call(this),Ne=Pe.words=this.words.slice(0),Me=Ne.length,Ze=0;Ze<Me;Ze++)Ne[Ze]=Ne[Ze].clone();return Pe}}),function(){var k=z.lib.WordArray;z.enc.Base64={stringify:function(X){var ie=X.words,he=X.sigBytes,Pe=this._map;X.clamp(),X=[];for(var Ne=0;Ne<he;Ne+=3)for(var Me=(ie[Ne>>>2]>>>24-Ne%4*8&255)<<16|(ie[Ne+1>>>2]>>>24-(Ne+1)%4*8&255)<<8|ie[Ne+2>>>2]>>>24-(Ne+2)%4*8&255,Ze=0;4>Ze&&Ne+.75*Ze<he;Ze++)X.push(Pe.charAt(Me>>>6*(3-Ze)&63));if(ie=Pe.charAt(64))for(;X.length%4;)X.push(ie);return X.join("")},parse:function(X){var ie=X.length,he=this._map;(Pe=he.charAt(64))&&-1!=(Pe=X.indexOf(Pe))&&(ie=Pe);for(var Pe=[],Ne=0,Me=0;Me<ie;Me++)if(Me%4){var Ze=he.indexOf(X.charAt(Me-1))<<Me%4*2,Ue=he.indexOf(X.charAt(Me))>>>6-Me%4*2;Pe[Ne>>>2]|=(Ze|Ue)<<24-Ne%4*8,Ne++}return k.create(Pe,Ne)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(A){for(var k=z,L=(ie=k.lib).WordArray,X=ie.Hasher,ie=k.algo,he=[],Pe=[],Ne=function(gt){return 4294967296*(gt-(0|gt))|0},Me=2,Ze=0;64>Ze;){var Ue;e:{for(var Ve=A.sqrt(Ue=Me),We=2;We<=Ve;We++)if(!(Ue%We)){Ue=!1;break e}Ue=!0}Ue&&(8>Ze&&(he[Ze]=Ne(A.pow(Me,.5))),Pe[Ze]=Ne(A.pow(Me,1/3)),Ze++),Me++}var nt=[];ie=ie.SHA256=X.extend({_doReset:function(){this._hash=new L.init(he.slice(0))},_doProcessBlock:function(gt,Et){for(var Ee=this._hash.words,Ge=Ee[0],Ke=Ee[1],Xe=Ee[2],_t=Ee[3],kt=Ee[4],Wt=Ee[5],$t=Ee[6],Zn=Ee[7],en=0;64>en;en++){if(16>en)nt[en]=0|gt[Et+en];else{var gn=nt[en-15],sr=nt[en-2];nt[en]=((gn<<25|gn>>>7)^(gn<<14|gn>>>18)^gn>>>3)+nt[en-7]+((sr<<15|sr>>>17)^(sr<<13|sr>>>19)^sr>>>10)+nt[en-16]}gn=Zn+((kt<<26|kt>>>6)^(kt<<21|kt>>>11)^(kt<<7|kt>>>25))+(kt&Wt^~kt&$t)+Pe[en]+nt[en],sr=((Ge<<30|Ge>>>2)^(Ge<<19|Ge>>>13)^(Ge<<10|Ge>>>22))+(Ge&Ke^Ge&Xe^Ke&Xe),Zn=$t,$t=Wt,Wt=kt,kt=_t+gn|0,_t=Xe,Xe=Ke,Ke=Ge,Ge=gn+sr|0}Ee[0]=Ee[0]+Ge|0,Ee[1]=Ee[1]+Ke|0,Ee[2]=Ee[2]+Xe|0,Ee[3]=Ee[3]+_t|0,Ee[4]=Ee[4]+kt|0,Ee[5]=Ee[5]+Wt|0,Ee[6]=Ee[6]+$t|0,Ee[7]=Ee[7]+Zn|0},_doFinalize:function(){var gt=this._data,Et=gt.words,Ee=8*this._nDataBytes,Ge=8*gt.sigBytes;return Et[Ge>>>5]|=128<<24-Ge%32,Et[14+(Ge+64>>>9<<4)]=A.floor(Ee/4294967296),Et[15+(Ge+64>>>9<<4)]=Ee,gt.sigBytes=4*Et.length,this._process(),this._hash},clone:function(){var gt=X.clone.call(this);return gt._hash=this._hash.clone(),gt}}),k.SHA256=X._createHelper(ie),k.HmacSHA256=X._createHmacHelper(ie)}(Math),function(){function A(){return X.create.apply(X,arguments)}for(var k=z,L=k.lib.Hasher,X=(he=k.x64).Word,ie=he.WordArray,he=k.algo,Pe=[A(1116352408,3609767458),A(1899447441,602891725),A(3049323471,3964484399),A(3921009573,2173295548),A(961987163,4081628472),A(1508970993,3053834265),A(2453635748,2937671579),A(2870763221,3664609560),A(3624381080,2734883394),A(310598401,1164996542),A(607225278,1323610764),A(1426881987,3590304994),A(1925078388,4068182383),A(2162078206,991336113),A(2614888103,633803317),A(3248222580,3479774868),A(3835390401,2666613458),A(4022224774,944711139),A(264347078,2341262773),A(604807628,2007800933),A(770255983,1495990901),A(1249150122,1856431235),A(1555081692,3175218132),A(1996064986,2198950837),A(2554220882,3999719339),A(2821834349,766784016),A(2952996808,2566594879),A(3210313671,3203337956),A(3336571891,1034457026),A(3584528711,2466948901),A(113926993,3758326383),A(338241895,168717936),A(666307205,1188179964),A(773529912,1546045734),A(1294757372,1522805485),A(1396182291,2643833823),A(1695183700,2343527390),A(1986661051,1014477480),A(2177026350,1206759142),A(2456956037,344077627),A(2730485921,1290863460),A(2820302411,3158454273),A(3259730800,3505952657),A(3345764771,106217008),A(3516065817,3606008344),A(3600352804,1432725776),A(4094571909,1467031594),A(275423344,851169720),A(430227734,3100823752),A(506948616,1363258195),A(659060556,3750685593),A(883997877,3785050280),A(958139571,3318307427),A(1322822218,3812723403),A(1537002063,2003034995),A(1747873779,3602036899),A(1955562222,1575990012),A(2024104815,1125592928),A(2227730452,2716904306),A(2361852424,442776044),A(2428436474,593698344),A(2756734187,3733110249),A(3204031479,2999351573),A(3329325298,3815920427),A(3391569614,3928383900),A(3515267271,566280711),A(3940187606,3454069534),A(4118630271,4000239992),A(116418474,1914138554),A(174292421,2731055270),A(289380356,3203993006),A(460393269,320620315),A(685471733,587496836),A(852142971,1086792851),A(1017036298,365543100),A(1126000580,2618297676),A(1288033470,3409855158),A(1501505948,4234509866),A(1607167915,987167468),A(1816402316,1246189591)],Ne=[],Me=0;80>Me;Me++)Ne[Me]=A();he=he.SHA512=L.extend({_doReset:function(){this._hash=new ie.init([new X.init(1779033703,4089235720),new X.init(3144134277,2227873595),new X.init(1013904242,4271175723),new X.init(2773480762,1595750129),new X.init(1359893119,2917565137),new X.init(2600822924,725511199),new X.init(528734635,4215389547),new X.init(1541459225,327033209)])},_doProcessBlock:function(Ue,Ve){for(var We=(Ke=this._hash.words)[0],nt=Ke[1],d=Ke[2],gt=Ke[3],Et=Ke[4],Ee=Ke[5],Ge=Ke[6],Ke=Ke[7],Xe=We.high,_t=We.low,kt=nt.high,Wt=nt.low,$t=d.high,Zn=d.low,en=gt.high,gn=gt.low,sr=Et.high,gr=Et.low,vr=Ee.high,oi=Ee.low,Jr=Ge.high,$r=Ge.low,Le=Ke.high,ct=Ke.low,lt=Xe,wt=_t,Ft=kt,Rt=Wt,Yt=$t,vn=Zn,Sn=en,Jn=gn,In=sr,dr=gr,ai=vr,Mr=oi,Yr=Jr,Ci=$r,Ur=Le,tr=ct,Lr=0;80>Lr;Lr++){var Po=Ne[Lr];if(16>Lr)var $o=Po.high=0|Ue[Ve+2*Lr],Cr=Po.low=0|Ue[Ve+2*Lr+1];else{$o=((Cr=($o=Ne[Lr-15]).high)>>>1|(po=$o.low)<<31)^(Cr>>>8|po<<24)^Cr>>>7;var po=(po>>>1|Cr<<31)^(po>>>8|Cr<<24)^(po>>>7|Cr<<25),Uo=((Cr=(Uo=Ne[Lr-2]).high)>>>19|(ei=Uo.low)<<13)^(Cr<<3|ei>>>29)^Cr>>>6,ei=(ei>>>19|Cr<<13)^(ei<<3|Cr>>>29)^(ei>>>6|Cr<<26),zs=(Cr=Ne[Lr-7]).high,ta=(ga=Ne[Lr-16]).high,ga=ga.low;$o=($o=($o=$o+zs+((Cr=po+Cr.low)>>>0<po>>>0?1:0))+Uo+((Cr+=ei)>>>0<ei>>>0?1:0))+ta+((Cr+=ga)>>>0<ga>>>0?1:0),Po.high=$o,Po.low=Cr}zs=In&ai^~In&Yr,ga=dr&Mr^~dr&Ci,Po=lt&Ft^lt&Yt^Ft&Yt;var Tu=wt&Rt^wt&vn^Rt&vn,Iu=(po=(lt>>>28|wt<<4)^(lt<<30|wt>>>2)^(lt<<25|wt>>>7),Uo=(wt>>>28|lt<<4)^(wt<<30|lt>>>2)^(wt<<25|lt>>>7),(ei=Pe[Lr]).high),Ou=ei.low;ta=Ur+((In>>>14|dr<<18)^(In>>>18|dr<<14)^(In<<23|dr>>>9))+((ei=tr+((dr>>>14|In<<18)^(dr>>>18|In<<14)^(dr<<23|In>>>9)))>>>0<tr>>>0?1:0),Ur=Yr,tr=Ci,Yr=ai,Ci=Mr,ai=In,Mr=dr,In=Sn+(ta=(ta=(ta=ta+zs+((ei+=ga)>>>0<ga>>>0?1:0))+Iu+((ei+=Ou)>>>0<Ou>>>0?1:0))+$o+((ei+=Cr)>>>0<Cr>>>0?1:0))+((dr=Jn+ei|0)>>>0<Jn>>>0?1:0)|0,Sn=Yt,Jn=vn,Yt=Ft,vn=Rt,Ft=lt,Rt=wt,lt=ta+(Po=po+Po+((Cr=Uo+Tu)>>>0<Uo>>>0?1:0))+((wt=ei+Cr|0)>>>0<ei>>>0?1:0)|0}_t=We.low=_t+wt,We.high=Xe+lt+(_t>>>0<wt>>>0?1:0),Wt=nt.low=Wt+Rt,nt.high=kt+Ft+(Wt>>>0<Rt>>>0?1:0),Zn=d.low=Zn+vn,d.high=$t+Yt+(Zn>>>0<vn>>>0?1:0),gn=gt.low=gn+Jn,gt.high=en+Sn+(gn>>>0<Jn>>>0?1:0),gr=Et.low=gr+dr,Et.high=sr+In+(gr>>>0<dr>>>0?1:0),oi=Ee.low=oi+Mr,Ee.high=vr+ai+(oi>>>0<Mr>>>0?1:0),$r=Ge.low=$r+Ci,Ge.high=Jr+Yr+($r>>>0<Ci>>>0?1:0),ct=Ke.low=ct+tr,Ke.high=Le+Ur+(ct>>>0<tr>>>0?1:0)},_doFinalize:function(){var Ue=this._data,Ve=Ue.words,We=8*this._nDataBytes,nt=8*Ue.sigBytes;return Ve[nt>>>5]|=128<<24-nt%32,Ve[30+(nt+128>>>10<<5)]=Math.floor(We/4294967296),Ve[31+(nt+128>>>10<<5)]=We,Ue.sigBytes=4*Ve.length,this._process(),this._hash.toX32()},clone:function(){var Ue=L.clone.call(this);return Ue._hash=this._hash.clone(),Ue},blockSize:32}),k.SHA512=L._createHelper(he),k.HmacSHA512=L._createHmacHelper(he)}(),function(){var A=z,k=(ie=A.x64).Word,L=ie.WordArray,X=(ie=A.algo).SHA512,ie=ie.SHA384=X.extend({_doReset:function(){this._hash=new L.init([new k.init(3418070365,3238371032),new k.init(1654270250,914150663),new k.init(2438529370,812702999),new k.init(355462360,4144912697),new k.init(1731405415,4290775857),new k.init(2394180231,1750603025),new k.init(3675008525,1694076839),new k.init(1203062813,3204075428)])},_doFinalize:function(){var Pe=X._doFinalize.call(this);return Pe.sigBytes-=16,Pe}});A.SHA384=X._createHelper(ie),A.HmacSHA384=X._createHmacHelper(ie)}();var W,J="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function se(A){var k,L,X="";for(k=0;k+3<=A.length;k+=3)L=parseInt(A.substring(k,k+3),16),X+=J.charAt(L>>6)+J.charAt(63&L);for(k+1==A.length?(L=parseInt(A.substring(k,k+1),16),X+=J.charAt(L<<2)):k+2==A.length&&(L=parseInt(A.substring(k,k+2),16),X+=J.charAt(L>>2)+J.charAt((3&L)<<4));(3&X.length)>0;)X+="=";return X}function ve(A){var k,L,X,ie="",he=0;for(k=0;k<A.length&&"="!=A.charAt(k);++k)(X=J.indexOf(A.charAt(k)))<0||(0==he?(ie+=j(X>>2),L=3&X,he=1):1==he?(ie+=j(L<<2|X>>4),L=15&X,he=2):2==he?(ie+=j(L),ie+=j(X>>2),L=3&X,he=3):(ie+=j(L<<2|X>>4),ie+=j(15&X),he=0));return 1==he&&(ie+=j(L<<2)),ie}function xe(A){var k,L=ve(A),X=new Array;for(k=0;2*k<L.length;++k)X[k]=parseInt(L.substring(2*k,2*k+2),16);return X}function ge(A,k,L){null!=A&&("number"==typeof A?this.fromNumber(A,k,L):this.fromString(A,null==k&&"string"!=typeof A?256:k))}function x(){return new ge(null)}"Microsoft Internet Explorer"==r.appName?(ge.prototype.am=function(k,L,X,ie,he,Pe){for(var Ne=32767&L,Me=L>>15;--Pe>=0;){var Ze=32767&this[k],Ue=this[k++]>>15,Ve=Me*Ze+Ue*Ne;he=((Ze=Ne*Ze+((32767&Ve)<<15)+X[ie]+(1073741823&he))>>>30)+(Ve>>>15)+Me*Ue+(he>>>30),X[ie++]=1073741823&Ze}return he},W=30):"Netscape"!=r.appName?(ge.prototype.am=function(k,L,X,ie,he,Pe){for(;--Pe>=0;){var Ne=L*this[k++]+X[ie]+he;he=Math.floor(Ne/67108864),X[ie++]=67108863&Ne}return he},W=26):(ge.prototype.am=function(k,L,X,ie,he,Pe){for(var Ne=16383&L,Me=L>>14;--Pe>=0;){var Ze=16383&this[k],Ue=this[k++]>>14,Ve=Me*Ze+Ue*Ne;he=((Ze=Ne*Ze+((16383&Ve)<<14)+X[ie]+he)>>28)+(Ve>>14)+Me*Ue,X[ie++]=268435455&Ze}return he},W=28),ge.prototype.DB=W,ge.prototype.DM=(1<<W)-1,ge.prototype.DV=1<<W,ge.prototype.FV=Math.pow(2,52),ge.prototype.F1=52-W,ge.prototype.F2=2*W-52;var D,P,I=new Array;for(D="0".charCodeAt(0),P=0;P<=9;++P)I[D++]=P;for(D="a".charCodeAt(0),P=10;P<36;++P)I[D++]=P;for(D="A".charCodeAt(0),P=10;P<36;++P)I[D++]=P;function j(A){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(A)}function R(A,k){return I[A.charCodeAt(k)]??-1}function Q(A){var k=x();return k.fromInt(A),k}function ee(A){var k,L=1;return 0!=(k=A>>>16)&&(A=k,L+=16),0!=(k=A>>8)&&(A=k,L+=8),0!=(k=A>>4)&&(A=k,L+=4),0!=(k=A>>2)&&(A=k,L+=2),0!=(k=A>>1)&&(A=k,L+=1),L}function Re(A){this.m=A}function ne(A){this.m=A,this.mp=A.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<A.DB-15)-1,this.mt2=2*A.t}function Fe(A,k){return A&k}function rt(A,k){return A|k}function Te(A,k){return A^k}function tt(A,k){return A&~k}function Qe(A){if(0==A)return-1;var k=0;return!(65535&A)&&(A>>=16,k+=16),!(255&A)&&(A>>=8,k+=8),!(15&A)&&(A>>=4,k+=4),!(3&A)&&(A>>=2,k+=2),!(1&A)&&++k,k}function vt(A){for(var k=0;0!=A;)A&=A-1,++k;return k}function et(){}function $e(A){return A}function it(A){this.r2=x(),this.q3=x(),ge.ONE.dlShiftTo(2*A.t,this.r2),this.mu=this.r2.divide(A),this.m=A}Re.prototype.convert=function(k){return k.s<0||k.compareTo(this.m)>=0?k.mod(this.m):k},Re.prototype.revert=function(k){return k},Re.prototype.reduce=function(k){k.divRemTo(this.m,null,k)},Re.prototype.mulTo=function(k,L,X){k.multiplyTo(L,X),this.reduce(X)},Re.prototype.sqrTo=function(k,L){k.squareTo(L),this.reduce(L)},ne.prototype.convert=function(k){var L=x();return k.abs().dlShiftTo(this.m.t,L),L.divRemTo(this.m,null,L),k.s<0&&L.compareTo(ge.ZERO)>0&&this.m.subTo(L,L),L},ne.prototype.revert=function(k){var L=x();return k.copyTo(L),this.reduce(L),L},ne.prototype.reduce=function(k){for(;k.t<=this.mt2;)k[k.t++]=0;for(var L=0;L<this.m.t;++L){var X=32767&k[L],ie=X*this.mpl+((X*this.mph+(k[L]>>15)*this.mpl&this.um)<<15)&k.DM;for(k[X=L+this.m.t]+=this.m.am(0,ie,k,L,0,this.m.t);k[X]>=k.DV;)k[X]-=k.DV,k[++X]++}k.clamp(),k.drShiftTo(this.m.t,k),k.compareTo(this.m)>=0&&k.subTo(this.m,k)},ne.prototype.mulTo=function(k,L,X){k.multiplyTo(L,X),this.reduce(X)},ne.prototype.sqrTo=function(k,L){k.squareTo(L),this.reduce(L)},ge.prototype.copyTo=function(k){for(var L=this.t-1;L>=0;--L)k[L]=this[L];k.t=this.t,k.s=this.s},ge.prototype.fromInt=function(k){this.t=1,this.s=k<0?-1:0,k>0?this[0]=k:k<-1?this[0]=k+this.DV:this.t=0},ge.prototype.fromString=function(k,L){var X;if(16==L)X=4;else if(8==L)X=3;else if(256==L)X=8;else if(2==L)X=1;else if(32==L)X=5;else{if(4!=L)return void this.fromRadix(k,L);X=2}this.t=0,this.s=0;for(var ie=k.length,he=!1,Pe=0;--ie>=0;){var Ne=8==X?255&k[ie]:R(k,ie);Ne<0?"-"==k.charAt(ie)&&(he=!0):(he=!1,0==Pe?this[this.t++]=Ne:Pe+X>this.DB?(this[this.t-1]|=(Ne&(1<<this.DB-Pe)-1)<<Pe,this[this.t++]=Ne>>this.DB-Pe):this[this.t-1]|=Ne<<Pe,(Pe+=X)>=this.DB&&(Pe-=this.DB))}8==X&&128&k[0]&&(this.s=-1,Pe>0&&(this[this.t-1]|=(1<<this.DB-Pe)-1<<Pe)),this.clamp(),he&&ge.ZERO.subTo(this,this)},ge.prototype.clamp=function(){for(var k=this.s&this.DM;this.t>0&&this[this.t-1]==k;)--this.t},ge.prototype.dlShiftTo=function(k,L){var X;for(X=this.t-1;X>=0;--X)L[X+k]=this[X];for(X=k-1;X>=0;--X)L[X]=0;L.t=this.t+k,L.s=this.s},ge.prototype.drShiftTo=function(k,L){for(var X=k;X<this.t;++X)L[X-k]=this[X];L.t=Math.max(this.t-k,0),L.s=this.s},ge.prototype.lShiftTo=function(k,L){var X,ie=k%this.DB,he=this.DB-ie,Pe=(1<<he)-1,Ne=Math.floor(k/this.DB),Me=this.s<<ie&this.DM;for(X=this.t-1;X>=0;--X)L[X+Ne+1]=this[X]>>he|Me,Me=(this[X]&Pe)<<ie;for(X=Ne-1;X>=0;--X)L[X]=0;L[Ne]=Me,L.t=this.t+Ne+1,L.s=this.s,L.clamp()},ge.prototype.rShiftTo=function(k,L){L.s=this.s;var X=Math.floor(k/this.DB);if(X>=this.t)L.t=0;else{var ie=k%this.DB,he=this.DB-ie,Pe=(1<<ie)-1;L[0]=this[X]>>ie;for(var Ne=X+1;Ne<this.t;++Ne)L[Ne-X-1]|=(this[Ne]&Pe)<<he,L[Ne-X]=this[Ne]>>ie;ie>0&&(L[this.t-X-1]|=(this.s&Pe)<<he),L.t=this.t-X,L.clamp()}},ge.prototype.subTo=function(k,L){for(var X=0,ie=0,he=Math.min(k.t,this.t);X<he;)ie+=this[X]-k[X],L[X++]=ie&this.DM,ie>>=this.DB;if(k.t<this.t){for(ie-=k.s;X<this.t;)ie+=this[X],L[X++]=ie&this.DM,ie>>=this.DB;ie+=this.s}else{for(ie+=this.s;X<k.t;)ie-=k[X],L[X++]=ie&this.DM,ie>>=this.DB;ie-=k.s}L.s=ie<0?-1:0,ie<-1?L[X++]=this.DV+ie:ie>0&&(L[X++]=ie),L.t=X,L.clamp()},ge.prototype.multiplyTo=function(k,L){var X=this.abs(),ie=k.abs(),he=X.t;for(L.t=he+ie.t;--he>=0;)L[he]=0;for(he=0;he<ie.t;++he)L[he+X.t]=X.am(0,ie[he],L,he,0,X.t);L.s=0,L.clamp(),this.s!=k.s&&ge.ZERO.subTo(L,L)},ge.prototype.squareTo=function(k){for(var L=this.abs(),X=k.t=2*L.t;--X>=0;)k[X]=0;for(X=0;X<L.t-1;++X){var ie=L.am(X,L[X],k,2*X,0,1);(k[X+L.t]+=L.am(X+1,2*L[X],k,2*X+1,ie,L.t-X-1))>=L.DV&&(k[X+L.t]-=L.DV,k[X+L.t+1]=1)}k.t>0&&(k[k.t-1]+=L.am(X,L[X],k,2*X,0,1)),k.s=0,k.clamp()},ge.prototype.divRemTo=function(k,L,X){var ie=k.abs();if(!(ie.t<=0)){var he=this.abs();if(he.t<ie.t)return L?.fromInt(0),void(null!=X&&this.copyTo(X));null==X&&(X=x());var Pe=x(),Ne=this.s,Me=k.s,Ze=this.DB-ee(ie[ie.t-1]);Ze>0?(ie.lShiftTo(Ze,Pe),he.lShiftTo(Ze,X)):(ie.copyTo(Pe),he.copyTo(X));var Ue=Pe.t,Ve=Pe[Ue-1];if(0!=Ve){var We=Ve*(1<<this.F1)+(Ue>1?Pe[Ue-2]>>this.F2:0),nt=this.FV/We,d=(1<<this.F1)/We,gt=1<<this.F2,Et=X.t,Ee=Et-Ue,Ge=L??x();for(Pe.dlShiftTo(Ee,Ge),X.compareTo(Ge)>=0&&(X[X.t++]=1,X.subTo(Ge,X)),ge.ONE.dlShiftTo(Ue,Ge),Ge.subTo(Pe,Pe);Pe.t<Ue;)Pe[Pe.t++]=0;for(;--Ee>=0;){var Ke=X[--Et]==Ve?this.DM:Math.floor(X[Et]*nt+(X[Et-1]+gt)*d);if((X[Et]+=Pe.am(0,Ke,X,Ee,0,Ue))<Ke)for(Pe.dlShiftTo(Ee,Ge),X.subTo(Ge,X);X[Et]<--Ke;)X.subTo(Ge,X)}null!=L&&(X.drShiftTo(Ue,L),Ne!=Me&&ge.ZERO.subTo(L,L)),X.t=Ue,X.clamp(),Ze>0&&X.rShiftTo(Ze,X),Ne<0&&ge.ZERO.subTo(X,X)}}},ge.prototype.invDigit=function(){if(this.t<1)return 0;var k=this[0];if(!(1&k))return 0;var L=3&k;return(L=(L=(L=(L=L*(2-(15&k)*L)&15)*(2-(255&k)*L)&255)*(2-((65535&k)*L&65535))&65535)*(2-k*L%this.DV)%this.DV)>0?this.DV-L:-L},ge.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},ge.prototype.exp=function(k,L){if(k>4294967295||k<1)return ge.ONE;var X=x(),ie=x(),he=L.convert(this),Pe=ee(k)-1;for(he.copyTo(X);--Pe>=0;)if(L.sqrTo(X,ie),(k&1<<Pe)>0)L.mulTo(ie,he,X);else{var Ne=X;X=ie,ie=Ne}return L.revert(X)},ge.prototype.toString=function(k){if(this.s<0)return"-"+this.negate().toString(k);var L;if(16==k)L=4;else if(8==k)L=3;else if(2==k)L=1;else if(32==k)L=5;else{if(4!=k)return this.toRadix(k);L=2}var X,ie=(1<<L)-1,he=!1,Pe="",Ne=this.t,Me=this.DB-Ne*this.DB%L;if(Ne-- >0)for(Me<this.DB&&(X=this[Ne]>>Me)>0&&(he=!0,Pe=j(X));Ne>=0;)Me<L?(X=(this[Ne]&(1<<Me)-1)<<L-Me,X|=this[--Ne]>>(Me+=this.DB-L)):(X=this[Ne]>>(Me-=L)&ie,Me<=0&&(Me+=this.DB,--Ne)),X>0&&(he=!0),he&&(Pe+=j(X));return he?Pe:"0"},ge.prototype.negate=function(){var k=x();return ge.ZERO.subTo(this,k),k},ge.prototype.abs=function(){return this.s<0?this.negate():this},ge.prototype.compareTo=function(k){var L=this.s-k.s;if(0!=L)return L;var X=this.t;if(0!=(L=X-k.t))return this.s<0?-L:L;for(;--X>=0;)if(0!=(L=this[X]-k[X]))return L;return 0},ge.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+ee(this[this.t-1]^this.s&this.DM)},ge.prototype.mod=function(k){var L=x();return this.abs().divRemTo(k,null,L),this.s<0&&L.compareTo(ge.ZERO)>0&&k.subTo(L,L),L},ge.prototype.modPowInt=function(k,L){var X;return X=k<256||L.isEven()?new Re(L):new ne(L),this.exp(k,X)},ge.ZERO=Q(0),ge.ONE=Q(1),et.prototype.convert=$e,et.prototype.revert=$e,et.prototype.mulTo=function(k,L,X){k.multiplyTo(L,X)},et.prototype.sqrTo=function(k,L){k.squareTo(L)},it.prototype.convert=function(k){if(k.s<0||k.t>2*this.m.t)return k.mod(this.m);if(k.compareTo(this.m)<0)return k;var L=x();return k.copyTo(L),this.reduce(L),L},it.prototype.revert=function(k){return k},it.prototype.reduce=function(k){for(k.drShiftTo(this.m.t-1,this.r2),k.t>this.m.t+1&&(k.t=this.m.t+1,k.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);k.compareTo(this.r2)<0;)k.dAddOffset(1,this.m.t+1);for(k.subTo(this.r2,k);k.compareTo(this.m)>=0;)k.subTo(this.m,k)},it.prototype.mulTo=function(k,L,X){k.multiplyTo(L,X),this.reduce(X)},it.prototype.sqrTo=function(k,L){k.squareTo(L),this.reduce(L)};var ke,Be,fe,de=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],Y=(1<<26)/de[de.length-1];function oe(){this.i=0,this.j=0,this.S=new Array}function ye(){!function(k){Be[fe++]^=255&k,Be[fe++]^=k>>8&255,Be[fe++]^=k>>16&255,Be[fe++]^=k>>24&255,fe>=256&&(fe-=256)}((new Date).getTime())}if(ge.prototype.chunkSize=function(k){return Math.floor(Math.LN2*this.DB/Math.log(k))},ge.prototype.toRadix=function(k){if(null==k&&(k=10),0==this.signum()||k<2||k>36)return"0";var L=this.chunkSize(k),X=Math.pow(k,L),ie=Q(X),he=x(),Pe=x(),Ne="";for(this.divRemTo(ie,he,Pe);he.signum()>0;)Ne=(X+Pe.intValue()).toString(k).substr(1)+Ne,he.divRemTo(ie,he,Pe);return Pe.intValue().toString(k)+Ne},ge.prototype.fromRadix=function(k,L){this.fromInt(0),null==L&&(L=10);for(var X=this.chunkSize(L),ie=Math.pow(L,X),he=!1,Pe=0,Ne=0,Me=0;Me<k.length;++Me){var Ze=R(k,Me);Ze<0?"-"==k.charAt(Me)&&0==this.signum()&&(he=!0):(Ne=L*Ne+Ze,++Pe>=X&&(this.dMultiply(ie),this.dAddOffset(Ne,0),Pe=0,Ne=0))}Pe>0&&(this.dMultiply(Math.pow(L,Pe)),this.dAddOffset(Ne,0)),he&&ge.ZERO.subTo(this,this)},ge.prototype.fromNumber=function(k,L,X){if("number"==typeof L)if(k<2)this.fromInt(1);else for(this.fromNumber(k,X),this.testBit(k-1)||this.bitwiseTo(ge.ONE.shiftLeft(k-1),rt,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(L);)this.dAddOffset(2,0),this.bitLength()>k&&this.subTo(ge.ONE.shiftLeft(k-1),this);else{var ie=new Array,he=7&k;ie.length=1+(k>>3),L.nextBytes(ie),he>0?ie[0]&=(1<<he)-1:ie[0]=0,this.fromString(ie,256)}},ge.prototype.bitwiseTo=function(k,L,X){var ie,he,Pe=Math.min(k.t,this.t);for(ie=0;ie<Pe;++ie)X[ie]=L(this[ie],k[ie]);if(k.t<this.t){for(he=k.s&this.DM,ie=Pe;ie<this.t;++ie)X[ie]=L(this[ie],he);X.t=this.t}else{for(he=this.s&this.DM,ie=Pe;ie<k.t;++ie)X[ie]=L(he,k[ie]);X.t=k.t}X.s=L(this.s,k.s),X.clamp()},ge.prototype.changeBit=function(k,L){var X=ge.ONE.shiftLeft(k);return this.bitwiseTo(X,L,X),X},ge.prototype.addTo=function(k,L){for(var X=0,ie=0,he=Math.min(k.t,this.t);X<he;)ie+=this[X]+k[X],L[X++]=ie&this.DM,ie>>=this.DB;if(k.t<this.t){for(ie+=k.s;X<this.t;)ie+=this[X],L[X++]=ie&this.DM,ie>>=this.DB;ie+=this.s}else{for(ie+=this.s;X<k.t;)ie+=k[X],L[X++]=ie&this.DM,ie>>=this.DB;ie+=k.s}L.s=ie<0?-1:0,ie>0?L[X++]=ie:ie<-1&&(L[X++]=this.DV+ie),L.t=X,L.clamp()},ge.prototype.dMultiply=function(k){this[this.t]=this.am(0,k-1,this,0,0,this.t),++this.t,this.clamp()},ge.prototype.dAddOffset=function(k,L){if(0!=k){for(;this.t<=L;)this[this.t++]=0;for(this[L]+=k;this[L]>=this.DV;)this[L]-=this.DV,++L>=this.t&&(this[this.t++]=0),++this[L]}},ge.prototype.multiplyLowerTo=function(k,L,X){var ie,he=Math.min(this.t+k.t,L);for(X.s=0,X.t=he;he>0;)X[--he]=0;for(ie=X.t-this.t;he<ie;++he)X[he+this.t]=this.am(0,k[he],X,he,0,this.t);for(ie=Math.min(k.t,L);he<ie;++he)this.am(0,k[he],X,he,0,L-he);X.clamp()},ge.prototype.multiplyUpperTo=function(k,L,X){--L;var ie=X.t=this.t+k.t-L;for(X.s=0;--ie>=0;)X[ie]=0;for(ie=Math.max(L-this.t,0);ie<k.t;++ie)X[this.t+ie-L]=this.am(L-ie,k[ie],X,0,0,this.t+ie-L);X.clamp(),X.drShiftTo(1,X)},ge.prototype.modInt=function(k){if(k<=0)return 0;var L=this.DV%k,X=this.s<0?k-1:0;if(this.t>0)if(0==L)X=this[0]%k;else for(var ie=this.t-1;ie>=0;--ie)X=(L*X+this[ie])%k;return X},ge.prototype.millerRabin=function(k){var L=this.subtract(ge.ONE),X=L.getLowestSetBit();if(X<=0)return!1;var ie=L.shiftRight(X);(k=k+1>>1)>de.length&&(k=de.length);for(var he=x(),Pe=0;Pe<k;++Pe){he.fromInt(de[Math.floor(Math.random()*de.length)]);var Ne=he.modPow(ie,this);if(0!=Ne.compareTo(ge.ONE)&&0!=Ne.compareTo(L)){for(var Me=1;Me++<X&&0!=Ne.compareTo(L);)if(0==(Ne=Ne.modPowInt(2,this)).compareTo(ge.ONE))return!1;if(0!=Ne.compareTo(L))return!1}}return!0},ge.prototype.clone=
/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
             */
function(){var k=x();return this.copyTo(k),k},ge.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},ge.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},ge.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},ge.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},ge.prototype.toByteArray=function(){var k=this.t,L=new Array;L[0]=this.s;var X,ie=this.DB-k*this.DB%8,he=0;if(k-- >0)for(ie<this.DB&&(X=this[k]>>ie)!=(this.s&this.DM)>>ie&&(L[he++]=X|this.s<<this.DB-ie);k>=0;)ie<8?(X=(this[k]&(1<<ie)-1)<<8-ie,X|=this[--k]>>(ie+=this.DB-8)):(X=this[k]>>(ie-=8)&255,ie<=0&&(ie+=this.DB,--k)),128&X&&(X|=-256),0==he&&(128&this.s)!=(128&X)&&++he,(he>0||X!=this.s)&&(L[he++]=X);return L},ge.prototype.equals=function(k){return 0==this.compareTo(k)},ge.prototype.min=function(k){return this.compareTo(k)<0?this:k},ge.prototype.max=function(k){return this.compareTo(k)>0?this:k},ge.prototype.and=function(k){var L=x();return this.bitwiseTo(k,Fe,L),L},ge.prototype.or=function(k){var L=x();return this.bitwiseTo(k,rt,L),L},ge.prototype.xor=function(k){var L=x();return this.bitwiseTo(k,Te,L),L},ge.prototype.andNot=function(k){var L=x();return this.bitwiseTo(k,tt,L),L},ge.prototype.not=function(){for(var k=x(),L=0;L<this.t;++L)k[L]=this.DM&~this[L];return k.t=this.t,k.s=~this.s,k},ge.prototype.shiftLeft=function(k){var L=x();return k<0?this.rShiftTo(-k,L):this.lShiftTo(k,L),L},ge.prototype.shiftRight=function(k){var L=x();return k<0?this.lShiftTo(-k,L):this.rShiftTo(k,L),L},ge.prototype.getLowestSetBit=function(){for(var k=0;k<this.t;++k)if(0!=this[k])return k*this.DB+Qe(this[k]);return this.s<0?this.t*this.DB:-1},ge.prototype.bitCount=function(){for(var k=0,L=this.s&this.DM,X=0;X<this.t;++X)k+=vt(this[X]^L);return k},ge.prototype.testBit=function(k){var L=Math.floor(k/this.DB);return L>=this.t?0!=this.s:0!=(this[L]&1<<k%this.DB)},ge.prototype.setBit=function(k){return this.changeBit(k,rt)},ge.prototype.clearBit=function(k){return this.changeBit(k,tt)},ge.prototype.flipBit=function(k){return this.changeBit(k,Te)},ge.prototype.add=function(k){var L=x();return this.addTo(k,L),L},ge.prototype.subtract=function(k){var L=x();return this.subTo(k,L),L},ge.prototype.multiply=function(k){var L=x();return this.multiplyTo(k,L),L},ge.prototype.divide=function(k){var L=x();return this.divRemTo(k,L,null),L},ge.prototype.remainder=function(k){var L=x();return this.divRemTo(k,null,L),L},ge.prototype.divideAndRemainder=function(k){var L=x(),X=x();return this.divRemTo(k,L,X),new Array(L,X)},ge.prototype.modPow=function(k,L){var X,ie,he=k.bitLength(),Pe=Q(1);if(he<=0)return Pe;X=he<18?1:he<48?3:he<144?4:he<768?5:6,ie=he<8?new Re(L):L.isEven()?new it(L):new ne(L);var Ne=new Array,Me=3,Ze=X-1,Ue=(1<<X)-1;if(Ne[1]=ie.convert(this),X>1){var Ve=x();for(ie.sqrTo(Ne[1],Ve);Me<=Ue;)Ne[Me]=x(),ie.mulTo(Ve,Ne[Me-2],Ne[Me]),Me+=2}var We,nt,d=k.t-1,gt=!0,Et=x();for(he=ee(k[d])-1;d>=0;){for(he>=Ze?We=k[d]>>he-Ze&Ue:(We=(k[d]&(1<<he+1)-1)<<Ze-he,d>0&&(We|=k[d-1]>>this.DB+he-Ze)),Me=X;!(1&We);)We>>=1,--Me;if((he-=Me)<0&&(he+=this.DB,--d),gt)Ne[We].copyTo(Pe),gt=!1;else{for(;Me>1;)ie.sqrTo(Pe,Et),ie.sqrTo(Et,Pe),Me-=2;Me>0?ie.sqrTo(Pe,Et):(nt=Pe,Pe=Et,Et=nt),ie.mulTo(Et,Ne[We],Pe)}for(;d>=0&&!(k[d]&1<<he);)ie.sqrTo(Pe,Et),nt=Pe,Pe=Et,Et=nt,--he<0&&(he=this.DB-1,--d)}return ie.revert(Pe)},ge.prototype.modInverse=function(k){var L=k.isEven();if(this.isEven()&&L||0==k.signum())return ge.ZERO;for(var X=k.clone(),ie=this.clone(),he=Q(1),Pe=Q(0),Ne=Q(0),Me=Q(1);0!=X.signum();){for(;X.isEven();)X.rShiftTo(1,X),L?(he.isEven()&&Pe.isEven()||(he.addTo(this,he),Pe.subTo(k,Pe)),he.rShiftTo(1,he)):Pe.isEven()||Pe.subTo(k,Pe),Pe.rShiftTo(1,Pe);for(;ie.isEven();)ie.rShiftTo(1,ie),L?(Ne.isEven()&&Me.isEven()||(Ne.addTo(this,Ne),Me.subTo(k,Me)),Ne.rShiftTo(1,Ne)):Me.isEven()||Me.subTo(k,Me),Me.rShiftTo(1,Me);X.compareTo(ie)>=0?(X.subTo(ie,X),L&&he.subTo(Ne,he),Pe.subTo(Me,Pe)):(ie.subTo(X,ie),L&&Ne.subTo(he,Ne),Me.subTo(Pe,Me))}return 0!=ie.compareTo(ge.ONE)?ge.ZERO:Me.compareTo(k)>=0?Me.subtract(k):Me.signum()<0?(Me.addTo(k,Me),Me.signum()<0?Me.add(k):Me):Me},ge.prototype.pow=function(k){return this.exp(k,new et)},ge.prototype.gcd=function(k){var L=this.s<0?this.negate():this.clone(),X=k.s<0?k.negate():k.clone();if(L.compareTo(X)<0){var ie=L;L=X,X=ie}var he=L.getLowestSetBit(),Pe=X.getLowestSetBit();if(Pe<0)return L;for(he<Pe&&(Pe=he),Pe>0&&(L.rShiftTo(Pe,L),X.rShiftTo(Pe,X));L.signum()>0;)(he=L.getLowestSetBit())>0&&L.rShiftTo(he,L),(he=X.getLowestSetBit())>0&&X.rShiftTo(he,X),L.compareTo(X)>=0?(L.subTo(X,L),L.rShiftTo(1,L)):(X.subTo(L,X),X.rShiftTo(1,X));return Pe>0&&X.lShiftTo(Pe,X),X},ge.prototype.isProbablePrime=function(k){var L,X=this.abs();if(1==X.t&&X[0]<=de[de.length-1]){for(L=0;L<de.length;++L)if(X[0]==de[L])return!0;return!1}if(X.isEven())return!1;for(L=1;L<de.length;){for(var ie=de[L],he=L+1;he<de.length&&ie<Y;)ie*=de[he++];for(ie=X.modInt(ie);L<he;)if(ie%de[L++]==0)return!1}return X.millerRabin(k)},ge.prototype.square=function(){var k=x();return this.squareTo(k),k},oe.prototype.init=function(k){var L,X,ie;for(L=0;L<256;++L)this.S[L]=L;for(X=0,L=0;L<256;++L)ie=this.S[L],this.S[L]=this.S[X=X+this.S[L]+k[L%k.length]&255],this.S[X]=ie;this.i=0,this.j=0},oe.prototype.next=function(){var k;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,k=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=k,this.S[k+this.S[this.i]&255]},null==Be){var ut;if(Be=new Array,fe=0,void 0!==_&&(void 0!==_.crypto||void 0!==_.msCrypto)){var be=_.crypto||_.msCrypto;if(be.getRandomValues){var le=new Uint8Array(32);for(be.getRandomValues(le),ut=0;ut<32;++ut)Be[fe++]=le[ut]}else if("Netscape"==r.appName&&r.appVersion<"5"){var ce=_.crypto.random(32);for(ut=0;ut<ce.length;++ut)Be[fe++]=255&ce.charCodeAt(ut)}}for(;fe<256;)ut=Math.floor(65536*Math.random()),Be[fe++]=ut>>>8,Be[fe++]=255&ut;fe=0,ye()}function Ie(){if(null==ke){for(ye(),(ke=new oe).init(Be),fe=0;fe<Be.length;++fe)Be[fe]=0;fe=0}return ke.next()}function ot(){}function Tt(A,k){return new ge(A,k)}function Nt(A,k,L){for(var X="",ie=0;X.length<k;)X+=L(String.fromCharCode.apply(String,A.concat([(4278190080&ie)>>24,(16711680&ie)>>16,(65280&ie)>>8,255&ie]))),ie+=1;return X}function Gt(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function un(A,k){this.x=k,this.q=A}function Xt(A,k,L,X){this.curve=A,this.x=k,this.y=L,this.z=X??ge.ONE,this.zinv=null}function Kn(A,k,L){this.q=A,this.a=this.fromBigInteger(k),this.b=this.fromBigInteger(L),this.infinity=new Xt(this,null,null)}ot.prototype.nextBytes=function(k){var L;for(L=0;L<k.length;++L)k[L]=Ie()},Gt.prototype.doPublic=function(k){return k.modPowInt(this.e,this.n)},Gt.prototype.setPublic=function(k,L){if(this.isPublic=!0,this.isPrivate=!1,"string"!=typeof k)this.n=k,this.e=L;else{if(!(null!=k&&null!=L&&k.length>0&&L.length>0))throw"Invalid RSA public key";this.n=Tt(k,16),this.e=parseInt(L,16)}},Gt.prototype.encrypt=function(k){var L=function(Pe,Ne){if(Ne<Pe.length+11)throw"Message too long for RSA";for(var Me=new Array,Ze=Pe.length-1;Ze>=0&&Ne>0;){var Ue=Pe.charCodeAt(Ze--);Ue<128?Me[--Ne]=Ue:Ue>127&&Ue<2048?(Me[--Ne]=63&Ue|128,Me[--Ne]=Ue>>6|192):(Me[--Ne]=63&Ue|128,Me[--Ne]=Ue>>6&63|128,Me[--Ne]=Ue>>12|224)}Me[--Ne]=0;for(var Ve=new ot,We=new Array;Ne>2;){for(We[0]=0;0==We[0];)Ve.nextBytes(We);Me[--Ne]=We[0]}return Me[--Ne]=2,Me[--Ne]=0,new ge(Me)}(k,this.n.bitLength()+7>>3);if(null==L)return null;var X=this.doPublic(L);if(null==X)return null;var ie=X.toString(16);return 1&ie.length?"0"+ie:ie},Gt.prototype.encryptOAEP=function(k,L,X){var ie=function(Me,Ze,Ue,Ve){var We=De.crypto.MessageDigest,nt=De.crypto.Util,d=null;if(Ue||(Ue="sha1"),"string"==typeof Ue&&(d=We.getCanonicalAlgName(Ue),Ve=We.getHashLength(d),Ue=function($t){return wn(nt.hashHex(Ar($t),d))}),Me.length+2*Ve+2>Ze)throw"Message too long for RSA";var gt,Et="";for(gt=0;gt<Ze-Me.length-2*Ve-2;gt+=1)Et+="\0";var Ee=Ue("")+Et+"\x01"+Me,Ge=new Array(Ve);(new ot).nextBytes(Ge);var Ke=Nt(Ge,Ee.length,Ue),Xe=[];for(gt=0;gt<Ee.length;gt+=1)Xe[gt]=Ee.charCodeAt(gt)^Ke.charCodeAt(gt);var _t=Nt(Xe,Ge.length,Ue),kt=[0];for(gt=0;gt<Ge.length;gt+=1)kt[gt+1]=Ge[gt]^_t.charCodeAt(gt);return new ge(kt.concat(Xe))}(k,this.n.bitLength()+7>>3,L,X);if(null==ie)return null;var he=this.doPublic(ie);if(null==he)return null;var Pe=he.toString(16);return 1&Pe.length?"0"+Pe:Pe},Gt.prototype.type="RSA",un.prototype.equals=function(k){return k==this||this.q.equals(k.q)&&this.x.equals(k.x)},un.prototype.toBigInteger=function(){return this.x},un.prototype.negate=function(){return new un(this.q,this.x.negate().mod(this.q))},un.prototype.add=function(k){return new un(this.q,this.x.add(k.toBigInteger()).mod(this.q))},un.prototype.subtract=function(k){return new un(this.q,this.x.subtract(k.toBigInteger()).mod(this.q))},un.prototype.multiply=function(k){return new un(this.q,this.x.multiply(k.toBigInteger()).mod(this.q))},un.prototype.square=function(){return new un(this.q,this.x.square().mod(this.q))},un.prototype.divide=function(k){return new un(this.q,this.x.multiply(k.toBigInteger().modInverse(this.q)).mod(this.q))},Xt.prototype.getX=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},Xt.prototype.getY=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},Xt.prototype.equals=function(k){return k==this||(this.isInfinity()?k.isInfinity():k.isInfinity()?this.isInfinity():!!k.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(k.z)).mod(this.curve.q).equals(ge.ZERO)&&k.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(k.z)).mod(this.curve.q).equals(ge.ZERO))},Xt.prototype.isInfinity=function(){return null==this.x&&null==this.y||this.z.equals(ge.ZERO)&&!this.y.toBigInteger().equals(ge.ZERO)},Xt.prototype.negate=function(){return new Xt(this.curve,this.x,this.y.negate(),this.z)},Xt.prototype.add=function(k){if(this.isInfinity())return k;if(k.isInfinity())return this;var L=k.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(k.z)).mod(this.curve.q),X=k.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(k.z)).mod(this.curve.q);if(ge.ZERO.equals(X))return ge.ZERO.equals(L)?this.twice():this.curve.getInfinity();var ie=new ge("3"),he=this.x.toBigInteger(),Pe=this.y.toBigInteger(),Ne=(k.x.toBigInteger(),k.y.toBigInteger(),X.square()),Me=Ne.multiply(X),Ze=he.multiply(Ne),Ue=L.square().multiply(this.z),Ve=Ue.subtract(Ze.shiftLeft(1)).multiply(k.z).subtract(Me).multiply(X).mod(this.curve.q),We=Ze.multiply(ie).multiply(L).subtract(Pe.multiply(Me)).subtract(Ue.multiply(L)).multiply(k.z).add(L.multiply(Me)).mod(this.curve.q),nt=Me.multiply(this.z).multiply(k.z).mod(this.curve.q);return new Xt(this.curve,this.curve.fromBigInteger(Ve),this.curve.fromBigInteger(We),nt)},Xt.prototype.twice=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var k=new ge("3"),L=this.x.toBigInteger(),X=this.y.toBigInteger(),ie=X.multiply(this.z),he=ie.multiply(X).mod(this.curve.q),Pe=this.curve.a.toBigInteger(),Ne=L.square().multiply(k);ge.ZERO.equals(Pe)||(Ne=Ne.add(this.z.square().multiply(Pe)));var Me=(Ne=Ne.mod(this.curve.q)).square().subtract(L.shiftLeft(3).multiply(he)).shiftLeft(1).multiply(ie).mod(this.curve.q),Ze=Ne.multiply(k).multiply(L).subtract(he.shiftLeft(1)).shiftLeft(2).multiply(he).subtract(Ne.square().multiply(Ne)).mod(this.curve.q),Ue=ie.square().multiply(ie).shiftLeft(3).mod(this.curve.q);return new Xt(this.curve,this.curve.fromBigInteger(Me),this.curve.fromBigInteger(Ze),Ue)},Xt.prototype.multiply=function(k){if(this.isInfinity())return this;if(0==k.signum())return this.curve.getInfinity();var L,X=k,ie=X.multiply(new ge("3")),he=this.negate(),Pe=this,Ne=this.curve.q.subtract(k),Me=Ne.multiply(new ge("3")),Ze=new Xt(this.curve,this.x,this.y),Ue=Ze.negate();for(L=ie.bitLength()-2;L>0;--L){Pe=Pe.twice();var Ve=ie.testBit(L);Ve!=X.testBit(L)&&(Pe=Pe.add(Ve?this:he))}for(L=Me.bitLength()-2;L>0;--L){Ze=Ze.twice();var We=Me.testBit(L);We!=Ne.testBit(L)&&(Ze=Ze.add(We?Ze:Ue))}return Pe},Xt.prototype.multiplyTwo=function(k,L,X){var ie;ie=k.bitLength()>X.bitLength()?k.bitLength()-1:X.bitLength()-1;for(var he=this.curve.getInfinity(),Pe=this.add(L);ie>=0;)he=he.twice(),k.testBit(ie)?he=X.testBit(ie)?he.add(Pe):he.add(this):X.testBit(ie)&&(he=he.add(L)),--ie;return he},Kn.prototype.getQ=function(){return this.q},Kn.prototype.getA=function(){return this.a},Kn.prototype.getB=function(){return this.b},Kn.prototype.equals=function(k){return k==this||this.q.equals(k.q)&&this.a.equals(k.a)&&this.b.equals(k.b)},Kn.prototype.getInfinity=function(){return this.infinity},Kn.prototype.fromBigInteger=function(k){return new un(this.q,k)},Kn.prototype.decodePointHex=function(k){switch(parseInt(k.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:default:return null;case 4:case 6:case 7:var L=(k.length-2)/2,X=k.substr(2,L),ie=k.substr(L+2,L);return new Xt(this,this.fromBigInteger(new ge(X,16)),this.fromBigInteger(new ge(ie,16)))}},
/*! (c) Stefan Thomas | https://github.com/bitcoinjs/bitcoinjs-lib
             */
un.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},Xt.prototype.getEncoded=function(A){var k=function(Pe,Ne){var Me=Pe.toByteArrayUnsigned();if(Ne<Me.length)Me=Me.slice(Me.length-Ne);else for(;Ne>Me.length;)Me.unshift(0);return Me},L=this.getX().toBigInteger(),X=this.getY().toBigInteger(),ie=k(L,32);return A?X.isEven()?ie.unshift(2):ie.unshift(3):(ie.unshift(4),ie=ie.concat(k(X,32))),ie},Xt.decodeFrom=function(A,k){var L=k.length-1,X=k.slice(1,1+L/2),ie=k.slice(1+L/2,1+L);X.unshift(0),ie.unshift(0);var he=new ge(X),Pe=new ge(ie);return new Xt(A,A.fromBigInteger(he),A.fromBigInteger(Pe))},Xt.decodeFromHex=function(A,k){k.substr(0,2);var L=k.length-2,X=k.substr(2,L/2),ie=k.substr(2+L/2,L/2),he=new ge(X,16),Pe=new ge(ie,16);return new Xt(A,A.fromBigInteger(he),A.fromBigInteger(Pe))},Xt.prototype.add2D=function(A){if(this.isInfinity())return A;if(A.isInfinity())return this;if(this.x.equals(A.x))return this.y.equals(A.y)?this.twice():this.curve.getInfinity();var k=A.x.subtract(this.x),L=A.y.subtract(this.y).divide(k),X=L.square().subtract(this.x).subtract(A.x),ie=L.multiply(this.x.subtract(X)).subtract(this.y);return new Xt(this.curve,X,ie)},Xt.prototype.twice2D=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var A=this.curve.fromBigInteger(ge.valueOf(2)),k=this.curve.fromBigInteger(ge.valueOf(3)),L=this.x.square().multiply(k).add(this.curve.a).divide(this.y.multiply(A)),X=L.square().subtract(this.x.multiply(A)),ie=L.multiply(this.x.subtract(X)).subtract(this.y);return new Xt(this.curve,X,ie)},Xt.prototype.multiply2D=function(A){if(this.isInfinity())return this;if(0==A.signum())return this.curve.getInfinity();var k,L=A,X=L.multiply(new ge("3")),ie=this.negate(),he=this;for(k=X.bitLength()-2;k>0;--k){he=he.twice();var Pe=X.testBit(k);Pe!=L.testBit(k)&&(he=he.add2D(Pe?this:ie))}return he},Xt.prototype.isOnCurve=function(){var A=this.getX().toBigInteger(),k=this.getY().toBigInteger(),L=this.curve.getA().toBigInteger(),X=this.curve.getB().toBigInteger(),ie=this.curve.getQ(),he=k.multiply(k).mod(ie),Pe=A.multiply(A).multiply(A).add(L.multiply(A)).add(X).mod(ie);return he.equals(Pe)},Xt.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},Xt.prototype.validate=function(){var A=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var k=this.getX().toBigInteger(),L=this.getY().toBigInteger();if(k.compareTo(ge.ONE)<0||k.compareTo(A.subtract(ge.ONE))>0)throw new Error("x coordinate out of bounds");if(L.compareTo(ge.ONE)<0||L.compareTo(A.subtract(ge.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(A).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};var zn=function(){var A=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),k=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),L={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function X(Pe,Ne,Me){return Ne?L[Ne]:String.fromCharCode(parseInt(Me,16))}var ie=new String(""),he=Object.hasOwnProperty;return function(Pe,Ne){var Me,Ze,Ue=Pe.match(A),Ve=Ue[0],We=!1;"{"===Ve?Me={}:"["===Ve?Me=[]:(Me=[],We=!0);for(var nt=[Me],d=1-We,gt=Ue.length;d<gt;++d){var Et;switch((Ve=Ue[d]).charCodeAt(0)){default:(Et=nt[0])[Ze||Et.length]=+Ve,Ze=void 0;break;case 34:if(-1!==(Ve=Ve.substring(1,Ve.length-1)).indexOf("\\")&&(Ve=Ve.replace(k,X)),Et=nt[0],!Ze){if(!(Et instanceof Array)){Ze=Ve||ie;break}Ze=Et.length}Et[Ze]=Ve,Ze=void 0;break;case 91:nt.unshift((Et=nt[0])[Ze||Et.length]=[]),Ze=void 0;break;case 93:case 125:nt.shift();break;case 102:(Et=nt[0])[Ze||Et.length]=!1,Ze=void 0;break;case 110:(Et=nt[0])[Ze||Et.length]=null,Ze=void 0;break;case 116:(Et=nt[0])[Ze||Et.length]=!0,Ze=void 0;break;case 123:nt.unshift((Et=nt[0])[Ze||Et.length]={}),Ze=void 0}}if(We){if(1!==nt.length)throw new Error;Me=Me[0]}else if(nt.length)throw new Error;return Ne&&(Me=function Ee(Ge,Ke){var Xe=Ge[Ke];if(Xe&&"object"===(void 0===Xe?"undefined":Z(Xe))){var _t=null;for(var kt in Xe)if(he.call(Xe,kt)&&Xe!==Ge){var Wt=Ee(Xe,kt);void 0!==Wt?Xe[kt]=Wt:(_t||(_t=[]),_t.push(kt))}if(_t)for(var $t=_t.length;--$t>=0;)delete Xe[_t[$t]]}return Ne.call(Ge,Ke,Xe)}({"":Me},"")),Me}}();void 0!==De&&De||(S.KJUR=De={}),void 0!==De.asn1&&De.asn1||(De.asn1={}),De.asn1.ASN1Util=new function(){this.integerToByteHex=function(A){var k=A.toString(16);return k.length%2==1&&(k="0"+k),k},this.bigIntToMinTwosComplementsHex=function(A){var k=A.toString(16);if("-"!=k.substr(0,1))k.length%2==1?k="0"+k:k.match(/^[0-7]/)||(k="00"+k);else{var L=k.substr(1).length;L%2==1?L+=1:k.match(/^[0-7]/)||(L+=2);for(var X="",ie=0;ie<L;ie++)X+="f";k=new ge(X,16).xor(A).add(ge.ONE).toString(16).replace(/^-/,"")}return k},this.getPEMStringFromHex=function(A,k){return jr(A,k)},this.newObject=function(A){var k=De.asn1,L=k.ASN1Object,X=k.DERBoolean,ie=k.DERInteger,he=k.DERBitString,Pe=k.DEROctetString,Ne=k.DERNull,Me=k.DERObjectIdentifier,Ze=k.DEREnumerated,Ue=k.DERUTF8String,Ve=k.DERNumericString,We=k.DERPrintableString,nt=k.DERTeletexString,d=k.DERIA5String,gt=k.DERUTCTime,Et=k.DERGeneralizedTime,Ee=k.DERVisibleString,Ge=k.DERBMPString,Ke=k.DERSequence,Xe=k.DERSet,_t=k.DERTaggedObject,kt=k.ASN1Util.newObject;if(A instanceof k.ASN1Object)return A;var Wt=Object.keys(A);if(1!=Wt.length)throw new Error("key of param shall be only one.");var $t=Wt[0];if(-1==":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+$t+":"))throw new Error("undefined key: "+$t);if("bool"==$t)return new X(A[$t]);if("int"==$t)return new ie(A[$t]);if("bitstr"==$t)return new he(A[$t]);if("octstr"==$t)return new Pe(A[$t]);if("null"==$t)return new Ne(A[$t]);if("oid"==$t)return new Me(A[$t]);if("enum"==$t)return new Ze(A[$t]);if("utf8str"==$t)return new Ue(A[$t]);if("numstr"==$t)return new Ve(A[$t]);if("prnstr"==$t)return new We(A[$t]);if("telstr"==$t)return new nt(A[$t]);if("ia5str"==$t)return new d(A[$t]);if("utctime"==$t)return new gt(A[$t]);if("gentime"==$t)return new Et(A[$t]);if("visstr"==$t)return new Ee(A[$t]);if("bmpstr"==$t)return new Ge(A[$t]);if("asn1"==$t)return new L(A[$t]);if("seq"==$t){for(var Zn=A[$t],en=[],gn=0;gn<Zn.length;gn++){var sr=kt(Zn[gn]);en.push(sr)}return new Ke({array:en})}if("set"==$t){for(Zn=A[$t],en=[],gn=0;gn<Zn.length;gn++)sr=kt(Zn[gn]),en.push(sr);return new Xe({array:en})}if("tag"==$t){var gr=A[$t];if("[object Array]"===Object.prototype.toString.call(gr)&&3==gr.length){var vr=kt(gr[2]);return new _t({tag:gr[0],explicit:gr[1],obj:vr})}return new _t(gr)}},this.jsonToASN1HEX=function(A){return this.newObject(A).getEncodedHex()}},De.asn1.ASN1Util.oidHexToInt=function(A){for(var k="",L=parseInt(A.substr(0,2),16),X=(k=Math.floor(L/40)+"."+L%40,""),ie=2;ie<A.length;ie+=2){var he=("00000000"+parseInt(A.substr(ie,2),16).toString(2)).slice(-8);X+=he.substr(1,7),"0"==he.substr(0,1)&&(k=k+"."+new ge(X,2).toString(10),X="")}return k},De.asn1.ASN1Util.oidIntToHex=function(A){var k=function(Me){var Ze=Me.toString(16);return 1==Ze.length&&(Ze="0"+Ze),Ze},L=function(Me){var Ze="",Ue=new ge(Me,10).toString(2),Ve=7-Ue.length%7;7==Ve&&(Ve=0);for(var We="",nt=0;nt<Ve;nt++)We+="0";for(Ue=We+Ue,nt=0;nt<Ue.length-1;nt+=7){var d=Ue.substr(nt,7);nt!=Ue.length-7&&(d="1"+d),Ze+=k(parseInt(d,2))}return Ze};if(!A.match(/^[0-9.]+$/))throw"malformed oid string: "+A;var X="",ie=A.split("."),he=40*parseInt(ie[0])+parseInt(ie[1]);X+=k(he),ie.splice(0,2);for(var Pe=0;Pe<ie.length;Pe++)X+=L(ie[Pe]);return X},De.asn1.ASN1Object=function(A){this.params=null,this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n=0,v="+this.hV);var k=this.hV.length/2,L=k.toString(16);if(L.length%2==1&&(L="0"+L),k<128)return L;var X=L.length/2;if(X>15)throw"ASN.1 length too long to represent by 8x: n = "+k.toString(16);return(128+X).toString(16)+L},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(k){this.params=k},null!=A&&null!=A.tlv&&(this.hTLV=A.tlv,this.isModified=!1)},De.asn1.DERAbstractString=function(A){De.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(k){this.hTLV=null,this.isModified=!0,this.s=k,this.hV=Fr(this.s).toLowerCase()},this.setStringHex=function(k){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=k},this.getFreshValueHex=function(){return this.hV},void 0!==A&&("string"==typeof A?this.setString(A):void 0!==A.str?this.setString(A.str):void 0!==A.hex&&this.setStringHex(A.hex))},p.lang.extend(De.asn1.DERAbstractString,De.asn1.ASN1Object),De.asn1.DERAbstractTime=function(A){De.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(k){var L=k.getTime()+6e4*k.getTimezoneOffset();return new Date(L)},this.formatDate=function(k,L,X){var ie=this.zeroPadding,he=this.localDateToUTC(k),Pe=String(he.getFullYear());"utc"==L&&(Pe=Pe.substr(2,2));var Ne=Pe+ie(String(he.getMonth()+1),2)+ie(String(he.getDate()),2)+ie(String(he.getHours()),2)+ie(String(he.getMinutes()),2)+ie(String(he.getSeconds()),2);if(!0===X){var Me=he.getMilliseconds();if(0!=Me){var Ze=ie(String(Me),3);Ne=Ne+"."+(Ze=Ze.replace(/[0]+$/,""))}}return Ne+"Z"},this.zeroPadding=function(k,L){return k.length>=L?k:new Array(L-k.length+1).join("0")+k},this.getString=function(){return this.s},this.setString=function(k){this.hTLV=null,this.isModified=!0,this.s=k,this.hV=Pt(k)},this.setByDateValue=function(k,L,X,ie,he,Pe){var Ne=new Date(Date.UTC(k,L-1,X,ie,he,Pe,0));this.setByDate(Ne)},this.getFreshValueHex=function(){return this.hV}},p.lang.extend(De.asn1.DERAbstractTime,De.asn1.ASN1Object),De.asn1.DERAbstractStructured=function(A){De.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(k){this.hTLV=null,this.isModified=!0,this.asn1Array=k},this.appendASN1Object=function(k){this.hTLV=null,this.isModified=!0,this.asn1Array.push(k)},this.asn1Array=new Array,void 0!==A&&void 0!==A.array&&(this.asn1Array=A.array)},p.lang.extend(De.asn1.DERAbstractStructured,De.asn1.ASN1Object),De.asn1.DERBoolean=function(A){De.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV=0==A?"010100":"0101ff"},p.lang.extend(De.asn1.DERBoolean,De.asn1.ASN1Object),De.asn1.DERInteger=function(A){De.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(k){this.hTLV=null,this.isModified=!0,this.hV=De.asn1.ASN1Util.bigIntToMinTwosComplementsHex(k)},this.setByInteger=function(k){var L=new ge(String(k),10);this.setByBigInteger(L)},this.setValueHex=function(k){this.hV=k},this.getFreshValueHex=function(){return this.hV},void 0!==A&&(void 0!==A.bigint?this.setByBigInteger(A.bigint):void 0!==A.int?this.setByInteger(A.int):"number"==typeof A?this.setByInteger(A):void 0!==A.hex&&this.setValueHex(A.hex))},p.lang.extend(De.asn1.DERInteger,De.asn1.ASN1Object),De.asn1.DERBitString=function(A){if(void 0!==A&&void 0!==A.obj){var k=De.asn1.ASN1Util.newObject(A.obj);A.hex="00"+k.getEncodedHex()}De.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(L){this.hTLV=null,this.isModified=!0,this.hV=L},this.setUnusedBitsAndHexValue=function(L,X){if(L<0||7<L)throw"unused bits shall be from 0 to 7: u = "+L;var ie="0"+L;this.hTLV=null,this.isModified=!0,this.hV=ie+X},this.setByBinaryString=function(L){var X=8-(L=L.replace(/0+$/,"")).length%8;8==X&&(X=0);for(var ie=0;ie<=X;ie++)L+="0";var he="";for(ie=0;ie<L.length-1;ie+=8){var Pe=L.substr(ie,8),Ne=parseInt(Pe,2).toString(16);1==Ne.length&&(Ne="0"+Ne),he+=Ne}this.hTLV=null,this.isModified=!0,this.hV="0"+X+he},this.setByBooleanArray=function(L){for(var X="",ie=0;ie<L.length;ie++)X+=1==L[ie]?"1":"0";this.setByBinaryString(X)},this.newFalseArray=function(L){for(var X=new Array(L),ie=0;ie<L;ie++)X[ie]=!1;return X},this.getFreshValueHex=function(){return this.hV},void 0!==A&&("string"==typeof A&&A.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(A):void 0!==A.hex?this.setHexValueIncludingUnusedBits(A.hex):void 0!==A.bin?this.setByBinaryString(A.bin):void 0!==A.array&&this.setByBooleanArray(A.array))},p.lang.extend(De.asn1.DERBitString,De.asn1.ASN1Object),De.asn1.DEROctetString=function(A){if(void 0!==A&&void 0!==A.obj){var k=De.asn1.ASN1Util.newObject(A.obj);A.hex=k.getEncodedHex()}De.asn1.DEROctetString.superclass.constructor.call(this,A),this.hT="04"},p.lang.extend(De.asn1.DEROctetString,De.asn1.DERAbstractString),De.asn1.DERNull=function(){De.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},p.lang.extend(De.asn1.DERNull,De.asn1.ASN1Object),De.asn1.DERObjectIdentifier=function(A){De.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(k){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=k},this.setValueOidString=function(k){var L=function(ie){var he=function(We){var nt=We.toString(16);return 1==nt.length&&(nt="0"+nt),nt},Pe=function(We){var nt="",d=parseInt(We,10).toString(2),gt=7-d.length%7;7==gt&&(gt=0);for(var Et="",Ee=0;Ee<gt;Ee++)Et+="0";for(d=Et+d,Ee=0;Ee<d.length-1;Ee+=7){var Ge=d.substr(Ee,7);Ee!=d.length-7&&(Ge="1"+Ge),nt+=he(parseInt(Ge,2))}return nt};try{if(!ie.match(/^[0-9.]+$/))return null;var Ne="",Me=ie.split("."),Ze=40*parseInt(Me[0],10)+parseInt(Me[1],10);Ne+=he(Ze),Me.splice(0,2);for(var Ue=0;Ue<Me.length;Ue++)Ne+=Pe(Me[Ue]);return Ne}catch{return null}}(k);if(null==L)throw new Error("malformed oid string: "+k);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=L},this.setValueName=function(k){var L=De.asn1.x509.OID.name2oid(k);if(""===L)throw new Error("DERObjectIdentifier oidName undefined: "+k);this.setValueOidString(L)},this.setValueNameOrOid=function(k){k.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(k):this.setValueName(k)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(k){"string"==typeof k?this.setValueNameOrOid(k):void 0!==k.oid?this.setValueNameOrOid(k.oid):void 0!==k.name?this.setValueNameOrOid(k.name):void 0!==k.hex&&this.setValueHex(k.hex)},void 0!==A&&this.setByParam(A)},p.lang.extend(De.asn1.DERObjectIdentifier,De.asn1.ASN1Object),De.asn1.DEREnumerated=function(A){De.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(k){this.hTLV=null,this.isModified=!0,this.hV=De.asn1.ASN1Util.bigIntToMinTwosComplementsHex(k)},this.setByInteger=function(k){var L=new ge(String(k),10);this.setByBigInteger(L)},this.setValueHex=function(k){this.hV=k},this.getFreshValueHex=function(){return this.hV},void 0!==A&&(void 0!==A.int?this.setByInteger(A.int):"number"==typeof A?this.setByInteger(A):void 0!==A.hex&&this.setValueHex(A.hex))},p.lang.extend(De.asn1.DEREnumerated,De.asn1.ASN1Object),De.asn1.DERUTF8String=function(A){De.asn1.DERUTF8String.superclass.constructor.call(this,A),this.hT="0c"},p.lang.extend(De.asn1.DERUTF8String,De.asn1.DERAbstractString),De.asn1.DERNumericString=function(A){De.asn1.DERNumericString.superclass.constructor.call(this,A),this.hT="12"},p.lang.extend(De.asn1.DERNumericString,De.asn1.DERAbstractString),De.asn1.DERPrintableString=function(A){De.asn1.DERPrintableString.superclass.constructor.call(this,A),this.hT="13"},p.lang.extend(De.asn1.DERPrintableString,De.asn1.DERAbstractString),De.asn1.DERTeletexString=function(A){De.asn1.DERTeletexString.superclass.constructor.call(this,A),this.hT="14"},p.lang.extend(De.asn1.DERTeletexString,De.asn1.DERAbstractString),De.asn1.DERIA5String=function(A){De.asn1.DERIA5String.superclass.constructor.call(this,A),this.hT="16"},p.lang.extend(De.asn1.DERIA5String,De.asn1.DERAbstractString),De.asn1.DERVisibleString=function(A){De.asn1.DERIA5String.superclass.constructor.call(this,A),this.hT="1a"},p.lang.extend(De.asn1.DERVisibleString,De.asn1.DERAbstractString),De.asn1.DERBMPString=function(A){De.asn1.DERBMPString.superclass.constructor.call(this,A),this.hT="1e"},p.lang.extend(De.asn1.DERBMPString,De.asn1.DERAbstractString),De.asn1.DERUTCTime=function(A){De.asn1.DERUTCTime.superclass.constructor.call(this,A),this.hT="17",this.setByDate=function(k){this.hTLV=null,this.isModified=!0,this.date=k,this.s=this.formatDate(this.date,"utc"),this.hV=Pt(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=Pt(this.s)),this.hV},void 0!==A&&(void 0!==A.str?this.setString(A.str):"string"==typeof A&&A.match(/^[0-9]{12}Z$/)?this.setString(A):void 0!==A.hex?this.setStringHex(A.hex):void 0!==A.date&&this.setByDate(A.date))},p.lang.extend(De.asn1.DERUTCTime,De.asn1.DERAbstractTime),De.asn1.DERGeneralizedTime=function(A){De.asn1.DERGeneralizedTime.superclass.constructor.call(this,A),this.hT="18",this.withMillis=!1,this.setByDate=function(k){this.hTLV=null,this.isModified=!0,this.date=k,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=Pt(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=Pt(this.s)),this.hV},void 0!==A&&(void 0!==A.str?this.setString(A.str):"string"==typeof A&&A.match(/^[0-9]{14}Z$/)?this.setString(A):void 0!==A.hex?this.setStringHex(A.hex):void 0!==A.date&&this.setByDate(A.date),!0===A.millis&&(this.withMillis=!0))},p.lang.extend(De.asn1.DERGeneralizedTime,De.asn1.DERAbstractTime),De.asn1.DERSequence=function(A){De.asn1.DERSequence.superclass.constructor.call(this,A),this.hT="30",this.getFreshValueHex=function(){for(var k="",L=0;L<this.asn1Array.length;L++)k+=this.asn1Array[L].getEncodedHex();return this.hV=k,this.hV}},p.lang.extend(De.asn1.DERSequence,De.asn1.DERAbstractStructured),De.asn1.DERSet=function(A){De.asn1.DERSet.superclass.constructor.call(this,A),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var k=new Array,L=0;L<this.asn1Array.length;L++)k.push(this.asn1Array[L].getEncodedHex());return 1==this.sortFlag&&k.sort(),this.hV=k.join(""),this.hV},void 0!==A&&void 0!==A.sortflag&&0==A.sortflag&&(this.sortFlag=!1)},p.lang.extend(De.asn1.DERSet,De.asn1.DERAbstractStructured),De.asn1.DERTaggedObject=function(A){De.asn1.DERTaggedObject.superclass.constructor.call(this);var k=De.asn1;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(L,X,ie){this.hT=X,this.isExplicit=L,this.asn1Object=ie,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=ie.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,X),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(L){null!=L.tag&&(this.hT=L.tag),null!=L.explicit&&(this.isExplicit=L.explicit),null!=L.tage&&(this.hT=L.tage,this.isExplicit=!0),null!=L.tagi&&(this.hT=L.tagi,this.isExplicit=!1),null!=L.obj&&(L.obj instanceof k.ASN1Object?(this.asn1Object=L.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)):"object"==Z(L.obj)&&(this.asn1Object=k.ASN1Util.newObject(L.obj),this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},null!=A&&this.setByParam(A)},p.lang.extend(De.asn1.DERTaggedObject,De.asn1.ASN1Object);var De,Zr,ar,Qt=new function(){};function Co(A){for(var k=new Array,L=0;L<A.length;L++)k[L]=A.charCodeAt(L);return k}function Ai(A){for(var k="",L=0;L<A.length;L++)k+=String.fromCharCode(A[L]);return k}function yt(A){for(var k="",L=0;L<A.length;L++){var X=A[L].toString(16);1==X.length&&(X="0"+X),k+=X}return k}function Pt(A){return yt(Co(A))}function Pn(A){return(A=(A=A.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function Gn(A){return A.length%4==2?A+="==":A.length%4==3&&(A+="="),(A=A.replace(/-/g,"+")).replace(/_/g,"/")}function Cn(A){return A.length%2==1&&(A="0"+A),Pn(se(A))}function ln(A){return ve(Gn(A))}function Fr(A){return jo(Di(A))}function lr(A){return decodeURIComponent(Vi(A))}function wn(A){for(var k="",L=0;L<A.length-1;L+=2)k+=String.fromCharCode(parseInt(A.substr(L,2),16));return k}function Ar(A){for(var k="",L=0;L<A.length;L++)k+=("0"+A.charCodeAt(L).toString(16)).slice(-2);return k}function Qn(A){return se(A)}function Ni(A){return Qn(A).replace(/(.{64})/g,"$1\r\n").replace(/\r\n$/,"")}function Xr(A){return ve(A.replace(/[^0-9A-Za-z\/+=]*/g,""))}function jr(A,k){return"-----BEGIN "+k+"-----\r\n"+Ni(A)+"\r\n-----END "+k+"-----\r\n"}function di(A,k){if(-1==A.indexOf("-----BEGIN "))throw"can't find PEM header: "+k;return Xr(A=void 0!==k?(A=A.replace(new RegExp("^[^]*-----BEGIN "+k+"-----"),"")).replace(new RegExp("-----END "+k+"-----[^]*$"),""):(A=A.replace(/^[^]*-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----[^]*$/,""))}function Lo(A){var k,L,X,ie,he,Pe,Ne,Me,Ze,Ue,Ve;if(Ve=A.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return Me=Ve[1],k=parseInt(Me),2===Me.length&&(50<=k&&k<100?k=1900+k:0<=k&&k<50&&(k=2e3+k)),L=parseInt(Ve[2])-1,X=parseInt(Ve[3]),ie=parseInt(Ve[4]),he=parseInt(Ve[5]),Pe=parseInt(Ve[6]),Ne=0,""!==(Ze=Ve[7])&&(Ue=(Ze.substr(1)+"00").substr(0,3),Ne=parseInt(Ue)),Date.UTC(k,L,X,ie,he,Pe,Ne);throw"unsupported zulu format: "+A}function Gi(A){return~~(Lo(A)/1e3)}function jo(A){return A.replace(/%/g,"")}function Vi(A){return A.replace(/(..)/g,"%$1")}function Ri(A){var k="malformed IPv6 address";if(!A.match(/^[0-9A-Fa-f:]+$/))throw k;var L=(A=A.toLowerCase()).split(":").length-1;if(L<2)throw k;var X=":".repeat(7-L+2),ie=(A=A.replace("::",X)).split(":");if(8!=ie.length)throw k;for(var he=0;he<8;he++)ie[he]=("0000"+ie[he]).slice(-4);return ie.join("")}function Hi(A){if(!A.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var k=(A=A.toLowerCase()).match(/.{1,4}/g),L=0;L<8;L++)k[L]=k[L].replace(/^0+/,""),""==k[L]&&(k[L]="0");var X=(A=":"+k.join(":")+":").match(/:(0:){2,}/g);if(null===X)return A.slice(1,-1);var ie="";for(L=0;L<X.length;L++)X[L].length>ie.length&&(ie=X[L]);return(A=A.replace(ie,"::")).slice(1,-1)}function wo(A){var k="malformed hex value";if(!A.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw k;if(8!=A.length)return 32==A.length?Hi(A):A;try{return parseInt(A.substr(0,2),16)+"."+parseInt(A.substr(2,2),16)+"."+parseInt(A.substr(4,2),16)+"."+parseInt(A.substr(6,2),16)}catch{throw k}}function Di(A){for(var k=encodeURIComponent(A),L="",X=0;X<k.length;X++)"%"==k[X]?(L+=k.substr(X,3),X+=2):L=L+"%"+Pt(k[X]);return L}function Ti(A){return!(A.length%2!=0||!A.match(/^[0-9a-f]+$/)&&!A.match(/^[0-9A-F]+$/))}function gi(A){return A.length%2==1?"0"+A:A.substr(0,1)>"7"?"00"+A:A}Qt.getLblen=function(A,k){if("8"!=A.substr(k+2,1))return 1;var L=parseInt(A.substr(k+3,1));return 0==L?-1:0<L&&L<10?L+1:-2},Qt.getL=function(A,k){var L=Qt.getLblen(A,k);return L<1?"":A.substr(k+2,2*L)},Qt.getVblen=function(A,k){var L;return""==(L=Qt.getL(A,k))?-1:("8"===L.substr(0,1)?new ge(L.substr(2),16):new ge(L,16)).intValue()},Qt.getVidx=function(A,k){var L=Qt.getLblen(A,k);return L<0?L:k+2*(L+1)},Qt.getV=function(A,k){var L=Qt.getVidx(A,k),X=Qt.getVblen(A,k);return A.substr(L,2*X)},Qt.getTLV=function(A,k){return A.substr(k,2)+Qt.getL(A,k)+Qt.getV(A,k)},Qt.getTLVblen=function(A,k){return 2+2*Qt.getLblen(A,k)+2*Qt.getVblen(A,k)},Qt.getNextSiblingIdx=function(A,k){return Qt.getVidx(A,k)+2*Qt.getVblen(A,k)},Qt.getChildIdx=function(A,k){var L,X,ie,he=Qt,Pe=[];L=he.getVidx(A,k),X=2*he.getVblen(A,k),"03"==A.substr(k,2)&&(L+=2,X-=2),ie=0;for(var Ne=L;ie<=X;){var Me=he.getTLVblen(A,Ne);if((ie+=Me)<=X&&Pe.push(Ne),Ne+=Me,ie>=X)break}return Pe},Qt.getNthChildIdx=function(A,k,L){return Qt.getChildIdx(A,k)[L]},Qt.getIdxbyList=function(A,k,L,X){var ie,he,Pe=Qt;return 0==L.length?void 0!==X&&A.substr(k,2)!==X?-1:k:(ie=L.shift())>=(he=Pe.getChildIdx(A,k)).length?-1:Pe.getIdxbyList(A,he[ie],L,X)},Qt.getIdxbyListEx=function(A,k,L,X){var ie,he,Pe=Qt;if(0==L.length)return void 0!==X&&A.substr(k,2)!==X?-1:k;ie=L.shift(),he=Pe.getChildIdx(A,k);for(var Ne=0,Me=0;Me<he.length;Me++){var Ze=A.substr(he[Me],2);if("number"==typeof ie&&!Pe.isContextTag(Ze)&&Ne==ie||"string"==typeof ie&&Pe.isContextTag(Ze,ie))return Pe.getIdxbyListEx(A,he[Me],L,X);Pe.isContextTag(Ze)||Ne++}return-1},Qt.getTLVbyList=function(A,k,L,X){var ie=Qt,he=ie.getIdxbyList(A,k,L,X);return-1==he||he>=A.length?null:ie.getTLV(A,he)},Qt.getTLVbyListEx=function(A,k,L,X){var ie=Qt,he=ie.getIdxbyListEx(A,k,L,X);return-1==he?null:ie.getTLV(A,he)},Qt.getVbyList=function(A,k,L,X,ie){var he,Pe,Ne=Qt;return-1==(he=Ne.getIdxbyList(A,k,L,X))||he>=A.length?null:(Pe=Ne.getV(A,he),!0===ie&&(Pe=Pe.substr(2)),Pe)},Qt.getVbyListEx=function(A,k,L,X,ie){var he,Pe,Ne=Qt;return-1==(he=Ne.getIdxbyListEx(A,k,L,X))?null:(Pe=Ne.getV(A,he),"03"==A.substr(he,2)&&!1!==ie&&(Pe=Pe.substr(2)),Pe)},Qt.getInt=function(A,k,L){null==L&&(L=-1);try{var X=A.substr(k,2);if("02"!=X&&"03"!=X)return L;var ie=Qt.getV(A,k);return"02"==X?parseInt(ie,16):function(Pe){try{var Ne=Pe.substr(0,2);if("00"==Ne)return parseInt(Pe.substr(2),16);var Me=parseInt(Ne,16),Ze=Pe.substr(2),Ue=parseInt(Ze,16).toString(2);return"0"==Ue&&(Ue="00000000"),Ue=Ue.slice(0,0-Me),parseInt(Ue,2)}catch{return-1}}(ie)}catch{return L}},Qt.getOID=function(A,k,L){null==L&&(L=null);try{return"06"!=A.substr(k,2)?L:function(ie){if(!Ti(ie))return null;try{var he=[],Pe=ie.substr(0,2),Ne=parseInt(Pe,16);he[0]=new String(Math.floor(Ne/40)),he[1]=new String(Ne%40);for(var Me=ie.substr(2),Ze=[],Ue=0;Ue<Me.length/2;Ue++)Ze.push(parseInt(Me.substr(2*Ue,2),16));var Ve=[],We="";for(Ue=0;Ue<Ze.length;Ue++)128&Ze[Ue]?We+=Qr((127&Ze[Ue]).toString(2),7):(We+=Qr((127&Ze[Ue]).toString(2),7),Ve.push(new String(parseInt(We,2))),We="");var nt=he.join(".");return Ve.length>0&&(nt=nt+"."+Ve.join(".")),nt}catch{return null}}(Qt.getV(A,k))}catch{return L}},Qt.getOIDName=function(A,k,L){null==L&&(L=null);try{var X=Qt.getOID(A,k,L);if(X==L)return L;var ie=De.asn1.x509.OID.oid2name(X);return""==ie?X:ie}catch{return L}},Qt.getString=function(A,k,L){null==L&&(L=null);try{return wn(Qt.getV(A,k))}catch{return L}},Qt.hextooidstr=function(A){var k=function(We,nt){return We.length>=nt?We:new Array(nt-We.length+1).join("0")+We},L=[],X=A.substr(0,2),ie=parseInt(X,16);L[0]=new String(Math.floor(ie/40)),L[1]=new String(ie%40);for(var he=A.substr(2),Pe=[],Ne=0;Ne<he.length/2;Ne++)Pe.push(parseInt(he.substr(2*Ne,2),16));var Me=[],Ze="";for(Ne=0;Ne<Pe.length;Ne++)128&Pe[Ne]?Ze+=k((127&Pe[Ne]).toString(2),7):(Ze+=k((127&Pe[Ne]).toString(2),7),Me.push(new String(parseInt(Ze,2))),Ze="");var Ue=L.join(".");return Me.length>0&&(Ue=Ue+"."+Me.join(".")),Ue},Qt.dump=function(A,k,L,X){var ie=Qt,he=ie.getV,Pe=ie.dump,Ne=ie.getChildIdx,Me=A;A instanceof De.asn1.ASN1Object&&(Me=A.getEncodedHex());var Ze=function($t,Zn){return $t.length<=2*Zn?$t:$t.substr(0,Zn)+"..(total "+$t.length/2+"bytes).."+$t.substr($t.length-Zn,Zn)};void 0===k&&(k={ommit_long_octet:32}),void 0===L&&(L=0),void 0===X&&(X="");var Ue,Ve=k.ommit_long_octet;if("01"==(Ue=Me.substr(L,2)))return"00"==(We=he(Me,L))?X+"BOOLEAN FALSE\n":X+"BOOLEAN TRUE\n";if("02"==Ue)return X+"INTEGER "+Ze(We=he(Me,L),Ve)+"\n";if("03"==Ue){var We=he(Me,L);return ie.isASN1HEX(We.substr(2))?(nt=X+"BITSTRING, encapsulates\n")+Pe(We.substr(2),k,0,X+"  "):X+"BITSTRING "+Ze(We,Ve)+"\n"}if("04"==Ue)return We=he(Me,L),ie.isASN1HEX(We)?(nt=X+"OCTETSTRING, encapsulates\n",nt+=Pe(We,k,0,X+"  ")):X+"OCTETSTRING "+Ze(We,Ve)+"\n";if("05"==Ue)return X+"NULL\n";if("06"==Ue){var d=he(Me,L),gt=De.asn1.ASN1Util.oidHexToInt(d),Et=De.asn1.x509.OID.oid2name(gt),Ee=gt.replace(/\./g," ");return""!=Et?X+"ObjectIdentifier "+Et+" ("+Ee+")\n":X+"ObjectIdentifier ("+Ee+")\n"}if("0a"==Ue)return X+"ENUMERATED "+parseInt(he(Me,L))+"\n";if("0c"==Ue)return X+"UTF8String '"+lr(he(Me,L))+"'\n";if("13"==Ue)return X+"PrintableString '"+lr(he(Me,L))+"'\n";if("14"==Ue)return X+"TeletexString '"+lr(he(Me,L))+"'\n";if("16"==Ue)return X+"IA5String '"+lr(he(Me,L))+"'\n";if("17"==Ue)return X+"UTCTime "+lr(he(Me,L))+"\n";if("18"==Ue)return X+"GeneralizedTime "+lr(he(Me,L))+"\n";if("1a"==Ue)return X+"VisualString '"+lr(he(Me,L))+"'\n";if("1e"==Ue)return X+"BMPString '"+lr(he(Me,L))+"'\n";if("30"==Ue){if("3000"==Me.substr(L,4))return X+"SEQUENCE {}\n";nt=X+"SEQUENCE\n";var Ge=k;if((2==(_t=Ne(Me,L)).length||3==_t.length)&&"06"==Me.substr(_t[0],2)&&"04"==Me.substr(_t[_t.length-1],2)){Et=ie.oidname(he(Me,_t[0]));var Ke=JSON.parse(JSON.stringify(k));Ke.x509ExtName=Et,Ge=Ke}for(var Xe=0;Xe<_t.length;Xe++)nt+=Pe(Me,Ge,_t[Xe],X+"  ");return nt}if("31"==Ue){nt=X+"SET\n";var _t=Ne(Me,L);for(Xe=0;Xe<_t.length;Xe++)nt+=Pe(Me,k,_t[Xe],X+"  ");return nt}if(128&(Ue=parseInt(Ue,16))){var nt,kt=31&Ue;if(32&Ue){for(nt=X+"["+kt+"]\n",_t=Ne(Me,L),Xe=0;Xe<_t.length;Xe++)nt+=Pe(Me,k,_t[Xe],X+"  ");return nt}return We=he(Me,L),Qt.isASN1HEX(We)?(nt=X+"["+kt+"]\n")+Pe(We,k,0,X+"  "):(("68747470"==We.substr(0,8)||"subjectAltName"===k.x509ExtName&&2==kt)&&(We=lr(We)),X+"["+kt+"] "+We+"\n")}return X+"UNKNOWN("+Ue+") "+he(Me,L)+"\n"},Qt.isContextTag=function(A,k){var L,X;A=A.toLowerCase();try{L=parseInt(A,16)}catch{return-1}if(void 0===k)return 128==(192&L);try{return null!=k.match(/^\[[0-9]+\]$/)&&!((X=parseInt(k.substr(1,k.length-1),10))>31)&&128==(192&L)&&(31&L)==X}catch{return!1}},Qt.isASN1HEX=function(A){var k=Qt;if(A.length%2==1)return!1;var L=k.getVblen(A,0),X=A.substr(0,2),ie=k.getL(A,0);return A.length-X.length-ie.length==2*L},Qt.checkStrictDER=function(A,k,L,X,ie){var he=Qt;if(void 0===L){if("string"!=typeof A)throw new Error("not hex string");if(A=A.toLowerCase(),!De.lang.String.isHex(A))throw new Error("not hex string");L=A.length,ie=(X=A.length/2)<128?1:Math.ceil(X.toString(16))+1}if(he.getL(A,k).length>2*ie)throw new Error("L of TLV too long: idx="+k);var Pe=he.getVblen(A,k);if(Pe>X)throw new Error("value of L too long than hex: idx="+k);var Ne=he.getTLV(A,k),Me=Ne.length-2-he.getL(A,k).length;if(Me!==2*Pe)throw new Error("V string length and L's value not the same:"+Me+"/"+2*Pe);if(0===k&&A.length!=Ne.length)throw new Error("total length and TLV length unmatch:"+A.length+"!="+Ne.length);var Ze=A.substr(k,2);if("02"===Ze){var Ue=he.getVidx(A,k);if("00"==A.substr(Ue,2)&&A.charCodeAt(Ue+2)<56)throw new Error("not least zeros for DER INTEGER")}if(32&parseInt(Ze,16)){for(var Ve=he.getVblen(A,k),We=0,nt=he.getChildIdx(A,k),d=0;d<nt.length;d++)We+=he.getTLV(A,nt[d]).length,he.checkStrictDER(A,nt[d],L,X,ie);if(2*Ve!=We)throw new Error("sum of children's TLV length and L unmatch: "+2*Ve+"!="+We)}},Qt.oidname=function(A){var k=De.asn1;De.lang.String.isHex(A)&&(A=k.ASN1Util.oidHexToInt(A));var L=k.x509.OID.oid2name(A);return""===L&&(L=A),L},void 0!==De&&De||(S.KJUR=De={}),void 0!==De.lang&&De.lang||(De.lang={}),De.lang.String=function(){},"function"==typeof q?(S.utf8tob64u=Zr=function(k){return Pn(q.from(k,"utf8").toString("base64"))},S.b64utoutf8=ar=function(k){return q.from(Gn(k),"base64").toString("utf8")}):(S.utf8tob64u=Zr=function(k){return Cn(jo(Di(k)))},S.b64utoutf8=ar=function(k){return decodeURIComponent(Vi(ln(k)))}),De.lang.String.isInteger=function(A){return!!A.match(/^[0-9]+$/)||!!A.match(/^-[0-9]+$/)},De.lang.String.isHex=function(A){return Ti(A)},De.lang.String.isBase64=function(A){return!(!(A=A.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||A.length%4!=0)},De.lang.String.isBase64URL=function(A){return!A.match(/[+/=]/)&&(A=Gn(A),De.lang.String.isBase64(A))},De.lang.String.isIntegerArray=function(A){return!!(A=A.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},De.lang.String.isPrintable=function(A){return null!==A.match(/^[0-9A-Za-z '()+,-./:=?]*$/)},De.lang.String.isIA5=function(A){return null!==A.match(/^[\x20-\x21\x23-\x7f]*$/)},De.lang.String.isMail=function(A){return null!==A.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)};var Qr=function(k,L,X){return null==X&&(X="0"),k.length>=L?k:new Array(L-k.length+1).join(X)+k};void 0!==De&&De||(S.KJUR=De={}),void 0!==De.crypto&&De.crypto||(De.crypto={}),De.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:z.algo.MD5,sha1:z.algo.SHA1,sha224:z.algo.SHA224,sha256:z.algo.SHA256,sha384:z.algo.SHA384,sha512:z.algo.SHA512,ripemd160:z.algo.RIPEMD160},this.getDigestInfoHex=function(A,k){if(void 0===this.DIGESTINFOHEAD[k])throw"alg not supported in Util.DIGESTINFOHEAD: "+k;return this.DIGESTINFOHEAD[k]+A},this.getPaddedDigestInfoHex=function(A,k,L){var X=this.getDigestInfoHex(A,k),ie=L/4;if(X.length+22>ie)throw"key is too short for SigAlg: keylen="+L+","+k;for(var Pe="00"+X,Ne="",Me=ie-4-Pe.length,Ze=0;Ze<Me;Ze+=2)Ne+="ff";return"0001"+Ne+Pe},this.hashString=function(A,k){return new De.crypto.MessageDigest({alg:k}).digestString(A)},this.hashHex=function(A,k){return new De.crypto.MessageDigest({alg:k}).digestHex(A)},this.sha1=function(A){return this.hashString(A,"sha1")},this.sha256=function(A){return this.hashString(A,"sha256")},this.sha256Hex=function(A){return this.hashHex(A,"sha256")},this.sha512=function(A){return this.hashString(A,"sha512")},this.sha512Hex=function(A){return this.hashHex(A,"sha512")},this.isKey=function(A){return A instanceof Gt||A instanceof De.crypto.DSA||A instanceof De.crypto.ECDSA}},De.crypto.Util.md5=function(A){return new De.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(A)},De.crypto.Util.ripemd160=function(A){return new De.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(A)},De.crypto.Util.SECURERANDOMGEN=new ot,De.crypto.Util.getRandomHexOfNbytes=function(A){var k=new Array(A);return De.crypto.Util.SECURERANDOMGEN.nextBytes(k),yt(k)},De.crypto.Util.getRandomBigIntegerOfNbytes=function(A){return new ge(De.crypto.Util.getRandomHexOfNbytes(A),16)},De.crypto.Util.getRandomHexOfNbits=function(A){var k=A%8,L=new Array((A-k)/8+1);return De.crypto.Util.SECURERANDOMGEN.nextBytes(L),L[0]=(255<<k&255^255)&L[0],yt(L)},De.crypto.Util.getRandomBigIntegerOfNbits=function(A){return new ge(De.crypto.Util.getRandomHexOfNbits(A),16)},De.crypto.Util.getRandomBigIntegerZeroToMax=function(A){for(var k=A.bitLength();;){var L=De.crypto.Util.getRandomBigIntegerOfNbits(k);if(-1!=A.compareTo(L))return L}},De.crypto.Util.getRandomBigIntegerMinToMax=function(A,k){var L=A.compareTo(k);if(1==L)throw"biMin is greater than biMax";if(0==L)return A;var X=k.subtract(A);return De.crypto.Util.getRandomBigIntegerZeroToMax(X).add(A)},De.crypto.MessageDigest=function(A){this.setAlgAndProvider=function(k,L){if(null!==(k=De.crypto.MessageDigest.getCanonicalAlgName(k))&&void 0===L&&(L=De.crypto.Util.DEFAULTPROVIDER[k]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(k)&&"cryptojs"==L){try{this.md=De.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[k].create()}catch(X){throw"setAlgAndProvider hash alg set fail alg="+k+"/"+X}this.updateString=function(X){this.md.update(X)},this.updateHex=function(X){var ie=z.enc.Hex.parse(X);this.md.update(ie)},this.digest=function(){return this.md.finalize().toString(z.enc.Hex)},this.digestString=function(X){return this.updateString(X),this.digest()},this.digestHex=function(X){return this.updateHex(X),this.digest()}}if(-1!=":sha256:".indexOf(k)&&"sjcl"==L){try{this.md=new sjcl.hash.sha256}catch(X){throw"setAlgAndProvider hash alg set fail alg="+k+"/"+X}this.updateString=function(X){this.md.update(X)},this.updateHex=function(X){var ie=sjcl.codec.hex.toBits(X);this.md.update(ie)},this.digest=function(){var X=this.md.finalize();return sjcl.codec.hex.fromBits(X)},this.digestString=function(X){return this.updateString(X),this.digest()},this.digestHex=function(X){return this.updateHex(X),this.digest()}}},this.updateString=function(k){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(k){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(k){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(k){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},void 0!==A&&void 0!==A.alg&&(this.algName=A.alg,void 0===A.prov&&(this.provName=De.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},De.crypto.MessageDigest.getCanonicalAlgName=function(A){return"string"==typeof A&&(A=(A=A.toLowerCase()).replace(/-/,"")),A},De.crypto.MessageDigest.getHashLength=function(A){var k=De.crypto.MessageDigest,L=k.getCanonicalAlgName(A);if(void 0===k.HASHLENGTH[L])throw"not supported algorithm: "+A;return k.HASHLENGTH[L]},De.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},De.crypto.Mac=function(A){this.setAlgAndProvider=function(k,L){if(null==(k=k.toLowerCase())&&(k="hmacsha1"),"hmac"!=(k=k.toLowerCase()).substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+k;void 0===L&&(L=De.crypto.Util.DEFAULTPROVIDER[k]),this.algProv=k+"/"+L;var X=k.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(X)&&"cryptojs"==L){try{this.mac=z.algo.HMAC.create(De.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[X],this.pass)}catch(he){throw"setAlgAndProvider hash alg set fail hashAlg="+X+"/"+he}this.updateString=function(he){this.mac.update(he)},this.updateHex=function(he){var Pe=z.enc.Hex.parse(he);this.mac.update(Pe)},this.doFinal=function(){return this.mac.finalize().toString(z.enc.Hex)},this.doFinalString=function(he){return this.updateString(he),this.doFinal()},this.doFinalHex=function(he){return this.updateHex(he),this.doFinal()}}},this.updateString=function(k){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(k){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(k){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(k){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(k){if("string"==typeof k){var L=k;return k.length%2!=1&&k.match(/^[0-9A-Fa-f]+$/)||(L=Ar(k)),void(this.pass=z.enc.Hex.parse(L))}if("object"!=(void 0===k?"undefined":Z(k)))throw"KJUR.crypto.Mac unsupported password type: "+k;if(L=null,void 0!==k.hex){if(k.hex.length%2!=0||!k.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+k.hex;L=k.hex}if(void 0!==k.utf8&&(L=Fr(k.utf8)),void 0!==k.rstr&&(L=Ar(k.rstr)),void 0!==k.b64&&(L=ve(k.b64)),void 0!==k.b64u&&(L=ln(k.b64u)),null==L)throw"KJUR.crypto.Mac unsupported password type: "+k;this.pass=z.enc.Hex.parse(L)},void 0!==A&&(void 0!==A.pass&&this.setPassword(A.pass),void 0!==A.alg&&(this.algName=A.alg,void 0===A.prov&&(this.provName=De.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},De.crypto.Signature=function(A){var k=null;if(this._setAlgNames=function(){var L=this.algName.match(/^(.+)with(.+)$/);L&&(this.mdAlgName=L[1].toLowerCase(),this.pubkeyAlgName=L[2].toLowerCase(),"rsaandmgf1"==this.pubkeyAlgName&&"sha"==this.mdAlgName&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(L,X){for(var ie="",he=X/4-L.length,Pe=0;Pe<he;Pe++)ie+="0";return ie+L},this.setAlgAndProvider=function(L,X){if(this._setAlgNames(),"cryptojs/jsrsa"!=X)throw new Error("provider not supported: "+X);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)){try{this.md=new De.crypto.MessageDigest({alg:this.mdAlgName})}catch(ie){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+ie)}this.init=function(ie,he){var Pe=null;try{Pe=void 0===he?hr.getKey(ie):hr.getKey(ie,he)}catch(Ne){throw"init failed:"+Ne}if(!0===Pe.isPrivate)this.prvKey=Pe,this.state="SIGN";else{if(!0!==Pe.isPublic)throw"init failed.:"+Pe;this.pubKey=Pe,this.state="VERIFY"}},this.updateString=function(ie){this.md.updateString(ie)},this.updateHex=function(ie){this.md.updateHex(ie)},this.sign=function(){if(this.sHashHex=this.md.digest(),void 0===this.prvKey&&void 0!==this.ecprvhex&&void 0!==this.eccurvename&&void 0!==De.crypto.ECDSA&&(this.prvKey=new De.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof Gt&&"rsaandmgf1"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof Gt&&"rsa"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof De.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof De.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(ie){return this.updateString(ie),this.sign()},this.signHex=function(ie){return this.updateHex(ie),this.sign()},this.verify=function(ie){if(this.sHashHex=this.md.digest(),void 0===this.pubKey&&void 0!==this.ecpubhex&&void 0!==this.eccurvename&&void 0!==De.crypto.ECDSA&&(this.pubKey=new De.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof Gt&&"rsaandmgf1"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,ie,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof Gt&&"rsa"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHash(this.sHashHex,ie);if(void 0!==De.crypto.ECDSA&&this.pubKey instanceof De.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,ie);if(void 0!==De.crypto.DSA&&this.pubKey instanceof De.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,ie);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(L,X){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(L){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(L){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(L){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(L){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(L){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=A,void 0!==A&&(void 0!==A.alg&&(this.algName=A.alg,this.provName=void 0===A.prov?De.crypto.Util.DEFAULTPROVIDER[this.algName]:A.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),void 0!==A.psssaltlen&&(this.pssSaltLen=A.psssaltlen),void 0!==A.prvkeypem)){if(void 0!==A.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{k=hr.getKey(A.prvkeypem),this.init(k)}catch(L){throw"fatal error to load pem private key: "+L}}},De.crypto.Cipher=function(A){},De.crypto.Cipher.encrypt=function(A,k,L){if(k instanceof Gt&&k.isPublic){var X=De.crypto.Cipher.getAlgByKeyAndName(k,L);if("RSA"===X)return k.encrypt(A);if("RSAOAEP"===X)return k.encryptOAEP(A,"sha1");var ie=X.match(/^RSAOAEP(\d+)$/);if(null!==ie)return k.encryptOAEP(A,"sha"+ie[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+L}throw"Cipher.encrypt: unsupported key or algorithm"},De.crypto.Cipher.decrypt=function(A,k,L){if(k instanceof Gt&&k.isPrivate){var X=De.crypto.Cipher.getAlgByKeyAndName(k,L);if("RSA"===X)return k.decrypt(A);if("RSAOAEP"===X)return k.decryptOAEP(A,"sha1");var ie=X.match(/^RSAOAEP(\d+)$/);if(null!==ie)return k.decryptOAEP(A,"sha"+ie[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+L}throw"Cipher.decrypt: unsupported key or algorithm"},De.crypto.Cipher.getAlgByKeyAndName=function(A,k){if(A instanceof Gt){if(-1!=":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(k))return k;if(null==k)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+k}throw"getAlgByKeyAndName: not supported algorithm name: "+k},De.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},void 0!==De&&De||(S.KJUR=De={}),void 0!==De.crypto&&De.crypto||(De.crypto={}),De.crypto.ECDSA=function(A){var k=Error,L=ge,X=Xt,ie=De.crypto.ECDSA,he=De.crypto.ECParameterDB,Pe=ie.getName,Me=Qt.getVbyListEx,Ze=Qt.isASN1HEX,Ue=new ot;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(Ve){return new L(Ve.bitLength(),Ue).mod(Ve.subtract(L.ONE)).add(L.ONE)},this.setNamedCurve=function(Ve){this.ecparams=he.getByName(Ve),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=Ve},this.setPrivateKeyHex=function(Ve){this.isPrivate=!0,this.prvKeyHex=Ve},this.setPublicKeyHex=function(Ve){this.isPublic=!0,this.pubKeyHex=Ve},this.getPublicKeyXYHex=function(){var Ve=this.pubKeyHex;if("04"!==Ve.substr(0,2))throw"this method supports uncompressed format(04) only";var We=this.ecparams.keylen/4;if(Ve.length!==2+2*We)throw"malformed public key hex length";var nt={};return nt.x=Ve.substr(2,We),nt.y=Ve.substr(2+We),nt},this.getShortNISTPCurveName=function(){var Ve=this.curveName;return"secp256r1"===Ve||"NIST P-256"===Ve||"P-256"===Ve||"prime256v1"===Ve?"P-256":"secp384r1"===Ve||"NIST P-384"===Ve||"P-384"===Ve?"P-384":null},this.generateKeyPairHex=function(){var We=this.getBigRandom(this.ecparams.n),nt=this.ecparams.G.multiply(We),d=nt.getX().toBigInteger(),gt=nt.getY().toBigInteger(),Et=this.ecparams.keylen/4,Ee=("0000000000"+We.toString(16)).slice(-Et),Ge="04"+("0000000000"+d.toString(16)).slice(-Et)+("0000000000"+gt.toString(16)).slice(-Et);return this.setPrivateKeyHex(Ee),this.setPublicKeyHex(Ge),{ecprvhex:Ee,ecpubhex:Ge}},this.signWithMessageHash=function(Ve){return this.signHex(Ve,this.prvKeyHex)},this.signHex=function(Ve,We){var nt=new L(We,16),d=this.ecparams.n,gt=new L(Ve.substring(0,this.ecparams.keylen/4),16);do{var Et=this.getBigRandom(d),Ee=this.ecparams.G.multiply(Et).getX().toBigInteger().mod(d)}while(Ee.compareTo(L.ZERO)<=0);var Ge=Et.modInverse(d).multiply(gt.add(nt.multiply(Ee))).mod(d);return ie.biRSSigToASN1Sig(Ee,Ge)},this.sign=function(Ve,We){var nt=We,d=this.ecparams.n,gt=L.fromByteArrayUnsigned(Ve);do{var Et=this.getBigRandom(d),Ee=this.ecparams.G.multiply(Et).getX().toBigInteger().mod(d)}while(Ee.compareTo(ge.ZERO)<=0);var Ge=Et.modInverse(d).multiply(gt.add(nt.multiply(Ee))).mod(d);return this.serializeSig(Ee,Ge)},this.verifyWithMessageHash=function(Ve,We){return this.verifyHex(Ve,We,this.pubKeyHex)},this.verifyHex=function(Ve,We,nt){try{var d,gt,Et=ie.parseSigHex(We);d=Et.r,gt=Et.s;var Ee=X.decodeFromHex(this.ecparams.curve,nt),Ge=new L(Ve.substring(0,this.ecparams.keylen/4),16);return this.verifyRaw(Ge,d,gt,Ee)}catch{return!1}},this.verify=function(Ve,We,nt){var d,gt,Et;if(Bitcoin.Util.isArray(We)){var Ee=this.parseSig(We);d=Ee.r,gt=Ee.s}else{if("object"!==(void 0===We?"undefined":Z(We))||!We.r||!We.s)throw"Invalid value for signature";d=We.r,gt=We.s}if(nt instanceof Xt)Et=nt;else{if(!Bitcoin.Util.isArray(nt))throw"Invalid format for pubkey value, must be byte array or ECPointFp";Et=X.decodeFrom(this.ecparams.curve,nt)}var Ge=L.fromByteArrayUnsigned(Ve);return this.verifyRaw(Ge,d,gt,Et)},this.verifyRaw=function(Ve,We,nt,d){var gt=this.ecparams.n,Et=this.ecparams.G;if(We.compareTo(L.ONE)<0||We.compareTo(gt)>=0||nt.compareTo(L.ONE)<0||nt.compareTo(gt)>=0)return!1;var Ee=nt.modInverse(gt),Ge=Ve.multiply(Ee).mod(gt),Ke=We.multiply(Ee).mod(gt);return Et.multiply(Ge).add(d.multiply(Ke)).getX().toBigInteger().mod(gt).equals(We)},this.serializeSig=function(Ve,We){var nt=Ve.toByteArraySigned(),d=We.toByteArraySigned(),gt=[];return gt.push(2),gt.push(nt.length),(gt=gt.concat(nt)).push(2),gt.push(d.length),(gt=gt.concat(d)).unshift(gt.length),gt.unshift(48),gt},this.parseSig=function(Ve){var We;if(48!=Ve[0])throw new Error("Signature not a valid DERSequence");if(2!=Ve[We=2])throw new Error("First element in signature must be a DERInteger");var nt=Ve.slice(We+2,We+2+Ve[We+1]);if(2!=Ve[We+=2+Ve[We+1]])throw new Error("Second element in signature must be a DERInteger");var d=Ve.slice(We+2,We+2+Ve[We+1]);return We+=2+Ve[We+1],{r:L.fromByteArrayUnsigned(nt),s:L.fromByteArrayUnsigned(d)}},this.parseSigCompact=function(Ve){if(65!==Ve.length)throw"Signature has the wrong length";var We=Ve[0]-27;if(We<0||We>7)throw"Invalid signature type";var nt=this.ecparams.n;return{r:L.fromByteArrayUnsigned(Ve.slice(1,33)).mod(nt),s:L.fromByteArrayUnsigned(Ve.slice(33,65)).mod(nt),i:We}},this.readPKCS5PrvKeyHex=function(Ve){if(!1===Ze(Ve))throw new Error("not ASN.1 hex string");var We,nt,d;try{We=Me(Ve,0,["[0]",0],"06"),nt=Me(Ve,0,[1],"04");try{d=Me(Ve,0,["[1]",0],"03")}catch{}}catch{throw new Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=Pe(We),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(d),this.setPrivateKeyHex(nt),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(Ve){if(!1===Ze(Ve))throw new k("not ASN.1 hex string");var We,nt,d;try{Me(Ve,0,[1,0],"06"),We=Me(Ve,0,[1,1],"06"),nt=Me(Ve,0,[2,0,1],"04");try{d=Me(Ve,0,[2,0,"[1]",0],"03")}catch{}}catch{throw new k("malformed PKCS#8 plain ECC private key")}if(this.curveName=Pe(We),void 0===this.curveName)throw new k("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(d),this.setPrivateKeyHex(nt),this.isPublic=!1},this.readPKCS8PubKeyHex=function(Ve){if(!1===Ze(Ve))throw new k("not ASN.1 hex string");var We,nt;try{Me(Ve,0,[0,0],"06"),We=Me(Ve,0,[0,1],"06"),nt=Me(Ve,0,[1],"03")}catch{throw new k("malformed PKCS#8 ECC public key")}if(this.curveName=Pe(We),null===this.curveName)throw new k("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(nt)},this.readCertPubKeyHex=function(Ve,We){if(!1===Ze(Ve))throw new k("not ASN.1 hex string");var nt,d;try{nt=Me(Ve,0,[0,5,0,1],"06"),d=Me(Ve,0,[0,5,1],"03")}catch{throw new k("malformed X.509 certificate ECC public key")}if(this.curveName=Pe(nt),null===this.curveName)throw new k("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(d)},void 0!==A&&void 0!==A.curve&&(this.curveName=A.curve),void 0===this.curveName&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),void 0!==A&&(void 0!==A.prv&&this.setPrivateKeyHex(A.prv),void 0!==A.pub&&this.setPublicKeyHex(A.pub))},De.crypto.ECDSA.parseSigHex=function(A){var k=De.crypto.ECDSA.parseSigHexInHexRS(A);return{r:new ge(k.r,16),s:new ge(k.s,16)}},De.crypto.ECDSA.parseSigHexInHexRS=function(A){var L=Qt.getChildIdx,X=Qt.getV;if(Qt.checkStrictDER(A,0),"30"!=A.substr(0,2))throw new Error("signature is not a ASN.1 sequence");var ie=L(A,0);if(2!=ie.length)throw new Error("signature shall have two elements");var he=ie[0],Pe=ie[1];if("02"!=A.substr(he,2))throw new Error("1st item not ASN.1 integer");if("02"!=A.substr(Pe,2))throw new Error("2nd item not ASN.1 integer");return{r:X(A,he),s:X(A,Pe)}},De.crypto.ECDSA.asn1SigToConcatSig=function(A){var k=De.crypto.ECDSA.parseSigHexInHexRS(A),L=k.r,X=k.s;if("00"==L.substr(0,2)&&L.length%32==2&&(L=L.substr(2)),"00"==X.substr(0,2)&&X.length%32==2&&(X=X.substr(2)),L.length%32==30&&(L="00"+L),X.length%32==30&&(X="00"+X),L.length%32!=0)throw"unknown ECDSA sig r length error";if(X.length%32!=0)throw"unknown ECDSA sig s length error";return L+X},De.crypto.ECDSA.concatSigToASN1Sig=function(A){if(A.length/2*8%128!=0)throw"unknown ECDSA concatinated r-s sig  length error";var k=A.substr(0,A.length/2),L=A.substr(A.length/2);return De.crypto.ECDSA.hexRSSigToASN1Sig(k,L)},De.crypto.ECDSA.hexRSSigToASN1Sig=function(A,k){var L=new ge(A,16),X=new ge(k,16);return De.crypto.ECDSA.biRSSigToASN1Sig(L,X)},De.crypto.ECDSA.biRSSigToASN1Sig=function(A,k){var L=De.asn1,X=new L.DERInteger({bigint:A}),ie=new L.DERInteger({bigint:k});return new L.DERSequence({array:[X,ie]}).getEncodedHex()},De.crypto.ECDSA.getName=function(A){return"2b8104001f"===A?"secp192k1":"2a8648ce3d030107"===A?"secp256r1":"2b8104000a"===A?"secp256k1":"2b81040021"===A?"secp224r1":"2b81040022"===A?"secp384r1":-1!=="|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(A)?"secp256r1":-1!=="|secp256k1|".indexOf(A)?"secp256k1":-1!=="|secp224r1|NIST P-224|P-224|".indexOf(A)?"secp224r1":-1!=="|secp384r1|NIST P-384|P-384|".indexOf(A)?"secp384r1":null},void 0!==De&&De||(S.KJUR=De={}),void 0!==De.crypto&&De.crypto||(De.crypto={}),De.crypto.ECParameterDB=new function(){var A={},k={};function L(X){return new ge(X,16)}this.getByName=function(X){var ie=X;if(void 0!==k[ie]&&(ie=k[X]),void 0!==A[ie])return A[ie];throw"unregistered EC curve name: "+ie},this.regist=function(X,ie,he,Pe,Ne,Me,Ze,Ue,Ve,We,nt,d){A[X]={};var gt=L(he),Et=L(Pe),Ee=L(Ne),Ge=L(Me),Ke=L(Ze),Xe=new Kn(gt,Et,Ee),_t=Xe.decodePointHex("04"+Ue+Ve);A[X].name=X,A[X].keylen=ie,A[X].curve=Xe,A[X].G=_t,A[X].n=Ge,A[X].h=Ke,A[X].oid=nt,A[X].info=d;for(var kt=0;kt<We.length;kt++)k[We[kt]]=X}},De.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),De.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),De.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),De.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),De.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),De.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),De.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),De.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),De.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),De.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]);var hr=function(){var A=function(Ze,Ue,Ve){return k(z.AES,Ze,Ue,Ve)},k=function(Ze,Ue,Ve,We){var nt=z.enc.Hex.parse(Ue),d=z.enc.Hex.parse(Ve),gt=z.enc.Hex.parse(We),Et={};Et.key=d,Et.iv=gt,Et.ciphertext=nt;var Ee=Ze.decrypt(Et,d,{iv:gt});return z.enc.Hex.stringify(Ee)},L=function(Ze,Ue,Ve){return X(z.AES,Ze,Ue,Ve)},X=function(Ze,Ue,Ve,We){var nt=z.enc.Hex.parse(Ue),d=z.enc.Hex.parse(Ve),gt=z.enc.Hex.parse(We),Et=Ze.encrypt(nt,d,{iv:gt}),Ee=z.enc.Hex.parse(Et.toString());return z.enc.Base64.stringify(Ee)},ie={"AES-256-CBC":{proc:A,eproc:L,keylen:32,ivlen:16},"AES-192-CBC":{proc:A,eproc:L,keylen:24,ivlen:16},"AES-128-CBC":{proc:A,eproc:L,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(Ze,Ue,Ve){return k(z.TripleDES,Ze,Ue,Ve)},eproc:function(Ze,Ue,Ve){return X(z.TripleDES,Ze,Ue,Ve)},keylen:24,ivlen:8},"DES-CBC":{proc:function(Ze,Ue,Ve){return k(z.DES,Ze,Ue,Ve)},eproc:function(Ze,Ue,Ve){return X(z.DES,Ze,Ue,Ve)},keylen:8,ivlen:8}},he=function(Ze){var Ue={},Ve=Ze.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));Ve&&(Ue.cipher=Ve[1],Ue.ivsalt=Ve[2]);var We=Ze.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));We&&(Ue.type=We[1]);var nt=-1,d=0;-1!=Ze.indexOf("\r\n\r\n")&&(nt=Ze.indexOf("\r\n\r\n"),d=2),-1!=Ze.indexOf("\n\n")&&(nt=Ze.indexOf("\n\n"),d=1);var gt=Ze.indexOf("-----END");if(-1!=nt&&-1!=gt){var Et=Ze.substring(nt+2*d,gt-d);Et=Et.replace(/\s+/g,""),Ue.data=Et}return Ue},Pe=function(Ze,Ue,Ve){for(var We=Ve.substring(0,16),nt=z.enc.Hex.parse(We),d=z.enc.Utf8.parse(Ue),gt=ie[Ze].keylen+ie[Ze].ivlen,Et="",Ee=null;;){var Ge=z.algo.MD5.create();if(null!=Ee&&Ge.update(Ee),Ge.update(d),Ge.update(nt),Ee=Ge.finalize(),(Et+=z.enc.Hex.stringify(Ee)).length>=2*gt)break}var Ke={};return Ke.keyhex=Et.substr(0,2*ie[Ze].keylen),Ke.ivhex=Et.substr(2*ie[Ze].keylen,2*ie[Ze].ivlen),Ke},Ne=function(Ze,Ue,Ve,We){var nt=z.enc.Base64.parse(Ze),d=z.enc.Hex.stringify(nt);return(0,ie[Ue].proc)(d,Ve,We)};return{version:"1.0.0",parsePKCS5PEM:function(Ze){return he(Ze)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(Ze,Ue,Ve){return Pe(Ze,Ue,Ve)},decryptKeyB64:function(Ze,Ue,Ve,We){return Ne(Ze,Ue,Ve,We)},getDecryptedKeyHex:function(Ze,Ue){var Ve=he(Ze),We=Ve.cipher,nt=Ve.ivsalt,d=Ve.data,gt=Pe(We,Ue,nt).keyhex;return Ne(d,We,gt,nt)},getEncryptedPKCS5PEMFromPrvKeyHex:function(Ze,Ue,Ve,We,nt){var Ee,Ge,d="";if(void 0!==We&&null!=We||(We="AES-256-CBC"),void 0===ie[We])throw"KEYUTIL unsupported algorithm: "+We;void 0!==nt&&null!=nt||(nt=(Ee=ie[We].ivlen,Ge=z.lib.WordArray.random(Ee),z.enc.Hex.stringify(Ge)).toUpperCase());var gt=function(Ee,Ge,Ke,Xe){return(0,ie[Ge].eproc)(Ee,Ke,Xe)}(Ue,We,Pe(We,Ve,nt).keyhex,nt);return d="-----BEGIN "+Ze+" PRIVATE KEY-----\r\n",d+="Proc-Type: 4,ENCRYPTED\r\n",d+="DEK-Info: "+We+","+nt+"\r\n",d+="\r\n",(d+=gt.replace(/(.{64})/g,"$1\r\n"))+"\r\n-----END "+Ze+" PRIVATE KEY-----\r\n"},parseHexOfEncryptedPKCS8:function(Ze){var Ve=Qt.getChildIdx,We=Qt.getV,nt={},d=Ve(Ze,0);if(2!=d.length)throw"malformed format: SEQUENCE(0).items != 2: "+d.length;nt.ciphertext=We(Ze,d[1]);var gt=Ve(Ze,d[0]);if(2!=gt.length)throw"malformed format: SEQUENCE(0.0).items != 2: "+gt.length;if("2a864886f70d01050d"!=We(Ze,gt[0]))throw"this only supports pkcs5PBES2";var Et=Ve(Ze,gt[1]);if(2!=gt.length)throw"malformed format: SEQUENCE(0.0.1).items != 2: "+Et.length;var Ee=Ve(Ze,Et[1]);if(2!=Ee.length)throw"malformed format: SEQUENCE(0.0.1.1).items != 2: "+Ee.length;if("2a864886f70d0307"!=We(Ze,Ee[0]))throw"this only supports TripleDES";nt.encryptionSchemeAlg="TripleDES",nt.encryptionSchemeIV=We(Ze,Ee[1]);var Ge=Ve(Ze,Et[0]);if(2!=Ge.length)throw"malformed format: SEQUENCE(0.0.1.0).items != 2: "+Ge.length;if("2a864886f70d01050c"!=We(Ze,Ge[0]))throw"this only supports pkcs5PBKDF2";var Ke=Ve(Ze,Ge[1]);if(Ke.length<2)throw"malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+Ke.length;nt.pbkdf2Salt=We(Ze,Ke[0]);var Xe=We(Ze,Ke[1]);try{nt.pbkdf2Iter=parseInt(Xe,16)}catch{throw"malformed format pbkdf2Iter: "+Xe}return nt},getPBKDF2KeyHexFromParam:function(Ze,Ue){var Ve=z.enc.Hex.parse(Ze.pbkdf2Salt),nt=z.PBKDF2(Ue,Ve,{keySize:6,iterations:Ze.pbkdf2Iter});return z.enc.Hex.stringify(nt)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(Ze,Ue){var Ve=di(Ze,"ENCRYPTED PRIVATE KEY"),We=this.parseHexOfEncryptedPKCS8(Ve),nt=hr.getPBKDF2KeyHexFromParam(We,Ue),d={};d.ciphertext=z.enc.Hex.parse(We.ciphertext);var gt=z.enc.Hex.parse(nt),Et=z.enc.Hex.parse(We.encryptionSchemeIV),Ee=z.TripleDES.decrypt(d,gt,{iv:Et});return z.enc.Hex.stringify(Ee)},getKeyFromEncryptedPKCS8PEM:function(Ze,Ue){var Ve=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(Ze,Ue);return this.getKeyFromPlainPrivatePKCS8Hex(Ve)},parsePlainPrivatePKCS8Hex:function(Ze){var Ue=Qt,Ve=Ue.getChildIdx,We=Ue.getV,nt={algparam:null};if("30"!=Ze.substr(0,2))throw"malformed plain PKCS8 private key(code:001)";var d=Ve(Ze,0);if(3!=d.length)throw"malformed plain PKCS8 private key(code:002)";if("30"!=Ze.substr(d[1],2))throw"malformed PKCS8 private key(code:003)";var gt=Ve(Ze,d[1]);if(2!=gt.length)throw"malformed PKCS8 private key(code:004)";if("06"!=Ze.substr(gt[0],2))throw"malformed PKCS8 private key(code:005)";if(nt.algoid=We(Ze,gt[0]),"06"==Ze.substr(gt[1],2)&&(nt.algparam=We(Ze,gt[1])),"04"!=Ze.substr(d[2],2))throw"malformed PKCS8 private key(code:006)";return nt.keyidx=Ue.getVidx(Ze,d[2]),nt},getKeyFromPlainPrivatePKCS8PEM:function(Ze){var Ue=di(Ze,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(Ue)},getKeyFromPlainPrivatePKCS8Hex:function(Ze){var Ue,Ve=this.parsePlainPrivatePKCS8Hex(Ze);if("2a864886f70d010101"==Ve.algoid)Ue=new Gt;else if("2a8648ce380401"==Ve.algoid)Ue=new De.crypto.DSA;else{if("2a8648ce3d0201"!=Ve.algoid)throw"unsupported private key algorithm";Ue=new De.crypto.ECDSA}return Ue.readPKCS8PrvKeyHex(Ze),Ue},_getKeyFromPublicPKCS8Hex:function(Ze){var Ue,Ve=Qt.getVbyList(Ze,0,[0,0],"06");if("2a864886f70d010101"===Ve)Ue=new Gt;else if("2a8648ce380401"===Ve)Ue=new De.crypto.DSA;else{if("2a8648ce3d0201"!==Ve)throw"unsupported PKCS#8 public key hex";Ue=new De.crypto.ECDSA}return Ue.readPKCS8PubKeyHex(Ze),Ue},parsePublicRawRSAKeyHex:function(Ze){var Ve=Qt.getChildIdx,We=Qt.getV,nt={};if("30"!=Ze.substr(0,2))throw"malformed RSA key(code:001)";var d=Ve(Ze,0);if(2!=d.length)throw"malformed RSA key(code:002)";if("02"!=Ze.substr(d[0],2))throw"malformed RSA key(code:003)";if(nt.n=We(Ze,d[0]),"02"!=Ze.substr(d[1],2))throw"malformed RSA key(code:004)";return nt.e=We(Ze,d[1]),nt},parsePublicPKCS8Hex:function(Ze){var Ue=Qt,Ve=Ue.getChildIdx,We=Ue.getV,nt={algparam:null},d=Ve(Ze,0);if(2!=d.length)throw"outer DERSequence shall have 2 elements: "+d.length;var gt=d[0];if("30"!=Ze.substr(gt,2))throw"malformed PKCS8 public key(code:001)";var Et=Ve(Ze,gt);if(2!=Et.length)throw"malformed PKCS8 public key(code:002)";if("06"!=Ze.substr(Et[0],2))throw"malformed PKCS8 public key(code:003)";if(nt.algoid=We(Ze,Et[0]),"06"==Ze.substr(Et[1],2)?nt.algparam=We(Ze,Et[1]):"30"==Ze.substr(Et[1],2)&&(nt.algparam={},nt.algparam.p=Ue.getVbyList(Ze,Et[1],[0],"02"),nt.algparam.q=Ue.getVbyList(Ze,Et[1],[1],"02"),nt.algparam.g=Ue.getVbyList(Ze,Et[1],[2],"02")),"03"!=Ze.substr(d[1],2))throw"malformed PKCS8 public key(code:004)";return nt.key=We(Ze,d[1]).substr(2),nt}}}();hr.getKey=function(A,k,L){var vr,X=(Et=Qt).getChildIdx,ie=Et.getVbyList,he=De.crypto,Pe=he.ECDSA,Ne=he.DSA,Me=Gt,Ze=di,Ue=hr;if(void 0!==Me&&A instanceof Me||void 0!==Pe&&A instanceof Pe||void 0!==Ne&&A instanceof Ne)return A;if(void 0!==A.curve&&void 0!==A.xy&&void 0===A.d)return new Pe({pub:A.xy,curve:A.curve});if(void 0!==A.curve&&void 0!==A.d)return new Pe({prv:A.d,curve:A.curve});if(void 0===A.kty&&void 0!==A.n&&void 0!==A.e&&void 0===A.d)return(gn=new Me).setPublic(A.n,A.e),gn;if(void 0===A.kty&&void 0!==A.n&&void 0!==A.e&&void 0!==A.d&&void 0!==A.p&&void 0!==A.q&&void 0!==A.dp&&void 0!==A.dq&&void 0!==A.co&&void 0===A.qi)return(gn=new Me).setPrivateEx(A.n,A.e,A.d,A.p,A.q,A.dp,A.dq,A.co),gn;if(void 0===A.kty&&void 0!==A.n&&void 0!==A.e&&void 0!==A.d&&void 0===A.p)return(gn=new Me).setPrivate(A.n,A.e,A.d),gn;if(void 0!==A.p&&void 0!==A.q&&void 0!==A.g&&void 0!==A.y&&void 0===A.x)return(gn=new Ne).setPublic(A.p,A.q,A.g,A.y),gn;if(void 0!==A.p&&void 0!==A.q&&void 0!==A.g&&void 0!==A.y&&void 0!==A.x)return(gn=new Ne).setPrivate(A.p,A.q,A.g,A.y,A.x),gn;if("RSA"===A.kty&&void 0!==A.n&&void 0!==A.e&&void 0===A.d)return(gn=new Me).setPublic(ln(A.n),ln(A.e)),gn;if("RSA"===A.kty&&void 0!==A.n&&void 0!==A.e&&void 0!==A.d&&void 0!==A.p&&void 0!==A.q&&void 0!==A.dp&&void 0!==A.dq&&void 0!==A.qi)return(gn=new Me).setPrivateEx(ln(A.n),ln(A.e),ln(A.d),ln(A.p),ln(A.q),ln(A.dp),ln(A.dq),ln(A.qi)),gn;if("RSA"===A.kty&&void 0!==A.n&&void 0!==A.e&&void 0!==A.d)return(gn=new Me).setPrivate(ln(A.n),ln(A.e),ln(A.d)),gn;if("EC"===A.kty&&void 0!==A.crv&&void 0!==A.x&&void 0!==A.y&&void 0===A.d){var Ve=(en=new Pe({curve:A.crv})).ecparams.keylen/4,We="04"+("0000000000"+ln(A.x)).slice(-Ve)+("0000000000"+ln(A.y)).slice(-Ve);return en.setPublicKeyHex(We),en}if("EC"===A.kty&&void 0!==A.crv&&void 0!==A.x&&void 0!==A.y&&void 0!==A.d){Ve=(en=new Pe({curve:A.crv})).ecparams.keylen/4,We="04"+("0000000000"+ln(A.x)).slice(-Ve)+("0000000000"+ln(A.y)).slice(-Ve);var nt=("0000000000"+ln(A.d)).slice(-Ve);return en.setPublicKeyHex(We),en.setPrivateKeyHex(nt),en}if("pkcs5prv"===L){var d,gt=A,Et=Qt;if(9===(d=X(gt,0)).length)(gn=new Me).readPKCS5PrvKeyHex(gt);else if(6===d.length)(gn=new Ne).readPKCS5PrvKeyHex(gt);else{if(!(d.length>2&&"04"===gt.substr(d[1],2)))throw"unsupported PKCS#1/5 hexadecimal key";(gn=new Pe).readPKCS5PrvKeyHex(gt)}return gn}if("pkcs8prv"===L)return Ue.getKeyFromPlainPrivatePKCS8Hex(A);if("pkcs8pub"===L)return Ue._getKeyFromPublicPKCS8Hex(A);if("x509pub"===L)return mr.getPublicKeyFromCertHex(A);if(-1!=A.indexOf("-END CERTIFICATE-",0)||-1!=A.indexOf("-END X509 CERTIFICATE-",0)||-1!=A.indexOf("-END TRUSTED CERTIFICATE-",0))return mr.getPublicKeyFromCertPEM(A);if(-1!=A.indexOf("-END PUBLIC KEY-")){var Ee=di(A,"PUBLIC KEY");return Ue._getKeyFromPublicPKCS8Hex(Ee)}if(-1!=A.indexOf("-END RSA PRIVATE KEY-")&&-1==A.indexOf("4,ENCRYPTED")){var Ge=Ze(A,"RSA PRIVATE KEY");return Ue.getKey(Ge,null,"pkcs5prv")}if(-1!=A.indexOf("-END DSA PRIVATE KEY-")&&-1==A.indexOf("4,ENCRYPTED")){var Ke=ie(vr=Ze(A,"DSA PRIVATE KEY"),0,[1],"02"),Xe=ie(vr,0,[2],"02"),_t=ie(vr,0,[3],"02"),kt=ie(vr,0,[4],"02"),Wt=ie(vr,0,[5],"02");return(gn=new Ne).setPrivate(new ge(Ke,16),new ge(Xe,16),new ge(_t,16),new ge(kt,16),new ge(Wt,16)),gn}if(-1!=A.indexOf("-END EC PRIVATE KEY-")&&-1==A.indexOf("4,ENCRYPTED"))return Ge=Ze(A,"EC PRIVATE KEY"),Ue.getKey(Ge,null,"pkcs5prv");if(-1!=A.indexOf("-END PRIVATE KEY-"))return Ue.getKeyFromPlainPrivatePKCS8PEM(A);if(-1!=A.indexOf("-END RSA PRIVATE KEY-")&&-1!=A.indexOf("4,ENCRYPTED")){var $t=Ue.getDecryptedKeyHex(A,k),Zn=new Gt;return Zn.readPKCS5PrvKeyHex($t),Zn}if(-1!=A.indexOf("-END EC PRIVATE KEY-")&&-1!=A.indexOf("4,ENCRYPTED")){var en,gn=ie(vr=Ue.getDecryptedKeyHex(A,k),0,[1],"04"),sr=ie(vr,0,[2,0],"06"),gr=ie(vr,0,[3,0],"03").substr(2);if(void 0===De.crypto.OID.oidhex2name[sr])throw"undefined OID(hex) in KJUR.crypto.OID: "+sr;return(en=new Pe({curve:De.crypto.OID.oidhex2name[sr]})).setPublicKeyHex(gr),en.setPrivateKeyHex(gn),en.isPublic=!1,en}if(-1!=A.indexOf("-END DSA PRIVATE KEY-")&&-1!=A.indexOf("4,ENCRYPTED"))return Ke=ie(vr=Ue.getDecryptedKeyHex(A,k),0,[1],"02"),Xe=ie(vr,0,[2],"02"),_t=ie(vr,0,[3],"02"),kt=ie(vr,0,[4],"02"),Wt=ie(vr,0,[5],"02"),(gn=new Ne).setPrivate(new ge(Ke,16),new ge(Xe,16),new ge(_t,16),new ge(kt,16),new ge(Wt,16)),gn;if(-1!=A.indexOf("-END ENCRYPTED PRIVATE KEY-"))return Ue.getKeyFromEncryptedPKCS8PEM(A,k);throw new Error("not supported argument")},hr.generateKeypair=function(A,k){if("RSA"==A){var L=k;(Pe=new Gt).generate(L,"10001"),Pe.isPrivate=!0,Pe.isPublic=!0;var X=new Gt,ie=Pe.n.toString(16),he=Pe.e.toString(16);return X.setPublic(ie,he),X.isPrivate=!1,X.isPublic=!0,(Ne={}).prvKeyObj=Pe,Ne.pubKeyObj=X,Ne}if("EC"==A){var Pe,Ne,Me=k,Ze=new De.crypto.ECDSA({curve:Me}).generateKeyPairHex();return(Pe=new De.crypto.ECDSA({curve:Me})).setPublicKeyHex(Ze.ecpubhex),Pe.setPrivateKeyHex(Ze.ecprvhex),Pe.isPrivate=!0,Pe.isPublic=!1,(X=new De.crypto.ECDSA({curve:Me})).setPublicKeyHex(Ze.ecpubhex),X.isPrivate=!1,X.isPublic=!0,(Ne={}).prvKeyObj=Pe,Ne.pubKeyObj=X,Ne}throw"unknown algorithm: "+A},hr.getPEM=function(A,k,L,X,ie,he){var Ne=De.asn1,Me=Ne.DERObjectIdentifier,Ze=Ne.DERInteger,Ue=Ne.ASN1Util.newObject,We=De.crypto,nt=We.DSA,d=We.ECDSA,gt=Gt;function Et(en){return Ue({seq:[{int:0},{int:{bigint:en.n}},{int:en.e},{int:{bigint:en.d}},{int:{bigint:en.p}},{int:{bigint:en.q}},{int:{bigint:en.dmp1}},{int:{bigint:en.dmq1}},{int:{bigint:en.coeff}}]})}function Ee(en){return Ue({seq:[{int:1},{octstr:{hex:en.prvKeyHex}},{tag:["a0",!0,{oid:{name:en.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+en.pubKeyHex}}]}]})}function Ge(en){return Ue({seq:[{int:0},{int:{bigint:en.p}},{int:{bigint:en.q}},{int:{bigint:en.g}},{int:{bigint:en.y}},{int:{bigint:en.x}}]})}if((void 0!==gt&&A instanceof gt||void 0!==nt&&A instanceof nt||void 0!==d&&A instanceof d)&&1==A.isPublic&&(void 0===k||"PKCS8PUB"==k))return jr(kt=new(0,Ne.x509.SubjectPublicKeyInfo)(A).getEncodedHex(),"PUBLIC KEY");if("PKCS1PRV"==k&&void 0!==gt&&A instanceof gt&&(void 0===L||null==L)&&1==A.isPrivate)return jr(kt=Et(A).getEncodedHex(),"RSA PRIVATE KEY");if("PKCS1PRV"==k&&void 0!==d&&A instanceof d&&(void 0===L||null==L)&&1==A.isPrivate){var Ke=new Me({name:A.curveName}).getEncodedHex(),Xe=Ee(A).getEncodedHex(),_t="";return(_t+=jr(Ke,"EC PARAMETERS"))+jr(Xe,"EC PRIVATE KEY")}if("PKCS1PRV"==k&&void 0!==nt&&A instanceof nt&&(void 0===L||null==L)&&1==A.isPrivate)return jr(kt=Ge(A).getEncodedHex(),"DSA PRIVATE KEY");if("PKCS5PRV"==k&&void 0!==gt&&A instanceof gt&&void 0!==L&&null!=L&&1==A.isPrivate){var kt=Et(A).getEncodedHex();return void 0===X&&(X="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",kt,L,X,he)}if("PKCS5PRV"==k&&void 0!==d&&A instanceof d&&void 0!==L&&null!=L&&1==A.isPrivate)return kt=Ee(A).getEncodedHex(),void 0===X&&(X="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",kt,L,X,he);if("PKCS5PRV"==k&&void 0!==nt&&A instanceof nt&&void 0!==L&&null!=L&&1==A.isPrivate)return kt=Ge(A).getEncodedHex(),void 0===X&&(X="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",kt,L,X,he);var Wt=function(gn,sr){var gr=$t(gn,sr);return new Ue({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:gr.pbkdf2Salt}},{int:gr.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:gr.encryptionSchemeIV}}]}]}]},{octstr:{hex:gr.ciphertext}}]}).getEncodedHex()},$t=function(gn,sr){var gr=z.lib.WordArray.random(8),vr=z.lib.WordArray.random(8),oi=z.PBKDF2(sr,gr,{keySize:6,iterations:100}),Jr=z.enc.Hex.parse(gn),$r=z.TripleDES.encrypt(Jr,oi,{iv:vr})+"",Le={};return Le.ciphertext=$r,Le.pbkdf2Salt=z.enc.Hex.stringify(gr),Le.pbkdf2Iter=100,Le.encryptionSchemeAlg="DES-EDE3-CBC",Le.encryptionSchemeIV=z.enc.Hex.stringify(vr),Le};if("PKCS8PRV"==k&&null!=gt&&A instanceof gt&&1==A.isPrivate){var Zn=Et(A).getEncodedHex();return kt=Ue({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:Zn}}]}).getEncodedHex(),void 0===L||null==L?jr(kt,"PRIVATE KEY"):jr(Xe=Wt(kt,L),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==k&&void 0!==d&&A instanceof d&&1==A.isPrivate)return Zn=new Ue({seq:[{int:1},{octstr:{hex:A.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+A.pubKeyHex}}]}]}).getEncodedHex(),kt=Ue({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:A.curveName}}]},{octstr:{hex:Zn}}]}).getEncodedHex(),void 0===L||null==L?jr(kt,"PRIVATE KEY"):jr(Xe=Wt(kt,L),"ENCRYPTED PRIVATE KEY");if("PKCS8PRV"==k&&void 0!==nt&&A instanceof nt&&1==A.isPrivate)return Zn=new Ze({bigint:A.x}).getEncodedHex(),kt=Ue({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:A.p}},{int:{bigint:A.q}},{int:{bigint:A.g}}]}]},{octstr:{hex:Zn}}]}).getEncodedHex(),void 0===L||null==L?jr(kt,"PRIVATE KEY"):jr(Xe=Wt(kt,L),"ENCRYPTED PRIVATE KEY");throw new Error("unsupported object nor format")},hr.getKeyFromCSRPEM=function(A){var k=di(A,"CERTIFICATE REQUEST");return hr.getKeyFromCSRHex(k)},hr.getKeyFromCSRHex=function(A){var k=hr.parseCSRHex(A);return hr.getKey(k.p8pubkeyhex,null,"pkcs8pub")},hr.parseCSRHex=function(A){var L=Qt.getChildIdx,X=Qt.getTLV,ie={},he=A;if("30"!=he.substr(0,2))throw"malformed CSR(code:001)";var Pe=L(he,0);if(Pe.length<1)throw"malformed CSR(code:002)";if("30"!=he.substr(Pe[0],2))throw"malformed CSR(code:003)";var Ne=L(he,Pe[0]);if(Ne.length<3)throw"malformed CSR(code:004)";return ie.p8pubkeyhex=X(he,Ne[2]),ie},hr.getKeyID=function(A){var k=hr,L=Qt;"string"==typeof A&&-1!=A.indexOf("BEGIN ")&&(A=k.getKey(A));var X=di(k.getPEM(A)),ie=L.getIdxbyList(X,0,[1]),he=L.getV(X,ie).substring(2);return De.crypto.Util.hashHex(he,"sha1")},hr.getJWKFromKey=function(A){var k={};if(A instanceof Gt&&A.isPrivate)return k.kty="RSA",k.n=Cn(A.n.toString(16)),k.e=Cn(A.e.toString(16)),k.d=Cn(A.d.toString(16)),k.p=Cn(A.p.toString(16)),k.q=Cn(A.q.toString(16)),k.dp=Cn(A.dmp1.toString(16)),k.dq=Cn(A.dmq1.toString(16)),k.qi=Cn(A.coeff.toString(16)),k;if(A instanceof Gt&&A.isPublic)return k.kty="RSA",k.n=Cn(A.n.toString(16)),k.e=Cn(A.e.toString(16)),k;if(A instanceof De.crypto.ECDSA&&A.isPrivate){if("P-256"!==(X=A.getShortNISTPCurveName())&&"P-384"!==X)throw"unsupported curve name for JWT: "+X;var L=A.getPublicKeyXYHex();return k.kty="EC",k.crv=X,k.x=Cn(L.x),k.y=Cn(L.y),k.d=Cn(A.prvKeyHex),k}if(A instanceof De.crypto.ECDSA&&A.isPublic){var X;if("P-256"!==(X=A.getShortNISTPCurveName())&&"P-384"!==X)throw"unsupported curve name for JWT: "+X;return L=A.getPublicKeyXYHex(),k.kty="EC",k.crv=X,k.x=Cn(L.x),k.y=Cn(L.y),k}throw"not supported key object"},Gt.getPosArrayOfChildrenFromHex=function(A){return Qt.getChildIdx(A,0)},Gt.getHexValueArrayOfChildrenFromHex=function(A){var k,L=Qt.getV,X=L(A,(k=Gt.getPosArrayOfChildrenFromHex(A))[0]),ie=L(A,k[1]),he=L(A,k[2]),Pe=L(A,k[3]),Ne=L(A,k[4]),Me=L(A,k[5]),Ze=L(A,k[6]),Ue=L(A,k[7]),Ve=L(A,k[8]);return(k=new Array).push(X,ie,he,Pe,Ne,Me,Ze,Ue,Ve),k},Gt.prototype.readPrivateKeyFromPEMString=function(A){var k=di(A),L=Gt.getHexValueArrayOfChildrenFromHex(k);this.setPrivateEx(L[1],L[2],L[3],L[4],L[5],L[6],L[7],L[8])},Gt.prototype.readPKCS5PrvKeyHex=function(A){var k=Gt.getHexValueArrayOfChildrenFromHex(A);this.setPrivateEx(k[1],k[2],k[3],k[4],k[5],k[6],k[7],k[8])},Gt.prototype.readPKCS8PrvKeyHex=function(A){var k,L,X,ie,he,Pe,Ne,Me,Ue=Qt.getVbyListEx;if(!1===Qt.isASN1HEX(A))throw new Error("not ASN.1 hex string");try{k=Ue(A,0,[2,0,1],"02"),L=Ue(A,0,[2,0,2],"02"),X=Ue(A,0,[2,0,3],"02"),ie=Ue(A,0,[2,0,4],"02"),he=Ue(A,0,[2,0,5],"02"),Pe=Ue(A,0,[2,0,6],"02"),Ne=Ue(A,0,[2,0,7],"02"),Me=Ue(A,0,[2,0,8],"02")}catch{throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(k,L,X,ie,he,Pe,Ne,Me)},Gt.prototype.readPKCS5PubKeyHex=function(A){var k=Qt,L=k.getV;if(!1===k.isASN1HEX(A))throw new Error("keyHex is not ASN.1 hex string");var X=k.getChildIdx(A,0);if(2!==X.length||"02"!==A.substr(X[0],2)||"02"!==A.substr(X[1],2))throw new Error("wrong hex for PKCS#5 public key");var ie=L(A,X[0]),he=L(A,X[1]);this.setPublic(ie,he)},Gt.prototype.readPKCS8PubKeyHex=function(A){var k=Qt;if(!1===k.isASN1HEX(A))throw new Error("not ASN.1 hex string");if("06092a864886f70d010101"!==k.getTLVbyListEx(A,0,[0,0]))throw new Error("not PKCS8 RSA public key");var L=k.getTLVbyListEx(A,0,[1,0]);this.readPKCS5PubKeyHex(L)},Gt.prototype.readCertPubKeyHex=function(A,k){var L,X;(L=new mr).readCertHex(A),X=L.getPublicKeyHex(),this.readPKCS8PubKeyHex(X)};var ma=new RegExp("[^0-9a-f]","gi");function So(A,k){for(var L="",X=k/4-A.length,ie=0;ie<X;ie++)L+="0";return L+A}function fi(A,k,L){for(var X="",ie=0;X.length<k;)X+=wn(L(Ar(A+String.fromCharCode.apply(String,[(4278190080&ie)>>24,(16711680&ie)>>16,(65280&ie)>>8,255&ie])))),ie+=1;return X}function fo(A){for(var k in De.crypto.Util.DIGESTINFOHEAD){var L=De.crypto.Util.DIGESTINFOHEAD[k],X=L.length;if(A.substring(0,X)==L)return[k,A.substring(X)]}return[]}function mr(A){var k,L=Qt,X=L.getChildIdx,ie=L.getV,he=L.getTLV,Pe=L.getVbyList,Ne=L.getVbyListEx,Me=L.getTLVbyList,Ze=L.getTLVbyListEx,Ue=L.getIdxbyList,Ve=L.getIdxbyListEx,We=L.getVidx,nt=L.oidname,d=L.hextooidstr,gt=mr,Et=di;try{k=De.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch{}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){return null===this.hex||0!==this.version?this.version:"a003020102"!==Me(this.hex,0,[0,0])?(this.version=1,this.foffset=-1,1):(this.version=3,3)},this.getSerialNumberHex=function(){return Ne(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var Ee=Ze(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(Ee)},this.getAlgorithmIdentifierName=function(Ee){for(var Ge in k)if(Ee===k[Ge])return Ge;return nt(Ne(Ee,0,[0],"06"))},this.getIssuer=function(){return this.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return Me(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return gt.hex2dn(this.getIssuerHex())},this.getSubject=function(){return this.getX500Name(this.getSubjectHex())},this.getSubjectHex=function(){return Me(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return gt.hex2dn(this.getSubjectHex())},this.getNotBefore=function(){var Ee=Pe(this.hex,0,[0,4+this.foffset,0]);return Ee=Ee.replace(/(..)/g,"%$1"),decodeURIComponent(Ee)},this.getNotAfter=function(){var Ee=Pe(this.hex,0,[0,4+this.foffset,1]);return Ee=Ee.replace(/(..)/g,"%$1"),decodeURIComponent(Ee)},this.getPublicKeyHex=function(){return L.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return Ue(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var Ee=this.getPublicKeyIdx();return Ue(this.hex,Ee,[1,0],"30")},this.getPublicKey=function(){return hr.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var Ee=Me(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(Ee)},this.getSignatureValueHex=function(){return Pe(this.hex,0,[2],"03",!0)},this.verifySignature=function(Ee){var Ge=this.getSignatureAlgorithmField(),Ke=this.getSignatureValueHex(),Xe=Me(this.hex,0,[0],"30"),_t=new De.crypto.Signature({alg:Ge});return _t.init(Ee),_t.updateHex(Xe),_t.verify(Ke)},this.parseExt=function(Ee){var Ge,Ke,Xe;if(void 0===Ee){if(3!==this.version)return-1;Ge=Ue(Xe=this.hex,0,[0,7,0],"30"),Ke=X(Xe,Ge)}else{Xe=di(Ee);var _t=Ue(Xe,0,[0,3,0,0],"06");if("2a864886f70d01090e"!=ie(Xe,_t))return void(this.aExtInfo=new Array);Ge=Ue(Xe,0,[0,3,0,1,0],"30"),Ke=X(Xe,Ge),this.hex=Xe}this.aExtInfo=new Array;for(var kt=0;kt<Ke.length;kt++){var Wt={critical:!1},$t=0;3===X(Xe,Ke[kt]).length&&(Wt.critical=!0,$t=1),Wt.oid=L.hextooidstr(Pe(Xe,Ke[kt],[0],"06"));var Zn=Ue(Xe,Ke[kt],[1+$t]);Wt.vidx=We(Xe,Zn),this.aExtInfo.push(Wt)}},this.getExtInfo=function(Ee){var Ge=this.aExtInfo,Ke=Ee;if(Ee.match(/^[0-9.]+$/)||(Ke=De.asn1.x509.OID.name2oid(Ee)),""!==Ke)for(var Xe=0;Xe<Ge.length;Xe++)if(Ge[Xe].oid===Ke)return Ge[Xe]},this.getExtBasicConstraints=function(Ee,Ge){if(void 0===Ee&&void 0===Ge){var Ke=this.getExtInfo("basicConstraints");if(void 0===Ke)return;Ee=he(this.hex,Ke.vidx),Ge=Ke.critical}var Xe={extname:"basicConstraints"};if(Ge&&(Xe.critical=!0),"3000"===Ee)return Xe;if("30030101ff"===Ee)return Xe.cA=!0,Xe;if("30060101ff02"===Ee.substr(0,12)){var _t=ie(Ee,10),kt=parseInt(_t,16);return Xe.cA=!0,Xe.pathLen=kt,Xe}throw new Error("hExtV parse error: "+Ee)},this.getExtKeyUsage=function(Ee,Ge){if(void 0===Ee&&void 0===Ge){var Ke=this.getExtInfo("keyUsage");if(void 0===Ke)return;Ee=he(this.hex,Ke.vidx),Ge=Ke.critical}var Xe={extname:"keyUsage"};return Ge&&(Xe.critical=!0),Xe.names=this.getExtKeyUsageString(Ee).split(","),Xe},this.getExtKeyUsageBin=function(Ee){if(void 0===Ee){var Ge=this.getExtInfo("keyUsage");if(void 0===Ge)return"";Ee=he(this.hex,Ge.vidx)}if(8!=Ee.length&&10!=Ee.length)throw new Error("malformed key usage value: "+Ee);var Ke="000000000000000"+parseInt(Ee.substr(6),16).toString(2);return 8==Ee.length&&(Ke=Ke.slice(-8)),10==Ee.length&&(Ke=Ke.slice(-16)),""==(Ke=Ke.replace(/0+$/,""))&&(Ke="0"),Ke},this.getExtKeyUsageString=function(Ee){for(var Ge=this.getExtKeyUsageBin(Ee),Ke=new Array,Xe=0;Xe<Ge.length;Xe++)"1"==Ge.substr(Xe,1)&&Ke.push(mr.KEYUSAGE_NAME[Xe]);return Ke.join(",")},this.getExtSubjectKeyIdentifier=function(Ee,Ge){if(void 0===Ee&&void 0===Ge){var Ke=this.getExtInfo("subjectKeyIdentifier");if(void 0===Ke)return;Ee=he(this.hex,Ke.vidx),Ge=Ke.critical}var Xe={extname:"subjectKeyIdentifier"};Ge&&(Xe.critical=!0);var _t=ie(Ee,0);return Xe.kid={hex:_t},Xe},this.getExtAuthorityKeyIdentifier=function(Ee,Ge){if(void 0===Ee&&void 0===Ge){var Ke=this.getExtInfo("authorityKeyIdentifier");if(void 0===Ke)return;Ee=he(this.hex,Ke.vidx),Ge=Ke.critical}var Xe={extname:"authorityKeyIdentifier"};Ge&&(Xe.critical=!0);for(var _t=X(Ee,0),kt=0;kt<_t.length;kt++){var Wt=Ee.substr(_t[kt],2);if("80"===Wt&&(Xe.kid={hex:ie(Ee,_t[kt])}),"a1"===Wt){var $t=he(Ee,_t[kt]),Zn=this.getGeneralNames($t);Xe.issuer=Zn[0].dn}"82"===Wt&&(Xe.sn={hex:ie(Ee,_t[kt])})}return Xe},this.getExtExtKeyUsage=function(Ee,Ge){if(void 0===Ee&&void 0===Ge){var Ke=this.getExtInfo("extKeyUsage");if(void 0===Ke)return;Ee=he(this.hex,Ke.vidx),Ge=Ke.critical}var Xe={extname:"extKeyUsage",array:[]};Ge&&(Xe.critical=!0);for(var _t=X(Ee,0),kt=0;kt<_t.length;kt++)Xe.array.push(nt(ie(Ee,_t[kt])));return Xe},this.getExtExtKeyUsageName=function(){var Ee=this.getExtInfo("extKeyUsage");if(void 0===Ee)return Ee;var Ge=new Array,Ke=he(this.hex,Ee.vidx);if(""===Ke)return Ge;for(var Xe=X(Ke,0),_t=0;_t<Xe.length;_t++)Ge.push(nt(ie(Ke,Xe[_t])));return Ge},this.getExtSubjectAltName=function(Ee,Ge){if(void 0===Ee&&void 0===Ge){var Ke=this.getExtInfo("subjectAltName");if(void 0===Ke)return;Ee=he(this.hex,Ke.vidx),Ge=Ke.critical}var Xe={extname:"subjectAltName",array:[]};return Ge&&(Xe.critical=!0),Xe.array=this.getGeneralNames(Ee),Xe},this.getExtIssuerAltName=function(Ee,Ge){if(void 0===Ee&&void 0===Ge){var Ke=this.getExtInfo("issuerAltName");if(void 0===Ke)return;Ee=he(this.hex,Ke.vidx),Ge=Ke.critical}var Xe={extname:"issuerAltName",array:[]};return Ge&&(Xe.critical=!0),Xe.array=this.getGeneralNames(Ee),Xe},this.getGeneralNames=function(Ee){for(var Ge=X(Ee,0),Ke=[],Xe=0;Xe<Ge.length;Xe++){var _t=this.getGeneralName(he(Ee,Ge[Xe]));void 0!==_t&&Ke.push(_t)}return Ke},this.getGeneralName=function(Ee){var Ge=Ee.substr(0,2),Ke=ie(Ee,0),Xe=wn(Ke);return"81"==Ge?{rfc822:Xe}:"82"==Ge?{dns:Xe}:"86"==Ge?{uri:Xe}:"87"==Ge?{ip:wo(Ke)}:"a4"==Ge?{dn:this.getX500Name(Ke)}:void 0},this.getExtSubjectAltName2=function(){var Ee,Ge,Ke,Xe=this.getExtInfo("subjectAltName");if(void 0===Xe)return Xe;for(var _t=new Array,kt=he(this.hex,Xe.vidx),Wt=X(kt,0),$t=0;$t<Wt.length;$t++)Ke=kt.substr(Wt[$t],2),Ee=ie(kt,Wt[$t]),"81"===Ke&&(Ge=lr(Ee),_t.push(["MAIL",Ge])),"82"===Ke&&(Ge=lr(Ee),_t.push(["DNS",Ge])),"84"===Ke&&(Ge=mr.hex2dn(Ee,0),_t.push(["DN",Ge])),"86"===Ke&&(Ge=lr(Ee),_t.push(["URI",Ge])),"87"===Ke&&(Ge=wo(Ee),_t.push(["IP",Ge]));return _t},this.getExtCRLDistributionPoints=function(Ee,Ge){if(void 0===Ee&&void 0===Ge){var Ke=this.getExtInfo("cRLDistributionPoints");if(void 0===Ke)return;Ee=he(this.hex,Ke.vidx),Ge=Ke.critical}var Xe={extname:"cRLDistributionPoints",array:[]};Ge&&(Xe.critical=!0);for(var _t=X(Ee,0),kt=0;kt<_t.length;kt++){var Wt=he(Ee,_t[kt]);Xe.array.push(this.getDistributionPoint(Wt))}return Xe},this.getDistributionPoint=function(Ee){for(var Ge={},Ke=X(Ee,0),Xe=0;Xe<Ke.length;Xe++){var _t=Ee.substr(Ke[Xe],2),kt=he(Ee,Ke[Xe]);"a0"==_t&&(Ge.dpname=this.getDistributionPointName(kt))}return Ge},this.getDistributionPointName=function(Ee){for(var Ge={},Ke=X(Ee,0),Xe=0;Xe<Ke.length;Xe++){var _t=Ee.substr(Ke[Xe],2),kt=he(Ee,Ke[Xe]);"a0"==_t&&(Ge.full=this.getGeneralNames(kt))}return Ge},this.getExtCRLDistributionPointsURI=function(){var Ee=this.getExtInfo("cRLDistributionPoints");if(void 0===Ee)return Ee;for(var Ge=new Array,Ke=X(this.hex,Ee.vidx),Xe=0;Xe<Ke.length;Xe++)try{var _t=lr(Pe(this.hex,Ke[Xe],[0,0,0],"86"));Ge.push(_t)}catch{}return Ge},this.getExtAIAInfo=function(){var Ee=this.getExtInfo("authorityInfoAccess");if(void 0===Ee)return Ee;for(var Ge={ocsp:[],caissuer:[]},Ke=X(this.hex,Ee.vidx),Xe=0;Xe<Ke.length;Xe++){var _t=Pe(this.hex,Ke[Xe],[0],"06"),kt=Pe(this.hex,Ke[Xe],[1],"86");"2b06010505073001"===_t&&Ge.ocsp.push(lr(kt)),"2b06010505073002"===_t&&Ge.caissuer.push(lr(kt))}return Ge},this.getExtAuthorityInfoAccess=function(Ee,Ge){if(void 0===Ee&&void 0===Ge){var Ke=this.getExtInfo("authorityInfoAccess");if(void 0===Ke)return;Ee=he(this.hex,Ke.vidx),Ge=Ke.critical}var Xe={extname:"authorityInfoAccess",array:[]};Ge&&(Xe.critical=!0);for(var _t=X(Ee,0),kt=0;kt<_t.length;kt++){var Wt=Ne(Ee,_t[kt],[0],"06"),$t=lr(Pe(Ee,_t[kt],[1],"86"));if("2b06010505073001"==Wt)Xe.array.push({ocsp:$t});else{if("2b06010505073002"!=Wt)throw new Error("unknown method: "+Wt);Xe.array.push({caissuer:$t})}}return Xe},this.getExtCertificatePolicies=function(Ee,Ge){if(void 0===Ee&&void 0===Ge){var Ke=this.getExtInfo("certificatePolicies");if(void 0===Ke)return;Ee=he(this.hex,Ke.vidx),Ge=Ke.critical}var Xe={extname:"certificatePolicies",array:[]};Ge&&(Xe.critical=!0);for(var _t=X(Ee,0),kt=0;kt<_t.length;kt++){var Wt=he(Ee,_t[kt]),$t=this.getPolicyInformation(Wt);Xe.array.push($t)}return Xe},this.getPolicyInformation=function(Ee){var Ge={},Ke=Pe(Ee,0,[0],"06");Ge.policyoid=nt(Ke);var Xe=Ve(Ee,0,[1],"30");if(-1!=Xe){Ge.array=[];for(var _t=X(Ee,Xe),kt=0;kt<_t.length;kt++){var Wt=he(Ee,_t[kt]),$t=this.getPolicyQualifierInfo(Wt);Ge.array.push($t)}}return Ge},this.getPolicyQualifierInfo=function(Ee){var Ge={},Ke=Pe(Ee,0,[0],"06");if("2b06010505070201"===Ke){var Xe=Ne(Ee,0,[1],"16");Ge.cps=wn(Xe)}else if("2b06010505070202"===Ke){var _t=Me(Ee,0,[1],"30");Ge.unotice=this.getUserNotice(_t)}return Ge},this.getUserNotice=function(Ee){for(var Ge={},Ke=X(Ee,0),Xe=0;Xe<Ke.length;Xe++){var _t=he(Ee,Ke[Xe]);"30"!=_t.substr(0,2)&&(Ge.exptext=this.getDisplayText(_t))}return Ge},this.getDisplayText=function(Ee){var Ge={};return Ge.type={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"}[Ee.substr(0,2)],Ge.str=wn(ie(Ee,0)),Ge},this.getExtCRLNumber=function(Ee,Ge){var Ke={extname:"cRLNumber"};if(Ge&&(Ke.critical=!0),"02"==Ee.substr(0,2))return Ke.num={hex:ie(Ee,0)},Ke;throw new Error("hExtV parse error: "+Ee)},this.getExtCRLReason=function(Ee,Ge){var Ke={extname:"cRLReason"};if(Ge&&(Ke.critical=!0),"0a"==Ee.substr(0,2))return Ke.code=parseInt(ie(Ee,0),16),Ke;throw new Error("hExtV parse error: "+Ee)},this.getExtOcspNonce=function(Ee,Ge){var Ke={extname:"ocspNonce"};Ge&&(Ke.critical=!0);var Xe=ie(Ee,0);return Ke.hex=Xe,Ke},this.getExtOcspNoCheck=function(Ee,Ge){var Ke={extname:"ocspNoCheck"};return Ge&&(Ke.critical=!0),Ke},this.getExtAdobeTimeStamp=function(Ee,Ge){if(void 0===Ee&&void 0===Ge){var Ke=this.getExtInfo("adobeTimeStamp");if(void 0===Ke)return;Ee=he(this.hex,Ke.vidx),Ge=Ke.critical}var Xe={extname:"adobeTimeStamp"};Ge&&(Xe.critical=!0);var _t=X(Ee,0);if(_t.length>1){var kt=he(Ee,_t[1]),Wt=this.getGeneralName(kt);null!=Wt.uri&&(Xe.uri=Wt.uri)}if(_t.length>2){var $t=he(Ee,_t[2]);"0101ff"==$t&&(Xe.reqauth=!0),"010100"==$t&&(Xe.reqauth=!1)}return Xe},this.getX500NameRule=function(Ee){for(var Ge=null,Ke=[],Xe=0;Xe<Ee.length;Xe++)for(var _t=Ee[Xe],kt=0;kt<_t.length;kt++)Ke.push(_t[kt]);for(Xe=0;Xe<Ke.length;Xe++){var Wt=Ke[Xe],$t=Wt.ds,en=Wt.type;if("prn"!=$t&&"utf8"!=$t&&"ia5"!=$t)return"mixed";if("ia5"==$t){if("CN"!=en)return"mixed";if(De.lang.String.isMail(Wt.value))continue;return"mixed"}if("C"==en){if("prn"==$t)continue;return"mixed"}if(null==Ge)Ge=$t;else if(Ge!==$t)return"mixed"}return Ge??"prn"},this.getX500Name=function(Ee){var Ge=this.getX500NameArray(Ee);return{array:Ge,str:this.dnarraytostr(Ge)}},this.getX500NameArray=function(Ee){for(var Ge=[],Ke=X(Ee,0),Xe=0;Xe<Ke.length;Xe++)Ge.push(this.getRDN(he(Ee,Ke[Xe])));return Ge},this.getRDN=function(Ee){for(var Ge=[],Ke=X(Ee,0),Xe=0;Xe<Ke.length;Xe++)Ge.push(this.getAttrTypeAndValue(he(Ee,Ke[Xe])));return Ge},this.getAttrTypeAndValue=function(Ee){var Ge={type:null,value:null,ds:null},Ke=X(Ee,0),Xe=Pe(Ee,Ke[0],[],"06"),_t=Pe(Ee,Ke[1],[]),kt=De.asn1.ASN1Util.oidHexToInt(Xe);return Ge.type=De.asn1.x509.OID.oid2atype(kt),Ge.value=wn(_t),Ge.ds=this.HEX2STAG[Ee.substr(Ke[1],2)],Ge},this.readCertPEM=function(Ee){this.readCertHex(Et(Ee))},this.readCertHex=function(Ee){this.hex=Ee,this.getVersion();try{Ue(this.hex,0,[0,7],"a3"),this.parseExt()}catch{}},this.getParam=function(){var Ee={};return Ee.version=this.getVersion(),Ee.serial={hex:this.getSerialNumberHex()},Ee.sigalg=this.getSignatureAlgorithmField(),Ee.issuer=this.getIssuer(),Ee.notbefore=this.getNotBefore(),Ee.notafter=this.getNotAfter(),Ee.subject=this.getSubject(),Ee.sbjpubkey=jr(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo.length>0&&(Ee.ext=this.getExtParamArray()),Ee.sighex=this.getSignatureValueHex(),Ee},this.getExtParamArray=function(Ee){null==Ee&&-1!=Ve(this.hex,0,[0,"[3]"])&&(Ee=Ze(this.hex,0,[0,"[3]",0],"30"));for(var Ge=[],Ke=X(Ee,0),Xe=0;Xe<Ke.length;Xe++){var _t=he(Ee,Ke[Xe]),kt=this.getExtParam(_t);null!=kt&&Ge.push(kt)}return Ge},this.getExtParam=function(Ee){var Ge=X(Ee,0).length;if(2!=Ge&&3!=Ge)throw new Error("wrong number elements in Extension: "+Ge+" "+Ee);var Ke=d(Pe(Ee,0,[0],"06")),Xe=!1;3==Ge&&"0101ff"==Me(Ee,0,[1])&&(Xe=!0);var _t=Me(Ee,0,[Ge-1,0]),kt=void 0;if("2.5.29.14"==Ke?kt=this.getExtSubjectKeyIdentifier(_t,Xe):"2.5.29.15"==Ke?kt=this.getExtKeyUsage(_t,Xe):"2.5.29.17"==Ke?kt=this.getExtSubjectAltName(_t,Xe):"2.5.29.18"==Ke?kt=this.getExtIssuerAltName(_t,Xe):"2.5.29.19"==Ke?kt=this.getExtBasicConstraints(_t,Xe):"2.5.29.31"==Ke?kt=this.getExtCRLDistributionPoints(_t,Xe):"2.5.29.32"==Ke?kt=this.getExtCertificatePolicies(_t,Xe):"2.5.29.35"==Ke?kt=this.getExtAuthorityKeyIdentifier(_t,Xe):"2.5.29.37"==Ke?kt=this.getExtExtKeyUsage(_t,Xe):"1.3.6.1.5.5.7.1.1"==Ke?kt=this.getExtAuthorityInfoAccess(_t,Xe):"2.5.29.20"==Ke?kt=this.getExtCRLNumber(_t,Xe):"2.5.29.21"==Ke?kt=this.getExtCRLReason(_t,Xe):"1.3.6.1.5.5.7.48.1.2"==Ke?kt=this.getExtOcspNonce(_t,Xe):"1.3.6.1.5.5.7.48.1.5"==Ke?kt=this.getExtOcspNoCheck(_t,Xe):"1.2.840.113583.1.1.9.1"==Ke&&(kt=this.getExtAdobeTimeStamp(_t,Xe)),null!=kt)return kt;var Wt={extname:Ke,extn:_t};return Xe&&(Wt.critical=!0),Wt},this.findExt=function(Ee,Ge){for(var Ke=0;Ke<Ee.length;Ke++)if(Ee[Ke].extname==Ge)return Ee[Ke];return null},this.updateExtCDPFullURI=function(Ee,Ge){var Ke=this.findExt(Ee,"cRLDistributionPoints");if(null!=Ke&&null!=Ke.array)for(var Xe=Ke.array,_t=0;_t<Xe.length;_t++)if(null!=Xe[_t].dpname&&null!=Xe[_t].dpname.full)for(var kt=Xe[_t].dpname.full,Wt=0;Wt<kt.length;Wt++){var $t=kt[_t];null!=$t.uri&&($t.uri=Ge)}},this.updateExtAIAOCSP=function(Ee,Ge){var Ke=this.findExt(Ee,"authorityInfoAccess");if(null!=Ke&&null!=Ke.array)for(var Xe=Ke.array,_t=0;_t<Xe.length;_t++)null!=Xe[_t].ocsp&&(Xe[_t].ocsp=Ge)},this.updateExtAIACAIssuer=function(Ee,Ge){var Ke=this.findExt(Ee,"authorityInfoAccess");if(null!=Ke&&null!=Ke.array)for(var Xe=Ke.array,_t=0;_t<Xe.length;_t++)null!=Xe[_t].caissuer&&(Xe[_t].caissuer=Ge)},this.dnarraytostr=function(Ee){return"/"+Ee.map(function(Ge){return Ge.map(function(_t){return(Wt=_t).type+"="+Wt.value;var Wt}).join("+")}).join("/")},this.getInfo=function(){var Ee,Ge,Ke,oi,_t=function(oi){for(var Jr="",$r=oi.array,Le=0;Le<$r.length;Le++){var ct=$r[Le];if(Jr+="    policy oid: "+ct.policyoid+"\n",void 0!==ct.array)for(var lt=0;lt<ct.array.length;lt++){var wt=ct.array[lt];void 0!==wt.cps&&(Jr+="    cps: "+wt.cps+"\n")}}return Jr},kt=function(oi){for(var Jr="",$r=oi.array,Le=0;Le<$r.length;Le++){var ct=$r[Le];try{void 0!==ct.dpname.full[0].uri&&(Jr+="    "+ct.dpname.full[0].uri+"\n")}catch{}try{void 0!==ct.dname.full[0].dn.hex&&(Jr+="    "+mr.hex2dn(ct.dpname.full[0].dn.hex)+"\n")}catch{}}return Jr},Wt=function(oi){for(var Jr="",$r=oi.array,Le=0;Le<$r.length;Le++){var ct=$r[Le];void 0!==ct.caissuer&&(Jr+="    caissuer: "+ct.caissuer+"\n"),void 0!==ct.ocsp&&(Jr+="    ocsp: "+ct.ocsp+"\n")}return Jr};if(Ee="Basic Fields\n",Ee+="  serial number: "+this.getSerialNumberHex()+"\n",Ee+="  signature algorithm: "+this.getSignatureAlgorithmField()+"\n",Ee+="  issuer: "+this.getIssuerString()+"\n",Ee+="  notBefore: "+this.getNotBefore()+"\n",Ee+="  notAfter: "+this.getNotAfter()+"\n",Ee+="  subject: "+this.getSubjectString()+"\n",Ee+="  subject public key info: \n",Ee+="    key algorithm: "+(Ge=this.getPublicKey()).type+"\n","RSA"===Ge.type&&(Ee+="    n="+gi(Ge.n.toString(16)).substr(0,16)+"...\n",Ee+="    e="+gi(Ge.e.toString(16))+"\n"),null!=(Ke=this.aExtInfo)){Ee+="X509v3 Extensions:\n";for(var $t=0;$t<Ke.length;$t++){var Zn=Ke[$t],en=De.asn1.x509.OID.oid2name(Zn.oid);""===en&&(en=Zn.oid);var gn="";if(!0===Zn.critical&&(gn="CRITICAL"),Ee+="  "+en+" "+gn+":\n","basicConstraints"===en){var sr=this.getExtBasicConstraints();void 0===sr.cA?Ee+="    {}\n":(Ee+="    cA=true",void 0!==sr.pathLen&&(Ee+=", pathLen="+sr.pathLen),Ee+="\n")}else if("keyUsage"===en)Ee+="    "+this.getExtKeyUsageString()+"\n";else if("subjectKeyIdentifier"===en)Ee+="    "+this.getExtSubjectKeyIdentifier().kid.hex+"\n";else if("authorityKeyIdentifier"===en){var gr=this.getExtAuthorityKeyIdentifier();void 0!==gr.kid&&(Ee+="    kid="+gr.kid.hex+"\n")}else"extKeyUsage"===en?Ee+="    "+this.getExtExtKeyUsage().array.join(", ")+"\n":"subjectAltName"===en?Ee+="    "+(oi=this.getExtSubjectAltName(),JSON.stringify(oi.array).replace(/[\[\]\{\}\"]/g,"")+"\n"):"cRLDistributionPoints"===en?Ee+=kt(this.getExtCRLDistributionPoints()):"authorityInfoAccess"===en?Ee+=Wt(this.getExtAuthorityInfoAccess()):"certificatePolicies"===en&&(Ee+=_t(this.getExtCertificatePolicies()))}}return(Ee+="signature algorithm: "+this.getSignatureAlgorithmName()+"\n")+"signature: "+this.getSignatureValueHex().substr(0,16)+"...\n"},"string"==typeof A&&(-1!=A.indexOf("-----BEGIN")?this.readCertPEM(A):De.lang.String.isHex(A)&&this.readCertHex(A))}Gt.prototype.sign=function(A,k){var L=function(ie){return De.crypto.Util.hashString(ie,k)}(A);return this.signWithMessageHash(L,k)},Gt.prototype.signWithMessageHash=function(A,k){var L=Tt(De.crypto.Util.getPaddedDigestInfoHex(A,k,this.n.bitLength()),16);return So(this.doPrivate(L).toString(16),this.n.bitLength())},Gt.prototype.signPSS=function(A,k,L){var he,X=(he=Ar(A),De.crypto.Util.hashHex(he,k));return void 0===L&&(L=-1),this.signWithMessageHashPSS(X,k,L)},Gt.prototype.signWithMessageHashPSS=function(A,k,L){var X,ie=wn(A),he=ie.length,Pe=this.n.bitLength()-1,Ne=Math.ceil(Pe/8),Me=function(Ee){return De.crypto.Util.hashHex(Ee,k)};if(-1===L||void 0===L)L=he;else if(-2===L)L=Ne-he-2;else if(L<-2)throw new Error("invalid salt length");if(Ne<he+L+2)throw new Error("data too long");var Ze="";L>0&&(Ze=new Array(L),(new ot).nextBytes(Ze),Ze=String.fromCharCode.apply(String,Ze));var Ue=wn(Me(Ar("\0\0\0\0\0\0\0\0"+ie+Ze))),Ve=[];for(X=0;X<Ne-L-he-2;X+=1)Ve[X]=0;var We=String.fromCharCode.apply(String,Ve)+"\x01"+Ze,nt=fi(Ue,We.length,Me),d=[];for(X=0;X<We.length;X+=1)d[X]=We.charCodeAt(X)^nt.charCodeAt(X);for(d[0]&=~(65280>>8*Ne-Pe&255),X=0;X<he;X++)d.push(Ue.charCodeAt(X));return d.push(188),So(this.doPrivate(new ge(d)).toString(16),this.n.bitLength())},Gt.prototype.verify=function(A,k){var L=Tt(k=(k=k.replace(ma,"")).replace(/[ \n]+/g,""),16);if(L.bitLength()>this.n.bitLength())return 0;var X=fo(this.doPublic(L).toString(16).replace(/^1f+00/,""));return 0!=X.length&&X[1]==De.crypto.Util.hashString(A,X[0])},Gt.prototype.verifyWithMessageHash=function(A,k){if(k.length!=Math.ceil(this.n.bitLength()/4))return!1;var L=Tt(k,16);if(L.bitLength()>this.n.bitLength())return 0;var X=fo(this.doPublic(L).toString(16).replace(/^1f+00/,""));return 0!=X.length&&X[1]==A},Gt.prototype.verifyPSS=function(A,k,L,X){var Pe,ie=(Pe=Ar(A),De.crypto.Util.hashHex(Pe,L));return void 0===X&&(X=-1),this.verifyWithMessageHashPSS(ie,k,L,X)},Gt.prototype.verifyWithMessageHashPSS=function(A,k,L,X){if(k.length!=Math.ceil(this.n.bitLength()/4))return!1;var ie,he=new ge(k,16),Pe=function(Ke){return De.crypto.Util.hashHex(Ke,L)},Ne=wn(A),Me=Ne.length,Ze=this.n.bitLength()-1,Ue=Math.ceil(Ze/8);if(-1===X||void 0===X)X=Me;else if(-2===X)X=Ue-Me-2;else if(X<-2)throw new Error("invalid salt length");if(Ue<Me+X+2)throw new Error("data too long");var Ve=this.doPublic(he).toByteArray();for(ie=0;ie<Ve.length;ie+=1)Ve[ie]&=255;for(;Ve.length<Ue;)Ve.unshift(0);if(188!==Ve[Ue-1])throw new Error("encoded message does not end in 0xbc");var We=(Ve=String.fromCharCode.apply(String,Ve)).substr(0,Ue-Me-1),nt=Ve.substr(We.length,Me),d=65280>>8*Ue-Ze&255;if(We.charCodeAt(0)&d)throw new Error("bits beyond keysize not zero");var gt=fi(nt,We.length,Pe),Et=[];for(ie=0;ie<We.length;ie+=1)Et[ie]=We.charCodeAt(ie)^gt.charCodeAt(ie);Et[0]&=~d;var Ee=Ue-Me-X-2;for(ie=0;ie<Ee;ie+=1)if(0!==Et[ie])throw new Error("leftmost octets not zero");if(1!==Et[Ee])throw new Error("0x01 marker not found");return nt===wn(Pe(Ar("\0\0\0\0\0\0\0\0"+Ne+String.fromCharCode.apply(String,Et.slice(-X)))))},Gt.SALT_LEN_HLEN=-1,Gt.SALT_LEN_MAX=-2,Gt.SALT_LEN_RECOVER=-2,mr.hex2dn=function(A,k){if(void 0===k&&(k=0),"30"!==A.substr(k,2))throw new Error("malformed DN");for(var L=new Array,X=Qt.getChildIdx(A,k),ie=0;ie<X.length;ie++)L.push(mr.hex2rdn(A,X[ie]));return"/"+(L=L.map(function(he){return he.replace("/","\\/")})).join("/")},mr.hex2rdn=function(A,k){if(void 0===k&&(k=0),"31"!==A.substr(k,2))throw new Error("malformed RDN");for(var L=new Array,X=Qt.getChildIdx(A,k),ie=0;ie<X.length;ie++)L.push(mr.hex2attrTypeValue(A,X[ie]));return(L=L.map(function(he){return he.replace("+","\\+")})).join("+")},mr.hex2attrTypeValue=function(A,k){var L=Qt,X=L.getV;if(void 0===k&&(k=0),"30"!==A.substr(k,2))throw new Error("malformed attribute type and value");var ie=L.getChildIdx(A,k);2!==ie.length||A.substr(ie[0],2);var he=X(A,ie[0]),Pe=De.asn1.ASN1Util.oidHexToInt(he);return De.asn1.x509.OID.oid2atype(Pe)+"="+wn(X(A,ie[1]))},mr.getPublicKeyFromCertHex=function(A){var k=new mr;return k.readCertHex(A),k.getPublicKey()},mr.getPublicKeyFromCertPEM=function(A){var k=new mr;return k.readCertPEM(A),k.getPublicKey()},mr.getPublicKeyInfoPropOfCertPEM=function(A){var k,L,X=Qt.getVbyList,ie={algparam:null};return(k=new mr).readCertPEM(A),L=k.getPublicKeyHex(),ie.keyhex=X(L,0,[1],"03").substr(2),ie.algoid=X(L,0,[0,0],"06"),"2a8648ce3d0201"===ie.algoid&&(ie.algparam=X(L,0,[0,1],"06")),ie},mr.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"],void 0!==De&&De||(S.KJUR=De={}),void 0!==De.jws&&De.jws||(De.jws={}),De.jws.JWS=function(){var A=De.jws.JWS.isSafeJSONString;this.parseJWS=function(k,L){if(void 0===this.parsedJWS||!L&&void 0===this.parsedJWS.sigvalH){var X=k.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(null==X)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var ie=X[1],he=X[2],Pe=X[3],Ne=ie+"."+he;if(this.parsedJWS={},this.parsedJWS.headB64U=ie,this.parsedJWS.payloadB64U=he,this.parsedJWS.sigvalB64U=Pe,this.parsedJWS.si=Ne,!L){var Me=ln(Pe),Ze=Tt(Me,16);this.parsedJWS.sigvalH=Me,this.parsedJWS.sigvalBI=Ze}var Ue=ar(ie),Ve=ar(he);if(this.parsedJWS.headS=Ue,this.parsedJWS.payloadS=Ve,!A(Ue,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+Ue}}},De.jws.JWS.sign=function(A,k,L,X,ie){var he,Pe,Ne,Ze=De.jws.JWS,Ue=Ze.readSafeJSONString,Ve=Ze.isSafeJSONString,We=De.crypto,nt=We.Mac,d=We.Signature,gt=JSON;if("string"!=typeof k&&"object"!=(void 0===k?"undefined":Z(k)))throw"spHeader must be JSON string or object: "+k;if("object"==(void 0===k?"undefined":Z(k))&&(he=gt.stringify(Pe=k)),"string"==typeof k){if(!Ve(he=k))throw"JWS Head is not safe JSON string: "+he;Pe=Ue(he)}if(Ne=L,"object"==(void 0===L?"undefined":Z(L))&&(Ne=gt.stringify(L)),""!=A&&null!=A||void 0===Pe.alg||(A=Pe.alg),""!=A&&null!=A&&void 0===Pe.alg&&(Pe.alg=A,he=gt.stringify(Pe)),A!==Pe.alg)throw"alg and sHeader.alg doesn't match: "+A+"!="+Pe.alg;var Et=null;if(void 0===Ze.jwsalg2sigalg[A])throw"unsupported alg name: "+A;Et=Ze.jwsalg2sigalg[A];var Ee=Zr(he)+"."+Zr(Ne),Ge="";if("Hmac"==Et.substr(0,4)){if(void 0===X)throw"mac key shall be specified for HS* alg";var Ke=new nt({alg:Et,prov:"cryptojs",pass:X});Ke.updateString(Ee),Ge=Ke.doFinal()}else if(-1!=Et.indexOf("withECDSA")){(_t=new d({alg:Et})).init(X,ie),_t.updateString(Ee);var Xe=_t.sign();Ge=De.crypto.ECDSA.asn1SigToConcatSig(Xe)}else{var _t;"none"!=Et&&((_t=new d({alg:Et})).init(X,ie),_t.updateString(Ee),Ge=_t.sign())}return Ee+"."+Cn(Ge)},De.jws.JWS.verify=function(A,k,L){var X,he=De.jws.JWS,Pe=he.readSafeJSONString,Ne=De.crypto,Me=Ne.ECDSA,Ze=Ne.Mac,Ue=Ne.Signature;void 0!==Z(Gt)&&(X=Gt);var Ve=A.split(".");if(3!==Ve.length)return!1;var Et,We=Ve[0]+"."+Ve[1],nt=ln(Ve[2]),d=Pe(ar(Ve[0])),gt=null;if(void 0===d.alg)throw"algorithm not specified in header";if(Et=(gt=d.alg).substr(0,2),null!=L&&"[object Array]"===Object.prototype.toString.call(L)&&L.length>0&&-1==(":"+L.join(":")+":").indexOf(":"+gt+":"))throw"algorithm '"+gt+"' not accepted in the list";if("none"!=gt&&null===k)throw"key shall be specified to verify.";if("string"==typeof k&&-1!=k.indexOf("-----BEGIN ")&&(k=hr.getKey(k)),!("RS"!=Et&&"PS"!=Et||k instanceof X))throw"key shall be a RSAKey obj for RS* and PS* algs";if("ES"==Et&&!(k instanceof Me))throw"key shall be a ECDSA obj for ES* algs";var Ee=null;if(void 0===he.jwsalg2sigalg[d.alg])throw"unsupported alg name: "+gt;if("none"==(Ee=he.jwsalg2sigalg[gt]))throw"not supported";if("Hmac"==Ee.substr(0,4)){if(void 0===k)throw"hexadecimal key shall be specified for HMAC";var Ge=new Ze({alg:Ee,pass:k});return Ge.updateString(We),nt==Ge.doFinal()}if(-1!=Ee.indexOf("withECDSA")){var Ke,Xe=null;try{Xe=Me.concatSigToASN1Sig(nt)}catch{return!1}return(Ke=new Ue({alg:Ee})).init(k),Ke.updateString(We),Ke.verify(Xe)}return(Ke=new Ue({alg:Ee})).init(k),Ke.updateString(We),Ke.verify(nt)},De.jws.JWS.parse=function(A){var L,X,ie=A.split("."),he={};if(2!=ie.length&&3!=ie.length)throw"malformed sJWS: wrong number of '.' splitted elements";return L=ie[1],3==ie.length&&(X=ie[2]),he.headerObj=De.jws.JWS.readSafeJSONString(ar(ie[0])),he.payloadObj=De.jws.JWS.readSafeJSONString(ar(L)),he.headerPP=JSON.stringify(he.headerObj,null,"  "),he.payloadPP=null==he.payloadObj?ar(L):JSON.stringify(he.payloadObj,null,"  "),void 0!==X&&(he.sigHex=ln(X)),he},De.jws.JWS.verifyJWT=function(A,k,L){var X=De.jws,ie=X.JWS,he=ie.readSafeJSONString,Pe=ie.inArray,Ne=ie.includedArray,Me=A.split("."),Ze=Me[0],Ue=Me[1],Ve=(ln(Me[2]),he(ar(Ze))),We=he(ar(Ue));if(void 0===Ve.alg)return!1;if(void 0===L.alg)throw"acceptField.alg shall be specified";if(!Pe(Ve.alg,L.alg)||void 0!==We.iss&&"object"===Z(L.iss)&&!Pe(We.iss,L.iss)||void 0!==We.sub&&"object"===Z(L.sub)&&!Pe(We.sub,L.sub))return!1;if(void 0!==We.aud&&"object"===Z(L.aud))if("string"==typeof We.aud){if(!Pe(We.aud,L.aud))return!1}else if("object"==Z(We.aud)&&!Ne(We.aud,L.aud))return!1;var nt=X.IntDate.getNow();return void 0!==L.verifyAt&&"number"==typeof L.verifyAt&&(nt=L.verifyAt),void 0!==L.gracePeriod&&"number"==typeof L.gracePeriod||(L.gracePeriod=0),!(void 0!==We.exp&&"number"==typeof We.exp&&We.exp+L.gracePeriod<nt||void 0!==We.nbf&&"number"==typeof We.nbf&&nt<We.nbf-L.gracePeriod||void 0!==We.iat&&"number"==typeof We.iat&&nt<We.iat-L.gracePeriod||void 0!==We.jti&&void 0!==L.jti&&We.jti!==L.jti||!ie.verify(A,k,L.alg))},De.jws.JWS.includedArray=function(A,k){var L=De.jws.JWS.inArray;if(null===A||"object"!==(void 0===A?"undefined":Z(A))||"number"!=typeof A.length)return!1;for(var X=0;X<A.length;X++)if(!L(A[X],k))return!1;return!0},De.jws.JWS.inArray=function(A,k){if(null===k||"object"!==(void 0===k?"undefined":Z(k))||"number"!=typeof k.length)return!1;for(var L=0;L<k.length;L++)if(k[L]==A)return!0;return!1},De.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},De.jws.JWS.isSafeJSONString=function(A,k,L){var X=null;try{return"object"!=(void 0===(X=zn(A))?"undefined":Z(X))||X.constructor===Array?0:(k&&(k[L]=X),1)}catch{return 0}},De.jws.JWS.readSafeJSONString=function(A){var k=null;try{return"object"!=(void 0===(k=zn(A))?"undefined":Z(k))||k.constructor===Array?null:k}catch{return null}},De.jws.JWS.getEncodedSignatureValueFromJWS=function(A){var k=A.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(null==k)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return k[1]},De.jws.JWS.getJWKthumbprint=function(A){if("RSA"!==A.kty&&"EC"!==A.kty&&"oct"!==A.kty)throw"unsupported algorithm for JWK Thumprint";var k="{";if("RSA"===A.kty){if("string"!=typeof A.n||"string"!=typeof A.e)throw"wrong n and e value for RSA key";k+='"e":"'+A.e+'",',k+='"kty":"'+A.kty+'",',k+='"n":"'+A.n+'"}'}else if("EC"===A.kty){if("string"!=typeof A.crv||"string"!=typeof A.x||"string"!=typeof A.y)throw"wrong crv, x and y value for EC key";k+='"crv":"'+A.crv+'",',k+='"kty":"'+A.kty+'",',k+='"x":"'+A.x+'",',k+='"y":"'+A.y+'"}'}else if("oct"===A.kty){if("string"!=typeof A.k)throw"wrong k value for oct(symmetric) key";k+='"kty":"'+A.kty+'",',k+='"k":"'+A.k+'"}'}var L=Ar(k);return Cn(De.crypto.Util.hashHex(L,"sha256"))},De.jws.IntDate={},De.jws.IntDate.get=function(A){var k=De.jws.IntDate,L=k.getNow,X=k.getZulu;if("now"==A)return L();if("now + 1hour"==A)return L()+3600;if("now + 1day"==A)return L()+86400;if("now + 1month"==A)return L()+2592e3;if("now + 1year"==A)return L()+31536e3;if(A.match(/Z$/))return X(A);if(A.match(/^[0-9]+$/))return parseInt(A);throw"unsupported format: "+A},De.jws.IntDate.getZulu=function(A){return Gi(A)},De.jws.IntDate.getNow=function(){return~~(new Date/1e3)},De.jws.IntDate.intDate2UTCString=function(A){return new Date(1e3*A).toUTCString()},De.jws.IntDate.intDate2Zulu=function(A){var k=new Date(1e3*A);return("0000"+k.getUTCFullYear()).slice(-4)+("00"+(k.getUTCMonth()+1)).slice(-2)+("00"+k.getUTCDate()).slice(-2)+("00"+k.getUTCHours()).slice(-2)+("00"+k.getUTCMinutes()).slice(-2)+("00"+k.getUTCSeconds()).slice(-2)+"Z"},S.SecureRandom=ot,S.rng_seed_time=ye,S.BigInteger=ge,S.RSAKey=Gt,S.EDSA=De.crypto.EDSA,S.DSA=De.crypto.DSA,S.Signature=De.crypto.Signature,S.MessageDigest=De.crypto.MessageDigest,S.Mac=De.crypto.Mac,S.Cipher=De.crypto.Cipher,S.KEYUTIL=hr,S.ASN1HEX=Qt,S.X509=mr,S.CryptoJS=z,S.b64tohex=ve,S.b64toBA=xe,S.stoBA=Co,S.BAtos=Ai,S.BAtohex=yt,S.stohex=Pt,S.stob64=function(k){return se(Pt(k))},S.stob64u=function(k){return Pn(se(Pt(k)))},S.b64utos=function(k){return Ai(xe(Gn(k)))},S.b64tob64u=Pn,S.b64utob64=Gn,S.hex2b64=se,S.hextob64u=Cn,S.b64utohex=ln,S.utf8tob64u=Zr,S.b64utoutf8=ar,S.utf8tob64=function(k){return se(jo(Di(k)))},S.b64toutf8=function(k){return decodeURIComponent(Vi(ve(k)))},S.utf8tohex=Fr,S.hextoutf8=lr,S.hextorstr=wn,S.rstrtohex=Ar,S.hextob64=Qn,S.hextob64nl=Ni,S.b64nltohex=Xr,S.hextopem=jr,S.pemtohex=di,S.hextoArrayBuffer=function(k){if(k.length%2!=0)throw"input is not even length";if(null==k.match(/^[0-9A-Fa-f]+$/))throw"input is not hexadecimal";for(var L=new ArrayBuffer(k.length/2),X=new DataView(L),ie=0;ie<k.length/2;ie++)X.setUint8(ie,parseInt(k.substr(2*ie,2),16));return L},S.ArrayBuffertohex=function(k){for(var L="",X=new DataView(k),ie=0;ie<k.byteLength;ie++)L+=("00"+X.getUint8(ie).toString(16)).slice(-2);return L},S.zulutomsec=Lo,S.zulutosec=Gi,S.zulutodate=function(k){return new Date(Lo(k))},S.datetozulu=function(k,L,X){var ie,he=k.getUTCFullYear();if(L){if(he<1950||2049<he)throw"not proper year for UTCTime: "+he;ie=(""+he).slice(-2)}else ie=("000"+he).slice(-4);if(ie+=("0"+(k.getUTCMonth()+1)).slice(-2),ie+=("0"+k.getUTCDate()).slice(-2),ie+=("0"+k.getUTCHours()).slice(-2),ie+=("0"+k.getUTCMinutes()).slice(-2),ie+=("0"+k.getUTCSeconds()).slice(-2),X){var Pe=k.getUTCMilliseconds();0!==Pe&&(ie+="."+(Pe=(Pe=("00"+Pe).slice(-3)).replace(/0+$/g,"")))}return ie+"Z"},S.uricmptohex=jo,S.hextouricmp=Vi,S.ipv6tohex=Ri,S.hextoipv6=Hi,S.hextoip=wo,S.iptohex=function(k){var L="malformed IP address";if(!(k=k.toLowerCase(k)).match(/^[0-9.]+$/)){if(k.match(/^[0-9a-f:]+$/)&&-1!==k.indexOf(":"))return Ri(k);throw L}var X=k.split(".");if(4!==X.length)throw L;var ie="";try{for(var he=0;he<4;he++)ie+=("0"+parseInt(X[he]).toString(16)).slice(-2);return ie}catch{throw L}},S.encodeURIComponentAll=Di,S.newline_toUnix=function(k){return k.replace(/\r\n/gm,"\n")},S.newline_toDos=function(k){return(k=k.replace(/\r\n/gm,"\n")).replace(/\n/gm,"\r\n")},S.hextoposhex=gi,S.intarystrtohex=function(k){k=(k=(k=k.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return k.split(/,/).map(function(L,X,ie){var he=parseInt(L);if(he<0||255<he)throw"integer not in range 0-255";return("00"+he.toString(16)).slice(-2)}).join("")}catch(L){throw"malformed integer array string: "+L}},S.strdiffidx=function(k,L){var X=k.length;k.length>L.length&&(X=L.length);for(var ie=0;ie<X;ie++)if(k.charCodeAt(ie)!=L.charCodeAt(ie))return ie;return k.length!=L.length?X:-1},S.KJUR=De,S.crypto=De.crypto,S.asn1=De.asn1,S.jws=De.jws,S.lang=De.lang}).call(this,M(28).Buffer)},function(N,S,M){"use strict";(function(q){var Z=M(30),r=M(31),_=M(32);function p(){return y.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function g(de,Y){if(p()<Y)throw new RangeError("Invalid typed array length");return y.TYPED_ARRAY_SUPPORT?(de=new Uint8Array(Y)).__proto__=y.prototype:(null===de&&(de=new y(Y)),de.length=Y),de}function y(de,Y,oe){if(!(y.TYPED_ARRAY_SUPPORT||this instanceof y))return new y(de,Y,oe);if("number"==typeof de){if("string"==typeof Y)throw new Error("If encoding is specified then the first argument must be a string");return $(this,de)}return E(this,de,Y,oe)}function E(de,Y,oe,ke){if("number"==typeof Y)throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&Y instanceof ArrayBuffer?function(fe,ye,ut,be){if(ut<0||ye.byteLength<ut)throw new RangeError("'offset' is out of bounds");if(ye.byteLength<ut+(be||0))throw new RangeError("'length' is out of bounds");return ye=void 0===ut&&void 0===be?new Uint8Array(ye):void 0===be?new Uint8Array(ye,ut):new Uint8Array(ye,ut,be),y.TYPED_ARRAY_SUPPORT?(fe=ye).__proto__=y.prototype:fe=v(fe,ye),fe}(de,Y,oe,ke):"string"==typeof Y?function(fe,ye,ut){if("string"==typeof ut&&""!==ut||(ut="utf8"),!y.isEncoding(ut))throw new TypeError('"encoding" must be a valid string encoding');var be=0|V(ye,ut),le=(fe=g(fe,be)).write(ye,ut);return le!==be&&(fe=fe.slice(0,le)),fe}(de,Y,oe):function(fe,ye){if(y.isBuffer(ye)){var ut=0|b(ye.length);return 0===(fe=g(fe,ut)).length||ye.copy(fe,0,0,ut),fe}if(ye){if(typeof ArrayBuffer<"u"&&ye.buffer instanceof ArrayBuffer||"length"in ye)return"number"!=typeof ye.length||(le=ye.length)!=le?g(fe,0):v(fe,ye);if("Buffer"===ye.type&&_(ye.data))return v(fe,ye.data)}var le;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(de,Y)}function O(de){if("number"!=typeof de)throw new TypeError('"size" argument must be a number');if(de<0)throw new RangeError('"size" argument must not be negative')}function $(de,Y){if(O(Y),de=g(de,Y<0?0:0|b(Y)),!y.TYPED_ARRAY_SUPPORT)for(var oe=0;oe<Y;++oe)de[oe]=0;return de}function v(de,Y){var oe=Y.length<0?0:0|b(Y.length);de=g(de,oe);for(var ke=0;ke<oe;ke+=1)de[ke]=255&Y[ke];return de}function b(de){if(de>=p())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+p().toString(16)+" bytes");return 0|de}function V(de,Y){if(y.isBuffer(de))return de.length;if(typeof ArrayBuffer<"u"&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(de)||de instanceof ArrayBuffer))return de.byteLength;"string"!=typeof de&&(de=""+de);var oe=de.length;if(0===oe)return 0;for(var ke=!1;;)switch(Y){case"ascii":case"latin1":case"binary":return oe;case"utf8":case"utf-8":case void 0:return et(de).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*oe;case"hex":return oe>>>1;case"base64":return $e(de).length;default:if(ke)return et(de).length;Y=(""+Y).toLowerCase(),ke=!0}}function G(de,Y,oe){var ke=!1;if((void 0===Y||Y<0)&&(Y=0),Y>this.length||((void 0===oe||oe>this.length)&&(oe=this.length),oe<=0)||(oe>>>=0)<=(Y>>>=0))return"";for(de||(de="utf8");;)switch(de){case"hex":return R(this,Y,oe);case"utf8":case"utf-8":return D(this,Y,oe);case"ascii":return I(this,Y,oe);case"latin1":case"binary":return j(this,Y,oe);case"base64":return x(this,Y,oe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Q(this,Y,oe);default:if(ke)throw new TypeError("Unknown encoding: "+de);de=(de+"").toLowerCase(),ke=!0}}function H(de,Y,oe){var ke=de[Y];de[Y]=de[oe],de[oe]=ke}function te(de,Y,oe,ke,Be){if(0===de.length)return-1;if("string"==typeof oe?(ke=oe,oe=0):oe>2147483647?oe=2147483647:oe<-2147483648&&(oe=-2147483648),oe=+oe,isNaN(oe)&&(oe=Be?0:de.length-1),oe<0&&(oe=de.length+oe),oe>=de.length){if(Be)return-1;oe=de.length-1}else if(oe<0){if(!Be)return-1;oe=0}if("string"==typeof Y&&(Y=y.from(Y,ke)),y.isBuffer(Y))return 0===Y.length?-1:z(de,Y,oe,ke,Be);if("number"==typeof Y)return Y&=255,y.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?Be?Uint8Array.prototype.indexOf.call(de,Y,oe):Uint8Array.prototype.lastIndexOf.call(de,Y,oe):z(de,[Y],oe,ke,Be);throw new TypeError("val must be string, number or Buffer")}function z(de,Y,oe,ke,Be){var fe,ye=1,ut=de.length,be=Y.length;if(void 0!==ke&&("ucs2"===(ke=String(ke).toLowerCase())||"ucs-2"===ke||"utf16le"===ke||"utf-16le"===ke)){if(de.length<2||Y.length<2)return-1;ye=2,ut/=2,be/=2,oe/=2}function le(Tt,Nt){return 1===ye?Tt[Nt]:Tt.readUInt16BE(Nt*ye)}if(Be){var ce=-1;for(fe=oe;fe<ut;fe++)if(le(de,fe)===le(Y,-1===ce?0:fe-ce)){if(-1===ce&&(ce=fe),fe-ce+1===be)return ce*ye}else-1!==ce&&(fe-=fe-ce),ce=-1}else for(oe+be>ut&&(oe=ut-be),fe=oe;fe>=0;fe--){for(var Ie=!0,ot=0;ot<be;ot++)if(le(de,fe+ot)!==le(Y,ot)){Ie=!1;break}if(Ie)return fe}return-1}function W(de,Y,oe,ke){oe=Number(oe)||0;var Be=de.length-oe;ke?(ke=Number(ke))>Be&&(ke=Be):ke=Be;var fe=Y.length;if(fe%2!=0)throw new TypeError("Invalid hex string");ke>fe/2&&(ke=fe/2);for(var ye=0;ye<ke;++ye){var ut=parseInt(Y.substr(2*ye,2),16);if(isNaN(ut))return ye;de[oe+ye]=ut}return ye}function J(de,Y,oe,ke){return it(et(Y,de.length-oe),de,oe,ke)}function se(de,Y,oe,ke){return it(function(fe){for(var ye=[],ut=0;ut<fe.length;++ut)ye.push(255&fe.charCodeAt(ut));return ye}(Y),de,oe,ke)}function ve(de,Y,oe,ke){return se(de,Y,oe,ke)}function xe(de,Y,oe,ke){return it($e(Y),de,oe,ke)}function ge(de,Y,oe,ke){return it(function(fe,ye){for(var ut,be,ce=[],Ie=0;Ie<fe.length&&!((ye-=2)<0);++Ie)be=(ut=fe.charCodeAt(Ie))>>8,ce.push(ut%256),ce.push(be);return ce}(Y,de.length-oe),de,oe,ke)}function x(de,Y,oe){return Z.fromByteArray(0===Y&&oe===de.length?de:de.slice(Y,oe))}function D(de,Y,oe){oe=Math.min(de.length,oe);for(var ke=[],Be=Y;Be<oe;){var fe,ye,ut,be,le=de[Be],ce=null,Ie=le>239?4:le>223?3:le>191?2:1;if(Be+Ie<=oe)switch(Ie){case 1:le<128&&(ce=le);break;case 2:128==(192&(fe=de[Be+1]))&&(be=(31&le)<<6|63&fe)>127&&(ce=be);break;case 3:ye=de[Be+2],128==(192&(fe=de[Be+1]))&&128==(192&ye)&&(be=(15&le)<<12|(63&fe)<<6|63&ye)>2047&&(be<55296||be>57343)&&(ce=be);break;case 4:ye=de[Be+2],ut=de[Be+3],128==(192&(fe=de[Be+1]))&&128==(192&ye)&&128==(192&ut)&&(be=(15&le)<<18|(63&fe)<<12|(63&ye)<<6|63&ut)>65535&&be<1114112&&(ce=be)}null===ce?(ce=65533,Ie=1):ce>65535&&(ke.push((ce-=65536)>>>10&1023|55296),ce=56320|1023&ce),ke.push(ce),Be+=Ie}return function(Tt){var Nt=Tt.length;if(Nt<=P)return String.fromCharCode.apply(String,Tt);for(var Gt="",un=0;un<Nt;)Gt+=String.fromCharCode.apply(String,Tt.slice(un,un+=P));return Gt}(ke)}S.Buffer=y,S.SlowBuffer=function(Y){return+Y!=Y&&(Y=0),y.alloc(+Y)},S.INSPECT_MAX_BYTES=50,y.TYPED_ARRAY_SUPPORT=void 0!==q.TYPED_ARRAY_SUPPORT?q.TYPED_ARRAY_SUPPORT:function(){try{var Y=new Uint8Array(1);return Y.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===Y.foo()&&"function"==typeof Y.subarray&&0===Y.subarray(1,1).byteLength}catch{return!1}}(),S.kMaxLength=p(),y.poolSize=8192,y._augment=function(de){return de.__proto__=y.prototype,de},y.from=function(de,Y,oe){return E(null,de,Y,oe)},y.TYPED_ARRAY_SUPPORT&&(y.prototype.__proto__=Uint8Array.prototype,y.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&y[Symbol.species]===y&&Object.defineProperty(y,Symbol.species,{value:null,configurable:!0})),y.alloc=function(de,Y,oe){return null,ye=Y,ut=oe,O(fe=de),fe<=0?g(null,fe):void 0!==ye?"string"==typeof ut?g(null,fe).fill(ye,ut):g(null,fe).fill(ye):g(null,fe);var fe,ye,ut},y.allocUnsafe=function(de){return $(null,de)},y.allocUnsafeSlow=function(de){return $(null,de)},y.isBuffer=function(Y){return!(null==Y||!Y._isBuffer)},y.compare=function(Y,oe){if(!y.isBuffer(Y)||!y.isBuffer(oe))throw new TypeError("Arguments must be Buffers");if(Y===oe)return 0;for(var ke=Y.length,Be=oe.length,fe=0,ye=Math.min(ke,Be);fe<ye;++fe)if(Y[fe]!==oe[fe]){ke=Y[fe],Be=oe[fe];break}return ke<Be?-1:Be<ke?1:0},y.isEncoding=function(Y){switch(String(Y).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},y.concat=function(Y,oe){if(!_(Y))throw new TypeError('"list" argument must be an Array of Buffers');if(0===Y.length)return y.alloc(0);var ke;if(void 0===oe)for(oe=0,ke=0;ke<Y.length;++ke)oe+=Y[ke].length;var Be=y.allocUnsafe(oe),fe=0;for(ke=0;ke<Y.length;++ke){var ye=Y[ke];if(!y.isBuffer(ye))throw new TypeError('"list" argument must be an Array of Buffers');ye.copy(Be,fe),fe+=ye.length}return Be},y.byteLength=V,y.prototype._isBuffer=!0,y.prototype.swap16=function(){var Y=this.length;if(Y%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var oe=0;oe<Y;oe+=2)H(this,oe,oe+1);return this},y.prototype.swap32=function(){var Y=this.length;if(Y%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var oe=0;oe<Y;oe+=4)H(this,oe,oe+3),H(this,oe+1,oe+2);return this},y.prototype.swap64=function(){var Y=this.length;if(Y%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var oe=0;oe<Y;oe+=8)H(this,oe,oe+7),H(this,oe+1,oe+6),H(this,oe+2,oe+5),H(this,oe+3,oe+4);return this},y.prototype.toString=function(){var Y=0|this.length;return 0===Y?"":0===arguments.length?D(this,0,Y):G.apply(this,arguments)},y.prototype.equals=function(Y){if(!y.isBuffer(Y))throw new TypeError("Argument must be a Buffer");return this===Y||0===y.compare(this,Y)},y.prototype.inspect=function(){var Y="",oe=S.INSPECT_MAX_BYTES;return this.length>0&&(Y=this.toString("hex",0,oe).match(/.{2}/g).join(" "),this.length>oe&&(Y+=" ... ")),"<Buffer "+Y+">"},y.prototype.compare=function(Y,oe,ke,Be,fe){if(!y.isBuffer(Y))throw new TypeError("Argument must be a Buffer");if(void 0===oe&&(oe=0),void 0===ke&&(ke=Y?Y.length:0),void 0===Be&&(Be=0),void 0===fe&&(fe=this.length),oe<0||ke>Y.length||Be<0||fe>this.length)throw new RangeError("out of range index");if(Be>=fe&&oe>=ke)return 0;if(Be>=fe)return-1;if(oe>=ke)return 1;if(this===Y)return 0;for(var ye=(fe>>>=0)-(Be>>>=0),ut=(ke>>>=0)-(oe>>>=0),be=Math.min(ye,ut),le=this.slice(Be,fe),ce=Y.slice(oe,ke),Ie=0;Ie<be;++Ie)if(le[Ie]!==ce[Ie]){ye=le[Ie],ut=ce[Ie];break}return ye<ut?-1:ut<ye?1:0},y.prototype.includes=function(Y,oe,ke){return-1!==this.indexOf(Y,oe,ke)},y.prototype.indexOf=function(Y,oe,ke){return te(this,Y,oe,ke,!0)},y.prototype.lastIndexOf=function(Y,oe,ke){return te(this,Y,oe,ke,!1)},y.prototype.write=function(Y,oe,ke,Be){if(void 0===oe)Be="utf8",ke=this.length,oe=0;else if(void 0===ke&&"string"==typeof oe)Be=oe,ke=this.length,oe=0;else{if(!isFinite(oe))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");oe|=0,isFinite(ke)?(ke|=0,void 0===Be&&(Be="utf8")):(Be=ke,ke=void 0)}var fe=this.length-oe;if((void 0===ke||ke>fe)&&(ke=fe),Y.length>0&&(ke<0||oe<0)||oe>this.length)throw new RangeError("Attempt to write outside buffer bounds");Be||(Be="utf8");for(var ye=!1;;)switch(Be){case"hex":return W(this,Y,oe,ke);case"utf8":case"utf-8":return J(this,Y,oe,ke);case"ascii":return se(this,Y,oe,ke);case"latin1":case"binary":return ve(this,Y,oe,ke);case"base64":return xe(this,Y,oe,ke);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ge(this,Y,oe,ke);default:if(ye)throw new TypeError("Unknown encoding: "+Be);Be=(""+Be).toLowerCase(),ye=!0}},y.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var P=4096;function I(de,Y,oe){var ke="";oe=Math.min(de.length,oe);for(var Be=Y;Be<oe;++Be)ke+=String.fromCharCode(127&de[Be]);return ke}function j(de,Y,oe){var ke="";oe=Math.min(de.length,oe);for(var Be=Y;Be<oe;++Be)ke+=String.fromCharCode(de[Be]);return ke}function R(de,Y,oe){var ke=de.length;(!Y||Y<0)&&(Y=0),(!oe||oe<0||oe>ke)&&(oe=ke);for(var Be="",fe=Y;fe<oe;++fe)Be+=vt(de[fe]);return Be}function Q(de,Y,oe){for(var ke=de.slice(Y,oe),Be="",fe=0;fe<ke.length;fe+=2)Be+=String.fromCharCode(ke[fe]+256*ke[fe+1]);return Be}function ee(de,Y,oe){if(de%1!=0||de<0)throw new RangeError("offset is not uint");if(de+Y>oe)throw new RangeError("Trying to access beyond buffer length")}function Re(de,Y,oe,ke,Be,fe){if(!y.isBuffer(de))throw new TypeError('"buffer" argument must be a Buffer instance');if(Y>Be||Y<fe)throw new RangeError('"value" argument is out of bounds');if(oe+ke>de.length)throw new RangeError("Index out of range")}function ne(de,Y,oe,ke){Y<0&&(Y=65535+Y+1);for(var Be=0,fe=Math.min(de.length-oe,2);Be<fe;++Be)de[oe+Be]=(Y&255<<8*(ke?Be:1-Be))>>>8*(ke?Be:1-Be)}function Fe(de,Y,oe,ke){Y<0&&(Y=4294967295+Y+1);for(var Be=0,fe=Math.min(de.length-oe,4);Be<fe;++Be)de[oe+Be]=Y>>>8*(ke?Be:3-Be)&255}function rt(de,Y,oe,ke,Be,fe){if(oe+ke>de.length)throw new RangeError("Index out of range");if(oe<0)throw new RangeError("Index out of range")}function Te(de,Y,oe,ke,Be){return Be||rt(de,0,oe,4),r.write(de,Y,oe,ke,23,4),oe+4}function tt(de,Y,oe,ke,Be){return Be||rt(de,0,oe,8),r.write(de,Y,oe,ke,52,8),oe+8}y.prototype.slice=function(Y,oe){var ke,Be=this.length;if((Y=~~Y)<0?(Y+=Be)<0&&(Y=0):Y>Be&&(Y=Be),(oe=void 0===oe?Be:~~oe)<0?(oe+=Be)<0&&(oe=0):oe>Be&&(oe=Be),oe<Y&&(oe=Y),y.TYPED_ARRAY_SUPPORT)(ke=this.subarray(Y,oe)).__proto__=y.prototype;else{var fe=oe-Y;ke=new y(fe,void 0);for(var ye=0;ye<fe;++ye)ke[ye]=this[ye+Y]}return ke},y.prototype.readUIntLE=function(Y,oe,ke){Y|=0,oe|=0,ke||ee(Y,oe,this.length);for(var Be=this[Y],fe=1,ye=0;++ye<oe&&(fe*=256);)Be+=this[Y+ye]*fe;return Be},y.prototype.readUIntBE=function(Y,oe,ke){Y|=0,oe|=0,ke||ee(Y,oe,this.length);for(var Be=this[Y+--oe],fe=1;oe>0&&(fe*=256);)Be+=this[Y+--oe]*fe;return Be},y.prototype.readUInt8=function(Y,oe){return oe||ee(Y,1,this.length),this[Y]},y.prototype.readUInt16LE=function(Y,oe){return oe||ee(Y,2,this.length),this[Y]|this[Y+1]<<8},y.prototype.readUInt16BE=function(Y,oe){return oe||ee(Y,2,this.length),this[Y]<<8|this[Y+1]},y.prototype.readUInt32LE=function(Y,oe){return oe||ee(Y,4,this.length),(this[Y]|this[Y+1]<<8|this[Y+2]<<16)+16777216*this[Y+3]},y.prototype.readUInt32BE=function(Y,oe){return oe||ee(Y,4,this.length),16777216*this[Y]+(this[Y+1]<<16|this[Y+2]<<8|this[Y+3])},y.prototype.readIntLE=function(Y,oe,ke){Y|=0,oe|=0,ke||ee(Y,oe,this.length);for(var Be=this[Y],fe=1,ye=0;++ye<oe&&(fe*=256);)Be+=this[Y+ye]*fe;return Be>=(fe*=128)&&(Be-=Math.pow(2,8*oe)),Be},y.prototype.readIntBE=function(Y,oe,ke){Y|=0,oe|=0,ke||ee(Y,oe,this.length);for(var Be=oe,fe=1,ye=this[Y+--Be];Be>0&&(fe*=256);)ye+=this[Y+--Be]*fe;return ye>=(fe*=128)&&(ye-=Math.pow(2,8*oe)),ye},y.prototype.readInt8=function(Y,oe){return oe||ee(Y,1,this.length),128&this[Y]?-1*(255-this[Y]+1):this[Y]},y.prototype.readInt16LE=function(Y,oe){oe||ee(Y,2,this.length);var ke=this[Y]|this[Y+1]<<8;return 32768&ke?4294901760|ke:ke},y.prototype.readInt16BE=function(Y,oe){oe||ee(Y,2,this.length);var ke=this[Y+1]|this[Y]<<8;return 32768&ke?4294901760|ke:ke},y.prototype.readInt32LE=function(Y,oe){return oe||ee(Y,4,this.length),this[Y]|this[Y+1]<<8|this[Y+2]<<16|this[Y+3]<<24},y.prototype.readInt32BE=function(Y,oe){return oe||ee(Y,4,this.length),this[Y]<<24|this[Y+1]<<16|this[Y+2]<<8|this[Y+3]},y.prototype.readFloatLE=function(Y,oe){return oe||ee(Y,4,this.length),r.read(this,Y,!0,23,4)},y.prototype.readFloatBE=function(Y,oe){return oe||ee(Y,4,this.length),r.read(this,Y,!1,23,4)},y.prototype.readDoubleLE=function(Y,oe){return oe||ee(Y,8,this.length),r.read(this,Y,!0,52,8)},y.prototype.readDoubleBE=function(Y,oe){return oe||ee(Y,8,this.length),r.read(this,Y,!1,52,8)},y.prototype.writeUIntLE=function(Y,oe,ke,Be){Y=+Y,oe|=0,ke|=0,Be||Re(this,Y,oe,ke,Math.pow(2,8*ke)-1,0);var fe=1,ye=0;for(this[oe]=255&Y;++ye<ke&&(fe*=256);)this[oe+ye]=Y/fe&255;return oe+ke},y.prototype.writeUIntBE=function(Y,oe,ke,Be){Y=+Y,oe|=0,ke|=0,Be||Re(this,Y,oe,ke,Math.pow(2,8*ke)-1,0);var fe=ke-1,ye=1;for(this[oe+fe]=255&Y;--fe>=0&&(ye*=256);)this[oe+fe]=Y/ye&255;return oe+ke},y.prototype.writeUInt8=function(Y,oe,ke){return Y=+Y,oe|=0,ke||Re(this,Y,oe,1,255,0),y.TYPED_ARRAY_SUPPORT||(Y=Math.floor(Y)),this[oe]=255&Y,oe+1},y.prototype.writeUInt16LE=function(Y,oe,ke){return Y=+Y,oe|=0,ke||Re(this,Y,oe,2,65535,0),y.TYPED_ARRAY_SUPPORT?(this[oe]=255&Y,this[oe+1]=Y>>>8):ne(this,Y,oe,!0),oe+2},y.prototype.writeUInt16BE=function(Y,oe,ke){return Y=+Y,oe|=0,ke||Re(this,Y,oe,2,65535,0),y.TYPED_ARRAY_SUPPORT?(this[oe]=Y>>>8,this[oe+1]=255&Y):ne(this,Y,oe,!1),oe+2},y.prototype.writeUInt32LE=function(Y,oe,ke){return Y=+Y,oe|=0,ke||Re(this,Y,oe,4,4294967295,0),y.TYPED_ARRAY_SUPPORT?(this[oe+3]=Y>>>24,this[oe+2]=Y>>>16,this[oe+1]=Y>>>8,this[oe]=255&Y):Fe(this,Y,oe,!0),oe+4},y.prototype.writeUInt32BE=function(Y,oe,ke){return Y=+Y,oe|=0,ke||Re(this,Y,oe,4,4294967295,0),y.TYPED_ARRAY_SUPPORT?(this[oe]=Y>>>24,this[oe+1]=Y>>>16,this[oe+2]=Y>>>8,this[oe+3]=255&Y):Fe(this,Y,oe,!1),oe+4},y.prototype.writeIntLE=function(Y,oe,ke,Be){if(Y=+Y,oe|=0,!Be){var fe=Math.pow(2,8*ke-1);Re(this,Y,oe,ke,fe-1,-fe)}var ye=0,ut=1,be=0;for(this[oe]=255&Y;++ye<ke&&(ut*=256);)Y<0&&0===be&&0!==this[oe+ye-1]&&(be=1),this[oe+ye]=(Y/ut>>0)-be&255;return oe+ke},y.prototype.writeIntBE=function(Y,oe,ke,Be){if(Y=+Y,oe|=0,!Be){var fe=Math.pow(2,8*ke-1);Re(this,Y,oe,ke,fe-1,-fe)}var ye=ke-1,ut=1,be=0;for(this[oe+ye]=255&Y;--ye>=0&&(ut*=256);)Y<0&&0===be&&0!==this[oe+ye+1]&&(be=1),this[oe+ye]=(Y/ut>>0)-be&255;return oe+ke},y.prototype.writeInt8=function(Y,oe,ke){return Y=+Y,oe|=0,ke||Re(this,Y,oe,1,127,-128),y.TYPED_ARRAY_SUPPORT||(Y=Math.floor(Y)),Y<0&&(Y=255+Y+1),this[oe]=255&Y,oe+1},y.prototype.writeInt16LE=function(Y,oe,ke){return Y=+Y,oe|=0,ke||Re(this,Y,oe,2,32767,-32768),y.TYPED_ARRAY_SUPPORT?(this[oe]=255&Y,this[oe+1]=Y>>>8):ne(this,Y,oe,!0),oe+2},y.prototype.writeInt16BE=function(Y,oe,ke){return Y=+Y,oe|=0,ke||Re(this,Y,oe,2,32767,-32768),y.TYPED_ARRAY_SUPPORT?(this[oe]=Y>>>8,this[oe+1]=255&Y):ne(this,Y,oe,!1),oe+2},y.prototype.writeInt32LE=function(Y,oe,ke){return Y=+Y,oe|=0,ke||Re(this,Y,oe,4,2147483647,-2147483648),y.TYPED_ARRAY_SUPPORT?(this[oe]=255&Y,this[oe+1]=Y>>>8,this[oe+2]=Y>>>16,this[oe+3]=Y>>>24):Fe(this,Y,oe,!0),oe+4},y.prototype.writeInt32BE=function(Y,oe,ke){return Y=+Y,oe|=0,ke||Re(this,Y,oe,4,2147483647,-2147483648),Y<0&&(Y=4294967295+Y+1),y.TYPED_ARRAY_SUPPORT?(this[oe]=Y>>>24,this[oe+1]=Y>>>16,this[oe+2]=Y>>>8,this[oe+3]=255&Y):Fe(this,Y,oe,!1),oe+4},y.prototype.writeFloatLE=function(Y,oe,ke){return Te(this,Y,oe,!0,ke)},y.prototype.writeFloatBE=function(Y,oe,ke){return Te(this,Y,oe,!1,ke)},y.prototype.writeDoubleLE=function(Y,oe,ke){return tt(this,Y,oe,!0,ke)},y.prototype.writeDoubleBE=function(Y,oe,ke){return tt(this,Y,oe,!1,ke)},y.prototype.copy=function(Y,oe,ke,Be){if(ke||(ke=0),Be||0===Be||(Be=this.length),oe>=Y.length&&(oe=Y.length),oe||(oe=0),Be>0&&Be<ke&&(Be=ke),Be===ke||0===Y.length||0===this.length)return 0;if(oe<0)throw new RangeError("targetStart out of bounds");if(ke<0||ke>=this.length)throw new RangeError("sourceStart out of bounds");if(Be<0)throw new RangeError("sourceEnd out of bounds");Be>this.length&&(Be=this.length),Y.length-oe<Be-ke&&(Be=Y.length-oe+ke);var fe,ye=Be-ke;if(this===Y&&ke<oe&&oe<Be)for(fe=ye-1;fe>=0;--fe)Y[fe+oe]=this[fe+ke];else if(ye<1e3||!y.TYPED_ARRAY_SUPPORT)for(fe=0;fe<ye;++fe)Y[fe+oe]=this[fe+ke];else Uint8Array.prototype.set.call(Y,this.subarray(ke,ke+ye),oe);return ye},y.prototype.fill=function(Y,oe,ke,Be){if("string"==typeof Y){if("string"==typeof oe?(Be=oe,oe=0,ke=this.length):"string"==typeof ke&&(Be=ke,ke=this.length),1===Y.length){var fe=Y.charCodeAt(0);fe<256&&(Y=fe)}if(void 0!==Be&&"string"!=typeof Be)throw new TypeError("encoding must be a string");if("string"==typeof Be&&!y.isEncoding(Be))throw new TypeError("Unknown encoding: "+Be)}else"number"==typeof Y&&(Y&=255);if(oe<0||this.length<oe||this.length<ke)throw new RangeError("Out of range index");if(ke<=oe)return this;var ye;if(oe>>>=0,ke=void 0===ke?this.length:ke>>>0,Y||(Y=0),"number"==typeof Y)for(ye=oe;ye<ke;++ye)this[ye]=Y;else{var ut=y.isBuffer(Y)?Y:et(new y(Y,Be).toString()),be=ut.length;for(ye=0;ye<ke-oe;++ye)this[ye+oe]=ut[ye%be]}return this};var Qe=/[^+\/0-9A-Za-z-_]/g;function vt(de){return de<16?"0"+de.toString(16):de.toString(16)}function et(de,Y){var oe;Y=Y||1/0;for(var ke=de.length,Be=null,fe=[],ye=0;ye<ke;++ye){if((oe=de.charCodeAt(ye))>55295&&oe<57344){if(!Be){if(oe>56319){(Y-=3)>-1&&fe.push(239,191,189);continue}if(ye+1===ke){(Y-=3)>-1&&fe.push(239,191,189);continue}Be=oe;continue}if(oe<56320){(Y-=3)>-1&&fe.push(239,191,189),Be=oe;continue}oe=65536+(Be-55296<<10|oe-56320)}else Be&&(Y-=3)>-1&&fe.push(239,191,189);if(Be=null,oe<128){if((Y-=1)<0)break;fe.push(oe)}else if(oe<2048){if((Y-=2)<0)break;fe.push(oe>>6|192,63&oe|128)}else if(oe<65536){if((Y-=3)<0)break;fe.push(oe>>12|224,oe>>6&63|128,63&oe|128)}else{if(!(oe<1114112))throw new Error("Invalid code point");if((Y-=4)<0)break;fe.push(oe>>18|240,oe>>12&63|128,oe>>6&63|128,63&oe|128)}}return fe}function $e(de){return Z.toByteArray(function(oe){if((oe=(Be=oe,Be.trim?Be.trim():Be.replace(/^\s+|\s+$/g,"")).replace(Qe,"")).length<2)return"";for(var Be;oe.length%4!=0;)oe+="=";return oe}(de))}function it(de,Y,oe,ke){for(var Be=0;Be<ke&&!(Be+oe>=Y.length||Be>=de.length);++Be)Y[Be+oe]=de[Be];return Be}}).call(this,M(29))},function(N,S){var M;M=function(){return this}();try{M=M||new Function("return this")()}catch{"object"==typeof window&&(M=window)}N.exports=M},function(N,S,M){"use strict";S.byteLength=function($){var v=y($),V=v[1];return 3*(v[0]+V)/4-V},S.toByteArray=function($){var v,b,xe,V=y($),G=V[0],H=V[1],te=new r(3*(G+(xe=H))/4-xe),z=0,W=H>0?G-4:G;for(b=0;b<W;b+=4)v=Z[$.charCodeAt(b)]<<18|Z[$.charCodeAt(b+1)]<<12|Z[$.charCodeAt(b+2)]<<6|Z[$.charCodeAt(b+3)],te[z++]=v>>16&255,te[z++]=v>>8&255,te[z++]=255&v;return 2===H&&(v=Z[$.charCodeAt(b)]<<2|Z[$.charCodeAt(b+1)]>>4,te[z++]=255&v),1===H&&(v=Z[$.charCodeAt(b)]<<10|Z[$.charCodeAt(b+1)]<<4|Z[$.charCodeAt(b+2)]>>2,te[z++]=v>>8&255,te[z++]=255&v),te},S.fromByteArray=function($){for(var v,b=$.length,V=b%3,G=[],H=16383,te=0,z=b-V;te<z;te+=H)G.push(E($,te,te+H>z?z:te+H));return 1===V?G.push(q[(v=$[b-1])>>2]+q[v<<4&63]+"=="):2===V&&G.push(q[(v=($[b-2]<<8)+$[b-1])>>10]+q[v>>4&63]+q[v<<2&63]+"="),G.join("")};for(var q=[],Z=[],r=typeof Uint8Array<"u"?Uint8Array:Array,_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0;p<64;++p)q[p]=_[p],Z[_.charCodeAt(p)]=p;function y(O){var $=O.length;if($%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var v=O.indexOf("=");return-1===v&&(v=$),[v,v===$?0:4-v%4]}function E(O,$,v){for(var V,G=[],H=$;H<v;H+=3)G.push(q[(V=(O[H]<<16&16711680)+(O[H+1]<<8&65280)+(255&O[H+2]))>>18&63]+q[V>>12&63]+q[V>>6&63]+q[63&V]);return G.join("")}Z["-".charCodeAt(0)]=62,Z["_".charCodeAt(0)]=63},function(N,S){S.read=function(M,q,Z,r,_){var p,g,y=8*_-r-1,E=(1<<y)-1,O=E>>1,$=-7,v=Z?_-1:0,b=Z?-1:1,V=M[q+v];for(v+=b,p=V&(1<<-$)-1,V>>=-$,$+=y;$>0;p=256*p+M[q+v],v+=b,$-=8);for(g=p&(1<<-$)-1,p>>=-$,$+=r;$>0;g=256*g+M[q+v],v+=b,$-=8);if(0===p)p=1-O;else{if(p===E)return g?NaN:1/0*(V?-1:1);g+=Math.pow(2,r),p-=O}return(V?-1:1)*g*Math.pow(2,p-r)},S.write=function(M,q,Z,r,_,p){var g,y,E,O=8*p-_-1,$=(1<<O)-1,v=$>>1,b=23===_?Math.pow(2,-24)-Math.pow(2,-77):0,V=r?0:p-1,G=r?1:-1,H=q<0||0===q&&1/q<0?1:0;for(q=Math.abs(q),isNaN(q)||q===1/0?(y=isNaN(q)?1:0,g=$):(g=Math.floor(Math.log(q)/Math.LN2),q*(E=Math.pow(2,-g))<1&&(g--,E*=2),(q+=g+v>=1?b/E:b*Math.pow(2,1-v))*E>=2&&(g++,E/=2),g+v>=$?(y=0,g=$):g+v>=1?(y=(q*E-1)*Math.pow(2,_),g+=v):(y=q*Math.pow(2,v-1)*Math.pow(2,_),g=0));_>=8;M[Z+V]=255&y,V+=G,y/=256,_-=8);for(g=g<<_|y,O+=_;O>0;M[Z+V]=255&g,V+=G,g/=256,O-=8);M[Z+V-G]|=128*H}},function(N,S){var M={}.toString;N.exports=Array.isArray||function(q){return"[object Array]"==M.call(q)}},function(N,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.default=function(r){var _=r.jws,p=r.KeyUtil,g=r.X509,y=r.crypto,E=r.hextob64u,O=r.b64tohex,$=r.AllowedSigningAlgs;return function(){function v(){!function(V,G){if(!(V instanceof G))throw new TypeError("Cannot call a class as a function")}(this,v)}return v.parseJwt=function(V){q.Log.debug("JoseUtil.parseJwt");try{var G=_.JWS.parse(V);return{header:G.headerObj,payload:G.payloadObj}}catch(H){q.Log.error(H)}},v.validateJwt=function(V,G,H,te,z,W,J){q.Log.debug("JoseUtil.validateJwt");try{if("RSA"===G.kty)if(G.e&&G.n)G=p.getKey(G);else{if(!G.x5c||!G.x5c.length)return q.Log.error("JoseUtil.validateJwt: RSA key missing key material",G),Promise.reject(new Error("RSA key missing key material"));var se=O(G.x5c[0]);G=g.getPublicKeyFromCertHex(se)}else{if("EC"!==G.kty)return q.Log.error("JoseUtil.validateJwt: Unsupported key type",G&&G.kty),Promise.reject(new Error(G.kty));if(!(G.crv&&G.x&&G.y))return q.Log.error("JoseUtil.validateJwt: EC key missing key material",G),Promise.reject(new Error("EC key missing key material"));G=p.getKey(G)}return v._validateJwt(V,G,H,te,z,W,J)}catch(ve){return q.Log.error(ve&&ve.message||ve),Promise.reject("JWT validation failed")}},v.validateJwtAttributes=function(V,G,H,te,z,W){te||(te=0),z||(z=parseInt(Date.now()/1e3));var J=v.parseJwt(V).payload;if(!J.iss)return q.Log.error("JoseUtil._validateJwt: issuer was not provided"),Promise.reject(new Error("issuer was not provided"));if(J.iss!==G)return q.Log.error("JoseUtil._validateJwt: Invalid issuer in token",J.iss),Promise.reject(new Error("Invalid issuer in token: "+J.iss));if(!J.aud)return q.Log.error("JoseUtil._validateJwt: aud was not provided"),Promise.reject(new Error("aud was not provided"));if(!(J.aud===H||Array.isArray(J.aud)&&J.aud.indexOf(H)>=0))return q.Log.error("JoseUtil._validateJwt: Invalid audience in token",J.aud),Promise.reject(new Error("Invalid audience in token: "+J.aud));if(J.azp&&J.azp!==H)return q.Log.error("JoseUtil._validateJwt: Invalid azp in token",J.azp),Promise.reject(new Error("Invalid azp in token: "+J.azp));if(!W){var se=z+te,ve=z-te;if(!J.iat)return q.Log.error("JoseUtil._validateJwt: iat was not provided"),Promise.reject(new Error("iat was not provided"));if(se<J.iat)return q.Log.error("JoseUtil._validateJwt: iat is in the future",J.iat),Promise.reject(new Error("iat is in the future: "+J.iat));if(J.nbf&&se<J.nbf)return q.Log.error("JoseUtil._validateJwt: nbf is in the future",J.nbf),Promise.reject(new Error("nbf is in the future: "+J.nbf));if(!J.exp)return q.Log.error("JoseUtil._validateJwt: exp was not provided"),Promise.reject(new Error("exp was not provided"));if(J.exp<ve)return q.Log.error("JoseUtil._validateJwt: exp is in the past",J.exp),Promise.reject(new Error("exp is in the past:"+J.exp))}return Promise.resolve(J)},v._validateJwt=function(V,G,H,te,z,W,J){return v.validateJwtAttributes(V,H,te,z,W,J).then(function(se){try{return _.JWS.verify(V,G,$)?se:(q.Log.error("JoseUtil._validateJwt: signature validation failed"),Promise.reject(new Error("signature validation failed")))}catch(ve){return q.Log.error(ve&&ve.message||ve),Promise.reject(new Error("signature validation failed"))}})},v.hashString=function(V,G){try{return y.Util.hashString(V,G)}catch(H){q.Log.error(H)}},v.hexToBase64Url=function(V){try{return E(V)}catch(G){q.Log.error(G)}},v}()};var q=M(0);N.exports=S.default},function(N,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.SigninResponse=void 0;var q=function(){function _(p,g){for(var y=0;y<g.length;y++){var E=g[y];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(p,E.key,E)}}return function(p,g,y){return g&&_(p.prototype,g),y&&_(p,y),p}}(),Z=M(3);S.SigninResponse=function(){function _(p){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#";!function r(_,p){if(!(_ instanceof p))throw new TypeError("Cannot call a class as a function")}(this,_);var y=Z.UrlUtility.parseUrlFragment(p,g);this.error=y.error,this.error_description=y.error_description,this.error_uri=y.error_uri,this.code=y.code,this.state=y.state,this.id_token=y.id_token,this.session_state=y.session_state,this.access_token=y.access_token,this.token_type=y.token_type,this.scope=y.scope,this.profile=void 0,this.expires_in=y.expires_in}return q(_,[{key:"expires_in",get:function(){if(this.expires_at){var g=parseInt(Date.now()/1e3);return this.expires_at-g}},set:function(g){var y=parseInt(g);if("number"==typeof y&&y>0){var E=parseInt(Date.now()/1e3);this.expires_at=E+y}}},{key:"expired",get:function(){var g=this.expires_in;if(void 0!==g)return g<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}},{key:"isOpenIdConnect",get:function(){return this.scopes.indexOf("openid")>=0||!!this.id_token}}]),_}()},function(N,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.SignoutRequest=void 0;var q=M(0),Z=M(3),r=M(9);S.SignoutRequest=function _(p){var g=p.url,y=p.id_token_hint,E=p.post_logout_redirect_uri,O=p.data,$=p.extraQueryParams,v=p.request_type;if(function(G,H){if(!(G instanceof H))throw new TypeError("Cannot call a class as a function")}(this,_),!g)throw q.Log.error("SignoutRequest.ctor: No url passed"),new Error("url");for(var b in y&&(g=Z.UrlUtility.addQueryParam(g,"id_token_hint",y)),E&&(g=Z.UrlUtility.addQueryParam(g,"post_logout_redirect_uri",E),O&&(this.state=new r.State({data:O,request_type:v}),g=Z.UrlUtility.addQueryParam(g,"state",this.state.id))),$)g=Z.UrlUtility.addQueryParam(g,b,$[b]);this.url=g}},function(N,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.SignoutResponse=void 0;var q=M(3);S.SignoutResponse=function Z(r){!function(g,y){if(!(g instanceof y))throw new TypeError("Cannot call a class as a function")}(this,Z);var _=q.UrlUtility.parseUrlFragment(r,"?");this.error=_.error,this.error_description=_.error_description,this.error_uri=_.error_uri,this.state=_.state}},function(N,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.InMemoryWebStorage=void 0;var q=function(){function r(_,p){for(var g=0;g<p.length;g++){var y=p[g];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(_,y.key,y)}}return function(_,p,g){return p&&r(_.prototype,p),g&&r(_,g),_}}(),Z=M(0);S.InMemoryWebStorage=function(){function r(){(function(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")})(this,r),this._data={}}return r.prototype.getItem=function(p){return Z.Log.debug("InMemoryWebStorage.getItem",p),this._data[p]},r.prototype.setItem=function(p,g){Z.Log.debug("InMemoryWebStorage.setItem",p),this._data[p]=g},r.prototype.removeItem=function(p){Z.Log.debug("InMemoryWebStorage.removeItem",p),delete this._data[p]},r.prototype.key=function(p){return Object.getOwnPropertyNames(this._data)[p]},q(r,[{key:"length",get:function(){return Object.getOwnPropertyNames(this._data).length}}]),r}()},function(N,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.UserManager=void 0;var q=function(){function H(te,z){for(var W=0;W<z.length;W++){var J=z[W];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(te,J.key,J)}}return function(te,z,W){return z&&H(te.prototype,z),W&&H(te,W),te}}(),Z=M(0),r=M(10),_=M(39),p=M(15),g=M(45),y=M(47),E=M(18),O=M(8),$=M(20),v=M(11),b=M(4);S.UserManager=function(H){function te(){var z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},W=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y.SilentRenewService,J=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E.SessionMonitor,se=arguments.length>3&&void 0!==arguments[3]?arguments[3]:$.TokenRevocationClient,ve=arguments.length>4&&void 0!==arguments[4]?arguments[4]:v.TokenClient,xe=arguments.length>5&&void 0!==arguments[5]?arguments[5]:b.JoseUtil;(function V(H,te){if(!(H instanceof te))throw new TypeError("Cannot call a class as a function")})(this,te),z instanceof _.UserManagerSettings||(z=new _.UserManagerSettings(z));var ge=function G(H,te){if(!H)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!te||"object"!=typeof te&&"function"!=typeof te?H:te}(this,H.call(this,z));return ge._events=new g.UserManagerEvents(z),ge._silentRenewService=new W(ge),ge.settings.automaticSilentRenew&&(Z.Log.debug("UserManager.ctor: automaticSilentRenew is configured, setting up silent renew"),ge.startSilentRenew()),ge.settings.monitorSession&&(Z.Log.debug("UserManager.ctor: monitorSession is configured, setting up session monitor"),ge._sessionMonitor=new J(ge)),ge._tokenRevocationClient=new se(ge._settings),ge._tokenClient=new ve(ge._settings),ge._joseUtil=xe,ge}return function(W,J){if("function"!=typeof J&&null!==J)throw new TypeError("Super expression must either be null or a function, not "+typeof J);W.prototype=Object.create(J&&J.prototype,{constructor:{value:W,enumerable:!1,writable:!0,configurable:!0}}),J&&(Object.setPrototypeOf?Object.setPrototypeOf(W,J):W.__proto__=J)}(te,H),te.prototype.getUser=function(){var W=this;return this._loadUser().then(function(J){return J?(Z.Log.info("UserManager.getUser: user loaded"),W._events.load(J,!1),J):(Z.Log.info("UserManager.getUser: user not found in storage"),null)})},te.prototype.removeUser=function(){var W=this;return this.storeUser(null).then(function(){Z.Log.info("UserManager.removeUser: user removed from storage"),W._events.unload()})},te.prototype.signinRedirect=function(){var W=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(W=Object.assign({},W)).request_type="si:r",this._signinStart(W,this._redirectNavigator,{useReplaceToNavigate:W.useReplaceToNavigate}).then(function(){Z.Log.info("UserManager.signinRedirect: successful")})},te.prototype.signinRedirectCallback=function(W){return this._signinEnd(W||this._redirectNavigator.url).then(function(J){return J.profile&&J.profile.sub?Z.Log.info("UserManager.signinRedirectCallback: successful, signed in sub: ",J.profile.sub):Z.Log.info("UserManager.signinRedirectCallback: no sub"),J})},te.prototype.signinPopup=function(){var W=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(W=Object.assign({},W)).request_type="si:p";var J=W.redirect_uri||this.settings.popup_redirect_uri||this.settings.redirect_uri;return J?(W.redirect_uri=J,W.display="popup",this._signin(W,this._popupNavigator,{startUrl:J,popupWindowFeatures:W.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:W.popupWindowTarget||this.settings.popupWindowTarget}).then(function(se){return se&&(se.profile&&se.profile.sub?Z.Log.info("UserManager.signinPopup: signinPopup successful, signed in sub: ",se.profile.sub):Z.Log.info("UserManager.signinPopup: no sub")),se})):(Z.Log.error("UserManager.signinPopup: No popup_redirect_uri or redirect_uri configured"),Promise.reject(new Error("No popup_redirect_uri or redirect_uri configured")))},te.prototype.signinPopupCallback=function(W){return this._signinCallback(W,this._popupNavigator).then(function(J){return J&&(J.profile&&J.profile.sub?Z.Log.info("UserManager.signinPopupCallback: successful, signed in sub: ",J.profile.sub):Z.Log.info("UserManager.signinPopupCallback: no sub")),J}).catch(function(J){Z.Log.error(J.message)})},te.prototype.signinSilent=function(){var W=this,J=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return J=Object.assign({},J),this._loadUser().then(function(se){return se&&se.refresh_token?(J.refresh_token=se.refresh_token,W._useRefreshToken(J)):(J.request_type="si:s",J.id_token_hint=J.id_token_hint||W.settings.includeIdTokenInSilentRenew&&se&&se.id_token,se&&W._settings.validateSubOnSilentRenew&&(Z.Log.debug("UserManager.signinSilent, subject prior to silent renew: ",se.profile.sub),J.current_sub=se.profile.sub),W._signinSilentIframe(J))})},te.prototype._useRefreshToken=function(){var W=this;return this._tokenClient.exchangeRefreshToken(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).then(function(se){return se?se.access_token?W._loadUser().then(function(ve){if(ve){var xe=Promise.resolve();return se.id_token&&(xe=W._validateIdTokenFromTokenRefreshToken(ve.profile,se.id_token)),xe.then(function(){return Z.Log.debug("UserManager._useRefreshToken: refresh token response success"),ve.id_token=se.id_token||ve.id_token,ve.access_token=se.access_token,ve.refresh_token=se.refresh_token||ve.refresh_token,ve.expires_in=se.expires_in,W.storeUser(ve).then(function(){return W._events.load(ve),ve})})}return null}):(Z.Log.error("UserManager._useRefreshToken: No access token returned from token endpoint"),Promise.reject("No access token returned from token endpoint")):(Z.Log.error("UserManager._useRefreshToken: No response returned from token endpoint"),Promise.reject("No response returned from token endpoint"))})},te.prototype._validateIdTokenFromTokenRefreshToken=function(W,J){var se=this;return this._metadataService.getIssuer().then(function(ve){return se.settings.getEpochTime().then(function(xe){return se._joseUtil.validateJwtAttributes(J,ve,se._settings.client_id,se._settings.clockSkew,xe).then(function(ge){return ge?ge.sub!==W.sub?(Z.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: sub in id_token does not match current sub"),Promise.reject(new Error("sub in id_token does not match current sub"))):ge.auth_time&&ge.auth_time!==W.auth_time?(Z.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: auth_time in id_token does not match original auth_time"),Promise.reject(new Error("auth_time in id_token does not match original auth_time"))):ge.azp&&ge.azp!==W.azp?(Z.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp in id_token does not match original azp"),Promise.reject(new Error("azp in id_token does not match original azp"))):!ge.azp&&W.azp?(Z.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp not in id_token, but present in original id_token"),Promise.reject(new Error("azp not in id_token, but present in original id_token"))):void 0:(Z.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: Failed to validate id_token"),Promise.reject(new Error("Failed to validate id_token")))})})})},te.prototype._signinSilentIframe=function(){var W=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},J=W.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return J?(W.redirect_uri=J,W.prompt=W.prompt||"none",this._signin(W,this._iframeNavigator,{startUrl:J,silentRequestTimeout:W.silentRequestTimeout||this.settings.silentRequestTimeout}).then(function(se){return se&&(se.profile&&se.profile.sub?Z.Log.info("UserManager.signinSilent: successful, signed in sub: ",se.profile.sub):Z.Log.info("UserManager.signinSilent: no sub")),se})):(Z.Log.error("UserManager.signinSilent: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},te.prototype.signinSilentCallback=function(W){return this._signinCallback(W,this._iframeNavigator).then(function(J){return J&&(J.profile&&J.profile.sub?Z.Log.info("UserManager.signinSilentCallback: successful, signed in sub: ",J.profile.sub):Z.Log.info("UserManager.signinSilentCallback: no sub")),J})},te.prototype.signinCallback=function(W){var J=this;return this.readSigninResponseState(W).then(function(se){var ve=se.state;return"si:r"===ve.request_type?J.signinRedirectCallback(W):"si:p"===ve.request_type?J.signinPopupCallback(W):"si:s"===ve.request_type?J.signinSilentCallback(W):Promise.reject(new Error("invalid response_type in state"))})},te.prototype.signoutCallback=function(W,J){var se=this;return this.readSignoutResponseState(W).then(function(ve){var xe=ve.state,ge=ve.response;return xe?"so:r"===xe.request_type?se.signoutRedirectCallback(W):"so:p"===xe.request_type?se.signoutPopupCallback(W,J):Promise.reject(new Error("invalid response_type in state")):ge})},te.prototype.querySessionStatus=function(){var W=this,J=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(J=Object.assign({},J)).request_type="si:s";var se=J.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return se?(J.redirect_uri=se,J.prompt="none",J.response_type=J.response_type||this.settings.query_status_response_type,J.scope=J.scope||"openid",J.skipUserInfo=!0,this._signinStart(J,this._iframeNavigator,{startUrl:se,silentRequestTimeout:J.silentRequestTimeout||this.settings.silentRequestTimeout}).then(function(ve){return W.processSigninResponse(ve.url).then(function(xe){if(Z.Log.debug("UserManager.querySessionStatus: got signin response"),xe.session_state&&xe.profile.sub)return Z.Log.info("UserManager.querySessionStatus: querySessionStatus success for sub: ",xe.profile.sub),{session_state:xe.session_state,sub:xe.profile.sub,sid:xe.profile.sid};Z.Log.info("querySessionStatus successful, user not authenticated")}).catch(function(xe){if(xe.session_state&&W.settings.monitorAnonymousSession&&("login_required"==xe.message||"consent_required"==xe.message||"interaction_required"==xe.message||"account_selection_required"==xe.message))return Z.Log.info("UserManager.querySessionStatus: querySessionStatus success for anonymous user"),{session_state:xe.session_state};throw xe})})):(Z.Log.error("UserManager.querySessionStatus: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},te.prototype._signin=function(W,J){var se=this;return this._signinStart(W,J,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).then(function(xe){return se._signinEnd(xe.url,W)})},te.prototype._signinStart=function(W,J){var se=this,ve=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return J.prepare(ve).then(function(xe){return Z.Log.debug("UserManager._signinStart: got navigator window handle"),se.createSigninRequest(W).then(function(ge){return Z.Log.debug("UserManager._signinStart: got signin request"),ve.url=ge.url,ve.id=ge.state.id,xe.navigate(ve)}).catch(function(ge){throw xe.close&&(Z.Log.debug("UserManager._signinStart: Error after preparing navigator, closing navigator window"),xe.close()),ge})})},te.prototype._signinEnd=function(W){var J=this,se=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.processSigninResponse(W).then(function(ve){Z.Log.debug("UserManager._signinEnd: got signin response");var xe=new p.User(ve);if(se.current_sub){if(se.current_sub!==xe.profile.sub)return Z.Log.debug("UserManager._signinEnd: current user does not match user returned from signin. sub from signin: ",xe.profile.sub),Promise.reject(new Error("login_required"));Z.Log.debug("UserManager._signinEnd: current user matches user returned from signin")}return J.storeUser(xe).then(function(){return Z.Log.debug("UserManager._signinEnd: user stored"),J._events.load(xe),xe})})},te.prototype._signinCallback=function(W,J){Z.Log.debug("UserManager._signinCallback");var se="query"===this._settings.response_mode||!this._settings.response_mode&&O.SigninRequest.isCode(this._settings.response_type)?"?":"#";return J.callback(W,void 0,se)},te.prototype.signoutRedirect=function(){var W=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(W=Object.assign({},W)).request_type="so:r";var J=W.post_logout_redirect_uri||this.settings.post_logout_redirect_uri;return J&&(W.post_logout_redirect_uri=J),this._signoutStart(W,this._redirectNavigator,{useReplaceToNavigate:W.useReplaceToNavigate}).then(function(){Z.Log.info("UserManager.signoutRedirect: successful")})},te.prototype.signoutRedirectCallback=function(W){return this._signoutEnd(W||this._redirectNavigator.url).then(function(J){return Z.Log.info("UserManager.signoutRedirectCallback: successful"),J})},te.prototype.signoutPopup=function(){var W=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(W=Object.assign({},W)).request_type="so:p";var J=W.post_logout_redirect_uri||this.settings.popup_post_logout_redirect_uri||this.settings.post_logout_redirect_uri;return W.post_logout_redirect_uri=J,W.display="popup",W.post_logout_redirect_uri&&(W.state=W.state||{}),this._signout(W,this._popupNavigator,{startUrl:J,popupWindowFeatures:W.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:W.popupWindowTarget||this.settings.popupWindowTarget}).then(function(){Z.Log.info("UserManager.signoutPopup: successful")})},te.prototype.signoutPopupCallback=function(W,J){return void 0===J&&"boolean"==typeof W&&(J=W,W=null),this._popupNavigator.callback(W,J,"?").then(function(){Z.Log.info("UserManager.signoutPopupCallback: successful")})},te.prototype._signout=function(W,J){var se=this;return this._signoutStart(W,J,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).then(function(xe){return se._signoutEnd(xe.url)})},te.prototype._signoutStart=function(){var W=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},J=this,ve=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return arguments[1].prepare(ve).then(function(xe){return Z.Log.debug("UserManager._signoutStart: got navigator window handle"),J._loadUser().then(function(ge){return Z.Log.debug("UserManager._signoutStart: loaded current user from storage"),(J._settings.revokeAccessTokenOnSignout?J._revokeInternal(ge):Promise.resolve()).then(function(){var x=W.id_token_hint||ge&&ge.id_token;return x&&(Z.Log.debug("UserManager._signoutStart: Setting id_token into signout request"),W.id_token_hint=x),J.removeUser().then(function(){return Z.Log.debug("UserManager._signoutStart: user removed, creating signout request"),J.createSignoutRequest(W).then(function(D){return Z.Log.debug("UserManager._signoutStart: got signout request"),ve.url=D.url,D.state&&(ve.id=D.state.id),xe.navigate(ve)})})})}).catch(function(ge){throw xe.close&&(Z.Log.debug("UserManager._signoutStart: Error after preparing navigator, closing navigator window"),xe.close()),ge})})},te.prototype._signoutEnd=function(W){return this.processSignoutResponse(W).then(function(J){return Z.Log.debug("UserManager._signoutEnd: got signout response"),J})},te.prototype.revokeAccessToken=function(){var W=this;return this._loadUser().then(function(J){return W._revokeInternal(J,!0).then(function(se){if(se)return Z.Log.debug("UserManager.revokeAccessToken: removing token properties from user and re-storing"),J.access_token=null,J.refresh_token=null,J.expires_at=null,J.token_type=null,W.storeUser(J).then(function(){Z.Log.debug("UserManager.revokeAccessToken: user stored"),W._events.load(J)})})}).then(function(){Z.Log.info("UserManager.revokeAccessToken: access token revoked successfully")})},te.prototype._revokeInternal=function(W,J){var se=this;if(W){var xe=W.refresh_token;return this._revokeAccessTokenInternal(W.access_token,J).then(function(ge){return se._revokeRefreshTokenInternal(xe,J).then(function(x){return ge||x||Z.Log.debug("UserManager.revokeAccessToken: no need to revoke due to no token(s), or JWT format"),ge||x})})}return Promise.resolve(!1)},te.prototype._revokeAccessTokenInternal=function(W,J){return!W||W.indexOf(".")>=0?Promise.resolve(!1):this._tokenRevocationClient.revoke(W,J).then(function(){return!0})},te.prototype._revokeRefreshTokenInternal=function(W,J){return W?this._tokenRevocationClient.revoke(W,J,"refresh_token").then(function(){return!0}):Promise.resolve(!1)},te.prototype.startSilentRenew=function(){this._silentRenewService.start()},te.prototype.stopSilentRenew=function(){this._silentRenewService.stop()},te.prototype._loadUser=function(){return this._userStore.get(this._userStoreKey).then(function(W){return W?(Z.Log.debug("UserManager._loadUser: user storageString loaded"),p.User.fromStorageString(W)):(Z.Log.debug("UserManager._loadUser: no user storageString"),null)})},te.prototype.storeUser=function(W){if(W){Z.Log.debug("UserManager.storeUser: storing user");var J=W.toStorageString();return this._userStore.set(this._userStoreKey,J)}return Z.Log.debug("storeUser.storeUser: removing user"),this._userStore.remove(this._userStoreKey)},q(te,[{key:"_redirectNavigator",get:function(){return this.settings.redirectNavigator}},{key:"_popupNavigator",get:function(){return this.settings.popupNavigator}},{key:"_iframeNavigator",get:function(){return this.settings.iframeNavigator}},{key:"_userStore",get:function(){return this.settings.userStore}},{key:"events",get:function(){return this._events}},{key:"_userStoreKey",get:function(){return"user:"+this.settings.authority+":"+this.settings.client_id}}]),te}(r.OidcClient)},function(N,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.UserManagerSettings=void 0;var q=function(){function v(b,V){for(var G=0;G<V.length;G++){var H=V[G];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(b,H.key,H)}}return function(b,V,G){return V&&v(b.prototype,V),G&&v(b,G),b}}(),Z=(M(0),M(5)),r=M(40),_=M(41),p=M(43),g=M(6),y=M(1),E=M(8);S.UserManagerSettings=function(v){function b(){var V=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},G=V.popup_redirect_uri,H=V.popup_post_logout_redirect_uri,te=V.popupWindowFeatures,z=V.popupWindowTarget,W=V.silent_redirect_uri,J=V.silentRequestTimeout,se=V.automaticSilentRenew,ve=void 0!==se&&se,xe=V.validateSubOnSilentRenew,ge=void 0!==xe&&xe,x=V.includeIdTokenInSilentRenew,D=void 0===x||x,P=V.monitorSession,I=void 0===P||P,j=V.monitorAnonymousSession,R=void 0!==j&&j,Q=V.checkSessionInterval,ee=void 0===Q?2e3:Q,Re=V.stopCheckSessionOnError,ne=void 0===Re||Re,Fe=V.query_status_response_type,rt=V.revokeAccessTokenOnSignout,Te=void 0!==rt&&rt,tt=V.accessTokenExpiringNotificationTime,Qe=void 0===tt?60:tt,vt=V.redirectNavigator,et=void 0===vt?new r.RedirectNavigator:vt,$e=V.popupNavigator,it=void 0===$e?new _.PopupNavigator:$e,de=V.iframeNavigator,Y=void 0===de?new p.IFrameNavigator:de,oe=V.userStore,ke=void 0===oe?new g.WebStorageStateStore({store:y.Global.sessionStorage}):oe;!function O(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var Be=function $(v,b){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?v:b}(this,v.call(this,arguments[0]));return Be._popup_redirect_uri=G,Be._popup_post_logout_redirect_uri=H,Be._popupWindowFeatures=te,Be._popupWindowTarget=z,Be._silent_redirect_uri=W,Be._silentRequestTimeout=J,Be._automaticSilentRenew=ve,Be._validateSubOnSilentRenew=ge,Be._includeIdTokenInSilentRenew=D,Be._accessTokenExpiringNotificationTime=Qe,Be._monitorSession=I,Be._monitorAnonymousSession=R,Be._checkSessionInterval=ee,Be._stopCheckSessionOnError=ne,Be._query_status_response_type=Fe||(arguments[0]&&arguments[0].response_type?E.SigninRequest.isOidc(arguments[0].response_type)?"id_token":"code":"id_token"),Be._revokeAccessTokenOnSignout=Te,Be._redirectNavigator=et,Be._popupNavigator=it,Be._iframeNavigator=Y,Be._userStore=ke,Be}return function(G,H){if("function"!=typeof H&&null!==H)throw new TypeError("Super expression must either be null or a function, not "+typeof H);G.prototype=Object.create(H&&H.prototype,{constructor:{value:G,enumerable:!1,writable:!0,configurable:!0}}),H&&(Object.setPrototypeOf?Object.setPrototypeOf(G,H):G.__proto__=H)}(b,v),q(b,[{key:"popup_redirect_uri",get:function(){return this._popup_redirect_uri}},{key:"popup_post_logout_redirect_uri",get:function(){return this._popup_post_logout_redirect_uri}},{key:"popupWindowFeatures",get:function(){return this._popupWindowFeatures}},{key:"popupWindowTarget",get:function(){return this._popupWindowTarget}},{key:"silent_redirect_uri",get:function(){return this._silent_redirect_uri}},{key:"silentRequestTimeout",get:function(){return this._silentRequestTimeout}},{key:"automaticSilentRenew",get:function(){return this._automaticSilentRenew}},{key:"validateSubOnSilentRenew",get:function(){return this._validateSubOnSilentRenew}},{key:"includeIdTokenInSilentRenew",get:function(){return this._includeIdTokenInSilentRenew}},{key:"accessTokenExpiringNotificationTime",get:function(){return this._accessTokenExpiringNotificationTime}},{key:"monitorSession",get:function(){return this._monitorSession}},{key:"monitorAnonymousSession",get:function(){return this._monitorAnonymousSession}},{key:"checkSessionInterval",get:function(){return this._checkSessionInterval}},{key:"stopCheckSessionOnError",get:function(){return this._stopCheckSessionOnError}},{key:"query_status_response_type",get:function(){return this._query_status_response_type}},{key:"revokeAccessTokenOnSignout",get:function(){return this._revokeAccessTokenOnSignout}},{key:"redirectNavigator",get:function(){return this._redirectNavigator}},{key:"popupNavigator",get:function(){return this._popupNavigator}},{key:"iframeNavigator",get:function(){return this._iframeNavigator}},{key:"userStore",get:function(){return this._userStore}}]),b}(Z.OidcClientSettings)},function(N,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.RedirectNavigator=void 0;var q=function(){function r(_,p){for(var g=0;g<p.length;g++){var y=p[g];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(_,y.key,y)}}return function(_,p,g){return p&&r(_.prototype,p),g&&r(_,g),_}}(),Z=M(0);S.RedirectNavigator=function(){function r(){!function(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}(this,r)}return r.prototype.prepare=function(){return Promise.resolve(this)},r.prototype.navigate=function(p){return p&&p.url?(p.useReplaceToNavigate?window.location.replace(p.url):window.location=p.url,Promise.resolve()):(Z.Log.error("RedirectNavigator.navigate: No url provided"),Promise.reject(new Error("No url provided")))},q(r,[{key:"url",get:function(){return window.location.href}}]),r}()},function(N,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.PopupNavigator=void 0;var q=M(0),Z=M(42);S.PopupNavigator=function(){function r(){!function(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}(this,r)}return r.prototype.prepare=function(p){var g=new Z.PopupWindow(p);return Promise.resolve(g)},r.prototype.callback=function(p,g,y){q.Log.debug("PopupNavigator.callback");try{return Z.PopupWindow.notifyOpener(p,g,y),Promise.resolve()}catch(E){return Promise.reject(E)}},r}()},function(N,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.PopupWindow=void 0;var q=function(){function _(p,g){for(var y=0;y<g.length;y++){var E=g[y];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(p,E.key,E)}}return function(p,g,y){return g&&_(p.prototype,g),y&&_(p,y),p}}(),Z=M(0),r=M(3);S.PopupWindow=function(){function _(p){var g=this;(function($,v){if(!($ instanceof v))throw new TypeError("Cannot call a class as a function")})(this,_),this._promise=new Promise(function(O,$){g._resolve=O,g._reject=$}),this._popup=window.open("",p.popupWindowTarget||"_blank",p.popupWindowFeatures||"location=no,toolbar=no,width=500,height=500,left=100,top=100;"),this._popup&&(Z.Log.debug("PopupWindow.ctor: popup successfully created"),this._checkForPopupClosedTimer=window.setInterval(this._checkForPopupClosed.bind(this),500))}return _.prototype.navigate=function(g){return this._popup?g&&g.url?(Z.Log.debug("PopupWindow.navigate: Setting URL in popup"),this._id=g.id,this._id&&(window["popupCallback_"+g.id]=this._callback.bind(this)),this._popup.focus(),this._popup.window.location=g.url):(this._error("PopupWindow.navigate: no url provided"),this._error("No url provided")):this._error("PopupWindow.navigate: Error opening popup window"),this.promise},_.prototype._success=function(g){Z.Log.debug("PopupWindow.callback: Successful response from popup window"),this._cleanup(),this._resolve(g)},_.prototype._error=function(g){Z.Log.error("PopupWindow.error: ",g),this._cleanup(),this._reject(new Error(g))},_.prototype.close=function(){this._cleanup(!1)},_.prototype._cleanup=function(g){Z.Log.debug("PopupWindow.cleanup"),window.clearInterval(this._checkForPopupClosedTimer),this._checkForPopupClosedTimer=null,delete window["popupCallback_"+this._id],this._popup&&!g&&this._popup.close(),this._popup=null},_.prototype._checkForPopupClosed=function(){this._popup&&!this._popup.closed||this._error("Popup window closed")},_.prototype._callback=function(g,y){this._cleanup(y),g?(Z.Log.debug("PopupWindow.callback success"),this._success({url:g})):(Z.Log.debug("PopupWindow.callback: Invalid response from popup"),this._error("Invalid response from popup"))},_.notifyOpener=function(g,y,E){if(window.opener){if(g=g||window.location.href){var O=r.UrlUtility.parseUrlFragment(g,E);if(O.state){var v=window.opener["popupCallback_"+O.state];v?(Z.Log.debug("PopupWindow.notifyOpener: passing url message to opener"),v(g,y)):Z.Log.warn("PopupWindow.notifyOpener: no matching callback found on opener")}else Z.Log.warn("PopupWindow.notifyOpener: no state found in response url")}}else Z.Log.warn("PopupWindow.notifyOpener: no window.opener. Can't complete notification.")},q(_,[{key:"promise",get:function(){return this._promise}}]),_}()},function(N,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.IFrameNavigator=void 0;var q=M(0),Z=M(44);S.IFrameNavigator=function(){function r(){!function(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}(this,r)}return r.prototype.prepare=function(p){var g=new Z.IFrameWindow(p);return Promise.resolve(g)},r.prototype.callback=function(p){q.Log.debug("IFrameNavigator.callback");try{return Z.IFrameWindow.notifyParent(p),Promise.resolve()}catch(g){return Promise.reject(g)}},r}()},function(N,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.IFrameWindow=void 0;var q=function(){function r(_,p){for(var g=0;g<p.length;g++){var y=p[g];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(_,y.key,y)}}return function(_,p,g){return p&&r(_.prototype,p),g&&r(_,g),_}}(),Z=M(0);S.IFrameWindow=function(){function r(_){var p=this;(function(y,E){if(!(y instanceof E))throw new TypeError("Cannot call a class as a function")})(this,r),this._promise=new Promise(function(g,y){p._resolve=g,p._reject=y}),this._boundMessageEvent=this._message.bind(this),window.addEventListener("message",this._boundMessageEvent,!1),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.width=0,this._frame.height=0,window.document.body.appendChild(this._frame)}return r.prototype.navigate=function(p){if(p&&p.url){var g=p.silentRequestTimeout||1e4;Z.Log.debug("IFrameWindow.navigate: Using timeout of:",g),this._timer=window.setTimeout(this._timeout.bind(this),g),this._frame.src=p.url}else this._error("No url provided");return this.promise},r.prototype._success=function(p){this._cleanup(),Z.Log.debug("IFrameWindow: Successful response from frame window"),this._resolve(p)},r.prototype._error=function(p){this._cleanup(),Z.Log.error(p),this._reject(new Error(p))},r.prototype.close=function(){this._cleanup()},r.prototype._cleanup=function(){this._frame&&(Z.Log.debug("IFrameWindow: cleanup"),window.removeEventListener("message",this._boundMessageEvent,!1),window.clearTimeout(this._timer),window.document.body.removeChild(this._frame),this._timer=null,this._frame=null,this._boundMessageEvent=null)},r.prototype._timeout=function(){Z.Log.debug("IFrameWindow.timeout"),this._error("Frame window timed out")},r.prototype._message=function(p){if(Z.Log.debug("IFrameWindow.message"),this._timer&&p.origin===this._origin&&p.source===this._frame.contentWindow&&"string"==typeof p.data&&(p.data.startsWith("http://")||p.data.startsWith("https://"))){var g=p.data;g?this._success({url:g}):this._error("Invalid response from frame")}},r.notifyParent=function(p){Z.Log.debug("IFrameWindow.notifyParent"),(p=p||window.location.href)&&(Z.Log.debug("IFrameWindow.notifyParent: posting url message to parent"),window.parent.postMessage(p,location.protocol+"//"+location.host))},q(r,[{key:"promise",get:function(){return this._promise}},{key:"_origin",get:function(){return location.protocol+"//"+location.host}}]),r}()},function(N,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.UserManagerEvents=void 0;var q=M(0),Z=M(16),r=M(17);S.UserManagerEvents=function(_){function p(g){!function(O,$){if(!(O instanceof $))throw new TypeError("Cannot call a class as a function")}(this,p);var y=function(O,$){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!$||"object"!=typeof $&&"function"!=typeof $?O:$}(this,_.call(this,g));return y._userLoaded=new r.Event("User loaded"),y._userUnloaded=new r.Event("User unloaded"),y._silentRenewError=new r.Event("Silent renew error"),y._userSignedIn=new r.Event("User signed in"),y._userSignedOut=new r.Event("User signed out"),y._userSessionChanged=new r.Event("User session changed"),y}return function(y,E){if("function"!=typeof E&&null!==E)throw new TypeError("Super expression must either be null or a function, not "+typeof E);y.prototype=Object.create(E&&E.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(y,E):y.__proto__=E)}(p,_),p.prototype.load=function(y){var E=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];q.Log.debug("UserManagerEvents.load"),_.prototype.load.call(this,y),E&&this._userLoaded.raise(y)},p.prototype.unload=function(){q.Log.debug("UserManagerEvents.unload"),_.prototype.unload.call(this),this._userUnloaded.raise()},p.prototype.addUserLoaded=function(y){this._userLoaded.addHandler(y)},p.prototype.removeUserLoaded=function(y){this._userLoaded.removeHandler(y)},p.prototype.addUserUnloaded=function(y){this._userUnloaded.addHandler(y)},p.prototype.removeUserUnloaded=function(y){this._userUnloaded.removeHandler(y)},p.prototype.addSilentRenewError=function(y){this._silentRenewError.addHandler(y)},p.prototype.removeSilentRenewError=function(y){this._silentRenewError.removeHandler(y)},p.prototype._raiseSilentRenewError=function(y){q.Log.debug("UserManagerEvents._raiseSilentRenewError",y.message),this._silentRenewError.raise(y)},p.prototype.addUserSignedIn=function(y){this._userSignedIn.addHandler(y)},p.prototype.removeUserSignedIn=function(y){this._userSignedIn.removeHandler(y)},p.prototype._raiseUserSignedIn=function(){q.Log.debug("UserManagerEvents._raiseUserSignedIn"),this._userSignedIn.raise()},p.prototype.addUserSignedOut=function(y){this._userSignedOut.addHandler(y)},p.prototype.removeUserSignedOut=function(y){this._userSignedOut.removeHandler(y)},p.prototype._raiseUserSignedOut=function(){q.Log.debug("UserManagerEvents._raiseUserSignedOut"),this._userSignedOut.raise()},p.prototype.addUserSessionChanged=function(y){this._userSessionChanged.addHandler(y)},p.prototype.removeUserSessionChanged=function(y){this._userSessionChanged.removeHandler(y)},p.prototype._raiseUserSessionChanged=function(){q.Log.debug("UserManagerEvents._raiseUserSessionChanged"),this._userSessionChanged.raise()},p}(Z.AccessTokenEvents)},function(N,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.Timer=void 0;var q=function(){function y(E,O){for(var $=0;$<O.length;$++){var v=O[$];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(E,v.key,v)}}return function(E,O,$){return O&&y(E.prototype,O),$&&y(E,$),E}}(),Z=M(0),r=M(1),_=M(17);S.Timer=function(y){function E(O){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.Global.timer,v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;!function p(y,E){if(!(y instanceof E))throw new TypeError("Cannot call a class as a function")}(this,E);var b=function g(y,E){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!E||"object"!=typeof E&&"function"!=typeof E?y:E}(this,y.call(this,O));return b._timer=$,b._nowFunc=v||function(){return Date.now()/1e3},b}return function($,v){if("function"!=typeof v&&null!==v)throw new TypeError("Super expression must either be null or a function, not "+typeof v);$.prototype=Object.create(v&&v.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf($,v):$.__proto__=v)}(E,y),E.prototype.init=function($){$<=0&&($=1),$=parseInt($);var v=this.now+$;if(this.expiration===v&&this._timerHandle)Z.Log.debug("Timer.init timer "+this._name+" skipping initialization since already initialized for expiration:",this.expiration);else{this.cancel(),Z.Log.debug("Timer.init timer "+this._name+" for duration:",$),this._expiration=v;var b=5;$<b&&(b=$),this._timerHandle=this._timer.setInterval(this._callback.bind(this),1e3*b)}},E.prototype.cancel=function(){this._timerHandle&&(Z.Log.debug("Timer.cancel: ",this._name),this._timer.clearInterval(this._timerHandle),this._timerHandle=null)},E.prototype._callback=function(){Z.Log.debug("Timer.callback; "+this._name+" timer expires in:",this._expiration-this.now),this._expiration<=this.now&&(this.cancel(),y.prototype.raise.call(this))},q(E,[{key:"now",get:function(){return parseInt(this._nowFunc())}},{key:"expiration",get:function(){return this._expiration}}]),E}(_.Event)},function(N,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.SilentRenewService=void 0;var q=M(0);S.SilentRenewService=function(){function Z(r){(function(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")})(this,Z),this._userManager=r}return Z.prototype.start=function(){this._callback||(this._callback=this._tokenExpiring.bind(this),this._userManager.events.addAccessTokenExpiring(this._callback),this._userManager.getUser().then(function(_){}).catch(function(_){q.Log.error("SilentRenewService.start: Error from getUser:",_.message)}))},Z.prototype.stop=function(){this._callback&&(this._userManager.events.removeAccessTokenExpiring(this._callback),delete this._callback)},Z.prototype._tokenExpiring=function(){var _=this;this._userManager.signinSilent().then(function(p){q.Log.debug("SilentRenewService._tokenExpiring: Silent token renewal successful")},function(p){q.Log.error("SilentRenewService._tokenExpiring: Error from signinSilent:",p.message),_._userManager.events._raiseSilentRenewError(p)})},Z}()},function(N,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.CordovaPopupNavigator=void 0;var q=M(21);S.CordovaPopupNavigator=function(){function Z(){!function(_,p){if(!(_ instanceof p))throw new TypeError("Cannot call a class as a function")}(this,Z)}return Z.prototype.prepare=function(_){var p=new q.CordovaPopupWindow(_);return Promise.resolve(p)},Z}()},function(N,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.CordovaIFrameNavigator=void 0;var q=M(21);S.CordovaIFrameNavigator=function(){function Z(){!function(_,p){if(!(_ instanceof p))throw new TypeError("Cannot call a class as a function")}(this,Z)}return Z.prototype.prepare=function(_){_.popupWindowFeatures="hidden=yes";var p=new q.CordovaPopupWindow(_);return Promise.resolve(p)},Z}()},function(N,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.Version="1.11.5"}])},77434:pe=>{var N=String.prototype.replace,S=/%20/g;pe.exports={default:"RFC3986",formatters:{RFC1738:function(Z){return N.call(Z,S,"+")},RFC3986:function(Z){return String(Z)}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},93670:(pe,N,S)=>{var M=S(41799),q=S(42207),Z=S(77434);pe.exports={formats:Z,parse:q,stringify:M}},42207:(pe,N,S)=>{var M=S(98477),q=Object.prototype.hasOwnProperty,Z=Array.isArray,r={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:M.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},_=function(V){return V.replace(/&#(\d+);/g,function(G,H){return String.fromCharCode(parseInt(H,10))})},p=function(V,G){return V&&"string"==typeof V&&G.comma&&V.indexOf(",")>-1?V.split(","):V},$=function(V,G,H,te){if(V){var z=H.allowDots?V.replace(/\.([^.[]+)/g,"[$1]"):V,J=/(\[[^[\]]*])/g,se=H.depth>0&&/(\[[^[\]]*])/.exec(z),ve=se?z.slice(0,se.index):z,xe=[];if(ve){if(!H.plainObjects&&q.call(Object.prototype,ve)&&!H.allowPrototypes)return;xe.push(ve)}for(var ge=0;H.depth>0&&null!==(se=J.exec(z))&&ge<H.depth;){if(ge+=1,!H.plainObjects&&q.call(Object.prototype,se[1].slice(1,-1))&&!H.allowPrototypes)return;xe.push(se[1])}return se&&xe.push("["+z.slice(se.index)+"]"),function(V,G,H,te){for(var z=te?G:p(G,H),W=V.length-1;W>=0;--W){var J,se=V[W];if("[]"===se&&H.parseArrays)J=[].concat(z);else{J=H.plainObjects?Object.create(null):{};var ve="["===se.charAt(0)&&"]"===se.charAt(se.length-1)?se.slice(1,-1):se,xe=parseInt(ve,10);H.parseArrays||""!==ve?!isNaN(xe)&&se!==ve&&String(xe)===ve&&xe>=0&&H.parseArrays&&xe<=H.arrayLimit?(J=[])[xe]=z:"__proto__"!==ve&&(J[ve]=z):J={0:z}}z=J}return z}(xe,G,H,te)}};pe.exports=function(b,V){var G=function(V){if(!V)return r;if(null!=V.decoder&&"function"!=typeof V.decoder)throw new TypeError("Decoder has to be a function.");if(typeof V.charset<"u"&&"utf-8"!==V.charset&&"iso-8859-1"!==V.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");return{allowDots:typeof V.allowDots>"u"?r.allowDots:!!V.allowDots,allowPrototypes:"boolean"==typeof V.allowPrototypes?V.allowPrototypes:r.allowPrototypes,allowSparse:"boolean"==typeof V.allowSparse?V.allowSparse:r.allowSparse,arrayLimit:"number"==typeof V.arrayLimit?V.arrayLimit:r.arrayLimit,charset:typeof V.charset>"u"?r.charset:V.charset,charsetSentinel:"boolean"==typeof V.charsetSentinel?V.charsetSentinel:r.charsetSentinel,comma:"boolean"==typeof V.comma?V.comma:r.comma,decoder:"function"==typeof V.decoder?V.decoder:r.decoder,delimiter:"string"==typeof V.delimiter||M.isRegExp(V.delimiter)?V.delimiter:r.delimiter,depth:"number"==typeof V.depth||!1===V.depth?+V.depth:r.depth,ignoreQueryPrefix:!0===V.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof V.interpretNumericEntities?V.interpretNumericEntities:r.interpretNumericEntities,parameterLimit:"number"==typeof V.parameterLimit?V.parameterLimit:r.parameterLimit,parseArrays:!1!==V.parseArrays,plainObjects:"boolean"==typeof V.plainObjects?V.plainObjects:r.plainObjects,strictNullHandling:"boolean"==typeof V.strictNullHandling?V.strictNullHandling:r.strictNullHandling}}(V);if(""===b||null===b||typeof b>"u")return G.plainObjects?Object.create(null):{};for(var H="string"==typeof b?function(V,G){var se,H={__proto__:null},W=(G.ignoreQueryPrefix?V.replace(/^\?/,""):V).split(G.delimiter,G.parameterLimit===1/0?void 0:G.parameterLimit),J=-1,ve=G.charset;if(G.charsetSentinel)for(se=0;se<W.length;++se)0===W[se].indexOf("utf8=")&&("utf8=%E2%9C%93"===W[se]?ve="utf-8":"utf8=%26%2310003%3B"===W[se]&&(ve="iso-8859-1"),J=se,se=W.length);for(se=0;se<W.length;++se)if(se!==J){var D,P,xe=W[se],ge=xe.indexOf("]="),x=-1===ge?xe.indexOf("="):ge+1;-1===x?(D=G.decoder(xe,r.decoder,ve,"key"),P=G.strictNullHandling?null:""):(D=G.decoder(xe.slice(0,x),r.decoder,ve,"key"),P=M.maybeMap(p(xe.slice(x+1),G),function(I){return G.decoder(I,r.decoder,ve,"value")})),P&&G.interpretNumericEntities&&"iso-8859-1"===ve&&(P=_(P)),xe.indexOf("[]=")>-1&&(P=Z(P)?[P]:P),H[D]=q.call(H,D)?M.combine(H[D],P):P}return H}(b,G):b,te=G.plainObjects?Object.create(null):{},z=Object.keys(H),W=0;W<z.length;++W){var J=z[W],se=$(J,H[J],G,"string"==typeof b);te=M.merge(te,se,G)}return!0===G.allowSparse?te:M.compact(te)}},41799:(pe,N,S)=>{var M=S(98432),q=S(98477),Z=S(77434),r=Object.prototype.hasOwnProperty,_={brackets:function(te){return te+"[]"},comma:"comma",indices:function(te,z){return te+"["+z+"]"},repeat:function(te){return te}},p=Array.isArray,g=Array.prototype.push,y=function(te,z){g.apply(te,p(z)?z:[z])},E=Date.prototype.toISOString,O=Z.default,$={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:q.encode,encodeValuesOnly:!1,format:O,formatter:Z.formatters[O],indices:!1,serializeDate:function(te){return E.call(te)},skipNulls:!1,strictNullHandling:!1},b={},V=function H(te,z,W,J,se,ve,xe,ge,x,D,P,I,j,R,Q,ee){for(var Re=te,ne=ee,Fe=0,rt=!1;void 0!==(ne=ne.get(b))&&!rt;){var Te=ne.get(te);if(Fe+=1,typeof Te<"u"){if(Te===Fe)throw new RangeError("Cyclic object value");rt=!0}typeof ne.get(b)>"u"&&(Fe=0)}if("function"==typeof ge?Re=ge(z,Re):Re instanceof Date?Re=P(Re):"comma"===W&&p(Re)&&(Re=q.maybeMap(Re,function(Be){return Be instanceof Date?P(Be):Be})),null===Re){if(se)return xe&&!R?xe(z,$.encoder,Q,"key",I):z;Re=""}if(function(te){return"string"==typeof te||"number"==typeof te||"boolean"==typeof te||"symbol"==typeof te||"bigint"==typeof te}(Re)||q.isBuffer(Re))return xe?[j(R?z:xe(z,$.encoder,Q,"key",I))+"="+j(xe(Re,$.encoder,Q,"value",I))]:[j(z)+"="+j(String(Re))];var vt,Qe=[];if(typeof Re>"u")return Qe;if("comma"===W&&p(Re))R&&xe&&(Re=q.maybeMap(Re,xe)),vt=[{value:Re.length>0?Re.join(",")||null:void 0}];else if(p(ge))vt=ge;else{var et=Object.keys(Re);vt=x?et.sort(x):et}for(var $e=J&&p(Re)&&1===Re.length?z+"[]":z,it=0;it<vt.length;++it){var de=vt[it],Y="object"==typeof de&&typeof de.value<"u"?de.value:Re[de];if(!ve||null!==Y){var oe=p(Re)?"function"==typeof W?W($e,de):$e:$e+(D?"."+de:"["+de+"]");ee.set(te,Fe);var ke=M();ke.set(b,ee),y(Qe,H(Y,oe,W,J,se,ve,"comma"===W&&R&&p(Re)?null:xe,ge,x,D,P,I,j,R,Q,ke))}}return Qe};pe.exports=function(H,te){var J,z=H,W=function(te){if(!te)return $;if(null!==te.encoder&&typeof te.encoder<"u"&&"function"!=typeof te.encoder)throw new TypeError("Encoder has to be a function.");var z=te.charset||$.charset;if(typeof te.charset<"u"&&"utf-8"!==te.charset&&"iso-8859-1"!==te.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var W=Z.default;if(typeof te.format<"u"){if(!r.call(Z.formatters,te.format))throw new TypeError("Unknown format option provided.");W=te.format}var J=Z.formatters[W],se=$.filter;return("function"==typeof te.filter||p(te.filter))&&(se=te.filter),{addQueryPrefix:"boolean"==typeof te.addQueryPrefix?te.addQueryPrefix:$.addQueryPrefix,allowDots:typeof te.allowDots>"u"?$.allowDots:!!te.allowDots,charset:z,charsetSentinel:"boolean"==typeof te.charsetSentinel?te.charsetSentinel:$.charsetSentinel,delimiter:typeof te.delimiter>"u"?$.delimiter:te.delimiter,encode:"boolean"==typeof te.encode?te.encode:$.encode,encoder:"function"==typeof te.encoder?te.encoder:$.encoder,encodeValuesOnly:"boolean"==typeof te.encodeValuesOnly?te.encodeValuesOnly:$.encodeValuesOnly,filter:se,format:W,formatter:J,serializeDate:"function"==typeof te.serializeDate?te.serializeDate:$.serializeDate,skipNulls:"boolean"==typeof te.skipNulls?te.skipNulls:$.skipNulls,sort:"function"==typeof te.sort?te.sort:null,strictNullHandling:"boolean"==typeof te.strictNullHandling?te.strictNullHandling:$.strictNullHandling}}(te);"function"==typeof W.filter?z=(0,W.filter)("",z):p(W.filter)&&(J=W.filter);var ve=[];if("object"!=typeof z||null===z)return"";var ge=_[te&&te.arrayFormat in _?te.arrayFormat:te&&"indices"in te?te.indices?"indices":"repeat":"indices"];if(te&&"commaRoundTrip"in te&&"boolean"!=typeof te.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var x="comma"===ge&&te&&te.commaRoundTrip;J||(J=Object.keys(z)),W.sort&&J.sort(W.sort);for(var D=M(),P=0;P<J.length;++P){var I=J[P];W.skipNulls&&null===z[I]||y(ve,V(z[I],I,ge,x,W.strictNullHandling,W.skipNulls,W.encode?W.encoder:null,W.filter,W.sort,W.allowDots,W.serializeDate,W.format,W.formatter,W.encodeValuesOnly,W.charset,D))}var j=ve.join(W.delimiter),R=!0===W.addQueryPrefix?"?":"";return W.charsetSentinel&&(R+="iso-8859-1"===W.charset?"utf8=%26%2310003%3B&":"utf8=%E2%9C%93&"),j.length>0?R+j:""}},98477:(pe,N,S)=>{var M=S(77434),q=Object.prototype.hasOwnProperty,Z=Array.isArray,r=function(){for(var H=[],te=0;te<256;++te)H.push("%"+((te<16?"0":"")+te.toString(16)).toUpperCase());return H}(),p=function(te,z){for(var W=z&&z.plainObjects?Object.create(null):{},J=0;J<te.length;++J)typeof te[J]<"u"&&(W[J]=te[J]);return W};pe.exports={arrayToObject:p,assign:function(te,z){return Object.keys(z).reduce(function(W,J){return W[J]=z[J],W},te)},combine:function(te,z){return[].concat(te,z)},compact:function(te){for(var z=[{obj:{o:te},prop:"o"}],W=[],J=0;J<z.length;++J)for(var se=z[J],ve=se.obj[se.prop],xe=Object.keys(ve),ge=0;ge<xe.length;++ge){var x=xe[ge],D=ve[x];"object"==typeof D&&null!==D&&-1===W.indexOf(D)&&(z.push({obj:ve,prop:x}),W.push(D))}return function(te){for(;te.length>1;){var z=te.pop(),W=z.obj[z.prop];if(Z(W)){for(var J=[],se=0;se<W.length;++se)typeof W[se]<"u"&&J.push(W[se]);z.obj[z.prop]=J}}}(z),te},decode:function(te,z,W){var J=te.replace(/\+/g," ");if("iso-8859-1"===W)return J.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(J)}catch{return J}},encode:function(te,z,W,J,se){if(0===te.length)return te;var ve=te;if("symbol"==typeof te?ve=Symbol.prototype.toString.call(te):"string"!=typeof te&&(ve=String(te)),"iso-8859-1"===W)return escape(ve).replace(/%u[0-9a-f]{4}/gi,function(D){return"%26%23"+parseInt(D.slice(2),16)+"%3B"});for(var xe="",ge=0;ge<ve.length;++ge){var x=ve.charCodeAt(ge);45===x||46===x||95===x||126===x||x>=48&&x<=57||x>=65&&x<=90||x>=97&&x<=122||se===M.RFC1738&&(40===x||41===x)?xe+=ve.charAt(ge):x<128?xe+=r[x]:x<2048?xe+=r[192|x>>6]+r[128|63&x]:x<55296||x>=57344?xe+=r[224|x>>12]+r[128|x>>6&63]+r[128|63&x]:(x=65536+((1023&x)<<10|1023&ve.charCodeAt(ge+=1)),xe+=r[240|x>>18]+r[128|x>>12&63]+r[128|x>>6&63]+r[128|63&x])}return xe},isBuffer:function(te){return!(!te||"object"!=typeof te||!(te.constructor&&te.constructor.isBuffer&&te.constructor.isBuffer(te)))},isRegExp:function(te){return"[object RegExp]"===Object.prototype.toString.call(te)},maybeMap:function(te,z){if(Z(te)){for(var W=[],J=0;J<te.length;J+=1)W.push(z(te[J]));return W}return z(te)},merge:function H(te,z,W){if(!z)return te;if("object"!=typeof z){if(Z(te))te.push(z);else{if(!te||"object"!=typeof te)return[te,z];(W&&(W.plainObjects||W.allowPrototypes)||!q.call(Object.prototype,z))&&(te[z]=!0)}return te}if(!te||"object"!=typeof te)return[te].concat(z);var J=te;return Z(te)&&!Z(z)&&(J=p(te,W)),Z(te)&&Z(z)?(z.forEach(function(se,ve){if(q.call(te,ve)){var xe=te[ve];xe&&"object"==typeof xe&&se&&"object"==typeof se?te[ve]=H(xe,se,W):te.push(se)}else te[ve]=se}),te):Object.keys(z).reduce(function(se,ve){var xe=z[ve];return se[ve]=q.call(se,ve)?H(se[ve],xe,W):xe,se},J)}}},69877:(pe,N,S)=>{var q=S(66712),Z=S(71856),r=S(45381);function _(f){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+f,w=1;w<arguments.length;w++)h+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!q)throw Error(_(227));function p(f,h,w,K,re,_e,Ae,ze,xt){var Mt=Array.prototype.slice.call(arguments,3);try{h.apply(w,Mt)}catch(Ht){this.onError(Ht)}}var g=!1,y=null,E=!1,O=null,$={onError:function(h){g=!0,y=h}};function v(f,h,w,K,re,_e,Ae,ze,xt){g=!1,y=null,p.apply($,arguments)}var V=null,G=null,H=null;function te(f,h,w){var K=f.type||"unknown-event";f.currentTarget=H(w),function b(f,h,w,K,re,_e,Ae,ze,xt){if(v.apply(this,arguments),g){if(!g)throw Error(_(198));var Mt=y;g=!1,y=null,E||(E=!0,O=Mt)}}(K,h,void 0,f),f.currentTarget=null}var z=null,W={};function J(){if(z)for(var f in W){var h=W[f],w=z.indexOf(f);if(!(-1<w))throw Error(_(96,f));if(!ve[w]){if(!h.extractEvents)throw Error(_(97,f));for(var K in ve[w]=h,w=h.eventTypes){var re=void 0,_e=w[K],Ae=h,ze=K;if(xe.hasOwnProperty(ze))throw Error(_(99,ze));xe[ze]=_e;var xt=_e.phasedRegistrationNames;if(xt){for(re in xt)xt.hasOwnProperty(re)&&se(xt[re],Ae,ze);re=!0}else _e.registrationName?(se(_e.registrationName,Ae,ze),re=!0):re=!1;if(!re)throw Error(_(98,K,f))}}}}function se(f,h,w){if(ge[f])throw Error(_(100,f));ge[f]=h,x[f]=h.eventTypes[w].dependencies}var ve=[],xe={},ge={},x={};function D(f){var w,h=!1;for(w in f)if(f.hasOwnProperty(w)){var K=f[w];if(!W.hasOwnProperty(w)||W[w]!==K){if(W[w])throw Error(_(102,w));W[w]=K,h=!0}}h&&J()}var P=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),I=null,j=null,R=null;function Q(f){if(f=G(f)){if("function"!=typeof I)throw Error(_(280));var h=f.stateNode;h&&(h=V(h),I(f.stateNode,f.type,h))}}function ee(f){j?R?R.push(f):R=[f]:j=f}function Re(){if(j){var f=j,h=R;if(R=j=null,Q(f),h)for(f=0;f<h.length;f++)Q(h[f])}}function ne(f,h){return f(h)}function Fe(f,h,w,K,re){return f(h,w,K,re)}function rt(){}var Te=ne,tt=!1,Qe=!1;function vt(){(null!==j||null!==R)&&(rt(),Re())}function et(f,h,w){if(Qe)return f(h,w);Qe=!0;try{return Te(f,h,w)}finally{Qe=!1,vt()}}var $e=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,it=Object.prototype.hasOwnProperty,de={},Y={};function fe(f,h,w,K,re,_e){this.acceptsBooleans=2===h||3===h||4===h,this.attributeName=K,this.attributeNamespace=re,this.mustUseProperty=w,this.propertyName=f,this.type=h,this.sanitizeURL=_e}var ye={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(f){ye[f]=new fe(f,0,!1,f,null,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(f){var h=f[0];ye[h]=new fe(h,1,!1,f[1],null,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(f){ye[f]=new fe(f,2,!1,f.toLowerCase(),null,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(f){ye[f]=new fe(f,2,!1,f,null,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(f){ye[f]=new fe(f,3,!1,f.toLowerCase(),null,!1)}),["checked","multiple","muted","selected"].forEach(function(f){ye[f]=new fe(f,3,!0,f,null,!1)}),["capture","download"].forEach(function(f){ye[f]=new fe(f,4,!1,f,null,!1)}),["cols","rows","size","span"].forEach(function(f){ye[f]=new fe(f,6,!1,f,null,!1)}),["rowSpan","start"].forEach(function(f){ye[f]=new fe(f,5,!1,f.toLowerCase(),null,!1)});var ut=/[\-:]([a-z])/g;function be(f){return f[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(f){var h=f.replace(ut,be);ye[h]=new fe(h,1,!1,f,null,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(f){var h=f.replace(ut,be);ye[h]=new fe(h,1,!1,f,"http://www.w3.org/1999/xlink",!1)}),["xml:base","xml:lang","xml:space"].forEach(function(f){var h=f.replace(ut,be);ye[h]=new fe(h,1,!1,f,"http://www.w3.org/XML/1998/namespace",!1)}),["tabIndex","crossOrigin"].forEach(function(f){ye[f]=new fe(f,1,!1,f.toLowerCase(),null,!1)}),ye.xlinkHref=new fe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach(function(f){ye[f]=new fe(f,1,!1,f.toLowerCase(),null,!0)});var le=q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function ce(f,h,w,K){var re=ye.hasOwnProperty(h)?ye[h]:null;(null!==re?0===re.type:!K&&2<h.length&&("o"===h[0]||"O"===h[0])&&("n"===h[1]||"N"===h[1]))||(function Be(f,h,w,K){if(null===h||typeof h>"u"||function ke(f,h,w,K){if(null!==w&&0===w.type)return!1;switch(typeof h){case"function":case"symbol":return!0;case"boolean":return!K&&(null!==w?!w.acceptsBooleans:"data-"!==(f=f.toLowerCase().slice(0,5))&&"aria-"!==f);default:return!1}}(f,h,w,K))return!0;if(K)return!1;if(null!==w)switch(w.type){case 3:return!h;case 4:return!1===h;case 5:return isNaN(h);case 6:return isNaN(h)||1>h}return!1}(h,w,re,K)&&(w=null),K||null===re?function oe(f){return!!it.call(Y,f)||!it.call(de,f)&&($e.test(f)?Y[f]=!0:(de[f]=!0,!1))}(h)&&(null===w?f.removeAttribute(h):f.setAttribute(h,""+w)):re.mustUseProperty?f[re.propertyName]=null===w?3!==re.type&&"":w:(h=re.attributeName,K=re.attributeNamespace,null===w?f.removeAttribute(h):(w=3===(re=re.type)||4===re&&!0===w?"":""+w,K?f.setAttributeNS(K,h,w):f.setAttribute(h,w))))}le.hasOwnProperty("ReactCurrentDispatcher")||(le.ReactCurrentDispatcher={current:null}),le.hasOwnProperty("ReactCurrentBatchConfig")||(le.ReactCurrentBatchConfig={suspense:null});var Ie=/^(.*)[\\\/]/,ot="function"==typeof Symbol&&Symbol.for,Tt=ot?Symbol.for("react.element"):60103,Nt=ot?Symbol.for("react.portal"):60106,Gt=ot?Symbol.for("react.fragment"):60107,un=ot?Symbol.for("react.strict_mode"):60108,Xt=ot?Symbol.for("react.profiler"):60114,Kn=ot?Symbol.for("react.provider"):60109,zn=ot?Symbol.for("react.context"):60110,De=ot?Symbol.for("react.concurrent_mode"):60111,Zr=ot?Symbol.for("react.forward_ref"):60112,ar=ot?Symbol.for("react.suspense"):60113,Qt=ot?Symbol.for("react.suspense_list"):60120,Co=ot?Symbol.for("react.memo"):60115,Ai=ot?Symbol.for("react.lazy"):60116,yt=ot?Symbol.for("react.block"):60121,Pt="function"==typeof Symbol&&Symbol.iterator;function Pn(f){return null===f||"object"!=typeof f?null:"function"==typeof(f=Pt&&f[Pt]||f["@@iterator"])?f:null}function Cn(f){if(null==f)return null;if("function"==typeof f)return f.displayName||f.name||null;if("string"==typeof f)return f;switch(f){case Gt:return"Fragment";case Nt:return"Portal";case Xt:return"Profiler";case un:return"StrictMode";case ar:return"Suspense";case Qt:return"SuspenseList"}if("object"==typeof f)switch(f.$$typeof){case zn:return"Context.Consumer";case Kn:return"Context.Provider";case Zr:var h=f.render;return h=h.displayName||h.name||"",f.displayName||(""!==h?"ForwardRef("+h+")":"ForwardRef");case Co:return Cn(f.type);case yt:return Cn(f.render);case Ai:if(f=1===f._status?f._result:null)return Cn(f)}return null}function ln(f){var h="";do{e:switch(f.tag){case 3:case 4:case 6:case 7:case 10:case 9:var w="";break e;default:var K=f._debugOwner,re=f._debugSource,_e=Cn(f.type);w=null,K&&(w=Cn(K.type)),K=_e,_e="",re?_e=" (at "+re.fileName.replace(Ie,"")+":"+re.lineNumber+")":w&&(_e=" (created by "+w+")"),w="\n    in "+(K||"Unknown")+_e}h+=w,f=f.return}while(f);return h}function Fr(f){switch(typeof f){case"boolean":case"number":case"object":case"string":case"undefined":return f;default:return""}}function lr(f){var h=f.type;return(f=f.nodeName)&&"input"===f.toLowerCase()&&("checkbox"===h||"radio"===h)}function Ar(f){f._valueTracker||(f._valueTracker=function wn(f){var h=lr(f)?"checked":"value",w=Object.getOwnPropertyDescriptor(f.constructor.prototype,h),K=""+f[h];if(!f.hasOwnProperty(h)&&typeof w<"u"&&"function"==typeof w.get&&"function"==typeof w.set){var re=w.get,_e=w.set;return Object.defineProperty(f,h,{configurable:!0,get:function(){return re.call(this)},set:function(ze){K=""+ze,_e.call(this,ze)}}),Object.defineProperty(f,h,{enumerable:w.enumerable}),{getValue:function(){return K},setValue:function(ze){K=""+ze},stopTracking:function(){f._valueTracker=null,delete f[h]}}}}(f))}function Qn(f){if(!f)return!1;var h=f._valueTracker;if(!h)return!0;var w=h.getValue(),K="";return f&&(K=lr(f)?f.checked?"true":"false":f.value),(f=K)!==w&&(h.setValue(f),!0)}function Ni(f,h){return Z({},h,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h.checked??f._wrapperState.initialChecked})}function Xr(f,h){var w=null==h.defaultValue?"":h.defaultValue,K=null!=h.checked?h.checked:h.defaultChecked;w=Fr(null!=h.value?h.value:w),f._wrapperState={initialChecked:K,initialValue:w,controlled:"checkbox"===h.type||"radio"===h.type?null!=h.checked:null!=h.value}}function jr(f,h){null!=(h=h.checked)&&ce(f,"checked",h,!1)}function di(f,h){jr(f,h);var w=Fr(h.value),K=h.type;if(null!=w)"number"===K?(0===w&&""===f.value||f.value!=w)&&(f.value=""+w):f.value!==""+w&&(f.value=""+w);else if("submit"===K||"reset"===K)return void f.removeAttribute("value");h.hasOwnProperty("value")?Gi(f,h.type,w):h.hasOwnProperty("defaultValue")&&Gi(f,h.type,Fr(h.defaultValue)),null==h.checked&&null!=h.defaultChecked&&(f.defaultChecked=!!h.defaultChecked)}function Lo(f,h,w){if(h.hasOwnProperty("value")||h.hasOwnProperty("defaultValue")){var K=h.type;if(("submit"===K||"reset"===K)&&null==h.value)return;h=""+f._wrapperState.initialValue,w||h===f.value||(f.value=h),f.defaultValue=h}""!==(w=f.name)&&(f.name=""),f.defaultChecked=!!f._wrapperState.initialChecked,""!==w&&(f.name=w)}function Gi(f,h,w){("number"!==h||f.ownerDocument.activeElement!==f)&&(null==w?f.defaultValue=""+f._wrapperState.initialValue:f.defaultValue!==""+w&&(f.defaultValue=""+w))}function Vi(f,h){return f=Z({children:void 0},h),(h=function jo(f){var h="";return q.Children.forEach(f,function(w){null!=w&&(h+=w)}),h}(h.children))&&(f.children=h),f}function Ri(f,h,w,K){if(f=f.options,h){h={};for(var re=0;re<w.length;re++)h["$"+w[re]]=!0;for(w=0;w<f.length;w++)re=h.hasOwnProperty("$"+f[w].value),f[w].selected!==re&&(f[w].selected=re),re&&K&&(f[w].defaultSelected=!0)}else{for(w=""+Fr(w),h=null,re=0;re<f.length;re++){if(f[re].value===w)return f[re].selected=!0,void(K&&(f[re].defaultSelected=!0));null!==h||f[re].disabled||(h=f[re])}null!==h&&(h.selected=!0)}}function Hi(f,h){if(null!=h.dangerouslySetInnerHTML)throw Error(_(91));return Z({},h,{value:void 0,defaultValue:void 0,children:""+f._wrapperState.initialValue})}function wo(f,h){var w=h.value;if(null==w){if(w=h.children,h=h.defaultValue,null!=w){if(null!=h)throw Error(_(92));if(Array.isArray(w)){if(!(1>=w.length))throw Error(_(93));w=w[0]}h=w}null==h&&(h=""),w=h}f._wrapperState={initialValue:Fr(w)}}function Di(f,h){var w=Fr(h.value),K=Fr(h.defaultValue);null!=w&&((w=""+w)!==f.value&&(f.value=w),null==h.defaultValue&&f.defaultValue!==w&&(f.defaultValue=w)),null!=K&&(f.defaultValue=""+K)}function Ti(f){var h=f.textContent;h===f._wrapperState.initialValue&&""!==h&&null!==h&&(f.value=h)}function Qr(f){switch(f){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hr(f,h){return null==f||"http://www.w3.org/1999/xhtml"===f?Qr(h):"http://www.w3.org/2000/svg"===f&&"foreignObject"===h?"http://www.w3.org/1999/xhtml":f}var ma,f,So=(f=function(f,h){if("http://www.w3.org/2000/svg"!==f.namespaceURI||"innerHTML"in f)f.innerHTML=h;else{for((ma=ma||document.createElement("div")).innerHTML="<svg>"+h.valueOf().toString()+"</svg>",h=ma.firstChild;f.firstChild;)f.removeChild(f.firstChild);for(;h.firstChild;)f.appendChild(h.firstChild)}},typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(h,w,K,re){MSApp.execUnsafeLocalFunction(function(){return f(h,w)})}:f);function fi(f,h){if(h){var w=f.firstChild;if(w&&w===f.lastChild&&3===w.nodeType)return void(w.nodeValue=h)}f.textContent=h}function fo(f,h){var w={};return w[f.toLowerCase()]=h.toLowerCase(),w["Webkit"+f]="webkit"+h,w["Moz"+f]="moz"+h,w}var mr={animationend:fo("Animation","AnimationEnd"),animationiteration:fo("Animation","AnimationIteration"),animationstart:fo("Animation","AnimationStart"),transitionend:fo("Transition","TransitionEnd")},Eo={},Ta={};function cs(f){if(Eo[f])return Eo[f];if(!mr[f])return f;var w,h=mr[f];for(w in h)if(h.hasOwnProperty(w)&&w in Ta)return Eo[f]=h[w];return f}P&&(Ta=document.createElement("div").style,"AnimationEvent"in window||(delete mr.animationend.animation,delete mr.animationiteration.animation,delete mr.animationstart.animation),"TransitionEvent"in window||delete mr.transitionend.transition);var Ia=cs("animationend"),ls=cs("animationiteration"),Us=cs("animationstart"),Oa=cs("transitionend"),Fa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Du=new("function"==typeof WeakMap?WeakMap:Map);function ds(f){var h=Du.get(f);return void 0===h&&Du.set(f,h=new Map),h}function A(f){var h=f,w=f;if(f.alternate)for(;h.return;)h=h.return;else{f=h;do{1026&(h=f).effectTag&&(w=h.return),f=h.return}while(f)}return 3===h.tag?w:null}function k(f){if(13===f.tag){var h=f.memoizedState;if(null===h&&null!==(f=f.alternate)&&(h=f.memoizedState),null!==h)return h.dehydrated}return null}function L(f){if(A(f)!==f)throw Error(_(188))}function he(f,h){if(null==h)throw Error(_(30));return null==f?h:Array.isArray(f)?Array.isArray(h)?(f.push.apply(f,h),f):(f.push(h),f):Array.isArray(h)?[f].concat(h):[f,h]}function Pe(f,h,w){Array.isArray(f)?f.forEach(h,w):f&&h.call(w,f)}var Ne=null;function Me(f){if(f){var h=f._dispatchListeners,w=f._dispatchInstances;if(Array.isArray(h))for(var K=0;K<h.length&&!f.isPropagationStopped();K++)te(f,h[K],w[K]);else h&&te(f,h,w);f._dispatchListeners=null,f._dispatchInstances=null,f.isPersistent()||f.constructor.release(f)}}function Ze(f){if(null!==f&&(Ne=he(Ne,f)),f=Ne,Ne=null,f){if(Pe(f,Me),Ne)throw Error(_(95));if(E)throw f=O,E=!1,O=null,f}}function Ue(f){return(f=f.target||f.srcElement||window).correspondingUseElement&&(f=f.correspondingUseElement),3===f.nodeType?f.parentNode:f}function Ve(f){if(!P)return!1;var h=(f="on"+f)in document;return h||((h=document.createElement("div")).setAttribute(f,"return;"),h="function"==typeof h[f]),h}var We=[];function nt(f){f.topLevelType=null,f.nativeEvent=null,f.targetInst=null,f.ancestors.length=0,10>We.length&&We.push(f)}function d(f,h,w,K){if(We.length){var re=We.pop();return re.topLevelType=f,re.eventSystemFlags=K,re.nativeEvent=h,re.targetInst=w,re}return{topLevelType:f,eventSystemFlags:K,nativeEvent:h,targetInst:w,ancestors:[]}}function gt(f){var h=f.targetInst,w=h;do{if(!w){f.ancestors.push(w);break}var K=w;if(3===K.tag)K=K.stateNode.containerInfo;else{for(;K.return;)K=K.return;K=3!==K.tag?null:K.stateNode.containerInfo}if(!K)break;5!==(h=w.tag)&&6!==h||f.ancestors.push(w),w=Hs(K)}while(w);for(w=0;w<f.ancestors.length;w++){h=f.ancestors[w];var re=Ue(f.nativeEvent);K=f.topLevelType;var _e=f.nativeEvent,Ae=f.eventSystemFlags;0===w&&(Ae|=64);for(var ze=null,xt=0;xt<ve.length;xt++){var Mt=ve[xt];Mt&&(Mt=Mt.extractEvents(K,h,_e,re,Ae))&&(ze=he(ze,Mt))}Ze(ze)}}function Et(f,h,w){if(!w.has(f)){switch(f){case"scroll":Lr(h,"scroll",!0);break;case"focus":case"blur":Lr(h,"focus",!0),Lr(h,"blur",!0),w.set("blur",null),w.set("focus",null);break;case"cancel":case"close":Ve(f)&&Lr(h,f,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Fa.indexOf(f)&&tr(f,h)}w.set(f,null)}}var Ee,Ge,Ke,Xe=!1,_t=[],kt=null,Wt=null,$t=null,Zn=new Map,en=new Map,gn=[],sr="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),gr="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function oi(f,h,w,K,re){return{blockedOn:f,topLevelType:h,eventSystemFlags:32|w,nativeEvent:re,container:K}}function Jr(f,h){switch(f){case"focus":case"blur":kt=null;break;case"dragenter":case"dragleave":Wt=null;break;case"mouseover":case"mouseout":$t=null;break;case"pointerover":case"pointerout":Zn.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":en.delete(h.pointerId)}}function $r(f,h,w,K,re,_e){return null===f||f.nativeEvent!==_e?(f=oi(h,w,K,re,_e),null!==h&&null!==(h=Fu(h))&&Ge(h),f):(f.eventSystemFlags|=K,f)}function ct(f){var h=Hs(f.target);if(null!==h){var w=A(h);if(null!==w)if(13===(h=w.tag)){if(null!==(h=k(w)))return f.blockedOn=h,void r.unstable_runWithPriority(f.priority,function(){Ke(w)})}else if(3===h&&w.stateNode.hydrate)return void(f.blockedOn=3===w.tag?w.stateNode.containerInfo:null)}f.blockedOn=null}function lt(f){if(null!==f.blockedOn)return!1;var h=po(f.topLevelType,f.eventSystemFlags,f.container,f.nativeEvent);if(null!==h){var w=Fu(h);return null!==w&&Ge(w),f.blockedOn=h,!1}return!0}function wt(f,h,w){lt(f)&&w.delete(h)}function Ft(){for(Xe=!1;0<_t.length;){var f=_t[0];if(null!==f.blockedOn){null!==(f=Fu(f.blockedOn))&&Ee(f);break}var h=po(f.topLevelType,f.eventSystemFlags,f.container,f.nativeEvent);null!==h?f.blockedOn=h:_t.shift()}null!==kt&&lt(kt)&&(kt=null),null!==Wt&&lt(Wt)&&(Wt=null),null!==$t&&lt($t)&&($t=null),Zn.forEach(wt),en.forEach(wt)}function Rt(f,h){f.blockedOn===h&&(f.blockedOn=null,Xe||(Xe=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ft)))}function Yt(f){function h(re){return Rt(re,f)}if(0<_t.length){Rt(_t[0],f);for(var w=1;w<_t.length;w++){var K=_t[w];K.blockedOn===f&&(K.blockedOn=null)}}for(null!==kt&&Rt(kt,f),null!==Wt&&Rt(Wt,f),null!==$t&&Rt($t,f),Zn.forEach(h),en.forEach(h),w=0;w<gn.length;w++)(K=gn[w]).blockedOn===f&&(K.blockedOn=null);for(;0<gn.length&&null===(w=gn[0]).blockedOn;)ct(w),null===w.blockedOn&&gn.shift()}var vn={},Sn=new Map,Jn=new Map,In=["abort","abort",Ia,"animationEnd",ls,"animationIteration",Us,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Oa,"transitionEnd","waiting","waiting"];function dr(f,h){for(var w=0;w<f.length;w+=2){var K=f[w],re=f[w+1],_e="on"+(re[0].toUpperCase()+re.slice(1));_e={phasedRegistrationNames:{bubbled:_e,captured:_e+"Capture"},dependencies:[K],eventPriority:h},Jn.set(K,h),Sn.set(K,_e),vn[re]=_e}}dr("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),dr("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),dr(In,2);for(var ai="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Mr=0;Mr<ai.length;Mr++)Jn.set(ai[Mr],0);var Yr=r.unstable_UserBlockingPriority,Ci=r.unstable_runWithPriority,Ur=!0;function tr(f,h){Lr(h,f,!1)}function Lr(f,h,w){var K=Jn.get(h);switch(void 0===K?2:K){case 0:K=Po.bind(null,h,1,f);break;case 1:K=$o.bind(null,h,1,f);break;default:K=Cr.bind(null,h,1,f)}f.addEventListener(h,K,!!w)}function Po(f,h,w,K){tt||rt();var re=Cr,_e=tt;tt=!0;try{Fe(re,f,h,w,K)}finally{(tt=_e)||vt()}}function $o(f,h,w,K){Ci(Yr,Cr.bind(null,f,h,w,K))}function Cr(f,h,w,K){if(Ur)if(0<_t.length&&-1<sr.indexOf(f))f=oi(null,f,h,w,K),_t.push(f);else{var re=po(f,h,w,K);if(null===re)Jr(f,K);else if(-1<sr.indexOf(f))f=oi(re,f,h,w,K),_t.push(f);else if(!function Le(f,h,w,K,re){switch(h){case"focus":return kt=$r(kt,f,h,w,K,re),!0;case"dragenter":return Wt=$r(Wt,f,h,w,K,re),!0;case"mouseover":return $t=$r($t,f,h,w,K,re),!0;case"pointerover":var _e=re.pointerId;return Zn.set(_e,$r(Zn.get(_e)||null,f,h,w,K,re)),!0;case"gotpointercapture":return en.set(_e=re.pointerId,$r(en.get(_e)||null,f,h,w,K,re)),!0}return!1}(re,f,h,w,K)){Jr(f,K),f=d(f,K,null,h);try{et(gt,f)}finally{nt(f)}}}}function po(f,h,w,K){if(null!==(w=Hs(w=Ue(K)))){var re=A(w);if(null===re)w=null;else{var _e=re.tag;if(13===_e){if(null!==(w=k(re)))return w;w=null}else if(3===_e){if(re.stateNode.hydrate)return 3===re.tag?re.stateNode.containerInfo:null;w=null}else re!==w&&(w=null)}}f=d(f,K,w,h);try{et(gt,f)}finally{nt(f)}return null}var Uo={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ei=["Webkit","ms","Moz","O"];function zs(f,h,w){return null==h||"boolean"==typeof h||""===h?"":w||"number"!=typeof h||0===h||Uo.hasOwnProperty(f)&&Uo[f]?(""+h).trim():h+"px"}function ta(f,h){for(var w in f=f.style,h)if(h.hasOwnProperty(w)){var K=0===w.indexOf("--"),re=zs(w,h[w],K);"float"===w&&(w="cssFloat"),K?f.setProperty(w,re):f[w]=re}}Object.keys(Uo).forEach(function(f){ei.forEach(function(h){h=h+f.charAt(0).toUpperCase()+f.substring(1),Uo[h]=Uo[f]})});var ga=Z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Tu(f,h){if(h){if(ga[f]&&(null!=h.children||null!=h.dangerouslySetInnerHTML))throw Error(_(137,f,""));if(null!=h.dangerouslySetInnerHTML){if(null!=h.children)throw Error(_(60));if("object"!=typeof h.dangerouslySetInnerHTML||!("__html"in h.dangerouslySetInnerHTML))throw Error(_(61))}if(null!=h.style&&"object"!=typeof h.style)throw Error(_(62,""))}}function Iu(f,h){if(-1===f.indexOf("-"))return"string"==typeof h.is;switch(f){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ou="http://www.w3.org/1999/xhtml";function va(f,h){var w=ds(f=9===f.nodeType||11===f.nodeType?f:f.ownerDocument);h=x[h];for(var K=0;K<h.length;K++)Et(h[K],f,w)}function sf(){}function uf(f){if(typeof(f=f||(typeof document<"u"?document:void 0))>"u")return null;try{return f.activeElement||f.body}catch{return f.body}}function Ey(f){for(;f&&f.firstChild;)f=f.firstChild;return f}function Py(f,h){var K,w=Ey(f);for(f=0;w;){if(3===w.nodeType){if(K=f+w.textContent.length,f<=h&&K>=h)return{node:w,offset:h-f};f=K}e:{for(;w;){if(w.nextSibling){w=w.nextSibling;break e}w=w.parentNode}w=void 0}w=Ey(w)}}function ky(f,h){return!(!f||!h)&&(f===h||(!f||3!==f.nodeType)&&(h&&3===h.nodeType?ky(f,h.parentNode):"contains"in f?f.contains(h):!!f.compareDocumentPosition&&!!(16&f.compareDocumentPosition(h))))}function Ay(){for(var f=window,h=uf();h instanceof f.HTMLIFrameElement;){try{var w="string"==typeof h.contentWindow.location.href}catch{w=!1}if(!w)break;h=uf((f=h.contentWindow).document)}return h}function Ma(f){var h=f&&f.nodeName&&f.nodeName.toLowerCase();return h&&("input"===h&&("text"===f.type||"search"===f.type||"tel"===f.type||"url"===f.type||"password"===f.type)||"textarea"===h||"true"===f.contentEditable)}var Ry="$",Dy="/$",cf="$?",Ty="$!",lf=null,df=null;function Iy(f,h){switch(f){case"button":case"input":case"select":case"textarea":return!!h.autoFocus}return!1}function ff(f,h){return"textarea"===f||"option"===f||"noscript"===f||"string"==typeof h.children||"number"==typeof h.children||"object"==typeof h.dangerouslySetInnerHTML&&null!==h.dangerouslySetInnerHTML&&null!=h.dangerouslySetInnerHTML.__html}var pf="function"==typeof setTimeout?setTimeout:void 0,jE="function"==typeof clearTimeout?clearTimeout:void 0;function Gs(f){for(;null!=f;f=f.nextSibling){var h=f.nodeType;if(1===h||3===h)break}return f}function Oy(f){f=f.previousSibling;for(var h=0;f;){if(8===f.nodeType){var w=f.data;if(w===Ry||w===Ty||w===cf){if(0===h)return f;h--}else w===Dy&&h++}f=f.previousSibling}return null}var hf=Math.random().toString(36).slice(2),Ba="__reactInternalInstance$"+hf,mf="__reactEventHandlers$"+hf,Vs="__reactContainere$"+hf;function Hs(f){var h=f[Ba];if(h)return h;for(var w=f.parentNode;w;){if(h=w[Vs]||w[Ba]){if(w=h.alternate,null!==h.child||null!==w&&null!==w.child)for(f=Oy(f);null!==f;){if(w=f[Ba])return w;f=Oy(f)}return h}w=(f=w).parentNode}return null}function Fu(f){return!(f=f[Ba]||f[Vs])||5!==f.tag&&6!==f.tag&&13!==f.tag&&3!==f.tag?null:f}function fs(f){if(5===f.tag||6===f.tag)return f.stateNode;throw Error(_(33))}function gf(f){return f[mf]||null}function _a(f){do{f=f.return}while(f&&5!==f.tag);return f||null}function Fy(f,h){var w=f.stateNode;if(!w)return null;var K=V(w);if(!K)return null;w=K[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(K=!K.disabled)||(K=!("button"===(f=f.type)||"input"===f||"select"===f||"textarea"===f)),f=!K;break e;default:f=!1}if(f)return null;if(w&&"function"!=typeof w)throw Error(_(231,h,typeof w));return w}function $E(f,h,w){(h=Fy(f,w.dispatchConfig.phasedRegistrationNames[h]))&&(w._dispatchListeners=he(w._dispatchListeners,h),w._dispatchInstances=he(w._dispatchInstances,f))}function UE(f){if(f&&f.dispatchConfig.phasedRegistrationNames){for(var h=f._targetInst,w=[];h;)w.push(h),h=_a(h);for(h=w.length;0<h--;)$E(w[h],"captured",f);for(h=0;h<w.length;h++)$E(w[h],"bubbled",f)}}function vf(f,h,w){f&&w&&w.dispatchConfig.registrationName&&(h=Fy(f,w.dispatchConfig.registrationName))&&(w._dispatchListeners=he(w._dispatchListeners,h),w._dispatchInstances=he(w._dispatchInstances,f))}function ps(f){Pe(f,UE)}var Na=null,_f=null,Lc=null;function By(){if(Lc)return Lc;var f,K,h=_f,w=h.length,re="value"in Na?Na.value:Na.textContent,_e=re.length;for(f=0;f<w&&h[f]===re[f];f++);var Ae=w-f;for(K=1;K<=Ae&&h[w-K]===re[_e-K];K++);return Lc=re.slice(f,1<K?1-K:void 0)}function jc(){return!0}function yf(){return!1}function ho(f,h,w,K){for(var re in this.dispatchConfig=f,this._targetInst=h,this.nativeEvent=w,f=this.constructor.Interface)f.hasOwnProperty(re)&&((h=f[re])?this[re]=h(w):"target"===re?this.target=K:this[re]=w[re]);return this.isDefaultPrevented=(null!=w.defaultPrevented?w.defaultPrevented:!1===w.returnValue)?jc:yf,this.isPropagationStopped=yf,this}function zE(f,h,w,K){if(this.eventPool.length){var re=this.eventPool.pop();return this.call(re,f,h,w,K),re}return new this(f,h,w,K)}function Ny(f){if(!(f instanceof this))throw Error(_(279));f.destructor(),10>this.eventPool.length&&this.eventPool.push(f)}function xf(f){f.eventPool=[],f.getPooled=zE,f.release=Ny}Z(ho.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():"unknown"!=typeof h.returnValue&&(h.returnValue=!1),this.isDefaultPrevented=jc)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():"unknown"!=typeof h.cancelBubble&&(h.cancelBubble=!0),this.isPropagationStopped=jc)},persist:function(){this.isPersistent=jc},isPersistent:yf,destructor:function(){var w,h=this.constructor.Interface;for(w in h)this[w]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=yf,this._dispatchInstances=this._dispatchListeners=null}}),ho.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(h){return h.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},ho.extend=function(f){function h(){}function w(){return K.apply(this,arguments)}var K=this;h.prototype=K.prototype;var re=new h;return Z(re,w.prototype),(w.prototype=re).constructor=w,w.Interface=Z({},K.Interface,f),w.extend=K.extend,xf(w),w},xf(ho);var GE=ho.extend({data:null}),VE=ho.extend({data:null}),HE=[9,13,27,32],bf=P&&"CompositionEvent"in window,Mu=null;P&&"documentMode"in document&&(Mu=document.documentMode);var hA=P&&"TextEvent"in window&&!Mu,Zy=P&&(!bf||Mu&&8<Mu&&11>=Mu),Ly=String.fromCharCode(32),ya={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},jy=!1;function $y(f,h){switch(f){case"keyup":return-1!==HE.indexOf(h.keyCode);case"keydown":return 229!==h.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function Uy(f){return"object"==typeof(f=f.detail)&&"data"in f?f.data:null}var Ks=!1,KE={eventTypes:ya,extractEvents:function(h,w,K,re){var _e;if(bf)e:{switch(h){case"compositionstart":var Ae=ya.compositionStart;break e;case"compositionend":Ae=ya.compositionEnd;break e;case"compositionupdate":Ae=ya.compositionUpdate;break e}Ae=void 0}else Ks?$y(h,K)&&(Ae=ya.compositionEnd):"keydown"===h&&229===K.keyCode&&(Ae=ya.compositionStart);return Ae?(Zy&&"ko"!==K.locale&&(Ks||Ae!==ya.compositionStart?Ae===ya.compositionEnd&&Ks&&(_e=By()):(_f="value"in(Na=re)?Na.value:Na.textContent,Ks=!0)),Ae=GE.getPooled(Ae,w,K,re),(_e||null!==(_e=Uy(K)))&&(Ae.data=_e),ps(Ae),_e=Ae):_e=null,(h=hA?function mA(f,h){switch(f){case"compositionend":return Uy(h);case"keypress":return 32!==h.which?null:(jy=!0,Ly);case"textInput":return(f=h.data)===Ly&&jy?null:f;default:return null}}(h,K):function qE(f,h){if(Ks)return"compositionend"===f||!bf&&$y(f,h)?(f=By(),Lc=_f=Na=null,Ks=!1,f):null;switch(f){case"paste":default:return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return Zy&&"ko"!==h.locale?null:h.data}}(h,K))?((w=VE.getPooled(ya.beforeInput,w,K,re)).data=h,ps(w)):w=null,null===_e?w:null===w?_e:[_e,w]}},WE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zy(f){var h=f&&f.nodeName&&f.nodeName.toLowerCase();return"input"===h?!!WE[f.type]:"textarea"===h}var Gy={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Vy(f,h,w){return(f=ho.getPooled(Gy.change,f,h,w)).type="change",ee(w),ps(f),f}var Bu=null,Nu=null;function gA(f){Ze(f)}function $c(f){if(Qn(fs(f)))return f}function XE(f,h){if("change"===f)return h}var Cf=!1;function Hy(){Bu&&(Bu.detachEvent("onpropertychange",qy),Nu=Bu=null)}function qy(f){if("value"===f.propertyName&&$c(Nu))if(f=Vy(Nu,f,Ue(f)),tt)Ze(f);else{tt=!0;try{ne(gA,f)}finally{tt=!1,vt()}}}function QE(f,h,w){"focus"===f?(Hy(),Nu=w,(Bu=h).attachEvent("onpropertychange",qy)):"blur"===f&&Hy()}function JE(f){if("selectionchange"===f||"keyup"===f||"keydown"===f)return $c(Nu)}function vA(f,h){if("click"===f)return $c(h)}function YE(f,h){if("input"===f||"change"===f)return $c(h)}P&&(Cf=Ve("input")&&(!document.documentMode||9<document.documentMode));var e2={eventTypes:Gy,_isInputEventSupported:Cf,extractEvents:function(h,w,K,re){var _e=w?fs(w):window,Ae=_e.nodeName&&_e.nodeName.toLowerCase();if("select"===Ae||"input"===Ae&&"file"===_e.type)var ze=XE;else if(zy(_e))if(Cf)ze=YE;else{ze=JE;var xt=QE}else(Ae=_e.nodeName)&&"input"===Ae.toLowerCase()&&("checkbox"===_e.type||"radio"===_e.type)&&(ze=vA);if(ze&&(ze=ze(h,w)))return Vy(ze,K,re);xt&&xt(h,_e,w),"blur"===h&&(h=_e._wrapperState)&&h.controlled&&"number"===_e.type&&Gi(_e,"number",_e.value)}},Zu=ho.extend({view:null,detail:null}),t2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function n2(f){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(f):!!(f=t2[f])&&!!h[f]}function wf(){return n2}var r2=0,Ky=0,Wy=!1,Sf=!1,Lu=Zu.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:wf,button:null,buttons:null,relatedTarget:function(h){return h.relatedTarget||(h.fromElement===h.srcElement?h.toElement:h.fromElement)},movementX:function(h){if("movementX"in h)return h.movementX;var w=r2;return r2=h.screenX,Wy?"mousemove"===h.type?h.screenX-w:0:(Wy=!0,0)},movementY:function(h){if("movementY"in h)return h.movementY;var w=Ky;return Ky=h.screenY,Sf?"mousemove"===h.type?h.screenY-w:0:(Sf=!0,0)}}),Xy=Lu.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),ju={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},o2={eventTypes:ju,extractEvents:function(h,w,K,re,_e){var Ae="mouseover"===h||"pointerover"===h,ze="mouseout"===h||"pointerout"===h;if(Ae&&!(32&_e)&&(K.relatedTarget||K.fromElement)||!ze&&!Ae)return null;if(Ae=re.window===re?re:(Ae=re.ownerDocument)?Ae.defaultView||Ae.parentWindow:window,ze?(ze=w,null!==(w=(w=K.relatedTarget||K.toElement)?Hs(w):null)&&(w!==A(w)||5!==w.tag&&6!==w.tag)&&(w=null)):ze=null,ze===w)return null;if("mouseout"===h||"mouseover"===h)var Mt=Lu,Ht=ju.mouseLeave,_n=ju.mouseEnter,bn="mouse";else("pointerout"===h||"pointerover"===h)&&(Mt=Xy,Ht=ju.pointerLeave,_n=ju.pointerEnter,bn="pointer");if(h=null==ze?Ae:fs(ze),Ae=null==w?Ae:fs(w),(Ht=Mt.getPooled(Ht,ze,K,re)).type=bn+"leave",Ht.target=h,Ht.relatedTarget=Ae,(K=Mt.getPooled(_n,w,K,re)).type=bn+"enter",K.target=Ae,K.relatedTarget=h,bn=w,(re=ze)&&bn)e:{for(_n=bn,ze=0,h=Mt=re;h;h=_a(h))ze++;for(h=0,w=_n;w;w=_a(w))h++;for(;0<ze-h;)Mt=_a(Mt),ze--;for(;0<h-ze;)_n=_a(_n),h--;for(;ze--;){if(Mt===_n||Mt===_n.alternate)break e;Mt=_a(Mt),_n=_a(_n)}Mt=null}else Mt=null;for(_n=Mt,Mt=[];re&&re!==_n&&(null===(ze=re.alternate)||ze!==_n);)Mt.push(re),re=_a(re);for(re=[];bn&&bn!==_n&&(null===(ze=bn.alternate)||ze!==_n);)re.push(bn),bn=_a(bn);for(bn=0;bn<Mt.length;bn++)vf(Mt[bn],"bubbled",Ht);for(bn=re.length;0<bn--;)vf(re[bn],"captured",K);return 64&_e?[Ht,K]:[Ht]}},Ws="function"==typeof Object.is?Object.is:function a2(f,h){return f===h&&(0!==f||1/f==1/h)||f!=f&&h!=h},s2=Object.prototype.hasOwnProperty;function $u(f,h){if(Ws(f,h))return!0;if("object"!=typeof f||null===f||"object"!=typeof h||null===h)return!1;var w=Object.keys(f),K=Object.keys(h);if(w.length!==K.length)return!1;for(K=0;K<w.length;K++)if(!s2.call(h,w[K])||!Ws(f[w[K]],h[w[K]]))return!1;return!0}var u2=P&&"documentMode"in document&&11>=document.documentMode,Qy={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Xs=null,Ef=null,Uu=null,Jy=!1;function Yy(f,h){var w=h.window===h?h.document:9===h.nodeType?h:h.ownerDocument;return Jy||null==Xs||Xs!==uf(w)?null:(w="selectionStart"in(w=Xs)&&Ma(w)?{start:w.selectionStart,end:w.selectionEnd}:{anchorNode:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset},Uu&&$u(Uu,w)?null:(Uu=w,(f=ho.getPooled(Qy.select,Ef,f,h)).type="select",f.target=Xs,ps(f),f))}var c2={eventTypes:Qy,extractEvents:function(h,w,K,re,_e,Ae){if(!(Ae=!(_e=Ae||(re.window===re?re.document:9===re.nodeType?re:re.ownerDocument)))){e:{_e=ds(_e),Ae=x.onSelect;for(var ze=0;ze<Ae.length;ze++)if(!_e.has(Ae[ze])){_e=!1;break e}_e=!0}Ae=!_e}if(Ae)return null;switch(_e=w?fs(w):window,h){case"focus":(zy(_e)||"true"===_e.contentEditable)&&(Xs=_e,Ef=w,Uu=null);break;case"blur":Uu=Ef=Xs=null;break;case"mousedown":Jy=!0;break;case"contextmenu":case"mouseup":case"dragend":return Jy=!1,Yy(K,re);case"selectionchange":if(u2)break;case"keydown":case"keyup":return Yy(K,re)}return null}},l2=ho.extend({animationName:null,elapsedTime:null,pseudoElement:null}),d2=ho.extend({clipboardData:function(h){return"clipboardData"in h?h.clipboardData:window.clipboardData}}),f2=Zu.extend({relatedTarget:null});function Uc(f){var h=f.keyCode;return"charCode"in f?0===(f=f.charCode)&&13===h&&(f=13):f=h,10===f&&(f=13),32<=f||13===f?f:0}var _A={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},p2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},h2=Zu.extend({key:function(h){if(h.key){var w=_A[h.key]||h.key;if("Unidentified"!==w)return w}return"keypress"===h.type?13===(h=Uc(h))?"Enter":String.fromCharCode(h):"keydown"===h.type||"keyup"===h.type?p2[h.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:wf,charCode:function(h){return"keypress"===h.type?Uc(h):0},keyCode:function(h){return"keydown"===h.type||"keyup"===h.type?h.keyCode:0},which:function(h){return"keypress"===h.type?Uc(h):"keydown"===h.type||"keyup"===h.type?h.keyCode:0}}),e0=Lu.extend({dataTransfer:null}),m2=Zu.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:wf}),g2=ho.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),v2=Lu.extend({deltaX:function(h){return"deltaX"in h?h.deltaX:"wheelDeltaX"in h?-h.wheelDeltaX:0},deltaY:function(h){return"deltaY"in h?h.deltaY:"wheelDeltaY"in h?-h.wheelDeltaY:"wheelDelta"in h?-h.wheelDelta:0},deltaZ:null,deltaMode:null}),_2={eventTypes:vn,extractEvents:function(h,w,K,re){var _e=Sn.get(h);if(!_e)return null;switch(h){case"keypress":if(0===Uc(K))return null;case"keydown":case"keyup":h=h2;break;case"blur":case"focus":h=f2;break;case"click":if(2===K.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Lu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=e0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=m2;break;case Ia:case ls:case Us:h=l2;break;case Oa:h=g2;break;case"scroll":h=Zu;break;case"wheel":h=v2;break;case"copy":case"cut":case"paste":h=d2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Xy;break;default:h=ho}return ps(w=h.getPooled(_e,w,K,re)),w}};if(z)throw Error(_(101));z=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),J(),V=gf,G=Fu,H=fs,D({SimpleEventPlugin:_2,EnterLeaveEventPlugin:o2,ChangeEventPlugin:e2,SelectEventPlugin:c2,BeforeInputEventPlugin:KE});var t0=[],Qs=-1;function zr(f){0>Qs||(f.current=t0[Qs],t0[Qs]=null,Qs--)}function qr(f,h){Qs++,t0[Qs]=f.current,f.current=h}var hs={},si={current:hs},qi={current:!1},ms=hs;function Js(f,h){var w=f.type.contextTypes;if(!w)return hs;var K=f.stateNode;if(K&&K.__reactInternalMemoizedUnmaskedChildContext===h)return K.__reactInternalMemoizedMaskedChildContext;var _e,re={};for(_e in w)re[_e]=h[_e];return K&&((f=f.stateNode).__reactInternalMemoizedUnmaskedChildContext=h,f.__reactInternalMemoizedMaskedChildContext=re),re}function Ki(f){return null!=f.childContextTypes}function zc(){zr(qi),zr(si)}function n0(f,h,w){if(si.current!==hs)throw Error(_(168));qr(si,h),qr(qi,w)}function r0(f,h,w){var K=f.stateNode;if(f=h.childContextTypes,"function"!=typeof K.getChildContext)return w;for(var re in K=K.getChildContext())if(!(re in f))throw Error(_(108,Cn(h)||"Unknown",re));return Z({},w,{},K)}function gs(f){return f=(f=f.stateNode)&&f.__reactInternalMemoizedMergedChildContext||hs,ms=si.current,qr(si,f),qr(qi,qi.current),!0}function He(f,h,w){var K=f.stateNode;if(!K)throw Error(_(169));w?(f=r0(f,h,ms),K.__reactInternalMemoizedMergedChildContext=f,zr(qi),zr(si),qr(si,f)):zr(qi),qr(qi,w)}var o0=r.unstable_runWithPriority,Lt=r.unstable_scheduleCallback,Zt=r.unstable_cancelCallback,Ce=r.unstable_requestPaint,Ys=r.unstable_now,x2=r.unstable_getCurrentPriorityLevel,Gc=r.unstable_ImmediatePriority,a0=r.unstable_UserBlockingPriority,s0=r.unstable_NormalPriority,u0=r.unstable_LowPriority,vi=r.unstable_IdlePriority,Vc={},b2=r.unstable_shouldYield,C2=void 0!==Ce?Ce:function(){},xa=null,fr=null,nr=!1,Rr=Ys(),Wi=1e4>Rr?Ys:function(){return Ys()-Rr};function ti(){switch(x2()){case Gc:return 99;case a0:return 98;case s0:return 97;case u0:return 96;case vi:return 95;default:throw Error(_(332))}}function Zi(f){switch(f){case 99:return Gc;case 98:return a0;case 97:return s0;case 96:return u0;case 95:return vi;default:throw Error(_(332))}}function kn(f,h){return f=Zi(f),o0(f,h)}function Za(f,h,w){return f=Zi(f),Lt(f,h,w)}function ko(f){return null===xa?(xa=[f],fr=Lt(Gc,zo)):xa.push(f),Vc}function Li(){if(null!==fr){var f=fr;fr=null,Zt(f)}zo()}function zo(){if(!nr&&null!==xa){nr=!0;var f=0;try{var h=xa;kn(99,function(){for(;f<h.length;f++){var w=h[f];do{w=w(!0)}while(null!==w)}}),xa=null}catch(w){throw null!==xa&&(xa=xa.slice(f+1)),Lt(Gc,Li),w}finally{nr=!1}}}function je(f,h,w){return 1073741821-(1+((1073741821-f+h/10)/(w/=10)|0))*w}function ji(f,h){if(f&&f.defaultProps)for(var w in h=Z({},h),f=f.defaultProps)void 0===h[w]&&(h[w]=f[w]);return h}var Hc={current:null},qc=null,mo=null,zu=null;function Pf(){zu=mo=qc=null}function eu(f){var h=Hc.current;zr(Hc),f.type._context._currentValue=h}function c0(f,h){for(;null!==f;){var w=f.alternate;if(f.childExpirationTime<h)f.childExpirationTime=h,null!==w&&w.childExpirationTime<h&&(w.childExpirationTime=h);else{if(!(null!==w&&w.childExpirationTime<h))break;w.childExpirationTime=h}f=f.return}}function tu(f,h){qc=f,zu=mo=null,null!==(f=f.dependencies)&&null!==f.firstContext&&(f.expirationTime>=h&&(aa=!0),f.firstContext=null)}function Ao(f,h){if(zu!==f&&!1!==h&&0!==h)if(("number"!=typeof h||1073741823===h)&&(zu=f,h=1073741823),h={context:f,observedBits:h,next:null},null===mo){if(null===qc)throw Error(_(308));mo=h,qc.dependencies={expirationTime:0,firstContext:h,responders:null}}else mo=mo.next=h;return f._currentValue}var pn=!1;function Ir(f){f.updateQueue={baseState:f.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function Go(f,h){h.updateQueue===(f=f.updateQueue)&&(h.updateQueue={baseState:f.baseState,baseQueue:f.baseQueue,shared:f.shared,effects:f.effects})}function ba(f,h){return(f={expirationTime:f,suspenseConfig:h,tag:0,payload:null,callback:null,next:null}).next=f}function La(f,h){if(null!==(f=f.updateQueue)){var w=(f=f.shared).pending;null===w?h.next=h:(h.next=w.next,w.next=h),f.pending=h}}function l0(f,h){var w=f.alternate;null!==w&&Go(w,f),null===(w=(f=f.updateQueue).baseQueue)?(f.baseQueue=h.next=h,h.next=h):(h.next=w.next,w.next=h)}function Kc(f,h,w,K){var re=f.updateQueue;pn=!1;var _e=re.baseQueue,Ae=re.shared.pending;if(null!==Ae){if(null!==_e){var ze=_e.next;_e.next=Ae.next,Ae.next=ze}_e=Ae,re.shared.pending=null,null!==(ze=f.alternate)&&null!==(ze=ze.updateQueue)&&(ze.baseQueue=Ae)}if(null!==_e){var xt=re.baseState,Mt=0,Ht=null,_n=null,bn=null;if(null!==(ze=_e.next))for(var ur=ze;;){if((Ae=ur.expirationTime)<K){var Io={expirationTime:ur.expirationTime,suspenseConfig:ur.suspenseConfig,tag:ur.tag,payload:ur.payload,callback:ur.callback,next:null};null===bn?(_n=bn=Io,Ht=xt):bn=bn.next=Io,Ae>Mt&&(Mt=Ae)}else{null!==bn&&(bn=bn.next={expirationTime:1073741823,suspenseConfig:ur.suspenseConfig,tag:ur.tag,payload:ur.payload,callback:ur.callback,next:null}),np(Ae,ur.suspenseConfig);e:{var Ei=f,St=ur;switch(Ae=h,Io=w,St.tag){case 1:if("function"==typeof(Ei=St.payload)){xt=Ei.call(Io,xt,Ae);break e}xt=Ei;break e;case 3:Ei.effectTag=-4097&Ei.effectTag|64;case 0:if(null==(Ae="function"==typeof(Ei=St.payload)?Ei.call(Io,xt,Ae):Ei))break e;xt=Z({},xt,Ae);break e;case 2:pn=!0}}null!==ur.callback&&(f.effectTag|=32,null===(Ae=re.effects)?re.effects=[ur]:Ae.push(ur))}if(null===(ur=ur.next)||ur===ze){if(null===(Ae=re.shared.pending))break;ur=_e.next=Ae.next,Ae.next=ze,re.baseQueue=_e=Ae,re.shared.pending=null}}null===bn?Ht=xt:bn.next=_n,re.baseState=Ht,re.baseQueue=bn,dc(Mt),f.expirationTime=Mt,f.memoizedState=xt}}function d0(f,h,w){if(f=h.effects,h.effects=null,null!==f)for(h=0;h<f.length;h++){var K=f[h],re=K.callback;if(null!==re){if(K.callback=null,K=re,re=w,"function"!=typeof K)throw Error(_(191,K));K.call(re)}}}var Gu=le.ReactCurrentBatchConfig,f0=(new q.Component).refs;function kf(f,h,w,K){w=null==(w=w(K,h=f.memoizedState))?h:Z({},h,w),f.memoizedState=w,0===f.expirationTime&&(f.updateQueue.baseState=w)}var ja={isMounted:function(h){return!!(h=h._reactInternalFiber)&&A(h)===h},enqueueSetState:function(h,w,K){h=h._reactInternalFiber;var re=Do(),_e=Gu.suspense;(_e=ba(re=du(re,h,_e),_e)).payload=w,null!=K&&(_e.callback=K),La(h,_e),Va(h,re)},enqueueReplaceState:function(h,w,K){h=h._reactInternalFiber;var re=Do(),_e=Gu.suspense;(_e=ba(re=du(re,h,_e),_e)).tag=1,_e.payload=w,null!=K&&(_e.callback=K),La(h,_e),Va(h,re)},enqueueForceUpdate:function(h,w){h=h._reactInternalFiber;var K=Do(),re=Gu.suspense;(re=ba(K=du(K,h,re),re)).tag=2,null!=w&&(re.callback=w),La(h,re),Va(h,K)}};function Af(f,h,w,K,re,_e,Ae){return"function"==typeof(f=f.stateNode).shouldComponentUpdate?f.shouldComponentUpdate(K,_e,Ae):!(h.prototype&&h.prototype.isPureReactComponent&&$u(w,K)&&$u(re,_e))}function vs(f,h,w){var K=!1,re=hs,_e=h.contextType;return"object"==typeof _e&&null!==_e?_e=Ao(_e):(re=Ki(h)?ms:si.current,_e=(K=null!=(K=h.contextTypes))?Js(f,re):hs),h=new h(w,_e),f.memoizedState=null!=h.state?h.state:null,h.updater=ja,f.stateNode=h,h._reactInternalFiber=f,K&&((f=f.stateNode).__reactInternalMemoizedUnmaskedChildContext=re,f.__reactInternalMemoizedMaskedChildContext=_e),h}function p0(f,h,w,K){f=h.state,"function"==typeof h.componentWillReceiveProps&&h.componentWillReceiveProps(w,K),"function"==typeof h.UNSAFE_componentWillReceiveProps&&h.UNSAFE_componentWillReceiveProps(w,K),h.state!==f&&ja.enqueueReplaceState(h,h.state,null)}function Wc(f,h,w,K){var re=f.stateNode;re.props=w,re.state=f.memoizedState,re.refs=f0,Ir(f);var _e=h.contextType;"object"==typeof _e&&null!==_e?re.context=Ao(_e):(_e=Ki(h)?ms:si.current,re.context=Js(f,_e)),Kc(f,w,re,K),re.state=f.memoizedState,"function"==typeof(_e=h.getDerivedStateFromProps)&&(kf(f,h,_e,w),re.state=f.memoizedState),"function"==typeof h.getDerivedStateFromProps||"function"==typeof re.getSnapshotBeforeUpdate||"function"!=typeof re.UNSAFE_componentWillMount&&"function"!=typeof re.componentWillMount||(h=re.state,"function"==typeof re.componentWillMount&&re.componentWillMount(),"function"==typeof re.UNSAFE_componentWillMount&&re.UNSAFE_componentWillMount(),h!==re.state&&ja.enqueueReplaceState(re,re.state,null),Kc(f,w,re,K),re.state=f.memoizedState),"function"==typeof re.componentDidMount&&(f.effectTag|=4)}var Vu=Array.isArray;function Hu(f,h,w){if(null!==(f=w.ref)&&"function"!=typeof f&&"object"!=typeof f){if(w._owner){if(w=w._owner){if(1!==w.tag)throw Error(_(309));var K=w.stateNode}if(!K)throw Error(_(147,f));var re=""+f;return null!==h&&null!==h.ref&&"function"==typeof h.ref&&h.ref._stringRef===re?h.ref:((h=function(Ae){var ze=K.refs;ze===f0&&(ze=K.refs={}),null===Ae?delete ze[re]:ze[re]=Ae})._stringRef=re,h)}if("string"!=typeof f)throw Error(_(284));if(!w._owner)throw Error(_(290,f))}return f}function Xc(f,h){if("textarea"!==f.type)throw Error(_(31,"[object Object]"===Object.prototype.toString.call(h)?"object with keys {"+Object.keys(h).join(", ")+"}":h,""))}function qu(f){function h(St,mt){if(f){var It=St.lastEffect;null!==It?(It.nextEffect=mt,St.lastEffect=mt):St.firstEffect=St.lastEffect=mt,mt.nextEffect=null,mt.effectTag=8}}function w(St,mt){if(!f)return null;for(;null!==mt;)h(St,mt),mt=mt.sibling;return null}function K(St,mt){for(St=new Map;null!==mt;)St.set(null!==mt.key?mt.key:mt.index,mt),mt=mt.sibling;return St}function re(St,mt){return(St=ws(St,mt)).index=0,St.sibling=null,St}function _e(St,mt,It){return St.index=It,f?null!==(It=St.alternate)?(It=It.index)<mt?(St.effectTag=2,mt):It:(St.effectTag=2,mt):mt}function Ae(St){return f&&null===St.alternate&&(St.effectTag=2),St}function ze(St,mt,It,Kt){return null===mt||6!==mt.tag?((mt=op(It,St.mode,Kt)).return=St,mt):((mt=re(mt,It)).return=St,mt)}function xt(St,mt,It,Kt){return null!==mt&&mt.elementType===It.type?((Kt=re(mt,It.props)).ref=Hu(St,mt,It),Kt.return=St,Kt):((Kt=kl(It.type,It.key,It.props,null,St.mode,Kt)).ref=Hu(St,mt,It),Kt.return=St,Kt)}function Mt(St,mt,It,Kt){return null===mt||4!==mt.tag||mt.stateNode.containerInfo!==It.containerInfo||mt.stateNode.implementation!==It.implementation?((mt=ap(It,St.mode,Kt)).return=St,mt):((mt=re(mt,It.children||[])).return=St,mt)}function Ht(St,mt,It,Kt,rn){return null===mt||7!==mt.tag?((mt=qa(It,St.mode,Kt,rn)).return=St,mt):((mt=re(mt,It)).return=St,mt)}function _n(St,mt,It){if("string"==typeof mt||"number"==typeof mt)return(mt=op(""+mt,St.mode,It)).return=St,mt;if("object"==typeof mt&&null!==mt){switch(mt.$$typeof){case Tt:return(It=kl(mt.type,mt.key,mt.props,null,St.mode,It)).ref=Hu(St,null,mt),It.return=St,It;case Nt:return(mt=ap(mt,St.mode,It)).return=St,mt}if(Vu(mt)||Pn(mt))return(mt=qa(mt,St.mode,It,null)).return=St,mt;Xc(St,mt)}return null}function bn(St,mt,It,Kt){var rn=null!==mt?mt.key:null;if("string"==typeof It||"number"==typeof It)return null!==rn?null:ze(St,mt,""+It,Kt);if("object"==typeof It&&null!==It){switch(It.$$typeof){case Tt:return It.key===rn?It.type===Gt?Ht(St,mt,It.props.children,Kt,rn):xt(St,mt,It,Kt):null;case Nt:return It.key===rn?Mt(St,mt,It,Kt):null}if(Vu(It)||Pn(It))return null!==rn?null:Ht(St,mt,It,Kt,null);Xc(St,It)}return null}function ur(St,mt,It,Kt,rn){if("string"==typeof Kt||"number"==typeof Kt)return ze(mt,St=St.get(It)||null,""+Kt,rn);if("object"==typeof Kt&&null!==Kt){switch(Kt.$$typeof){case Tt:return St=St.get(null===Kt.key?It:Kt.key)||null,Kt.type===Gt?Ht(mt,St,Kt.props.children,rn,Kt.key):xt(mt,St,Kt,rn);case Nt:return Mt(mt,St=St.get(null===Kt.key?It:Kt.key)||null,Kt,rn)}if(Vu(Kt)||Pn(Kt))return Ht(mt,St=St.get(It)||null,Kt,rn,null);Xc(mt,Kt)}return null}return function(St,mt,It,Kt){var rn="object"==typeof It&&null!==It&&It.type===Gt&&null===It.key;rn&&(It=It.props.children);var dn="object"==typeof It&&null!==It;if(dn)switch(It.$$typeof){case Tt:e:{for(dn=It.key,rn=mt;null!==rn;){if(rn.key===dn){if(7===rn.tag){if(It.type===Gt){w(St,rn.sibling),(mt=re(rn,It.props.children)).return=St,St=mt;break e}}else if(rn.elementType===It.type){w(St,rn.sibling),(mt=re(rn,It.props)).ref=Hu(St,rn,It),mt.return=St,St=mt;break e}w(St,rn);break}h(St,rn),rn=rn.sibling}It.type===Gt?((mt=qa(It.props.children,St.mode,Kt,It.key)).return=St,St=mt):((Kt=kl(It.type,It.key,It.props,null,St.mode,Kt)).ref=Hu(St,mt,It),Kt.return=St,St=Kt)}return Ae(St);case Nt:e:{for(rn=It.key;null!==mt;){if(mt.key===rn){if(4===mt.tag&&mt.stateNode.containerInfo===It.containerInfo&&mt.stateNode.implementation===It.implementation){w(St,mt.sibling),(mt=re(mt,It.children||[])).return=St,St=mt;break e}w(St,mt);break}h(St,mt),mt=mt.sibling}(mt=ap(It,St.mode,Kt)).return=St,St=mt}return Ae(St)}if("string"==typeof It||"number"==typeof It)return It=""+It,null!==mt&&6===mt.tag?(w(St,mt.sibling),(mt=re(mt,It)).return=St,St=mt):(w(St,mt),(mt=op(It,St.mode,Kt)).return=St,St=mt),Ae(St);if(Vu(It))return function Io(St,mt,It,Kt){for(var rn=null,dn=null,yn=mt,rr=mt=0,ir=null;null!==yn&&rr<It.length;rr++){yn.index>rr?(ir=yn,yn=null):ir=yn.sibling;var Wn=bn(St,yn,It[rr],Kt);if(null===Wn){null===yn&&(yn=ir);break}f&&yn&&null===Wn.alternate&&h(St,yn),mt=_e(Wn,mt,rr),null===dn?rn=Wn:dn.sibling=Wn,dn=Wn,yn=ir}if(rr===It.length)return w(St,yn),rn;if(null===yn){for(;rr<It.length;rr++)null!==(yn=_n(St,It[rr],Kt))&&(mt=_e(yn,mt,rr),null===dn?rn=yn:dn.sibling=yn,dn=yn);return rn}for(yn=K(St,yn);rr<It.length;rr++)null!==(ir=ur(yn,St,rr,It[rr],Kt))&&(f&&null!==ir.alternate&&yn.delete(null===ir.key?rr:ir.key),mt=_e(ir,mt,rr),null===dn?rn=ir:dn.sibling=ir,dn=ir);return f&&yn.forEach(function(yr){return h(St,yr)}),rn}(St,mt,It,Kt);if(Pn(It))return function Ei(St,mt,It,Kt){var rn=Pn(It);if("function"!=typeof rn)throw Error(_(150));if(null==(It=rn.call(It)))throw Error(_(151));for(var dn=rn=null,yn=mt,rr=mt=0,ir=null,Wn=It.next();null!==yn&&!Wn.done;rr++,Wn=It.next()){yn.index>rr?(ir=yn,yn=null):ir=yn.sibling;var yr=bn(St,yn,Wn.value,Kt);if(null===yr){null===yn&&(yn=ir);break}f&&yn&&null===yr.alternate&&h(St,yn),mt=_e(yr,mt,rr),null===dn?rn=yr:dn.sibling=yr,dn=yr,yn=ir}if(Wn.done)return w(St,yn),rn;if(null===yn){for(;!Wn.done;rr++,Wn=It.next())null!==(Wn=_n(St,Wn.value,Kt))&&(mt=_e(Wn,mt,rr),null===dn?rn=Wn:dn.sibling=Wn,dn=Wn);return rn}for(yn=K(St,yn);!Wn.done;rr++,Wn=It.next())null!==(Wn=ur(yn,St,rr,Wn.value,Kt))&&(f&&null!==Wn.alternate&&yn.delete(null===Wn.key?rr:Wn.key),mt=_e(Wn,mt,rr),null===dn?rn=Wn:dn.sibling=Wn,dn=Wn);return f&&yn.forEach(function(CA){return h(St,CA)}),rn}(St,mt,It,Kt);if(dn&&Xc(St,It),typeof It>"u"&&!rn)switch(St.tag){case 1:case 0:throw St=St.type,Error(_(152,St.displayName||St.name||"Component"))}return w(St,mt)}}var _i=qu(!0),Rf=qu(!1),Qc={},Vo={current:Qc},nu={current:Qc},Ku={current:Qc};function Ca(f){if(f===Qc)throw Error(_(174));return f}function Wu(f,h){switch(qr(Ku,h),qr(nu,f),qr(Vo,Qc),f=h.nodeType){case 9:case 11:h=(h=h.documentElement)?h.namespaceURI:hr(null,"");break;default:h=hr(h=(f=8===f?h.parentNode:h).namespaceURI||null,f=f.tagName)}zr(Vo),qr(Vo,h)}function ru(){zr(Vo),zr(nu),zr(Ku)}function h0(f){Ca(Ku.current);var h=Ca(Vo.current),w=hr(h,f.type);h!==w&&(qr(nu,f),qr(Vo,w))}function Df(f){nu.current===f&&(zr(Vo),zr(nu))}var Gr={current:0};function na(f){for(var h=f;null!==h;){if(13===h.tag){var w=h.memoizedState;if(null!==w&&(null===(w=w.dehydrated)||w.data===cf||w.data===Ty))return h}else if(19===h.tag&&void 0!==h.memoizedProps.revealOrder){if(64&h.effectTag)return h}else if(null!==h.child){h.child.return=h,h=h.child;continue}if(h===f)break;for(;null===h.sibling;){if(null===h.return||h.return===f)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}function Ho(f,h){return{responder:f,props:h}}var Xu=le.ReactCurrentDispatcher,$i=le.ReactCurrentBatchConfig,ra=0,ui=null,wi=null,Si=null,Jc=!1;function Xi(){throw Error(_(321))}function Tf(f,h){if(null===h)return!1;for(var w=0;w<h.length&&w<f.length;w++)if(!Ws(f[w],h[w]))return!1;return!0}function If(f,h,w,K,re,_e){if(ra=_e,ui=h,h.memoizedState=null,h.updateQueue=null,h.expirationTime=0,Xu.current=null===f||null===f.memoizedState?ys:y0,f=w(K,re),h.expirationTime===ra){_e=0;do{if(h.expirationTime=0,!(25>_e))throw Error(_(301));_e+=1,Si=wi=null,h.updateQueue=null,Xu.current=ec,f=w(K,re)}while(h.expirationTime===ra)}if(Xu.current=Zf,h=null!==wi&&null!==wi.next,ra=0,Si=wi=ui=null,Jc=!1,h)throw Error(_(300));return f}function iu(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Si?ui.memoizedState=Si=f:Si=Si.next=f,Si}function ou(){if(null===wi){var f=ui.alternate;f=null!==f?f.memoizedState:null}else f=wi.next;var h=null===Si?ui.memoizedState:Si.next;if(null!==h)Si=h,wi=f;else{if(null===f)throw Error(_(310));f={memoizedState:(wi=f).memoizedState,baseState:wi.baseState,baseQueue:wi.baseQueue,queue:wi.queue,next:null},null===Si?ui.memoizedState=Si=f:Si=Si.next=f}return Si}function _s(f,h){return"function"==typeof h?h(f):h}function Yc(f){var h=ou(),w=h.queue;if(null===w)throw Error(_(311));w.lastRenderedReducer=f;var K=wi,re=K.baseQueue,_e=w.pending;if(null!==_e){if(null!==re){var Ae=re.next;re.next=_e.next,_e.next=Ae}K.baseQueue=re=_e,w.pending=null}if(null!==re){K=K.baseState;var ze=Ae=_e=null,xt=re=re.next;do{var Mt=xt.expirationTime;if(Mt<ra){var Ht={expirationTime:xt.expirationTime,suspenseConfig:xt.suspenseConfig,action:xt.action,eagerReducer:xt.eagerReducer,eagerState:xt.eagerState,next:null};null===ze?(Ae=ze=Ht,_e=K):ze=ze.next=Ht,Mt>ui.expirationTime&&(ui.expirationTime=Mt,dc(Mt))}else null!==ze&&(ze=ze.next={expirationTime:1073741823,suspenseConfig:xt.suspenseConfig,action:xt.action,eagerReducer:xt.eagerReducer,eagerState:xt.eagerState,next:null}),np(Mt,xt.suspenseConfig),K=xt.eagerReducer===f?xt.eagerState:f(K,xt.action);xt=xt.next}while(null!==xt&&xt!==re);null===ze?_e=K:ze.next=Ae,Ws(K,h.memoizedState)||(aa=!0),h.memoizedState=K,h.baseState=_e,h.baseQueue=ze,w.lastRenderedState=K}return[h.memoizedState,w.dispatch]}function el(f){var h=ou(),w=h.queue;if(null===w)throw Error(_(311));w.lastRenderedReducer=f;var K=w.dispatch,re=w.pending,_e=h.memoizedState;if(null!==re){w.pending=null;var Ae=re=re.next;do{_e=f(_e,Ae.action),Ae=Ae.next}while(Ae!==re);Ws(_e,h.memoizedState)||(aa=!0),h.memoizedState=_e,null===h.baseQueue&&(h.baseState=_e),w.lastRenderedState=_e}return[_e,K]}function Of(f){var h=iu();return"function"==typeof f&&(f=f()),h.memoizedState=h.baseState=f,f=(f=h.queue={pending:null,dispatch:null,lastRenderedReducer:_s,lastRenderedState:f}).dispatch=w2.bind(null,ui,f),[h.memoizedState,f]}function Ff(f,h,w,K){return f={tag:f,create:h,destroy:w,deps:K,next:null},null===(h=ui.updateQueue)?(ui.updateQueue=h={lastEffect:null},h.lastEffect=f.next=f):null===(w=h.lastEffect)?h.lastEffect=f.next=f:(K=w.next,w.next=f,f.next=K,h.lastEffect=f),f}function m0(){return ou().memoizedState}function Mf(f,h,w,K){var re=iu();ui.effectTag|=f,re.memoizedState=Ff(1|h,w,void 0,void 0===K?null:K)}function Qu(f,h,w,K){var re=ou();K=void 0===K?null:K;var _e=void 0;if(null!==wi){var Ae=wi.memoizedState;if(_e=Ae.destroy,null!==K&&Tf(K,Ae.deps))return void Ff(h,w,_e,K)}ui.effectTag|=f,re.memoizedState=Ff(1|h,w,_e,K)}function Ju(f,h){return Mf(516,4,f,h)}function tl(f,h){return Qu(516,4,f,h)}function g0(f,h){return Qu(4,2,f,h)}function nl(f,h){return"function"==typeof h?(f=f(),h(f),function(){h(null)}):null!=h?(f=f(),h.current=f,function(){h.current=null}):void 0}function Bf(f,h,w){return w=null!=w?w.concat([f]):null,Qu(4,2,nl.bind(null,h,f),w)}function Nf(){}function au(f,h){return iu().memoizedState=[f,void 0===h?null:h],f}function Yu(f,h){var w=ou();h=void 0===h?null:h;var K=w.memoizedState;return null!==K&&null!==h&&Tf(h,K[1])?K[0]:(w.memoizedState=[f,h],f)}function v0(f,h){var w=ou();h=void 0===h?null:h;var K=w.memoizedState;return null!==K&&null!==h&&Tf(h,K[1])?K[0]:(f=f(),w.memoizedState=[f,h],f)}function _0(f,h,w){var K=ti();kn(98>K?98:K,function(){f(!0)}),kn(97<K?97:K,function(){var re=$i.suspense;$i.suspense=void 0===h?null:h;try{f(!1),w()}finally{$i.suspense=re}})}function w2(f,h,w){var K=Do(),re=Gu.suspense;re={expirationTime:K=du(K,f,re),suspenseConfig:re,action:w,eagerReducer:null,eagerState:null,next:null};var _e=h.pending;if(null===_e?re.next=re:(re.next=_e.next,_e.next=re),h.pending=re,_e=f.alternate,f===ui||null!==_e&&_e===ui)Jc=!0,re.expirationTime=ra,ui.expirationTime=ra;else{if(0===f.expirationTime&&(null===_e||0===_e.expirationTime)&&null!==(_e=h.lastRenderedReducer))try{var Ae=h.lastRenderedState,ze=_e(Ae,w);if(re.eagerReducer=_e,re.eagerState=ze,Ws(ze,Ae))return}catch{}Va(f,K)}}var Zf={readContext:Ao,useCallback:Xi,useContext:Xi,useEffect:Xi,useImperativeHandle:Xi,useLayoutEffect:Xi,useMemo:Xi,useReducer:Xi,useRef:Xi,useState:Xi,useDebugValue:Xi,useResponder:Xi,useDeferredValue:Xi,useTransition:Xi},ys={readContext:Ao,useCallback:au,useContext:Ao,useEffect:Ju,useImperativeHandle:function(h,w,K){return K=null!=K?K.concat([h]):null,Mf(4,2,nl.bind(null,w,h),K)},useLayoutEffect:function(h,w){return Mf(4,2,h,w)},useMemo:function(h,w){var K=iu();return w=void 0===w?null:w,h=h(),K.memoizedState=[h,w],h},useReducer:function(h,w,K){var re=iu();return w=void 0!==K?K(w):w,re.memoizedState=re.baseState=w,h=(h=re.queue={pending:null,dispatch:null,lastRenderedReducer:h,lastRenderedState:w}).dispatch=w2.bind(null,ui,h),[re.memoizedState,h]},useRef:function(h){return iu().memoizedState={current:h}},useState:Of,useDebugValue:Nf,useResponder:Ho,useDeferredValue:function(h,w){var K=Of(h),re=K[0],_e=K[1];return Ju(function(){var Ae=$i.suspense;$i.suspense=void 0===w?null:w;try{_e(h)}finally{$i.suspense=Ae}},[h,w]),re},useTransition:function(h){var w=Of(!1),K=w[0];return[au(_0.bind(null,w=w[1],h),[w,h]),K]}},y0={readContext:Ao,useCallback:Yu,useContext:Ao,useEffect:tl,useImperativeHandle:Bf,useLayoutEffect:g0,useMemo:v0,useReducer:Yc,useRef:m0,useState:function(){return Yc(_s)},useDebugValue:Nf,useResponder:Ho,useDeferredValue:function(h,w){var K=Yc(_s),re=K[0],_e=K[1];return tl(function(){var Ae=$i.suspense;$i.suspense=void 0===w?null:w;try{_e(h)}finally{$i.suspense=Ae}},[h,w]),re},useTransition:function(h){var w=Yc(_s),K=w[0];return[Yu(_0.bind(null,w=w[1],h),[w,h]),K]}},ec={readContext:Ao,useCallback:Yu,useContext:Ao,useEffect:tl,useImperativeHandle:Bf,useLayoutEffect:g0,useMemo:v0,useReducer:el,useRef:m0,useState:function(){return el(_s)},useDebugValue:Nf,useResponder:Ho,useDeferredValue:function(h,w){var K=el(_s),re=K[0],_e=K[1];return tl(function(){var Ae=$i.suspense;$i.suspense=void 0===w?null:w;try{_e(h)}finally{$i.suspense=Ae}},[h,w]),re},useTransition:function(h){var w=el(_s),K=w[0];return[Yu(_0.bind(null,w=w[1],h),[w,h]),K]}},ia=null,wa=null,oa=!1;function tc(f,h){var w=To(5,null,null,0);w.elementType="DELETED",w.type="DELETED",w.stateNode=h,w.return=f,w.effectTag=8,null!==f.lastEffect?(f.lastEffect.nextEffect=w,f.lastEffect=w):f.firstEffect=f.lastEffect=w}function ni(f,h){switch(f.tag){case 5:return null!==(h=1!==h.nodeType||f.type.toLowerCase()!==h.nodeName.toLowerCase()?null:h)&&(f.stateNode=h,!0);case 6:return null!==(h=""===f.pendingProps||3!==h.nodeType?null:h)&&(f.stateNode=h,!0);default:return!1}}function Lf(f){if(oa){var h=wa;if(h){var w=h;if(!ni(f,h)){if(!(h=Gs(w.nextSibling))||!ni(f,h))return f.effectTag=-1025&f.effectTag|2,oa=!1,void(ia=f);tc(ia,w)}ia=f,wa=Gs(h.firstChild)}else f.effectTag=-1025&f.effectTag|2,oa=!1,ia=f}}function S2(f){for(f=f.return;null!==f&&5!==f.tag&&3!==f.tag&&13!==f.tag;)f=f.return;ia=f}function nc(f){if(f!==ia)return!1;if(!oa)return S2(f),oa=!0,!1;var h=f.type;if(5!==f.tag||"head"!==h&&"body"!==h&&!ff(h,f.memoizedProps))for(h=wa;h;)tc(f,h),h=Gs(h.nextSibling);if(S2(f),13===f.tag){if(!(f=null!==(f=f.memoizedState)?f.dehydrated:null))throw Error(_(317));e:{for(f=f.nextSibling,h=0;f;){if(8===f.nodeType){var w=f.data;if(w===Dy){if(0===h){wa=Gs(f.nextSibling);break e}h--}else w!==Ry&&w!==Ty&&w!==cf||h++}f=f.nextSibling}wa=null}}else wa=ia?Gs(f.stateNode.nextSibling):null;return!0}function _r(){wa=ia=null,oa=!1}var Yn=le.ReactCurrentOwner,aa=!1;function go(f,h,w,K){h.child=null===f?Rf(h,null,w,K):_i(h,f.child,w,K)}function x0(f,h,w,K,re){w=w.render;var _e=h.ref;return tu(h,re),K=If(f,h,w,K,_e,re),null===f||aa?(h.effectTag|=1,go(f,h,K,re),h.child):(h.updateQueue=f.updateQueue,h.effectTag&=-517,f.expirationTime<=re&&(f.expirationTime=0),Sa(f,h,re))}function b0(f,h,w,K,re,_e){if(null===f){var Ae=w.type;return"function"!=typeof Ae||pc(Ae)||void 0!==Ae.defaultProps||null!==w.compare||void 0!==w.defaultProps?((f=kl(w.type,null,K,null,h.mode,_e)).ref=h.ref,f.return=h,h.child=f):(h.tag=15,h.type=Ae,C0(f,h,Ae,K,re,_e))}return Ae=f.child,re<_e&&(w=null!==(w=w.compare)?w:$u)(re=Ae.memoizedProps,K)&&f.ref===h.ref?Sa(f,h,_e):(h.effectTag|=1,(f=ws(Ae,K)).ref=h.ref,f.return=h,h.child=f)}function C0(f,h,w,K,re,_e){return null!==f&&$u(f.memoizedProps,K)&&f.ref===h.ref&&(aa=!1,re<_e)?(h.expirationTime=f.expirationTime,Sa(f,h,_e)):jf(f,h,w,K,_e)}function w0(f,h){var w=h.ref;(null===f&&null!==w||null!==f&&f.ref!==w)&&(h.effectTag|=128)}function jf(f,h,w,K,re){var _e=Ki(w)?ms:si.current;return _e=Js(h,_e),tu(h,re),w=If(f,h,w,K,_e,re),null===f||aa?(h.effectTag|=1,go(f,h,w,re),h.child):(h.updateQueue=f.updateQueue,h.effectTag&=-517,f.expirationTime<=re&&(f.expirationTime=0),Sa(f,h,re))}function S0(f,h,w,K,re){if(Ki(w)){var _e=!0;gs(h)}else _e=!1;if(tu(h,re),null===h.stateNode)null!==f&&(f.alternate=null,h.alternate=null,h.effectTag|=2),vs(h,w,K),Wc(h,w,K,re),K=!0;else if(null===f){var Ae=h.stateNode,ze=h.memoizedProps;Ae.props=ze;var xt=Ae.context,Mt=w.contextType;Mt="object"==typeof Mt&&null!==Mt?Ao(Mt):Js(h,Mt=Ki(w)?ms:si.current);var Ht=w.getDerivedStateFromProps,_n="function"==typeof Ht||"function"==typeof Ae.getSnapshotBeforeUpdate;_n||"function"!=typeof Ae.UNSAFE_componentWillReceiveProps&&"function"!=typeof Ae.componentWillReceiveProps||(ze!==K||xt!==Mt)&&p0(h,Ae,K,Mt),pn=!1;var bn=h.memoizedState;Ae.state=bn,Kc(h,K,Ae,re),xt=h.memoizedState,ze!==K||bn!==xt||qi.current||pn?("function"==typeof Ht&&(kf(h,w,Ht,K),xt=h.memoizedState),(ze=pn||Af(h,w,ze,K,bn,xt,Mt))?(_n||"function"!=typeof Ae.UNSAFE_componentWillMount&&"function"!=typeof Ae.componentWillMount||("function"==typeof Ae.componentWillMount&&Ae.componentWillMount(),"function"==typeof Ae.UNSAFE_componentWillMount&&Ae.UNSAFE_componentWillMount()),"function"==typeof Ae.componentDidMount&&(h.effectTag|=4)):("function"==typeof Ae.componentDidMount&&(h.effectTag|=4),h.memoizedProps=K,h.memoizedState=xt),Ae.props=K,Ae.state=xt,Ae.context=Mt,K=ze):("function"==typeof Ae.componentDidMount&&(h.effectTag|=4),K=!1)}else Ae=h.stateNode,Go(f,h),ze=h.memoizedProps,Ae.props=h.type===h.elementType?ze:ji(h.type,ze),xt=Ae.context,Mt="object"==typeof(Mt=w.contextType)&&null!==Mt?Ao(Mt):Js(h,Mt=Ki(w)?ms:si.current),(_n="function"==typeof(Ht=w.getDerivedStateFromProps)||"function"==typeof Ae.getSnapshotBeforeUpdate)||"function"!=typeof Ae.UNSAFE_componentWillReceiveProps&&"function"!=typeof Ae.componentWillReceiveProps||(ze!==K||xt!==Mt)&&p0(h,Ae,K,Mt),pn=!1,Ae.state=xt=h.memoizedState,Kc(h,K,Ae,re),bn=h.memoizedState,ze!==K||xt!==bn||qi.current||pn?("function"==typeof Ht&&(kf(h,w,Ht,K),bn=h.memoizedState),(Ht=pn||Af(h,w,ze,K,xt,bn,Mt))?(_n||"function"!=typeof Ae.UNSAFE_componentWillUpdate&&"function"!=typeof Ae.componentWillUpdate||("function"==typeof Ae.componentWillUpdate&&Ae.componentWillUpdate(K,bn,Mt),"function"==typeof Ae.UNSAFE_componentWillUpdate&&Ae.UNSAFE_componentWillUpdate(K,bn,Mt)),"function"==typeof Ae.componentDidUpdate&&(h.effectTag|=4),"function"==typeof Ae.getSnapshotBeforeUpdate&&(h.effectTag|=256)):("function"!=typeof Ae.componentDidUpdate||ze===f.memoizedProps&&xt===f.memoizedState||(h.effectTag|=4),"function"!=typeof Ae.getSnapshotBeforeUpdate||ze===f.memoizedProps&&xt===f.memoizedState||(h.effectTag|=256),h.memoizedProps=K,h.memoizedState=bn),Ae.props=K,Ae.state=bn,Ae.context=Mt,K=Ht):("function"!=typeof Ae.componentDidUpdate||ze===f.memoizedProps&&xt===f.memoizedState||(h.effectTag|=4),"function"!=typeof Ae.getSnapshotBeforeUpdate||ze===f.memoizedProps&&xt===f.memoizedState||(h.effectTag|=256),K=!1);return rc(f,h,w,K,_e,re)}function rc(f,h,w,K,re,_e){w0(f,h);var Ae=0!=(64&h.effectTag);if(!K&&!Ae)return re&&He(h,w,!1),Sa(f,h,_e);K=h.stateNode,Yn.current=h;var ze=Ae&&"function"!=typeof w.getDerivedStateFromError?null:K.render();return h.effectTag|=1,null!==f&&Ae?(h.child=_i(h,f.child,null,_e),h.child=_i(h,null,ze,_e)):go(f,h,ze,_e),h.memoizedState=K.state,re&&He(h,w,!0),h.child}function ht(f){var h=f.stateNode;h.pendingContext?n0(0,h.pendingContext,h.pendingContext!==h.context):h.context&&n0(0,h.context,!1),Wu(f,h.containerInfo)}var $a,su,$f,uu,ic={dehydrated:null,retryTime:0};function rl(f,h,w){var ze,K=h.mode,re=h.pendingProps,_e=Gr.current,Ae=!1;if((ze=0!=(64&h.effectTag))||(ze=0!=(2&_e)&&(null===f||null!==f.memoizedState)),ze?(Ae=!0,h.effectTag&=-65):null!==f&&null===f.memoizedState||void 0===re.fallback||!0===re.unstable_avoidThisFallback||(_e|=1),qr(Gr,1&_e),null===f){if(void 0!==re.fallback&&Lf(h),Ae){if(Ae=re.fallback,(re=qa(null,K,0,null)).return=h,!(2&h.mode))for(re.child=f=null!==h.memoizedState?h.child.child:h.child;null!==f;)f.return=re,f=f.sibling;return(w=qa(Ae,K,w,null)).return=h,re.sibling=w,h.memoizedState=ic,h.child=re,w}return K=re.children,h.memoizedState=null,h.child=Rf(h,null,K,w)}if(null!==f.memoizedState){if(K=(f=f.child).sibling,Ae){if(re=re.fallback,(w=ws(f,f.pendingProps)).return=h,!(2&h.mode)&&(Ae=null!==h.memoizedState?h.child.child:h.child)!==f.child)for(w.child=Ae;null!==Ae;)Ae.return=w,Ae=Ae.sibling;return(K=ws(K,re)).return=h,w.sibling=K,w.childExpirationTime=0,h.memoizedState=ic,h.child=w,K}return w=_i(h,f.child,re.children,w),h.memoizedState=null,h.child=w}if(f=f.child,Ae){if(Ae=re.fallback,(re=qa(null,K,0,null)).return=h,re.child=f,null!==f&&(f.return=re),!(2&h.mode))for(re.child=f=null!==h.memoizedState?h.child.child:h.child;null!==f;)f.return=re,f=f.sibling;return(w=qa(Ae,K,w,null)).return=h,re.sibling=w,w.effectTag|=2,re.childExpirationTime=0,h.memoizedState=ic,h.child=re,w}return h.memoizedState=null,h.child=_i(h,f,re.children,w)}function E0(f,h){f.expirationTime<h&&(f.expirationTime=h);var w=f.alternate;null!==w&&w.expirationTime<h&&(w.expirationTime=h),c0(f.return,h)}function il(f,h,w,K,re,_e){var Ae=f.memoizedState;null===Ae?f.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:K,tail:w,tailExpiration:0,tailMode:re,lastEffect:_e}:(Ae.isBackwards=h,Ae.rendering=null,Ae.renderingStartTime=0,Ae.last=K,Ae.tail=w,Ae.tailExpiration=0,Ae.tailMode=re,Ae.lastEffect=_e)}function xs(f,h,w){var K=h.pendingProps,re=K.revealOrder,_e=K.tail;if(go(f,h,K.children,w),2&(K=Gr.current))K=1&K|2,h.effectTag|=64;else{if(null!==f&&64&f.effectTag)e:for(f=h.child;null!==f;){if(13===f.tag)null!==f.memoizedState&&E0(f,w);else if(19===f.tag)E0(f,w);else if(null!==f.child){f.child.return=f,f=f.child;continue}if(f===h)break e;for(;null===f.sibling;){if(null===f.return||f.return===h)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}K&=1}if(qr(Gr,K),2&h.mode)switch(re){case"forwards":for(w=h.child,re=null;null!==w;)null!==(f=w.alternate)&&null===na(f)&&(re=w),w=w.sibling;null===(w=re)?(re=h.child,h.child=null):(re=w.sibling,w.sibling=null),il(h,!1,re,w,_e,h.lastEffect);break;case"backwards":for(w=null,re=h.child,h.child=null;null!==re;){if(null!==(f=re.alternate)&&null===na(f)){h.child=re;break}f=re.sibling,re.sibling=w,w=re,re=f}il(h,!0,w,null,_e,h.lastEffect);break;case"together":il(h,!1,null,null,void 0,h.lastEffect);break;default:h.memoizedState=null}else h.memoizedState=null;return h.child}function Sa(f,h,w){null!==f&&(h.dependencies=f.dependencies);var K=h.expirationTime;if(0!==K&&dc(K),h.childExpirationTime<w)return null;if(null!==f&&h.child!==f.child)throw Error(_(153));if(null!==h.child){for(w=ws(f=h.child,f.pendingProps),h.child=w,w.return=h;null!==f.sibling;)(w=w.sibling=ws(f=f.sibling,f.pendingProps)).return=h;w.sibling=null}return h.child}function Uf(f,h){switch(f.tailMode){case"hidden":h=f.tail;for(var w=null;null!==h;)null!==h.alternate&&(w=h),h=h.sibling;null===w?f.tail=null:w.sibling=null;break;case"collapsed":w=f.tail;for(var K=null;null!==w;)null!==w.alternate&&(K=w),w=w.sibling;null===K?h||null===f.tail?f.tail=null:f.tail.sibling=null:K.sibling=null}}function P0(f,h,w){var K=h.pendingProps;switch(h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return Ki(h.type)&&zc(),null;case 3:return ru(),zr(qi),zr(si),(w=h.stateNode).pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),null!==f&&null!==f.child||!nc(h)||(h.effectTag|=4),su(h),null;case 5:Df(h),w=Ca(Ku.current);var re=h.type;if(null!==f&&null!=h.stateNode)$f(f,h,re,K,w),f.ref!==h.ref&&(h.effectTag|=128);else{if(!K){if(null===h.stateNode)throw Error(_(166));return null}if(f=Ca(Vo.current),nc(h)){re=h.type;var _e=h.memoizedProps;switch((K=h.stateNode)[Ba]=h,K[mf]=_e,re){case"iframe":case"object":case"embed":tr("load",K);break;case"video":case"audio":for(f=0;f<Fa.length;f++)tr(Fa[f],K);break;case"source":tr("error",K);break;case"img":case"image":case"link":tr("error",K),tr("load",K);break;case"form":tr("reset",K),tr("submit",K);break;case"details":tr("toggle",K);break;case"input":Xr(K,_e),tr("invalid",K),va(w,"onChange");break;case"select":K._wrapperState={wasMultiple:!!_e.multiple},tr("invalid",K),va(w,"onChange");break;case"textarea":wo(K,_e),tr("invalid",K),va(w,"onChange")}for(var Ae in Tu(re,_e),f=null,_e)if(_e.hasOwnProperty(Ae)){var ze=_e[Ae];"children"===Ae?"string"==typeof ze?K.textContent!==ze&&(f=["children",ze]):"number"==typeof ze&&K.textContent!==""+ze&&(f=["children",""+ze]):ge.hasOwnProperty(Ae)&&null!=ze&&va(w,Ae)}switch(re){case"input":Ar(K),Lo(K,_e,!0);break;case"textarea":Ar(K),Ti(K);break;case"select":case"option":break;default:"function"==typeof _e.onClick&&(K.onclick=sf)}h.updateQueue=w=f,null!==w&&(h.effectTag|=4)}else{switch(Ae=9===w.nodeType?w:w.ownerDocument,f===Ou&&(f=Qr(re)),f===Ou?"script"===re?((f=Ae.createElement("div")).innerHTML="<script><\/script>",f=f.removeChild(f.firstChild)):"string"==typeof K.is?f=Ae.createElement(re,{is:K.is}):(f=Ae.createElement(re),"select"===re&&(Ae=f,K.multiple?Ae.multiple=!0:K.size&&(Ae.size=K.size))):f=Ae.createElementNS(f,re),f[Ba]=h,f[mf]=K,$a(f,h,!1,!1),h.stateNode=f,Ae=Iu(re,K),re){case"iframe":case"object":case"embed":tr("load",f),ze=K;break;case"video":case"audio":for(ze=0;ze<Fa.length;ze++)tr(Fa[ze],f);ze=K;break;case"source":tr("error",f),ze=K;break;case"img":case"image":case"link":tr("error",f),tr("load",f),ze=K;break;case"form":tr("reset",f),tr("submit",f),ze=K;break;case"details":tr("toggle",f),ze=K;break;case"input":Xr(f,K),ze=Ni(f,K),tr("invalid",f),va(w,"onChange");break;case"option":ze=Vi(f,K);break;case"select":f._wrapperState={wasMultiple:!!K.multiple},ze=Z({},K,{value:void 0}),tr("invalid",f),va(w,"onChange");break;case"textarea":wo(f,K),ze=Hi(f,K),tr("invalid",f),va(w,"onChange");break;default:ze=K}Tu(re,ze);var xt=ze;for(_e in xt)if(xt.hasOwnProperty(_e)){var Mt=xt[_e];"style"===_e?ta(f,Mt):"dangerouslySetInnerHTML"===_e?null!=(Mt=Mt?Mt.__html:void 0)&&So(f,Mt):"children"===_e?"string"==typeof Mt?("textarea"!==re||""!==Mt)&&fi(f,Mt):"number"==typeof Mt&&fi(f,""+Mt):"suppressContentEditableWarning"!==_e&&"suppressHydrationWarning"!==_e&&"autoFocus"!==_e&&(ge.hasOwnProperty(_e)?null!=Mt&&va(w,_e):null!=Mt&&ce(f,_e,Mt,Ae))}switch(re){case"input":Ar(f),Lo(f,K,!1);break;case"textarea":Ar(f),Ti(f);break;case"option":null!=K.value&&f.setAttribute("value",""+Fr(K.value));break;case"select":f.multiple=!!K.multiple,null!=(w=K.value)?Ri(f,!!K.multiple,w,!1):null!=K.defaultValue&&Ri(f,!!K.multiple,K.defaultValue,!0);break;default:"function"==typeof ze.onClick&&(f.onclick=sf)}Iy(re,K)&&(h.effectTag|=4)}null!==h.ref&&(h.effectTag|=128)}return null;case 6:if(f&&null!=h.stateNode)uu(f,h,f.memoizedProps,K);else{if("string"!=typeof K&&null===h.stateNode)throw Error(_(166));w=Ca(Ku.current),Ca(Vo.current),nc(h)?(K=h.memoizedProps,(w=h.stateNode)[Ba]=h,w.nodeValue!==K&&(h.effectTag|=4)):((w=(9===w.nodeType?w:w.ownerDocument).createTextNode(K))[Ba]=h,h.stateNode=w)}return null;case 13:return zr(Gr),K=h.memoizedState,64&h.effectTag?(h.expirationTime=w,h):(w=null!==K,K=!1,null===f?void 0!==h.memoizedProps.fallback&&nc(h):(K=null!==(re=f.memoizedState),w||null===re||null!==(re=f.child.sibling)&&(null!==(_e=h.firstEffect)?(h.firstEffect=re,re.nextEffect=_e):(h.firstEffect=h.lastEffect=re,re.nextEffect=null),re.effectTag=8)),w&&!K&&2&h.mode&&(null===f&&!0!==h.memoizedProps.unstable_avoidThisFallback||1&Gr.current?yi===Ua&&(yi=bs):((yi===Ua||yi===bs)&&(yi=fl),0!==lu&&null!==Ji&&(Ss(Ji,Ui),fn(Ji,lu)))),(w||K)&&(h.effectTag|=4),null);case 4:return ru(),su(h),null;case 10:return eu(h),null;case 19:if(zr(Gr),null===(K=h.memoizedState))return null;if(re=0!=(64&h.effectTag),null===(_e=K.rendering)){if(re)Uf(K,!1);else if(yi!==Ua||null!==f&&64&f.effectTag)for(_e=h.child;null!==_e;){if(null!==(f=na(_e))){for(h.effectTag|=64,Uf(K,!1),null!==(re=f.updateQueue)&&(h.updateQueue=re,h.effectTag|=4),null===K.lastEffect&&(h.firstEffect=null),h.lastEffect=K.lastEffect,K=h.child;null!==K;)_e=w,(re=K).effectTag&=2,re.nextEffect=null,re.firstEffect=null,re.lastEffect=null,null===(f=re.alternate)?(re.childExpirationTime=0,re.expirationTime=_e,re.child=null,re.memoizedProps=null,re.memoizedState=null,re.updateQueue=null,re.dependencies=null):(re.childExpirationTime=f.childExpirationTime,re.expirationTime=f.expirationTime,re.child=f.child,re.memoizedProps=f.memoizedProps,re.memoizedState=f.memoizedState,re.updateQueue=f.updateQueue,re.dependencies=null===(_e=f.dependencies)?null:{expirationTime:_e.expirationTime,firstContext:_e.firstContext,responders:_e.responders}),K=K.sibling;return qr(Gr,1&Gr.current|2),h.child}_e=_e.sibling}}else{if(!re)if(null!==(f=na(_e))){if(h.effectTag|=64,re=!0,null!==(w=f.updateQueue)&&(h.updateQueue=w,h.effectTag|=4),Uf(K,!0),null===K.tail&&"hidden"===K.tailMode&&!_e.alternate)return null!==(h=h.lastEffect=K.lastEffect)&&(h.nextEffect=null),null}else 2*Wi()-K.renderingStartTime>K.tailExpiration&&1<w&&(h.effectTag|=64,re=!0,Uf(K,!1),h.expirationTime=h.childExpirationTime=w-1);K.isBackwards?(_e.sibling=h.child,h.child=_e):(null!==(w=K.last)?w.sibling=_e:h.child=_e,K.last=_e)}return null!==K.tail?(0===K.tailExpiration&&(K.tailExpiration=Wi()+500),K.rendering=w=K.tail,K.tail=w.sibling,K.lastEffect=h.lastEffect,K.renderingStartTime=Wi(),w.sibling=null,h=Gr.current,qr(Gr,re?1&h|2:1&h),w):null}throw Error(_(156,h.tag))}function k0(f){switch(f.tag){case 1:Ki(f.type)&&zc();var h=f.effectTag;return 4096&h?(f.effectTag=-4097&h|64,f):null;case 3:if(ru(),zr(qi),zr(si),64&(h=f.effectTag))throw Error(_(285));return f.effectTag=-4097&h|64,f;case 5:return Df(f),null;case 13:return zr(Gr),4096&(h=f.effectTag)?(f.effectTag=-4097&h|64,f):null;case 19:return zr(Gr),null;case 4:return ru(),null;case 10:return eu(f),null;default:return null}}function ol(f,h){return{value:f,source:h,stack:ln(h)}}$a=function(h,w){for(var K=w.child;null!==K;){if(5===K.tag||6===K.tag)h.appendChild(K.stateNode);else if(4!==K.tag&&null!==K.child){K.child.return=K,K=K.child;continue}if(K===w)break;for(;null===K.sibling;){if(null===K.return||K.return===w)return;K=K.return}K.sibling.return=K.return,K=K.sibling}},su=function(){},$f=function(h,w,K,re,_e){var Ae=h.memoizedProps;if(Ae!==re){var xt,Mt,ze=w.stateNode;switch(Ca(Vo.current),h=null,K){case"input":Ae=Ni(ze,Ae),re=Ni(ze,re),h=[];break;case"option":Ae=Vi(ze,Ae),re=Vi(ze,re),h=[];break;case"select":Ae=Z({},Ae,{value:void 0}),re=Z({},re,{value:void 0}),h=[];break;case"textarea":Ae=Hi(ze,Ae),re=Hi(ze,re),h=[];break;default:"function"!=typeof Ae.onClick&&"function"==typeof re.onClick&&(ze.onclick=sf)}for(xt in Tu(K,re),K=null,Ae)if(!re.hasOwnProperty(xt)&&Ae.hasOwnProperty(xt)&&null!=Ae[xt])if("style"===xt)for(Mt in ze=Ae[xt])ze.hasOwnProperty(Mt)&&(K||(K={}),K[Mt]="");else"dangerouslySetInnerHTML"!==xt&&"children"!==xt&&"suppressContentEditableWarning"!==xt&&"suppressHydrationWarning"!==xt&&"autoFocus"!==xt&&(ge.hasOwnProperty(xt)?h||(h=[]):(h=h||[]).push(xt,null));for(xt in re){var Ht=re[xt];if(ze=Ae?.[xt],re.hasOwnProperty(xt)&&Ht!==ze&&(null!=Ht||null!=ze))if("style"===xt)if(ze){for(Mt in ze)!ze.hasOwnProperty(Mt)||Ht&&Ht.hasOwnProperty(Mt)||(K||(K={}),K[Mt]="");for(Mt in Ht)Ht.hasOwnProperty(Mt)&&ze[Mt]!==Ht[Mt]&&(K||(K={}),K[Mt]=Ht[Mt])}else K||(h||(h=[]),h.push(xt,K)),K=Ht;else"dangerouslySetInnerHTML"===xt?(ze=ze?ze.__html:void 0,null!=(Ht=Ht?Ht.__html:void 0)&&ze!==Ht&&(h=h||[]).push(xt,Ht)):"children"===xt?ze===Ht||"string"!=typeof Ht&&"number"!=typeof Ht||(h=h||[]).push(xt,""+Ht):"suppressContentEditableWarning"!==xt&&"suppressHydrationWarning"!==xt&&(ge.hasOwnProperty(xt)?(null!=Ht&&va(_e,xt),h||ze===Ht||(h=[])):(h=h||[]).push(xt,Ht))}K&&(h=h||[]).push("style",K),(w.updateQueue=_e=h)&&(w.effectTag|=4)}},uu=function(h,w,K,re){K!==re&&(w.effectTag|=4)};var E2="function"==typeof WeakSet?WeakSet:Set;function al(f,h){var w=h.source,K=h.stack;null===K&&null!==w&&(K=ln(w)),null!==w&&Cn(w.type),h=h.value,null!==f&&1===f.tag&&Cn(f.type);try{console.error(h)}catch(re){setTimeout(function(){throw re})}}function zf(f){var h=f.ref;if(null!==h)if("function"==typeof h)try{h(null)}catch(w){pu(f,w)}else h.current=null}function Qi(f,h){switch(h.tag){case 0:case 11:case 15:case 22:case 3:case 5:case 6:case 4:case 17:return;case 1:if(256&h.effectTag&&null!==f){var w=f.memoizedProps,K=f.memoizedState;h=(f=h.stateNode).getSnapshotBeforeUpdate(h.elementType===h.type?w:ji(h.type,w),K),f.__reactInternalSnapshotBeforeUpdate=h}return}throw Error(_(163))}function Gf(f,h){if(null!==(h=null!==(h=h.updateQueue)?h.lastEffect:null)){var w=h=h.next;do{if((w.tag&f)===f){var K=w.destroy;w.destroy=void 0,void 0!==K&&K()}w=w.next}while(w!==h)}}function Vf(f,h){if(null!==(h=null!==(h=h.updateQueue)?h.lastEffect:null)){var w=h=h.next;do{(w.tag&f)===f&&(w.destroy=(0,w.create)()),w=w.next}while(w!==h)}}function oc(f,h,w){switch(w.tag){case 0:case 11:case 15:case 22:return void Vf(3,w);case 1:if(f=w.stateNode,4&w.effectTag)if(null===h)f.componentDidMount();else{var K=w.elementType===w.type?h.memoizedProps:ji(w.type,h.memoizedProps);f.componentDidUpdate(K,h.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}return void(null!==(h=w.updateQueue)&&d0(w,h,f));case 3:if(null!==(h=w.updateQueue)){if(f=null,null!==w.child)switch(w.child.tag){case 5:case 1:f=w.child.stateNode}d0(w,h,f)}return;case 5:return f=w.stateNode,void(null===h&&4&w.effectTag&&Iy(w.type,w.memoizedProps)&&f.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:return;case 13:return void(null===w.memoizedState&&(w=w.alternate,null!==w&&(w=w.memoizedState,null!==w&&(w=w.dehydrated,null!==w&&Yt(w)))))}throw Error(_(163))}function Hf(f,h,w){switch("function"==typeof rp&&rp(h),h.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(f=h.updateQueue)&&null!==(f=f.lastEffect)){var K=f.next;kn(97<w?97:w,function(){var re=K;do{var _e=re.destroy;if(void 0!==_e){var Ae=h;try{_e()}catch(ze){pu(Ae,ze)}}re=re.next}while(re!==K)})}break;case 1:zf(h),"function"==typeof(w=h.stateNode).componentWillUnmount&&function P2(f,h){try{h.props=f.memoizedProps,h.state=f.memoizedState,h.componentWillUnmount()}catch(w){pu(f,w)}}(h,w);break;case 5:zf(h);break;case 4:R0(f,h,w)}}function A0(f){var h=f.alternate;f.return=null,f.child=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.alternate=null,f.firstEffect=null,f.lastEffect=null,f.pendingProps=null,f.memoizedProps=null,f.stateNode=null,null!==h&&A0(h)}function qf(f){return 5===f.tag||3===f.tag||4===f.tag}function sl(f){e:{for(var h=f.return;null!==h;){if(qf(h)){var w=h;break e}h=h.return}throw Error(_(160))}switch(h=w.stateNode,w.tag){case 5:var K=!1;break;case 3:case 4:h=h.containerInfo,K=!0;break;default:throw Error(_(161))}16&w.effectTag&&(fi(h,""),w.effectTag&=-17);e:t:for(w=f;;){for(;null===w.sibling;){if(null===w.return||qf(w.return)){w=null;break e}w=w.return}for(w.sibling.return=w.return,w=w.sibling;5!==w.tag&&6!==w.tag&&18!==w.tag;){if(2&w.effectTag||null===w.child||4===w.tag)continue t;w.child.return=w,w=w.child}if(!(2&w.effectTag)){w=w.stateNode;break e}}K?ac(f,w,h):Kf(f,w,h)}function ac(f,h,w){var K=f.tag,re=5===K||6===K;if(re)f=re?f.stateNode:f.stateNode.instance,h?8===w.nodeType?w.parentNode.insertBefore(f,h):w.insertBefore(f,h):(8===w.nodeType?(h=w.parentNode).insertBefore(f,w):(h=w).appendChild(f),null!=(w=w._reactRootContainer)||null!==h.onclick||(h.onclick=sf));else if(4!==K&&null!==(f=f.child))for(ac(f,h,w),f=f.sibling;null!==f;)ac(f,h,w),f=f.sibling}function Kf(f,h,w){var K=f.tag,re=5===K||6===K;if(re)f=re?f.stateNode:f.stateNode.instance,h?w.insertBefore(f,h):w.appendChild(f);else if(4!==K&&null!==(f=f.child))for(Kf(f,h,w),f=f.sibling;null!==f;)Kf(f,h,w),f=f.sibling}function R0(f,h,w){for(var _e,Ae,K=h,re=!1;;){if(!re){re=K.return;e:for(;;){if(null===re)throw Error(_(160));switch(_e=re.stateNode,re.tag){case 5:Ae=!1;break e;case 3:case 4:_e=_e.containerInfo,Ae=!0;break e}re=re.return}re=!0}if(5===K.tag||6===K.tag){e:for(var ze=f,xt=K,Mt=w,Ht=xt;;)if(Hf(ze,Ht,Mt),null!==Ht.child&&4!==Ht.tag)Ht.child.return=Ht,Ht=Ht.child;else{if(Ht===xt)break e;for(;null===Ht.sibling;){if(null===Ht.return||Ht.return===xt)break e;Ht=Ht.return}Ht.sibling.return=Ht.return,Ht=Ht.sibling}Ae?(xt=K.stateNode,8===(ze=_e).nodeType?ze.parentNode.removeChild(xt):ze.removeChild(xt)):_e.removeChild(K.stateNode)}else if(4===K.tag){if(null!==K.child){_e=K.stateNode.containerInfo,Ae=!0,K.child.return=K,K=K.child;continue}}else if(Hf(f,K,w),null!==K.child){K.child.return=K,K=K.child;continue}if(K===h)break;for(;null===K.sibling;){if(null===K.return||K.return===h)return;4===(K=K.return).tag&&(re=!1)}K.sibling.return=K.return,K=K.sibling}}function cu(f,h){switch(h.tag){case 0:case 11:case 14:case 15:case 22:return void Gf(3,h);case 1:case 12:case 17:return;case 5:var w=h.stateNode;if(null!=w){var K=h.memoizedProps,re=null!==f?f.memoizedProps:K;f=h.type;var _e=h.updateQueue;if(h.updateQueue=null,null!==_e){for(w[mf]=K,"input"===f&&"radio"===K.type&&null!=K.name&&jr(w,K),Iu(f,re),h=Iu(f,K),re=0;re<_e.length;re+=2){var Ae=_e[re],ze=_e[re+1];"style"===Ae?ta(w,ze):"dangerouslySetInnerHTML"===Ae?So(w,ze):"children"===Ae?fi(w,ze):ce(w,Ae,ze,h)}switch(f){case"input":di(w,K);break;case"textarea":Di(w,K);break;case"select":h=w._wrapperState.wasMultiple,w._wrapperState.wasMultiple=!!K.multiple,null!=(f=K.value)?Ri(w,!!K.multiple,f,!1):h!==!!K.multiple&&(null!=K.defaultValue?Ri(w,!!K.multiple,K.defaultValue,!0):Ri(w,!!K.multiple,K.multiple?[]:"",!1))}}}return;case 6:if(null===h.stateNode)throw Error(_(162));return void(h.stateNode.nodeValue=h.memoizedProps);case 3:return void((h=h.stateNode).hydrate&&(h.hydrate=!1,Yt(h.containerInfo)));case 13:if(w=h,null===h.memoizedState?K=!1:(K=!0,w=h.child,ml=Wi()),null!==w)e:for(f=w;;){if(5===f.tag)_e=f.stateNode,K?"function"==typeof(_e=_e.style).setProperty?_e.setProperty("display","none","important"):_e.display="none":(_e=f.stateNode,re=null!=(re=f.memoizedProps.style)&&re.hasOwnProperty("display")?re.display:null,_e.style.display=zs("display",re));else if(6===f.tag)f.stateNode.nodeValue=K?"":f.memoizedProps;else{if(13===f.tag&&null!==f.memoizedState&&null===f.memoizedState.dehydrated){(_e=f.child.sibling).return=f,f=_e;continue}if(null!==f.child){f.child.return=f,f=f.child;continue}}if(f===w)break;for(;null===f.sibling;){if(null===f.return||f.return===w)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}return void ul(h);case 19:return void ul(h)}throw Error(_(163))}function ul(f){var h=f.updateQueue;if(null!==h){f.updateQueue=null;var w=f.stateNode;null===w&&(w=f.stateNode=new E2),h.forEach(function(K){var re=Pl.bind(null,f,K);w.has(K)||(w.add(K),K.then(re,re))})}}var D0="function"==typeof WeakMap?WeakMap:Map;function Wf(f,h,w){(w=ba(w,null)).tag=3,w.payload={element:null};var K=h.value;return w.callback=function(){gl||(gl=!0,vl=K),al(f,h)},w}function T0(f,h,w){(w=ba(w,null)).tag=3;var K=f.type.getDerivedStateFromError;if("function"==typeof K){var re=h.value;w.payload=function(){return al(f,h),K(re)}}var _e=f.stateNode;return null!==_e&&"function"==typeof _e.componentDidCatch&&(w.callback=function(){"function"!=typeof K&&(null===za?za=new Set([this]):za.add(this),al(f,h));var Ae=h.stack;this.componentDidCatch(h.value,{componentStack:null!==Ae?Ae:""})}),w}var M0,cl=Math.ceil,ll=le.ReactCurrentDispatcher,Xf=le.ReactCurrentOwner,ci=0,dl=8,Ro=16,sa=32,Ua=0,Qf=1,I0=2,bs=3,fl=4,pl=5,On=ci,Ji=null,Vn=null,Ui=0,yi=Ua,Dr=null,er=1073741823,sc=1073741823,hl=null,lu=0,uc=!1,ml=0,Jf=500,xn=null,gl=!1,vl=null,za=null,Yf=!1,_l=null,yl=90,Ga=null,cc=0,xl=null,bl=0;function Do(){return(On&(Ro|sa))!==ci?1073741821-(Wi()/10|0):0!==bl?bl:bl=1073741821-(Wi()/10|0)}function du(f,h,w){if(!(2&(h=h.mode)))return 1073741823;var K=ti();if(!(4&h))return 99===K?1073741823:1073741822;if((On&Ro)!==ci)return Ui;if(null!==w)f=je(f,0|w.timeoutMs||5e3,250);else switch(K){case 99:f=1073741823;break;case 98:f=je(f,150,100);break;case 97:case 96:f=je(f,5e3,250);break;case 95:f=2;break;default:throw Error(_(326))}return null!==Ji&&f===Ui&&--f,f}function Va(f,h){if(50<cc)throw cc=0,xl=null,Error(_(185));if(null!==(f=ep(f,h))){var w=ti();1073741823===h?(On&dl)!==ci&&(On&(Ro|sa))===ci?lc(f):(vo(f),On===ci&&Li()):vo(f),(4&On)===ci||98!==w&&99!==w||(null===Ga?Ga=new Map([[f,h]]):(void 0===(w=Ga.get(f))||w>h)&&Ga.set(f,h))}}function ep(f,h){f.expirationTime<h&&(f.expirationTime=h);var w=f.alternate;null!==w&&w.expirationTime<h&&(w.expirationTime=h);var K=f.return,re=null;if(null===K&&3===f.tag)re=f.stateNode;else for(;null!==K;){if(w=K.alternate,K.childExpirationTime<h&&(K.childExpirationTime=h),null!==w&&w.childExpirationTime<h&&(w.childExpirationTime=h),null===K.return&&3===K.tag){re=K.stateNode;break}K=K.return}return null!==re&&(Ji===re&&(dc(h),yi===fl&&Ss(re,Ui)),fn(re,h)),re}function Cl(f){var h=f.lastExpiredTime;if(0!==h||!B0(f,h=f.firstPendingTime))return h;var w=f.lastPingedTime;return 2>=(f=w>(f=f.nextKnownPendingLevel)?w:f)&&h!==f?0:f}function vo(f){if(0!==f.lastExpiredTime)f.callbackExpirationTime=1073741823,f.callbackPriority=99,f.callbackNode=ko(lc.bind(null,f));else{var h=Cl(f),w=f.callbackNode;if(0===h)null!==w&&(f.callbackNode=null,f.callbackExpirationTime=0,f.callbackPriority=90);else{var K=Do();if(K=1073741823===h?99:1===h||2===h?95:0>=(K=10*(1073741821-h)-10*(1073741821-K))?99:250>=K?98:5250>=K?97:95,null!==w){if(f.callbackExpirationTime===h&&f.callbackPriority>=K)return;w!==Vc&&Zt(w)}f.callbackExpirationTime=h,f.callbackPriority=K,h=1073741823===h?ko(lc.bind(null,f)):Za(K,zi.bind(null,f),{timeout:10*(1073741821-h)-Wi()}),f.callbackNode=h}}}function zi(f,h){if(bl=0,h)return Un(f,h=Do()),vo(f),null;var w=Cl(f);if(0!==w){if(h=f.callbackNode,(On&(Ro|sa))!==ci)throw Error(_(327));if(ua(),f===Ji&&w===Ui||Cs(f,w),null!==Vn){var K=On;On|=Ro;for(var re=El();;)try{k2();break}catch(ze){fu(f,ze)}if(Pf(),On=K,ll.current=re,yi===Qf)throw h=Dr,Cs(f,w),Ss(f,w),vo(f),h;if(null===Vn)switch(re=f.finishedWork=f.current.alternate,f.finishedExpirationTime=w,K=yi,Ji=null,K){case Ua:case Qf:throw Error(_(345));case I0:Un(f,2<w?2:w);break;case bs:if(Ss(f,w),w===(K=f.lastSuspendedTime)&&(f.nextKnownPendingLevel=F0(re)),1073741823===er&&10<(re=ml+Jf-Wi())){if(uc){var _e=f.lastPingedTime;if(0===_e||_e>=w){f.lastPingedTime=w,Cs(f,w);break}}if(0!==(_e=Cl(f))&&_e!==w)break;if(0!==K&&K!==w){f.lastPingedTime=K;break}f.timeoutHandle=pf(li.bind(null,f),re);break}li(f);break;case fl:if(Ss(f,w),w===(K=f.lastSuspendedTime)&&(f.nextKnownPendingLevel=F0(re)),uc&&(0===(re=f.lastPingedTime)||re>=w)){f.lastPingedTime=w,Cs(f,w);break}if(0!==(re=Cl(f))&&re!==w)break;if(0!==K&&K!==w){f.lastPingedTime=K;break}if(1073741823!==sc?K=10*(1073741821-sc)-Wi():1073741823===er?K=0:(K=10*(1073741821-er)-5e3,0>(K=(re=Wi())-K)&&(K=0),(w=10*(1073741821-w)-re)<(K=(120>K?120:480>K?480:1080>K?1080:1920>K?1920:3e3>K?3e3:4320>K?4320:1960*cl(K/1960))-K)&&(K=w)),10<K){f.timeoutHandle=pf(li.bind(null,f),K);break}li(f);break;case pl:if(1073741823!==er&&null!==hl){_e=er;var Ae=hl;if(0>=(K=0|Ae.busyMinDurationMs)?K=0:(re=0|Ae.busyDelayMs,K=(_e=Wi()-(10*(1073741821-_e)-(0|Ae.timeoutMs||5e3)))<=re?0:re+K-_e),10<K){Ss(f,w),f.timeoutHandle=pf(li.bind(null,f),K);break}}li(f);break;default:throw Error(_(329))}if(vo(f),f.callbackNode===h)return zi.bind(null,f)}}return null}function lc(f){var h=f.lastExpiredTime;if(h=0!==h?h:1073741823,(On&(Ro|sa))!==ci)throw Error(_(327));if(ua(),f===Ji&&h===Ui||Cs(f,h),null!==Vn){var w=On;On|=Ro;for(var K=El();;)try{yA();break}catch(re){fu(f,re)}if(Pf(),On=w,ll.current=K,yi===Qf)throw w=Dr,Cs(f,h),Ss(f,h),vo(f),w;if(null!==Vn)throw Error(_(261));f.finishedWork=f.current.alternate,f.finishedExpirationTime=h,Ji=null,li(f),vo(f)}return null}function Sl(f,h){var w=On;On&=-2,On|=dl;try{return f(h)}finally{(On=w)===ci&&Li()}}function Cs(f,h){f.finishedWork=null,f.finishedExpirationTime=0;var w=f.timeoutHandle;if(-1!==w&&(f.timeoutHandle=-1,jE(w)),null!==Vn)for(w=Vn.return;null!==w;){var K=w;switch(K.tag){case 1:null!=(K=K.type.childContextTypes)&&zc();break;case 3:ru(),zr(qi),zr(si);break;case 5:Df(K);break;case 4:ru();break;case 13:case 19:zr(Gr);break;case 10:eu(K)}w=w.return}Ji=f,Vn=ws(f.current,null),Ui=h,yi=Ua,Dr=null,sc=er=1073741823,hl=null,lu=0,uc=!1}function fu(f,h){for(;;){try{if(Pf(),Xu.current=Zf,Jc)for(var w=ui.memoizedState;null!==w;){var K=w.queue;null!==K&&(K.pending=null),w=w.next}if(ra=0,Si=wi=ui=null,Jc=!1,null===Vn||null===Vn.return)return yi=Qf,Dr=h,Vn=null;e:{var re=f,_e=Vn.return,Ae=Vn,ze=h;if(h=Ui,Ae.effectTag|=2048,Ae.firstEffect=Ae.lastEffect=null,null!==ze&&"object"==typeof ze&&"function"==typeof ze.then){var xt=ze;if(!(2&Ae.mode)){var Mt=Ae.alternate;Mt?(Ae.updateQueue=Mt.updateQueue,Ae.memoizedState=Mt.memoizedState,Ae.expirationTime=Mt.expirationTime):(Ae.updateQueue=null,Ae.memoizedState=null)}var Ht=0!=(1&Gr.current),_n=_e;do{var bn;if(bn=13===_n.tag){var ur=_n.memoizedState;if(null!==ur)bn=null!==ur.dehydrated;else{var Io=_n.memoizedProps;bn=void 0!==Io.fallback&&(!0!==Io.unstable_avoidThisFallback||!Ht)}}if(bn){var Ei=_n.updateQueue;if(null===Ei){var St=new Set;St.add(xt),_n.updateQueue=St}else Ei.add(xt);if(!(2&_n.mode)){if(_n.effectTag|=64,Ae.effectTag&=-2981,1===Ae.tag)if(null===Ae.alternate)Ae.tag=17;else{var mt=ba(1073741823,null);mt.tag=2,La(Ae,mt)}Ae.expirationTime=1073741823;break e}ze=void 0,Ae=h;var It=re.pingCache;if(null===It?(It=re.pingCache=new D0).set(xt,ze=new Set):void 0===(ze=It.get(xt))&&It.set(xt,ze=new Set),!ze.has(Ae)){ze.add(Ae);var Kt=xA.bind(null,re,xt,Ae);xt.then(Kt,Kt)}_n.effectTag|=4096,_n.expirationTime=h;break e}_n=_n.return}while(null!==_n);ze=Error((Cn(Ae.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+ln(Ae))}yi!==pl&&(yi=I0),ze=ol(ze,Ae),_n=_e;do{switch(_n.tag){case 3:xt=ze,_n.effectTag|=4096,_n.expirationTime=h,l0(_n,Wf(_n,xt,h));break e;case 1:xt=ze;var yn=_n.stateNode;if(!(64&_n.effectTag||"function"!=typeof _n.type.getDerivedStateFromError&&(null===yn||"function"!=typeof yn.componentDidCatch||null!==za&&za.has(yn)))){_n.effectTag|=4096,_n.expirationTime=h,l0(_n,T0(_n,xt,h));break e}}_n=_n.return}while(null!==_n)}Vn=fc(Vn)}catch(ir){h=ir;continue}break}}function El(){var f=ll.current;return ll.current=Zf,null===f?Zf:f}function np(f,h){f<er&&2<f&&(er=f),null!==h&&f<sc&&2<f&&(sc=f,hl=h)}function dc(f){f>lu&&(lu=f)}function yA(){for(;null!==Vn;)Vn=O0(Vn)}function k2(){for(;null!==Vn&&!b2();)Vn=O0(Vn)}function O0(f){var h=M0(f.alternate,f,Ui);return f.memoizedProps=f.pendingProps,null===h&&(h=fc(f)),Xf.current=null,h}function fc(f){Vn=f;do{var h=Vn.alternate;if(f=Vn.return,2048&Vn.effectTag){if(null!==(h=k0(Vn)))return h.effectTag&=2047,h;null!==f&&(f.firstEffect=f.lastEffect=null,f.effectTag|=2048)}else{if(h=P0(h,Vn,Ui),1===Ui||1!==Vn.childExpirationTime){for(var w=0,K=Vn.child;null!==K;){var re=K.expirationTime,_e=K.childExpirationTime;re>w&&(w=re),_e>w&&(w=_e),K=K.sibling}Vn.childExpirationTime=w}if(null!==h)return h;null!==f&&!(2048&f.effectTag)&&(null===f.firstEffect&&(f.firstEffect=Vn.firstEffect),null!==Vn.lastEffect&&(null!==f.lastEffect&&(f.lastEffect.nextEffect=Vn.firstEffect),f.lastEffect=Vn.lastEffect),1<Vn.effectTag&&(null!==f.lastEffect?f.lastEffect.nextEffect=Vn:f.firstEffect=Vn,f.lastEffect=Vn))}if(null!==(h=Vn.sibling))return h;Vn=f}while(null!==Vn);return yi===Ua&&(yi=pl),null}function F0(f){var h=f.expirationTime;return h>(f=f.childExpirationTime)?h:f}function li(f){var h=ti();return kn(99,A2.bind(null,f,h)),null}function A2(f,h){do{ua()}while(null!==_l);if((On&(Ro|sa))!==ci)throw Error(_(327));var w=f.finishedWork,K=f.finishedExpirationTime;if(null===w)return null;if(f.finishedWork=null,f.finishedExpirationTime=0,w===f.current)throw Error(_(177));f.callbackNode=null,f.callbackExpirationTime=0,f.callbackPriority=90,f.nextKnownPendingLevel=0;var re=F0(w);if(f.firstPendingTime=re,K<=f.lastSuspendedTime?f.firstSuspendedTime=f.lastSuspendedTime=f.nextKnownPendingLevel=0:K<=f.firstSuspendedTime&&(f.firstSuspendedTime=K-1),K<=f.lastPingedTime&&(f.lastPingedTime=0),K<=f.lastExpiredTime&&(f.lastExpiredTime=0),f===Ji&&(Vn=Ji=null,Ui=0),1<w.effectTag?null!==w.lastEffect?(w.lastEffect.nextEffect=w,re=w.firstEffect):re=w:re=w.firstEffect,null!==re){var _e=On;On|=sa,Xf.current=null,lf=Ur;var Ae=Ay();if(Ma(Ae)){if("selectionStart"in Ae)var ze={start:Ae.selectionStart,end:Ae.selectionEnd};else{var xt=(ze=(ze=Ae.ownerDocument)&&ze.defaultView||window).getSelection&&ze.getSelection();if(xt&&0!==xt.rangeCount){ze=xt.anchorNode;var Mt=xt.anchorOffset,Ht=xt.focusNode;xt=xt.focusOffset;var _n=0,bn=-1,ur=-1,Io=0,Ei=0,St=Ae,mt=null;t:for(;;){for(var It;St!==ze||0!==Mt&&3!==St.nodeType||(bn=_n+Mt),St!==Ht||0!==xt&&3!==St.nodeType||(ur=_n+xt),3===St.nodeType&&(_n+=St.nodeValue.length),null!==(It=St.firstChild);)mt=St,St=It;for(;;){if(St===Ae)break t;if(mt===ze&&++Io===Mt&&(bn=_n),mt===Ht&&++Ei===xt&&(ur=_n),null!==(It=St.nextSibling))break;mt=(St=mt).parentNode}St=It}ze=-1===bn||-1===ur?null:{start:bn,end:ur}}else ze=null}ze=ze||{start:0,end:0}}else ze=null;df={activeElementDetached:null,focusedElem:Ae,selectionRange:ze},Ur=!1,xn=re;do{try{R2()}catch(Wn){if(null===xn)throw Error(_(330));pu(xn,Wn),xn=xn.nextEffect}}while(null!==xn);xn=re;do{try{for(Ae=f,ze=h;null!==xn;){var Kt=xn.effectTag;if(16&Kt&&fi(xn.stateNode,""),128&Kt){var rn=xn.alternate;if(null!==rn){var dn=rn.ref;null!==dn&&("function"==typeof dn?dn(null):dn.current=null)}}switch(1038&Kt){case 2:sl(xn),xn.effectTag&=-3;break;case 6:sl(xn),xn.effectTag&=-3,cu(xn.alternate,xn);break;case 1024:xn.effectTag&=-1025;break;case 1028:xn.effectTag&=-1025,cu(xn.alternate,xn);break;case 4:cu(xn.alternate,xn);break;case 8:R0(Ae,Mt=xn,ze),A0(Mt)}xn=xn.nextEffect}}catch(Wn){if(null===xn)throw Error(_(330));pu(xn,Wn),xn=xn.nextEffect}}while(null!==xn);if(dn=df,rn=Ay(),ze=dn.selectionRange,rn!==(Kt=dn.focusedElem)&&Kt&&Kt.ownerDocument&&ky(Kt.ownerDocument.documentElement,Kt)){for((null!==ze&&Ma(Kt)&&(rn=ze.start,void 0===(dn=ze.end)&&(dn=rn),"selectionStart"in Kt?(Kt.selectionStart=rn,Kt.selectionEnd=Math.min(dn,Kt.value.length)):(dn=(rn=Kt.ownerDocument||document)&&rn.defaultView||window).getSelection&&(dn=dn.getSelection(),Mt=Kt.textContent.length,Ae=Math.min(ze.start,Mt),ze=void 0===ze.end?Ae:Math.min(ze.end,Mt),!dn.extend&&Ae>ze&&(Mt=ze,ze=Ae,Ae=Mt),Mt=Py(Kt,Ae),Ht=Py(Kt,ze),Mt&&Ht&&(1!==dn.rangeCount||dn.anchorNode!==Mt.node||dn.anchorOffset!==Mt.offset||dn.focusNode!==Ht.node||dn.focusOffset!==Ht.offset)&&((rn=rn.createRange()).setStart(Mt.node,Mt.offset),dn.removeAllRanges(),Ae>ze?(dn.addRange(rn),dn.extend(Ht.node,Ht.offset)):(rn.setEnd(Ht.node,Ht.offset),dn.addRange(rn))))),rn=[],dn=Kt);dn=dn.parentNode;)1===dn.nodeType&&rn.push({element:dn,left:dn.scrollLeft,top:dn.scrollTop});for("function"==typeof Kt.focus&&Kt.focus(),Kt=0;Kt<rn.length;Kt++)(dn=rn[Kt]).element.scrollLeft=dn.left,dn.element.scrollTop=dn.top}Ur=!!lf,df=lf=null,f.current=w,xn=re;do{try{for(Kt=f;null!==xn;){var yn=xn.effectTag;if(36&yn&&oc(Kt,xn.alternate,xn),128&yn){rn=void 0;var rr=xn.ref;if(null!==rr)rn=xn.stateNode,"function"==typeof rr?rr(rn):rr.current=rn}xn=xn.nextEffect}}catch(Wn){if(null===xn)throw Error(_(330));pu(xn,Wn),xn=xn.nextEffect}}while(null!==xn);xn=null,C2(),On=_e}else f.current=w;if(Yf)Yf=!1,_l=f,yl=h;else for(xn=re;null!==xn;)h=xn.nextEffect,xn.nextEffect=null,xn=h;if(0===(h=f.firstPendingTime)&&(za=null),1073741823===h?f===xl?cc++:(cc=0,xl=f):cc=0,"function"==typeof Ha&&Ha(w.stateNode,K),vo(f),gl)throw gl=!1,f=vl,vl=null,f;return(On&dl)!==ci||Li(),null}function R2(){for(;null!==xn;){var f=xn.effectTag;256&f&&Qi(xn.alternate,xn),!(512&f)||Yf||(Yf=!0,Za(97,function(){return ua(),null})),xn=xn.nextEffect}}function ua(){if(90!==yl){var f=97<yl?97:yl;return yl=90,kn(f,D2)}}function D2(){if(null===_l)return!1;var f=_l;if(_l=null,(On&(Ro|sa))!==ci)throw Error(_(331));var h=On;for(On|=sa,f=f.current.firstEffect;null!==f;){try{var w=f;if(512&w.effectTag)switch(w.tag){case 0:case 11:case 15:case 22:Gf(5,w),Vf(5,w)}}catch(K){if(null===f)throw Error(_(330));pu(f,K)}w=f.nextEffect,f.nextEffect=null,f=w}return On=h,Li(),!0}function T2(f,h,w){La(f,h=Wf(f,h=ol(w,h),1073741823)),null!==(f=ep(f,1073741823))&&vo(f)}function pu(f,h){if(3===f.tag)T2(f,f,h);else for(var w=f.return;null!==w;){if(3===w.tag){T2(w,f,h);break}if(1===w.tag){var K=w.stateNode;if("function"==typeof w.type.getDerivedStateFromError||"function"==typeof K.componentDidCatch&&(null===za||!za.has(K))){La(w,f=T0(w,f=ol(h,f),1073741823)),null!==(w=ep(w,1073741823))&&vo(w);break}}w=w.return}}function xA(f,h,w){var K=f.pingCache;null!==K&&K.delete(h),Ji===f&&Ui===w?yi===fl||yi===bs&&1073741823===er&&Wi()-ml<Jf?Cs(f,Ui):uc=!0:B0(f,w)&&(0!==(h=f.lastPingedTime)&&h<w||(f.lastPingedTime=w,vo(f)))}function Pl(f,h){var w=f.stateNode;null!==w&&w.delete(h),0==(h=0)&&(h=du(h=Do(),f,null)),null!==(f=ep(f,h))&&vo(f)}M0=function(h,w,K){var re=w.expirationTime;if(null!==h){var _e=w.pendingProps;if(h.memoizedProps!==_e||qi.current)aa=!0;else{if(re<K){switch(aa=!1,w.tag){case 3:ht(w),_r();break;case 5:if(h0(w),4&w.mode&&1!==K&&_e.hidden)return w.expirationTime=w.childExpirationTime=1,null;break;case 1:Ki(w.type)&&gs(w);break;case 4:Wu(w,w.stateNode.containerInfo);break;case 10:re=w.memoizedProps.value,qr(Hc,(_e=w.type._context)._currentValue),_e._currentValue=re;break;case 13:if(null!==w.memoizedState)return 0!==(re=w.child.childExpirationTime)&&re>=K?rl(h,w,K):(qr(Gr,1&Gr.current),null!==(w=Sa(h,w,K))?w.sibling:null);qr(Gr,1&Gr.current);break;case 19:if(re=w.childExpirationTime>=K,64&h.effectTag){if(re)return xs(h,w,K);w.effectTag|=64}if(null!==(_e=w.memoizedState)&&(_e.rendering=null,_e.tail=null),qr(Gr,Gr.current),!re)return null}return Sa(h,w,K)}aa=!1}}else aa=!1;switch(w.expirationTime=0,w.tag){case 2:if(re=w.type,null!==h&&(h.alternate=null,w.alternate=null,w.effectTag|=2),h=w.pendingProps,_e=Js(w,si.current),tu(w,K),_e=If(null,w,re,h,_e,K),w.effectTag|=1,"object"==typeof _e&&null!==_e&&"function"==typeof _e.render&&void 0===_e.$$typeof){if(w.tag=1,w.memoizedState=null,w.updateQueue=null,Ki(re)){var Ae=!0;gs(w)}else Ae=!1;w.memoizedState=null!=_e.state?_e.state:null,Ir(w);var ze=re.getDerivedStateFromProps;"function"==typeof ze&&kf(w,re,ze,h),_e.updater=ja,w.stateNode=_e,_e._reactInternalFiber=w,Wc(w,re,h,K),w=rc(null,w,re,!0,Ae,K)}else w.tag=0,go(null,w,_e,K),w=w.child;return w;case 16:e:{if(_e=w.elementType,null!==h&&(h.alternate=null,w.alternate=null,w.effectTag|=2),h=w.pendingProps,function Gn(f){if(-1===f._status){f._status=0;var h=f._ctor;h=h(),f._result=h,h.then(function(w){0===f._status&&(w=w.default,f._status=1,f._result=w)},function(w){0===f._status&&(f._status=2,f._result=w)})}}(_e),1!==_e._status)throw _e._result;switch(w.type=_e=_e._result,Ae=w.tag=function ip(f){if("function"==typeof f)return pc(f)?1:0;if(null!=f){if((f=f.$$typeof)===Zr)return 11;if(f===Co)return 14}return 2}(_e),h=ji(_e,h),Ae){case 0:w=jf(null,w,_e,h,K);break e;case 1:w=S0(null,w,_e,h,K);break e;case 11:w=x0(null,w,_e,h,K);break e;case 14:w=b0(null,w,_e,ji(_e.type,h),re,K);break e}throw Error(_(306,_e,""))}return w;case 0:return _e=w.pendingProps,jf(h,w,re=w.type,_e=w.elementType===re?_e:ji(re,_e),K);case 1:return _e=w.pendingProps,S0(h,w,re=w.type,_e=w.elementType===re?_e:ji(re,_e),K);case 3:if(ht(w),re=w.updateQueue,null===h||null===re)throw Error(_(282));if(re=w.pendingProps,_e=null!==(_e=w.memoizedState)?_e.element:null,Go(h,w),Kc(w,re,null,K),(re=w.memoizedState.element)===_e)_r(),w=Sa(h,w,K);else{if((_e=w.stateNode.hydrate)&&(wa=Gs(w.stateNode.containerInfo.firstChild),ia=w,_e=oa=!0),_e)for(K=Rf(w,null,re,K),w.child=K;K;)K.effectTag=-3&K.effectTag|1024,K=K.sibling;else go(h,w,re,K),_r();w=w.child}return w;case 5:return h0(w),null===h&&Lf(w),Ae=null!==h?h.memoizedProps:null,ze=(_e=w.pendingProps).children,ff(re=w.type,_e)?ze=null:null!==Ae&&ff(re,Ae)&&(w.effectTag|=16),w0(h,w),4&w.mode&&1!==K&&_e.hidden?(w.expirationTime=w.childExpirationTime=1,w=null):(go(h,w,ze,K),w=w.child),w;case 6:return null===h&&Lf(w),null;case 13:return rl(h,w,K);case 4:return Wu(w,w.stateNode.containerInfo),re=w.pendingProps,null===h?w.child=_i(w,null,re,K):go(h,w,re,K),w.child;case 11:return _e=w.pendingProps,x0(h,w,re=w.type,_e=w.elementType===re?_e:ji(re,_e),K);case 7:return go(h,w,w.pendingProps,K),w.child;case 8:case 12:return go(h,w,w.pendingProps.children,K),w.child;case 10:e:{re=w.type._context,ze=w.memoizedProps,Ae=(_e=w.pendingProps).value;var xt=w.type._context;if(qr(Hc,xt._currentValue),xt._currentValue=Ae,null!==ze)if(0==(Ae=Ws(xt=ze.value,Ae)?0:0|("function"==typeof re._calculateChangedBits?re._calculateChangedBits(xt,Ae):1073741823))){if(ze.children===_e.children&&!qi.current){w=Sa(h,w,K);break e}}else for(null!==(xt=w.child)&&(xt.return=w);null!==xt;){var Mt=xt.dependencies;if(null!==Mt){ze=xt.child;for(var Ht=Mt.firstContext;null!==Ht;){if(Ht.context===re&&Ht.observedBits&Ae){1===xt.tag&&((Ht=ba(K,null)).tag=2,La(xt,Ht)),xt.expirationTime<K&&(xt.expirationTime=K),null!==(Ht=xt.alternate)&&Ht.expirationTime<K&&(Ht.expirationTime=K),c0(xt.return,K),Mt.expirationTime<K&&(Mt.expirationTime=K);break}Ht=Ht.next}}else ze=10===xt.tag&&xt.type===w.type?null:xt.child;if(null!==ze)ze.return=xt;else for(ze=xt;null!==ze;){if(ze===w){ze=null;break}if(null!==(xt=ze.sibling)){xt.return=ze.return,ze=xt;break}ze=ze.return}xt=ze}go(h,w,_e.children,K),w=w.child}return w;case 9:return _e=w.type,re=(Ae=w.pendingProps).children,tu(w,K),re=re(_e=Ao(_e,Ae.unstable_observedBits)),w.effectTag|=1,go(h,w,re,K),w.child;case 14:return Ae=ji(_e=w.type,w.pendingProps),b0(h,w,_e,Ae=ji(_e.type,Ae),re,K);case 15:return C0(h,w,w.type,w.pendingProps,re,K);case 17:return _e=w.pendingProps,_e=w.elementType===(re=w.type)?_e:ji(re,_e),null!==h&&(h.alternate=null,w.alternate=null,w.effectTag|=2),w.tag=1,Ki(re)?(h=!0,gs(w)):h=!1,tu(w,K),vs(w,re,_e),Wc(w,re,_e,K),rc(null,w,re,!0,h,K);case 19:return xs(h,w,K)}throw Error(_(156,w.tag))};var Ha=null,rp=null;function st(f,h,w,K){this.tag=f,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=K,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function To(f,h,w,K){return new st(f,h,w,K)}function pc(f){return!(!(f=f.prototype)||!f.isReactComponent)}function ws(f,h){var w=f.alternate;return null===w?((w=To(f.tag,h,f.key,f.mode)).elementType=f.elementType,w.type=f.type,w.stateNode=f.stateNode,w.alternate=f,f.alternate=w):(w.pendingProps=h,w.effectTag=0,w.nextEffect=null,w.firstEffect=null,w.lastEffect=null),w.childExpirationTime=f.childExpirationTime,w.expirationTime=f.expirationTime,w.child=f.child,w.memoizedProps=f.memoizedProps,w.memoizedState=f.memoizedState,w.updateQueue=f.updateQueue,w.dependencies=null===(h=f.dependencies)?null:{expirationTime:h.expirationTime,firstContext:h.firstContext,responders:h.responders},w.sibling=f.sibling,w.index=f.index,w.ref=f.ref,w}function kl(f,h,w,K,re,_e){var Ae=2;if(K=f,"function"==typeof f)pc(f)&&(Ae=1);else if("string"==typeof f)Ae=5;else e:switch(f){case Gt:return qa(w.children,re,_e,h);case De:Ae=8,re|=7;break;case un:Ae=8,re|=1;break;case Xt:return(f=To(12,w,h,8|re)).elementType=Xt,f.type=Xt,f.expirationTime=_e,f;case ar:return(f=To(13,w,h,re)).type=ar,f.elementType=ar,f.expirationTime=_e,f;case Qt:return(f=To(19,w,h,re)).elementType=Qt,f.expirationTime=_e,f;default:if("object"==typeof f&&null!==f)switch(f.$$typeof){case Kn:Ae=10;break e;case zn:Ae=9;break e;case Zr:Ae=11;break e;case Co:Ae=14;break e;case Ai:Ae=16,K=null;break e;case yt:Ae=22;break e}throw Error(_(130,null==f?f:typeof f,""))}return(h=To(Ae,w,h,re)).elementType=f,h.type=K,h.expirationTime=_e,h}function qa(f,h,w,K){return(f=To(7,f,K,h)).expirationTime=w,f}function op(f,h,w){return(f=To(6,f,null,h)).expirationTime=w,f}function ap(f,h,w){return(h=To(4,null!==f.children?f.children:[],f.key,h)).expirationTime=w,h.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},h}function sp(f,h,w){this.tag=h,this.current=null,this.containerInfo=f,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=w,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function B0(f,h){var w=f.firstSuspendedTime;return f=f.lastSuspendedTime,0!==w&&w>=h&&f<=h}function Ss(f,h){var w=f.firstSuspendedTime,K=f.lastSuspendedTime;w<h&&(f.firstSuspendedTime=h),(K>h||0===w)&&(f.lastSuspendedTime=h),h<=f.lastPingedTime&&(f.lastPingedTime=0),h<=f.lastExpiredTime&&(f.lastExpiredTime=0)}function fn(f,h){h>f.firstPendingTime&&(f.firstPendingTime=h);var w=f.firstSuspendedTime;0!==w&&(h>=w?f.firstSuspendedTime=f.lastSuspendedTime=f.nextKnownPendingLevel=0:h>=f.lastSuspendedTime&&(f.lastSuspendedTime=h+1),h>f.nextKnownPendingLevel&&(f.nextKnownPendingLevel=h))}function Un(f,h){var w=f.lastExpiredTime;(0===w||w>h)&&(f.lastExpiredTime=h)}function Al(f,h,w,K){var re=h.current,_e=Do(),Ae=Gu.suspense;_e=du(_e,re,Ae);e:if(w){t:{if(A(w=w._reactInternalFiber)!==w||1!==w.tag)throw Error(_(170));var ze=w;do{switch(ze.tag){case 3:ze=ze.stateNode.context;break t;case 1:if(Ki(ze.type)){ze=ze.stateNode.__reactInternalMemoizedMergedChildContext;break t}}ze=ze.return}while(null!==ze);throw Error(_(171))}if(1===w.tag){var xt=w.type;if(Ki(xt)){w=r0(w,xt,ze);break e}}w=ze}else w=hs;return null===h.context?h.context=w:h.pendingContext=w,(h=ba(_e,Ae)).payload={element:f},null!==(K=void 0===K?null:K)&&(h.callback=K),La(re,h),Va(re,_e),_e}function up(f){return(f=f.current).child?f.child.stateNode:null}function Rl(f,h){null!==(f=f.memoizedState)&&null!==f.dehydrated&&f.retryTime<h&&(f.retryTime=h)}function cp(f,h){Rl(f,h),(f=f.alternate)&&Rl(f,h)}function lp(f,h,w){var K=new sp(f,h,w=null!=w&&!0===w.hydrate),re=To(3,null,null,2===h?7:1===h?3:0);K.current=re,re.stateNode=K,Ir(re),f[Vs]=K.current,w&&0!==h&&function vr(f,h){var w=ds(h);sr.forEach(function(K){Et(K,h,w)}),gr.forEach(function(K){Et(K,h,w)})}(0,9===f.nodeType?f:f.ownerDocument),this._internalRoot=K}function hc(f){return!(!f||1!==f.nodeType&&9!==f.nodeType&&11!==f.nodeType&&(8!==f.nodeType||" react-mount-point-unstable "!==f.nodeValue))}function ca(f,h,w,K,re){var _e=w._reactRootContainer;if(_e){var Ae=_e._internalRoot;if("function"==typeof re){var ze=re;re=function(){var Ht=up(Ae);ze.call(Ht)}}Al(h,Ae,f,re)}else{if(_e=w._reactRootContainer=function Dl(f,h){if(h||(h=!(!(h=f?9===f.nodeType?f.documentElement:f.firstChild:null)||1!==h.nodeType||!h.hasAttribute("data-reactroot"))),!h)for(var w;w=f.lastChild;)f.removeChild(w);return new lp(f,0,h?{hydrate:!0}:void 0)}(w,K),Ae=_e._internalRoot,"function"==typeof re){var xt=re;re=function(){var Ht=up(Ae);xt.call(Ht)}}Sl(function(){Al(h,Ae,f,re)})}return up(Ae)}lp.prototype.render=function(f){Al(f,this._internalRoot,null,null)},lp.prototype.unmount=function(){var f=this._internalRoot,h=f.containerInfo;Al(null,f,null,function(){h[Vs]=null})},Ee=function(h){if(13===h.tag){var w=je(Do(),150,100);Va(h,w),cp(h,w)}},Ge=function(h){13===h.tag&&(Va(h,3),cp(h,3))},Ke=function(h){if(13===h.tag){var w=Do();Va(h,w=du(w,h,null)),cp(h,w)}},I=function(h,w,K){switch(w){case"input":if(di(h,K),w=K.name,"radio"===K.type&&null!=w){for(K=h;K.parentNode;)K=K.parentNode;for(K=K.querySelectorAll("input[name="+JSON.stringify(""+w)+'][type="radio"]'),w=0;w<K.length;w++){var re=K[w];if(re!==h&&re.form===h.form){var _e=gf(re);if(!_e)throw Error(_(90));Qn(re),di(re,_e)}}}break;case"textarea":Di(h,K);break;case"select":null!=(w=K.value)&&Ri(h,!!K.multiple,w,!1)}},ne=function wl(f,h){var w=On;On|=1;try{return f(h)}finally{(On=w)===ci&&Li()}},Fe=function(h,w,K,re,_e){var Ae=On;On|=4;try{return kn(98,h.bind(null,w,K,re,_e))}finally{(On=Ae)===ci&&Li()}},rt=function(){(On&(1|Ro|sa))===ci&&(function tp(){if(null!==Ga){var f=Ga;Ga=null,f.forEach(function(h,w){Un(w,h),vo(w)}),Li()}}(),ua())},Te=function(h,w){var K=On;On|=2;try{return h(w)}finally{(On=K)===ci&&Li()}};(function(f){var h=f.findFiberByHostInstance;!function bA(f){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")return!1;var h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(h.isDisabled||!h.supportsFiber)return!0;try{var w=h.inject(f);Ha=function(re){try{h.onCommitFiberRoot(w,re,void 0,64==(64&re.current.effectTag))}catch{}},rp=function(re){try{h.onCommitFiberUnmount(w,re)}catch{}}}catch{}}(Z({},f,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:le.ReactCurrentDispatcher,findHostInstanceByFiber:function(K){return null===(K=function ie(f){if(f=function X(f){var h=f.alternate;if(!h){if(null===(h=A(f)))throw Error(_(188));return h!==f?null:f}for(var w=f,K=h;;){var re=w.return;if(null===re)break;var _e=re.alternate;if(null===_e){if(null!==(K=re.return)){w=K;continue}break}if(re.child===_e.child){for(_e=re.child;_e;){if(_e===w)return L(re),f;if(_e===K)return L(re),h;_e=_e.sibling}throw Error(_(188))}if(w.return!==K.return)w=re,K=_e;else{for(var Ae=!1,ze=re.child;ze;){if(ze===w){Ae=!0,w=re,K=_e;break}if(ze===K){Ae=!0,K=re,w=_e;break}ze=ze.sibling}if(!Ae){for(ze=_e.child;ze;){if(ze===w){Ae=!0,w=_e,K=re;break}if(ze===K){Ae=!0,K=_e,w=re;break}ze=ze.sibling}if(!Ae)throw Error(_(189))}}if(w.alternate!==K)throw Error(_(190))}if(3!==w.tag)throw Error(_(188));return w.stateNode.current===w?f:h}(f),!f)return null;for(var h=f;;){if(5===h.tag||6===h.tag)return h;if(h.child)h.child.return=h,h=h.child;else{if(h===f)break;for(;!h.sibling;){if(!h.return||h.return===f)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}}return null}(K))?null:K.stateNode},findFiberByHostInstance:function(K){return h?h(K):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))})({findFiberByHostInstance:Hs,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"}),N.render=function(f,h,w){if(!hc(h))throw Error(_(200));return ca(null,f,h,!1,w)},N.unmountComponentAtNode=function(f){if(!hc(f))throw Error(_(40));return!!f._reactRootContainer&&(Sl(function(){ca(null,null,f,!1,function(){f._reactRootContainer=null,f[Vs]=null})}),!0)}},37628:(pe,N,S)=>{(function M(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||"function"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(M)}catch(q){console.error(q)}})(),pe.exports=S(69877)},70298:(pe,N,S)=>{var M=S(71856),q="function"==typeof Symbol&&Symbol.for,Z=q?Symbol.for("react.element"):60103,r=q?Symbol.for("react.portal"):60106,_=q?Symbol.for("react.fragment"):60107,p=q?Symbol.for("react.strict_mode"):60108,g=q?Symbol.for("react.profiler"):60114,y=q?Symbol.for("react.provider"):60109,E=q?Symbol.for("react.context"):60110,O=q?Symbol.for("react.forward_ref"):60112,$=q?Symbol.for("react.suspense"):60113,v=q?Symbol.for("react.memo"):60115,b=q?Symbol.for("react.lazy"):60116,V="function"==typeof Symbol&&Symbol.iterator;function G($e){for(var it="https://reactjs.org/docs/error-decoder.html?invariant="+$e,de=1;de<arguments.length;de++)it+="&args[]="+encodeURIComponent(arguments[de]);return"Minified React error #"+$e+"; visit "+it+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var H={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},te={};function z($e,it,de){this.props=$e,this.context=it,this.refs=te,this.updater=de||H}function W(){}function J($e,it,de){this.props=$e,this.context=it,this.refs=te,this.updater=de||H}z.prototype.isReactComponent={},z.prototype.setState=function($e,it){if("object"!=typeof $e&&"function"!=typeof $e&&null!=$e)throw Error(G(85));this.updater.enqueueSetState(this,$e,it,"setState")},z.prototype.forceUpdate=function($e){this.updater.enqueueForceUpdate(this,$e,"forceUpdate")},W.prototype=z.prototype;var se=J.prototype=new W;se.constructor=J,M(se,z.prototype),se.isPureReactComponent=!0;var ve={current:null},xe=Object.prototype.hasOwnProperty,ge={key:!0,ref:!0,__self:!0,__source:!0};function x($e,it,de){var Y,oe={},ke=null,Be=null;if(null!=it)for(Y in void 0!==it.ref&&(Be=it.ref),void 0!==it.key&&(ke=""+it.key),it)xe.call(it,Y)&&!ge.hasOwnProperty(Y)&&(oe[Y]=it[Y]);var fe=arguments.length-2;if(1===fe)oe.children=de;else if(1<fe){for(var ye=Array(fe),ut=0;ut<fe;ut++)ye[ut]=arguments[ut+2];oe.children=ye}if($e&&$e.defaultProps)for(Y in fe=$e.defaultProps)void 0===oe[Y]&&(oe[Y]=fe[Y]);return{$$typeof:Z,type:$e,key:ke,ref:Be,props:oe,_owner:ve.current}}function P($e){return"object"==typeof $e&&null!==$e&&$e.$$typeof===Z}var j=/\/+/g,R=[];function Q($e,it,de,Y){if(R.length){var oe=R.pop();return oe.result=$e,oe.keyPrefix=it,oe.func=de,oe.context=Y,oe.count=0,oe}return{result:$e,keyPrefix:it,func:de,context:Y,count:0}}function ee($e){$e.result=null,$e.keyPrefix=null,$e.func=null,$e.context=null,$e.count=0,10>R.length&&R.push($e)}function Re($e,it,de,Y){var oe=typeof $e;("undefined"===oe||"boolean"===oe)&&($e=null);var ke=!1;if(null===$e)ke=!0;else switch(oe){case"string":case"number":ke=!0;break;case"object":switch($e.$$typeof){case Z:case r:ke=!0}}if(ke)return de(Y,$e,""===it?"."+Fe($e,0):it),1;if(ke=0,it=""===it?".":it+":",Array.isArray($e))for(var Be=0;Be<$e.length;Be++){var fe=it+Fe(oe=$e[Be],Be);ke+=Re(oe,fe,de,Y)}else if("function"==typeof(fe=null===$e||"object"!=typeof $e?null:"function"==typeof(fe=V&&$e[V]||$e["@@iterator"])?fe:null))for($e=fe.call($e),Be=0;!(oe=$e.next()).done;)ke+=Re(oe=oe.value,fe=it+Fe(oe,Be++),de,Y);else if("object"===oe)throw de=""+$e,Error(G(31,"[object Object]"===de?"object with keys {"+Object.keys($e).join(", ")+"}":de,""));return ke}function ne($e,it,de){return null==$e?0:Re($e,"",it,de)}function Fe($e,it){return"object"==typeof $e&&null!==$e&&null!=$e.key?function I($e){var it={"=":"=0",":":"=2"};return"$"+(""+$e).replace(/[=:]/g,function(de){return it[de]})}($e.key):it.toString(36)}function rt($e,it){$e.func.call($e.context,it,$e.count++)}function Te($e,it,de){var Y=$e.result,oe=$e.keyPrefix;$e=$e.func.call($e.context,it,$e.count++),Array.isArray($e)?tt($e,Y,de,function(ke){return ke}):null!=$e&&(P($e)&&($e=function D($e,it){return{$$typeof:Z,type:$e.type,key:it,ref:$e.ref,props:$e.props,_owner:$e._owner}}($e,oe+(!$e.key||it&&it.key===$e.key?"":(""+$e.key).replace(j,"$&/")+"/")+de)),Y.push($e))}function tt($e,it,de,Y,oe){var ke="";null!=de&&(ke=(""+de).replace(j,"$&/")+"/"),ne($e,Te,it=Q(it,ke,Y,oe)),ee(it)}var Qe={current:null};function vt(){var $e=Qe.current;if(null===$e)throw Error(G(321));return $e}var et={ReactCurrentDispatcher:Qe,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:ve,IsSomeRendererActing:{current:!1},assign:M};N.Children={map:function(it,de,Y){if(null==it)return it;var oe=[];return tt(it,oe,null,de,Y),oe},forEach:function(it,de,Y){if(null==it)return it;ne(it,rt,de=Q(null,null,de,Y)),ee(de)},count:function(it){return ne(it,function(){return null},null)},toArray:function(it){var de=[];return tt(it,de,null,function(Y){return Y}),de},only:function(it){if(!P(it))throw Error(G(143));return it}},N.Component=z,N.Fragment=_,N.Profiler=g,N.PureComponent=J,N.StrictMode=p,N.Suspense=$,N.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=et,N.cloneElement=function($e,it,de){if(null==$e)throw Error(G(267,$e));var Y=M({},$e.props),oe=$e.key,ke=$e.ref,Be=$e._owner;if(null!=it){if(void 0!==it.ref&&(ke=it.ref,Be=ve.current),void 0!==it.key&&(oe=""+it.key),$e.type&&$e.type.defaultProps)var fe=$e.type.defaultProps;for(ye in it)xe.call(it,ye)&&!ge.hasOwnProperty(ye)&&(Y[ye]=void 0===it[ye]&&void 0!==fe?fe[ye]:it[ye])}var ye=arguments.length-2;if(1===ye)Y.children=de;else if(1<ye){fe=Array(ye);for(var ut=0;ut<ye;ut++)fe[ut]=arguments[ut+2];Y.children=fe}return{$$typeof:Z,type:$e.type,key:oe,ref:ke,props:Y,_owner:Be}},N.createContext=function($e,it){return void 0===it&&(it=null),($e={$$typeof:E,_calculateChangedBits:it,_currentValue:$e,_currentValue2:$e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:y,_context:$e},$e.Consumer=$e},N.createElement=x,N.createFactory=function($e){var it=x.bind(null,$e);return it.type=$e,it},N.createRef=function(){return{current:null}},N.forwardRef=function($e){return{$$typeof:O,render:$e}},N.isValidElement=P,N.lazy=function($e){return{$$typeof:b,_ctor:$e,_status:-1,_result:null}},N.memo=function($e,it){return{$$typeof:v,type:$e,compare:void 0===it?null:it}},N.useCallback=function($e,it){return vt().useCallback($e,it)},N.useContext=function($e,it){return vt().useContext($e,it)},N.useDebugValue=function(){},N.useEffect=function($e,it){return vt().useEffect($e,it)},N.useImperativeHandle=function($e,it,de){return vt().useImperativeHandle($e,it,de)},N.useLayoutEffect=function($e,it){return vt().useLayoutEffect($e,it)},N.useMemo=function($e,it){return vt().useMemo($e,it)},N.useReducer=function($e,it,de){return vt().useReducer($e,it,de)},N.useRef=function($e){return vt().useRef($e)},N.useState=function($e){return vt().useState($e)},N.version="16.14.0"},66712:(pe,N,S)=>{pe.exports=S(70298)},8055:function(pe,N,S){var q,Z,M=S(9482).default;typeof self<"u"&&self,pe.exports=(q={182:function(_){var p={NUMBER:"NUMBER",BOOLEAN:"BOOLEAN",STRING:"STRING",NULL:"NULL",UNDEFINED:"UNDEFINED",DATE:"DATE",ARRAY:"ARRAY",MAP:"MAP",SET:"SET",ITERABLE_OBJECT:"ITERABLE_OBJECT",DEFAULT:"OBJECT"};_.exports={types:p,iterableTypes:[p.ITERABLE_OBJECT,p.MAP,p.ARRAY,p.SET],errors:{EMPTY_DIFF:"No diff object is provided, Nothing to apply",INVALID_DIFF_FORMAT:"Invalid diff format",INVALID_DIFF_OP:"Unsupported operation provided into diff object"}}},688:function(_,p,g){var y,E=g(182),O=E.types,$=E.iterableTypes,v=E.errors,b=g(555),V=(M(y={},O.NUMBER,b.isNumber),M(y,O.BOOLEAN,b.isBoolean),M(y,O.STRING,b.isString),M(y,O.DATE,b.isDate),M(y,O.UNDEFINED,b.isUndefined),M(y,O.NULL,b.isNull),M(y,O.ARRAY,b.isArray),M(y,O.MAP,b.isMap),M(y,O.SET,b.isSet),M(y,O.ITERABLE_OBJECT,b.isIterableObject),y),G=M({},O.DATE,b.areDatesEqual);function H(J){for(var se=Object.keys(V),ve=O.DEFAULT,xe=0;xe<se.length;xe+=1)if(V[se[xe]](J)){ve=se[xe];break}return ve}function te(J,se,ve,xe,ge){var x={op:ve,path:xe};return"add"!==ve&&"update"!==ve||(x.val=se),ge&&"add"!==ve&&(x.oldVal=J),x}function z(J,se,ve,xe,ge){var Fe,x=H(J),D=H(se),P=xe||[],I=ge||[];if((Fe=x)===D&&$.indexOf(Fe)>=0)for(var j=function(Fe,rt,Te){if(Te===O.ARRAY){var tt=new Array(Fe.length>rt.length?Fe.length:rt.length);return tt.fill(0),new Set(tt.map(function(Qe,vt){return vt}))}return new Set(Object.keys(Fe).concat(Object.keys(rt)))}(J,se,x).values(),R=j.next(),Q=R.value,ee=R.done;!ee;){Object.prototype.hasOwnProperty.call(J,Q)?Object.prototype.hasOwnProperty.call(se,Q)?z(J[Q],se[Q],ve,P.concat(Q),I):I.push(te(J[Q],se[Q],"delete",P.concat(Q),ve)):I.push(te(J[Q],se[Q],"add",P.concat(Q),ve));var Re=j.next();Q=Re.value,ee=Re.done}else{var ne=function(Fe,rt,Te,tt){var Qe,vt,et,$e;return Te===O.UNDEFINED&&tt!==O.UNDEFINED?Qe="add":Te!==O.UNDEFINED&&tt===O.UNDEFINED?Qe="delete":(vt=Fe,et=rt,($e=Te)===tt&&(G[$e]?G[$e](vt,et):vt===et)?b.noop():Qe="update"),Qe}(J,se,x,D);null!=ne&&I.push(te(J,se,ne,xe,ve))}return I}var W={add:b.setValueByPath,update:b.setValueByPath,delete:b.deleteValueByPath};_.exports={getDiff:function(se,ve){return z(se,ve,arguments.length>2&&void 0!==arguments[2]&&arguments[2])},applyDiff:function(se,ve,xe){return function(ge,x,D){if(!(x instanceof Array))throw new Error(v.INVALID_DIFF_FORMAT);var P=ge;return x.forEach(function(I){var j=I.op,R=I.val,Q=I.path;if(!W[j])throw new Error(v.INVALID_DIFF_OP);P=W[j](P,Q,R,D)}),P}(se,ve,xe)}}},555:function(_){var p=function(b){return function(V){return V instanceof b}},g=p(Date),y=p(Array),E=p(Map),O=p(Set),$=function(b){return"[object Object]"===Object.prototype.toString.call(b)};_.exports={isNumber:function(b){return"number"==typeof b},isBoolean:function(b){return"boolean"==typeof b},isString:function(b){return"string"==typeof b},isDate:g,isUndefined:function(b){return void 0===b},isNull:function(b){return null===b},isArray:y,isMap:E,isSet:O,isIterableObject:$,noop:function(){},areDatesEqual:function(b,V){return b.getTime()===V.getTime()},setValueByPath:function(b){var V=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],G=arguments.length>2?arguments[2]:void 0,H=arguments.length>3?arguments[3]:void 0;if(!y(V))throw new Error('Diff path: "'.concat(V,'" is not valid'));var te=V.length;if(0===te)return G;for(var z=b,W=0;W<te;W+=1){var J=V[W];if(!z)throw new Error('Invalid path: "'.concat(V,'" for object: ').concat(JSON.stringify(b,null,2)));if(null==J)throw new Error('Invalid path: "'.concat(V,'" for object: ').concat(JSON.stringify(b,null,2)));W!==te-1?(z=z[J],H&&H(z)):z[J]=G}return b},deleteValueByPath:function(b,V){var G=V||[];if(0!==G.length){for(var H=b,te=G.length,z=0;z<te;z+=1)if(z!==te-1){if(!H[G[z]])throw new Error('Invalid path: "'.concat(V,'" for object: ').concat(JSON.stringify(b,null,2)));H=H[G[z]]}else if($(H))delete H[G[z]];else for(var W=parseInt(G[z],10);H.length>W;)H.pop();return b}}}}},Z={},function r(_){var p=Z[_];if(void 0!==p)return p.exports;var g=Z[_]={exports:{}};return q[_](g,g.exports,r),g.exports}(688))},76317:(pe,N,S)=>{S.d(N,{X:()=>y});var M=S(78069),q=S(48047),Z=S(4089),r=S(20265),_=S(24582),p=S(28694),y=function(E){(0,_.Z)($,E);var O=(0,p.Z)($);function $(v){var b;return(0,M.Z)(this,$),(b=O.call(this))._value=v,b}return(0,q.Z)($,[{key:"value",get:function(){return this.getValue()}},{key:"_subscribe",value:function(b){var V=(0,Z.Z)((0,r.Z)($.prototype),"_subscribe",this).call(this,b);return!V.closed&&b.next(this._value),V}},{key:"getValue",value:function(){var G=this._value;if(this.hasError)throw this.thrownError;return this._throwIfClosed(),G}},{key:"next",value:function(b){(0,Z.Z)((0,r.Z)($.prototype),"next",this).call(this,this._value=b)}}]),$}(S(50253).x)},26067:(pe,N,S)=>{S.d(N,{t:()=>E});var M=S(78069),q=S(48047),Z=S(4089),r=S(20265),_=S(24582),p=S(28694),g=S(50253),y=S(67654),E=function(O){(0,_.Z)(v,O);var $=(0,p.Z)(v);function v(){var b,V=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0,G=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,H=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y.l;return(0,M.Z)(this,v),(b=$.call(this))._bufferSize=V,b._windowTime=G,b._timestampProvider=H,b._buffer=[],b._infiniteTimeWindow=!0,b._infiniteTimeWindow=G===1/0,b._bufferSize=Math.max(1,V),b._windowTime=Math.max(1,G),b}return(0,q.Z)(v,[{key:"next",value:function(V){var H=this._buffer,te=this._infiniteTimeWindow,z=this._timestampProvider,W=this._windowTime;this.isStopped||(H.push(V),!te&&H.push(z.now()+W)),this._trimBuffer(),(0,Z.Z)((0,r.Z)(v.prototype),"next",this).call(this,V)}},{key:"_subscribe",value:function(V){this._throwIfClosed(),this._trimBuffer();for(var G=this._innerSubscribe(V),H=this._infiniteTimeWindow,z=this._buffer.slice(),W=0;W<z.length&&!V.closed;W+=H?1:2)V.next(z[W]);return this._checkFinalizedStatuses(V),G}},{key:"_trimBuffer",value:function(){var V=this._bufferSize,G=this._timestampProvider,H=this._buffer,te=this._infiniteTimeWindow,z=(te?1:2)*V;if(V<1/0&&z<H.length&&H.splice(0,H.length-z),!te){for(var W=G.now(),J=0,se=1;se<H.length&&H[se]<=W;se+=2)J=se;J&&H.splice(0,J+1)}}}]),v}(g.x)},26562:(pe,N,S)=>{S.d(N,{a:()=>O});var M=S(90833),q=S(45756),Z=S(37400),r=S(89173),_=S(58385),p=S(10420),g=S(11054),y=S(93945),E=S(1817);function O(){for(var b=arguments.length,V=new Array(b),G=0;G<b;G++)V[G]=arguments[G];var H=(0,p.yG)(V),te=(0,p.jO)(V),z=(0,q.D)(V),W=z.args,J=z.keys;if(0===W.length)return(0,Z.D)([],H);var se=new M.y(function $(b,V){var G=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.y;return function(H){v(V,function(){for(var te=b.length,z=new Array(te),W=te,J=te,se=function(ge){v(V,function(){var x=(0,Z.D)(b[ge],V),D=!1;x.subscribe((0,y.x)(H,function(P){z[ge]=P,D||(D=!0,J--),J||H.next(G(z.slice()))},function(){--W||H.complete()}))},H)},ve=0;ve<te;ve++)se(ve)},H)}}(W,H,J?function(ve){return(0,g.n)(J,ve)}:r.y));return te?se.pipe((0,_.Z)(te)):se}function v(b,V,G){b?(0,E.f)(G,b,V):V()}},59319:(pe,N,S)=>{S.d(N,{z:()=>_});var M=S(1308),Z=S(10420),r=S(37400);function _(){for(var p=arguments.length,g=new Array(p),y=0;y<p;y++)g[y]=arguments[y];return function q(){return(0,M.J)(1)}()((0,r.D)(g,(0,Z.yG)(g)))}},21954:(pe,N,S)=>{S.d(N,{P:()=>Z});var M=S(90833),q=S(54987);function Z(r){return new M.y(function(_){(0,q.Xf)(r()).subscribe(_)})}},20591:(pe,N,S)=>{S.d(N,{E:()=>q});var q=new(S(90833).y)(function(_){return _.complete()})},36646:(pe,N,S)=>{S.d(N,{T:()=>p});var M=S(1308),q=S(54987),Z=S(20591),r=S(10420),_=S(37400);function p(){for(var g=arguments.length,y=new Array(g),E=0;E<g;E++)y[E]=arguments[E];var O=(0,r.yG)(y),$=(0,r._6)(y,1/0),v=y;return v.length?1===v.length?(0,q.Xf)(v[0]):(0,M.J)($)((0,_.D)(v,O)):Z.E}},25474:(pe,N,S)=>{S.d(N,{_:()=>Z});var M=S(90833),q=S(92971);function Z(r,_){var p=(0,q.m)(r)?r:function(){return r},g=function(E){return E.error(p())};return new M.y(_?function(y){return _.schedule(g,0,y)}:g)}},53158:(pe,N,S)=>{S.d(N,{K:()=>r});var M=S(54987),q=S(93945),Z=S(41944);function r(_){return(0,Z.e)(function(p,g){var O,y=null,E=!1;y=p.subscribe((0,q.x)(g,void 0,void 0,function($){O=(0,M.Xf)(_($,r(_)(p))),y?(y.unsubscribe(),y=null,O.subscribe(g)):E=!0})),E&&(y.unsubscribe(),y=null,O.subscribe(g))})}},63853:(pe,N,S)=>{S.d(N,{b:()=>Z});var M=S(49525),q=S(92971);function Z(r,_){return(0,q.m)(_)?(0,M.z)(r,_,1):(0,M.z)(r,1)}},71989:(pe,N,S)=>{S.d(N,{b:()=>r});var M=S(96936),q=S(41944),Z=S(93945);function r(_){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M.z;return(0,q.e)(function(g,y){var E=null,O=null,$=null,v=function(){if(E){E.unsubscribe(),E=null;var G=O;O=null,y.next(G)}};function b(){var V=$+_,G=p.now();if(G<V)return E=this.schedule(void 0,V-G),void y.add(E);v()}g.subscribe((0,Z.x)(y,function(V){O=V,$=p.now(),E||(E=p.schedule(b,_),y.add(E))},function(){v(),y.complete()},void 0,function(){O=E=null}))})}},64744:(pe,N,S)=>{S.d(N,{d:()=>Z});var M=S(41944),q=S(93945);function Z(r){return(0,M.e)(function(_,p){var g=!1;_.subscribe((0,q.x)(p,function(y){g=!0,p.next(y)},function(){g||p.next(r),p.complete()}))})}},76234:(pe,N,S)=>{S.d(N,{g:()=>E});var M=S(96936),q=S(59319),Z=S(59295),r=S(90023),_=S(73),p=S(49525);function g(O,$){return $?function(v){return(0,q.z)($.pipe((0,Z.q)(1),(0,r.l)()),v.pipe(g(O)))}:(0,p.z)(function(v,b){return O(v,b).pipe((0,Z.q)(1),(0,_.h)(v))})}var y=S(78947);function E(O){var v=(0,y.H)(O,arguments.length>1&&void 0!==arguments[1]?arguments[1]:M.z);return g(function(){return v})}},98977:(pe,N,S)=>{S.d(N,{x:()=>r});var M=S(89173),q=S(41944),Z=S(93945);function r(p){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M.y;return p=p??_,(0,q.e)(function(y,E){var O,$=!0;y.subscribe((0,Z.x)(E,function(v){var b=g(v);($||!p(O,b))&&($=!1,O=b,E.next(v))}))})}function _(p,g){return p===g}},60116:(pe,N,S)=>{S.d(N,{h:()=>Z});var M=S(41944),q=S(93945);function Z(r,_){return(0,M.e)(function(p,g){var y=0;p.subscribe((0,q.x)(g,function(E){return r.call(_,E,y++)&&g.next(E)}))})}},80155:(pe,N,S)=>{S.d(N,{P:()=>g});var M=S(14423),q=S(60116),Z=S(59295),r=S(64744),_=S(77354),p=S(89173);function g(y,E){var O=arguments.length>=2;return function($){return $.pipe(y?(0,q.h)(function(v,b){return y(v,b,$)}):p.y,(0,Z.q)(1),O?(0,r.d)(E):(0,_.T)(function(){return new M.K}))}}},90023:(pe,N,S)=>{S.d(N,{l:()=>r});var M=S(41944),q=S(93945),Z=S(99635);function r(){return(0,M.e)(function(_,p){_.subscribe((0,q.x)(p,Z.Z))})}},73:(pe,N,S)=>{S.d(N,{h:()=>q});var M=S(50635);function q(Z){return(0,M.U)(function(){return Z})}},1308:(pe,N,S)=>{S.d(N,{J:()=>Z});var M=S(49525),q=S(89173);function Z(){return(0,M.z)(q.y,arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0)}},89196:(pe,N,S)=>{S.d(N,{d:()=>Z});var M=S(26067),q=S(81203);function Z(r,_,p){var g,y=!1;if(r&&"object"==typeof r){var E=r.bufferSize;g=void 0===E?1/0:E;var O=r.windowTime;_=void 0===O?1/0:O;var $=r.refCount;y=void 0!==$&&$,p=r.scheduler}else g=r??1/0;return(0,q.B)({connector:function(){return new M.t(g,_,p)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:y})}},87260:(pe,N,S)=>{S.d(N,{T:()=>q});var M=S(60116);function q(Z){return(0,M.h)(function(r,_){return Z<=_})}},44874:(pe,N,S)=>{S.d(N,{O:()=>r});var M=S(59319),q=S(10420),Z=S(41944);function r(){for(var _=arguments.length,p=new Array(_),g=0;g<_;g++)p[g]=arguments[g];var y=(0,q.yG)(p);return(0,Z.e)(function(E,O){(y?(0,M.z)(p,E,y):(0,M.z)(p,E)).subscribe(O)})}},32673:(pe,N,S)=>{S.d(N,{w:()=>r});var M=S(54987),q=S(41944),Z=S(93945);function r(_,p){return(0,q.e)(function(g,y){var E=null,O=0,$=!1,v=function(){return $&&!E&&y.complete()};g.subscribe((0,Z.x)(y,function(b){E?.unsubscribe();var V=0,G=O++;(0,M.Xf)(_(b,G)).subscribe(E=(0,Z.x)(y,function(H){return y.next(p?p(b,H,G,V++):H)},function(){E=null,v()}))},function(){$=!0,v()}))})}},59295:(pe,N,S)=>{S.d(N,{q:()=>r});var M=S(20591),q=S(41944),Z=S(93945);function r(_){return _<=0?function(){return M.E}:(0,q.e)(function(p,g){var y=0;p.subscribe((0,Z.x)(g,function(E){++y<=_&&(g.next(E),_<=y&&g.complete())}))})}},68951:(pe,N,S)=>{S.d(N,{R:()=>_});var M=S(41944),q=S(93945),Z=S(54987),r=S(99635);function _(p){return(0,M.e)(function(g,y){(0,Z.Xf)(p).subscribe((0,q.x)(y,function(){return y.complete()},r.Z)),!y.closed&&g.subscribe(y)})}},19337:(pe,N,S)=>{S.d(N,{b:()=>_});var M=S(92971),q=S(41944),Z=S(93945),r=S(89173);function _(p,g,y){var E=(0,M.m)(p)||g||y?{next:p,error:g,complete:y}:p;return E?(0,q.e)(function(O,$){var v;null===(v=E.subscribe)||void 0===v||v.call(E);var b=!0;O.subscribe((0,Z.x)($,function(V){var G;null===(G=E.next)||void 0===G||G.call(E,V),$.next(V)},function(){var V;b=!1,null===(V=E.complete)||void 0===V||V.call(E),$.complete()},function(V){var G;b=!1,null===(G=E.error)||void 0===G||G.call(E,V),$.error(V)},function(){var V,G;b&&(null===(V=E.unsubscribe)||void 0===V||V.call(E)),null===(G=E.finalize)||void 0===G||G.call(E)}))}):r.y}},77354:(pe,N,S)=>{S.d(N,{T:()=>r});var M=S(14423),q=S(41944),Z=S(93945);function r(){var p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_;return(0,q.e)(function(g,y){var E=!1;g.subscribe((0,Z.x)(y,function(O){E=!0,y.next(O)},function(){return E?y.complete():y.error(p())}))})}function _(){return new M.K}},87580:(pe,N,S)=>{S.d(N,{V:()=>E});var M=S(96936),q=S(97885),Z=S(41944),r=S(54987),_=S(27543),p=S(93945),g=S(1817),y=(0,_.d)(function($){return function(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;$(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=b}});function E($,v){var b=(0,q.q)($)?{first:$}:"number"==typeof $?{each:$}:$,V=b.first,G=b.each,H=b.with,te=void 0===H?O:H,z=b.scheduler,W=void 0===z?v??M.z:z,J=b.meta,se=void 0===J?null:J;if(null==V&&null==G)throw new TypeError("No timeout provided.");return(0,Z.e)(function(ve,xe){var ge,x,D=null,P=0,I=function(R){x=(0,g.f)(xe,W,function(){try{ge.unsubscribe(),(0,r.Xf)(te({meta:se,lastValue:D,seen:P})).subscribe(xe)}catch(Q){xe.error(Q)}},R)};ge=ve.subscribe((0,p.x)(xe,function(j){x?.unsubscribe(),P++,xe.next(D=j),G>0&&I(G)},void 0,void 0,function(){x?.closed||x?.unsubscribe(),D=null})),!P&&I(null!=V?"number"==typeof V?V:+V-W.now():G)})}function O($){throw new y($)}},10538:(pe,N,S)=>{S.d(N,{M:()=>y});var M=S(86170),q=S(41944),Z=S(93945),r=S(54987),_=S(89173),p=S(99635),g=S(10420);function y(){for(var E=arguments.length,O=new Array(E),$=0;$<E;$++)O[$]=arguments[$];var v=(0,g.jO)(O);return(0,q.e)(function(b,V){for(var G=O.length,H=new Array(G),te=O.map(function(){return!1}),z=!1,W=function(ve){(0,r.Xf)(O[ve]).subscribe((0,Z.x)(V,function(xe){H[ve]=xe,!z&&!te[ve]&&(te[ve]=!0,(z=te.every(_.y))&&(te=null))},p.Z))},J=0;J<G;J++)W(J);b.subscribe((0,Z.x)(V,function(se){if(z){var ve=[se].concat(H);V.next(v?v.apply(void 0,(0,M.Z)(ve)):ve)}}))})}},34915:(pe,N,S)=>{S.d(N,{N:()=>$});var M=S(78069),q=S(48047),Z=S(4089),r=S(20265),_=S(24582),p=S(28694),y=function(b){(0,_.Z)(G,b);var V=(0,p.Z)(G);function G(H,te){var z;return(0,M.Z)(this,G),(z=V.call(this,H,te)).scheduler=H,z.work=te,z}return(0,q.Z)(G,[{key:"schedule",value:function(te){var z=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return z>0?(0,Z.Z)((0,r.Z)(G.prototype),"schedule",this).call(this,te,z):(this.delay=z,this.state=te,this.scheduler.flush(this),this)}},{key:"execute",value:function(te,z){return z>0||this.closed?(0,Z.Z)((0,r.Z)(G.prototype),"execute",this).call(this,te,z):this._execute(te,z)}},{key:"requestAsyncId",value:function(te,z){var W=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!=W&&W>0||null==W&&this.delay>0?(0,Z.Z)((0,r.Z)(G.prototype),"requestAsyncId",this).call(this,te,z,W):(te.flush(this),0)}}]),G}(S(75417).o),$=new(function(b){(0,_.Z)(G,b);var V=(0,p.Z)(G);function G(){return(0,M.Z)(this,G),V.apply(this,arguments)}return(0,q.Z)(G)}(S(41010).v))(y)},14423:(pe,N,S)=>{S.d(N,{K:()=>q});var q=(0,S(27543).d)(function(Z){return function(){Z(this),this.name="EmptyError",this.message="no elements in sequence"}})},73774:(pe,N)=>{var S,M,q,Z,r;if(typeof window>"u"||"function"!=typeof MessageChannel){var _=null,p=null,g=function Qe(){if(null!==_)try{var vt=N.unstable_now();_(!0,vt),_=null}catch(et){throw setTimeout(Qe,0),et}},y=Date.now();N.unstable_now=function(){return Date.now()-y},S=function(vt){null!==_?setTimeout(S,0,vt):(_=vt,setTimeout(g,0))},M=function(vt,et){p=setTimeout(vt,et)},q=function(){clearTimeout(p)},Z=function(){return!1},r=N.unstable_forceFrameRate=function(){}}else{var E=window.performance,O=window.Date,$=window.setTimeout,v=window.clearTimeout;if(typeof console<"u"){var b=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof b&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"==typeof E&&"function"==typeof E.now)N.unstable_now=function(){return E.now()};else{var V=O.now();N.unstable_now=function(){return O.now()-V}}var G=!1,H=null,te=-1,z=5,W=0;Z=function(){return N.unstable_now()>=W},r=function(){},N.unstable_forceFrameRate=function(Qe){0>Qe||125<Qe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):z=0<Qe?Math.floor(1e3/Qe):5};var J=new MessageChannel,se=J.port2;J.port1.onmessage=function(){if(null!==H){var Qe=N.unstable_now();W=Qe+z;try{H(!0,Qe)?se.postMessage(null):(G=!1,H=null)}catch(vt){throw se.postMessage(null),vt}}else G=!1},S=function(vt){H=vt,G||(G=!0,se.postMessage(null))},M=function(vt,et){te=$(function(){vt(N.unstable_now())},et)},q=function(){v(te),te=-1}}function ve(Qe,vt){var et=Qe.length;Qe.push(vt);e:for(;;){var $e=et-1>>>1,it=Qe[$e];if(!(void 0!==it&&0<x(it,vt)))break e;Qe[$e]=vt,Qe[et]=it,et=$e}}function xe(Qe){return void 0===(Qe=Qe[0])?null:Qe}function ge(Qe){var vt=Qe[0];if(void 0!==vt){var et=Qe.pop();if(et!==vt){Qe[0]=et;e:for(var $e=0,it=Qe.length;$e<it;){var de=2*($e+1)-1,Y=Qe[de],oe=de+1,ke=Qe[oe];if(void 0!==Y&&0>x(Y,et))void 0!==ke&&0>x(ke,Y)?(Qe[$e]=ke,Qe[oe]=et,$e=oe):(Qe[$e]=Y,Qe[de]=et,$e=de);else{if(!(void 0!==ke&&0>x(ke,et)))break e;Qe[$e]=ke,Qe[oe]=et,$e=oe}}}return vt}return null}function x(Qe,vt){var et=Qe.sortIndex-vt.sortIndex;return 0!==et?et:Qe.id-vt.id}var D=[],P=[],I=1,j=null,R=3,Q=!1,ee=!1,Re=!1;function ne(Qe){for(var vt=xe(P);null!==vt;){if(null===vt.callback)ge(P);else{if(!(vt.startTime<=Qe))break;ge(P),vt.sortIndex=vt.expirationTime,ve(D,vt)}vt=xe(P)}}function Fe(Qe){if(Re=!1,ne(Qe),!ee)if(null!==xe(D))ee=!0,S(rt);else{var vt=xe(P);null!==vt&&M(Fe,vt.startTime-Qe)}}function rt(Qe,vt){ee=!1,Re&&(Re=!1,q()),Q=!0;var et=R;try{for(ne(vt),j=xe(D);null!==j&&(!(j.expirationTime>vt)||Qe&&!Z());){var $e=j.callback;if(null!==$e){j.callback=null,R=j.priorityLevel;var it=$e(j.expirationTime<=vt);vt=N.unstable_now(),"function"==typeof it?j.callback=it:j===xe(D)&&ge(D),ne(vt)}else ge(D);j=xe(D)}if(null!==j)var de=!0;else{var Y=xe(P);null!==Y&&M(Fe,Y.startTime-vt),de=!1}return de}finally{j=null,R=et,Q=!1}}function Te(Qe){switch(Qe){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var tt=r;N.unstable_IdlePriority=5,N.unstable_ImmediatePriority=1,N.unstable_LowPriority=4,N.unstable_NormalPriority=3,N.unstable_Profiling=null,N.unstable_UserBlockingPriority=2,N.unstable_cancelCallback=function(Qe){Qe.callback=null},N.unstable_continueExecution=function(){ee||Q||(ee=!0,S(rt))},N.unstable_getCurrentPriorityLevel=function(){return R},N.unstable_getFirstCallbackNode=function(){return xe(D)},N.unstable_next=function(Qe){switch(R){case 1:case 2:case 3:var vt=3;break;default:vt=R}var et=R;R=vt;try{return Qe()}finally{R=et}},N.unstable_pauseExecution=function(){},N.unstable_requestPaint=tt,N.unstable_runWithPriority=function(Qe,vt){switch(Qe){case 1:case 2:case 3:case 4:case 5:break;default:Qe=3}var et=R;R=Qe;try{return vt()}finally{R=et}},N.unstable_scheduleCallback=function(Qe,vt,et){var $e=N.unstable_now();if("object"==typeof et&&null!==et){var it=et.delay;it="number"==typeof it&&0<it?$e+it:$e,et="number"==typeof et.timeout?et.timeout:Te(Qe)}else et=Te(Qe),it=$e;return Qe={id:I++,callback:vt,priorityLevel:Qe,startTime:it,expirationTime:et=it+et,sortIndex:-1},it>$e?(Qe.sortIndex=it,ve(P,Qe),null===xe(D)&&Qe===xe(P)&&(Re?q():Re=!0,M(Fe,it-$e))):(Qe.sortIndex=et,ve(D,Qe),ee||Q||(ee=!0,S(rt))),Qe},N.unstable_shouldYield=function(){var Qe=N.unstable_now();ne(Qe);var vt=xe(D);return vt!==j&&null!==j&&null!==vt&&null!==vt.callback&&vt.startTime<=Qe&&vt.expirationTime<j.expirationTime||Z()},N.unstable_wrapCallback=function(Qe){var vt=R;return function(){var et=R;R=vt;try{return Qe.apply(this,arguments)}finally{R=et}}}},45381:(pe,N,S)=>{pe.exports=S(73774)},87559:(pe,N,S)=>{var M=S(13974),q=S(45051)("selectn"),Z=S(75979),r=S(21934),_=Object.prototype.toString;pe.exports=M(function p(g,y){q("arguments:",{path:g,object:y});for(var E=-1,O="[object Array]"===_.call(g)?g:r(Z(g)),$=O.length,v=$?y:void 0;++E<$;){if(Object(v)!==v)return;v=v[O[E]]}return q("ref:",v),"function"==typeof v?v():v})},45051:(pe,N,S)=>{function _(){var g;try{g=N.storage.debug}catch{}return!g&&typeof process<"u"&&"env"in process&&(g=process.env.DEBUG),g}(N=pe.exports=S(62133)).log=function Z(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},N.formatArgs=function q(g){var y=this.useColors;if(g[0]=(y?"%c":"")+this.namespace+(y?" %c":" ")+g[0]+(y?"%c ":" ")+"+"+N.humanize(this.diff),y){var E="color: "+this.color;g.splice(1,0,E,"color: inherit");var O=0,$=0;g[0].replace(/%[a-zA-Z%]/g,function(v){"%%"!==v&&(O++,"%c"===v&&($=O))}),g.splice($,0,E)}},N.save=function r(g){try{null==g?N.storage.removeItem("debug"):N.storage.debug=g}catch{}},N.load=_,N.useColors=function M(){return!!(typeof window<"u"&&window.process&&"renderer"===window.process.type)||typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},N.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:function p(){try{return window.localStorage}catch{}}(),N.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],N.formatters.j=function(g){try{return JSON.stringify(g)}catch(y){return"[UnexpectedJSONParseError]: "+y.message}},N.enable(_())},62133:(pe,N,S)=>{var M;function Z(y){function E(){if(E.enabled){var O=E,$=+new Date;O.diff=$-(M||$),O.prev=M,O.curr=$,M=$;for(var b=new Array(arguments.length),V=0;V<b.length;V++)b[V]=arguments[V];b[0]=N.coerce(b[0]),"string"!=typeof b[0]&&b.unshift("%O");var G=0;b[0]=b[0].replace(/%([a-zA-Z%])/g,function(te,z){if("%%"===te)return te;G++;var W=N.formatters[z];return"function"==typeof W&&(te=W.call(O,b[G]),b.splice(G,1),G--),te}),N.formatArgs.call(O,b),(E.log||N.log||console.log.bind(console)).apply(O,b)}}return E.namespace=y,E.enabled=N.enabled(y),E.useColors=N.useColors(),E.color=function q(y){var O,E=0;for(O in y)E=(E<<5)-E+y.charCodeAt(O),E|=0;return N.colors[Math.abs(E)%N.colors.length]}(y),"function"==typeof N.init&&N.init(E),E}(N=pe.exports=Z.debug=Z.default=Z).coerce=function g(y){return y instanceof Error?y.stack||y.message:y},N.disable=function _(){N.enable("")},N.enable=function r(y){N.save(y),N.names=[],N.skips=[];for(var E=("string"==typeof y?y:"").split(/[\s,]+/),O=E.length,$=0;$<O;$++)E[$]&&("-"===(y=E[$].replace(/\*/g,".*?"))[0]?N.skips.push(new RegExp("^"+y.substr(1)+"$")):N.names.push(new RegExp("^"+y+"$")))},N.enabled=function p(y){var E,O;for(E=0,O=N.skips.length;E<O;E++)if(N.skips[E].test(y))return!1;for(E=0,O=N.names.length;E<O;E++)if(N.names[E].test(y))return!0;return!1},N.humanize=S(33007),N.names=[],N.skips=[],N.formatters={}},33007:pe=>{var N=1e3,S=60*N,M=60*S,q=24*M;function g(y,E,O){if(!(y<E))return y<1.5*E?Math.floor(y/E)+" "+O:Math.ceil(y/E)+" "+O+"s"}pe.exports=function(y,E){E=E||{};var O=typeof y;if("string"===O&&y.length>0)return function r(y){if(!((y=String(y)).length>100)){var E=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(y);if(E){var O=parseFloat(E[1]);switch((E[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*O;case"days":case"day":case"d":return O*q;case"hours":case"hour":case"hrs":case"hr":case"h":return O*M;case"minutes":case"minute":case"mins":case"min":case"m":return O*S;case"seconds":case"second":case"secs":case"sec":case"s":return O*N;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return O;default:return}}}}(y);if("number"===O&&!1===isNaN(y))return E.long?function p(y){return g(y,q,"day")||g(y,M,"hour")||g(y,S,"minute")||g(y,N,"second")||y+" ms"}(y):function _(y){return y>=q?Math.round(y/q)+"d":y>=M?Math.round(y/M)+"h":y>=S?Math.round(y/S)+"m":y>=N?Math.round(y/N)+"s":y+"ms"}(y);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(y))}},98432:(pe,N,S)=>{var M=S(79903),q=S(4263),Z=S(28597),r=M("%TypeError%"),_=M("%WeakMap%",!0),p=M("%Map%",!0),g=q("WeakMap.prototype.get",!0),y=q("WeakMap.prototype.set",!0),E=q("WeakMap.prototype.has",!0),O=q("Map.prototype.get",!0),$=q("Map.prototype.set",!0),v=q("Map.prototype.has",!0),b=function(z,W){for(var se,J=z;null!==(se=J.next);J=se)if(se.key===W)return J.next=se.next,se.next=z.next,z.next=se,se};pe.exports=function(){var z,W,J,se={assert:function(xe){if(!se.has(xe))throw new r("Side channel does not contain "+Z(xe))},get:function(xe){if(_&&xe&&("object"==typeof xe||"function"==typeof xe)){if(z)return g(z,xe)}else if(p){if(W)return O(W,xe)}else if(J)return function(z,W){var J=b(z,W);return J&&J.value}(J,xe)},has:function(xe){if(_&&xe&&("object"==typeof xe||"function"==typeof xe)){if(z)return E(z,xe)}else if(p){if(W)return v(W,xe)}else if(J)return function(z,W){return!!b(z,W)}(J,xe);return!1},set:function(xe,ge){_&&xe&&("object"==typeof xe||"function"==typeof xe)?(z||(z=new _),y(z,xe,ge)):p?(W||(W=new p),$(W,xe,ge)):(J||(J={key:{},next:null}),function(z,W,J){var se=b(z,W);se?se.value=J:z.next={key:W,next:z.next,value:J}}(J,xe,ge))}};return se}},70574:(pe,N,S)=>{pe.exports=Z;var M=S(83358).EventEmitter;function Z(){M.call(this)}S(55035)(Z,M),Z.Readable=S(21591),Z.Writable=S(36480),Z.Duplex=S(86124),Z.Transform=S(869),Z.PassThrough=S(5650),Z.finished=S(48938),Z.pipeline=S(29719),Z.Stream=Z,Z.prototype.pipe=function(r,_){var p=this;function g(V){r.writable&&!1===r.write(V)&&p.pause&&p.pause()}function y(){p.readable&&p.resume&&p.resume()}p.on("data",g),r.on("drain",y),!r._isStdio&&(!_||!1!==_.end)&&(p.on("end",O),p.on("close",$));var E=!1;function O(){E||(E=!0,r.end())}function $(){E||(E=!0,"function"==typeof r.destroy&&r.destroy())}function v(V){if(b(),0===M.listenerCount(this,"error"))throw V}function b(){p.removeListener("data",g),r.removeListener("drain",y),p.removeListener("end",O),p.removeListener("close",$),p.removeListener("error",v),r.removeListener("error",v),p.removeListener("end",b),p.removeListener("close",b),r.removeListener("close",b)}return p.on("error",v),r.on("error",v),p.on("end",b),p.on("close",b),r.on("close",b),r.emit("pipe",p),r}},23803:pe=>{var S={};function M(p,g,y){y||(y=Error);var O=function($){function v(b,V,G){return $.call(this,function E($,v,b){return"string"==typeof g?g:g($,v,b)}(b,V,G))||this}return function N(p,g){p.prototype=Object.create(g.prototype),p.prototype.constructor=p,p.__proto__=g}(v,$),v}(y);O.prototype.name=y.name,O.prototype.code=p,S[p]=O}function q(p,g){if(Array.isArray(p)){var y=p.length;return p=p.map(function(E){return String(E)}),y>2?"one of ".concat(g," ").concat(p.slice(0,y-1).join(", "),", or ")+p[y-1]:2===y?"one of ".concat(g," ").concat(p[0]," or ").concat(p[1]):"of ".concat(g," ").concat(p[0])}return"of ".concat(g," ").concat(String(p))}M("ERR_INVALID_OPT_VALUE",function(p,g){return'The value "'+g+'" is invalid for option "'+p+'"'},TypeError),M("ERR_INVALID_ARG_TYPE",function(p,g,y){var E,O;if("string"==typeof g&&function Z(p,g,y){return p.substr(!y||y<0?0:+y,g.length)===g}(g,"not ")?(E="must not be",g=g.replace(/^not /,"")):E="must be",function r(p,g,y){return(void 0===y||y>p.length)&&(y=p.length),p.substring(y-g.length,y)===g}(p," argument"))O="The ".concat(p," ").concat(E," ").concat(q(g,"type"));else{var $=function _(p,g,y){return"number"!=typeof y&&(y=0),!(y+g.length>p.length)&&-1!==p.indexOf(g,y)}(p,".")?"property":"argument";O='The "'.concat(p,'" ').concat($," ").concat(E," ").concat(q(g,"type"))}return O+". Received type ".concat(typeof y)},TypeError),M("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),M("ERR_METHOD_NOT_IMPLEMENTED",function(p){return"The "+p+" method is not implemented"}),M("ERR_STREAM_PREMATURE_CLOSE","Premature close"),M("ERR_STREAM_DESTROYED",function(p){return"Cannot call "+p+" after a stream was destroyed"}),M("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),M("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),M("ERR_STREAM_WRITE_AFTER_END","write after end"),M("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),M("ERR_UNKNOWN_ENCODING",function(p){return"Unknown encoding: "+p},TypeError),M("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),pe.exports.q=S},86124:(pe,N,S)=>{var M=Object.keys||function(O){var $=[];for(var v in O)$.push(v);return $};pe.exports=g;var q=S(21591),Z=S(36480);S(55035)(g,q);for(var r=M(Z.prototype),_=0;_<r.length;_++){var p=r[_];g.prototype[p]||(g.prototype[p]=Z.prototype[p])}function g(O){if(!(this instanceof g))return new g(O);q.call(this,O),Z.call(this,O),this.allowHalfOpen=!0,O&&(!1===O.readable&&(this.readable=!1),!1===O.writable&&(this.writable=!1),!1===O.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",y)))}function y(){this._writableState.ended||process.nextTick(E,this)}function E(O){O.end()}Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(g.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(g.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(g.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function($){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=$,this._writableState.destroyed=$)}})},5650:(pe,N,S)=>{pe.exports=q;var M=S(869);function q(Z){if(!(this instanceof q))return new q(Z);M.call(this,Z)}S(55035)(q,M),q.prototype._transform=function(Z,r,_){_(null,Z)}},21591:(pe,N,S)=>{var M;pe.exports=P,P.ReadableState=D,S(83358);var O,Z=function(ye,ut){return ye.listeners(ut).length},r=S(55628),_=S(13195).Buffer,p=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},E=S(40964);O=E&&E.debuglog?E.debuglog("stream"):function(){};var J,se,ve,$=S(78197),v=S(55767),V=S(8003).getHighWaterMark,G=S(23803).q,H=G.ERR_INVALID_ARG_TYPE,te=G.ERR_STREAM_PUSH_AFTER_EOF,z=G.ERR_METHOD_NOT_IMPLEMENTED,W=G.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;S(55035)(P,r);var xe=v.errorOrDestroy,ge=["error","close","destroy","pause","resume"];function D(fe,ye,ut){M=M||S(86124),"boolean"!=typeof ut&&(ut=ye instanceof M),this.objectMode=!!(fe=fe||{}).objectMode,ut&&(this.objectMode=this.objectMode||!!fe.readableObjectMode),this.highWaterMark=V(this,fe,"readableHighWaterMark",ut),this.buffer=new $,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==fe.emitClose,this.autoDestroy=!!fe.autoDestroy,this.destroyed=!1,this.defaultEncoding=fe.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,fe.encoding&&(J||(J=S(4547).s),this.decoder=new J(fe.encoding),this.encoding=fe.encoding)}function P(fe){if(M=M||S(86124),!(this instanceof P))return new P(fe);this._readableState=new D(fe,this,this instanceof M),this.readable=!0,fe&&("function"==typeof fe.read&&(this._read=fe.read),"function"==typeof fe.destroy&&(this._destroy=fe.destroy)),r.call(this)}function I(fe,ye,ut,be,le){O("readableAddChunk",ye);var Ie,ce=fe._readableState;if(null===ye)ce.reading=!1,function ne(fe,ye){if(O("onEofChunk"),!ye.ended){if(ye.decoder){var ut=ye.decoder.end();ut&&ut.length&&(ye.buffer.push(ut),ye.length+=ye.objectMode?1:ut.length)}ye.ended=!0,ye.sync?Fe(fe):(ye.needReadable=!1,ye.emittedReadable||(ye.emittedReadable=!0,rt(fe)))}}(fe,ce);else if(le||(Ie=function R(fe,ye){var ut;return!function y(fe){return _.isBuffer(fe)||fe instanceof p}(ye)&&"string"!=typeof ye&&void 0!==ye&&!fe.objectMode&&(ut=new H("chunk",["string","Buffer","Uint8Array"],ye)),ut}(ce,ye)),Ie)xe(fe,Ie);else if(ce.objectMode||ye&&ye.length>0)if("string"!=typeof ye&&!ce.objectMode&&Object.getPrototypeOf(ye)!==_.prototype&&(ye=function g(fe){return _.from(fe)}(ye)),be)ce.endEmitted?xe(fe,new W):j(fe,ce,ye,!0);else if(ce.ended)xe(fe,new te);else{if(ce.destroyed)return!1;ce.reading=!1,ce.decoder&&!ut?(ye=ce.decoder.write(ye),ce.objectMode||0!==ye.length?j(fe,ce,ye,!1):Te(fe,ce)):j(fe,ce,ye,!1)}else be||(ce.reading=!1,Te(fe,ce));return!ce.ended&&(ce.length<ce.highWaterMark||0===ce.length)}function j(fe,ye,ut,be){ye.flowing&&0===ye.length&&!ye.sync?(ye.awaitDrain=0,fe.emit("data",ut)):(ye.length+=ye.objectMode?1:ut.length,be?ye.buffer.unshift(ut):ye.buffer.push(ut),ye.needReadable&&Fe(fe)),Te(fe,ye)}Object.defineProperty(P.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(ye){this._readableState&&(this._readableState.destroyed=ye)}}),P.prototype.destroy=v.destroy,P.prototype._undestroy=v.undestroy,P.prototype._destroy=function(fe,ye){ye(fe)},P.prototype.push=function(fe,ye){var be,ut=this._readableState;return ut.objectMode?be=!0:"string"==typeof fe&&((ye=ye||ut.defaultEncoding)!==ut.encoding&&(fe=_.from(fe,ye),ye=""),be=!0),I(this,fe,ye,!1,be)},P.prototype.unshift=function(fe){return I(this,fe,null,!0,!1)},P.prototype.isPaused=function(){return!1===this._readableState.flowing},P.prototype.setEncoding=function(fe){J||(J=S(4547).s);var ye=new J(fe);this._readableState.decoder=ye,this._readableState.encoding=this._readableState.decoder.encoding;for(var ut=this._readableState.buffer.head,be="";null!==ut;)be+=ye.write(ut.data),ut=ut.next;return this._readableState.buffer.clear(),""!==be&&this._readableState.buffer.push(be),this._readableState.length=be.length,this};var Q=1073741824;function Re(fe,ye){return fe<=0||0===ye.length&&ye.ended?0:ye.objectMode?1:fe!=fe?ye.flowing&&ye.length?ye.buffer.head.data.length:ye.length:(fe>ye.highWaterMark&&(ye.highWaterMark=function ee(fe){return fe>=Q?fe=Q:(fe--,fe|=fe>>>1,fe|=fe>>>2,fe|=fe>>>4,fe|=fe>>>8,fe|=fe>>>16,fe++),fe}(fe)),fe<=ye.length?fe:ye.ended?ye.length:(ye.needReadable=!0,0))}function Fe(fe){var ye=fe._readableState;O("emitReadable",ye.needReadable,ye.emittedReadable),ye.needReadable=!1,ye.emittedReadable||(O("emitReadable",ye.flowing),ye.emittedReadable=!0,process.nextTick(rt,fe))}function rt(fe){var ye=fe._readableState;O("emitReadable_",ye.destroyed,ye.length,ye.ended),!ye.destroyed&&(ye.length||ye.ended)&&(fe.emit("readable"),ye.emittedReadable=!1),ye.needReadable=!ye.flowing&&!ye.ended&&ye.length<=ye.highWaterMark,de(fe)}function Te(fe,ye){ye.readingMore||(ye.readingMore=!0,process.nextTick(tt,fe,ye))}function tt(fe,ye){for(;!ye.reading&&!ye.ended&&(ye.length<ye.highWaterMark||ye.flowing&&0===ye.length);){var ut=ye.length;if(O("maybeReadMore read 0"),fe.read(0),ut===ye.length)break}ye.readingMore=!1}function vt(fe){var ye=fe._readableState;ye.readableListening=fe.listenerCount("readable")>0,ye.resumeScheduled&&!ye.paused?ye.flowing=!0:fe.listenerCount("data")>0&&fe.resume()}function et(fe){O("readable nexttick read 0"),fe.read(0)}function it(fe,ye){O("resume",ye.reading),ye.reading||fe.read(0),ye.resumeScheduled=!1,fe.emit("resume"),de(fe),ye.flowing&&!ye.reading&&fe.read(0)}function de(fe){var ye=fe._readableState;for(O("flow",ye.flowing);ye.flowing&&null!==fe.read(););}function Y(fe,ye){return 0===ye.length?null:(ye.objectMode?ut=ye.buffer.shift():!fe||fe>=ye.length?(ut=ye.decoder?ye.buffer.join(""):1===ye.buffer.length?ye.buffer.first():ye.buffer.concat(ye.length),ye.buffer.clear()):ut=ye.buffer.consume(fe,ye.decoder),ut);var ut}function oe(fe){var ye=fe._readableState;O("endReadable",ye.endEmitted),ye.endEmitted||(ye.ended=!0,process.nextTick(ke,ye,fe))}function ke(fe,ye){if(O("endReadableNT",fe.endEmitted,fe.length),!fe.endEmitted&&0===fe.length&&(fe.endEmitted=!0,ye.readable=!1,ye.emit("end"),fe.autoDestroy)){var ut=ye._writableState;(!ut||ut.autoDestroy&&ut.finished)&&ye.destroy()}}function Be(fe,ye){for(var ut=0,be=fe.length;ut<be;ut++)if(fe[ut]===ye)return ut;return-1}P.prototype.read=function(fe){O("read",fe),fe=parseInt(fe,10);var ye=this._readableState,ut=fe;if(0!==fe&&(ye.emittedReadable=!1),0===fe&&ye.needReadable&&((0!==ye.highWaterMark?ye.length>=ye.highWaterMark:ye.length>0)||ye.ended))return O("read: emitReadable",ye.length,ye.ended),0===ye.length&&ye.ended?oe(this):Fe(this),null;if(0===(fe=Re(fe,ye))&&ye.ended)return 0===ye.length&&oe(this),null;var le,be=ye.needReadable;return O("need readable",be),(0===ye.length||ye.length-fe<ye.highWaterMark)&&O("length less than watermark",be=!0),ye.ended||ye.reading?O("reading or ended",be=!1):be&&(O("do read"),ye.reading=!0,ye.sync=!0,0===ye.length&&(ye.needReadable=!0),this._read(ye.highWaterMark),ye.sync=!1,ye.reading||(fe=Re(ut,ye))),null===(le=fe>0?Y(fe,ye):null)?(ye.needReadable=ye.length<=ye.highWaterMark,fe=0):(ye.length-=fe,ye.awaitDrain=0),0===ye.length&&(ye.ended||(ye.needReadable=!0),ut!==fe&&ye.ended&&oe(this)),null!==le&&this.emit("data",le),le},P.prototype._read=function(fe){xe(this,new z("_read()"))},P.prototype.pipe=function(fe,ye){var ut=this,be=this._readableState;switch(be.pipesCount){case 0:be.pipes=fe;break;case 1:be.pipes=[be.pipes,fe];break;default:be.pipes.push(fe)}be.pipesCount+=1,O("pipe count=%d opts=%j",be.pipesCount,ye);var ce=ye&&!1===ye.end||fe===process.stdout||fe===process.stderr?De:ot;function ot(){O("onend"),fe.end()}be.endEmitted?process.nextTick(ce):ut.once("end",ce),fe.on("unpipe",function Ie(Zr,ar){O("onunpipe"),Zr===ut&&ar&&!1===ar.hasUnpiped&&(ar.hasUnpiped=!0,function Gt(){O("cleanup"),fe.removeListener("close",Kn),fe.removeListener("finish",zn),fe.removeListener("drain",Tt),fe.removeListener("error",Xt),fe.removeListener("unpipe",Ie),ut.removeListener("end",ot),ut.removeListener("end",De),ut.removeListener("data",un),Nt=!0,be.awaitDrain&&(!fe._writableState||fe._writableState.needDrain)&&Tt()}())});var Tt=function Qe(fe){return function(){var ut=fe._readableState;O("pipeOnDrain",ut.awaitDrain),ut.awaitDrain&&ut.awaitDrain--,0===ut.awaitDrain&&Z(fe,"data")&&(ut.flowing=!0,de(fe))}}(ut);fe.on("drain",Tt);var Nt=!1;function un(Zr){O("ondata");var ar=fe.write(Zr);O("dest.write",ar),!1===ar&&((1===be.pipesCount&&be.pipes===fe||be.pipesCount>1&&-1!==Be(be.pipes,fe))&&!Nt&&(O("false write response, pause",be.awaitDrain),be.awaitDrain++),ut.pause())}function Xt(Zr){O("onerror",Zr),De(),fe.removeListener("error",Xt),0===Z(fe,"error")&&xe(fe,Zr)}function Kn(){fe.removeListener("finish",zn),De()}function zn(){O("onfinish"),fe.removeListener("close",Kn),De()}function De(){O("unpipe"),ut.unpipe(fe)}return ut.on("data",un),function x(fe,ye,ut){if("function"==typeof fe.prependListener)return fe.prependListener(ye,ut);fe._events&&fe._events[ye]?Array.isArray(fe._events[ye])?fe._events[ye].unshift(ut):fe._events[ye]=[ut,fe._events[ye]]:fe.on(ye,ut)}(fe,"error",Xt),fe.once("close",Kn),fe.once("finish",zn),fe.emit("pipe",ut),be.flowing||(O("pipe resume"),ut.resume()),fe},P.prototype.unpipe=function(fe){var ye=this._readableState,ut={hasUnpiped:!1};if(0===ye.pipesCount)return this;if(1===ye.pipesCount)return fe&&fe!==ye.pipes||(fe||(fe=ye.pipes),ye.pipes=null,ye.pipesCount=0,ye.flowing=!1,fe&&fe.emit("unpipe",this,ut)),this;if(!fe){var be=ye.pipes,le=ye.pipesCount;ye.pipes=null,ye.pipesCount=0,ye.flowing=!1;for(var ce=0;ce<le;ce++)be[ce].emit("unpipe",this,{hasUnpiped:!1});return this}var Ie=Be(ye.pipes,fe);return-1===Ie||(ye.pipes.splice(Ie,1),ye.pipesCount-=1,1===ye.pipesCount&&(ye.pipes=ye.pipes[0]),fe.emit("unpipe",this,ut)),this},P.prototype.addListener=P.prototype.on=function(fe,ye){var ut=r.prototype.on.call(this,fe,ye),be=this._readableState;return"data"===fe?(be.readableListening=this.listenerCount("readable")>0,!1!==be.flowing&&this.resume()):"readable"===fe&&!be.endEmitted&&!be.readableListening&&(be.readableListening=be.needReadable=!0,be.flowing=!1,be.emittedReadable=!1,O("on readable",be.length,be.reading),be.length?Fe(this):be.reading||process.nextTick(et,this)),ut},P.prototype.removeListener=function(fe,ye){var ut=r.prototype.removeListener.call(this,fe,ye);return"readable"===fe&&process.nextTick(vt,this),ut},P.prototype.removeAllListeners=function(fe){var ye=r.prototype.removeAllListeners.apply(this,arguments);return("readable"===fe||void 0===fe)&&process.nextTick(vt,this),ye},P.prototype.resume=function(){var fe=this._readableState;return fe.flowing||(O("resume"),fe.flowing=!fe.readableListening,function $e(fe,ye){ye.resumeScheduled||(ye.resumeScheduled=!0,process.nextTick(it,fe,ye))}(this,fe)),fe.paused=!1,this},P.prototype.pause=function(){return O("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(O("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},P.prototype.wrap=function(fe){var ye=this,ut=this._readableState,be=!1;for(var le in fe.on("end",function(){if(O("wrapped end"),ut.decoder&&!ut.ended){var Ie=ut.decoder.end();Ie&&Ie.length&&ye.push(Ie)}ye.push(null)}),fe.on("data",function(Ie){O("wrapped data"),ut.decoder&&(Ie=ut.decoder.write(Ie)),ut.objectMode&&null==Ie||!(ut.objectMode||Ie&&Ie.length)||ye.push(Ie)||(be=!0,fe.pause())}),fe)void 0===this[le]&&"function"==typeof fe[le]&&(this[le]=function(ot){return function(){return fe[ot].apply(fe,arguments)}}(le));for(var ce=0;ce<ge.length;ce++)fe.on(ge[ce],this.emit.bind(this,ge[ce]));return this._read=function(Ie){O("wrapped _read",Ie),be&&(be=!1,fe.resume())},this},"function"==typeof Symbol&&(P.prototype[Symbol.asyncIterator]=function(){return void 0===se&&(se=S(78878)),se(this)}),Object.defineProperty(P.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(P.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(P.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(ye){this._readableState&&(this._readableState.flowing=ye)}}),P._fromList=Y,Object.defineProperty(P.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(P.from=function(fe,ye){return void 0===ve&&(ve=S(39586)),ve(P,fe,ye)})},869:(pe,N,S)=>{pe.exports=y;var M=S(23803).q,q=M.ERR_METHOD_NOT_IMPLEMENTED,Z=M.ERR_MULTIPLE_CALLBACK,r=M.ERR_TRANSFORM_ALREADY_TRANSFORMING,_=M.ERR_TRANSFORM_WITH_LENGTH_0,p=S(86124);function g($,v){var b=this._transformState;b.transforming=!1;var V=b.writecb;if(null===V)return this.emit("error",new Z);b.writechunk=null,b.writecb=null,null!=v&&this.push(v),V($);var G=this._readableState;G.reading=!1,(G.needReadable||G.length<G.highWaterMark)&&this._read(G.highWaterMark)}function y($){if(!(this instanceof y))return new y($);p.call(this,$),this._transformState={afterTransform:g.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,$&&("function"==typeof $.transform&&(this._transform=$.transform),"function"==typeof $.flush&&(this._flush=$.flush)),this.on("prefinish",E)}function E(){var $=this;"function"!=typeof this._flush||this._readableState.destroyed?O(this,null,null):this._flush(function(v,b){O($,v,b)})}function O($,v,b){if(v)return $.emit("error",v);if(null!=b&&$.push(b),$._writableState.length)throw new _;if($._transformState.transforming)throw new r;return $.push(null)}S(55035)(y,p),y.prototype.push=function($,v){return this._transformState.needTransform=!1,p.prototype.push.call(this,$,v)},y.prototype._transform=function($,v,b){b(new q("_transform()"))},y.prototype._write=function($,v,b){var V=this._transformState;if(V.writecb=b,V.writechunk=$,V.writeencoding=v,!V.transforming){var G=this._readableState;(V.needTransform||G.needReadable||G.length<G.highWaterMark)&&this._read(G.highWaterMark)}},y.prototype._read=function($){var v=this._transformState;null===v.writechunk||v.transforming?v.needTransform=!0:(v.transforming=!0,this._transform(v.writechunk,v.writeencoding,v.afterTransform))},y.prototype._destroy=function($,v){p.prototype._destroy.call(this,$,function(b){v(b)})}},36480:(pe,N,S)=>{function q(de){var Y=this;this.next=null,this.entry=null,this.finish=function(){!function it(de,Y,oe){var ke=de.entry;for(de.entry=null;ke;){var Be=ke.callback;Y.pendingcb--,Be(oe),ke=ke.next}Y.corkedRequestsFree.next=de}(Y,de)}}var Z;pe.exports=D,D.WritableState=ge;var x,r={deprecate:S(38059)},_=S(55628),p=S(13195).Buffer,g=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},O=S(55767),v=S(8003).getHighWaterMark,b=S(23803).q,V=b.ERR_INVALID_ARG_TYPE,G=b.ERR_METHOD_NOT_IMPLEMENTED,H=b.ERR_MULTIPLE_CALLBACK,te=b.ERR_STREAM_CANNOT_PIPE,z=b.ERR_STREAM_DESTROYED,W=b.ERR_STREAM_NULL_VALUES,J=b.ERR_STREAM_WRITE_AFTER_END,se=b.ERR_UNKNOWN_ENCODING,ve=O.errorOrDestroy;function xe(){}function ge(de,Y,oe){Z=Z||S(86124),"boolean"!=typeof oe&&(oe=Y instanceof Z),this.objectMode=!!(de=de||{}).objectMode,oe&&(this.objectMode=this.objectMode||!!de.writableObjectMode),this.highWaterMark=v(this,de,"writableHighWaterMark",oe),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===de.decodeStrings),this.defaultEncoding=de.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Be){!function ne(de,Y){var oe=de._writableState,ke=oe.sync,Be=oe.writecb;if("function"!=typeof Be)throw new H;if(function Re(de){de.writing=!1,de.writecb=null,de.length-=de.writelen,de.writelen=0}(oe),Y)!function ee(de,Y,oe,ke,Be){--Y.pendingcb,oe?(process.nextTick(Be,ke),process.nextTick(et,de,Y),de._writableState.errorEmitted=!0,ve(de,ke)):(Be(ke),de._writableState.errorEmitted=!0,ve(de,ke),et(de,Y))}(de,oe,ke,Y,Be);else{var fe=tt(oe)||de.destroyed;!fe&&!oe.corked&&!oe.bufferProcessing&&oe.bufferedRequest&&Te(de,oe),ke?process.nextTick(Fe,de,oe,fe,Be):Fe(de,oe,fe,Be)}}(Y,Be)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==de.emitClose,this.autoDestroy=!!de.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new q(this)}function D(de){var Y=this instanceof(Z=Z||S(86124));if(!Y&&!x.call(D,this))return new D(de);this._writableState=new ge(de,this,Y),this.writable=!0,de&&("function"==typeof de.write&&(this._write=de.write),"function"==typeof de.writev&&(this._writev=de.writev),"function"==typeof de.destroy&&(this._destroy=de.destroy),"function"==typeof de.final&&(this._final=de.final)),_.call(this)}function Q(de,Y,oe,ke,Be,fe,ye){Y.writelen=ke,Y.writecb=ye,Y.writing=!0,Y.sync=!0,Y.destroyed?Y.onwrite(new z("write")):oe?de._writev(Be,Y.onwrite):de._write(Be,fe,Y.onwrite),Y.sync=!1}function Fe(de,Y,oe,ke){oe||function rt(de,Y){0===Y.length&&Y.needDrain&&(Y.needDrain=!1,de.emit("drain"))}(de,Y),Y.pendingcb--,ke(),et(de,Y)}function Te(de,Y){Y.bufferProcessing=!0;var oe=Y.bufferedRequest;if(de._writev&&oe&&oe.next){var Be=new Array(Y.bufferedRequestCount),fe=Y.corkedRequestsFree;fe.entry=oe;for(var ye=0,ut=!0;oe;)Be[ye]=oe,oe.isBuf||(ut=!1),oe=oe.next,ye+=1;Be.allBuffers=ut,Q(de,Y,!0,Y.length,Be,"",fe.finish),Y.pendingcb++,Y.lastBufferedRequest=null,fe.next?(Y.corkedRequestsFree=fe.next,fe.next=null):Y.corkedRequestsFree=new q(Y),Y.bufferedRequestCount=0}else{for(;oe;){var be=oe.chunk;if(Q(de,Y,!1,Y.objectMode?1:be.length,be,oe.encoding,oe.callback),oe=oe.next,Y.bufferedRequestCount--,Y.writing)break}null===oe&&(Y.lastBufferedRequest=null)}Y.bufferedRequest=oe,Y.bufferProcessing=!1}function tt(de){return de.ending&&0===de.length&&null===de.bufferedRequest&&!de.finished&&!de.writing}function Qe(de,Y){de._final(function(oe){Y.pendingcb--,oe&&ve(de,oe),Y.prefinished=!0,de.emit("prefinish"),et(de,Y)})}function et(de,Y){var oe=tt(Y);if(oe&&(function vt(de,Y){!Y.prefinished&&!Y.finalCalled&&("function"!=typeof de._final||Y.destroyed?(Y.prefinished=!0,de.emit("prefinish")):(Y.pendingcb++,Y.finalCalled=!0,process.nextTick(Qe,de,Y)))}(de,Y),0===Y.pendingcb&&(Y.finished=!0,de.emit("finish"),Y.autoDestroy))){var ke=de._readableState;(!ke||ke.autoDestroy&&ke.endEmitted)&&de.destroy()}return oe}S(55035)(D,_),ge.prototype.getBuffer=function(){for(var Y=this.bufferedRequest,oe=[];Y;)oe.push(Y),Y=Y.next;return oe},function(){try{Object.defineProperty(ge.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(x=Function.prototype[Symbol.hasInstance],Object.defineProperty(D,Symbol.hasInstance,{value:function(Y){return!!x.call(this,Y)||this===D&&Y&&Y._writableState instanceof ge}})):x=function(Y){return Y instanceof this},D.prototype.pipe=function(){ve(this,new te)},D.prototype.write=function(de,Y,oe){var ke=this._writableState,Be=!1,fe=!ke.objectMode&&function E(de){return p.isBuffer(de)||de instanceof g}(de);return fe&&!p.isBuffer(de)&&(de=function y(de){return p.from(de)}(de)),"function"==typeof Y&&(oe=Y,Y=null),fe?Y="buffer":Y||(Y=ke.defaultEncoding),"function"!=typeof oe&&(oe=xe),ke.ending?function P(de,Y){var oe=new J;ve(de,oe),process.nextTick(Y,oe)}(this,oe):(fe||function I(de,Y,oe,ke){var Be;return null===oe?Be=new W:"string"!=typeof oe&&!Y.objectMode&&(Be=new V("chunk",["string","Buffer"],oe)),!Be||(ve(de,Be),process.nextTick(ke,Be),!1)}(this,ke,de,oe))&&(ke.pendingcb++,Be=function R(de,Y,oe,ke,Be,fe){if(!oe){var ye=function j(de,Y,oe){return!de.objectMode&&!1!==de.decodeStrings&&"string"==typeof Y&&(Y=p.from(Y,oe)),Y}(Y,ke,Be);ke!==ye&&(oe=!0,Be="buffer",ke=ye)}var ut=Y.objectMode?1:ke.length;Y.length+=ut;var be=Y.length<Y.highWaterMark;if(be||(Y.needDrain=!0),Y.writing||Y.corked){var le=Y.lastBufferedRequest;Y.lastBufferedRequest={chunk:ke,encoding:Be,isBuf:oe,callback:fe,next:null},le?le.next=Y.lastBufferedRequest:Y.bufferedRequest=Y.lastBufferedRequest,Y.bufferedRequestCount+=1}else Q(de,Y,!1,ut,ke,Be,fe);return be}(this,ke,fe,de,Y,oe)),Be},D.prototype.cork=function(){this._writableState.corked++},D.prototype.uncork=function(){var de=this._writableState;de.corked&&(de.corked--,!de.writing&&!de.corked&&!de.bufferProcessing&&de.bufferedRequest&&Te(this,de))},D.prototype.setDefaultEncoding=function(Y){if("string"==typeof Y&&(Y=Y.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Y+"").toLowerCase())>-1))throw new se(Y);return this._writableState.defaultEncoding=Y,this},Object.defineProperty(D.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(D.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),D.prototype._write=function(de,Y,oe){oe(new G("_write()"))},D.prototype._writev=null,D.prototype.end=function(de,Y,oe){var ke=this._writableState;return"function"==typeof de?(oe=de,de=null,Y=null):"function"==typeof Y&&(oe=Y,Y=null),null!=de&&this.write(de,Y),ke.corked&&(ke.corked=1,this.uncork()),ke.ending||function $e(de,Y,oe){Y.ending=!0,et(de,Y),oe&&(Y.finished?process.nextTick(oe):de.once("finish",oe)),Y.ended=!0,de.writable=!1}(this,ke,oe),this},Object.defineProperty(D.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(D.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(Y){this._writableState&&(this._writableState.destroyed=Y)}}),D.prototype.destroy=O.destroy,D.prototype._undestroy=O.undestroy,D.prototype._destroy=function(de,Y){Y(de)}},78878:(pe,N,S)=>{var M;function q(J,se,ve){return se=function Z(J){var se=function r(J,se){if("object"!=typeof J||null===J)return J;var ve=J[Symbol.toPrimitive];if(void 0!==ve){var xe=ve.call(J,se||"default");if("object"!=typeof xe)return xe;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===se?String:Number)(J)}(J,"string");return"symbol"==typeof se?se:String(se)}(se),se in J?Object.defineProperty(J,se,{value:ve,enumerable:!0,configurable:!0,writable:!0}):J[se]=ve,J}var _=S(48938),p=Symbol("lastResolve"),g=Symbol("lastReject"),y=Symbol("error"),E=Symbol("ended"),O=Symbol("lastPromise"),$=Symbol("handlePromise"),v=Symbol("stream");function b(J,se){return{value:J,done:se}}function V(J){var se=J[p];if(null!==se){var ve=J[v].read();null!==ve&&(J[O]=null,J[p]=null,J[g]=null,se(b(ve,!1)))}}function G(J){process.nextTick(V,J)}var te=Object.getPrototypeOf(function(){}),z=Object.setPrototypeOf((q(M={get stream(){return this[v]},next:function(){var se=this,ve=this[y];if(null!==ve)return Promise.reject(ve);if(this[E])return Promise.resolve(b(void 0,!0));if(this[v].destroyed)return new Promise(function(D,P){process.nextTick(function(){se[y]?P(se[y]):D(b(void 0,!0))})});var ge,xe=this[O];if(xe)ge=new Promise(function H(J,se){return function(ve,xe){J.then(function(){se[E]?ve(b(void 0,!0)):se[$](ve,xe)},xe)}}(xe,this));else{var x=this[v].read();if(null!==x)return Promise.resolve(b(x,!1));ge=new Promise(this[$])}return this[O]=ge,ge}},Symbol.asyncIterator,function(){return this}),q(M,"return",function(){var se=this;return new Promise(function(ve,xe){se[v].destroy(null,function(ge){ge?xe(ge):ve(b(void 0,!0))})})}),M),te);pe.exports=function(se){var ve,xe=Object.create(z,(q(ve={},v,{value:se,writable:!0}),q(ve,p,{value:null,writable:!0}),q(ve,g,{value:null,writable:!0}),q(ve,y,{value:null,writable:!0}),q(ve,E,{value:se._readableState.endEmitted,writable:!0}),q(ve,$,{value:function(x,D){var P=xe[v].read();P?(xe[O]=null,xe[p]=null,xe[g]=null,x(b(P,!1))):(xe[p]=x,xe[g]=D)},writable:!0}),ve));return xe[O]=null,_(se,function(ge){if(ge&&"ERR_STREAM_PREMATURE_CLOSE"!==ge.code){var x=xe[g];return null!==x&&(xe[O]=null,xe[p]=null,xe[g]=null,x(ge)),void(xe[y]=ge)}var D=xe[p];null!==D&&(xe[O]=null,xe[p]=null,xe[g]=null,D(b(void 0,!0))),xe[E]=!0}),se.on("readable",G.bind(null,xe)),xe}},78197:(pe,N,S)=>{function M(G,H){var te=Object.keys(G);if(Object.getOwnPropertySymbols){var z=Object.getOwnPropertySymbols(G);H&&(z=z.filter(function(W){return Object.getOwnPropertyDescriptor(G,W).enumerable})),te.push.apply(te,z)}return te}function q(G){for(var H=1;H<arguments.length;H++){var te=null!=arguments[H]?arguments[H]:{};H%2?M(Object(te),!0).forEach(function(z){Z(G,z,te[z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(te)):M(Object(te)).forEach(function(z){Object.defineProperty(G,z,Object.getOwnPropertyDescriptor(te,z))})}return G}function Z(G,H,te){return(H=g(H))in G?Object.defineProperty(G,H,{value:te,enumerable:!0,configurable:!0,writable:!0}):G[H]=te,G}function _(G,H){for(var te=0;te<H.length;te++){var z=H[te];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(G,g(z.key),z)}}function g(G){var H=function y(G,H){if("object"!=typeof G||null===G)return G;var te=G[Symbol.toPrimitive];if(void 0!==te){var z=te.call(G,H||"default");if("object"!=typeof z)return z;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===H?String:Number)(G)}(G,"string");return"symbol"==typeof H?H:String(H)}var O=S(13195).Buffer,v=S(69862).inspect,b=v&&v.custom||"inspect";function V(G,H,te){O.prototype.copy.call(G,H,te)}pe.exports=function(){function G(){(function r(G,H){if(!(G instanceof H))throw new TypeError("Cannot call a class as a function")})(this,G),this.head=null,this.tail=null,this.length=0}return function p(G,H,te){H&&_(G.prototype,H),te&&_(G,te),Object.defineProperty(G,"prototype",{writable:!1})}(G,[{key:"push",value:function(te){var z={data:te,next:null};this.length>0?this.tail.next=z:this.head=z,this.tail=z,++this.length}},{key:"unshift",value:function(te){var z={data:te,next:this.head};0===this.length&&(this.tail=z),this.head=z,++this.length}},{key:"shift",value:function(){if(0!==this.length){var te=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,te}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(te){if(0===this.length)return"";for(var z=this.head,W=""+z.data;z=z.next;)W+=te+z.data;return W}},{key:"concat",value:function(te){if(0===this.length)return O.alloc(0);for(var z=O.allocUnsafe(te>>>0),W=this.head,J=0;W;)V(W.data,z,J),J+=W.data.length,W=W.next;return z}},{key:"consume",value:function(te,z){var W;return te<this.head.data.length?(W=this.head.data.slice(0,te),this.head.data=this.head.data.slice(te)):W=te===this.head.data.length?this.shift():z?this._getString(te):this._getBuffer(te),W}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(te){var z=this.head,W=1,J=z.data;for(te-=J.length;z=z.next;){var se=z.data,ve=te>se.length?se.length:te;if(J+=ve===se.length?se:se.slice(0,te),0==(te-=ve)){ve===se.length?(++W,this.head=z.next?z.next:this.tail=null):(this.head=z,z.data=se.slice(ve));break}++W}return this.length-=W,J}},{key:"_getBuffer",value:function(te){var z=O.allocUnsafe(te),W=this.head,J=1;for(W.data.copy(z),te-=W.data.length;W=W.next;){var se=W.data,ve=te>se.length?se.length:te;if(se.copy(z,z.length-te,0,ve),0==(te-=ve)){ve===se.length?(++J,this.head=W.next?W.next:this.tail=null):(this.head=W,W.data=se.slice(ve));break}++J}return this.length-=J,z}},{key:b,value:function(te,z){return v(this,q(q({},z),{},{depth:0,customInspect:!1}))}}]),G}()},55767:pe=>{function S(_,p){Z(_,p),M(_)}function M(_){_._writableState&&!_._writableState.emitClose||_._readableState&&!_._readableState.emitClose||_.emit("close")}function Z(_,p){_.emit("error",p)}pe.exports={destroy:function N(_,p){var g=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(p?p(_):_&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(Z,this,_)):process.nextTick(Z,this,_)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(_||null,function(O){!p&&O?g._writableState?g._writableState.errorEmitted?process.nextTick(M,g):(g._writableState.errorEmitted=!0,process.nextTick(S,g,O)):process.nextTick(S,g,O):p?(process.nextTick(M,g),p(O)):process.nextTick(M,g)}),this)},undestroy:function q(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function r(_,p){var g=_._readableState,y=_._writableState;g&&g.autoDestroy||y&&y.autoDestroy?_.destroy(p):_.emit("error",p)}}},48938:(pe,N,S)=>{var M=S(23803).q.ERR_STREAM_PREMATURE_CLOSE;function Z(){}pe.exports=function _(p,g,y){if("function"==typeof g)return _(p,null,g);g||(g={}),y=function q(p){var g=!1;return function(){if(!g){g=!0;for(var y=arguments.length,E=new Array(y),O=0;O<y;O++)E[O]=arguments[O];p.apply(this,E)}}}(y||Z);var E=g.readable||!1!==g.readable&&p.readable,O=g.writable||!1!==g.writable&&p.writable,$=function(){p.writable||b()},v=p._writableState&&p._writableState.finished,b=function(){O=!1,v=!0,E||y.call(p)},V=p._readableState&&p._readableState.endEmitted,G=function(){E=!1,V=!0,O||y.call(p)},H=function(J){y.call(p,J)},te=function(){var J;return E&&!V?((!p._readableState||!p._readableState.ended)&&(J=new M),y.call(p,J)):O&&!v?((!p._writableState||!p._writableState.ended)&&(J=new M),y.call(p,J)):void 0},z=function(){p.req.on("finish",b)};return function r(p){return p.setHeader&&"function"==typeof p.abort}(p)?(p.on("complete",b),p.on("abort",te),p.req?z():p.on("request",z)):O&&!p._writableState&&(p.on("end",$),p.on("close",$)),p.on("end",G),p.on("finish",b),!1!==g.error&&p.on("error",H),p.on("close",te),function(){p.removeListener("complete",b),p.removeListener("abort",te),p.removeListener("request",z),p.req&&p.req.removeListener("finish",b),p.removeListener("end",$),p.removeListener("close",$),p.removeListener("finish",b),p.removeListener("end",G),p.removeListener("error",H),p.removeListener("close",te)}}},39586:pe=>{pe.exports=function(){throw new Error("Readable.from is not available in the browser")}},29719:(pe,N,S)=>{var M,Z=S(23803).q,r=Z.ERR_MISSING_ARGS,_=Z.ERR_STREAM_DESTROYED;function p(b){if(b)throw b}function E(b){b()}function O(b,V){return b.pipe(V)}pe.exports=function v(){for(var b=arguments.length,V=new Array(b),G=0;G<b;G++)V[G]=arguments[G];var H=function $(b){return b.length&&"function"==typeof b[b.length-1]?b.pop():p}(V);if(Array.isArray(V[0])&&(V=V[0]),V.length<2)throw new r("streams");var te,z=V.map(function(W,J){var se=J<V.length-1;return function y(b,V,G,H){H=function q(b){var V=!1;return function(){V||(V=!0,b.apply(void 0,arguments))}}(H);var te=!1;b.on("close",function(){te=!0}),void 0===M&&(M=S(48938)),M(b,{readable:V,writable:G},function(W){if(W)return H(W);te=!0,H()});var z=!1;return function(W){if(!te&&!z){if(z=!0,function g(b){return b.setHeader&&"function"==typeof b.abort}(b))return b.abort();if("function"==typeof b.destroy)return b.destroy();H(W||new _("pipe"))}}}(W,se,J>0,function(xe){te||(te=xe),xe&&z.forEach(E),!se&&(z.forEach(E),H(te))})});return V.reduce(O)}},8003:(pe,N,S)=>{var M=S(23803).q.ERR_INVALID_OPT_VALUE;pe.exports={getHighWaterMark:function Z(r,_,p,g){var y=function q(r,_,p){return null!=r.highWaterMark?r.highWaterMark:_?r[p]:null}(_,g,p);if(null!=y){if(!isFinite(y)||Math.floor(y)!==y||y<0)throw new M(g?p:"highWaterMark",y);return Math.floor(y)}return r.objectMode?16:16384}}},55628:(pe,N,S)=>{pe.exports=S(83358).EventEmitter},4547:(pe,N,S)=>{var M=S(57475).Buffer,q=M.isEncoding||function(z){switch((z=""+z)&&z.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function _(z){var W;switch(this.encoding=function r(z){var W=function Z(z){if(!z)return"utf8";for(var W;;)switch(z){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return z;default:if(W)return;z=(""+z).toLowerCase(),W=!0}}(z);if("string"!=typeof W&&(M.isEncoding===q||!q(z)))throw new Error("Unknown encoding: "+z);return W||z}(z),this.encoding){case"utf16le":this.text=v,this.end=b,W=4;break;case"utf8":this.fillLast=E,W=4;break;case"base64":this.text=V,this.end=G,W=3;break;default:return this.write=H,void(this.end=te)}this.lastNeed=0,this.lastTotal=0,this.lastChar=M.allocUnsafe(W)}function p(z){return z<=127?0:z>>5==6?2:z>>4==14?3:z>>3==30?4:z>>6==2?-1:-2}function E(z){var W=this.lastTotal-this.lastNeed,J=function y(z,W,J){if(128!=(192&W[0]))return z.lastNeed=0,"\ufffd";if(z.lastNeed>1&&W.length>1){if(128!=(192&W[1]))return z.lastNeed=1,"\ufffd";if(z.lastNeed>2&&W.length>2&&128!=(192&W[2]))return z.lastNeed=2,"\ufffd"}}(this,z);return void 0!==J?J:this.lastNeed<=z.length?(z.copy(this.lastChar,W,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(z.copy(this.lastChar,W,0,z.length),void(this.lastNeed-=z.length))}function v(z,W){if((z.length-W)%2==0){var J=z.toString("utf16le",W);if(J){var se=J.charCodeAt(J.length-1);if(se>=55296&&se<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=z[z.length-2],this.lastChar[1]=z[z.length-1],J.slice(0,-1)}return J}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=z[z.length-1],z.toString("utf16le",W,z.length-1)}function b(z){var W=z&&z.length?this.write(z):"";return this.lastNeed?W+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):W}function V(z,W){var J=(z.length-W)%3;return 0===J?z.toString("base64",W):(this.lastNeed=3-J,this.lastTotal=3,1===J?this.lastChar[0]=z[z.length-1]:(this.lastChar[0]=z[z.length-2],this.lastChar[1]=z[z.length-1]),z.toString("base64",W,z.length-J))}function G(z){var W=z&&z.length?this.write(z):"";return this.lastNeed?W+this.lastChar.toString("base64",0,3-this.lastNeed):W}function H(z){return z.toString(this.encoding)}function te(z){return z&&z.length?this.write(z):""}N.s=_,_.prototype.write=function(z){if(0===z.length)return"";var W,J;if(this.lastNeed){if(void 0===(W=this.fillLast(z)))return"";J=this.lastNeed,this.lastNeed=0}else J=0;return J<z.length?W?W+this.text(z,J):this.text(z,J):W||""},_.prototype.end=function $(z){var W=z&&z.length?this.write(z):"";return this.lastNeed?W+"\ufffd":W},_.prototype.text=function O(z,W){var J=function g(z,W,J){var se=W.length-1;if(se<J)return 0;var ve=p(W[se]);return ve>=0?(ve>0&&(z.lastNeed=ve-1),ve):--se<J||-2===ve?0:(ve=p(W[se]))>=0?(ve>0&&(z.lastNeed=ve-2),ve):--se<J||-2===ve?0:(ve=p(W[se]))>=0?(ve>0&&(2===ve?ve=0:z.lastNeed=ve-3),ve):0}(this,z,W);if(!this.lastNeed)return z.toString("utf8",W);this.lastTotal=J;var se=z.length-(J-this.lastNeed);return z.copy(this.lastChar,0,se),z.toString("utf8",W,se)},_.prototype.fillLast=function(z){if(this.lastNeed<=z.length)return z.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);z.copy(this.lastChar,this.lastTotal-this.lastNeed,0,z.length),this.lastNeed-=z.length}},57475:(pe,N,S)=>{var M=S(13195),q=M.Buffer;function Z(_,p){for(var g in _)p[g]=_[g]}function r(_,p,g){return q(_,p,g)}q.from&&q.alloc&&q.allocUnsafe&&q.allocUnsafeSlow?pe.exports=M:(Z(M,N),N.Buffer=r),Z(q,r),r.from=function(_,p,g){if("number"==typeof _)throw new TypeError("Argument must not be a number");return q(_,p,g)},r.alloc=function(_,p,g){if("number"!=typeof _)throw new TypeError("Argument must be a number");var y=q(_);return void 0!==p?"string"==typeof g?y.fill(p,g):y.fill(p):y.fill(0),y},r.allocUnsafe=function(_){if("number"!=typeof _)throw new TypeError("Argument must be a number");return q(_)},r.allocUnsafeSlow=function(_){if("number"!=typeof _)throw new TypeError("Argument must be a number");return M.SlowBuffer(_)}},48372:pe=>{var N=/^[-+]?0x[a-fA-F0-9]+$/,S=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);var M={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};pe.exports=function q(r){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(_=Object.assign({},M,_),!r||"string"!=typeof r)return r;var p=r.trim();if(void 0!==_.skipLike&&_.skipLike.test(p))return r;if(_.hex&&N.test(p))return Number.parseInt(p,16);var g=S.exec(p);if(g){var y=g[1],E=g[2],O=function Z(r){return r&&-1!==r.indexOf(".")&&("."===(r=r.replace(/0+$/,""))?r="0":"."===r[0]?r="0"+r:"."===r[r.length-1]&&(r=r.substr(0,r.length-1))),r}(g[3]),$=g[4]||g[6];if(!_.leadingZeros&&E.length>0&&y&&"."!==p[2])return r;if(!_.leadingZeros&&E.length>0&&!y&&"."!==p[1])return r;var v=Number(p),b=""+v;return-1!==b.search(/[eE]/)||$?_.eNotation?v:r:-1!==p.indexOf(".")?"0"===b&&""===O||b===O||y&&b==="-"+O?v:r:E?O===b||y+O===b?v:r:p===b||p===y+b?v:r}return r}},38059:pe=>{function S(M){try{if(!global.localStorage)return!1}catch{return!1}var q=global.localStorage[M];return null!=q&&"true"===String(q).toLowerCase()}pe.exports=function N(M,q){if(S("noDeprecation"))return M;var Z=!1;return function r(){if(!Z){if(S("throwDeprecation"))throw new Error(q);S("traceDeprecation")?console.trace(q):console.warn(q),Z=!0}return M.apply(this,arguments)}}},92361:(pe,N,S)=>{S.r(N),S.d(N,{__assign:()=>Z,__asyncDelegator:()=>z,__asyncGenerator:()=>te,__asyncValues:()=>W,__await:()=>H,__awaiter:()=>y,__classPrivateFieldGet:()=>xe,__classPrivateFieldSet:()=>ge,__createBinding:()=>O,__decorate:()=>_,__exportStar:()=>$,__extends:()=>q,__generator:()=>E,__importDefault:()=>ve,__importStar:()=>se,__makeTemplateObject:()=>J,__metadata:()=>g,__param:()=>p,__read:()=>b,__rest:()=>r,__spread:()=>V,__spreadArrays:()=>G,__values:()=>v});var M=function(x,D){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,I){P.__proto__=I}||function(P,I){for(var j in I)I.hasOwnProperty(j)&&(P[j]=I[j])})(x,D)};function q(x,D){function P(){this.constructor=x}M(x,D),x.prototype=null===D?Object.create(D):(P.prototype=D.prototype,new P)}var Z=function(){return Z=Object.assign||function(D){for(var P,I=1,j=arguments.length;I<j;I++)for(var R in P=arguments[I])Object.prototype.hasOwnProperty.call(P,R)&&(D[R]=P[R]);return D},Z.apply(this,arguments)};function r(x,D){var P={};for(var I in x)Object.prototype.hasOwnProperty.call(x,I)&&D.indexOf(I)<0&&(P[I]=x[I]);if(null!=x&&"function"==typeof Object.getOwnPropertySymbols){var j=0;for(I=Object.getOwnPropertySymbols(x);j<I.length;j++)D.indexOf(I[j])<0&&Object.prototype.propertyIsEnumerable.call(x,I[j])&&(P[I[j]]=x[I[j]])}return P}function _(x,D,P,I){var Q,j=arguments.length,R=j<3?D:null===I?I=Object.getOwnPropertyDescriptor(D,P):I;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)R=Reflect.decorate(x,D,P,I);else for(var ee=x.length-1;ee>=0;ee--)(Q=x[ee])&&(R=(j<3?Q(R):j>3?Q(D,P,R):Q(D,P))||R);return j>3&&R&&Object.defineProperty(D,P,R),R}function p(x,D){return function(P,I){D(P,I,x)}}function g(x,D){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(x,D)}function y(x,D,P,I){return new(P||(P=Promise))(function(R,Q){function ee(Fe){try{ne(I.next(Fe))}catch(rt){Q(rt)}}function Re(Fe){try{ne(I.throw(Fe))}catch(rt){Q(rt)}}function ne(Fe){Fe.done?R(Fe.value):function j(R){return R instanceof P?R:new P(function(Q){Q(R)})}(Fe.value).then(ee,Re)}ne((I=I.apply(x,D||[])).next())})}function E(x,D){var I,j,R,Q,P={label:0,sent:function(){if(1&R[0])throw R[1];return R[1]},trys:[],ops:[]};return Q={next:ee(0),throw:ee(1),return:ee(2)},"function"==typeof Symbol&&(Q[Symbol.iterator]=function(){return this}),Q;function ee(ne){return function(Fe){return function Re(ne){if(I)throw new TypeError("Generator is already executing.");for(;P;)try{if(I=1,j&&(R=2&ne[0]?j.return:ne[0]?j.throw||((R=j.return)&&R.call(j),0):j.next)&&!(R=R.call(j,ne[1])).done)return R;switch(j=0,R&&(ne=[2&ne[0],R.value]),ne[0]){case 0:case 1:R=ne;break;case 4:return P.label++,{value:ne[1],done:!1};case 5:P.label++,j=ne[1],ne=[0];continue;case 7:ne=P.ops.pop(),P.trys.pop();continue;default:if(!(R=(R=P.trys).length>0&&R[R.length-1])&&(6===ne[0]||2===ne[0])){P=0;continue}if(3===ne[0]&&(!R||ne[1]>R[0]&&ne[1]<R[3])){P.label=ne[1];break}if(6===ne[0]&&P.label<R[1]){P.label=R[1],R=ne;break}if(R&&P.label<R[2]){P.label=R[2],P.ops.push(ne);break}R[2]&&P.ops.pop(),P.trys.pop();continue}ne=D.call(x,P)}catch(Fe){ne=[6,Fe],j=0}finally{I=R=0}if(5&ne[0])throw ne[1];return{value:ne[0]?ne[1]:void 0,done:!0}}([ne,Fe])}}}function O(x,D,P,I){void 0===I&&(I=P),x[I]=D[P]}function $(x,D){for(var P in x)"default"!==P&&!D.hasOwnProperty(P)&&(D[P]=x[P])}function v(x){var D="function"==typeof Symbol&&Symbol.iterator,P=D&&x[D],I=0;if(P)return P.call(x);if(x&&"number"==typeof x.length)return{next:function(){return x&&I>=x.length&&(x=void 0),{value:x&&x[I++],done:!x}}};throw new TypeError(D?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(x,D){var P="function"==typeof Symbol&&x[Symbol.iterator];if(!P)return x;var j,Q,I=P.call(x),R=[];try{for(;(void 0===D||D-- >0)&&!(j=I.next()).done;)R.push(j.value)}catch(ee){Q={error:ee}}finally{try{j&&!j.done&&(P=I.return)&&P.call(I)}finally{if(Q)throw Q.error}}return R}function V(){for(var x=[],D=0;D<arguments.length;D++)x=x.concat(b(arguments[D]));return x}function G(){for(var x=0,D=0,P=arguments.length;D<P;D++)x+=arguments[D].length;var I=Array(x),j=0;for(D=0;D<P;D++)for(var R=arguments[D],Q=0,ee=R.length;Q<ee;Q++,j++)I[j]=R[Q];return I}function H(x){return this instanceof H?(this.v=x,this):new H(x)}function te(x,D,P){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var j,I=P.apply(x,D||[]),R=[];return j={},Q("next"),Q("throw"),Q("return"),j[Symbol.asyncIterator]=function(){return this},j;function Q(Te){I[Te]&&(j[Te]=function(tt){return new Promise(function(Qe,vt){R.push([Te,tt,Qe,vt])>1||ee(Te,tt)})})}function ee(Te,tt){try{!function Re(Te){Te.value instanceof H?Promise.resolve(Te.value.v).then(ne,Fe):rt(R[0][2],Te)}(I[Te](tt))}catch(Qe){rt(R[0][3],Qe)}}function ne(Te){ee("next",Te)}function Fe(Te){ee("throw",Te)}function rt(Te,tt){Te(tt),R.shift(),R.length&&ee(R[0][0],R[0][1])}}function z(x){var D,P;return D={},I("next"),I("throw",function(j){throw j}),I("return"),D[Symbol.iterator]=function(){return this},D;function I(j,R){D[j]=x[j]?function(Q){return(P=!P)?{value:H(x[j](Q)),done:"return"===j}:R?R(Q):Q}:R}}function W(x){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var P,D=x[Symbol.asyncIterator];return D?D.call(x):(x=v(x),P={},I("next"),I("throw"),I("return"),P[Symbol.asyncIterator]=function(){return this},P);function I(R){P[R]=x[R]&&function(Q){return new Promise(function(ee,Re){!function j(R,Q,ee,Re){Promise.resolve(Re).then(function(ne){R({value:ne,done:ee})},Q)}(ee,Re,(Q=x[R](Q)).done,Q.value)})}}}function J(x,D){return Object.defineProperty?Object.defineProperty(x,"raw",{value:D}):x.raw=D,x}function se(x){if(x&&x.__esModule)return x;var D={};if(null!=x)for(var P in x)Object.hasOwnProperty.call(x,P)&&(D[P]=x[P]);return D.default=x,D}function ve(x){return x&&x.__esModule?x:{default:x}}function xe(x,D){if(!D.has(x))throw new TypeError("attempted to get private field on non-instance");return D.get(x)}function ge(x,D,P){if(!D.has(x))throw new TypeError("attempted to set private field on non-instance");return D.set(x,P),P}},30070:(pe,N,S)=>{S.r(N),S.d(N,{__assign:()=>Z,__asyncDelegator:()=>z,__asyncGenerator:()=>te,__asyncValues:()=>W,__await:()=>H,__awaiter:()=>y,__classPrivateFieldGet:()=>xe,__classPrivateFieldSet:()=>ge,__createBinding:()=>O,__decorate:()=>_,__exportStar:()=>$,__extends:()=>q,__generator:()=>E,__importDefault:()=>ve,__importStar:()=>se,__makeTemplateObject:()=>J,__metadata:()=>g,__param:()=>p,__read:()=>b,__rest:()=>r,__spread:()=>V,__spreadArrays:()=>G,__values:()=>v});var M=function(x,D){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,I){P.__proto__=I}||function(P,I){for(var j in I)I.hasOwnProperty(j)&&(P[j]=I[j])})(x,D)};function q(x,D){function P(){this.constructor=x}M(x,D),x.prototype=null===D?Object.create(D):(P.prototype=D.prototype,new P)}var Z=function(){return Z=Object.assign||function(D){for(var P,I=1,j=arguments.length;I<j;I++)for(var R in P=arguments[I])Object.prototype.hasOwnProperty.call(P,R)&&(D[R]=P[R]);return D},Z.apply(this,arguments)};function r(x,D){var P={};for(var I in x)Object.prototype.hasOwnProperty.call(x,I)&&D.indexOf(I)<0&&(P[I]=x[I]);if(null!=x&&"function"==typeof Object.getOwnPropertySymbols){var j=0;for(I=Object.getOwnPropertySymbols(x);j<I.length;j++)D.indexOf(I[j])<0&&Object.prototype.propertyIsEnumerable.call(x,I[j])&&(P[I[j]]=x[I[j]])}return P}function _(x,D,P,I){var Q,j=arguments.length,R=j<3?D:null===I?I=Object.getOwnPropertyDescriptor(D,P):I;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)R=Reflect.decorate(x,D,P,I);else for(var ee=x.length-1;ee>=0;ee--)(Q=x[ee])&&(R=(j<3?Q(R):j>3?Q(D,P,R):Q(D,P))||R);return j>3&&R&&Object.defineProperty(D,P,R),R}function p(x,D){return function(P,I){D(P,I,x)}}function g(x,D){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(x,D)}function y(x,D,P,I){return new(P||(P=Promise))(function(R,Q){function ee(Fe){try{ne(I.next(Fe))}catch(rt){Q(rt)}}function Re(Fe){try{ne(I.throw(Fe))}catch(rt){Q(rt)}}function ne(Fe){Fe.done?R(Fe.value):function j(R){return R instanceof P?R:new P(function(Q){Q(R)})}(Fe.value).then(ee,Re)}ne((I=I.apply(x,D||[])).next())})}function E(x,D){var I,j,R,Q,P={label:0,sent:function(){if(1&R[0])throw R[1];return R[1]},trys:[],ops:[]};return Q={next:ee(0),throw:ee(1),return:ee(2)},"function"==typeof Symbol&&(Q[Symbol.iterator]=function(){return this}),Q;function ee(ne){return function(Fe){return function Re(ne){if(I)throw new TypeError("Generator is already executing.");for(;P;)try{if(I=1,j&&(R=2&ne[0]?j.return:ne[0]?j.throw||((R=j.return)&&R.call(j),0):j.next)&&!(R=R.call(j,ne[1])).done)return R;switch(j=0,R&&(ne=[2&ne[0],R.value]),ne[0]){case 0:case 1:R=ne;break;case 4:return P.label++,{value:ne[1],done:!1};case 5:P.label++,j=ne[1],ne=[0];continue;case 7:ne=P.ops.pop(),P.trys.pop();continue;default:if(!(R=(R=P.trys).length>0&&R[R.length-1])&&(6===ne[0]||2===ne[0])){P=0;continue}if(3===ne[0]&&(!R||ne[1]>R[0]&&ne[1]<R[3])){P.label=ne[1];break}if(6===ne[0]&&P.label<R[1]){P.label=R[1],R=ne;break}if(R&&P.label<R[2]){P.label=R[2],P.ops.push(ne);break}R[2]&&P.ops.pop(),P.trys.pop();continue}ne=D.call(x,P)}catch(Fe){ne=[6,Fe],j=0}finally{I=R=0}if(5&ne[0])throw ne[1];return{value:ne[0]?ne[1]:void 0,done:!0}}([ne,Fe])}}}function O(x,D,P,I){void 0===I&&(I=P),x[I]=D[P]}function $(x,D){for(var P in x)"default"!==P&&!D.hasOwnProperty(P)&&(D[P]=x[P])}function v(x){var D="function"==typeof Symbol&&Symbol.iterator,P=D&&x[D],I=0;if(P)return P.call(x);if(x&&"number"==typeof x.length)return{next:function(){return x&&I>=x.length&&(x=void 0),{value:x&&x[I++],done:!x}}};throw new TypeError(D?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(x,D){var P="function"==typeof Symbol&&x[Symbol.iterator];if(!P)return x;var j,Q,I=P.call(x),R=[];try{for(;(void 0===D||D-- >0)&&!(j=I.next()).done;)R.push(j.value)}catch(ee){Q={error:ee}}finally{try{j&&!j.done&&(P=I.return)&&P.call(I)}finally{if(Q)throw Q.error}}return R}function V(){for(var x=[],D=0;D<arguments.length;D++)x=x.concat(b(arguments[D]));return x}function G(){for(var x=0,D=0,P=arguments.length;D<P;D++)x+=arguments[D].length;var I=Array(x),j=0;for(D=0;D<P;D++)for(var R=arguments[D],Q=0,ee=R.length;Q<ee;Q++,j++)I[j]=R[Q];return I}function H(x){return this instanceof H?(this.v=x,this):new H(x)}function te(x,D,P){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var j,I=P.apply(x,D||[]),R=[];return j={},Q("next"),Q("throw"),Q("return"),j[Symbol.asyncIterator]=function(){return this},j;function Q(Te){I[Te]&&(j[Te]=function(tt){return new Promise(function(Qe,vt){R.push([Te,tt,Qe,vt])>1||ee(Te,tt)})})}function ee(Te,tt){try{!function Re(Te){Te.value instanceof H?Promise.resolve(Te.value.v).then(ne,Fe):rt(R[0][2],Te)}(I[Te](tt))}catch(Qe){rt(R[0][3],Qe)}}function ne(Te){ee("next",Te)}function Fe(Te){ee("throw",Te)}function rt(Te,tt){Te(tt),R.shift(),R.length&&ee(R[0][0],R[0][1])}}function z(x){var D,P;return D={},I("next"),I("throw",function(j){throw j}),I("return"),D[Symbol.iterator]=function(){return this},D;function I(j,R){D[j]=x[j]?function(Q){return(P=!P)?{value:H(x[j](Q)),done:"return"===j}:R?R(Q):Q}:R}}function W(x){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var P,D=x[Symbol.asyncIterator];return D?D.call(x):(x=v(x),P={},I("next"),I("throw"),I("return"),P[Symbol.asyncIterator]=function(){return this},P);function I(R){P[R]=x[R]&&function(Q){return new Promise(function(ee,Re){!function j(R,Q,ee,Re){Promise.resolve(Re).then(function(ne){R({value:ne,done:ee})},Q)}(ee,Re,(Q=x[R](Q)).done,Q.value)})}}}function J(x,D){return Object.defineProperty?Object.defineProperty(x,"raw",{value:D}):x.raw=D,x}function se(x){if(x&&x.__esModule)return x;var D={};if(null!=x)for(var P in x)Object.hasOwnProperty.call(x,P)&&(D[P]=x[P]);return D.default=x,D}function ve(x){return x&&x.__esModule?x:{default:x}}function xe(x,D){if(!D.has(x))throw new TypeError("attempted to get private field on non-instance");return D.get(x)}function ge(x,D,P){if(!D.has(x))throw new TypeError("attempted to set private field on non-instance");return D.set(x,P),P}},99055:(pe,N,S)=>{S.r(N),S.d(N,{__assign:()=>Z,__asyncDelegator:()=>z,__asyncGenerator:()=>te,__asyncValues:()=>W,__await:()=>H,__awaiter:()=>y,__classPrivateFieldGet:()=>xe,__classPrivateFieldSet:()=>ge,__createBinding:()=>O,__decorate:()=>_,__exportStar:()=>$,__extends:()=>q,__generator:()=>E,__importDefault:()=>ve,__importStar:()=>se,__makeTemplateObject:()=>J,__metadata:()=>g,__param:()=>p,__read:()=>b,__rest:()=>r,__spread:()=>V,__spreadArrays:()=>G,__values:()=>v});var M=function(x,D){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,I){P.__proto__=I}||function(P,I){for(var j in I)I.hasOwnProperty(j)&&(P[j]=I[j])})(x,D)};function q(x,D){function P(){this.constructor=x}M(x,D),x.prototype=null===D?Object.create(D):(P.prototype=D.prototype,new P)}var Z=function(){return Z=Object.assign||function(D){for(var P,I=1,j=arguments.length;I<j;I++)for(var R in P=arguments[I])Object.prototype.hasOwnProperty.call(P,R)&&(D[R]=P[R]);return D},Z.apply(this,arguments)};function r(x,D){var P={};for(var I in x)Object.prototype.hasOwnProperty.call(x,I)&&D.indexOf(I)<0&&(P[I]=x[I]);if(null!=x&&"function"==typeof Object.getOwnPropertySymbols){var j=0;for(I=Object.getOwnPropertySymbols(x);j<I.length;j++)D.indexOf(I[j])<0&&Object.prototype.propertyIsEnumerable.call(x,I[j])&&(P[I[j]]=x[I[j]])}return P}function _(x,D,P,I){var Q,j=arguments.length,R=j<3?D:null===I?I=Object.getOwnPropertyDescriptor(D,P):I;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)R=Reflect.decorate(x,D,P,I);else for(var ee=x.length-1;ee>=0;ee--)(Q=x[ee])&&(R=(j<3?Q(R):j>3?Q(D,P,R):Q(D,P))||R);return j>3&&R&&Object.defineProperty(D,P,R),R}function p(x,D){return function(P,I){D(P,I,x)}}function g(x,D){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(x,D)}function y(x,D,P,I){return new(P||(P=Promise))(function(R,Q){function ee(Fe){try{ne(I.next(Fe))}catch(rt){Q(rt)}}function Re(Fe){try{ne(I.throw(Fe))}catch(rt){Q(rt)}}function ne(Fe){Fe.done?R(Fe.value):function j(R){return R instanceof P?R:new P(function(Q){Q(R)})}(Fe.value).then(ee,Re)}ne((I=I.apply(x,D||[])).next())})}function E(x,D){var I,j,R,Q,P={label:0,sent:function(){if(1&R[0])throw R[1];return R[1]},trys:[],ops:[]};return Q={next:ee(0),throw:ee(1),return:ee(2)},"function"==typeof Symbol&&(Q[Symbol.iterator]=function(){return this}),Q;function ee(ne){return function(Fe){return function Re(ne){if(I)throw new TypeError("Generator is already executing.");for(;P;)try{if(I=1,j&&(R=2&ne[0]?j.return:ne[0]?j.throw||((R=j.return)&&R.call(j),0):j.next)&&!(R=R.call(j,ne[1])).done)return R;switch(j=0,R&&(ne=[2&ne[0],R.value]),ne[0]){case 0:case 1:R=ne;break;case 4:return P.label++,{value:ne[1],done:!1};case 5:P.label++,j=ne[1],ne=[0];continue;case 7:ne=P.ops.pop(),P.trys.pop();continue;default:if(!(R=(R=P.trys).length>0&&R[R.length-1])&&(6===ne[0]||2===ne[0])){P=0;continue}if(3===ne[0]&&(!R||ne[1]>R[0]&&ne[1]<R[3])){P.label=ne[1];break}if(6===ne[0]&&P.label<R[1]){P.label=R[1],R=ne;break}if(R&&P.label<R[2]){P.label=R[2],P.ops.push(ne);break}R[2]&&P.ops.pop(),P.trys.pop();continue}ne=D.call(x,P)}catch(Fe){ne=[6,Fe],j=0}finally{I=R=0}if(5&ne[0])throw ne[1];return{value:ne[0]?ne[1]:void 0,done:!0}}([ne,Fe])}}}function O(x,D,P,I){void 0===I&&(I=P),x[I]=D[P]}function $(x,D){for(var P in x)"default"!==P&&!D.hasOwnProperty(P)&&(D[P]=x[P])}function v(x){var D="function"==typeof Symbol&&Symbol.iterator,P=D&&x[D],I=0;if(P)return P.call(x);if(x&&"number"==typeof x.length)return{next:function(){return x&&I>=x.length&&(x=void 0),{value:x&&x[I++],done:!x}}};throw new TypeError(D?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(x,D){var P="function"==typeof Symbol&&x[Symbol.iterator];if(!P)return x;var j,Q,I=P.call(x),R=[];try{for(;(void 0===D||D-- >0)&&!(j=I.next()).done;)R.push(j.value)}catch(ee){Q={error:ee}}finally{try{j&&!j.done&&(P=I.return)&&P.call(I)}finally{if(Q)throw Q.error}}return R}function V(){for(var x=[],D=0;D<arguments.length;D++)x=x.concat(b(arguments[D]));return x}function G(){for(var x=0,D=0,P=arguments.length;D<P;D++)x+=arguments[D].length;var I=Array(x),j=0;for(D=0;D<P;D++)for(var R=arguments[D],Q=0,ee=R.length;Q<ee;Q++,j++)I[j]=R[Q];return I}function H(x){return this instanceof H?(this.v=x,this):new H(x)}function te(x,D,P){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var j,I=P.apply(x,D||[]),R=[];return j={},Q("next"),Q("throw"),Q("return"),j[Symbol.asyncIterator]=function(){return this},j;function Q(Te){I[Te]&&(j[Te]=function(tt){return new Promise(function(Qe,vt){R.push([Te,tt,Qe,vt])>1||ee(Te,tt)})})}function ee(Te,tt){try{!function Re(Te){Te.value instanceof H?Promise.resolve(Te.value.v).then(ne,Fe):rt(R[0][2],Te)}(I[Te](tt))}catch(Qe){rt(R[0][3],Qe)}}function ne(Te){ee("next",Te)}function Fe(Te){ee("throw",Te)}function rt(Te,tt){Te(tt),R.shift(),R.length&&ee(R[0][0],R[0][1])}}function z(x){var D,P;return D={},I("next"),I("throw",function(j){throw j}),I("return"),D[Symbol.iterator]=function(){return this},D;function I(j,R){D[j]=x[j]?function(Q){return(P=!P)?{value:H(x[j](Q)),done:"return"===j}:R?R(Q):Q}:R}}function W(x){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var P,D=x[Symbol.asyncIterator];return D?D.call(x):(x=v(x),P={},I("next"),I("throw"),I("return"),P[Symbol.asyncIterator]=function(){return this},P);function I(R){P[R]=x[R]&&function(Q){return new Promise(function(ee,Re){!function j(R,Q,ee,Re){Promise.resolve(Re).then(function(ne){R({value:ne,done:ee})},Q)}(ee,Re,(Q=x[R](Q)).done,Q.value)})}}}function J(x,D){return Object.defineProperty?Object.defineProperty(x,"raw",{value:D}):x.raw=D,x}function se(x){if(x&&x.__esModule)return x;var D={};if(null!=x)for(var P in x)Object.hasOwnProperty.call(x,P)&&(D[P]=x[P]);return D.default=x,D}function ve(x){return x&&x.__esModule?x:{default:x}}function xe(x,D){if(!D.has(x))throw new TypeError("attempted to get private field on non-instance");return D.get(x)}function ge(x,D,P){if(!D.has(x))throw new TypeError("attempted to set private field on non-instance");return D.set(x,P),P}},37994:(pe,N,S)=>{S.r(N),S.d(N,{__assign:()=>Z,__asyncDelegator:()=>z,__asyncGenerator:()=>te,__asyncValues:()=>W,__await:()=>H,__awaiter:()=>y,__classPrivateFieldGet:()=>xe,__classPrivateFieldSet:()=>ge,__createBinding:()=>O,__decorate:()=>_,__exportStar:()=>$,__extends:()=>q,__generator:()=>E,__importDefault:()=>ve,__importStar:()=>se,__makeTemplateObject:()=>J,__metadata:()=>g,__param:()=>p,__read:()=>b,__rest:()=>r,__spread:()=>V,__spreadArrays:()=>G,__values:()=>v});var M=function(x,D){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,I){P.__proto__=I}||function(P,I){for(var j in I)I.hasOwnProperty(j)&&(P[j]=I[j])})(x,D)};function q(x,D){function P(){this.constructor=x}M(x,D),x.prototype=null===D?Object.create(D):(P.prototype=D.prototype,new P)}var Z=function(){return Z=Object.assign||function(D){for(var P,I=1,j=arguments.length;I<j;I++)for(var R in P=arguments[I])Object.prototype.hasOwnProperty.call(P,R)&&(D[R]=P[R]);return D},Z.apply(this,arguments)};function r(x,D){var P={};for(var I in x)Object.prototype.hasOwnProperty.call(x,I)&&D.indexOf(I)<0&&(P[I]=x[I]);if(null!=x&&"function"==typeof Object.getOwnPropertySymbols){var j=0;for(I=Object.getOwnPropertySymbols(x);j<I.length;j++)D.indexOf(I[j])<0&&Object.prototype.propertyIsEnumerable.call(x,I[j])&&(P[I[j]]=x[I[j]])}return P}function _(x,D,P,I){var Q,j=arguments.length,R=j<3?D:null===I?I=Object.getOwnPropertyDescriptor(D,P):I;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)R=Reflect.decorate(x,D,P,I);else for(var ee=x.length-1;ee>=0;ee--)(Q=x[ee])&&(R=(j<3?Q(R):j>3?Q(D,P,R):Q(D,P))||R);return j>3&&R&&Object.defineProperty(D,P,R),R}function p(x,D){return function(P,I){D(P,I,x)}}function g(x,D){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(x,D)}function y(x,D,P,I){return new(P||(P=Promise))(function(R,Q){function ee(Fe){try{ne(I.next(Fe))}catch(rt){Q(rt)}}function Re(Fe){try{ne(I.throw(Fe))}catch(rt){Q(rt)}}function ne(Fe){Fe.done?R(Fe.value):function j(R){return R instanceof P?R:new P(function(Q){Q(R)})}(Fe.value).then(ee,Re)}ne((I=I.apply(x,D||[])).next())})}function E(x,D){var I,j,R,Q,P={label:0,sent:function(){if(1&R[0])throw R[1];return R[1]},trys:[],ops:[]};return Q={next:ee(0),throw:ee(1),return:ee(2)},"function"==typeof Symbol&&(Q[Symbol.iterator]=function(){return this}),Q;function ee(ne){return function(Fe){return function Re(ne){if(I)throw new TypeError("Generator is already executing.");for(;P;)try{if(I=1,j&&(R=2&ne[0]?j.return:ne[0]?j.throw||((R=j.return)&&R.call(j),0):j.next)&&!(R=R.call(j,ne[1])).done)return R;switch(j=0,R&&(ne=[2&ne[0],R.value]),ne[0]){case 0:case 1:R=ne;break;case 4:return P.label++,{value:ne[1],done:!1};case 5:P.label++,j=ne[1],ne=[0];continue;case 7:ne=P.ops.pop(),P.trys.pop();continue;default:if(!(R=(R=P.trys).length>0&&R[R.length-1])&&(6===ne[0]||2===ne[0])){P=0;continue}if(3===ne[0]&&(!R||ne[1]>R[0]&&ne[1]<R[3])){P.label=ne[1];break}if(6===ne[0]&&P.label<R[1]){P.label=R[1],R=ne;break}if(R&&P.label<R[2]){P.label=R[2],P.ops.push(ne);break}R[2]&&P.ops.pop(),P.trys.pop();continue}ne=D.call(x,P)}catch(Fe){ne=[6,Fe],j=0}finally{I=R=0}if(5&ne[0])throw ne[1];return{value:ne[0]?ne[1]:void 0,done:!0}}([ne,Fe])}}}function O(x,D,P,I){void 0===I&&(I=P),x[I]=D[P]}function $(x,D){for(var P in x)"default"!==P&&!D.hasOwnProperty(P)&&(D[P]=x[P])}function v(x){var D="function"==typeof Symbol&&Symbol.iterator,P=D&&x[D],I=0;if(P)return P.call(x);if(x&&"number"==typeof x.length)return{next:function(){return x&&I>=x.length&&(x=void 0),{value:x&&x[I++],done:!x}}};throw new TypeError(D?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(x,D){var P="function"==typeof Symbol&&x[Symbol.iterator];if(!P)return x;var j,Q,I=P.call(x),R=[];try{for(;(void 0===D||D-- >0)&&!(j=I.next()).done;)R.push(j.value)}catch(ee){Q={error:ee}}finally{try{j&&!j.done&&(P=I.return)&&P.call(I)}finally{if(Q)throw Q.error}}return R}function V(){for(var x=[],D=0;D<arguments.length;D++)x=x.concat(b(arguments[D]));return x}function G(){for(var x=0,D=0,P=arguments.length;D<P;D++)x+=arguments[D].length;var I=Array(x),j=0;for(D=0;D<P;D++)for(var R=arguments[D],Q=0,ee=R.length;Q<ee;Q++,j++)I[j]=R[Q];return I}function H(x){return this instanceof H?(this.v=x,this):new H(x)}function te(x,D,P){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var j,I=P.apply(x,D||[]),R=[];return j={},Q("next"),Q("throw"),Q("return"),j[Symbol.asyncIterator]=function(){return this},j;function Q(Te){I[Te]&&(j[Te]=function(tt){return new Promise(function(Qe,vt){R.push([Te,tt,Qe,vt])>1||ee(Te,tt)})})}function ee(Te,tt){try{!function Re(Te){Te.value instanceof H?Promise.resolve(Te.value.v).then(ne,Fe):rt(R[0][2],Te)}(I[Te](tt))}catch(Qe){rt(R[0][3],Qe)}}function ne(Te){ee("next",Te)}function Fe(Te){ee("throw",Te)}function rt(Te,tt){Te(tt),R.shift(),R.length&&ee(R[0][0],R[0][1])}}function z(x){var D,P;return D={},I("next"),I("throw",function(j){throw j}),I("return"),D[Symbol.iterator]=function(){return this},D;function I(j,R){D[j]=x[j]?function(Q){return(P=!P)?{value:H(x[j](Q)),done:"return"===j}:R?R(Q):Q}:R}}function W(x){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var P,D=x[Symbol.asyncIterator];return D?D.call(x):(x=v(x),P={},I("next"),I("throw"),I("return"),P[Symbol.asyncIterator]=function(){return this},P);function I(R){P[R]=x[R]&&function(Q){return new Promise(function(ee,Re){!function j(R,Q,ee,Re){Promise.resolve(Re).then(function(ne){R({value:ne,done:ee})},Q)}(ee,Re,(Q=x[R](Q)).done,Q.value)})}}}function J(x,D){return Object.defineProperty?Object.defineProperty(x,"raw",{value:D}):x.raw=D,x}function se(x){if(x&&x.__esModule)return x;var D={};if(null!=x)for(var P in x)Object.hasOwnProperty.call(x,P)&&(D[P]=x[P]);return D.default=x,D}function ve(x){return x&&x.__esModule?x:{default:x}}function xe(x,D){if(!D.has(x))throw new TypeError("attempted to get private field on non-instance");return D.get(x)}function ge(x,D,P){if(!D.has(x))throw new TypeError("attempted to set private field on non-instance");return D.set(x,P),P}},68952:(pe,N,S)=>{S.r(N),S.d(N,{__assign:()=>Z,__asyncDelegator:()=>z,__asyncGenerator:()=>te,__asyncValues:()=>W,__await:()=>H,__awaiter:()=>y,__classPrivateFieldGet:()=>xe,__classPrivateFieldSet:()=>ge,__createBinding:()=>O,__decorate:()=>_,__exportStar:()=>$,__extends:()=>q,__generator:()=>E,__importDefault:()=>ve,__importStar:()=>se,__makeTemplateObject:()=>J,__metadata:()=>g,__param:()=>p,__read:()=>b,__rest:()=>r,__spread:()=>V,__spreadArrays:()=>G,__values:()=>v});var M=function(x,D){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,I){P.__proto__=I}||function(P,I){for(var j in I)I.hasOwnProperty(j)&&(P[j]=I[j])})(x,D)};function q(x,D){function P(){this.constructor=x}M(x,D),x.prototype=null===D?Object.create(D):(P.prototype=D.prototype,new P)}var Z=function(){return Z=Object.assign||function(D){for(var P,I=1,j=arguments.length;I<j;I++)for(var R in P=arguments[I])Object.prototype.hasOwnProperty.call(P,R)&&(D[R]=P[R]);return D},Z.apply(this,arguments)};function r(x,D){var P={};for(var I in x)Object.prototype.hasOwnProperty.call(x,I)&&D.indexOf(I)<0&&(P[I]=x[I]);if(null!=x&&"function"==typeof Object.getOwnPropertySymbols){var j=0;for(I=Object.getOwnPropertySymbols(x);j<I.length;j++)D.indexOf(I[j])<0&&Object.prototype.propertyIsEnumerable.call(x,I[j])&&(P[I[j]]=x[I[j]])}return P}function _(x,D,P,I){var Q,j=arguments.length,R=j<3?D:null===I?I=Object.getOwnPropertyDescriptor(D,P):I;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)R=Reflect.decorate(x,D,P,I);else for(var ee=x.length-1;ee>=0;ee--)(Q=x[ee])&&(R=(j<3?Q(R):j>3?Q(D,P,R):Q(D,P))||R);return j>3&&R&&Object.defineProperty(D,P,R),R}function p(x,D){return function(P,I){D(P,I,x)}}function g(x,D){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(x,D)}function y(x,D,P,I){return new(P||(P=Promise))(function(R,Q){function ee(Fe){try{ne(I.next(Fe))}catch(rt){Q(rt)}}function Re(Fe){try{ne(I.throw(Fe))}catch(rt){Q(rt)}}function ne(Fe){Fe.done?R(Fe.value):function j(R){return R instanceof P?R:new P(function(Q){Q(R)})}(Fe.value).then(ee,Re)}ne((I=I.apply(x,D||[])).next())})}function E(x,D){var I,j,R,Q,P={label:0,sent:function(){if(1&R[0])throw R[1];return R[1]},trys:[],ops:[]};return Q={next:ee(0),throw:ee(1),return:ee(2)},"function"==typeof Symbol&&(Q[Symbol.iterator]=function(){return this}),Q;function ee(ne){return function(Fe){return function Re(ne){if(I)throw new TypeError("Generator is already executing.");for(;P;)try{if(I=1,j&&(R=2&ne[0]?j.return:ne[0]?j.throw||((R=j.return)&&R.call(j),0):j.next)&&!(R=R.call(j,ne[1])).done)return R;switch(j=0,R&&(ne=[2&ne[0],R.value]),ne[0]){case 0:case 1:R=ne;break;case 4:return P.label++,{value:ne[1],done:!1};case 5:P.label++,j=ne[1],ne=[0];continue;case 7:ne=P.ops.pop(),P.trys.pop();continue;default:if(!(R=(R=P.trys).length>0&&R[R.length-1])&&(6===ne[0]||2===ne[0])){P=0;continue}if(3===ne[0]&&(!R||ne[1]>R[0]&&ne[1]<R[3])){P.label=ne[1];break}if(6===ne[0]&&P.label<R[1]){P.label=R[1],R=ne;break}if(R&&P.label<R[2]){P.label=R[2],P.ops.push(ne);break}R[2]&&P.ops.pop(),P.trys.pop();continue}ne=D.call(x,P)}catch(Fe){ne=[6,Fe],j=0}finally{I=R=0}if(5&ne[0])throw ne[1];return{value:ne[0]?ne[1]:void 0,done:!0}}([ne,Fe])}}}function O(x,D,P,I){void 0===I&&(I=P),x[I]=D[P]}function $(x,D){for(var P in x)"default"!==P&&!D.hasOwnProperty(P)&&(D[P]=x[P])}function v(x){var D="function"==typeof Symbol&&Symbol.iterator,P=D&&x[D],I=0;if(P)return P.call(x);if(x&&"number"==typeof x.length)return{next:function(){return x&&I>=x.length&&(x=void 0),{value:x&&x[I++],done:!x}}};throw new TypeError(D?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(x,D){var P="function"==typeof Symbol&&x[Symbol.iterator];if(!P)return x;var j,Q,I=P.call(x),R=[];try{for(;(void 0===D||D-- >0)&&!(j=I.next()).done;)R.push(j.value)}catch(ee){Q={error:ee}}finally{try{j&&!j.done&&(P=I.return)&&P.call(I)}finally{if(Q)throw Q.error}}return R}function V(){for(var x=[],D=0;D<arguments.length;D++)x=x.concat(b(arguments[D]));return x}function G(){for(var x=0,D=0,P=arguments.length;D<P;D++)x+=arguments[D].length;var I=Array(x),j=0;for(D=0;D<P;D++)for(var R=arguments[D],Q=0,ee=R.length;Q<ee;Q++,j++)I[j]=R[Q];return I}function H(x){return this instanceof H?(this.v=x,this):new H(x)}function te(x,D,P){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var j,I=P.apply(x,D||[]),R=[];return j={},Q("next"),Q("throw"),Q("return"),j[Symbol.asyncIterator]=function(){return this},j;function Q(Te){I[Te]&&(j[Te]=function(tt){return new Promise(function(Qe,vt){R.push([Te,tt,Qe,vt])>1||ee(Te,tt)})})}function ee(Te,tt){try{!function Re(Te){Te.value instanceof H?Promise.resolve(Te.value.v).then(ne,Fe):rt(R[0][2],Te)}(I[Te](tt))}catch(Qe){rt(R[0][3],Qe)}}function ne(Te){ee("next",Te)}function Fe(Te){ee("throw",Te)}function rt(Te,tt){Te(tt),R.shift(),R.length&&ee(R[0][0],R[0][1])}}function z(x){var D,P;return D={},I("next"),I("throw",function(j){throw j}),I("return"),D[Symbol.iterator]=function(){return this},D;function I(j,R){D[j]=x[j]?function(Q){return(P=!P)?{value:H(x[j](Q)),done:"return"===j}:R?R(Q):Q}:R}}function W(x){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var P,D=x[Symbol.asyncIterator];return D?D.call(x):(x=v(x),P={},I("next"),I("throw"),I("return"),P[Symbol.asyncIterator]=function(){return this},P);function I(R){P[R]=x[R]&&function(Q){return new Promise(function(ee,Re){!function j(R,Q,ee,Re){Promise.resolve(Re).then(function(ne){R({value:ne,done:ee})},Q)}(ee,Re,(Q=x[R](Q)).done,Q.value)})}}}function J(x,D){return Object.defineProperty?Object.defineProperty(x,"raw",{value:D}):x.raw=D,x}function se(x){if(x&&x.__esModule)return x;var D={};if(null!=x)for(var P in x)Object.hasOwnProperty.call(x,P)&&(D[P]=x[P]);return D.default=x,D}function ve(x){return x&&x.__esModule?x:{default:x}}function xe(x,D){if(!D.has(x))throw new TypeError("attempted to get private field on non-instance");return D.get(x)}function ge(x,D,P){if(!D.has(x))throw new TypeError("attempted to set private field on non-instance");return D.set(x,P),P}},1707:(pe,N,S)=>{S.r(N),S.d(N,{__assign:()=>Z,__asyncDelegator:()=>z,__asyncGenerator:()=>te,__asyncValues:()=>W,__await:()=>H,__awaiter:()=>y,__classPrivateFieldGet:()=>xe,__classPrivateFieldSet:()=>ge,__createBinding:()=>O,__decorate:()=>_,__exportStar:()=>$,__extends:()=>q,__generator:()=>E,__importDefault:()=>ve,__importStar:()=>se,__makeTemplateObject:()=>J,__metadata:()=>g,__param:()=>p,__read:()=>b,__rest:()=>r,__spread:()=>V,__spreadArrays:()=>G,__values:()=>v});var M=function(x,D){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,I){P.__proto__=I}||function(P,I){for(var j in I)I.hasOwnProperty(j)&&(P[j]=I[j])})(x,D)};function q(x,D){function P(){this.constructor=x}M(x,D),x.prototype=null===D?Object.create(D):(P.prototype=D.prototype,new P)}var Z=function(){return Z=Object.assign||function(D){for(var P,I=1,j=arguments.length;I<j;I++)for(var R in P=arguments[I])Object.prototype.hasOwnProperty.call(P,R)&&(D[R]=P[R]);return D},Z.apply(this,arguments)};function r(x,D){var P={};for(var I in x)Object.prototype.hasOwnProperty.call(x,I)&&D.indexOf(I)<0&&(P[I]=x[I]);if(null!=x&&"function"==typeof Object.getOwnPropertySymbols){var j=0;for(I=Object.getOwnPropertySymbols(x);j<I.length;j++)D.indexOf(I[j])<0&&Object.prototype.propertyIsEnumerable.call(x,I[j])&&(P[I[j]]=x[I[j]])}return P}function _(x,D,P,I){var Q,j=arguments.length,R=j<3?D:null===I?I=Object.getOwnPropertyDescriptor(D,P):I;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)R=Reflect.decorate(x,D,P,I);else for(var ee=x.length-1;ee>=0;ee--)(Q=x[ee])&&(R=(j<3?Q(R):j>3?Q(D,P,R):Q(D,P))||R);return j>3&&R&&Object.defineProperty(D,P,R),R}function p(x,D){return function(P,I){D(P,I,x)}}function g(x,D){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(x,D)}function y(x,D,P,I){return new(P||(P=Promise))(function(R,Q){function ee(Fe){try{ne(I.next(Fe))}catch(rt){Q(rt)}}function Re(Fe){try{ne(I.throw(Fe))}catch(rt){Q(rt)}}function ne(Fe){Fe.done?R(Fe.value):function j(R){return R instanceof P?R:new P(function(Q){Q(R)})}(Fe.value).then(ee,Re)}ne((I=I.apply(x,D||[])).next())})}function E(x,D){var I,j,R,Q,P={label:0,sent:function(){if(1&R[0])throw R[1];return R[1]},trys:[],ops:[]};return Q={next:ee(0),throw:ee(1),return:ee(2)},"function"==typeof Symbol&&(Q[Symbol.iterator]=function(){return this}),Q;function ee(ne){return function(Fe){return function Re(ne){if(I)throw new TypeError("Generator is already executing.");for(;P;)try{if(I=1,j&&(R=2&ne[0]?j.return:ne[0]?j.throw||((R=j.return)&&R.call(j),0):j.next)&&!(R=R.call(j,ne[1])).done)return R;switch(j=0,R&&(ne=[2&ne[0],R.value]),ne[0]){case 0:case 1:R=ne;break;case 4:return P.label++,{value:ne[1],done:!1};case 5:P.label++,j=ne[1],ne=[0];continue;case 7:ne=P.ops.pop(),P.trys.pop();continue;default:if(!(R=(R=P.trys).length>0&&R[R.length-1])&&(6===ne[0]||2===ne[0])){P=0;continue}if(3===ne[0]&&(!R||ne[1]>R[0]&&ne[1]<R[3])){P.label=ne[1];break}if(6===ne[0]&&P.label<R[1]){P.label=R[1],R=ne;break}if(R&&P.label<R[2]){P.label=R[2],P.ops.push(ne);break}R[2]&&P.ops.pop(),P.trys.pop();continue}ne=D.call(x,P)}catch(Fe){ne=[6,Fe],j=0}finally{I=R=0}if(5&ne[0])throw ne[1];return{value:ne[0]?ne[1]:void 0,done:!0}}([ne,Fe])}}}function O(x,D,P,I){void 0===I&&(I=P),x[I]=D[P]}function $(x,D){for(var P in x)"default"!==P&&!D.hasOwnProperty(P)&&(D[P]=x[P])}function v(x){var D="function"==typeof Symbol&&Symbol.iterator,P=D&&x[D],I=0;if(P)return P.call(x);if(x&&"number"==typeof x.length)return{next:function(){return x&&I>=x.length&&(x=void 0),{value:x&&x[I++],done:!x}}};throw new TypeError(D?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(x,D){var P="function"==typeof Symbol&&x[Symbol.iterator];if(!P)return x;var j,Q,I=P.call(x),R=[];try{for(;(void 0===D||D-- >0)&&!(j=I.next()).done;)R.push(j.value)}catch(ee){Q={error:ee}}finally{try{j&&!j.done&&(P=I.return)&&P.call(I)}finally{if(Q)throw Q.error}}return R}function V(){for(var x=[],D=0;D<arguments.length;D++)x=x.concat(b(arguments[D]));return x}function G(){for(var x=0,D=0,P=arguments.length;D<P;D++)x+=arguments[D].length;var I=Array(x),j=0;for(D=0;D<P;D++)for(var R=arguments[D],Q=0,ee=R.length;Q<ee;Q++,j++)I[j]=R[Q];return I}function H(x){return this instanceof H?(this.v=x,this):new H(x)}function te(x,D,P){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var j,I=P.apply(x,D||[]),R=[];return j={},Q("next"),Q("throw"),Q("return"),j[Symbol.asyncIterator]=function(){return this},j;function Q(Te){I[Te]&&(j[Te]=function(tt){return new Promise(function(Qe,vt){R.push([Te,tt,Qe,vt])>1||ee(Te,tt)})})}function ee(Te,tt){try{!function Re(Te){Te.value instanceof H?Promise.resolve(Te.value.v).then(ne,Fe):rt(R[0][2],Te)}(I[Te](tt))}catch(Qe){rt(R[0][3],Qe)}}function ne(Te){ee("next",Te)}function Fe(Te){ee("throw",Te)}function rt(Te,tt){Te(tt),R.shift(),R.length&&ee(R[0][0],R[0][1])}}function z(x){var D,P;return D={},I("next"),I("throw",function(j){throw j}),I("return"),D[Symbol.iterator]=function(){return this},D;function I(j,R){D[j]=x[j]?function(Q){return(P=!P)?{value:H(x[j](Q)),done:"return"===j}:R?R(Q):Q}:R}}function W(x){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var P,D=x[Symbol.asyncIterator];return D?D.call(x):(x=v(x),P={},I("next"),I("throw"),I("return"),P[Symbol.asyncIterator]=function(){return this},P);function I(R){P[R]=x[R]&&function(Q){return new Promise(function(ee,Re){!function j(R,Q,ee,Re){Promise.resolve(Re).then(function(ne){R({value:ne,done:ee})},Q)}(ee,Re,(Q=x[R](Q)).done,Q.value)})}}}function J(x,D){return Object.defineProperty?Object.defineProperty(x,"raw",{value:D}):x.raw=D,x}function se(x){if(x&&x.__esModule)return x;var D={};if(null!=x)for(var P in x)Object.hasOwnProperty.call(x,P)&&(D[P]=x[P]);return D.default=x,D}function ve(x){return x&&x.__esModule?x:{default:x}}function xe(x,D){if(!D.has(x))throw new TypeError("attempted to get private field on non-instance");return D.get(x)}function ge(x,D,P){if(!D.has(x))throw new TypeError("attempted to set private field on non-instance");return D.set(x,P),P}},59106:(pe,N,S)=>{S.r(N),S.d(N,{__assign:()=>Z,__asyncDelegator:()=>z,__asyncGenerator:()=>te,__asyncValues:()=>W,__await:()=>H,__awaiter:()=>y,__classPrivateFieldGet:()=>xe,__classPrivateFieldSet:()=>ge,__createBinding:()=>O,__decorate:()=>_,__exportStar:()=>$,__extends:()=>q,__generator:()=>E,__importDefault:()=>ve,__importStar:()=>se,__makeTemplateObject:()=>J,__metadata:()=>g,__param:()=>p,__read:()=>b,__rest:()=>r,__spread:()=>V,__spreadArrays:()=>G,__values:()=>v});var M=function(x,D){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,I){P.__proto__=I}||function(P,I){for(var j in I)I.hasOwnProperty(j)&&(P[j]=I[j])})(x,D)};function q(x,D){function P(){this.constructor=x}M(x,D),x.prototype=null===D?Object.create(D):(P.prototype=D.prototype,new P)}var Z=function(){return Z=Object.assign||function(D){for(var P,I=1,j=arguments.length;I<j;I++)for(var R in P=arguments[I])Object.prototype.hasOwnProperty.call(P,R)&&(D[R]=P[R]);return D},Z.apply(this,arguments)};function r(x,D){var P={};for(var I in x)Object.prototype.hasOwnProperty.call(x,I)&&D.indexOf(I)<0&&(P[I]=x[I]);if(null!=x&&"function"==typeof Object.getOwnPropertySymbols){var j=0;for(I=Object.getOwnPropertySymbols(x);j<I.length;j++)D.indexOf(I[j])<0&&Object.prototype.propertyIsEnumerable.call(x,I[j])&&(P[I[j]]=x[I[j]])}return P}function _(x,D,P,I){var Q,j=arguments.length,R=j<3?D:null===I?I=Object.getOwnPropertyDescriptor(D,P):I;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)R=Reflect.decorate(x,D,P,I);else for(var ee=x.length-1;ee>=0;ee--)(Q=x[ee])&&(R=(j<3?Q(R):j>3?Q(D,P,R):Q(D,P))||R);return j>3&&R&&Object.defineProperty(D,P,R),R}function p(x,D){return function(P,I){D(P,I,x)}}function g(x,D){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(x,D)}function y(x,D,P,I){return new(P||(P=Promise))(function(R,Q){function ee(Fe){try{ne(I.next(Fe))}catch(rt){Q(rt)}}function Re(Fe){try{ne(I.throw(Fe))}catch(rt){Q(rt)}}function ne(Fe){Fe.done?R(Fe.value):function j(R){return R instanceof P?R:new P(function(Q){Q(R)})}(Fe.value).then(ee,Re)}ne((I=I.apply(x,D||[])).next())})}function E(x,D){var I,j,R,Q,P={label:0,sent:function(){if(1&R[0])throw R[1];return R[1]},trys:[],ops:[]};return Q={next:ee(0),throw:ee(1),return:ee(2)},"function"==typeof Symbol&&(Q[Symbol.iterator]=function(){return this}),Q;function ee(ne){return function(Fe){return function Re(ne){if(I)throw new TypeError("Generator is already executing.");for(;P;)try{if(I=1,j&&(R=2&ne[0]?j.return:ne[0]?j.throw||((R=j.return)&&R.call(j),0):j.next)&&!(R=R.call(j,ne[1])).done)return R;switch(j=0,R&&(ne=[2&ne[0],R.value]),ne[0]){case 0:case 1:R=ne;break;case 4:return P.label++,{value:ne[1],done:!1};case 5:P.label++,j=ne[1],ne=[0];continue;case 7:ne=P.ops.pop(),P.trys.pop();continue;default:if(!(R=(R=P.trys).length>0&&R[R.length-1])&&(6===ne[0]||2===ne[0])){P=0;continue}if(3===ne[0]&&(!R||ne[1]>R[0]&&ne[1]<R[3])){P.label=ne[1];break}if(6===ne[0]&&P.label<R[1]){P.label=R[1],R=ne;break}if(R&&P.label<R[2]){P.label=R[2],P.ops.push(ne);break}R[2]&&P.ops.pop(),P.trys.pop();continue}ne=D.call(x,P)}catch(Fe){ne=[6,Fe],j=0}finally{I=R=0}if(5&ne[0])throw ne[1];return{value:ne[0]?ne[1]:void 0,done:!0}}([ne,Fe])}}}function O(x,D,P,I){void 0===I&&(I=P),x[I]=D[P]}function $(x,D){for(var P in x)"default"!==P&&!D.hasOwnProperty(P)&&(D[P]=x[P])}function v(x){var D="function"==typeof Symbol&&Symbol.iterator,P=D&&x[D],I=0;if(P)return P.call(x);if(x&&"number"==typeof x.length)return{next:function(){return x&&I>=x.length&&(x=void 0),{value:x&&x[I++],done:!x}}};throw new TypeError(D?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(x,D){var P="function"==typeof Symbol&&x[Symbol.iterator];if(!P)return x;var j,Q,I=P.call(x),R=[];try{for(;(void 0===D||D-- >0)&&!(j=I.next()).done;)R.push(j.value)}catch(ee){Q={error:ee}}finally{try{j&&!j.done&&(P=I.return)&&P.call(I)}finally{if(Q)throw Q.error}}return R}function V(){for(var x=[],D=0;D<arguments.length;D++)x=x.concat(b(arguments[D]));return x}function G(){for(var x=0,D=0,P=arguments.length;D<P;D++)x+=arguments[D].length;var I=Array(x),j=0;for(D=0;D<P;D++)for(var R=arguments[D],Q=0,ee=R.length;Q<ee;Q++,j++)I[j]=R[Q];return I}function H(x){return this instanceof H?(this.v=x,this):new H(x)}function te(x,D,P){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var j,I=P.apply(x,D||[]),R=[];return j={},Q("next"),Q("throw"),Q("return"),j[Symbol.asyncIterator]=function(){return this},j;function Q(Te){I[Te]&&(j[Te]=function(tt){return new Promise(function(Qe,vt){R.push([Te,tt,Qe,vt])>1||ee(Te,tt)})})}function ee(Te,tt){try{!function Re(Te){Te.value instanceof H?Promise.resolve(Te.value.v).then(ne,Fe):rt(R[0][2],Te)}(I[Te](tt))}catch(Qe){rt(R[0][3],Qe)}}function ne(Te){ee("next",Te)}function Fe(Te){ee("throw",Te)}function rt(Te,tt){Te(tt),R.shift(),R.length&&ee(R[0][0],R[0][1])}}function z(x){var D,P;return D={},I("next"),I("throw",function(j){throw j}),I("return"),D[Symbol.iterator]=function(){return this},D;function I(j,R){D[j]=x[j]?function(Q){return(P=!P)?{value:H(x[j](Q)),done:"return"===j}:R?R(Q):Q}:R}}function W(x){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var P,D=x[Symbol.asyncIterator];return D?D.call(x):(x=v(x),P={},I("next"),I("throw"),I("return"),P[Symbol.asyncIterator]=function(){return this},P);function I(R){P[R]=x[R]&&function(Q){return new Promise(function(ee,Re){!function j(R,Q,ee,Re){Promise.resolve(Re).then(function(ne){R({value:ne,done:ee})},Q)}(ee,Re,(Q=x[R](Q)).done,Q.value)})}}}function J(x,D){return Object.defineProperty?Object.defineProperty(x,"raw",{value:D}):x.raw=D,x}function se(x){if(x&&x.__esModule)return x;var D={};if(null!=x)for(var P in x)Object.hasOwnProperty.call(x,P)&&(D[P]=x[P]);return D.default=x,D}function ve(x){return x&&x.__esModule?x:{default:x}}function xe(x,D){if(!D.has(x))throw new TypeError("attempted to get private field on non-instance");return D.get(x)}function ge(x,D,P){if(!D.has(x))throw new TypeError("attempted to set private field on non-instance");return D.set(x,P),P}},55298:(pe,N,S)=>{S.r(N),S.d(N,{__assign:()=>Z,__asyncDelegator:()=>z,__asyncGenerator:()=>te,__asyncValues:()=>W,__await:()=>H,__awaiter:()=>y,__classPrivateFieldGet:()=>xe,__classPrivateFieldSet:()=>ge,__createBinding:()=>O,__decorate:()=>_,__exportStar:()=>$,__extends:()=>q,__generator:()=>E,__importDefault:()=>ve,__importStar:()=>se,__makeTemplateObject:()=>J,__metadata:()=>g,__param:()=>p,__read:()=>b,__rest:()=>r,__spread:()=>V,__spreadArrays:()=>G,__values:()=>v});var M=function(x,D){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,I){P.__proto__=I}||function(P,I){for(var j in I)I.hasOwnProperty(j)&&(P[j]=I[j])})(x,D)};function q(x,D){function P(){this.constructor=x}M(x,D),x.prototype=null===D?Object.create(D):(P.prototype=D.prototype,new P)}var Z=function(){return Z=Object.assign||function(D){for(var P,I=1,j=arguments.length;I<j;I++)for(var R in P=arguments[I])Object.prototype.hasOwnProperty.call(P,R)&&(D[R]=P[R]);return D},Z.apply(this,arguments)};function r(x,D){var P={};for(var I in x)Object.prototype.hasOwnProperty.call(x,I)&&D.indexOf(I)<0&&(P[I]=x[I]);if(null!=x&&"function"==typeof Object.getOwnPropertySymbols){var j=0;for(I=Object.getOwnPropertySymbols(x);j<I.length;j++)D.indexOf(I[j])<0&&Object.prototype.propertyIsEnumerable.call(x,I[j])&&(P[I[j]]=x[I[j]])}return P}function _(x,D,P,I){var Q,j=arguments.length,R=j<3?D:null===I?I=Object.getOwnPropertyDescriptor(D,P):I;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)R=Reflect.decorate(x,D,P,I);else for(var ee=x.length-1;ee>=0;ee--)(Q=x[ee])&&(R=(j<3?Q(R):j>3?Q(D,P,R):Q(D,P))||R);return j>3&&R&&Object.defineProperty(D,P,R),R}function p(x,D){return function(P,I){D(P,I,x)}}function g(x,D){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(x,D)}function y(x,D,P,I){return new(P||(P=Promise))(function(R,Q){function ee(Fe){try{ne(I.next(Fe))}catch(rt){Q(rt)}}function Re(Fe){try{ne(I.throw(Fe))}catch(rt){Q(rt)}}function ne(Fe){Fe.done?R(Fe.value):function j(R){return R instanceof P?R:new P(function(Q){Q(R)})}(Fe.value).then(ee,Re)}ne((I=I.apply(x,D||[])).next())})}function E(x,D){var I,j,R,Q,P={label:0,sent:function(){if(1&R[0])throw R[1];return R[1]},trys:[],ops:[]};return Q={next:ee(0),throw:ee(1),return:ee(2)},"function"==typeof Symbol&&(Q[Symbol.iterator]=function(){return this}),Q;function ee(ne){return function(Fe){return function Re(ne){if(I)throw new TypeError("Generator is already executing.");for(;P;)try{if(I=1,j&&(R=2&ne[0]?j.return:ne[0]?j.throw||((R=j.return)&&R.call(j),0):j.next)&&!(R=R.call(j,ne[1])).done)return R;switch(j=0,R&&(ne=[2&ne[0],R.value]),ne[0]){case 0:case 1:R=ne;break;case 4:return P.label++,{value:ne[1],done:!1};case 5:P.label++,j=ne[1],ne=[0];continue;case 7:ne=P.ops.pop(),P.trys.pop();continue;default:if(!(R=(R=P.trys).length>0&&R[R.length-1])&&(6===ne[0]||2===ne[0])){P=0;continue}if(3===ne[0]&&(!R||ne[1]>R[0]&&ne[1]<R[3])){P.label=ne[1];break}if(6===ne[0]&&P.label<R[1]){P.label=R[1],R=ne;break}if(R&&P.label<R[2]){P.label=R[2],P.ops.push(ne);break}R[2]&&P.ops.pop(),P.trys.pop();continue}ne=D.call(x,P)}catch(Fe){ne=[6,Fe],j=0}finally{I=R=0}if(5&ne[0])throw ne[1];return{value:ne[0]?ne[1]:void 0,done:!0}}([ne,Fe])}}}function O(x,D,P,I){void 0===I&&(I=P),x[I]=D[P]}function $(x,D){for(var P in x)"default"!==P&&!D.hasOwnProperty(P)&&(D[P]=x[P])}function v(x){var D="function"==typeof Symbol&&Symbol.iterator,P=D&&x[D],I=0;if(P)return P.call(x);if(x&&"number"==typeof x.length)return{next:function(){return x&&I>=x.length&&(x=void 0),{value:x&&x[I++],done:!x}}};throw new TypeError(D?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(x,D){var P="function"==typeof Symbol&&x[Symbol.iterator];if(!P)return x;var j,Q,I=P.call(x),R=[];try{for(;(void 0===D||D-- >0)&&!(j=I.next()).done;)R.push(j.value)}catch(ee){Q={error:ee}}finally{try{j&&!j.done&&(P=I.return)&&P.call(I)}finally{if(Q)throw Q.error}}return R}function V(){for(var x=[],D=0;D<arguments.length;D++)x=x.concat(b(arguments[D]));return x}function G(){for(var x=0,D=0,P=arguments.length;D<P;D++)x+=arguments[D].length;var I=Array(x),j=0;for(D=0;D<P;D++)for(var R=arguments[D],Q=0,ee=R.length;Q<ee;Q++,j++)I[j]=R[Q];return I}function H(x){return this instanceof H?(this.v=x,this):new H(x)}function te(x,D,P){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var j,I=P.apply(x,D||[]),R=[];return j={},Q("next"),Q("throw"),Q("return"),j[Symbol.asyncIterator]=function(){return this},j;function Q(Te){I[Te]&&(j[Te]=function(tt){return new Promise(function(Qe,vt){R.push([Te,tt,Qe,vt])>1||ee(Te,tt)})})}function ee(Te,tt){try{!function Re(Te){Te.value instanceof H?Promise.resolve(Te.value.v).then(ne,Fe):rt(R[0][2],Te)}(I[Te](tt))}catch(Qe){rt(R[0][3],Qe)}}function ne(Te){ee("next",Te)}function Fe(Te){ee("throw",Te)}function rt(Te,tt){Te(tt),R.shift(),R.length&&ee(R[0][0],R[0][1])}}function z(x){var D,P;return D={},I("next"),I("throw",function(j){throw j}),I("return"),D[Symbol.iterator]=function(){return this},D;function I(j,R){D[j]=x[j]?function(Q){return(P=!P)?{value:H(x[j](Q)),done:"return"===j}:R?R(Q):Q}:R}}function W(x){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var P,D=x[Symbol.asyncIterator];return D?D.call(x):(x=v(x),P={},I("next"),I("throw"),I("return"),P[Symbol.asyncIterator]=function(){return this},P);function I(R){P[R]=x[R]&&function(Q){return new Promise(function(ee,Re){!function j(R,Q,ee,Re){Promise.resolve(Re).then(function(ne){R({value:ne,done:ee})},Q)}(ee,Re,(Q=x[R](Q)).done,Q.value)})}}}function J(x,D){return Object.defineProperty?Object.defineProperty(x,"raw",{value:D}):x.raw=D,x}function se(x){if(x&&x.__esModule)return x;var D={};if(null!=x)for(var P in x)Object.hasOwnProperty.call(x,P)&&(D[P]=x[P]);return D.default=x,D}function ve(x){return x&&x.__esModule?x:{default:x}}function xe(x,D){if(!D.has(x))throw new TypeError("attempted to get private field on non-instance");return D.get(x)}function ge(x,D,P){if(!D.has(x))throw new TypeError("attempted to set private field on non-instance");return D.set(x,P),P}},59904:(pe,N,S)=>{S.r(N),S.d(N,{__assign:()=>Z,__asyncDelegator:()=>z,__asyncGenerator:()=>te,__asyncValues:()=>W,__await:()=>H,__awaiter:()=>y,__classPrivateFieldGet:()=>xe,__classPrivateFieldSet:()=>ge,__createBinding:()=>O,__decorate:()=>_,__exportStar:()=>$,__extends:()=>q,__generator:()=>E,__importDefault:()=>ve,__importStar:()=>se,__makeTemplateObject:()=>J,__metadata:()=>g,__param:()=>p,__read:()=>b,__rest:()=>r,__spread:()=>V,__spreadArrays:()=>G,__values:()=>v});var M=function(x,D){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,I){P.__proto__=I}||function(P,I){for(var j in I)I.hasOwnProperty(j)&&(P[j]=I[j])})(x,D)};function q(x,D){function P(){this.constructor=x}M(x,D),x.prototype=null===D?Object.create(D):(P.prototype=D.prototype,new P)}var Z=function(){return Z=Object.assign||function(D){for(var P,I=1,j=arguments.length;I<j;I++)for(var R in P=arguments[I])Object.prototype.hasOwnProperty.call(P,R)&&(D[R]=P[R]);return D},Z.apply(this,arguments)};function r(x,D){var P={};for(var I in x)Object.prototype.hasOwnProperty.call(x,I)&&D.indexOf(I)<0&&(P[I]=x[I]);if(null!=x&&"function"==typeof Object.getOwnPropertySymbols){var j=0;for(I=Object.getOwnPropertySymbols(x);j<I.length;j++)D.indexOf(I[j])<0&&Object.prototype.propertyIsEnumerable.call(x,I[j])&&(P[I[j]]=x[I[j]])}return P}function _(x,D,P,I){var Q,j=arguments.length,R=j<3?D:null===I?I=Object.getOwnPropertyDescriptor(D,P):I;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)R=Reflect.decorate(x,D,P,I);else for(var ee=x.length-1;ee>=0;ee--)(Q=x[ee])&&(R=(j<3?Q(R):j>3?Q(D,P,R):Q(D,P))||R);return j>3&&R&&Object.defineProperty(D,P,R),R}function p(x,D){return function(P,I){D(P,I,x)}}function g(x,D){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(x,D)}function y(x,D,P,I){return new(P||(P=Promise))(function(R,Q){function ee(Fe){try{ne(I.next(Fe))}catch(rt){Q(rt)}}function Re(Fe){try{ne(I.throw(Fe))}catch(rt){Q(rt)}}function ne(Fe){Fe.done?R(Fe.value):function j(R){return R instanceof P?R:new P(function(Q){Q(R)})}(Fe.value).then(ee,Re)}ne((I=I.apply(x,D||[])).next())})}function E(x,D){var I,j,R,Q,P={label:0,sent:function(){if(1&R[0])throw R[1];return R[1]},trys:[],ops:[]};return Q={next:ee(0),throw:ee(1),return:ee(2)},"function"==typeof Symbol&&(Q[Symbol.iterator]=function(){return this}),Q;function ee(ne){return function(Fe){return function Re(ne){if(I)throw new TypeError("Generator is already executing.");for(;P;)try{if(I=1,j&&(R=2&ne[0]?j.return:ne[0]?j.throw||((R=j.return)&&R.call(j),0):j.next)&&!(R=R.call(j,ne[1])).done)return R;switch(j=0,R&&(ne=[2&ne[0],R.value]),ne[0]){case 0:case 1:R=ne;break;case 4:return P.label++,{value:ne[1],done:!1};case 5:P.label++,j=ne[1],ne=[0];continue;case 7:ne=P.ops.pop(),P.trys.pop();continue;default:if(!(R=(R=P.trys).length>0&&R[R.length-1])&&(6===ne[0]||2===ne[0])){P=0;continue}if(3===ne[0]&&(!R||ne[1]>R[0]&&ne[1]<R[3])){P.label=ne[1];break}if(6===ne[0]&&P.label<R[1]){P.label=R[1],R=ne;break}if(R&&P.label<R[2]){P.label=R[2],P.ops.push(ne);break}R[2]&&P.ops.pop(),P.trys.pop();continue}ne=D.call(x,P)}catch(Fe){ne=[6,Fe],j=0}finally{I=R=0}if(5&ne[0])throw ne[1];return{value:ne[0]?ne[1]:void 0,done:!0}}([ne,Fe])}}}function O(x,D,P,I){void 0===I&&(I=P),x[I]=D[P]}function $(x,D){for(var P in x)"default"!==P&&!D.hasOwnProperty(P)&&(D[P]=x[P])}function v(x){var D="function"==typeof Symbol&&Symbol.iterator,P=D&&x[D],I=0;if(P)return P.call(x);if(x&&"number"==typeof x.length)return{next:function(){return x&&I>=x.length&&(x=void 0),{value:x&&x[I++],done:!x}}};throw new TypeError(D?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(x,D){var P="function"==typeof Symbol&&x[Symbol.iterator];if(!P)return x;var j,Q,I=P.call(x),R=[];try{for(;(void 0===D||D-- >0)&&!(j=I.next()).done;)R.push(j.value)}catch(ee){Q={error:ee}}finally{try{j&&!j.done&&(P=I.return)&&P.call(I)}finally{if(Q)throw Q.error}}return R}function V(){for(var x=[],D=0;D<arguments.length;D++)x=x.concat(b(arguments[D]));return x}function G(){for(var x=0,D=0,P=arguments.length;D<P;D++)x+=arguments[D].length;var I=Array(x),j=0;for(D=0;D<P;D++)for(var R=arguments[D],Q=0,ee=R.length;Q<ee;Q++,j++)I[j]=R[Q];return I}function H(x){return this instanceof H?(this.v=x,this):new H(x)}function te(x,D,P){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var j,I=P.apply(x,D||[]),R=[];return j={},Q("next"),Q("throw"),Q("return"),j[Symbol.asyncIterator]=function(){return this},j;function Q(Te){I[Te]&&(j[Te]=function(tt){return new Promise(function(Qe,vt){R.push([Te,tt,Qe,vt])>1||ee(Te,tt)})})}function ee(Te,tt){try{!function Re(Te){Te.value instanceof H?Promise.resolve(Te.value.v).then(ne,Fe):rt(R[0][2],Te)}(I[Te](tt))}catch(Qe){rt(R[0][3],Qe)}}function ne(Te){ee("next",Te)}function Fe(Te){ee("throw",Te)}function rt(Te,tt){Te(tt),R.shift(),R.length&&ee(R[0][0],R[0][1])}}function z(x){var D,P;return D={},I("next"),I("throw",function(j){throw j}),I("return"),D[Symbol.iterator]=function(){return this},D;function I(j,R){D[j]=x[j]?function(Q){return(P=!P)?{value:H(x[j](Q)),done:"return"===j}:R?R(Q):Q}:R}}function W(x){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var P,D=x[Symbol.asyncIterator];return D?D.call(x):(x=v(x),P={},I("next"),I("throw"),I("return"),P[Symbol.asyncIterator]=function(){return this},P);function I(R){P[R]=x[R]&&function(Q){return new Promise(function(ee,Re){!function j(R,Q,ee,Re){Promise.resolve(Re).then(function(ne){R({value:ne,done:ee})},Q)}(ee,Re,(Q=x[R](Q)).done,Q.value)})}}}function J(x,D){return Object.defineProperty?Object.defineProperty(x,"raw",{value:D}):x.raw=D,x}function se(x){if(x&&x.__esModule)return x;var D={};if(null!=x)for(var P in x)Object.hasOwnProperty.call(x,P)&&(D[P]=x[P]);return D.default=x,D}function ve(x){return x&&x.__esModule?x:{default:x}}function xe(x,D){if(!D.has(x))throw new TypeError("attempted to get private field on non-instance");return D.get(x)}function ge(x,D,P){if(!D.has(x))throw new TypeError("attempted to set private field on non-instance");return D.set(x,P),P}},97716:(pe,N,S)=>{S.r(N),S.d(N,{__assign:()=>Z,__asyncDelegator:()=>z,__asyncGenerator:()=>te,__asyncValues:()=>W,__await:()=>H,__awaiter:()=>y,__classPrivateFieldGet:()=>xe,__classPrivateFieldSet:()=>ge,__createBinding:()=>O,__decorate:()=>_,__exportStar:()=>$,__extends:()=>q,__generator:()=>E,__importDefault:()=>ve,__importStar:()=>se,__makeTemplateObject:()=>J,__metadata:()=>g,__param:()=>p,__read:()=>b,__rest:()=>r,__spread:()=>V,__spreadArrays:()=>G,__values:()=>v});var M=function(x,D){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,I){P.__proto__=I}||function(P,I){for(var j in I)I.hasOwnProperty(j)&&(P[j]=I[j])})(x,D)};function q(x,D){function P(){this.constructor=x}M(x,D),x.prototype=null===D?Object.create(D):(P.prototype=D.prototype,new P)}var Z=function(){return Z=Object.assign||function(D){for(var P,I=1,j=arguments.length;I<j;I++)for(var R in P=arguments[I])Object.prototype.hasOwnProperty.call(P,R)&&(D[R]=P[R]);return D},Z.apply(this,arguments)};function r(x,D){var P={};for(var I in x)Object.prototype.hasOwnProperty.call(x,I)&&D.indexOf(I)<0&&(P[I]=x[I]);if(null!=x&&"function"==typeof Object.getOwnPropertySymbols){var j=0;for(I=Object.getOwnPropertySymbols(x);j<I.length;j++)D.indexOf(I[j])<0&&Object.prototype.propertyIsEnumerable.call(x,I[j])&&(P[I[j]]=x[I[j]])}return P}function _(x,D,P,I){var Q,j=arguments.length,R=j<3?D:null===I?I=Object.getOwnPropertyDescriptor(D,P):I;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)R=Reflect.decorate(x,D,P,I);else for(var ee=x.length-1;ee>=0;ee--)(Q=x[ee])&&(R=(j<3?Q(R):j>3?Q(D,P,R):Q(D,P))||R);return j>3&&R&&Object.defineProperty(D,P,R),R}function p(x,D){return function(P,I){D(P,I,x)}}function g(x,D){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(x,D)}function y(x,D,P,I){return new(P||(P=Promise))(function(R,Q){function ee(Fe){try{ne(I.next(Fe))}catch(rt){Q(rt)}}function Re(Fe){try{ne(I.throw(Fe))}catch(rt){Q(rt)}}function ne(Fe){Fe.done?R(Fe.value):function j(R){return R instanceof P?R:new P(function(Q){Q(R)})}(Fe.value).then(ee,Re)}ne((I=I.apply(x,D||[])).next())})}function E(x,D){var I,j,R,Q,P={label:0,sent:function(){if(1&R[0])throw R[1];return R[1]},trys:[],ops:[]};return Q={next:ee(0),throw:ee(1),return:ee(2)},"function"==typeof Symbol&&(Q[Symbol.iterator]=function(){return this}),Q;function ee(ne){return function(Fe){return function Re(ne){if(I)throw new TypeError("Generator is already executing.");for(;P;)try{if(I=1,j&&(R=2&ne[0]?j.return:ne[0]?j.throw||((R=j.return)&&R.call(j),0):j.next)&&!(R=R.call(j,ne[1])).done)return R;switch(j=0,R&&(ne=[2&ne[0],R.value]),ne[0]){case 0:case 1:R=ne;break;case 4:return P.label++,{value:ne[1],done:!1};case 5:P.label++,j=ne[1],ne=[0];continue;case 7:ne=P.ops.pop(),P.trys.pop();continue;default:if(!(R=(R=P.trys).length>0&&R[R.length-1])&&(6===ne[0]||2===ne[0])){P=0;continue}if(3===ne[0]&&(!R||ne[1]>R[0]&&ne[1]<R[3])){P.label=ne[1];break}if(6===ne[0]&&P.label<R[1]){P.label=R[1],R=ne;break}if(R&&P.label<R[2]){P.label=R[2],P.ops.push(ne);break}R[2]&&P.ops.pop(),P.trys.pop();continue}ne=D.call(x,P)}catch(Fe){ne=[6,Fe],j=0}finally{I=R=0}if(5&ne[0])throw ne[1];return{value:ne[0]?ne[1]:void 0,done:!0}}([ne,Fe])}}}function O(x,D,P,I){void 0===I&&(I=P),x[I]=D[P]}function $(x,D){for(var P in x)"default"!==P&&!D.hasOwnProperty(P)&&(D[P]=x[P])}function v(x){var D="function"==typeof Symbol&&Symbol.iterator,P=D&&x[D],I=0;if(P)return P.call(x);if(x&&"number"==typeof x.length)return{next:function(){return x&&I>=x.length&&(x=void 0),{value:x&&x[I++],done:!x}}};throw new TypeError(D?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(x,D){var P="function"==typeof Symbol&&x[Symbol.iterator];if(!P)return x;var j,Q,I=P.call(x),R=[];try{for(;(void 0===D||D-- >0)&&!(j=I.next()).done;)R.push(j.value)}catch(ee){Q={error:ee}}finally{try{j&&!j.done&&(P=I.return)&&P.call(I)}finally{if(Q)throw Q.error}}return R}function V(){for(var x=[],D=0;D<arguments.length;D++)x=x.concat(b(arguments[D]));return x}function G(){for(var x=0,D=0,P=arguments.length;D<P;D++)x+=arguments[D].length;var I=Array(x),j=0;for(D=0;D<P;D++)for(var R=arguments[D],Q=0,ee=R.length;Q<ee;Q++,j++)I[j]=R[Q];return I}function H(x){return this instanceof H?(this.v=x,this):new H(x)}function te(x,D,P){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var j,I=P.apply(x,D||[]),R=[];return j={},Q("next"),Q("throw"),Q("return"),j[Symbol.asyncIterator]=function(){return this},j;function Q(Te){I[Te]&&(j[Te]=function(tt){return new Promise(function(Qe,vt){R.push([Te,tt,Qe,vt])>1||ee(Te,tt)})})}function ee(Te,tt){try{!function Re(Te){Te.value instanceof H?Promise.resolve(Te.value.v).then(ne,Fe):rt(R[0][2],Te)}(I[Te](tt))}catch(Qe){rt(R[0][3],Qe)}}function ne(Te){ee("next",Te)}function Fe(Te){ee("throw",Te)}function rt(Te,tt){Te(tt),R.shift(),R.length&&ee(R[0][0],R[0][1])}}function z(x){var D,P;return D={},I("next"),I("throw",function(j){throw j}),I("return"),D[Symbol.iterator]=function(){return this},D;function I(j,R){D[j]=x[j]?function(Q){return(P=!P)?{value:H(x[j](Q)),done:"return"===j}:R?R(Q):Q}:R}}function W(x){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var P,D=x[Symbol.asyncIterator];return D?D.call(x):(x=v(x),P={},I("next"),I("throw"),I("return"),P[Symbol.asyncIterator]=function(){return this},P);function I(R){P[R]=x[R]&&function(Q){return new Promise(function(ee,Re){!function j(R,Q,ee,Re){Promise.resolve(Re).then(function(ne){R({value:ne,done:ee})},Q)}(ee,Re,(Q=x[R](Q)).done,Q.value)})}}}function J(x,D){return Object.defineProperty?Object.defineProperty(x,"raw",{value:D}):x.raw=D,x}function se(x){if(x&&x.__esModule)return x;var D={};if(null!=x)for(var P in x)Object.hasOwnProperty.call(x,P)&&(D[P]=x[P]);return D.default=x,D}function ve(x){return x&&x.__esModule?x:{default:x}}function xe(x,D){if(!D.has(x))throw new TypeError("attempted to get private field on non-instance");return D.get(x)}function ge(x,D,P){if(!D.has(x))throw new TypeError("attempted to set private field on non-instance");return D.set(x,P),P}},76187:(pe,N,S)=>{S.r(N),S.d(N,{__assign:()=>Z,__asyncDelegator:()=>z,__asyncGenerator:()=>te,__asyncValues:()=>W,__await:()=>H,__awaiter:()=>y,__classPrivateFieldGet:()=>xe,__classPrivateFieldSet:()=>ge,__createBinding:()=>O,__decorate:()=>_,__exportStar:()=>$,__extends:()=>q,__generator:()=>E,__importDefault:()=>ve,__importStar:()=>se,__makeTemplateObject:()=>J,__metadata:()=>g,__param:()=>p,__read:()=>b,__rest:()=>r,__spread:()=>V,__spreadArrays:()=>G,__values:()=>v});var M=function(x,D){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,I){P.__proto__=I}||function(P,I){for(var j in I)I.hasOwnProperty(j)&&(P[j]=I[j])})(x,D)};function q(x,D){function P(){this.constructor=x}M(x,D),x.prototype=null===D?Object.create(D):(P.prototype=D.prototype,new P)}var Z=function(){return Z=Object.assign||function(D){for(var P,I=1,j=arguments.length;I<j;I++)for(var R in P=arguments[I])Object.prototype.hasOwnProperty.call(P,R)&&(D[R]=P[R]);return D},Z.apply(this,arguments)};function r(x,D){var P={};for(var I in x)Object.prototype.hasOwnProperty.call(x,I)&&D.indexOf(I)<0&&(P[I]=x[I]);if(null!=x&&"function"==typeof Object.getOwnPropertySymbols){var j=0;for(I=Object.getOwnPropertySymbols(x);j<I.length;j++)D.indexOf(I[j])<0&&Object.prototype.propertyIsEnumerable.call(x,I[j])&&(P[I[j]]=x[I[j]])}return P}function _(x,D,P,I){var Q,j=arguments.length,R=j<3?D:null===I?I=Object.getOwnPropertyDescriptor(D,P):I;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)R=Reflect.decorate(x,D,P,I);else for(var ee=x.length-1;ee>=0;ee--)(Q=x[ee])&&(R=(j<3?Q(R):j>3?Q(D,P,R):Q(D,P))||R);return j>3&&R&&Object.defineProperty(D,P,R),R}function p(x,D){return function(P,I){D(P,I,x)}}function g(x,D){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(x,D)}function y(x,D,P,I){return new(P||(P=Promise))(function(R,Q){function ee(Fe){try{ne(I.next(Fe))}catch(rt){Q(rt)}}function Re(Fe){try{ne(I.throw(Fe))}catch(rt){Q(rt)}}function ne(Fe){Fe.done?R(Fe.value):function j(R){return R instanceof P?R:new P(function(Q){Q(R)})}(Fe.value).then(ee,Re)}ne((I=I.apply(x,D||[])).next())})}function E(x,D){var I,j,R,Q,P={label:0,sent:function(){if(1&R[0])throw R[1];return R[1]},trys:[],ops:[]};return Q={next:ee(0),throw:ee(1),return:ee(2)},"function"==typeof Symbol&&(Q[Symbol.iterator]=function(){return this}),Q;function ee(ne){return function(Fe){return function Re(ne){if(I)throw new TypeError("Generator is already executing.");for(;P;)try{if(I=1,j&&(R=2&ne[0]?j.return:ne[0]?j.throw||((R=j.return)&&R.call(j),0):j.next)&&!(R=R.call(j,ne[1])).done)return R;switch(j=0,R&&(ne=[2&ne[0],R.value]),ne[0]){case 0:case 1:R=ne;break;case 4:return P.label++,{value:ne[1],done:!1};case 5:P.label++,j=ne[1],ne=[0];continue;case 7:ne=P.ops.pop(),P.trys.pop();continue;default:if(!(R=(R=P.trys).length>0&&R[R.length-1])&&(6===ne[0]||2===ne[0])){P=0;continue}if(3===ne[0]&&(!R||ne[1]>R[0]&&ne[1]<R[3])){P.label=ne[1];break}if(6===ne[0]&&P.label<R[1]){P.label=R[1],R=ne;break}if(R&&P.label<R[2]){P.label=R[2],P.ops.push(ne);break}R[2]&&P.ops.pop(),P.trys.pop();continue}ne=D.call(x,P)}catch(Fe){ne=[6,Fe],j=0}finally{I=R=0}if(5&ne[0])throw ne[1];return{value:ne[0]?ne[1]:void 0,done:!0}}([ne,Fe])}}}function O(x,D,P,I){void 0===I&&(I=P),x[I]=D[P]}function $(x,D){for(var P in x)"default"!==P&&!D.hasOwnProperty(P)&&(D[P]=x[P])}function v(x){var D="function"==typeof Symbol&&Symbol.iterator,P=D&&x[D],I=0;if(P)return P.call(x);if(x&&"number"==typeof x.length)return{next:function(){return x&&I>=x.length&&(x=void 0),{value:x&&x[I++],done:!x}}};throw new TypeError(D?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(x,D){var P="function"==typeof Symbol&&x[Symbol.iterator];if(!P)return x;var j,Q,I=P.call(x),R=[];try{for(;(void 0===D||D-- >0)&&!(j=I.next()).done;)R.push(j.value)}catch(ee){Q={error:ee}}finally{try{j&&!j.done&&(P=I.return)&&P.call(I)}finally{if(Q)throw Q.error}}return R}function V(){for(var x=[],D=0;D<arguments.length;D++)x=x.concat(b(arguments[D]));return x}function G(){for(var x=0,D=0,P=arguments.length;D<P;D++)x+=arguments[D].length;var I=Array(x),j=0;for(D=0;D<P;D++)for(var R=arguments[D],Q=0,ee=R.length;Q<ee;Q++,j++)I[j]=R[Q];return I}function H(x){return this instanceof H?(this.v=x,this):new H(x)}function te(x,D,P){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var j,I=P.apply(x,D||[]),R=[];return j={},Q("next"),Q("throw"),Q("return"),j[Symbol.asyncIterator]=function(){return this},j;function Q(Te){I[Te]&&(j[Te]=function(tt){return new Promise(function(Qe,vt){R.push([Te,tt,Qe,vt])>1||ee(Te,tt)})})}function ee(Te,tt){try{!function Re(Te){Te.value instanceof H?Promise.resolve(Te.value.v).then(ne,Fe):rt(R[0][2],Te)}(I[Te](tt))}catch(Qe){rt(R[0][3],Qe)}}function ne(Te){ee("next",Te)}function Fe(Te){ee("throw",Te)}function rt(Te,tt){Te(tt),R.shift(),R.length&&ee(R[0][0],R[0][1])}}function z(x){var D,P;return D={},I("next"),I("throw",function(j){throw j}),I("return"),D[Symbol.iterator]=function(){return this},D;function I(j,R){D[j]=x[j]?function(Q){return(P=!P)?{value:H(x[j](Q)),done:"return"===j}:R?R(Q):Q}:R}}function W(x){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var P,D=x[Symbol.asyncIterator];return D?D.call(x):(x=v(x),P={},I("next"),I("throw"),I("return"),P[Symbol.asyncIterator]=function(){return this},P);function I(R){P[R]=x[R]&&function(Q){return new Promise(function(ee,Re){!function j(R,Q,ee,Re){Promise.resolve(Re).then(function(ne){R({value:ne,done:ee})},Q)}(ee,Re,(Q=x[R](Q)).done,Q.value)})}}}function J(x,D){return Object.defineProperty?Object.defineProperty(x,"raw",{value:D}):x.raw=D,x}function se(x){if(x&&x.__esModule)return x;var D={};if(null!=x)for(var P in x)Object.hasOwnProperty.call(x,P)&&(D[P]=x[P]);return D.default=x,D}function ve(x){return x&&x.__esModule?x:{default:x}}function xe(x,D){if(!D.has(x))throw new TypeError("attempted to get private field on non-instance");return D.get(x)}function ge(x,D,P){if(!D.has(x))throw new TypeError("attempted to set private field on non-instance");return D.set(x,P),P}},48798:(pe,N,S)=>{S.r(N),S.d(N,{__assign:()=>Z,__asyncDelegator:()=>z,__asyncGenerator:()=>te,__asyncValues:()=>W,__await:()=>H,__awaiter:()=>y,__classPrivateFieldGet:()=>xe,__classPrivateFieldSet:()=>ge,__createBinding:()=>O,__decorate:()=>_,__exportStar:()=>$,__extends:()=>q,__generator:()=>E,__importDefault:()=>ve,__importStar:()=>se,__makeTemplateObject:()=>J,__metadata:()=>g,__param:()=>p,__read:()=>b,__rest:()=>r,__spread:()=>V,__spreadArrays:()=>G,__values:()=>v});var M=function(x,D){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,I){P.__proto__=I}||function(P,I){for(var j in I)I.hasOwnProperty(j)&&(P[j]=I[j])})(x,D)};function q(x,D){function P(){this.constructor=x}M(x,D),x.prototype=null===D?Object.create(D):(P.prototype=D.prototype,new P)}var Z=function(){return Z=Object.assign||function(D){for(var P,I=1,j=arguments.length;I<j;I++)for(var R in P=arguments[I])Object.prototype.hasOwnProperty.call(P,R)&&(D[R]=P[R]);return D},Z.apply(this,arguments)};function r(x,D){var P={};for(var I in x)Object.prototype.hasOwnProperty.call(x,I)&&D.indexOf(I)<0&&(P[I]=x[I]);if(null!=x&&"function"==typeof Object.getOwnPropertySymbols){var j=0;for(I=Object.getOwnPropertySymbols(x);j<I.length;j++)D.indexOf(I[j])<0&&Object.prototype.propertyIsEnumerable.call(x,I[j])&&(P[I[j]]=x[I[j]])}return P}function _(x,D,P,I){var Q,j=arguments.length,R=j<3?D:null===I?I=Object.getOwnPropertyDescriptor(D,P):I;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)R=Reflect.decorate(x,D,P,I);else for(var ee=x.length-1;ee>=0;ee--)(Q=x[ee])&&(R=(j<3?Q(R):j>3?Q(D,P,R):Q(D,P))||R);return j>3&&R&&Object.defineProperty(D,P,R),R}function p(x,D){return function(P,I){D(P,I,x)}}function g(x,D){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(x,D)}function y(x,D,P,I){return new(P||(P=Promise))(function(R,Q){function ee(Fe){try{ne(I.next(Fe))}catch(rt){Q(rt)}}function Re(Fe){try{ne(I.throw(Fe))}catch(rt){Q(rt)}}function ne(Fe){Fe.done?R(Fe.value):function j(R){return R instanceof P?R:new P(function(Q){Q(R)})}(Fe.value).then(ee,Re)}ne((I=I.apply(x,D||[])).next())})}function E(x,D){var I,j,R,Q,P={label:0,sent:function(){if(1&R[0])throw R[1];return R[1]},trys:[],ops:[]};return Q={next:ee(0),throw:ee(1),return:ee(2)},"function"==typeof Symbol&&(Q[Symbol.iterator]=function(){return this}),Q;function ee(ne){return function(Fe){return function Re(ne){if(I)throw new TypeError("Generator is already executing.");for(;P;)try{if(I=1,j&&(R=2&ne[0]?j.return:ne[0]?j.throw||((R=j.return)&&R.call(j),0):j.next)&&!(R=R.call(j,ne[1])).done)return R;switch(j=0,R&&(ne=[2&ne[0],R.value]),ne[0]){case 0:case 1:R=ne;break;case 4:return P.label++,{value:ne[1],done:!1};case 5:P.label++,j=ne[1],ne=[0];continue;case 7:ne=P.ops.pop(),P.trys.pop();continue;default:if(!(R=(R=P.trys).length>0&&R[R.length-1])&&(6===ne[0]||2===ne[0])){P=0;continue}if(3===ne[0]&&(!R||ne[1]>R[0]&&ne[1]<R[3])){P.label=ne[1];break}if(6===ne[0]&&P.label<R[1]){P.label=R[1],R=ne;break}if(R&&P.label<R[2]){P.label=R[2],P.ops.push(ne);break}R[2]&&P.ops.pop(),P.trys.pop();continue}ne=D.call(x,P)}catch(Fe){ne=[6,Fe],j=0}finally{I=R=0}if(5&ne[0])throw ne[1];return{value:ne[0]?ne[1]:void 0,done:!0}}([ne,Fe])}}}function O(x,D,P,I){void 0===I&&(I=P),x[I]=D[P]}function $(x,D){for(var P in x)"default"!==P&&!D.hasOwnProperty(P)&&(D[P]=x[P])}function v(x){var D="function"==typeof Symbol&&Symbol.iterator,P=D&&x[D],I=0;if(P)return P.call(x);if(x&&"number"==typeof x.length)return{next:function(){return x&&I>=x.length&&(x=void 0),{value:x&&x[I++],done:!x}}};throw new TypeError(D?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(x,D){var P="function"==typeof Symbol&&x[Symbol.iterator];if(!P)return x;var j,Q,I=P.call(x),R=[];try{for(;(void 0===D||D-- >0)&&!(j=I.next()).done;)R.push(j.value)}catch(ee){Q={error:ee}}finally{try{j&&!j.done&&(P=I.return)&&P.call(I)}finally{if(Q)throw Q.error}}return R}function V(){for(var x=[],D=0;D<arguments.length;D++)x=x.concat(b(arguments[D]));return x}function G(){for(var x=0,D=0,P=arguments.length;D<P;D++)x+=arguments[D].length;var I=Array(x),j=0;for(D=0;D<P;D++)for(var R=arguments[D],Q=0,ee=R.length;Q<ee;Q++,j++)I[j]=R[Q];return I}function H(x){return this instanceof H?(this.v=x,this):new H(x)}function te(x,D,P){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var j,I=P.apply(x,D||[]),R=[];return j={},Q("next"),Q("throw"),Q("return"),j[Symbol.asyncIterator]=function(){return this},j;function Q(Te){I[Te]&&(j[Te]=function(tt){return new Promise(function(Qe,vt){R.push([Te,tt,Qe,vt])>1||ee(Te,tt)})})}function ee(Te,tt){try{!function Re(Te){Te.value instanceof H?Promise.resolve(Te.value.v).then(ne,Fe):rt(R[0][2],Te)}(I[Te](tt))}catch(Qe){rt(R[0][3],Qe)}}function ne(Te){ee("next",Te)}function Fe(Te){ee("throw",Te)}function rt(Te,tt){Te(tt),R.shift(),R.length&&ee(R[0][0],R[0][1])}}function z(x){var D,P;return D={},I("next"),I("throw",function(j){throw j}),I("return"),D[Symbol.iterator]=function(){return this},D;function I(j,R){D[j]=x[j]?function(Q){return(P=!P)?{value:H(x[j](Q)),done:"return"===j}:R?R(Q):Q}:R}}function W(x){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var P,D=x[Symbol.asyncIterator];return D?D.call(x):(x=v(x),P={},I("next"),I("throw"),I("return"),P[Symbol.asyncIterator]=function(){return this},P);function I(R){P[R]=x[R]&&function(Q){return new Promise(function(ee,Re){!function j(R,Q,ee,Re){Promise.resolve(Re).then(function(ne){R({value:ne,done:ee})},Q)}(ee,Re,(Q=x[R](Q)).done,Q.value)})}}}function J(x,D){return Object.defineProperty?Object.defineProperty(x,"raw",{value:D}):x.raw=D,x}function se(x){if(x&&x.__esModule)return x;var D={};if(null!=x)for(var P in x)Object.hasOwnProperty.call(x,P)&&(D[P]=x[P]);return D.default=x,D}function ve(x){return x&&x.__esModule?x:{default:x}}function xe(x,D){if(!D.has(x))throw new TypeError("attempted to get private field on non-instance");return D.get(x)}function ge(x,D,P){if(!D.has(x))throw new TypeError("attempted to set private field on non-instance");return D.set(x,P),P}},62220:(pe,N,S)=>{S.r(N),S.d(N,{__assign:()=>Z,__asyncDelegator:()=>z,__asyncGenerator:()=>te,__asyncValues:()=>W,__await:()=>H,__awaiter:()=>y,__classPrivateFieldGet:()=>xe,__classPrivateFieldSet:()=>ge,__createBinding:()=>O,__decorate:()=>_,__exportStar:()=>$,__extends:()=>q,__generator:()=>E,__importDefault:()=>ve,__importStar:()=>se,__makeTemplateObject:()=>J,__metadata:()=>g,__param:()=>p,__read:()=>b,__rest:()=>r,__spread:()=>V,__spreadArrays:()=>G,__values:()=>v});var M=function(x,D){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,I){P.__proto__=I}||function(P,I){for(var j in I)I.hasOwnProperty(j)&&(P[j]=I[j])})(x,D)};function q(x,D){function P(){this.constructor=x}M(x,D),x.prototype=null===D?Object.create(D):(P.prototype=D.prototype,new P)}var Z=function(){return Z=Object.assign||function(D){for(var P,I=1,j=arguments.length;I<j;I++)for(var R in P=arguments[I])Object.prototype.hasOwnProperty.call(P,R)&&(D[R]=P[R]);return D},Z.apply(this,arguments)};function r(x,D){var P={};for(var I in x)Object.prototype.hasOwnProperty.call(x,I)&&D.indexOf(I)<0&&(P[I]=x[I]);if(null!=x&&"function"==typeof Object.getOwnPropertySymbols){var j=0;for(I=Object.getOwnPropertySymbols(x);j<I.length;j++)D.indexOf(I[j])<0&&Object.prototype.propertyIsEnumerable.call(x,I[j])&&(P[I[j]]=x[I[j]])}return P}function _(x,D,P,I){var Q,j=arguments.length,R=j<3?D:null===I?I=Object.getOwnPropertyDescriptor(D,P):I;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)R=Reflect.decorate(x,D,P,I);else for(var ee=x.length-1;ee>=0;ee--)(Q=x[ee])&&(R=(j<3?Q(R):j>3?Q(D,P,R):Q(D,P))||R);return j>3&&R&&Object.defineProperty(D,P,R),R}function p(x,D){return function(P,I){D(P,I,x)}}function g(x,D){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(x,D)}function y(x,D,P,I){return new(P||(P=Promise))(function(R,Q){function ee(Fe){try{ne(I.next(Fe))}catch(rt){Q(rt)}}function Re(Fe){try{ne(I.throw(Fe))}catch(rt){Q(rt)}}function ne(Fe){Fe.done?R(Fe.value):function j(R){return R instanceof P?R:new P(function(Q){Q(R)})}(Fe.value).then(ee,Re)}ne((I=I.apply(x,D||[])).next())})}function E(x,D){var I,j,R,Q,P={label:0,sent:function(){if(1&R[0])throw R[1];return R[1]},trys:[],ops:[]};return Q={next:ee(0),throw:ee(1),return:ee(2)},"function"==typeof Symbol&&(Q[Symbol.iterator]=function(){return this}),Q;function ee(ne){return function(Fe){return function Re(ne){if(I)throw new TypeError("Generator is already executing.");for(;P;)try{if(I=1,j&&(R=2&ne[0]?j.return:ne[0]?j.throw||((R=j.return)&&R.call(j),0):j.next)&&!(R=R.call(j,ne[1])).done)return R;switch(j=0,R&&(ne=[2&ne[0],R.value]),ne[0]){case 0:case 1:R=ne;break;case 4:return P.label++,{value:ne[1],done:!1};case 5:P.label++,j=ne[1],ne=[0];continue;case 7:ne=P.ops.pop(),P.trys.pop();continue;default:if(!(R=(R=P.trys).length>0&&R[R.length-1])&&(6===ne[0]||2===ne[0])){P=0;continue}if(3===ne[0]&&(!R||ne[1]>R[0]&&ne[1]<R[3])){P.label=ne[1];break}if(6===ne[0]&&P.label<R[1]){P.label=R[1],R=ne;break}if(R&&P.label<R[2]){P.label=R[2],P.ops.push(ne);break}R[2]&&P.ops.pop(),P.trys.pop();continue}ne=D.call(x,P)}catch(Fe){ne=[6,Fe],j=0}finally{I=R=0}if(5&ne[0])throw ne[1];return{value:ne[0]?ne[1]:void 0,done:!0}}([ne,Fe])}}}function O(x,D,P,I){void 0===I&&(I=P),x[I]=D[P]}function $(x,D){for(var P in x)"default"!==P&&!D.hasOwnProperty(P)&&(D[P]=x[P])}function v(x){var D="function"==typeof Symbol&&Symbol.iterator,P=D&&x[D],I=0;if(P)return P.call(x);if(x&&"number"==typeof x.length)return{next:function(){return x&&I>=x.length&&(x=void 0),{value:x&&x[I++],done:!x}}};throw new TypeError(D?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(x,D){var P="function"==typeof Symbol&&x[Symbol.iterator];if(!P)return x;var j,Q,I=P.call(x),R=[];try{for(;(void 0===D||D-- >0)&&!(j=I.next()).done;)R.push(j.value)}catch(ee){Q={error:ee}}finally{try{j&&!j.done&&(P=I.return)&&P.call(I)}finally{if(Q)throw Q.error}}return R}function V(){for(var x=[],D=0;D<arguments.length;D++)x=x.concat(b(arguments[D]));return x}function G(){for(var x=0,D=0,P=arguments.length;D<P;D++)x+=arguments[D].length;var I=Array(x),j=0;for(D=0;D<P;D++)for(var R=arguments[D],Q=0,ee=R.length;Q<ee;Q++,j++)I[j]=R[Q];return I}function H(x){return this instanceof H?(this.v=x,this):new H(x)}function te(x,D,P){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var j,I=P.apply(x,D||[]),R=[];return j={},Q("next"),Q("throw"),Q("return"),j[Symbol.asyncIterator]=function(){return this},j;function Q(Te){I[Te]&&(j[Te]=function(tt){return new Promise(function(Qe,vt){R.push([Te,tt,Qe,vt])>1||ee(Te,tt)})})}function ee(Te,tt){try{!function Re(Te){Te.value instanceof H?Promise.resolve(Te.value.v).then(ne,Fe):rt(R[0][2],Te)}(I[Te](tt))}catch(Qe){rt(R[0][3],Qe)}}function ne(Te){ee("next",Te)}function Fe(Te){ee("throw",Te)}function rt(Te,tt){Te(tt),R.shift(),R.length&&ee(R[0][0],R[0][1])}}function z(x){var D,P;return D={},I("next"),I("throw",function(j){throw j}),I("return"),D[Symbol.iterator]=function(){return this},D;function I(j,R){D[j]=x[j]?function(Q){return(P=!P)?{value:H(x[j](Q)),done:"return"===j}:R?R(Q):Q}:R}}function W(x){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var P,D=x[Symbol.asyncIterator];return D?D.call(x):(x=v(x),P={},I("next"),I("throw"),I("return"),P[Symbol.asyncIterator]=function(){return this},P);function I(R){P[R]=x[R]&&function(Q){return new Promise(function(ee,Re){!function j(R,Q,ee,Re){Promise.resolve(Re).then(function(ne){R({value:ne,done:ee})},Q)}(ee,Re,(Q=x[R](Q)).done,Q.value)})}}}function J(x,D){return Object.defineProperty?Object.defineProperty(x,"raw",{value:D}):x.raw=D,x}function se(x){if(x&&x.__esModule)return x;var D={};if(null!=x)for(var P in x)Object.hasOwnProperty.call(x,P)&&(D[P]=x[P]);return D.default=x,D}function ve(x){return x&&x.__esModule?x:{default:x}}function xe(x,D){if(!D.has(x))throw new TypeError("attempted to get private field on non-instance");return D.get(x)}function ge(x,D,P){if(!D.has(x))throw new TypeError("attempted to set private field on non-instance");return D.set(x,P),P}},54287:()=>{},56989:()=>{},24654:()=>{},69862:()=>{},40964:()=>{},62195:pe=>{pe.exports=function N(S,M){(null==M||M>S.length)&&(M=S.length);for(var q=0,Z=new Array(M);q<M;q++)Z[q]=S[q];return Z},pe.exports.__esModule=!0,pe.exports.default=pe.exports},14156:pe=>{pe.exports=function N(S){if(Array.isArray(S))return S},pe.exports.__esModule=!0,pe.exports.default=pe.exports},45664:pe=>{pe.exports=function N(S,M){if(!(S instanceof M))throw new TypeError("Cannot call a class as a function")},pe.exports.__esModule=!0,pe.exports.default=pe.exports},16996:(pe,N,S)=>{var M=S(7588);function q(r,_){for(var p=0;p<_.length;p++){var g=_[p];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(r,M(g.key),g)}}pe.exports=function Z(r,_,p){return _&&q(r.prototype,_),p&&q(r,p),Object.defineProperty(r,"prototype",{writable:!1}),r},pe.exports.__esModule=!0,pe.exports.default=pe.exports},9482:(pe,N,S)=>{var M=S(7588);pe.exports=function q(Z,r,_){return(r=M(r))in Z?Object.defineProperty(Z,r,{value:_,enumerable:!0,configurable:!0,writable:!0}):Z[r]=_,Z},pe.exports.__esModule=!0,pe.exports.default=pe.exports},82956:pe=>{pe.exports=function N(S,M){var q=null==S?null:typeof Symbol<"u"&&S[Symbol.iterator]||S["@@iterator"];if(null!=q){var Z,r,_,p,g=[],y=!0,E=!1;try{if(_=(q=q.call(S)).next,0===M){if(Object(q)!==q)return;y=!1}else for(;!(y=(Z=_.call(q)).done)&&(g.push(Z.value),g.length!==M);y=!0);}catch(O){E=!0,r=O}finally{try{if(!y&&null!=q.return&&(p=q.return(),Object(p)!==p))return}finally{if(E)throw r}}return g}},pe.exports.__esModule=!0,pe.exports.default=pe.exports},8110:pe=>{pe.exports=function N(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},pe.exports.__esModule=!0,pe.exports.default=pe.exports},3667:(pe,N,S)=>{var M=S(14156),q=S(82956),Z=S(46780),r=S(8110);pe.exports=function _(p,g){return M(p)||q(p,g)||Z(p,g)||r()},pe.exports.__esModule=!0,pe.exports.default=pe.exports},86977:(pe,N,S)=>{var M=S(23881).default;pe.exports=function q(Z,r){if("object"!==M(Z)||null===Z)return Z;var _=Z[Symbol.toPrimitive];if(void 0!==_){var p=_.call(Z,r||"default");if("object"!==M(p))return p;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(Z)},pe.exports.__esModule=!0,pe.exports.default=pe.exports},7588:(pe,N,S)=>{var M=S(23881).default,q=S(86977);pe.exports=function Z(r){var _=q(r,"string");return"symbol"===M(_)?_:String(_)},pe.exports.__esModule=!0,pe.exports.default=pe.exports},23881:pe=>{function N(S){return pe.exports=N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(M){return typeof M}:function(M){return M&&"function"==typeof Symbol&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},pe.exports.__esModule=!0,pe.exports.default=pe.exports,N(S)}pe.exports=N,pe.exports.__esModule=!0,pe.exports.default=pe.exports},46780:(pe,N,S)=>{var M=S(62195);pe.exports=function q(Z,r){if(Z){if("string"==typeof Z)return M(Z,r);var _=Object.prototype.toString.call(Z).slice(8,-1);if("Object"===_&&Z.constructor&&(_=Z.constructor.name),"Map"===_||"Set"===_)return Array.from(Z);if("Arguments"===_||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_))return M(Z,r)}},pe.exports.__esModule=!0,pe.exports.default=pe.exports},10203:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{FT:()=>StoreDevtoolsModule});var _home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(32090),_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(86170),_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(24582),_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(28694),_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(35603),_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(48047),_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(78069),_angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(56718),_ngrx_store__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(93896),rxjs__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(20591),rxjs__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(90833),rxjs__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(10745),rxjs__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(36646),rxjs__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(34915),rxjs__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(26067),rxjs_operators__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(81203),rxjs_operators__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(60116),rxjs_operators__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(50635),rxjs_operators__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(63853),rxjs_operators__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(87580),rxjs_operators__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(71989),rxjs_operators__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(53158),rxjs_operators__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(59295),rxjs_operators__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(68951),rxjs_operators__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(32673),rxjs_operators__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(87260),rxjs_operators__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(8728),rxjs_operators__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(10538),rxjs_operators__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(24503),_angular_core_rxjs_interop__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(64610),PERFORM_ACTION="PERFORM_ACTION",REFRESH="REFRESH",RESET="RESET",ROLLBACK="ROLLBACK",COMMIT="COMMIT",SWEEP="SWEEP",TOGGLE_ACTION="TOGGLE_ACTION",SET_ACTIONS_ACTIVE="SET_ACTIONS_ACTIVE",JUMP_TO_STATE="JUMP_TO_STATE",JUMP_TO_ACTION="JUMP_TO_ACTION",IMPORT_STATE="IMPORT_STATE",LOCK_CHANGES="LOCK_CHANGES",PAUSE_RECORDING="PAUSE_RECORDING",PerformAction=(0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_2__.Z)(function pe(N,S){if((0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_3__.Z)(this,pe),this.action=N,this.timestamp=S,this.type=PERFORM_ACTION,typeof N.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}),Refresh=(0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_2__.Z)(function pe(){(0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_3__.Z)(this,pe),this.type=REFRESH}),Reset=(0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_2__.Z)(function pe(N){(0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_3__.Z)(this,pe),this.timestamp=N,this.type=RESET}),Rollback=(0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_2__.Z)(function pe(N){(0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_3__.Z)(this,pe),this.timestamp=N,this.type=ROLLBACK}),Commit=(0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_2__.Z)(function pe(N){(0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_3__.Z)(this,pe),this.timestamp=N,this.type=COMMIT}),Sweep=(0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_2__.Z)(function pe(){(0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_3__.Z)(this,pe),this.type=SWEEP}),ToggleAction=(0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_2__.Z)(function pe(N){(0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_3__.Z)(this,pe),this.id=N,this.type=TOGGLE_ACTION}),SetActionsActive=null,JumpToState=(0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_2__.Z)(function pe(N){(0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_3__.Z)(this,pe),this.index=N,this.type=JUMP_TO_STATE}),JumpToAction=(0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_2__.Z)(function pe(N){(0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_3__.Z)(this,pe),this.actionId=N,this.type=JUMP_TO_ACTION}),ImportState=(0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_2__.Z)(function pe(N){(0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_3__.Z)(this,pe),this.nextLiftedState=N,this.type=IMPORT_STATE}),LockChanges=(0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_2__.Z)(function pe(N){(0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_3__.Z)(this,pe),this.status=N,this.type=LOCK_CHANGES}),PauseRecording=(0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_2__.Z)(function pe(N){(0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_3__.Z)(this,pe),this.status=N,this.type=PAUSE_RECORDING}),StoreDevtoolsConfig=(0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_2__.Z)(function pe(){(0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_3__.Z)(this,pe),this.maxAge=!1}),STORE_DEVTOOLS_CONFIG=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.InjectionToken("@ngrx/store-devtools Options"),INITIAL_OPTIONS=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.InjectionToken("@ngrx/store-devtools Initial Config");function noMonitor(){return null}var DEFAULT_NAME="NgRx Store DevTools";function createConfig(pe){var N={maxAge:!1,monitor:noMonitor,actionSanitizer:void 0,stateSanitizer:void 0,name:DEFAULT_NAME,serialize:!1,logOnly:!1,autoPause:!1,trace:!1,traceLimit:75,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0}},S="function"==typeof pe?pe():pe,q=S.features||!!S.logOnly&&{pause:!0,export:!0,test:!0}||N.features;!0===q.import&&(q.import="custom");var Z=Object.assign({},N,{features:q},S);if(Z.maxAge&&Z.maxAge<2)throw new Error("Devtools 'maxAge' cannot be less than 2, got ".concat(Z.maxAge));return Z}function difference(pe,N){return pe.filter(function(S){return N.indexOf(S)<0})}function unliftState(pe){var N=pe.computedStates,S=pe.currentStateIndex;return S>=N.length?N[N.length-1].state:N[S].state}function unliftAction(pe){return pe.actionsById[pe.nextActionId-1]}function liftAction(pe){return new PerformAction(pe,+Date.now())}function sanitizeActions(pe,N){return Object.keys(N).reduce(function(S,M){var q=Number(M);return S[q]=sanitizeAction(pe,N[q],q),S},{})}function sanitizeAction(pe,N,S){return(0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_4__.Z)((0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_4__.Z)({},N),{},{action:pe(N.action,S)})}function sanitizeStates(pe,N){return N.map(function(S,M){return{state:sanitizeState(pe,S.state,M),error:S.error}})}function sanitizeState(pe,N,S){return pe(N,S)}function shouldFilterActions(pe){return pe.predicate||pe.actionsSafelist||pe.actionsBlocklist}function filterLiftedState(pe,N,S,M){var q=[],Z={},r=[];return pe.stagedActionIds.forEach(function(_,p){var g=pe.actionsById[_];g&&(p&&isActionFiltered(pe.computedStates[p],g,N,S,M)||(Z[_]=g,q.push(_),r.push(pe.computedStates[p])))}),(0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_4__.Z)((0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_4__.Z)({},pe),{},{stagedActionIds:q,actionsById:Z,computedStates:r})}function isActionFiltered(pe,N,S,M,q){var Z=S&&!S(pe,N.action),r=M&&!N.action.type.match(M.map(function(p){return escapeRegExp(p)}).join("|")),_=q&&N.action.type.match(q.map(function(p){return escapeRegExp(p)}).join("|"));return Z||r||_}function escapeRegExp(pe){return pe.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var DevtoolsDispatcher=function(){var pe=function(N){(0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_5__.Z)(M,N);var S=(0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_6__.Z)(M);function M(){return(0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_3__.Z)(this,M),S.apply(this,arguments)}return(0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_2__.Z)(M)}(_ngrx_store__WEBPACK_IMPORTED_MODULE_7__.UO);return pe.\u0275fac=function(){var N;return function(M){return(N||(N=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275getInheritedFactory(pe)))(M||pe)}}(),pe.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineInjectable({token:pe,factory:pe.\u0275fac}),pe}(),ExtensionActionTypes={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},REDUX_DEVTOOLS_EXTENSION=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.InjectionToken("@ngrx/store-devtools Redux Devtools Extension"),DevtoolsExtension=function(){var DevtoolsExtension=function(){function DevtoolsExtension(pe,N,S){(0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_3__.Z)(this,DevtoolsExtension),this.config=N,this.dispatcher=S,this.devtoolsExtension=pe,this.createActionStreams()}return(0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_2__.Z)(DevtoolsExtension,[{key:"notify",value:function(N,S){var M=this;if(this.devtoolsExtension)if(N.type===PERFORM_ACTION){if(S.isLocked||S.isPaused)return;var q=unliftState(S);if(shouldFilterActions(this.config)&&isActionFiltered(q,N,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;var Z=this.config.stateSanitizer?sanitizeState(this.config.stateSanitizer,q,S.currentStateIndex):q,r=this.config.actionSanitizer?sanitizeAction(this.config.actionSanitizer,N,S.nextActionId):N;this.sendToReduxDevtools(function(){return M.extensionConnection.send(r,Z)})}else{var _=(0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_4__.Z)((0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_4__.Z)({},S),{},{stagedActionIds:S.stagedActionIds,actionsById:this.config.actionSanitizer?sanitizeActions(this.config.actionSanitizer,S.actionsById):S.actionsById,computedStates:this.config.stateSanitizer?sanitizeStates(this.config.stateSanitizer,S.computedStates):S.computedStates});this.sendToReduxDevtools(function(){return M.devtoolsExtension.send(null,_,M.getExtensionConfig(M.config))})}}},{key:"createChangesObservable",value:function(){var N=this;return this.devtoolsExtension?new rxjs__WEBPACK_IMPORTED_MODULE_9__.y(function(S){var M=N.devtoolsExtension.connect(N.getExtensionConfig(N.config));return N.extensionConnection=M,M.init(),M.subscribe(function(q){return S.next(q)}),M.unsubscribe}):rxjs__WEBPACK_IMPORTED_MODULE_8__.E}},{key:"createActionStreams",value:function(){var N=this,S=this.createChangesObservable().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.B)()),M=S.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.h)(function(g){return g.type===ExtensionActionTypes.START})),q=S.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.h)(function(g){return g.type===ExtensionActionTypes.STOP})),Z=S.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.h)(function(g){return g.type===ExtensionActionTypes.DISPATCH}),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.U)(function(g){return N.unwrapAction(g.payload)}),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.b)(function(g){return g.type===IMPORT_STATE?N.dispatcher.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.h)(function(y){return y.type===_ngrx_store__WEBPACK_IMPORTED_MODULE_7__.wb}),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.V)(1e3),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.b)(1e3),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.U)(function(){return g}),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_16__.K)(function(){return(0,rxjs__WEBPACK_IMPORTED_MODULE_17__.of)(g)}),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_18__.q)(1)):(0,rxjs__WEBPACK_IMPORTED_MODULE_17__.of)(g)})),_=S.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.h)(function(g){return g.type===ExtensionActionTypes.ACTION}),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.U)(function(g){return N.unwrapAction(g.payload)})).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.R)(q)),p=Z.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.R)(q));this.start$=M.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.R)(q)),this.actions$=this.start$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.w)(function(){return _})),this.liftedActions$=this.start$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.w)(function(){return p}))}},{key:"unwrapAction",value:function unwrapAction(action){return"string"==typeof action?eval("(".concat(action,")")):action}},{key:"getExtensionConfig",value:function pe(N){var S,M,q,Z={name:N.name,features:N.features,serialize:N.serialize,autoPause:null!==(S=N.autoPause)&&void 0!==S&&S,trace:null!==(M=N.trace)&&void 0!==M&&M,traceLimit:null!==(q=N.traceLimit)&&void 0!==q?q:75};return!1!==N.maxAge&&(Z.maxAge=N.maxAge),Z}},{key:"sendToReduxDevtools",value:function pe(N){try{N()}catch(S){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",S)}}}]),DevtoolsExtension}();return DevtoolsExtension.\u0275fac=function pe(N){return new(N||DevtoolsExtension)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275inject(REDUX_DEVTOOLS_EXTENSION),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275inject(STORE_DEVTOOLS_CONFIG),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275inject(DevtoolsDispatcher))},DevtoolsExtension.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineInjectable({token:DevtoolsExtension,factory:DevtoolsExtension.\u0275fac}),DevtoolsExtension}(),INIT_ACTION={type:_ngrx_store__WEBPACK_IMPORTED_MODULE_7__.qg},RECOMPUTE="@ngrx/store-devtools/recompute",RECOMPUTE_ACTION={type:RECOMPUTE};function computeNextEntry(pe,N,S,M,q){if(M)return{state:S,error:"Interrupted by an error up the chain"};var r,Z=S;try{Z=pe(S,N)}catch(_){r=_.toString(),q.handleError(_)}return{state:Z,error:r}}function recomputeStates(pe,N,S,M,q,Z,r,_,p){if(N>=pe.length&&pe.length===Z.length)return pe;for(var g=pe.slice(0,N),y=Z.length-(p?1:0),E=N;E<y;E++){var O=Z[E],$=q[O].action,v=g[E-1],b=v?v.state:M,V=v?v.error:void 0,H=r.indexOf(O)>-1?v:computeNextEntry(S,$,b,V,_);g.push(H)}return p&&g.push(pe[pe.length-1]),g}function liftInitialState(pe,N){return{monitorState:N(void 0,{}),nextActionId:1,actionsById:{0:liftAction(INIT_ACTION)},stagedActionIds:[0],skippedActionIds:[],committedState:pe,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function liftReducerWith(pe,N,S,M){var q=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return function(Z){return function(r,_){var p=r||N,g=p.monitorState,y=p.actionsById,E=p.nextActionId,O=p.stagedActionIds,$=p.skippedActionIds,v=p.committedState,b=p.currentStateIndex,V=p.computedStates,G=p.isLocked,H=p.isPaused;function te(Re){for(var ne=Re,Fe=O.slice(1,ne+1),rt=0;rt<Fe.length;rt++){if(V[rt+1].error){Fe=O.slice(1,(ne=rt)+1);break}delete y[Fe[rt]]}$=$.filter(function(Te){return-1===Fe.indexOf(Te)}),O=[0].concat((0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_21__.Z)(O.slice(ne+1))),v=V[ne].state,V=V.slice(ne),b=b>ne?b-ne:0}function z(){y={0:liftAction(INIT_ACTION)},E=1,O=[0],$=[],v=V[b].state,b=0,V=[]}r||(y=Object.create(y));var W=0;switch(_.type){case LOCK_CHANGES:G=_.status,W=1/0;break;case PAUSE_RECORDING:(H=_.status)?(O=[].concat((0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_21__.Z)(O),[E]),y[E]=new PerformAction({type:"@ngrx/devtools/pause"},+Date.now()),E++,W=O.length-1,V=V.concat(V[V.length-1]),b===O.length-2&&b++,W=1/0):z();break;case RESET:y={0:liftAction(INIT_ACTION)},E=1,O=[0],$=[],v=pe,b=0,V=[];break;case COMMIT:z();break;case ROLLBACK:y={0:liftAction(INIT_ACTION)},E=1,O=[0],$=[],b=0,V=[];break;case TOGGLE_ACTION:var J=_.id,se=$.indexOf(J);$=-1===se?[J].concat((0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_21__.Z)($)):$.filter(function(Re){return Re!==J}),W=O.indexOf(J);break;case SET_ACTIONS_ACTIVE:for(var ve=_.start,xe=_.end,ge=_.active,x=[],D=ve;D<xe;D++)x.push(D);$=ge?difference($,x):[].concat((0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_21__.Z)($),x),W=O.indexOf(ve);break;case JUMP_TO_STATE:b=_.index,W=1/0;break;case JUMP_TO_ACTION:var P=O.indexOf(_.actionId);-1!==P&&(b=P),W=1/0;break;case SWEEP:O=difference(O,$),$=[],b=Math.min(b,O.length-1);break;case PERFORM_ACTION:if(G)return r||N;if(H||r&&isActionFiltered(r.computedStates[b],_,q.predicate,q.actionsSafelist,q.actionsBlocklist)){var I=V[V.length-1];V=[].concat((0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_21__.Z)(V.slice(0,-1)),[computeNextEntry(Z,_.action,I.state,I.error,S)]),W=1/0;break}q.maxAge&&O.length===q.maxAge&&te(1),b===O.length-1&&b++;var j=E++;y[j]=_,W=(O=[].concat((0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_21__.Z)(O),[j])).length-1;break;case IMPORT_STATE:var R=_.nextLiftedState;g=R.monitorState,y=R.actionsById,E=R.nextActionId,O=R.stagedActionIds,$=R.skippedActionIds,v=R.committedState,b=R.currentStateIndex,V=R.computedStates,G=R.isLocked,H=R.isPaused;break;case _ngrx_store__WEBPACK_IMPORTED_MODULE_7__.qg:W=0,q.maxAge&&O.length>q.maxAge&&(V=recomputeStates(V,W,Z,v,y,O,$,S,H),te(O.length-q.maxAge),W=1/0);break;case _ngrx_store__WEBPACK_IMPORTED_MODULE_7__.wb:if(V.filter(function(Re){return Re.error}).length>0)W=0,q.maxAge&&O.length>q.maxAge&&(V=recomputeStates(V,W,Z,v,y,O,$,S,H),te(O.length-q.maxAge),W=1/0);else{if(!H&&!G){b===O.length-1&&b++;var ee=E++;y[ee]=new PerformAction(_,+Date.now()),O=[].concat((0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_21__.Z)(O),[ee]),V=recomputeStates(V,W=O.length-1,Z,v,y,O,$,S,H)}V=V.map(function(Re){return(0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_4__.Z)((0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_4__.Z)({},Re),{},{state:Z(Re.state,RECOMPUTE_ACTION)})}),b=O.length-1,q.maxAge&&O.length>q.maxAge&&te(O.length-q.maxAge),W=1/0}break;default:W=1/0}return V=recomputeStates(V,W,Z,v,y,O,$,S,H),{monitorState:g=M(g,_),actionsById:y,nextActionId:E,stagedActionIds:O,skippedActionIds:$,committedState:v,currentStateIndex:b,computedStates:V,isLocked:G,isPaused:H}}}}var StoreDevtools=function(){var pe=function(){function N(S,M,q,Z,r,_,p,g){var y=this;(0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_3__.Z)(this,N);var E=liftInitialState(p,g.monitor),O=liftReducerWith(p,E,_,g.monitor,g),$=(0,rxjs__WEBPACK_IMPORTED_MODULE_22__.T)((0,rxjs__WEBPACK_IMPORTED_MODULE_22__.T)(M.asObservable().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_23__.T)(1)),Z.actions$).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.U)(liftAction)),S,Z.liftedActions$).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_24__.Q)(rxjs__WEBPACK_IMPORTED_MODULE_25__.N)),v=q.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.U)(O)),b=new rxjs__WEBPACK_IMPORTED_MODULE_26__.t(1),V=$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_27__.M)(v),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_28__.R)(function(z,W){var J=z.state,se=(0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_29__.Z)(W,2),ve=se[0],ge=(0,se[1])(J,ve);return ve.type!==PERFORM_ACTION&&shouldFilterActions(g)&&(ge=filterLiftedState(ge,g.predicate,g.actionsSafelist,g.actionsBlocklist)),Z.notify(ve,ge),{state:ge,action:ve}},{state:E,action:null})).subscribe(function(z){var J=z.action;b.next(z.state),J.type===PERFORM_ACTION&&r.next(J.action)}),G=Z.start$.subscribe(function(){y.refresh()}),H=b.asObservable(),te=H.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.U)(unliftState));Object.defineProperty(te,"state",{value:(0,_angular_core_rxjs_interop__WEBPACK_IMPORTED_MODULE_1__.toSignal)(te,{manualCleanup:!0,requireSync:!0})}),this.extensionStartSubscription=G,this.stateSubscription=V,this.dispatcher=S,this.liftedState=H,this.state=te}return(0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_2__.Z)(N,[{key:"dispatch",value:function(M){this.dispatcher.next(M)}},{key:"next",value:function(M){this.dispatcher.next(M)}},{key:"error",value:function(M){}},{key:"complete",value:function(){}},{key:"performAction",value:function(M){this.dispatch(new PerformAction(M,+Date.now()))}},{key:"refresh",value:function(){this.dispatch(new Refresh)}},{key:"reset",value:function(){this.dispatch(new Reset(+Date.now()))}},{key:"rollback",value:function(){this.dispatch(new Rollback(+Date.now()))}},{key:"commit",value:function(){this.dispatch(new Commit(+Date.now()))}},{key:"sweep",value:function(){this.dispatch(new Sweep)}},{key:"toggleAction",value:function(M){this.dispatch(new ToggleAction(M))}},{key:"jumpToAction",value:function(M){this.dispatch(new JumpToAction(M))}},{key:"jumpToState",value:function(M){this.dispatch(new JumpToState(M))}},{key:"importState",value:function(M){this.dispatch(new ImportState(M))}},{key:"lockChanges",value:function(M){this.dispatch(new LockChanges(M))}},{key:"pauseRecording",value:function(M){this.dispatch(new PauseRecording(M))}}]),N}();return pe.\u0275fac=function(S){return new(S||pe)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275inject(DevtoolsDispatcher),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275inject(_ngrx_store__WEBPACK_IMPORTED_MODULE_7__.UO),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275inject(_ngrx_store__WEBPACK_IMPORTED_MODULE_7__.n$),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275inject(DevtoolsExtension),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275inject(_ngrx_store__WEBPACK_IMPORTED_MODULE_7__.Y$),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275inject(_angular_core__WEBPACK_IMPORTED_MODULE_0__.ErrorHandler),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275inject(_ngrx_store__WEBPACK_IMPORTED_MODULE_7__.Y6),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275inject(STORE_DEVTOOLS_CONFIG))},pe.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineInjectable({token:pe,factory:pe.\u0275fac}),pe}(),IS_EXTENSION_OR_MONITOR_PRESENT=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.InjectionToken("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function createIsExtensionOrMonitorPresent(pe,N){return!!pe||N.monitor!==noMonitor}function createReduxDevtoolsExtension(){var pe="__REDUX_DEVTOOLS_EXTENSION__";return"object"==typeof window&&typeof window[pe]<"u"?window[pe]:null}function provideStoreDevtools(){return(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.makeEnvironmentProviders)([DevtoolsExtension,DevtoolsDispatcher,StoreDevtools,{provide:INITIAL_OPTIONS,useValue:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}},{provide:IS_EXTENSION_OR_MONITOR_PRESENT,deps:[REDUX_DEVTOOLS_EXTENSION,STORE_DEVTOOLS_CONFIG],useFactory:createIsExtensionOrMonitorPresent},{provide:REDUX_DEVTOOLS_EXTENSION,useFactory:createReduxDevtoolsExtension},{provide:STORE_DEVTOOLS_CONFIG,deps:[INITIAL_OPTIONS],useFactory:createConfig},{provide:_ngrx_store__WEBPACK_IMPORTED_MODULE_7__.FR,deps:[StoreDevtools],useFactory:createStateObservable},{provide:_ngrx_store__WEBPACK_IMPORTED_MODULE_7__.mK,useExisting:DevtoolsDispatcher}])}function createStateObservable(pe){return pe.state}var StoreDevtoolsModule=function(){var pe=function(){function N(){(0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_3__.Z)(this,N)}return(0,_home_runner_work_climatewarrior_climatewarrior_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_2__.Z)(N,null,[{key:"instrument",value:function(){return{ngModule:N,providers:[provideStoreDevtools(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})]}}}]),N}();return pe.\u0275fac=function(S){return new(S||pe)},pe.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineNgModule({type:pe}),pe.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineInjector({}),pe}()},93896:(pe,N,S)=>{S.d(N,{hg:()=>un,UO:()=>Qe,qg:()=>tt,Y6:()=>it,PB:()=>Pn,mK:()=>yt,n$:()=>Ai,Y$:()=>Cn,FR:()=>Fr,yh:()=>Qn,CK:()=>vr,Aw:()=>oi,cr:()=>gr,wb:()=>Pt,UY:()=>De,qC:()=>ar,PH:()=>I,ZF:()=>ls,Lq:()=>$r,P1:()=>Ta,rM:()=>So,on:()=>Jr,Ky:()=>j,Ys:()=>Xr});var M=S(95106),q=S(60609),Z=S(32090),r=S(35488),_=S(86170),p=S(78069),g=S(48047),y=S(4089),E=S(20265),O=S(24582),$=S(28694),v=S(77797),b=S(35603),V=S(56718),G=S(76317),H=S(90833),te=S(50253),z=S(34915),W=S(8728),J=S(10538),se=S(24503),ve=S(50635);function xe(){for(var Le=arguments.length,ct=new Array(Le),lt=0;lt<Le;lt++)ct[lt]=arguments[lt];var wt=ct.length;if(0===wt)throw new Error("list of properties cannot be empty.");return(0,ve.U)(function(Ft){for(var Rt=Ft,Yt=0;Yt<wt;Yt++){var vn=Rt?.[ct[Yt]];if(!(typeof vn<"u"))return;Rt=vn}return Rt})}var ge=S(98977),x=S(64610),D={};function I(Le,ct){if(D[Le]=(D[Le]||0)+1,"function"==typeof ct)return Q(Le,function(){return(0,b.Z)((0,b.Z)({},ct.apply(void 0,arguments)),{},{type:Le})});switch(ct?ct._as:"empty"){case"empty":return Q(Le,function(){return{type:Le}});case"props":return Q(Le,function(wt){return(0,b.Z)((0,b.Z)({},wt),{},{type:Le})});default:throw new Error("Unexpected config.")}}function j(){return{_as:"props",_p:void 0}}function Q(Le,ct){return Object.defineProperty(ct,"type",{value:Le,writable:!1})}var tt="@ngrx/store/init",Qe=function(){var Le=function(ct){(0,O.Z)(wt,ct);var lt=(0,$.Z)(wt);function wt(){return(0,p.Z)(this,wt),lt.call(this,{type:tt})}return(0,g.Z)(wt,[{key:"next",value:function(Rt){if("function"==typeof Rt)throw new TypeError("\n        Dispatch expected an object, instead it received a function.\n        If you're using the createAction function, make sure to invoke the function\n        before dispatching the action. For example, someAction should be someAction().");if(typeof Rt>"u")throw new TypeError("Actions must be objects");if(typeof Rt.type>"u")throw new TypeError("Actions must have a type property");(0,y.Z)((0,E.Z)(wt.prototype),"next",this).call(this,Rt)}},{key:"complete",value:function(){}},{key:"ngOnDestroy",value:function(){(0,y.Z)((0,E.Z)(wt.prototype),"complete",this).call(this)}}]),wt}(G.X);return Le.\u0275fac=function(lt){return new(lt||Le)},Le.\u0275prov=V.\u0275\u0275defineInjectable({token:Le,factory:Le.\u0275fac}),Le}(),vt=[Qe],et=new V.InjectionToken("@ngrx/store Internal Root Guard"),$e=new V.InjectionToken("@ngrx/store Internal Initial State"),it=new V.InjectionToken("@ngrx/store Initial State"),de=new V.InjectionToken("@ngrx/store Reducer Factory"),Y=new V.InjectionToken("@ngrx/store Internal Reducer Factory Provider"),oe=new V.InjectionToken("@ngrx/store Initial Reducers"),ke=new V.InjectionToken("@ngrx/store Internal Initial Reducers"),Be=new V.InjectionToken("@ngrx/store Store Features"),fe=new V.InjectionToken("@ngrx/store Internal Store Reducers"),ye=new V.InjectionToken("@ngrx/store Internal Feature Reducers"),ut=new V.InjectionToken("@ngrx/store Internal Feature Configs"),be=new V.InjectionToken("@ngrx/store Internal Store Features"),le=new V.InjectionToken("@ngrx/store Internal Feature Reducers Token"),ce=new V.InjectionToken("@ngrx/store Feature Reducers"),Ie=new V.InjectionToken("@ngrx/store User Provided Meta Reducers"),ot=new V.InjectionToken("@ngrx/store Meta Reducers"),Tt=new V.InjectionToken("@ngrx/store Internal Resolved Meta Reducers"),Nt=new V.InjectionToken("@ngrx/store User Runtime Checks Config"),Gt=new V.InjectionToken("@ngrx/store Internal User Runtime Checks Config"),un=new V.InjectionToken("@ngrx/store Internal Runtime Checks"),Xt=new V.InjectionToken("@ngrx/store Check if Action types are unique");function De(Le){for(var ct=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},lt=Object.keys(Le),wt={},Ft=0;Ft<lt.length;Ft++){var Rt=lt[Ft];"function"==typeof Le[Rt]&&(wt[Rt]=Le[Rt])}var Yt=Object.keys(wt);return function(Sn,Jn){Sn=void 0===Sn?ct:Sn;for(var In=!1,dr={},ai=0;ai<Yt.length;ai++){var Mr=Yt[ai],Ci=Sn[Mr],Ur=(0,wt[Mr])(Ci,Jn);dr[Mr]=Ur,In=In||Ur!==Ci}return In?dr:Sn}}function ar(){for(var Le=arguments.length,ct=new Array(Le),lt=0;lt<Le;lt++)ct[lt]=arguments[lt];return function(wt){if(0===ct.length)return wt;var Ft=ct[ct.length-1];return ct.slice(0,-1).reduceRight(function(Yt,vn){return vn(Yt)},Ft(wt))}}function Qt(Le,ct){return Array.isArray(ct)&&ct.length>0&&(Le=ar.apply(null,[].concat((0,_.Z)(ct),[Le]))),function(lt,wt){var Ft=Le(lt);return function(Rt,Yt){return Ft(Rt=void 0===Rt?wt:Rt,Yt)}}}new V.InjectionToken("@ngrx/store Root Store Provider"),new V.InjectionToken("@ngrx/store Feature State Provider");var Ai=function(Le){(0,O.Z)(lt,Le);var ct=(0,$.Z)(lt);function lt(){return(0,p.Z)(this,lt),ct.apply(this,arguments)}return(0,g.Z)(lt)}(H.y),yt=function(Le){(0,O.Z)(lt,Le);var ct=(0,$.Z)(lt);function lt(){return(0,p.Z)(this,lt),ct.apply(this,arguments)}return(0,g.Z)(lt)}(Qe),Pt="@ngrx/store/update-reducers",Pn=function(){var Le=function(ct){(0,O.Z)(wt,ct);var lt=(0,$.Z)(wt);function wt(Ft,Rt,Yt,vn){var Sn;return(0,p.Z)(this,wt),(Sn=lt.call(this,vn(Yt,Rt))).dispatcher=Ft,Sn.initialState=Rt,Sn.reducers=Yt,Sn.reducerFactory=vn,Sn}return(0,g.Z)(wt,[{key:"currentReducers",get:function(){return this.reducers}},{key:"addFeature",value:function(Rt){this.addFeatures([Rt])}},{key:"addFeatures",value:function(Rt){var Yt=Rt.reduce(function(vn,Sn){var Jn=Sn.reducers,In=Sn.reducerFactory,dr=Sn.metaReducers,ai=Sn.initialState,Mr=Sn.key,Yr="function"==typeof Jn?function Co(Le){var ct=Array.isArray(Le)&&Le.length>0?ar.apply(void 0,(0,_.Z)(Le)):function(lt){return lt};return function(lt,wt){return lt=ct(lt),function(Ft,Rt){return lt(Ft=void 0===Ft?wt:Ft,Rt)}}}(dr)(Jn,ai):Qt(In,dr)(Jn,ai);return vn[Mr]=Yr,vn},{});this.addReducers(Yt)}},{key:"removeFeature",value:function(Rt){this.removeFeatures([Rt])}},{key:"removeFeatures",value:function(Rt){this.removeReducers(Rt.map(function(Yt){return Yt.key}))}},{key:"addReducer",value:function(Rt,Yt){this.addReducers((0,v.Z)({},Rt,Yt))}},{key:"addReducers",value:function(Rt){this.reducers=(0,b.Z)((0,b.Z)({},this.reducers),Rt),this.updateReducers(Object.keys(Rt))}},{key:"removeReducer",value:function(Rt){this.removeReducers([Rt])}},{key:"removeReducers",value:function(Rt){var Yt=this;Rt.forEach(function(vn){Yt.reducers=function Zr(Le,ct){return Object.keys(Le).filter(function(lt){return lt!==ct}).reduce(function(lt,wt){return Object.assign(lt,(0,v.Z)({},wt,Le[wt]))},{})}(Yt.reducers,vn)}),this.updateReducers(Rt)}},{key:"updateReducers",value:function(Rt){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:Pt,features:Rt})}},{key:"ngOnDestroy",value:function(){this.complete()}}]),wt}(G.X);return Le.\u0275fac=function(lt){return new(lt||Le)(V.\u0275\u0275inject(yt),V.\u0275\u0275inject(it),V.\u0275\u0275inject(oe),V.\u0275\u0275inject(de))},Le.\u0275prov=V.\u0275\u0275defineInjectable({token:Le,factory:Le.\u0275fac}),Le}(),Gn=[Pn,{provide:Ai,useExisting:Pn},{provide:yt,useExisting:Qe}],Cn=function(){var Le=function(ct){(0,O.Z)(wt,ct);var lt=(0,$.Z)(wt);function wt(){return(0,p.Z)(this,wt),lt.apply(this,arguments)}return(0,g.Z)(wt,[{key:"ngOnDestroy",value:function(){this.complete()}}]),wt}(te.x);return Le.\u0275fac=function(){var ct;return function(wt){return(ct||(ct=V.\u0275\u0275getInheritedFactory(Le)))(wt||Le)}}(),Le.\u0275prov=V.\u0275\u0275defineInjectable({token:Le,factory:Le.\u0275fac}),Le}(),ln=[Cn],Fr=function(Le){(0,O.Z)(lt,Le);var ct=(0,$.Z)(lt);function lt(){return(0,p.Z)(this,lt),ct.apply(this,arguments)}return(0,g.Z)(lt)}(H.y),lr=function(){var Le=function(ct){(0,O.Z)(wt,ct);var lt=(0,$.Z)(wt);function wt(Ft,Rt,Yt,vn){var Sn;(0,p.Z)(this,wt),Sn=lt.call(this,vn);var ai=Ft.pipe((0,W.Q)(z.N)).pipe((0,J.M)(Rt)).pipe((0,se.R)(wn,{state:vn}));return Sn.stateSubscription=ai.subscribe(function(Mr){var Ci=Mr.action;Sn.next(Mr.state),Yt.next(Ci)}),Sn.state=(0,x.toSignal)((0,r.Z)(Sn),{manualCleanup:!0,requireSync:!0}),Sn}return(0,g.Z)(wt,[{key:"ngOnDestroy",value:function(){this.stateSubscription.unsubscribe(),this.complete()}}]),wt}(G.X);return Le.INIT=tt,Le.\u0275fac=function(lt){return new(lt||Le)(V.\u0275\u0275inject(Qe),V.\u0275\u0275inject(Ai),V.\u0275\u0275inject(Cn),V.\u0275\u0275inject(it))},Le.\u0275prov=V.\u0275\u0275defineInjectable({token:Le,factory:Le.\u0275fac}),Le}();function wn(){var Le=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{state:void 0},lt=(0,Z.Z)(arguments.length>1?arguments[1]:void 0,2),wt=lt[0];return{state:(0,lt[1])(Le.state,wt),action:wt}}var Ar=[lr,{provide:Fr,useExisting:lr}],Qn=function(){var Le=function(ct){(0,O.Z)(wt,ct);var lt=(0,$.Z)(wt);function wt(Ft,Rt,Yt){var vn;return(0,p.Z)(this,wt),(vn=lt.call(this)).actionsObserver=Rt,vn.reducerManager=Yt,vn.source=Ft,vn.state=Ft.state,vn}return(0,g.Z)(wt,[{key:"select",value:function(Rt){for(var Yt=arguments.length,vn=new Array(Yt>1?Yt-1:0),Sn=1;Sn<Yt;Sn++)vn[Sn-1]=arguments[Sn];return Xr.call.apply(Xr,[null,Rt].concat(vn))(this)}},{key:"selectSignal",value:function(Rt,Yt){var vn=this;return(0,V.computed)(function(){return Rt(vn.state())},{equal:Yt?.equal||function(Sn,Jn){return Sn===Jn}})}},{key:"lift",value:function(Rt){var Yt=new wt(this,this.actionsObserver,this.reducerManager);return Yt.operator=Rt,Yt}},{key:"dispatch",value:function(Rt){this.actionsObserver.next(Rt)}},{key:"next",value:function(Rt){this.actionsObserver.next(Rt)}},{key:"error",value:function(Rt){this.actionsObserver.error(Rt)}},{key:"complete",value:function(){this.actionsObserver.complete()}},{key:"addReducer",value:function(Rt,Yt){this.reducerManager.addReducer(Rt,Yt)}},{key:"removeReducer",value:function(Rt){this.reducerManager.removeReducer(Rt)}}]),wt}(H.y);return Le.\u0275fac=function(lt){return new(lt||Le)(V.\u0275\u0275inject(Fr),V.\u0275\u0275inject(Qe),V.\u0275\u0275inject(Pn))},Le.\u0275prov=V.\u0275\u0275defineInjectable({token:Le,factory:Le.\u0275fac}),Le}(),Ni=[Qn];function Xr(Le,ct){for(var lt=arguments.length,wt=new Array(lt>2?lt-2:0),Ft=2;Ft<lt;Ft++)wt[Ft-2]=arguments[Ft];return function(Yt){var vn;if("string"==typeof Le){var Sn=[ct].concat(wt).filter(Boolean);vn=Yt.pipe(xe.apply(void 0,[Le].concat((0,_.Z)(Sn))))}else{if("function"!=typeof Le)throw new TypeError("Unexpected type '".concat(typeof Le,"' in select operator,")+" expected 'string' or 'function'");vn=Yt.pipe((0,ve.U)(function(Jn){return Le(Jn,ct)}))}return vn.pipe((0,ge.x)())}}var jr="https://ngrx.io/guide/store/configuration/runtime-checks";function di(Le){return void 0===Le}function Lo(Le){return null===Le}function Gi(Le){return Array.isArray(Le)}function Hi(Le){return"object"==typeof Le&&null!==Le}function Ti(Le){return"function"==typeof Le}var hr=!1;function So(){return hr}function fi(Le,ct){return Le===ct}function Eo(Le){var Rt,ct=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fi,lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fi,wt=null,Ft=null;return{memoized:function Jn(){if(void 0!==Rt)return Rt.result;if(!wt)return Ft=Le.apply(null,arguments),wt=arguments,Ft;if(!function fo(Le,ct,lt){for(var wt=0;wt<Le.length;wt++)if(!lt(Le[wt],ct[wt]))return!0;return!1}(arguments,wt,ct))return Ft;var In=Le.apply(null,arguments);return wt=arguments,lt(Ft,In)?Ft:(Ft=In,In)},reset:function Yt(){wt=null,Ft=null},setResult:function vn(){Rt={result:arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0}},clearResult:function Sn(){Rt=void 0}}}function Ta(){return function Ia(Le){var ct=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{stateFn:cs};return function(){for(var lt=arguments.length,wt=new Array(lt),Ft=0;Ft<lt;Ft++)wt[Ft]=arguments[Ft];var Rt=wt;if(Array.isArray(Rt[0])){var vn=(0,q.Z)(Rt),Sn=vn[0],Jn=vn.slice(1);Rt=[].concat((0,_.Z)(Sn),(0,_.Z)(Jn))}else 1===Rt.length&&function Us(Le){return!!Le&&"object"==typeof Le&&Object.values(Le).every(function(ct){return"function"==typeof ct})}(Rt[0])&&(Rt=function Oa(Le){var ct=Object.values(Le),lt=Object.keys(Le);return[].concat(ct,[function(){for(var Rt=arguments.length,Yt=new Array(Rt),vn=0;vn<Rt;vn++)Yt[vn]=arguments[vn];return lt.reduce(function(Sn,Jn,In){return(0,b.Z)((0,b.Z)({},Sn),{},(0,v.Z)({},Jn,Yt[In]))},{})}])}(Rt[0]));var In=Rt.slice(0,Rt.length-1),dr=Rt[Rt.length-1],ai=In.filter(function(Ur){return Ur.release&&"function"==typeof Ur.release}),Mr=Le(function(){for(var Ur=arguments.length,tr=new Array(Ur),Lr=0;Lr<Ur;Lr++)tr[Lr]=arguments[Lr];return dr.apply(null,tr)}),Yr=Eo(function(Ur,tr){return ct.stateFn.apply(null,[Ur,In,tr,Mr])});return Object.assign(Yr.memoized,{release:function Ci(){Yr.reset(),Mr.reset(),ai.forEach(function(Ur){return Ur.release()})},projector:Mr.memoized,setResult:Yr.setResult,clearResult:Yr.clearResult})}}(Eo).apply(void 0,arguments)}function cs(Le,ct,lt,wt){if(void 0===lt){var Ft=ct.map(function(Yt){return Yt(Le)});return wt.memoized.apply(null,Ft)}var Rt=ct.map(function(Yt){return Yt(Le,lt)});return wt.memoized.apply(null,[].concat((0,_.Z)(Rt),[lt]))}function ls(Le){return Ta(function(ct){var lt=ct[Le];return!So()&&(0,V.isDevMode)()&&!(Le in ct)&&console.warn('@ngrx/store: The feature name "'.concat(Le,'" does ')+"not exist in the state, therefore createFeatureSelector cannot access it.  Be sure it is imported in a loaded module "+"using StoreModule.forRoot('".concat(Le,"', ...) or ")+"StoreModule.forFeature('".concat(Le,"', ...).  If the default ")+"state is intended to be undefined, as is the case with router state, this development-only warning message can be ignored."),lt},function(ct){return ct})}function A(Le){return Le instanceof V.InjectionToken?(0,V.inject)(Le):Le}function k(Le,ct){return ct.map(function(lt,wt){if(Le[wt]instanceof V.InjectionToken){var Ft=(0,V.inject)(Le[wt]);return{key:lt.key,reducerFactory:Ft.reducerFactory?Ft.reducerFactory:De,metaReducers:Ft.metaReducers?Ft.metaReducers:[],initialState:Ft.initialState}}return lt})}function L(Le){return Le.map(function(ct){return ct instanceof V.InjectionToken?(0,V.inject)(ct):ct})}function X(Le){return"function"==typeof Le?Le():Le}function ie(Le,ct){return Le.concat(ct)}function he(){if((0,V.inject)(Qn,{optional:!0,skipSelf:!0}))throw new TypeError("The root Store has been provided more than once. Feature modules should provide feature states instead.");return"guarded"}function Ne(Le){Object.freeze(Le);var ct=Ti(Le);return Object.getOwnPropertyNames(Le).forEach(function(lt){if(!lt.startsWith("\u0275")&&function Qr(Le,ct){return Object.prototype.hasOwnProperty.call(Le,ct)}(Le,lt)&&(!ct||"caller"!==lt&&"callee"!==lt&&"arguments"!==lt)){var wt=Le[lt];(Hi(wt)||Ti(wt))&&!Object.isFrozen(wt)&&Ne(wt)}}),Le}function Ze(Le){var ct=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(di(Le)||Lo(Le))&&0===ct.length?{path:["root"],value:Le}:Object.keys(Le).reduce(function(wt,Ft){if(wt)return wt;var Rt=Le[Ft];return function gi(Le){return Ti(Le)&&Le.hasOwnProperty("\u0275cmp")}(Rt)?wt:!(di(Rt)||Lo(Rt)||function Ri(Le){return"number"==typeof Le}(Rt)||function Vi(Le){return"boolean"==typeof Le}(Rt)||function jo(Le){return"string"==typeof Le}(Rt)||Gi(Rt))&&(function Di(Le){if(!function wo(Le){return Hi(Le)&&!Gi(Le)}(Le))return!1;var ct=Object.getPrototypeOf(Le);return ct===Object.prototype||null===ct}(Rt)?Ze(Rt,[].concat((0,_.Z)(ct),[Ft])):{path:[].concat((0,_.Z)(ct),[Ft]),value:Rt})},!1)}function Ue(Le,ct){if(!1!==Le){var lt=Le.path.join("."),wt=new Error("Detected unserializable ".concat(ct,' at "').concat(lt,'". ').concat(jr,"#strict").concat(ct,"serializability"));throw wt.value=Le.value,wt.unserializablePath=lt,wt}}function We(Le){return(0,V.isDevMode)()?(0,b.Z)({strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!0,strictActionImmutability:!0,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1},Le):{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1}}function nt(Le){var ct=Le.strictActionSerializability,lt=Le.strictStateSerializability;return function(wt){return ct||lt?function Me(Le,ct){return function(lt,wt){ct.action(wt)&&Ue(Ze(wt),"action");var Rt=Le(lt,wt);return ct.state()&&Ue(Ze(Rt),"state"),Rt}}(wt,{action:function(Rt){return ct&&!gt(Rt)},state:function(){return lt}}):wt}}function d(Le){var ct=Le.strictActionImmutability,lt=Le.strictStateImmutability;return function(wt){return ct||lt?function Pe(Le,ct){return function(lt,wt){var Ft=ct.action(wt)?Ne(wt):wt,Rt=Le(lt,Ft);return ct.state()?Ne(Rt):Rt}}(wt,{action:function(Rt){return ct&&!gt(Rt)},state:function(){return lt}}):wt}}function gt(Le){return Le.type.startsWith("@ngrx")}function Et(Le){var ct=Le.strictActionWithinNgZone;return function(lt){return ct?function Ve(Le,ct){return function(lt,wt){if(ct.action(wt)&&!V.NgZone.isInAngularZone())throw new Error("Action '".concat(wt.type,"' running outside NgZone. ").concat(jr,"#strictactionwithinngzone"));return Le(lt,wt)}}(lt,{action:function(Ft){return ct&&!gt(Ft)}}):lt}}function Ee(Le){return[{provide:Gt,useValue:Le},{provide:Nt,useFactory:Ke,deps:[Gt]},{provide:un,deps:[Nt],useFactory:We},{provide:ot,multi:!0,deps:[un],useFactory:d},{provide:ot,multi:!0,deps:[un],useFactory:nt},{provide:ot,multi:!0,deps:[un],useFactory:Et}]}function Ge(){return[{provide:Xt,multi:!0,deps:[un],useFactory:Xe}]}function Ke(Le){return Le}function Xe(Le){if(Le.strictActionTypeUniqueness){var ct=Object.entries(D).filter(function(lt){return(0,Z.Z)(lt,2)[1]>1}).map(function(lt){return(0,Z.Z)(lt,1)[0]});if(ct.length)throw new Error("Action types are registered more than once, ".concat(ct.map(function(lt){return'"'.concat(lt,'"')}).join(", "),". ").concat(jr,"#strictactiontypeuniqueness"))}}function kt(){var Le=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ct=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return[{provide:et,useFactory:he},{provide:$e,useValue:ct.initialState},{provide:it,useFactory:X,deps:[$e]},{provide:ke,useValue:Le},{provide:fe,useExisting:Le instanceof V.InjectionToken?Le:ke},{provide:oe,deps:[ke,[new V.Inject(fe)]],useFactory:A},{provide:Ie,useValue:ct.metaReducers?ct.metaReducers:[]},{provide:Tt,deps:[ot,Ie],useFactory:ie},{provide:Y,useValue:ct.reducerFactory?ct.reducerFactory:De},{provide:de,deps:[Y,Tt],useFactory:Qt},vt,Gn,ln,Ar,Ni,Ee(ct.runtimeChecks),Ge()]}function sr(Le,ct){var lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return[{provide:ut,multi:!0,useValue:Le instanceof Object?{}:lt},{provide:Be,multi:!0,useValue:{key:Le instanceof Object?Le.name:Le,reducerFactory:lt instanceof V.InjectionToken||!lt.reducerFactory?De:lt.reducerFactory,metaReducers:lt instanceof V.InjectionToken||!lt.metaReducers?[]:lt.metaReducers,initialState:lt instanceof V.InjectionToken||!lt.initialState?void 0:lt.initialState}},{provide:be,deps:[ut,Be],useFactory:k},{provide:ye,multi:!0,useValue:Le instanceof Object?Le.reducer:ct},{provide:le,multi:!0,useExisting:ct instanceof V.InjectionToken?ct:ye},{provide:ce,multi:!0,deps:[ye,[new V.Inject(le)]],useFactory:L},Ge()]}var gr=function(){var Le=(0,g.Z)(function ct(lt,wt,Ft,Rt,Yt,vn){(0,p.Z)(this,ct)});return Le.\u0275fac=function(lt){return new(lt||Le)(V.\u0275\u0275inject(Qe),V.\u0275\u0275inject(Ai),V.\u0275\u0275inject(Cn),V.\u0275\u0275inject(Qn),V.\u0275\u0275inject(et,8),V.\u0275\u0275inject(Xt,8))},Le.\u0275mod=V.\u0275\u0275defineNgModule({type:Le}),Le.\u0275inj=V.\u0275\u0275defineInjector({}),Le}(),vr=function(){var Le=function(){function ct(lt,wt,Ft,Rt,Yt){(0,p.Z)(this,ct),this.features=lt,this.featureReducers=wt,this.reducerManager=Ft;var vn=lt.map(function(Sn,Jn){var dr=wt.shift()[Jn];return(0,b.Z)((0,b.Z)({},Sn),{},{reducers:dr,initialState:X(Sn.initialState)})});Ft.addFeatures(vn)}return(0,g.Z)(ct,[{key:"ngOnDestroy",value:function(){this.reducerManager.removeFeatures(this.features)}}]),ct}();return Le.\u0275fac=function(lt){return new(lt||Le)(V.\u0275\u0275inject(be),V.\u0275\u0275inject(ce),V.\u0275\u0275inject(Pn),V.\u0275\u0275inject(gr),V.\u0275\u0275inject(Xt,8))},Le.\u0275mod=V.\u0275\u0275defineNgModule({type:Le}),Le.\u0275inj=V.\u0275\u0275defineInjector({}),Le}(),oi=function(){var Le=function(){function ct(){(0,p.Z)(this,ct)}return(0,g.Z)(ct,null,[{key:"forRoot",value:function(wt,Ft){return{ngModule:gr,providers:(0,_.Z)(kt(wt,Ft))}}},{key:"forFeature",value:function(wt,Ft){return{ngModule:vr,providers:(0,_.Z)(sr(wt,Ft,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}))}}}]),ct}();return Le.\u0275fac=function(lt){return new(lt||Le)},Le.\u0275mod=V.\u0275\u0275defineNgModule({type:Le}),Le.\u0275inj=V.\u0275\u0275defineInjector({}),Le}();function Jr(){for(var Le=arguments.length,ct=new Array(Le),lt=0;lt<Le;lt++)ct[lt]=arguments[lt];return{reducer:ct.pop(),types:ct.map(function(Rt){return Rt.type})}}function $r(Le){for(var ct=new Map,lt=arguments.length,wt=new Array(lt>1?lt-1:0),Ft=1;Ft<lt;Ft++)wt[Ft-1]=arguments[Ft];for(var Rt=function(){var dr,Jn=vn[Yt],In=(0,M.Z)(Jn.types);try{var ai=function(){var Yr=dr.value,Ci=ct.get(Yr);ct.set(Yr,Ci?function(Lr,Po){return Jn.reducer(Ci(Lr,Po),Po)}:Jn.reducer)};for(In.s();!(dr=In.n()).done;)ai()}catch(Mr){In.e(Mr)}finally{In.f()}},Yt=0,vn=wt;Yt<vn.length;Yt++)Rt();return function(){var Sn=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,Jn=arguments.length>1?arguments[1]:void 0,In=ct.get(Jn.type);return In?In(Sn,Jn):Sn}}},77797:(pe,N,S)=>{S.d(N,{Z:()=>q});var M=S(51299);function q(Z,r,_){return(r=(0,M.Z)(r))in Z?Object.defineProperty(Z,r,{value:_,enumerable:!0,configurable:!0,writable:!0}):Z[r]=_,Z}},35603:(pe,N,S)=>{S.d(N,{Z:()=>Z});var M=S(77797);function q(r,_){var p=Object.keys(r);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(r);_&&(g=g.filter(function(y){return Object.getOwnPropertyDescriptor(r,y).enumerable})),p.push.apply(p,g)}return p}function Z(r){for(var _=1;_<arguments.length;_++){var p=null!=arguments[_]?arguments[_]:{};_%2?q(Object(p),!0).forEach(function(g){(0,M.Z)(r,g,p[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(p)):q(Object(p)).forEach(function(g){Object.defineProperty(r,g,Object.getOwnPropertyDescriptor(p,g))})}return r}}}]);
//# sourceMappingURL=276.1bb6e03cd4ce44fd.js.map